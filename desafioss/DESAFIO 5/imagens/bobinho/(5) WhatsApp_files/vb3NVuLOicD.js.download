;/*FB_PKG_DELIM*/

__d("WAWebDataSharingOptOutOrUpsell",["fbt","WASmaxInBizSettingsEnums","WAWebCTWADataSharingModel","WAWebCheckBox.react","WAWebCopyPasteSelectable.react","WAWebDataSharingUpsellModel","WAWebDrawerManager","WAWebFlex.react","WAWebModalManager","WAWebSMBDataSharingDrawer.react","WAWebSMBDataSharingSettingAction","WAWebUISpacing","WAWebWDSText.react","WAWebWamEnumSmbDataSharingConsentSettingEntryPoint","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useState,n={themeOrderCreate:{backgroundColor:"x1pl83jw",$$css:!0},themeLabelsOptOut:{borderTopWidth:"x178xt8z",borderTopStyle:"x13fuv20",borderTopColor:"xog00wb",$$css:!0}},o=function(a){d("WAWebModalManager").ModalManager.close(),d("WAWebDrawerManager").DrawerManager.openDrawerLeft(k.jsx(c("WAWebSMBDataSharingDrawer.react"),{onClose:function(){return d("WAWebDrawerManager").DrawerManager.closeDrawerLeft()},entrypoint:a}))};function p(a){var b=a.children,c=a.entryPoint;return k.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{className:"x1ypdohk",id:"data-sharing-learn-more-link",selectable:!0,onClick:function(){return o(c)},children:b})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.checkboxValue,c=a.entryPoint,e=a.onCheckboxToggle;a=a.theme;a=a==="labels-opt-out"?h._("__JHASH__1Xq15p5pQdJ__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:c,children:h._("__JHASH__tmQ7MojBTej__JHASH__")}))]):h._("__JHASH__-3HURnKmtVO__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:c,children:h._("__JHASH__nM41f85EY-I__JHASH__")}))]);return k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebCheckBox.react").CheckBox,{checked:b,onChange:e}),k.jsx(d("WAWebWDSText.react").WDSTextSmall,{color:"secondary",xstyle:d("WAWebUISpacing").uiMargin.start16,children:a})]})}q.displayName=q.name+" [from "+f.id+"]";function r(a){a=a.entryPoint;return k.jsx(d("WAWebWDSText.react").WDSTextSmall,{color:"secondary",children:h._("__JHASH__pYuJ86ohGD3__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:a,children:h._("__JHASH__UU6CPff_gqR__JHASH__")}))])})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.checkboxValue,e=a.onCheckboxToggle;a=a.theme;var f=c("useWAWebUnmountSignal")(),g=m(null),h=g[0],i=g[1];l(function(){void d("WAWebSMBDataSharingSettingAction").getSMBDataSharingSettingAction().then(function(a){f.aborted||(i(a),d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(i))});return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(i)}},[f.aborted]);if(h==null||h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset)return null;var j;a==="order-create"?j=[n.themeOrderCreate,d("WAWebUISpacing").uiPadding.start16,d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.bottom32]:a==="order-update"?j=[d("WAWebUISpacing").uiPadding.start28,d("WAWebUISpacing").uiPadding.top48,d("WAWebUISpacing").uiPadding.bottom16]:a==="labels-opt-out"&&(j=[n.themeLabelsOptOut,d("WAWebUISpacing").uiMargin.top24,d("WAWebUISpacing").uiPadding.top12,d("WAWebUISpacing").uiPadding.start30]);g=h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];h=h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]&&c("WAWebDataSharingUpsellModel").isUpsellEnabled();var o;a==="labels-opt-out"?o=d("WAWebWamEnumSmbDataSharingConsentSettingEntryPoint").SMB_DATA_SHARING_CONSENT_SETTING_ENTRY_POINT.ENTRY_POINT_LABELS_SCREEN:(a,o=d("WAWebWamEnumSmbDataSharingConsentSettingEntryPoint").SMB_DATA_SHARING_CONSENT_SETTING_ENTRY_POINT.ENTRY_POINT_ORDER_SCREEN);return k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",xstyle:j,children:[h?k.jsx(r,{entryPoint:o}):null,g?k.jsx(q,{theme:a,entryPoint:o,checkboxValue:b,onCheckboxToggle:e}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.OptOutText=q;g.UpsellText=r;g.DataSharingOptOutOrUpsell=a}),226);
__d("WAWebOrderDetailRadioButton.react",["WAWebCheckBoxRound.react","WAWebFlex.react","WAWebUISpacing","WAWebUnstyledButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b,e=a.checked,f=a.isCanceled,g=a.label,h=a.onClick;a=a.testid;return i.jsx(c("WAWebUnstyledButton.react"),{onClick:h,testid:void 0,children:i.jsxs(d("WAWebFlex.react").FlexRow,{children:[i.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:[d("WAWebUISpacing").uiPadding.start12,d("WAWebUISpacing").uiPadding.end24],children:i.jsx(c("WAWebCheckBoxRound.react"),{checked:e,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:function(){return void h()}})}),i.jsx("div",{className:f?"x1sr8853":null,children:g})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderStatusUpdateDrawer.react",["fbt","WALogger","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebBizOrderStatusLabels","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebButton.react","WAWebCTWADataSharingModel","WAWebCmd","WAWebCommonCTWADataSharing","WAWebConfirmPopup.react","WAWebConstantsDeprecated","WAWebDataSharingOptOutOrUpsell","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFbtCommon","WAWebFlex.react","WAWebModalManager","WAWebOrderDetailMath","WAWebOrderDetailRadioButton.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebOrdersExpansionUtils","WAWebRichTextField.react","WAWebSmb3pdConversionSignalAction","WAWebSmbMarkAsXOrderAction","WAWebSwitch.react","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error opening chat"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error sending order status in chat"]);m=function(){return a};return a}b=k||d("react");var n=i||(i=c("react")),o=b.useEffect,p=b.useMemo,q=b.useState,r=d("WAWebBizGatingUtils").isOrderStatusM1Enabled()?[d("WAWebOrderStatus").OrderStatus.PaymentRequested,d("WAWebOrderStatus").OrderStatus.PreparingToShip,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Delivered,d("WAWebOrderStatus").OrderStatus.Canceled]:[d("WAWebOrderStatus").OrderStatus.Processing,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Complete,d("WAWebOrderStatus").OrderStatus.Canceled],s={checkboxContainer:{rowGap:"x1na6gtj",columnGap:"x1qgv0r9",$$css:!0},spacer:{height:"xqtp20y",borderTopWidth:"x178xt8z",borderTopStyle:"x13fuv20",borderTopColor:"xyj1x25",$$css:!0}};function t(a){a=a.xstyle;return n.jsx("div",{className:(j||(j=c("stylex")))(s.spacer,d("WAWebUISpacing").uiMargin.top16,a)})}t.displayName=t.name+" [from "+f.id+"]";var u=function(a,b,e,f){if(c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingOrderOptOutOrUpsell(a,"order-update",b))return n.jsx(d("WAWebDataSharingOptOutOrUpsell").DataSharingOptOutOrUpsell,{theme:"order-update",onCheckboxToggle:function(){return f(!e)},checkboxValue:e})},v=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]};e=n.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=q(v);var f=a[0],g=a[1];a=q("");var i=a[0],k=a[1],w=p(function(){return d("WAWebOrderStatus").findOrderStatus(e.chat,e.orderInfo.referenceId)},[e.chat,e.orderInfo.referenceId]),x=p(function(){return d("WAWebOrderPaymentStatus").findLastOrderPaymentStatusInfo(e.chat,e.orderInfo.referenceId)},[e.chat,e.orderInfo.referenceId]);a=q(w);var y=a[0],z=a[1];a=q((x==null?void 0:x.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured);var A=a[0],B=a[1];o(function(){var a=function(a){return g(a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"])};d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(a);return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(a)}},[]);var C=e.chat,D=e.sellerJid,E=e.orderInfo,F="no_method_confirmed",G=function(){var a;a=(a=(a=E.externalPaymentConfigurations)==null?void 0:(a=a.at(0))==null?void 0:a.type)!=null?a:F;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_MARK_AS_PAID,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasNote:Boolean(i),paymentStatus:!0,paymentType:a}).commit()};function H(a,b,c,e){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),a&&(J(!b,c,e),f&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForOrders({chat:C,orderStatus:y,paidData:{amount:String(E.totalAmount),currency:E.currency,paid:A},type:"order_updated",isPaidStateChanged:!0})),b&&I(c,e)}function I(a,b){var g=d("WAWebUserPrefsMeUser").getMaybeMeUser();g=g?d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(g)):!1;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_STATUS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasCatalog:g,hasNote:Boolean(i)}).commit();d("WAWebBizSendOrderAction").sendOrderStatusMessageAsMerchant({chat:C,sellerJid:D,orderInfo:E,orderNote:i,orderStatus:a,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:b?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null})["catch"](function(a){d("WALogger").ERROR(m()).verbose().devConsole(a)});d("WAWebSmbMarkAsXOrderAction").markOrderAsUpdatedStatusAction(C,f,y,A);f&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForOrders({chat:C,orderStatus:y,paidData:{amount:String(E.totalAmount),currency:E.currency,paid:A},type:"order_updated"});d("WAWebCmd").Cmd.openChatFromUnread(C)["catch"](function(a){d("WALogger").ERROR(l()).verbose().devConsole(a)})}function J(a,b,c){d("WAWebBizSendOrderAction").sendOrderPaymentStatusMessageAsMerchant({chat:C,sellerJid:D,orderInfo:E,orderNote:a?i:null,orderStatus:b,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:c?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null})["finally"](function(){G()})}function K(a){return r.findIndex(function(b){return b===a})}function L(){var a=K(y),b=K(w),e=(x==null?void 0:x.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured,f=a!==b,g=e!==A;e=!f&&!g;a=a<b;var i=y,j=A;d("WAWebBizGatingUtils").isOrderStatusM1Enabled()&&(g&&(A?y===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(i=d("WAWebOrderStatus").OrderStatus.PreparingToShip):!A&&y===d("WAWebOrderStatus").OrderStatus.PreparingToShip&&(i=d("WAWebOrderStatus").OrderStatus.PaymentRequested)),f&&(A&&y===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(j=!1)));e?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__sq5vCQ5USss__JHASH__"),okText:c("WAWebFbtCommon")("OK"),onOK:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__MokQoGmWX6F__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))]):h._("__JHASH__1vB_eHa7weV__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))])})):a?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__8N28pK0sbYA__JHASH__"),okText:h._("__JHASH__IBFlvfnDAy4__JHASH__"),onOK:function(){H(g,f,i,j),d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__Zxn4YYs9oaP__JHASH__"),onCancel:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__bZ2ScGcUD7R__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(y))]):h._("__JHASH__UARVCowcoXl__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(y))])})):H(g,f,i,j)}a=h._("__JHASH__W9JHo2yaW9d__JHASH__");var M=function(){B(!A)};return n.jsxs(c("WAWebDrawer.react"),{onDrop:e.onBack,ref:b,children:[n.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__jHYMghYQIO6__JHASH__"):h._("__JHASH__IaAnh-WqNbE__JHASH__"),onBack:e.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),n.jsx(c("WAWebDrawerBody.react"),{children:n.jsxs(c("WAWebDrawerSection.react"),{children:[d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&n.jsxs(n.Fragment,{children:[n.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.horiz16],children:[n.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:d("WAWebUISpacing").uiPadding.end24,children:n.jsx(d("WAWebSwitch.react").Switch,{checked:A,onChange:M,testid:void 0})}),n.jsx("div",{children:h._("__JHASH__g87pBZZ6PR8__JHASH__")})]}),n.jsx(t,{xstyle:d("WAWebUISpacing").uiMargin.bottom16})]}),n.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert4,d("WAWebUISpacing").uiPadding.horiz16),children:n.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:s.checkboxContainer,children:r.map(function(a){return n.jsx(c("WAWebOrderDetailRadioButton.react"),{testid:void 0,label:d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(a),isCanceled:a===d("WAWebOrderStatus").OrderStatus.Canceled,checked:y===a,onClick:function(){z(a)}},a)})})}),n.jsx(t,{}),n.jsx("div",{className:j(d("WAWebUISpacing").uiPadding.horiz28),children:n.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:c("WAWebConstantsDeprecated").MAX_CART_MESSAGE_LENGTH,placeholder:a,value:i,testid:void 0,multiline:!0,showRemaining:!0,spellCheck:!0,emojiBtnPosition:"side",textFormatEnabled:!0,onEnter:L,onChange:function(a){return k(a.text)}})}),u(e.chat,E.items.length,f,g),n.jsx(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiMargin.top8,d("WAWebUISpacing").uiMargin.bottom24],children:n.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:L,children:h._("__JHASH__ozB-3Zgb8C4__JHASH__")})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);