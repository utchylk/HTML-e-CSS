;/*FB_PKG_DELIM*/

/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error("no PRNG")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error("bad key size");if(b.length!==ra)throw new Error("bad nonce size")}function Ha(a,b){if(a.length!==wa)throw new Error("bad public key size");if(b.length!==xa)throw new Error("bad secret key size")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error("bad n size");if(b.length!==ua)throw new Error("bad p size");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error("bad n size");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error("bad secret key size");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error("bad secret key size");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error("bad signature size");if(c.length!==Ca)throw new Error("bad public key size");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error("bad secret key size");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error("bad seed size");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!=="undefined"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-1.0.3")()}),null);
__d("WACryptoDependencies",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=self.crypto;function a(a){h=a;var b=65536;d("tweetnacl").setPRNG(function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];for(e=0;e<f.length;e++)f[e]=0})}function b(){return h}g.setCrypto=a;g.getCrypto=b}),98);
__d("WAErr",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new Error(a);if(a.stack===void 0)try{throw a}catch(a){}return a}f["default"]=a}),66);
__d("WAHex",["WACryptoDependencies","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=16,i=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],j=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return k(a)}function k(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(i[d>>4],i[d&15])}return String.fromCharCode.apply(String,b)}function b(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(j[d>>4],j[d&15])}return String.fromCharCode.apply(String,b)}function e(a){a=m(a);if(a.length%2!==0)throw c("WAErr")('parseHex given hex "'+a+'" which is not a multiple of 8-bits.');var b=new Uint8Array(a.length>>1);for(var d=0,e=0;d<a.length;d+=2,e++)b[e]=l(a,d)<<4|l(a,d+1);return b.buffer}function l(a,b){a=a.charCodeAt(b);if(a<=57)return a-48;else if(a<=70)return 10+a-65;else return 10+a-97}function m(a){if(/[^0-9a-fA-F]/.test(a))throw c("WAErr")('"'+a+'" is not a valid hex');return a}function f(a){var b=a.buffer;return a.byteOffset===0&&a.length===b.byteLength?b:b.slice(a.byteOffset,a.byteOffset+a.length)}function n(a){var b=!0,c=a.length;while(b&&c){var d=a[--c];b=32<=d&&d<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return k(a)}function o(a,b){b===void 0&&(b=!1);a=m(a);w(a,h);return(b?"-":"")+"0x"+q(a,h)}function p(a,b,c){c===void 0&&(c=!1);a=x(a);b=x(b);return(c?"-":"")+"0x"+a+b}function q(a,b){b=b-a.length;a=a;for(var c=0;c<b;c++)a="0"+a;return a}function r(a){var b=a<0;a=b?(-a).toString(16):a.toString(16);return o(a,b)}function s(a){return a.substring(a.indexOf("0x")+2)}function t(a){return a[0]==="-"}function u(a,b){var c=t(a),d=t(b);if(c!==d)return!c;d=s(a)>s(b);return c?!d:d}function v(a){return t(a)?a.slice(1):"-"+a}function w(a,b){if(a.length>b)throw c("WAErr")('"'+a+'" is longer than '+b*4+" bits.")}function x(a){if(a>4294967295||a<-4294967296)throw c("WAErr")("uint32ToLowerCaseHex given number over 32 bits");a=(a>=0?a:4294967296+a).toString(16);return q(a,8)}g.NUM_HEX_IN_LONG=h;g.HEX_LOWER=j;g.randomHex=a;g.toHex=k;g.toLowerCaseHex=b;g.parseHex=e;g.hexAt=l;g.hexOrThrow=m;g.bytesToBuffer=f;g.bytesToDebugString=n;g.createHexLong=o;g.createHexLongFrom32Bits=p;g.hexLongFromNumber=r;g.hexLongToHex=s;g.hexLongIsNegative=t;g.isBiggerHexLong=u;g.negateHexLong=v}),98);
__d("WALoggerUtils",["WAHex"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(typeof a==="string")return"'"+a+"'";else if(a==null||typeof a!=="object")return String(a);else if(Array.isArray(a))return"["+a.join(",")+"]";else if(a instanceof Uint8Array)if(a.length<64)return"<<"+i(a)+">>";else{var b=a.subarray(0,32);return"<<"+i(b)+", "+(a.length-b.length)+" more bytes>>"}else if(a instanceof Error)return a.name?"("+a.name+")":"";else if(a.toString===Object.prototype.toString)return JSON.stringify(a,function(a,b){return a?String(b):b});else return String(a)}function i(a){var b=!0,c=a.length;while(b&&c){var e=a[--c];b=32<=e&&e<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return d("WAHex").toHex(a)}function a(a,b){var c=[a[0]];b.forEach(function(b,d){c.push(h(b),a[d+1])});return c.join("")}function b(a){return a}g.debugStr=h;g.bytesToDebugString=i;g.rebuildTemplate=a;g.dynamicLoggingSampling=b}),98);
__d("WANullthrows",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b="?");if(a==null)throw c("WAErr")("Unexpected null or undefined: "+b);return a}g["default"]=a}),98);
__d("WATagsLogger",["Promise","WALoggerUtils","WANullthrows","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] ",""]);i=function(){return a};return a}var j,k=new(h||b("Promise"))(function(a){j=a});function a(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(k);case 2:case"end":return a.stop()}},null,this)}var l=null;function e(a){l=a,j==null?void 0:j(),j=null}function m(){return c("WANullthrows")(l,"WALogger called before initialization")}function n(a){return{TAGS:function(b){return n([].concat(a,b))},DEV:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"DEV",template:b,expressions:e,logString:g};m().debug(g,a,h);return o(h)},DEV_XMPP:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"DEV_XMPP",template:b,expressions:e,logString:g};m().logRestricted(g,a,h);return o(h)},LOG:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"LOG",template:b,expressions:e,logString:g};m().info(g,a,h);return o(h)},WARN:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"WARN",template:b,expressions:e,logString:g};m().warn(g,a,h);return o(h)},ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"ERROR",template:b,expressions:e,logString:g},i=void 0;for(var j=0;j<e.length;j++){var k=e[j];if(k instanceof Error){i=k;break}}i!=null?m().error(g,a,i,h):m().error(g,a,void 0,h);return o(h)},CATCHING:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"CATCHING",template:b,expressions:e,logString:g};m().error(g,a,void 0,h);return o(h)},EXPECTED_ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"ERROR",template:b,expressions:e,logString:g,tags:[].concat(a)};return o(h)}}}function o(a){return{verbose:function(){a.verbose=!0;return o(a)},color:function(b){a.color=b;return o(a)},devConsole:function(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];(b=m()).devConsole.apply(b,[a.level,a.logString,[]].concat(d));return o(a)},sendLogs:function(b,c){if(m().sendLogs!=null)a.sendLogs={reason:b,sampling:c==null?void 0:c.sampling,sendLogsType:c==null?void 0:c.sendLogsType},m().sendLogs==null?void 0:m().sendLogs(a);else if(a.level!=="ERROR"&&a.level!=="CATCHING")return n([]).ERROR(i(),b,a.logString);return o(a)},tags:function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];a.tags=c;m().tags!=null&&(m().tags==null?void 0:m().tags(c));return o(a)},expect:function(b){if(a.level!=="ERROR")return o(a);var c=void 0;for(var d=a.expressions,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g instanceof Error){c=g;break}}f=(d=(f=(g=c)==null?void 0:g.message)!=null?f:(e=c)==null?void 0:e.name)!=null?d:(g=c)==null?void 0:g.description;for(e=0;e<b.length;e++){d=b[e];if(f==null?void 0:f.includes(d)){m().error(a.logString,[].concat((g=a.tags)!=null?g:[],["expected-error-log"]),(d=c)!=null?d:void 0,a);return o(a)}}m().error(a.logString,(g=a==null?void 0:a.tags)!=null?g:[],(d=c)!=null?d:void 0,a);return o(a)}}}g.whenReady=a;g.initializeWaLogger=e;g.TAGS=n;g.getWaLoggerAdditionalOptions=o}),98);
__d("WALogger",["$InternalEnum","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum").Mirrored(["UNCAUGHT_EXCEPTION_SAD","UNHANDLED_REJECTED_PROMISE_SAD","CRASH_OR_UNRECOVERABLE_ERROR_SAD","USER_FORCEFULLY_LOGGED_OUT_SAD","UNCATEGORIZED_SAD","EXTREMELY_BAD_USER_EXPERIENCE_SAD","UNCAUGHT_EXCEPTION","UNHANDLED_REJECTED_PROMISE","MINOR_ISSUE","INVESTIGATION","COUNTING_STAT","UNCATEGORIZED"]);c=new Set([a.UNCATEGORIZED_SAD,a.UNCAUGHT_EXCEPTION_SAD,a.UNHANDLED_REJECTED_PROMISE_SAD,a.CRASH_OR_UNRECOVERABLE_ERROR_SAD,a.USER_FORCEFULLY_LOGGED_OUT_SAD,a.EXTREMELY_BAD_USER_EXPERIENCE_SAD]);e=d("WATagsLogger").TAGS([]);f=e.DEV;b=e.DEV_XMPP;d=e.LOG;var h=e.WARN,i=e.ERROR;e=e.EXPECTED_ERROR;g.SendLogsType=a;g.SadSendLogsTypes=c;g.DEV=f;g.DEV_XMPP=b;g.LOG=d;g.WARN=h;g.ERROR=i;g.EXPECTED_ERROR=e}),98);
__d("WAWebAddonConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Unified","Pin","Comment","PollVote","Reaction","EventResponse","None"]);c=b("$InternalEnum").Mirrored(["OnlineReceive","HistorySync","Send","SendRevoke","SendRetry","Revoke","DeleteForMe","DeleteWithParent","Hydration","MarkAsRead","SetAck"]);d=Object.freeze({Regular:"Regular",WithRevokes:"WithRevokes",DualEncrypted:"DualEncrypted",DualEncryptedWithMessageTraits:"DualEncryptedWithMessageTraits"});e=Object.freeze({PinInChat:1});f.AddonTableMode=a;f.AddonProcessMode=c;f.AddonProcessorType=d;f.AddonMinimizedType=e}),66);
__d("WAWebAddonLogUtils",[],(function(a,b,c,d,e,f){function a(a){return a.some(function(a){return a.status==="rejected"})}f.hasSettledWithError=a}),66);
__d("WABinary",["WAErr","WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c("WAErr")("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw c("WAErr")(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c("WAErr")("ParseError: varint exceeds 64 bits");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c("WAErr")(typeof a==="string"?'TyperError WriteError: string "'+a+'" is not a valid '+e:"TypeError WriteError: "+String(a)+" is not a valid "+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c("WAErr")("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WATimeUtils",["Promise","WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60,j=5*i,k=60*i,l=24*k,m=7*l,n=365*l,o=60*1e3,p=k*1e3,q=24*p,r=7*q,s=1<<31,t=~s,u=s+1,v={time:0,day:-4},w=0;function a(){return w}function c(a){w=a}function e(a){return W(a).toUTCString()}function x(a){a=a|0;return Math.max(u,Math.min(a,t))}function y(a){return x(a/1e3)}function f(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return x(a)}function z(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return C(a)}function A(a){return a==null?a:a>t?y(a):x(a)}function B(){return C(Z()-w*1e3)}function C(a){return a}function D(a){return a}function E(a){return C(a*1e3)}function F(a,b){var c=K();a=Math.max(a+b-c,0);return Math.min(1e3*a,~(1<<31))}function G(a,b){b=b!=null?b:K();return x(Math.ceil(b+Math.max(a,0)))}function H(a,b){b=b!=null?b:K();return x(Math.ceil(b-Math.max(a,0)))}function I(a){a=Math.max(a-K(),0);return Math.min(1e3*a,~(1<<31))}function J(a){var c=I(a);return new(h||(h=b("Promise")))(function(a){return void setTimeout(a,c)})}function K(){return x(Date.now()/1e3-w)}function L(){return x(Date.now()/1e3)}function M(){return x(new Date().setHours(0,0,0,0)/1e3-w)}function N(){return Date.now()-w*1e3}function O(a){return Math.max(a-K(),0)}function P(a){return O(a)>0}function Q(){return performance.now()}function R(a){return Math.floor(performance.now()-a)}function S(a,b){return a<b?a:b}var T=function(){function a(){var a=Q();this.$1=a;this.$2=a}var b=a.prototype;b.reset=function(){this.$2=Q()};b.elapsed=function(){return R(this.$2)};b.cumulative=function(){return R(this.$1)};return a}();function U(a,b,c){return Math.abs(a-b)<=c}function V(a,b){return U(K(),a,b)}function W(a){return new Date(a*1e3)}function X(a,b){if(Math.abs(a-b)>l)return!1;a=v.time===a?v.day:W(a+w).getDay();var c=v.time===b?v.day:W(b+w).getDay();v.time=b;v.day=c;return a===c}function Y(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(x(a)*1e3):null}function Z(){return Date.now()}function $(a){a=new Date(a);return isNaN(a)?null:y(a.getTime())}function aa(a,b){a=Math.abs(a-b);return Math.ceil(a/q)}g.MINUTE_SECONDS=i;g.FIVE_MINUTES=j;g.HOUR_SECONDS=k;g.DAY_SECONDS=l;g.WEEK_SECONDS=m;g.YEAR_SECONDS=n;g.MINUTE_MILLISECONDS=o;g.HOUR_MILLISECONDS=p;g.DAY_MILLISECONDS=q;g.WEEK_MILLISECONDS=r;g.DEFAULT_UNIXTIME=s;g.MAX_INT=t;g.getClockSkew=a;g.setClockSkew=c;g.toHttpHeaderDate=e;g.castToUnixTime=x;g.castMilliSecondsToUnixTime=y;g.castLongIntToUnixTime=f;g.castLongIntToMillisTime=z;g.castMillisTimeToUnixTime=A;g.millisTime=B;g.castToMillisTime=C;g.fromMillisTime=D;g.castUnixTimeToMillisTime=E;g.timeoutFor=F;g.futureUnixTime=G;g.pastUnixTime=H;g.cappedMillisecondsUntil=I;g.delayUntil=J;g.unixTime=K;g.unixTimeWithoutClockSkewCorrection=L;g.midnight=M;g.unixTimeMs=N;g.secondsUntil=O;g.isInFuture=P;g.monotonicTime=Q;g.monotonicTimeSince=R;g.oldest=S;g.MonotonicTimer=T;g.happenedWithinAt=U;g.happenedWithin=V;g.toDate=W;g.sameDay=X;g.convertHexToDate=Y;g.performanceAbsoluteNow=Z;g.convertISO8601DateFormatToUnixTime=$;g.daysDiff=aa}),98);
__d("WABase64",["WACryptoDependencies","WAErr","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""]);h=function(){return a};return a}var i=43,j=47,k=61,l=45,m=95,n=3e3,o="data:image/jpeg;base64,",p=function(a){return typeof a==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)};function q(a){return r(a,i,j,!0)}function a(a,b){b===void 0&&(b=!1);return r(a,l,m,b)}function r(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return s(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(s(a.subarray(f,f+n),b,c,d));return e.join("")}}function s(a,b,c,d){var e=Math.ceil(a.length*4/3),f=4*Math.ceil(a.length/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function t(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.ERROR!=null&&d("WALogger").ERROR(h(),i,f,j);return null}}j=g.length/4;for(b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function b(a){a=t(a,i,j,k);if(a)return a.buffer;else throw c("WAErr")("Base64.decode given invalid string")}function e(a,b){b===void 0&&(b=!1);a=t(a,l,m,b?k:-1);if(a)return a.buffer;else throw c("WAErr")("Base64.decode given invalid string")}function f(a){a=a instanceof ArrayBuffer?new Uint8Array(a):t(a,i,j,k);return a&&Array.from(a)}function u(a){return Math.floor(a.length*3/4)}function v(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return q(a)}g.BASE64_DATA_URL_SCHEME=o;g.isBase64=p;g.encodeB64=q;g.encodeB64UrlSafe=a;g.decodeB64=b;g.decodeB64UrlSafe=e;g.decodeB64ToJsArray=f;g.sizeWhenB64Decoded=u;g.randomBase64=v}),98);
__d("WAAssertUnreachable",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("WAErr")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
__d("WAJids",["WAAssertUnreachable","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="@g.us",m=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,ba="@call",n="@msgr",ca="msgr",o="@interop",da="interop",p=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,s=/^([1-9][0-9]{0,19})@msgr$/,t=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",u="@s.whatsapp.net",v="s.whatsapp.net",w="lid",x="@newsletter",y=/^([1-9][0-9]{0,19})@newsletter$/,z=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,A=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,B="@lid",ga="lid",C=/^([1-9][0-9]{0,14})@lid$/,D=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ha="@broadcast",E=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,F=/^([0-9a-fA-F]{18,32})@call$/,G="@hosted",H="hosted",I=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,J="@hosted.lid",K="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,M="@bot",ia=/^[1-9][0-9]{0,19}(:0)?@bot$/,ja="16505361212"+u,ka=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+u}function b(a){return""+a+B}function N(a){return""+a+n}function d(a){return a.endsWith(l)?a:""+a+l}function e(a){return a.endsWith(x)?a:""+a+x}function f(a){return a.endsWith(G)?a:""+a+G}function la(a){return a.endsWith(J)?a:""+a+J}function ma(){return l}function O(a){if(a.endsWith(u))return a.slice(0,-u.length);else if(a.endsWith(n))return a.slice(0,-n.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(B))return a.slice(0,-B.length);else if(a.endsWith(M))return a.slice(0,-M.length);else throw c("WAErr")('userIdFromJid called with non-user jid "'+a+'"')}function na(a,b){return Y(O(a)+":"+b+u)}function oa(a,b){return Z(O(a)+":"+b+n)}function pa(a,b){return xb(P(a)+":"+b+B)}function qa(a,b){return X(O(a)+":"+b+W(a))}function ra(a){return""+a+ha}function sa(a){return a.split("@")[0]}function ta(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function ua(a){a=ta(a);return a.deviceID}function va(a,b){if(a===i||a===j)return b;else return sa(a)}function wa(a){return a===i||a===j?null:a}function xa(a){if(a===i||a===j)return null;return!a.endsWith(u)?null:a}function ya(a){if(!a.endsWith(u))throw c("WAErr")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-u.length)}function za(a){if(a.endsWith(u))return ya(a);else if(a.endsWith(B))return P(a);throw c("WAErr")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function Aa(a){return a.endsWith(u)||a.endsWith(o)||a.endsWith(n)||a.endsWith(B)?a:null}function Ba(a){return a.endsWith(u)?a:null}function Ca(a){return a===k?null:$(a)}function Da(a){return a===k?null:$(a)}function Ea(a){return a===k?k:null}function P(a){if(!a.endsWith(B))throw c("WAErr")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-B.length)}function Q(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===H&&(a=v);a===K&&(a=w);return yb(b+"@"+a)}function Fa(a){return Q(a)}function Ga(a){return Q(a)}function Ha(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else if(a.jidType==="bot")return a.userJid;else{a.jidType;return a.broadcastJid}}function Ia(a){return Y(O(a)+":"+h+u)}function Ja(a){return Z(O(a)+":"+h+n)}function Ka(a){return pa(a,h)}function La(a){return ua(a)===h}function Ma(a){return Cb(a)}function Na(a){return a}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Oa(a){a=R(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Pa(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;case"bot":return a.userJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Qa(a){if(a===k)return{jidType:"status",statusJid:k};else if(A.test(a))return{jidType:"phoneUser",userJid:zb(a)};else if(q.test(a))return{jidType:"interopUser",userJid:Ab(a)};else if(s.test(a))return{jidType:"msgrUser",userJid:Bb(a)};else if(t.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:N(b)}}else if(z.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(p.test(a))return{jidType:"interopDevice",deviceJid:wb(a)};else if(r.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(m.test(a))return{jidType:"group",groupJid:a.endsWith(l)?a:""+a+l};else if(E.test(a))return{jidType:"broadcast",broadcastJid:a};else if(F.test(a))return{jidType:"call",callJid:a};else if(C.test(a))return{jidType:"lidUser",userJid:a};else if(D.test(a))return{jidType:"lidDevice",deviceJid:a};else if(y.test(a))return{jidType:"newsletter",newsletterJid:a};else if(I.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else if(ia.test(a))return{jidType:"bot",userJid:a};else return{jidType:"unknown"}}function Ra(a){return a==="status@broadcast"?a:null}function Sa(a){if(A.test(a)||q.test(a)||s.test(a)||C.test(a))return a;else if(t.test(a)){a=a.substr(0,a.indexOf(":"));return N(a)}else return null}function Ta(a){return E.test(a)?a:null}function Ua(a){if(z.test(a)||r.test(a)||p.test(a)||D.test(a)||I.test(a)||L.test(a))return a;if(A.test(a))return sb(a);return ia.test(a)?tb(a):null}function Va(a){return p.test(a)?a:null}function S(a){return m.test(a)?a:null}function Wa(a){return Ra(a)||S(a)||Ta(a)?a:null}function Xa(a){return F.test(a)?a:null}function Ya(a){return a==="s.whatsapp.net"||a==="g.us"||a==="call"?a:null}function Za(a){return Sa(a)||S(a)}function $a(a){return y.test(a)?a:null}function ab(a){return I.test(a)?a:null}function bb(a){return L.test(a)?a:null}function cb(a){return Aa(a)==null?$(a):null}function db(a){a=R(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function eb(a){if(a.endsWith(l))return a.slice(0,-l.length);else throw c("WAErr")('groupId called with non-group jid "'+a+'"')}function fb(a){var b=Qa(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Pa(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function gb(a){return!a.includes("@")?a:a.replace(ka,fb)}function T(a){if(a.endsWith(l))return $(a);else return null}function U(a,b){if(a.endsWith(u))return b.phoneUser(a);else if(a.endsWith(n))return b.msgrUser(a);else if(a.endsWith(o))return b.interopUser(a);else if(a.endsWith(B))return b.lidUser(a);else if(T(a)!=null)return b.group($(a));throw c("WAErr")("Can not switch on chat jid "+a)}function hb(a,b){if(a.endsWith(n))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("WAErr")("Can not switch on chat jid "+a)}function V(a,b){if(a.endsWith(u))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("WAErr")("Can not switch on chat jid "+a)}function ib(a,b){return U(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function jb(a,b){return a===k?b.status():V(a,{user:b.user,group:b.group})}function kb(a,b){return a===k?b.status():U(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function lb(a,b){return a===k?b.multicast(k):V(a,{user:b.user,group:b.multicast})}function mb(a){return a.endsWith(B)}function nb(a){return a==="@me"}function ob(a){return a==="@system"}function pb(){return n}function qb(){return u}function rb(){return ea}function W(a){if(a.endsWith(u))return u;else if(a.endsWith(n))return n;else if(a.endsWith(B))return B;else if(a.endsWith(M))return M;else throw c("WAErr")('userDomainFromJid called with non-user jid "'+a+'"')}function sb(a){return X(O(a)+":"+h+W(a))}function tb(a){return X(""+O(a)+W(a))}function ub(a){a=a.platform;var b=a==="msgr"?n:u;function c(a){return""+a+b}function d(){return b}return{toUserJid:c,getUserDomain:d}}function vb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function wb(a){return a}function xb(a){return a}function yb(a){return a}function zb(a){return a}function Ab(a){return a}function Bb(a){return a}function $(a){return a}function Cb(a){return a}function Db(a){return a}function Eb(a){return a}function Fb(a){return a}function Gb(a){return U(a,{group:function(a){return eb(a)},lidUser:function(a){return O(a)},interopUser:function(a){return O(a)},phoneUser:function(a){return O(a)},msgrUser:function(a){return O(a)}})}function Hb(){return ba}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.MSGR_USER_DOMAIN=n;g.MSGR_USER_JID_SUFFIX=ca;g.INTEROP_DOMAIN=o;g.INTEROP_USER_JID_SUFFIX=da;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=u;g.WA_USER_JID_SUFFIX=v;g.WA_LID_SUFFIX=w;g.WA_NEWSLETTER_JID_DOMAIN=x;g.LID_DOMAIN=B;g.LID_SUFFIX=ga;g.HOSTED_DOMAIN=G;g.HOSTED_SUFFIX=H;g.HOSTED_LID_DOMAIN=J;g.HOSTED_LID_SUFFIX=K;g.BOT_DOMAIN=M;g.SURVEY_USER_JID=ja;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=N;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=la;g.getGroupDomain=ma;g.userIdFromJid=O;g.toPhoneDeviceJid=na;g.toMsgrDeviceJid=oa;g.toLidDeviceJid=pa;g.toDeviceJid=qa;g.toBroadcastJid=ra;g.extractUserId=sa;g.extractDeviceIDParts=ta;g.extractDeviceId=ua;g.authorToUserId=va;g.authorAsUserJid=wa;g.authorAsPhoneUserJid=xa;g.phoneNumberFromJid=ya;g.lidOrPhoneFromUserJid=za;g.interpretAsUserJid=Aa;g.interpretAsPhoneUserJid=Ba;g.asChatJid=Ca;g.asPhoneChatJid=Da;g.asStatusJid=Ea;g.lidFromLidUserJid=P;g.extractUserJid=Q;g.extractPhoneUserJid=Fa;g.extractLidUserJid=Ga;g.extractJidFromJidWithType=Ha;g.defaultPhoneDeviceJidForUser=Ia;g.defaultMsgrDeviceJidForUser=Ja;g.defaultLidDeviceJidForLidUserJid=Ka;g.isPrimaryDevice=La;g.interpretAsDeviceId=Ma;g.interpretAsNumber=Na;g.parseJidParts=R;g.fullFormDeviceJidString=Oa;g.extractFromJid=Pa;g.interpretAndValidateJid=Qa;g.validateStatusJid=Ra;g.validateUserJid=Sa;g.validateBroadcastJid=Ta;g.validateDeviceJid=Ua;g.validateInteropDeviceJid=Va;g.validateGroupJid=S;g.validateMulticastJid=Wa;g.validateCallJid=Xa;g.validateDomainJid=Ya;g.validateChatJid=Za;g.validateNewsletterJid=$a;g.validateHostedDeviceJid=ab;g.validateHostedLidDeviceJid=bb;g.asMulticastJid=cb;g.stripAgentIdFromPhoneDeviceJid=db;g.groupIdFromJid=eb;g.sanitizeJidForLogging=fb;g.maybeSanitizeLogLineText=gb;g.interpretAsGroupJid=T;g.switchOnChatJidType=U;g.switchOnMsgrChatJidType=hb;g.switchOnPhoneChatJidType=V;g.switchOnUserChatJidType=ib;g.switchOnPhoneJidType=jb;g.switchOnJidType=kb;g.switchOnMulticastJidType=lb;g.isLidUser=mb;g.isAuthorMe=nb;g.isAuthorSystem=ob;g.getMsgrUserDomain=pb;g.getWhatsappUserDomain=qb;g.getServerDomain=rb;g.defaultDeviceJidForUser=sb;g.defaultDeviceJidForBot=tb;g.createJidUtils=ub;g.unsafeCoerceToChatJid=vb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=wb;g.unsafeCoerceToLidDeviceJid=xb;g.unsafeCoerceToUserJid=yb;g.unsafeCoerceToPhoneUserJid=zb;g.unsafeCoerceToInteropUserJid=Ab;g.unsafeCoerceToMsgrUserJid=Bb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Cb;g.unsafeCoerceToNewsletterJid=Db;g.unsafeCoerceToHostedDeviceJid=Eb;g.unsafeCoerceToHostedLidDeviceJid=Fb;g.threadIdForChatJid=Gb;g.getGroupCallDomain=Hb}),98);
__d("WAMemoizeCache",[],(function(a,b,c,d,e,f){"use strict";var g=[];function a(){g.forEach(function(a){return a.clear()})}function h(){var a=new Map();g.push(a);return a}function b(a,b){var c;return function(){c||(c=h());var d=b.apply(void 0,arguments),e=c.get(d);e==null&&(e=a.apply(void 0,arguments),c.set(d,e));return e}}f.clearAllMemoizeCache=a;f.MemoizeCache=h;f.memoizeWithArgs=b}),66);
__d("WAMd5",["WABase64","WAMemoizeCache"],(function(a,b,c,d,e,f,g){"use strict";b=d("WAMemoizeCache").memoizeWithArgs(a,function(a){return a});function a(a){return d("WABase64").encodeB64(o(p(a),a.length*8))}function h(a,b){var c=(a&65535)+(b&65535);a=(a>>16)+(b>>16)+(c>>16);return a<<16|c&65535}function i(a,b){return a<<b|a>>>32-b}function j(a,b,c,d,e,f){return h(i(h(h(b,a),h(d,f)),e),c)}function k(a,b,c,d,e,f,g){return j(b&c|~b&d,a,b,e,f,g)}function l(a,b,c,d,e,f,g){return j(b&d|c&~d,a,b,e,f,g)}function m(a,b,c,d,e,f,g){return j(b^c^d,a,b,e,f,g)}function n(a,b,c,d,e,f,g){return j(c^(b|~d),a,b,e,f,g)}function o(a,b){a[b>>5]|=128<<b%32;a[(b+64>>>9<<4)+14]=b;var c,d,e,f;b=1732584193;var g=-271733879,i=-1732584194,j=271733878;for(var o=0;o<a.length;o+=16)c=b,d=g,e=i,f=j,b=k(b,g,i,j,a[o],7,-680876936),j=k(j,b,g,i,a[o+1],12,-389564586),i=k(i,j,b,g,a[o+2],17,606105819),g=k(g,i,j,b,a[o+3],22,-1044525330),b=k(b,g,i,j,a[o+4],7,-176418897),j=k(j,b,g,i,a[o+5],12,1200080426),i=k(i,j,b,g,a[o+6],17,-1473231341),g=k(g,i,j,b,a[o+7],22,-45705983),b=k(b,g,i,j,a[o+8],7,1770035416),j=k(j,b,g,i,a[o+9],12,-1958414417),i=k(i,j,b,g,a[o+10],17,-42063),g=k(g,i,j,b,a[o+11],22,-1990404162),b=k(b,g,i,j,a[o+12],7,1804603682),j=k(j,b,g,i,a[o+13],12,-40341101),i=k(i,j,b,g,a[o+14],17,-1502002290),g=k(g,i,j,b,a[o+15],22,1236535329),b=l(b,g,i,j,a[o+1],5,-165796510),j=l(j,b,g,i,a[o+6],9,-1069501632),i=l(i,j,b,g,a[o+11],14,643717713),g=l(g,i,j,b,a[o],20,-373897302),b=l(b,g,i,j,a[o+5],5,-701558691),j=l(j,b,g,i,a[o+10],9,38016083),i=l(i,j,b,g,a[o+15],14,-660478335),g=l(g,i,j,b,a[o+4],20,-405537848),b=l(b,g,i,j,a[o+9],5,568446438),j=l(j,b,g,i,a[o+14],9,-1019803690),i=l(i,j,b,g,a[o+3],14,-187363961),g=l(g,i,j,b,a[o+8],20,1163531501),b=l(b,g,i,j,a[o+13],5,-1444681467),j=l(j,b,g,i,a[o+2],9,-51403784),i=l(i,j,b,g,a[o+7],14,1735328473),g=l(g,i,j,b,a[o+12],20,-1926607734),b=m(b,g,i,j,a[o+5],4,-378558),j=m(j,b,g,i,a[o+8],11,-2022574463),i=m(i,j,b,g,a[o+11],16,1839030562),g=m(g,i,j,b,a[o+14],23,-35309556),b=m(b,g,i,j,a[o+1],4,-1530992060),j=m(j,b,g,i,a[o+4],11,1272893353),i=m(i,j,b,g,a[o+7],16,-155497632),g=m(g,i,j,b,a[o+10],23,-1094730640),b=m(b,g,i,j,a[o+13],4,681279174),j=m(j,b,g,i,a[o],11,-358537222),i=m(i,j,b,g,a[o+3],16,-722521979),g=m(g,i,j,b,a[o+6],23,76029189),b=m(b,g,i,j,a[o+9],4,-640364487),j=m(j,b,g,i,a[o+12],11,-421815835),i=m(i,j,b,g,a[o+15],16,530742520),g=m(g,i,j,b,a[o+2],23,-995338651),b=n(b,g,i,j,a[o],6,-198630844),j=n(j,b,g,i,a[o+7],10,1126891415),i=n(i,j,b,g,a[o+14],15,-1416354905),g=n(g,i,j,b,a[o+5],21,-57434055),b=n(b,g,i,j,a[o+12],6,1700485571),j=n(j,b,g,i,a[o+3],10,-1894986606),i=n(i,j,b,g,a[o+10],15,-1051523),g=n(g,i,j,b,a[o+1],21,-2054922799),b=n(b,g,i,j,a[o+8],6,1873313359),j=n(j,b,g,i,a[o+15],10,-30611744),i=n(i,j,b,g,a[o+6],15,-1560198380),g=n(g,i,j,b,a[o+13],21,1309151649),b=n(b,g,i,j,a[o+4],6,-145523070),j=n(j,b,g,i,a[o+11],10,-1120210379),i=n(i,j,b,g,a[o+2],15,718787259),g=n(g,i,j,b,a[o+9],21,-343485551),b=h(b,c),g=h(g,d),i=h(i,e),j=h(j,f);return new Uint8Array([b&255,b>>>8&255,b>>>16&255,b>>>24&255,g&255,g>>>8&255,g>>>16&255,g>>>24&255,i&255,i>>>8&255,i>>>16&255,i>>>24&255,j&255,j>>>8&255,j>>>16&255,j>>>24&255])}function p(a){var b,c=[];c[(a.length>>2)-1]=0;for(b=0;b<c.length;b+=1)c[b]=0;var d=a.length*8;for(b=0;b<d;b+=8)c[b>>5]|=(a.charCodeAt(b/8)&255)<<b%32;return c}g["default"]=b}),98);
__d("WAResolvable",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(){var a=this;this.$1=function(){};this.$2=!1;this.isSettled=!1;this.promise=new(g||(g=b("Promise")))(function(b){a.$1=b})}var c=a.prototype;c.resolve=function(a){this.$2=!0,this.isSettled=!0,this.$1(a)};c.reject=function(a){this.isSettled=!0,this.resolve((g||(g=b("Promise"))).reject(a))};c.resolveWasCalled=function(){return this.$2};return a}();f.Resolvable=a}),66);
__d("WAWebBackendApi",["Promise","err"],(function(a,b,c,d,e,f,g){var h,i=null;function j(a,b,d){if(!i)throw c("err")("fireAndForget called before setApi!");i.fireAndForget(a,b,d)}function k(a,d,e){return!i?(h||(h=b("Promise"))).reject(c("err")("sendAndReceive called before setApi!")):i.sendAndReceive(a,d,e)}function a(a){i=a}function d(a,b){j("event",a,b)}function e(a,b){return k("event",a,b)}g.fireAndForgetInternalDoNotUse=j;g.sendAndReceiveInternalDoNotUse=k;g.setApi=a;g.frontendFireAndForget=d;g.frontendSendAndReceive=e}),98);
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.2.2",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h={},i={exports:h},j;function k(){(function(b,c){typeof h==="object"&&typeof i!=="undefined"?i.exports=c():typeof j==="function"&&j.amd?j(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var c=function(){c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return c.apply(this,arguments)};function d(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var e=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,f=Object.keys,h=Array.isArray;typeof (g||(g=b("Promise")))!=="undefined"&&!e.Promise&&(e.Promise=g||(g=b("Promise")));function i(a,b){if(typeof b!=="object")return a;f(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?f:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function w(a){e.setImmediate?setImmediate(a):setTimeout(a,0)}function x(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function aa(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function y(a,b){if(l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=y(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:y(d,b.substr(f+1))}return void 0}function z(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)z(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});z(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ba(a,b){typeof b==="string"?z(a,b,void 0):"length"in b&&[].map.call(b,function(b){z(a,b,void 0)})}function ca(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var da=[].concat;function ea(a){return da.apply([],a)}var A="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ea([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return e[a]}),fa=A.map(function(a){return e[a]});x(A,function(a){return[a,!0]});var B=null;function ga(a){B=typeof WeakMap!=="undefined"&&new WeakMap();a=ha(a);B=null;return a}function ha(a){if(!a||typeof a!=="object")return a;var b=B&&B.get(a);if(b)return b;if(h(a)){b=[];B&&B.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ha(a[c]))}else if(fa.indexOf(a.constructor)>=0)b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);B&&B.set(a,b);for(d in a)l(a,d)&&(b[d]=ha(a[d]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=typeof Symbol!=="undefined"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator",la=typeof ka==="symbol"?function(a){var b;return a!=null&&(b=a[ka])&&b.apply(a)}:function(){return null},ma={};function C(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===ma&&typeof a==="string")return[a];if(e=la(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var na=typeof Symbol!=="undefined"?function(a){return a[typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag"]==="AsyncFunction"}:function(){return!1},D=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oa(a,b){D=a,pa=b}var pa=function(){return!0},qa=!new Error("").stack;function ra(){if(qa)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(pa).map(function(a){return"\n"+a}).join("")}A=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var E=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];A=A.concat(E);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ua(a,b){this._e=ra(),this.name=a,this.message=b}p(ua).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function va(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function wa(a,b,c,d){this._e=ra(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=va(a,b)}p(wa).from(ua);function xa(a,b){this._e=ra(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=va(a,b)}p(xa).from(ua);var ya=A.reduce(function(a,b){return a[b]=b+"Error",a},{}),za=ua,F=A.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=ra(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}p(a).from(za);b[c]=a;return b},{});F.Syntax=SyntaxError;F.Type=TypeError;F.Range=RangeError;var Aa=E.reduce(function(a,b){a[b+"Error"]=F[b];return a},{});function Ba(a,b){if(!a||a instanceof ua||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Aa[a.name])return a;b=new Aa[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}E=A.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=F[b]);return a},{});E.ModifyError=wa;E.DexieError=ua;E.BulkError=xa;function G(){}function Ca(a){return a}function Da(a,b){return a==null||a===Ca?b:function(c){return b(a(c))}}function H(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ea(a,b){return a===G?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?H(d,this.onsuccess):d);e&&(this.onerror=this.onerror?H(e,this.onerror):e);return f!==void 0?f:c}}function Fa(a,b){return a===G?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?H(c,this.onsuccess):c);d&&(this.onerror=this.onerror?H(d,this.onerror):d)}}function Ga(a,b){return a===G?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?H(e,this.onsuccess):e);f&&(this.onerror=this.onerror?H(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Ha(a,b){return a===G?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ia(a,b){return a===G?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ja={},Ka=100,La=20,Ma=100;A=typeof (g||(g=b("Promise")))==="undefined"?[]:function(){var a=(g||(g=b("Promise"))).resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,j(c),a]}();var Na=A[0],Oa=A[1],Pa=A[2],Qa=Oa&&Oa.then,Ra=Na&&Na.constructor,Sa=!!Pa,Ta=!1,Ua=Pa?function(){Pa.then(mb)}:e.setImmediate?setImmediate.bind(null,mb):e.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){mb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(mb,0)},Va=function(a,b){bb.push([a,b]),Xa&&(Ua(),Xa=!1)},Wa=!0,Xa=!0,I=[],Ya=[],Za=null,$a=Ca,ab={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Jb(a[0],a[1])}catch(a){}})}},J=ab,bb=[],K=0,cb=[];function L(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=G;this._lib=!1;var b=this._PSD=J;D&&(this._stackHolder=ra(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ja)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&gb(this,this._value);return}this._state=null;this._value=null;++b.ref;fb(this,a)}var db={get:function(){var a=J,b=xb;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==xb),g=f&&!P(),h=new L(function(b,h){ib(e,new eb(Gb(c,a,f,g),Gb(d,a,f,g),b,h,a))});D&&lb(h,this);return h}c.prototype=Ja;return c},set:function(a){o(this,"then",a&&a.prototype===Ja?db:{get:function(){return a},set:db.set})}};m(L.prototype,{then:db,_then:function(a,b){ib(this,new eb(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):tb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):tb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return tb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ta=!0;var a=kb(this,[],La);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Ta=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new L(function(d,e){var f=setTimeout(function(){return e(new F.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&(typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag")&&o(L.prototype,typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag","Dexie.Promise");ab.env=Db();function eb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(L,{all:function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return L.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof L)return a;if(a&&typeof a.then==="function")return new L(function(b,c){a.then(b,c)});var b=new L(Ja,!0,a);lb(b,Za);return b},reject:tb,race:function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.map(function(a){return L.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return xb}},newPSD:O,usePSD:Eb,scheduler:{get:function(){return Va},set:function(a){Va=a}},rejectionMapper:{get:function(){return $a},set:function(a){$a=a}},follow:function(a,b){return new L(function(c,d){return O(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=H(function(){var a=this;qb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Ra&&(Ra.allSettled&&o(L,"allSettled",function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return L.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Ra.any&&typeof AggregateError!=="undefined"&&o(L,"any",function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return L.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function fb(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&nb();b&&typeof b.then==="function"?fb(a,function(a,c){b instanceof L?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,hb(a));c&&ob()},gb.bind(null,a))}catch(b){gb(a,b)}}function gb(a,b){Ya.push(b);if(a._state!==null)return;var c=a._lib&&nb();b=$a(b);a._state=!1;a._value=b;D&&b!==null&&typeof b==="object"&&!b._promise&&aa(function(){var c=r(b,"stack");b._promise=a;o(b,"stack",{get:function(){return Ta?c&&(c.get?c.get.apply(b):c.value):a.stack}})});rb(a);hb(a);c&&ob()}function hb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ib(a,b[c]);c=a._PSD;--c.ref||c.finalize();K===0&&(++K,Va(function(){--K===0&&pb()},[]))}function ib(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++K;Va(jb,[c,a,b])}function jb(a,b,c){try{Za=b;var d,e=b._value;b._state?d=a(e):(Ya.length&&(Ya=[]),d=a(e),Ya.indexOf(e)===-1&&sb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Za=null,--K===0&&pb(),--c.psd.ref||c.psd.finalize()}}function kb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}D&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&kb(a._prev,b,c));return b}function lb(a,b){var c=b?b._numPrev+1:0;c<Ka&&(a._prev=b,a._numPrev=c)}function mb(){nb()&&ob()}function nb(){var a=Wa;Wa=!1;Xa=!1;return a}function ob(){var a,b,c;do while(bb.length>0){a=bb;bb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(bb.length>0);Wa=!0;Xa=!0}function pb(){var a=I;I=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=cb.slice(0);var b=a.length;while(b)a[--b]()}function qb(a){function b(){a(),cb.splice(cb.indexOf(b),1)}cb.push(b);++K;Va(function(){--K===0&&pb()},[])}function rb(a){I.some(function(b){return b._value===a._value})||I.push(a)}function sb(a){var b=I.length;while(b)if(I[--b]._value===a._value){I.splice(b,1);return}}function tb(a){return new L(Ja,!1,a)}function M(a,b){var c=J;return function(){var d=nb(),e=J;try{Q(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{Q(e,!1),d&&ob()}}}var N={awaits:0,echoes:0,id:0},ub=0,vb=[],wb=0,xb=0,yb=0;function O(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++yb;var g=ab.env;f.env=Sa?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Hb(g.nthen,f),gthen:Hb(g.gthen,f)}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};g=Eb(f,b,c,d);f.ref===0&&f.finalize();return g}function zb(){N.id||(N.id=++ub);++N.awaits;N.echoes+=Ma;return N.id}function P(){if(!N.awaits)return!1;--N.awaits===0&&(N.id=0);N.echoes=N.awaits*Ma;return!0}(""+Qa).indexOf("[native code]")===-1&&(zb=P=G);function Ab(a){if(N.echoes&&a&&a.constructor===Ra){zb();return a.then(function(a){P();return a},function(a){P();return R(a)})}return a}function Bb(a){++xb,(!N.echoes||--N.echoes===0)&&(N.echoes=N.id=0),vb.push(J),Q(a,!0)}function Cb(){var a=vb[vb.length-1];vb.pop();Q(a,!1)}function Q(a,b){var c=J;(b?N.echoes&&(!wb++||a!==J):wb&&(!--wb||a!==J))&&Fb(b?Bb.bind(null,a):Cb);if(a===J)return;J=a;c===ab&&(ab.env=Db());if(Sa){b=ab.env.Promise;var d=a.env;Oa.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(e,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Db(){var a=e.Promise;return Sa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Oa.then,gthen:a.prototype.then}:{}}function Eb(a,b,c,d,e){var f=J;try{Q(a,!0);return b(c,d,e)}finally{Q(f,!1)}}function Fb(a){Qa.call(Na,a)}function Gb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&zb();Q(b,!0);try{return a.apply(this,arguments)}finally{Q(e,!1),d&&Fb(P)}}}function Hb(a,b){return function(c,d){return a.call(this,Gb(c,b),Gb(d,b))}}var Ib="unhandledrejection";function Jb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var d;b={promise:b,reason:a};e.document&&document.createEvent?(d=document.createEvent("Event"),d.initEvent(Ib,!0,!0),i(d,b)):e.CustomEvent&&(d=new CustomEvent(Ib,{detail:b}),i(d,b));if(d&&e.dispatchEvent){dispatchEvent(d);if(!e.PromiseRejectionEvent&&e.onunhandledrejection)try{e.onunhandledrejection(d)}catch(a){}}D&&d&&!d.defaultPrevented}catch(a){}}var R=L.reject;function Kb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return R(new F.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return R(new F.DatabaseClosed());a.open()["catch"](G)}return a._state.dbReadyPromise.then(function(){return Kb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Kb(a,b,c,d)})}return R(e)}return e._promise(b,function(a,b){return O(function(){J.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}A="3.2.2";var Lb=String.fromCharCode(65535),Mb=-Infinity,S="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nb="String expected.",Ob=[],Pb=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Qb=Pb,Rb=Pb,Sb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Tb="__dbnames",Ub="readonly",Vb="readwrite";function Wb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Xb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=ga(b),delete b[a]);return b}:function(a){return a}}var Zb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||J.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new F.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=nb();try{return d&&d.db===this.db?d===J.trans?d._promise(a,f,c):O(function(){return d._promise(a,f,c)},{trans:d,transless:J.transless||J}):Kb(this.db,a,[this.name],f)}finally{g&&ob()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=f(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Lb)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&D&&!1;var d=this.schema.idxByName,e=this.db._deps.indexedDB;function g(a,b){try{return e.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var e=b[0];b=b[1];var f=d[c],i=a[c];return[e||f,e||!f?Wb(b,f&&f.multi?function(a){a=y(a,c);return h(a)&&a.some(function(a){return g(i,a)})}:function(a){return g(i,y(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(l(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Yb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{z(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=y(a,this.schema.primKey.keyPath);if(c===void 0)return R(new F.InvalidArgument("Given object does not contain its primary key"));try{typeof b!=="function"?f(b).forEach(function(c){z(a,c,b[c])}):b(a,{value:a,primKey:c})}catch(a){}return this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Yb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{z(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Xb})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Yb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkAdd(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Yb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkPut(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new xa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function $b(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=g;for(var d=1,e=arguments.length;d<e;++d)g(arguments[d]);return c;function g(a,d,e){if(typeof a==="object")return i(a);d||(d=Ha);e||(e=G);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){f(a).forEach(function(b){var c=a[b];if(h(c))g(b,a[b][0],a[b][1]);else if(c==="asap")var d=g(b,Ca,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){w(function(){a.apply(null,b)})})});else throw new F.InvalidArgument("Invalid event config")})}}function ac(a,b){p(b).from({prototype:a});return b}function bc(a){return ac(Zb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:$b(null,{creating:[Ea,G],reading:[Da,Ca],updating:[Ga,G],deleting:[Fa,G]})})}function cc(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function dc(a,b){a.filter=Wb(a.filter,b)}function ec(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Wb(d(),b())}:b;a.justLimit=c&&!d}function fc(a,b){a.isMatch=Wb(a.isMatch,b)}function gc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new F.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function hc(a,b,c){var d=gc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function ic(a,c,d,e){var f=a.replayFilter?Wb(a.filter,a.replayFilter()):a.filter;if(!a.or)return jc(hc(a,e,d),Wb(a.algorithm,f),c,!a.keysOnly&&a.valueMapper);else{var h={},i=function(a,b,d){if(!f||f(b,d,function(a){return b.stop(a)},function(a){return b.fail(a)})){var e=b.primaryKey,g=""+e;g==="[object ArrayBuffer]"&&(g=""+new Uint8Array(e));l(h,g)||(h[g]=!0,c(a,b,d))}};return(g||(g=b("Promise"))).all([a.or._iterate(i,d),jc(hc(a,e,d),a.algorithm,i,!a.keysOnly&&a.valueMapper)])}}function jc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=M(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=G},function(b){a.fail(b),c=G}))&&f(a.value,a,function(a){return c=a});c()})})}function T(a,b){try{var c=mc(a),d=mc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return lc(nc(a),nc(b));case"Array":return kc(a,b)}}catch(a){}return NaN}function kc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function lc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function mc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ja(a);return b==="ArrayBuffer"?"binary":b}function nc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var oc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,R.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,R.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Wb(b.algorithm,a)};a.prototype._iterate=function(a,b){return ic(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return ic(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(cc(c,!0))return d.count({trans:a,query:{index:gc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return ic(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&cc(c,!0)&&c.limit>0){var d=c.valueMapper,e=gc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return ic(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;cc(b)?ec(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):ec(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);ec(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){dc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){dc(this._ctx,function(b){return a(b.value)});fc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&cc(b,!0)&&b.limit>0)return this._read(function(a){var c=gc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};dc(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var c=this,d=this._ctx;return this._write(function(e){var h;if(typeof a==="function")h=a;else{var i=f(a),j=i.length;h=function(b){var c=!1;for(var d=0;d<j;++d){var e=i[d],f=a[e];y(b,e)!==f&&(z(b,e,f),c=!0)}return c}}var k=d.table.core,l=k.schema.primaryKey,m=l.outbound,n=l.extractKey,o=c.db._options.modifyChunkSize||200,p=[],q=0,r=[],s=function(a,b){var c=b.failures;b=b.numFailures;q+=a-b;for(a=0,b=f(c);a<b.length;a++){var d=b[a];p.push(c[d])}};return c.clone().primaryKeys().then(function(c){var f=function f(i){var j=Math.min(o,c.length-i);return k.getMany({trans:e,keys:c.slice(i,i+j),cache:"immutable"}).then(function(l){var p=[],q=[],r=m?[]:null,t=[];for(var u=0;u<j;++u){var v=l[u],w={value:ga(v),primKey:c[i+u]};h.call(w,w.value,w)!==!1&&(w.value==null?t.push(c[i+u]):!m&&T(n(v),n(w.value))!==0?(t.push(c[i+u]),p.push(w.value)):(q.push(w.value),m&&r.push(c[i+u])))}var x=cc(d)&&d.limit===Infinity&&(typeof a!=="function"||a===pc)&&{index:d.index,range:d.range};return(g||(g=b("Promise"))).resolve(p.length>0&&k.mutate({trans:e,type:"add",values:p}).then(function(a){for(var b in a.failures)t.splice(parseInt(b),1);s(p.length,a)})).then(function(){return(q.length>0||x&&typeof a==="object")&&k.mutate({trans:e,type:"put",keys:r,values:q,criteria:x,changeSpec:typeof a!=="function"&&a}).then(function(a){return s(q.length,a)})}).then(function(){return(t.length>0||x&&a===pc)&&k.mutate({trans:e,type:"delete",keys:t,criteria:x}).then(function(a){return s(t.length,a)})}).then(function(){return c.length>i+j&&f(i+o)})})};return f(0).then(function(){if(p.length>0)throw new wa("Error modifying one or more objects",p,q,r);return c.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return cc(a)&&(a.isPrimKey&&!Rb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new wa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(pc)};return a}(),pc=function(a,b){return b.value=null};function qc(a){return ac(oc.prototype,function(b,c){this.db=a;var d=Xb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ca?f:null}})}function rc(a,b){return a<b?-1:a===b?0:1}function sc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof zc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function tc(a){return new a.Collection(a,function(){return yc("")}).limit(0)}function uc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function vc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function wc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function xc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Nb);function m(a){e=uc(a);f=vc(a);g=a==="next"?rc:sc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=wc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function yc(a){return{type:1,lower:a,upper:a}}var zc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?tc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,S)}};a.prototype.equals=function(a){return a==null?U(this,S):new this.Collection(this,function(){return yc(a)})};a.prototype.above=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Nb):this.between(a,a+Lb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):xc(this,function(a,b){return a.indexOf(b[0])===0},[a],Lb)};a.prototype.equalsIgnoreCase=function(a){return xc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=C.apply(ma,arguments);return a.length===0?tc(this):xc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=C.apply(ma,arguments);return a.length===0?tc(this):xc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Lb)};a.prototype.anyOf=function(){var a=this,b=C.apply(ma,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,S)}if(b.length===0)return tc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Mb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=C.apply(ma,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,S)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Mb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return tc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,S)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=C.apply(ma,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?tc(this):this.inAnyRange(a.map(function(a){return[a,a+Lb]}))};return a}();function Ac(a){return ac(zc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new F.MissingAPI();this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function W(a){return M(function(b){Bc(b);a(b.target.error);return!1})}function Bc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Cc="storagemutated",X="x-storagemutated-1",Y=$b(null,Cc),Dc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Eb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new F.DatabaseClosed(d);case"MissingAPIError":throw new F.MissingAPI(d.message,d);default:throw new F.OpenFailed(d)}if(!this.active)throw new F.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=M(function(c){Bc(c),b._reject(a.error)});a.onabort=M(function(c){Bc(c),b.active&&b._reject(new F.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=M(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return R(new F.ReadOnly("Transaction is readonly"));if(!this.active)return R(new F.TransactionInactive());if(this._locked())return new L(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return O(function(){var a=new L(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new L(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=L.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new L(function(a,d){c.then(function(c){return b._waitingQueue.push(M(a.bind(null,c)))},function(a){return b._waitingQueue.push(M(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new F.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Ec(a){return ac(Dc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=$b(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new L(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return R(a)})})}function Fc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Gc(b)}}function Gc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Hc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:x(c,function(a){return[a.name,a]})}}function Ic(a){return a.length===1?a[0]:a}var Jc=function(a){try{a.only([[]]);Jc=function(){return[[]]};return[[]]}catch(a){Jc=function(){return Lb};return Lb}};function Kc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Lc(a);else return function(b){return y(b,a)}}function Lc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return y(b,a)}}function Mc(a){return[].slice.call(a)}var Nc=0;function Oc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Pc(a,c,d){function e(a,b){var c=Mc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Kc(b)},indexes:Mc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Kc(b)};f[Oc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Oc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Oc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function f(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;b=b===void 0?d===void 0?null:c.upperBound(d,!!a):d===void 0?c.lowerBound(b,!!e):c.bound(b,d,!!e,!!a);return b}function i(c){var d=c.name;function e(e){var h=e.trans,c=e.type,a=e.keys,i=e.values,j=e.range;return new(g||(g=b("Promise")))(function(b,e){b=M(b);e=h.objectStore(d);var g=e.keyPath==null,k=c==="put"||c==="add";if(!k&&c!=="delete"&&c!=="deleteRange")throw new Error("Invalid operation type: "+c);var l=(a||i||{length:1}).length;if(a&&i&&a.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,Bc(a)};if(c==="deleteRange"){if(j.type===4)return b({numFailures:p,failures:o,results:[],lastResult:void 0});j.type===3?n.push(m=e.clear()):n.push(m=e["delete"](f(j)))}else{g=k?g?[i,a]:[i,null]:[a,null];var r=g[0];g=g[1];if(k)for(k=0;k<l;++k)n.push(m=g&&g[k]!==void 0?e[c](r[k],g[k]):e[c](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=e[c](r[k])),m.onerror=q}var s=function(d){d=d.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});b({numFailures:p,failures:o,results:c==="delete"?a:n.map(function(a){return a.result}),lastResult:d})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(c){var e=c.trans,h=c.values,a=c.query,i=c.reverse,j=c.unique;return new(g||(g=b("Promise")))(function(c,k){c=M(c);var l=a.index,m=a.range,n=e.objectStore(d);n=l.isPrimaryKey?n:n.index(l.name);l=i?j?"prevunique":"prev":j?"nextunique":"next";var o=h||!("openKeyCursor"in n)?n.openCursor(f(m),l):n.openKeyCursor(f(m),l);o.onerror=W(k);o.onsuccess=M(function(a){var d=o.result;if(!d){c(null);return}d.___id=++Nc;d.done=!1;var f=d["continue"].bind(d),h=d.continuePrimaryKey;h&&(h=h.bind(d));var i=d.advance.bind(d);a=function(){throw new Error("Cursor not started")};var j=function(){throw new Error("Cursor not stopped")};d.trans=e;d.stop=d["continue"]=d.continuePrimaryKey=d.advance=a;d.fail=M(k);d.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};d.start=function(a){var c=new(g||(g=b("Promise")))(function(a,b){a=M(a),o.onerror=W(b),d.fail=b,d.stop=function(b){d.stop=d["continue"]=d.continuePrimaryKey=d.advance=j,a(b)}}),e=function(){if(o.result)try{a()}catch(a){d.fail(a)}else d.done=!0,d.start=function(){throw new Error("Cursor behind last entry")},d.stop()};o.onsuccess=M(function(a){o.onsuccess=e,e()});d["continue"]=f;d.continuePrimaryKey=h;d.advance=i;e();return c};c(d)},k)})}function h(a){return function(c){return new(g||(g=b("Promise")))(function(e,g){e=M(e);var h=c.trans,i=c.values,j=c.limit,b=c.query,k=j===Infinity?void 0:j,l=b.index;b=b.range;h=h.objectStore(d);h=l.isPrimaryKey?h:h.index(l.name);l=f(b);if(j===0)return e({result:[]});if(a){b=i?h.getAll(l,k):h.getAllKeys(l,k);b.onsuccess=function(a){return e({result:a.target.result})};b.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return e({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return e({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:d,schema:c,mutate:e,getMany:function(c){var e=c.trans,a=c.keys;return new(g||(g=b("Promise")))(function(b,c){b=M(b);var f=e.objectStore(d),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};c=W(c);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=c,++i)}i===0&&b(h)})},get:function(a){var c=a.trans,e=a.key;return new(g||(g=b("Promise")))(function(a,b){a=M(a);var f=c.objectStore(d);f=f.get(e);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(b)})},query:h(j),openCursor:a,count:function(c){var a=c.query,e=c.trans,h=a.index,i=a.range;return new(g||(g=b("Promise")))(function(a,b){var c=e.objectStore(d);c=h.isPrimaryKey?c:c.index(h.name);var g=f(i);g=g?c.count(g):c.count();g.onsuccess=M(function(b){return a(b.target.result)});g.onerror=W(b)})}}}e=e(a,d);d=e.schema;var j=e.hasGetAll;e=d.tables.map(function(a){return i(a)});var k={};e.forEach(function(a){return k[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=k[a];if(!b)throw new Error("Table '"+a+"' not found");return k[a]},MIN_KEY:-Infinity,MAX_KEY:Jc(c),schema:d}}function Qc(a,b){return b.reduce(function(a,b){b=b.create;return c(c({},a),b(a))},a)}function Rc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Qc(Pc(b,e,d),a.dbcore);return{dbcore:c}}function Sc(a,b){var c=a._novip;a=b.db;a=Rc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Tc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=r(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?o(b,a,{get:function(){return this.table(a)},set:function(b){n(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Uc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Vc(a,b){return a._cfg.version-b._cfg.version}function Wc(a,b,c,d){var e=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,e);g.create(c);g._completion["catch"](d);var h=g._reject.bind(g),i=J.transless||J;O(function(){J.trans=g,J.transless=i,b===0?(f(e).forEach(function(a){Zc(c,a,e[a].primKey,e[a].indexes)}),Sc(a,c),L.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Xc(a,b,g,c)["catch"](h)})}function Xc(a,b,c,d){var e=a._novip,g=[];a=e._versions;var h=e._dbSchema=cd(e,e.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){g.push(function(){var g=h,j=a._cfg.dbschema;fd(e,g,d);fd(e,j,d);h=e._dbSchema=j;var k=Yc(g,j);k.add.forEach(function(a){Zc(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new F.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return bd(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),bd(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Sc(e,d);c._memoizedTables={};i=!0;var m=ca(j);k.del.forEach(function(a){m[a]=g[a]});Uc(e,[e.Transaction.prototype]);Tc(e,[e.Transaction.prototype],f(m),m);c.schema=m;var n=na(l);n&&zb();var o;j=L.follow(function(){o=l(c);if(o&&n){var a=P.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?L.resolve(o):j.then(function(){return o})}}),g.push(function(b){if(!i||!Qb){var d=a._cfg.dbschema;ad(d,b)}Uc(e,[e.Transaction.prototype]);Tc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);c.schema=e._dbSchema})});function j(){return g.length?L.resolve(g.shift()(c.idbtrans)).then(j):L.resolve()}return j().then(function(){$c(h,d)})}function Yc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Pb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Zc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return bd(e,a)});return e}function $c(a,b){f(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Zc(b,c,a[c].primKey,a[c].indexes)})}function ad(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function bd(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function cd(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Fc(Gc(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Fc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Hc(a,f,g)});return d}function dd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=cd(a,b,c);a._storeNames=t(b.objectStoreNames,0);Tc(a,[a._allTables],f(c),c)}function ed(a,b){b=cd(a,a.idbdb,b);b=Yc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function fd(a,b,c){a=a._novip;var d=c.db.objectStoreNames;for(var f=0;f<d.length;++f){var g=d[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function gd(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Fc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var hd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){f(a).forEach(function(c){if(a[c]!==null){var d=gd(a[c]),e=d.shift();if(e.multi)throw new F.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")});b[c]=Hc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Uc(b,[b._allTables,b,b.Transaction.prototype]);Tc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],f(d),d);b._storeNames=f(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ia(this._cfg.contentUpgrade||G,a);return this};return a}();function id(a){return ac(hd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function jd(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Md(Tb,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function kd(a){return a&&typeof a.databases==="function"}function ld(a){var c=a.indexedDB;a=a.IDBKeyRange;return kd(c)?(g||(g=b("Promise"))).resolve(c.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Tb})}):jd(c,a).toCollection().primaryKeys()}function md(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!kd(c)&&b!==Tb&&jd(c,a).put({name:b})["catch"](G)}function nd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!kd(c)&&b!==Tb&&jd(c,a)["delete"](b)["catch"](G)}function od(a){return O(function(){J.letThrough=!0;return a()})}function pd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return(g||(g=b("Promise"))).resolve();var c;return new(g||(g=b("Promise")))(function(a){var b=function(){return indexedDB.databases()["finally"](a)};c=setInterval(b,100);b()})["finally"](function(){return clearInterval(c)})}function qd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?R(b.dbOpenError):a});D&&(b.openCanceller._stackHolder=ra());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new F.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return L.race([d,(typeof navigator==="undefined"?L.resolve():pd()).then(function(){return new L(function(d,f){e();if(!c)throw new F.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new F.MissingAPI();j.onerror=W(f);j.onblocked=M(a._fireOnBlocked);j.onupgradeneeded=M(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=Bc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=M(function(){f(new F.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Wc(a,e/10,g,f)}},f);j.onsuccess=M(function(){g=null;var c=a._novip.idbdb=j.result,e=t(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Ic(e),"readonly");b.autoSchema?dd(a,c,e):(fd(a,a._dbSchema,e),!ed(a,e));Sc(a,e)}catch(a){}Ob.push(a);c.onversionchange=M(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=M(function(b){a.on("close").fire(b)});h&&md(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return L.resolve(od(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ia,G);b.onReadyBeingFired=[];return L.resolve(od(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return R(c)})["finally"](function(){b.openComplete=!0,f()})}function rd(a){var c=function(b){return a.next(b)},d=function(b){return a["throw"](b)},e=i(c),f=i(d);function i(a){return function(c){c=a(c);var d=c.value;return c.done?d:!d||typeof d.then!=="function"?h(d)?(g||(g=b("Promise"))).all(d).then(e,f):e(d):d.then(e,f)}}return i(c)()}function sd(a,b,c){var d=arguments.length;if(d<2)throw new F.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ea(e);return[a,f,c]}function td(a,b,c,d,e){return L.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return td(a,b,c,null,e)})}return R(d)}var h=na(e);h&&zb();var i;f=L.follow(function(){i=e.call(g,g);if(i)if(h){var a=P.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=rd(i))},f);return(i&&typeof i.then==="function"?L.resolve(i).then(function(a){return g.active?a:R(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return R(a)})})}function ud(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function vd(a){return c(c({},a),{table:function(b){var d=a.table(b);b=d.schema;var e={},f=[];function g(a,b,d){var h=Oc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=b>0;j=c(c({},d),{isVirtual:j,keyTail:b,keyLength:i,extractKey:Kc(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,b+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Oc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:ud(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:ud(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?c(c({},b),{query:{index:a,range:m(b.query.range,a.keyTail)}}):b}k=c(c({},d),{schema:c(c({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](ud(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](b.key.slice(0,g).concat(c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(ud(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var wd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:vd};function xd(a,b,c,d){c=c||{};d=d||"";f(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h!==i?c[d+e]=b[e]:h==="Object"?xd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});f(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function yd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var zd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return c(c({},a),{table:function(e){var f=a.table(e),h=f.schema.primaryKey,i=c(c({},f),{mutate:function(a){var i=J.trans,j=i.table(e).hook,k=j.deleting,m=j.creating,n=j.updating;switch(a.type){case"add":if(m.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"put":if(m.fire===G&&n.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"delete":if(k.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"deleteRange":if(k.fire===G)break;return i._promise("readwrite",function(){return p(a)},!0)}return f.mutate(a);function o(e){var i=J.trans,a=e.keys||yd(h,e);if(!a)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?c(c({},e),{keys:a}):c({},e);e.type!=="delete"&&(e.values=d([],e.values,!0));e.keys&&(e.keys=d([],e.keys,!0));return Ad(f,e,a).then(function(c){var d=a.map(function(a,b){var d=c[b],f={onerror:null,onsuccess:null};if(e.type==="delete")k.fire.call(f,a,d,i);else if(e.type==="add"||d===void 0){var g=m.fire.call(f,a,e.values[b],i);a==null&&g!=null&&(a=g,e.keys[b]=a,h.outbound||z(e.values[b],h.keyPath,a))}else{g=xd(d,e.values[b]);var j=n.fire.call(f,g,a,d,i);if(j){var o=e.values[b];Object.keys(j).forEach(function(a){l(o,a)?o[a]=j[a]:z(o,a,j[a])})}}return f});return f.mutate(e).then(function(b){var f=b.failures,g=b.results,h=b.numFailures;b=b.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=d[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(e.type==="put"&&c[i]?e.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:b}})["catch"](function(a){d.forEach(function(b){return b.onerror&&b.onerror(a)});return(g||(g=b("Promise"))).reject(a)})})}function p(a){return q(a.trans,a.range,1e4)}function q(a,d,e){return f.query({trans:a,values:!1,query:{index:h,range:d},limit:e}).then(function(f){var h=f.result;return o({type:"delete",keys:h,trans:a}).then(function(f){if(f.numFailures>0)return(g||(g=b("Promise"))).reject(f.failures[0]);if(h.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return q(a,c(c({},d),{lower:h[h.length-1],lowerOpen:!0}),e)})})}}});return i}})}};function Ad(a,c,d){return c.type==="add"?(g||(g=b("Promise"))).resolve([]):a.getMany({trans:c.trans,keys:d,cache:"immutable"})}function Bd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?ga(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Cd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var d=a.table(b);return c(c({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=Bd(a.keys,a.trans._cache,a.cache==="clone");return b?L.resolve(b):d.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?ga(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return d.mutate(a)}})}}}};function Dd(a){return!("from"in a)}var Z=function a(b,c){if(this)i(this,arguments.length?{d:1,from:b,to:arguments.length>1?c:b}:{d:0});else{var d=new a();b&&"d"in b&&i(d,b);return d}};m(Z.prototype,(vd={add:function(a){Fd(this,a);return this},addKey:function(a){Ed(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Ed(b,a,a)});return this}},vd[ka]=function(){return Hd(this)},vd));function Ed(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Dd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Ed(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Id(a)}if(T(b,a.to)>0){e?Ed(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Id(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Fd(a,d);e&&b&&Fd(a,e)}function Fd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Ed(a,d,e);f&&c(a,f);b&&c(a,b)}Dd(b)||c(a,b)}function Gd(a,b){b=Hd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Hd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Hd(a){var b=Dd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Id(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var d=b==="r"?"l":"r",e=c({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[d];a[d]=e;e.d=Jd(e)}a.d=Jd(a)}function Jd(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}var Kd={stack:"dbcore",level:0,create:function(a){var b=a.schema.name,d=new Z(a.MIN_KEY,a.MAX_KEY);return c(c({},a),{table:function(e){var g=a.table(e),i=g.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=c(c({},g),{mutate:function(f){var j=f.trans,k=j.mutatedParts||(j.mutatedParts={}),l=function(a){a="idb://"+b+"/"+e+"/"+a;return k[a]||(k[a]=new Z())},m=l(""),n=l(":dels"),c=f.type;j=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];var a=j[0],o=j[1],p=f.trans._cache;return g.mutate(f).then(function(b){if(h(a)){c!=="delete"&&(a=b.results);m.addKeys(a);var e=Bd(a,p);!e&&c!=="add"&&n.addKeys(a);(e||o)&&Ld(l,i,e,o)}else if(a){e={from:a.lower,to:a.upper};n.add(e);m.add(e)}else m.add(d),n.add(d),i.indexes.forEach(function(a){return l(a.name).add(d)});return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};f(o).forEach(function(a){m[a]=function(f){var h=J.subscr;if(h){var i=function(a){a="idb://"+b+"/"+e+"/"+a;return h[a]||(h[a]=new Z())},j=i(""),m=i(":dels"),n=o[a](f),p=n[0],q=n[1];i(p.name||"").add(q);if(!p.isPrimaryKey)if(a==="count")m.add(d);else{var r=a==="query"&&l&&f.values&&g.query(c(c({},f),{values:!1}));return g[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&f.values)return r.then(function(a){a=a.result;j.addKeys(a);return b});var c=f.values?b.result.map(k):b.result;f.values?j.addKeys(c):m.addKeys(c)}else if(a==="openCursor"){var d=b,e=f.values;return d&&Object.create(d,{key:{get:function(){m.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;m.addKey(a);return a}},value:{get:function(){e&&j.addKey(d.primaryKey);return d.value}}})}return b})}}return g[a].apply(this,arguments)}});return m}})}};function Ld(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);T(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}var Md=function(){function a(b,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=c({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new L(function(a){g.dbReadyResolve=a});g.openCanceller=new L(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=$b(this,"populate","blocked","versionchange","close",{ready:[Ia,G]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||L.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=qc(this);this.Table=bc(this);this.Transaction=Ec(this);this.Version=id(this);this.WhereClause=Ac(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Jc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Ob.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(wd);this.use(zd);this.use(Kd);this.use(Cd);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new F.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Vc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new L(function(a,c){if(b._state.openComplete)return c(new F.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new F.DatabaseClosed());return}b.open()["catch"](G)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return qd(this)};a.prototype._close=function(){var a=this._state,b=Ob.indexOf(this);b>=0&&Ob.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new L(function(b){a.dbReadyResolve=b});a.openCanceller=new L(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new F.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new L(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=M(function(){nd(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new F.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return f(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=sd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Ub)g=Ub;else if(a=="rw"||a==Vb)g=Vb;else throw new F.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Ub&&g===Vb)if(f)e=null;else throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new F.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):R(a)}var i=td.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?Eb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new F.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),Nd=typeof Symbol!=="undefined"&&"observable"in Symbol?typeof Symbol==="function"?Symbol.observable:"@@observable":"@@observable",Od=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Nd]=function(){return this};return a}();function Pd(a,b){f(b).forEach(function(c){var d=a[c]||(a[c]=new Z());Fd(d,b[c])});return a}function Qd(a){return new Od(function(c){var d=na(a);function e(b){d&&zb();var c=function(){return O(a,{subscr:b,trans:null})};c=J.trans?Eb(J.transless,c):c();d&&c.then(P,P);return c}var h=!1,i={},j={},k={get closed(){return h},unsubscribe:function(){h=!0,Y.storagemutated.unsubscribe(o)}};c.start&&c.start(k);var l=!1,m=!1;function n(){return f(j).some(function(a){return i[a]&&Gd(i[a],j[a])})}var o=function(a){Pd(i,a),n()&&p()},p=function a(){if(l||h)return;i={};var d={},f=e(d);m||(Y(Cc,o),m=!0);l=!0;(g||(g=b("Promise"))).resolve(f).then(function(b){l=!1;if(h)return;n()?a():(i={},j=d,c.next&&c.next(b))},function(a){l=!1,c.error&&c.error(a),k.unsubscribe()})};p();return k})}try{vd={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(a){vd={indexedDB:null,IDBKeyRange:null}}var Rd=Md;m(Rd,c(c({},E),{"delete":function(a){a=new Rd(a,{addons:[]});return a["delete"]()},exists:function(a){return new Rd(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ld(Rd.dependencies).then(a)}catch(a){return R(new F.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?Eb(J.transless,a):a()},vip:od,async:function(a){return function(){try{var b=rd(a.apply(this,arguments));return!b||typeof b.then!=="function"?L.resolve(b):b}catch(a){return R(a)}}},spawn:function(a,b,c){try{a=rd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?L.resolve(a):a}catch(a){return R(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=L.resolve(typeof a==="function"?Rd.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:L,debug:{get:function(){return D},set:function(a){oa(a,a==="dexie"?function(){return!0}:Sb)}},derive:p,extend:i,props:m,override:u,Events:$b,on:Y,liveQuery:Qd,extendObservabilitySet:Pd,getByKeyPath:y,setByKeyPath:z,delByKeyPath:ba,shallowClone:ca,deepClone:ga,getObjectDiff:xd,cmp:T,asap:w,minKey:Mb,addons:[],connections:Ob,errnames:ya,dependencies:vd,semVer:A,version:A.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));Rd.maxKey=Jc(Rd.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Cc,function(a){if(!$){var b;Pb?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||Sd(a)}));function Sd(a){var b=$;try{$=!0,Y.storagemutated.fire(a)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var Td=new BroadcastChannel(X);Y(Cc,function(a){$||Td.postMessage(a)});Td.onmessage=function(a){a.data&&Sd(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Cc,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&d([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&Sd(a.changedParts)}});E=self.document&&navigator.serviceWorker;E&&E.addEventListener("message",Ud)}function Ud(a){a=a.data;a&&a.type===X&&Sd(a.changedParts)}L.rejectionMapper=Ba;oa(D,Sb);ba=Object.freeze({__proto__:null,Dexie:Md,liveQuery:Qd,"default":Md,RangeSet:Z,mergeRanges:Fd,rangesOverlap:Gd});c(Md,ba,{"default":Md});return Md})}var l=!1;function m(){l||(l=!0,k());return i.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
__d("WAWeb-dexie",["dexie-3.2.2"],(function(a,b,c,d,e,f){e.exports=b("dexie-3.2.2")()}),null);
__d("WAWebDexieCastTypes",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){return(g||(g=b("Promise"))).resolve(a)}f.dexieCastToPromise=a}),66);
__d("WAPromiseReduce",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c;var d=a.length;for(var e=0;e<d;e++)c=(yield b(c,a[e],e));return c});return function(b,c,d){return a.apply(this,arguments)}}();f.promiseReduce=a}),66);
__d("WACustomError",[],(function(a,b,c,d,e,f){"use strict";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}return b}(a("AggregateError",!0));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("TimeoutError",!1)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.code=c;return a}return a}(a("HttpError",!1)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("UnimplementedMethod")),l=!1;function b(a){if(a==null||a.name!=="QuotaExceededError")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.inner=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);
__d("WAWebMiscErrors",["WACustomError"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}((a=d("WACustomError")).customError("Offline"));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("GaveUpRetry"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("CatalogImageDownloadError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("MediaFileError"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("InvalidImageFileType",!0,f));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("InvalidMediaFileType",!0,f)),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("InvalidMediaCheckRepairFailedType",!0,f)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaEncryptionError",!0,f)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDecryptionError",!0,f)),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDecryptionError",!0,f)),m=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaFileFailedLoad",!0,f)),n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaFileEmpty",!0,f));function o(a){try{return JSON.stringify(a)}catch(b){return a.toString()}}var p=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c=typeof a==="string"?a:o(a);c=b.call(this,c)||this;c.event=a;return c}return a}(a.customError("SocketError")),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"socket not open, is "+a)||this}return a}(a.customError("SocketNotOpen")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"Image failed to load.")||this;d.src=a;d.status=c;d.target={src:a,status:c};return d}return a}(a.customError("ImageError")),s=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.event=c;return a}return a}(a.customError("DecodeWebpResultsError")),t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.event=c;return a}return a}(a.customError("DecodeWebpError")),u=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=a||"Server replied with a failed status code";a=b.call(this,a+": "+d)||this;a.url=c;a.status=d;return a}return a}(a.customError("ServerStatusError")),v=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a="Invalid response for "+a+", with status "+c;d&&(a=a+": "+d);return b.call(this,a)||this}return a}(a.customError("InvalidServerResponseError")),w=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){d="Error "+c+" for "+a+": "+JSON.stringify(d);return b.call(this,d,a,c)||this}return a}(a.customError("BingServerError",!0,u)),x=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaNeedsReupload")),y=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("FileNotReadableError",!0,Error)),z=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.src=a;return c}return a}(a.customError("MediaLoadError")),A=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,"Transcode blob too large")||this}return a}(a.customError("TranscodeBlobTooLargeError")),B=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"Unable to play video. Reason: "+String(a))||this}return a}(a.customError("UnableToPlayVideoError")),C=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDragDropError",!0,z)),D=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaUnsupportedError"));D.message="Media format is unsupported";var E=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.model=c;return a}return a}(a.customError("ModelCreateError")),F=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"MasterDatabaseEncryptionKey."+a+" was accessed before init")||this}return a}(a.customError("DbEncKeyNotLoadedError")),G=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"MasterDatabaseMessageEncryptionKey."+a+" was accessed before init")||this}return a}(a.customError("DbMsgEncKeyNotLoadedError")),H=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbOnLogoutAbortError"));H.message="DB operation was dropped due to logout activity";var I=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbClosedOnTakeover"));I.message="DB operation was dropped due to session takeover (DB closed)";var J=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbNotFoundOnTakeover"));J.message="DB operation was dropped due to session takeover (DB not found)";var K=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DBExpiredFtsHMACKey"));K.message="MasterDatabaseEncryptionKey.fts_hmac_keys is in an invalid state";var L=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("ActionError"));L.message="Could not perform action.";var M=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("Unmount")),N=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("GetUserMediaError")),O=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotSupportedError",!0,N));O.message="The operation is not supported.";var P=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotAllowedError",!0,N));P.message="The user did not grant permission for the operation";var Q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,"RMR attempted on a newsletter message of media type "+a+", newsletter messages do not support media reupload requests")||this;c.mediaType=a;return c}return a}(a.customError("RMRNotSupportedOnNewsletterMessagesError")),R=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("ConstraintNotSatisfiedError",!0,N));R.message="One of the mandatory Constraints could not be satisfied.";var S=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("OverconstrainedError",!0,N));S.message="Due to changes in the environment, one or more mandatory constraints can no longer be satisfied.";var T=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotFoundError",!0,N));T.message="The object can not be found here.";var U=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("SourceUnavailableError",!0,N));U.message="The source of the MediaStream could not be accessed due to a hardware error (e.g. lock from another process).";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnableToGetContentLengthError"));a.message="Failed to get media contentLength from mms";O={GetUserMediaError:N,NotSupportedError:O,NotAllowedError:P,ConstraintNotSatisfiedError:R,OverconstrainedError:S,NotFoundError:T,SourceUnavailableError:U};g.Offline=b;g.GaveUpRetry=c;g.CatalogImageDownloadError=e;g.MediaFileError=f;g.InvalidImageFileType=d;g.InvalidMediaFileType=h;g.InvalidMediaCheckRepairFailedType=i;g.MediaEncryptionError=j;g.MediaDecryptionError=k;g.MediaHashMismatch=l;g.MediaFileFailedLoad=m;g.MediaFileEmpty=n;g.SocketError=p;g.SocketNotOpen=q;g.ImageError=r;g.DecodeWebpResultsError=s;g.EncodeWebpError=t;g.ServerStatusError=u;g.InvalidServerResponseError=v;g.BingServerError=w;g.MediaNeedsReupload=x;g.FileNotReadableError=y;g.MediaLoadError=z;g.TranscodeBlobTooLargeError=A;g.UnableToPlayVideoError=B;g.MediaDragDropError=C;g.MediaUnsupportedError=D;g.ModelCreateError=E;g.DbEncKeyNotLoaded=F;g.DbMsgEncKeyNotLoaded=G;g.DbOnLogoutAbort=H;g.DbClosedOnTakeover=I;g.DbNotFoundOnTakeover=J;g.DBInvalidFtsHMACKey=K;g.ActionError=L;g.Unmount=M;g.GetUserMediaError=N;g.NotAllowedError=P;g.RMRNotSupportedOnNewsletterMessagesError=Q;g.NotFoundError=T;g.UnableToGetContentLengthError=a;g.GetUserMedia=O}),98);
__d("WAWebPageLoadLogging",[],(function(a,b,c,d,e,f){var g={PAGE_LOAD_ID:"0",endPageLoadQpl:function(){},endPageLoadQplMeasure:function(){},startPageLoadQplMeasure:function(){},addPageLoadQplPoint:function(){},addPageLoadQplAnnotation:function(){},incrementPageLoadQplSocketError:function(){},addPageLoadValidationData:function(){},setWamCompleteForValidation:function(){}};function a(a){g=a}var h=!1;function b(a){h=!0;return g.endPageLoadQpl(a)}function c(a){return g.startPageLoadQplMeasure(a)}function d(a){return g.endPageLoadQplMeasure(a)}function e(a){return g.addPageLoadQplPoint(a)}function i(a){return g.addPageLoadQplAnnotation(a)}function j(a,b){return g.addPageLoadValidationData(a,b)}function k(){return g.incrementPageLoadQplSocketError()}function l(){return g.setWamCompleteForValidation()}function m(){return g.PAGE_LOAD_ID}function n(){return h}f.setImpl=a;f.endPageLoadQpl=b;f.startPageLoadQplMeasure=c;f.endPageLoadQplMeasure=d;f.addPageLoadQplPoint=e;f.addPageLoadQplAnnotation=i;f.addPageLoadValidationData=j;f.incrementPageLoadQplSocketError=k;f.setWamCompleteForValidation=l;f.getPageLoadId=m;f.wasPageLoadQplLogged=n}),66);
__d("WAWebDbEncryptionKey",["invariant","Promise","WABase64","WALogger","WAResolvable","WATimeUtils","WAWeb-dexie","WAWebDexieCastTypes","WAWebMiscErrors","WAWebPageLoadLogging","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Base ftsHMACKey is null in _generateFinalFtsHmacKey"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["App reconnected to chatd, during same session"]);k=function(){return a};return a}var l="wawc_db_enc",m="keys",n=128,o={name:"HKDF"},p={hash:"SHA-256"},q=d("WATimeUtils").WEEK_MILLISECONDS*4*24,r="fts_hmac_keys",s="AES-CBC";a=function(){function a(){var a=this;this._waitUntilFinalDbEncKeyReady=new(d("WAResolvable").Resolvable)();this._waitUntilFinalFtsHmacKeyReady=new(d("WAResolvable").Resolvable)();this._waitUntilInit=new(d("WAResolvable").Resolvable)();this._getOrUpdateEncKeys=function(c){return a._getDbOrThrow().keys.orderBy("id").toArray().then(function(d){if(!d||d.length===0)return a._addNewEncKey(c);var e=d[d.length-1]._expiration;if(e!=null&&e<=new Date().getTime())return a._addNewEncKey(c);a._ephemeralLocalEncSalt=c;e=d.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:c,info:new Uint8Array(1)}),a.key,{name:s,length:n},!1,["encrypt","decrypt"]));return babelHelpers["extends"]({},a,{key:b})});return function(b){return a.apply(this,arguments)}}());return(i||(i=b("Promise"))).all(e).then(function(b){a._keys=b})})};this._getOrUpdateFtsKey=function(){return a._getDbOrThrow()[r].orderBy("id").toArray().then(function(b){if(!b||b.length===0)return a._addNewFtsHMACKey();if(b.length>1)throw new(d("WAWebMiscErrors").DBInvalidFtsHMACKey)();a._ftsHMACKey=b[b.length-1]})};this._addNewEncKey=function(b){return t().then(function(c){return a._getDbOrThrow().keys.add({key:c,_expiration:new Date().getTime()+q}).then(function(){return a._getOrUpdateEncKeys(b)})})};this._addNewFtsHMACKey=function(){return t().then(function(b){return a._getDbOrThrow()[r].add({key:b}).then(function(){return a._getOrUpdateFtsKey()})})};this.generateFinalDbEncryptionAndFtsKey=function(c){if(a._finalDbMsgEncKeys!=null||a._ephemeralLocalEncSalt==null){d("WALogger").DEV(k()).tags("db-encryption-key");return(i||(i=b("Promise"))).resolve()}c=d("WABase64").decodeB64(c);a._generateFinalFtsHmacKey(c);a._generateFinalDbMsgEncryptionKey(c);return(i||(i=b("Promise"))).resolve()};this._generateFinalDbMsgEncryptionKey=function(c){d("WAWebPageLoadLogging").startPageLoadQplMeasure("generateFinalDbMsgEncryptionKey");var e=a._getDbOrThrow().keys.orderBy("id").toArray().then(function(d){d=d.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){a._ephemeralLocalEncSalt!=null||h(0,56319);var d;try{d=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:c,info:new Uint8Array(a._ephemeralLocalEncSalt||0)}),b.key,{name:s,length:n},!1,["encrypt","decrypt"]))}catch(b){a._ephemeralLocalEncSalt=null;throw b}return babelHelpers["extends"]({},b,{key:d})});return function(a){return d.apply(this,arguments)}}());return(i||(i=b("Promise"))).all(d).then(function(b){a._ephemeralLocalEncSalt=null,a._finalDbMsgEncKeys=b,a._waitUntilFinalDbEncKeyReady.resolve()})});return e["finally"](function(){d("WAWebPageLoadLogging").endPageLoadQplMeasure("generateFinalDbMsgEncryptionKey"),a._ephemeralLocalEncSalt=null})};this._generateFinalFtsHmacKey=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(!a._ftsHMACKey||a._ftsHMACKey.key==null||a._ftsHMACKey.id==null){d("WALogger").LOG(j());throw new(d("WAWebMiscErrors").DBInvalidFtsHMACKey)()}var c=[a._ftsHMACKey.id,a._ftsHMACKey.key],e=c[0];c=c[1];b=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:b,info:new Uint8Array(0)}),c,{name:"HMAC",hash:"SHA-256"},!1,["sign"]));a._finalFtsHmacKey={id:e,key:b};a._waitUntilFinalFtsHmacKeyReady.resolve()});return function(a){return c.apply(this,arguments)}}()}var e=a.prototype;e.init=function(a){var e,f=this;if(this._db)return(i||(i=b("Promise"))).resolve();this._db=new(c("WAWeb-dexie"))(l,{chromeTransactionDurability:"relaxed",addons:[]});this._getDbOrThrow().version(1).stores((e={},e[m]="++id, _expirtation",e[r]="++id",e));this._getDbOrThrow().version(2).stores((e={},e[m]="++id",e[r]="++id",e));var g=a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset);return d("WAWebDexieCastTypes").dexieCastToPromise(this._getDbOrThrow().open()).then(function(){return(i||(i=b("Promise"))).all([f._getOrUpdateEncKeys(g),f._getOrUpdateFtsKey()])}).then(function(){return f._waitUntilInit.resolve()})};e._getDbOrThrow=function(){if(this._db==null)throw c("err")("[db_encryption_key] db is not initialized");return this._db};e.deleteKeys=function(){var a=this;return(i||(i=b("Promise"))).all([this._getDbOrThrow().table(m).clear(),this._getDbOrThrow().table(r).clear()]).then(function(){return})["finally"](function(){a._db=null;return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie")["delete"](l))["catch"](function(){return c("WAWeb-dexie")["delete"](l)})})};e.resetDB=function(){var a;(a=this._db)==null?void 0:a.close();this._db=null};e.deleteKeyCache=function(){this._keys=null,this._ftsHMACKey=null,this._finalDbMsgEncKeys=null,this._waitUntilFinalDbEncKeyReady=new(d("WAResolvable").Resolvable)(),this._waitUntilFinalFtsHmacKeyReady=new(d("WAResolvable").Resolvable)(),this._finalFtsHmacKey=null,this._ephemeralLocalEncSalt=null,this._waitUntilInit=new(d("WAResolvable").Resolvable)()};e.waitForFinalDbMsgEncKey=function(){return this._waitUntilFinalDbEncKeyReady.promise};e.waitForFinalFtsHmacKey=function(){return this._waitUntilFinalFtsHmacKeyReady.promise};e.waitForInit=function(){return this._waitUntilInit.promise};e.getEncKeys=function(){if(!this._keys)throw new(d("WAWebMiscErrors").DbEncKeyNotLoaded)(m);return this._keys};e.getDbMsgEncKeys=function(a){if(!this._finalDbMsgEncKeys)throw new(d("WAWebMiscErrors").DbMsgEncKeyNotLoaded)(a.tableName);return this._finalDbMsgEncKeys};e.getFtsHMACKey=function(){if(!this._finalFtsHmacKey)throw new(d("WAWebMiscErrors").DbEncKeyNotLoaded)(r);return this._finalFtsHmacKey};return a}();function t(){var a=new Uint8Array(n);self.crypto.getRandomValues(a);return self.crypto.subtle.importKey("raw",a,o,!1,["deriveKey"])}e=new a();g.DB_ENCRYPTION_CIPHER=s;g.DbEncKeyStore=e}),98);
__d("WAWebStorageSchema",["invariant","err"],(function(a,b,c,d,e,f,g,h){var i=Object.freeze({AUTO_INCREMENT:"auto-increment",USER_DEFINED:"user-defined",COMPOSITE:"composite"}),j=Object.freeze({SIMPLE:"simple",COMPOSITE:"composite",ARRAY:"array",UNIQUE:"unique"}),k=Object.freeze({STRING:"String",ARRAY_BUFFER:"ArrayBuffer"});function a(a){return{name:a,columns:[],indexes:[],encryptedColumns:{}}}function b(a){return{name:a.name,columns:a.columns.map(function(a){return babelHelpers["extends"]({},a)}),indexes:a.indexes.map(m),encryptedColumns:babelHelpers["extends"]({},a.encryptedColumns||{}),deleted:a.deleted}}function d(a){return Object.freeze({name:a.name,columns:Object.freeze(a.columns.map(Object.freeze)),indexes:Object.freeze(a.indexes.map(l)),encryptedColumns:Object.freeze(babelHelpers["extends"]({},a.encryptedColumns||{})),deleted:a.deleted})}function l(a){switch(a.type){case j.SIMPLE:return Object.freeze({type:j.SIMPLE,column:a.column});case j.ARRAY:return Object.freeze({type:j.ARRAY,column:a.column});case j.COMPOSITE:return Object.freeze({type:j.COMPOSITE,columns:Object.freeze(a.columns.map(Object.freeze))});case j.UNIQUE:return Object.freeze({type:j.UNIQUE,column:a.column})}throw c("err")("cannot freeze index of unknown type: "+a.type)}function m(a){switch(a.type){case j.SIMPLE:return{type:j.SIMPLE,column:a.column};case j.UNIQUE:return{type:j.UNIQUE,column:a.column};case j.COMPOSITE:return{type:j.COMPOSITE,columns:a.columns.map(function(a){return a})};case j.ARRAY:return{type:j.ARRAY,column:a.column}}throw c("err")("cannot clone unknown index type: "+a.type)}function e(a,b){return a.indexes.findIndex(function(a){return n(b,a)})}function f(a,b){switch(a.type){case j.SIMPLE:case j.ARRAY:case j.UNIQUE:return a.column===b;case j.COMPOSITE:return!!a.columns.find(function(a){return a===b})}throw c("err")("cannot check indexes of unknown index type: "+a.type)}function n(a,b){if(a.type!==b.type)return!1;switch(a.type){case j.SIMPLE:case j.ARRAY:case j.UNIQUE:b.type===a.type||h(0,32791);return a.column===b.column;case j.COMPOSITE:b.type===a.type||h(0,32791);return a.columns.length===b.columns.length&&!a.columns.some(function(a){return!b.columns.includes(a)})}throw c("err")("cannot compare unknown indexes of types: "+a.type+", "+b.type)}g.PRIMARY_KEY_TYPE=i;g.INDEX_TYPE=j;g.ENCRYPTED_VALUE_TYPE=k;g.emptySchema=a;g.cloneSchema=b;g.freezeSchema=d;g.findIndex=e;g.indexContainsColumn=f}),98);
__d("WAWebIdb",["invariant","Promise","WALogger","WANullthrows","WAPromiseReduce","WAWeb-dexie","WAWebDbEncryptionKey","WAWebDexieCastTypes","WAWebStorageSchema","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[CRITICAL] Records contain unencrypted field"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["idb failed to do Operation: "," on Table: ",". Failed with error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] trying to query with a non-existing column "," in index ",""]);l=function(){return a};return a}c("WAWeb-dexie").Promise.PSD.onunhandled=function(){};c("WAWeb-dexie").Promise.PSD.txRelaxedDurabilityEnabled=!0;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(!d("WAWebDbEncryptionKey").DbEncKeyStore)throw c("err")("feature is not yet implemented");var g=f?d("WAWebDbEncryptionKey").DbEncKeyStore.getDbMsgEncKeys({tableName:b.tableName}):d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys();g=g[g.length-1];var i=new Uint8Array(16);self.crypto.getRandomValues(i);typeof a==="string"?(e===d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.STRING||h(0,75742,b.tableName,b.columnName,typeof a),e=new TextEncoder().encode(a)):e=a;try{e=self.crypto.subtle.encrypt({iv:i,name:d("WAWebDbEncryptionKey").DB_ENCRYPTION_CIPHER},g.key,e);e=c("WAWeb-dexie").currentTransaction==null?e:c("WAWeb-dexie").waitFor(e);e=(yield d("WAWebDexieCastTypes").dexieCastToPromise(e));return{_data:e,iv:i,_keyId:g.id,_scheme:f?1:0}}catch(c){A(c,"encryptDbMaterial",null,a,b.columnName);throw c}});return n.apply(this,arguments)}var o=["poll-votes","chat","sync-keys","orphan-tc-token"];function p(a,b,c){var e=a._keyId;a=a._scheme;c=c&&!o.includes(b);a=o.includes(b)&&a===1;return c||a?d("WAWebDbEncryptionKey").DbEncKeyStore.getDbMsgEncKeys({tableName:b}).filter(function(a){return a.id===e})[0]:d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys().filter(function(a){return a.id===e})[0]}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(!d("WAWebDbEncryptionKey").DbEncKeyStore)throw c("err")("feature is not yet implemented");var g=a._data,i=a.iv,j=null;j=p(a,b.tableName,f);j!=null||h(0,56353);if(g==null)return g;try{a=self.crypto.subtle.decrypt({iv:i,name:d("WAWebDbEncryptionKey").DB_ENCRYPTION_CIPHER},j.key,g);f=c("WAWeb-dexie").currentTransaction==null?a:c("WAWeb-dexie").waitFor(a);i=(yield d("WAWebDexieCastTypes").dexieCastToPromise(f));j=e===d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.STRING?new TextDecoder("utf-8").decode(i):i;return j}catch(a){A(a,"decryptDbMaterial",null,b.columnName);throw a}});return r.apply(this,arguments)}var s=function(){function a(a,b,c,d,e,f,g){this.table=a,this.view=c,this.db=b,this.propFilter=d,this.tableColumns=e,this.tableEncryptedColumns=new Map(Object.keys(f).map(function(a){return[a,f[a]]})),this.shouldUseDbMsgEncKeyForEncryptedCol=g.shouldUseDbMsgEncKeyForEncryptedCol,this.packColumns=g.packColumns}var e=a.prototype;e.asyncView=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!0);a=this.$1(a);b=this.$2()&&b?yield this.$3(a):a;return this.view(b)});function c(b,c){return a.apply(this,arguments)}return c}();e.$1=function(a){return a};e.$4=function(a,b){b===void 0;return a};e.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;typeof a==="object"||h(0,56350);var d=Array.from(this.tableEncryptedColumns.entries()).map(function(b){var d=b[0];b=b[1];var e=a[d];return!(e==null?void 0:e._data)||!(e==null?void 0:e.iv)?e:q(e,{tableName:c.table.name,columnName:d},b,c.shouldUseDbMsgEncKeyForEncryptedCol).then(function(b){a[d]=b})});yield (i||(i=b("Promise"))).all(d);return a});function c(b){return a.apply(this,arguments)}return c}();e.$5=function(a){var c=this,d=Array.from(this.tableEncryptedColumns.entries()).map(function(b){var d=b[0];b=b[1];var e=a[d];return e==null?e:m(e,{tableName:c.table.name,columnName:d},b,c.shouldUseDbMsgEncKeyForEncryptedCol).then(function(b){a[d]=b})});return(i||(i=b("Promise"))).all(d).then(function(b){return a})};e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);a=(yield this.$7(a));a=this.$4(a,b);return a});function c(b,c){return a.apply(this,arguments)}return c}();e.$8=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;a=(yield this.$9(a));a=a.map(function(a){return b.$4(a)});return a});function c(b){return a.apply(this,arguments)}return c}();e.$10=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$6(a));return this.table.add(a)});function c(b){return a.apply(this,arguments)}return c}();e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$6(a));return this.table.put(a)});function c(b){return a.apply(this,arguments)}return c}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$8(a));return this.table.bulkAdd(a)});function c(b){return a.apply(this,arguments)}return c}();e.$13=function(a){var b=this;if(this.$2())return c("WAWeb-dexie").waitFor(this.$9(a)).then(function(a){a=a.map(function(a){return b.$4(a)});return b.table.bulkPut(a)});a=a.map(function(a){return b.$4(a)});return this.table.bulkPut(a)};e.$9=function(a){var c=this;if(this.$2()){var d=[],e=a.map(function(a,b){return c.$5(a).then(function(a){d[b]=a})});return(i||(i=b("Promise"))).all(e).then(function(){return d})}return(i||(i=b("Promise"))).resolve(a)};e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(this.$2()){var b=(yield this.$5(a));return b}return a});function c(b){return a.apply(this,arguments)}return c}();e.asyncViewMap=function(a,e){var f=this;e===void 0&&(e=!0);if(!this.$2()||!e)return(i||(i=b("Promise"))).resolve(a.map(function(a){return a?f.view(f.$1(a)):null}));a=a.map(function(a){return a!=null?f.asyncView(a,e):(i||(i=b("Promise"))).resolve(null)});return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie").currentTransaction==null?(i||(i=b("Promise"))).all(a):c("WAWeb-dexie").waitFor((i||(i=b("Promise"))).all(a)))};e.preflightEncryptSingleRecord=function(a){var b=this;Object.keys(a).forEach(function(c){b.tableEncryptedColumns.has(c)||delete a[c]});return this.$5(a)};e.postflightDecryptSingleRecord=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$3(a));return this.view(a)});function c(b){return a.apply(this,arguments)}return c}();e.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();a=a.map(function(a){return b.propFilter(a)});B(a,this.tableEncryptedColumns);var c=a.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkAdd(c))["catch"](function(a){A(a,"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",b.table.name,c);throw a})};e.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();a=a.map(function(a){return b.propFilter(a)});B(a,this.tableEncryptedColumns);var c=a.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkPut(c))["catch"](function(a){A(a,"bulkCreateOrReplace",b.table.name,c);throw a})};e.create=function(a){var b=this,c=this.propFilter(a);return d("WAWebDexieCastTypes").dexieCastToPromise(this.$10(c))["catch"](function(c){A(c,"create",b.table.name,a);throw c})};e.createOrReplace=function(a){var b=this,c=this.propFilter(a);return d("WAWebDexieCastTypes").dexieCastToPromise(this.$11(c))["catch"](function(c){A(c,"createOrReplace",b.table.name,a);throw c})};e.createOrMerge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this,e=this.propFilter(b),f=(yield this.$6(e,!0));return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return c.table.where(":id").equals(a).modify(function(a){Object.assign(a,f)}).then(function(a){if(a===1)return;return c.table.add(f)})}).then(function(){return void 0}))["catch"](function(d){A(d,"createOrMerge",c.table.name,a,b);throw d})});function c(b,c){return a.apply(this,arguments)}return c}();e.get=function(a,b){var c=this;b===void 0&&(b=!0);return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.get(a)).then(function(a){return a?c.asyncView(a,b):null})["catch"](function(b){A(b,"get",c.table.name,a);throw b})};e.merge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this.propFilter(b);c=(yield this.$6(c,!0));try{yield d("WAWebDexieCastTypes").dexieCastToPromise(this.table.update(a,c))}catch(c){A(c,"merge",this.table.name,a,b);throw c}});function c(b,c){return a.apply(this,arguments)}return c}();e.remove=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebDexieCastTypes").dexieCastToPromise(this.table["delete"](a))}catch(b){A(b,"remove",this.table.name,a);throw b}});function c(b){return a.apply(this,arguments)}return c}();e.bulkCreate=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();var c=a.map(function(a){return b.propFilter(a)});if(this.$2())return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return b.$12(c)}))["catch"](function(c){A(c,"bulkCreate",b.table.name,a);throw c});var e=c.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkAdd(e))};e.bulkCreateOrReplace=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();var c=a.map(function(a){return b.propFilter(a)});if(this.$2())return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return b.$13(c)}))["catch"](function(c){A(c,"bulkCreateOrReplace",b.table.name,a);throw c});var e=c.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkPut(e))};e.bulkCreateOrMerge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();var e=new Map(),f=this.$14(),g=this,i=(yield this.$9(a));i.forEach(function(a){a=c.propFilter(a);a=c.$4(a,!0);f in a||h(0,56352);e.set(a[f],a)});function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=g.table.where(":id").anyOf(Array.from(a.keys()));yield b.modify(function(b){Object.assign(b,a.get(b[f])),a["delete"](b[f])});b=Array.from(a.values());return b});return k.apply(this,arguments)}return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return j(e).then(function(a){return a.length===0?d("WAWebDexieCastTypes").dexieCastToPromise():c.table.bulkPut(a)})}))["catch"](function(b){A(b,"bulkCreateOrMerge",c.table.name,a);throw b})});function c(b){return a.apply(this,arguments)}return c}();e.bulkGet=function(a,e){var f=this;e===void 0&&(e=!0);return a.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("r",this.table,function(){var b=a.map(function(a){return f.table.get(a)});return c("WAWeb-dexie").Promise.all(b)})).then(function(a){return f.asyncViewMap(a,e)})["catch"](function(b){A(b,"bulkGet",f.table.name,a);throw b})};e.bulkRemove=function(a){var c=this;return a.length===0?(i||(i=b("Promise"))).resolve():d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return c.table.bulkDelete(a)}))["catch"](function(b){A(b,"bulkRemove",c.table.name,a);throw b})};e.bulkRemoveByIndex=function(a,c){var e=this;return c.length===0?(i||(i=b("Promise"))).resolve():d("WAWebDexieCastTypes").dexieCastToPromise(this.table.where(w(a,this.tableColumns)).anyOf(c)["delete"]())["catch"](function(b){A(b,"bulkRemoveByIndex",e.table.name,a,c);throw b})};e.all=function(a,b){var c=this,e=x(this.table.orderBy((a==null?void 0:a.index)?w(a.index,this.tableColumns):":id"),a);b&&(e=e.until(function(a){return b(c.$1(a))}));var f=null;switch(a==null?void 0:a.returnKeyType){case"keys":f=d("WAWebDexieCastTypes").dexieCastToPromise(e.keys());break;case"primary_key":f=d("WAWebDexieCastTypes").dexieCastToPromise(e.primaryKeys());break;default:f=d("WAWebDexieCastTypes").dexieCastToPromise(e.toArray()).then(function(b){return c.asyncViewMap(b,a==null?void 0:a.shouldDecrypt)})}return f["catch"](function(b){A(b,"all",c.table.name,a);throw b})};e.count=function(){var a=this;return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.count())["catch"](function(b){A(b,"count",a.table.name);throw b})};e.bulkDeleteRange=function(a,b,c,e){var f=this,g=this.table.where(w(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive));return d("WAWebDexieCastTypes").dexieCastToPromise(x(g,e)["delete"]())["catch"](function(d){A(d,"bulkDeleteRange",f.table.name,a,b,c,e);throw d})};e.equals=function(a,b,c){var e=this;return d("WAWebDexieCastTypes").dexieCastToPromise(x(this.table.where(w(a,this.tableColumns)).equals(b),c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){A(d,"equals",e.table.name,a,b,c);throw d})};e.anyOf=function(a,c,e){var f=this;return c.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(x(this.table.where(w(a,this.tableColumns)).anyOf(c),e).distinct().toArray()).then(function(a){return f.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})["catch"](function(b){A(b,"anyOf",f.table.name,a,c,e);throw b})};e.startsWithAnyOf=function(a,c,e){var f=this;return c.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(x(this.table.where(w(a,this.tableColumns)).startsWithAnyOf(c),e).distinct().toArray()).then(function(a){return f.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})["catch"](function(b){A(b,"startsWithAnyOf",f.table.name,a,c,e);throw b})};e.greaterThan=function(a,b,c){var e=this,f=(c==null?void 0:c.inclusive)===!0?this.table.where(w(a,this.tableColumns)).aboveOrEqual(b):this.table.where(w(a,this.tableColumns)).above(b);return d("WAWebDexieCastTypes").dexieCastToPromise(x(f,c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){A(d,"greaterThan",e.table.name,a,b,c);throw d})};e.lessThan=function(a,b,c){var e=this,f=(c==null?void 0:c.inclusive)===!0?this.table.where(w(a,this.tableColumns)).belowOrEqual(b):this.table.where(w(a,this.tableColumns)).below(b);return d("WAWebDexieCastTypes").dexieCastToPromise(x(f,c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){A(d,"lessThan",e.table.name,a,b,c);throw d})};e.between=function(a,b,c,e,f){var g=this,h=x(this.table.where(w(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive)),e),i=null;switch(e==null?void 0:e.returnKeyType){case"keys":i=d("WAWebDexieCastTypes").dexieCastToPromise(h.keys());break;case"primary_key":i=d("WAWebDexieCastTypes").dexieCastToPromise(h.primaryKeys());break;default:f?i=d("WAWebDexieCastTypes").dexieCastToPromise(h.until(function(a){return f(g.$1(a))}).toArray()).then(function(a){return g.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)}):i=d("WAWebDexieCastTypes").dexieCastToPromise(h.toArray()).then(function(a){return g.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})}return i["catch"](function(d){A(d,"between",g.table.name,a,b,c,e);throw d})};e.betweenCount=function(a,b,c,e){var f=this,g=this.table.where(w(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive));return d("WAWebDexieCastTypes").dexieCastToPromise(x(g,e).count())["catch"](function(d){A(d,"betweenCount",f.table.name,a,b,c,e);throw d})};e.forEachSortedBy=function(a,c){var d=this;return this.table.orderBy(a).each(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d.$1(a);a=(yield d.$3(a));return c(a)});return function(b){return a.apply(this,arguments)}}())["catch"](function(b){A(b,"forEachSortedBy",d.table.name,a,c);throw b})};e.forEach=function(a){var c=this;return this.table.each(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c.$1(b);b=(yield c.$3(b));return a(b)});return function(a){return d.apply(this,arguments)}}())["catch"](function(b){A(b,"forEach",c.table.name,a);throw b})};e.clear=function(){var a=this;return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.clear())["catch"](function(b){A(b,"clear",a.table.name);throw b})};e.$14=function(){return this.table.schema.primKey.name};e.$2=function(){return this.tableEncryptedColumns.size>0};return a}();a=function(){function a(a,b){this.tableNames=new Map(),this.tableColumns=new Map(),this.tableEncryptedColumns=new Map(),this.errorHandlers=new Map(),this.name=a,this.db=new(c("WAWeb-dexie"))(this.name,{chromeTransactionDurability:"relaxed",addons:[]}),this.transformSchema=(b==null?void 0:b.transformSchema)||y,this.packColumns=!!(b==null?void 0:b.packColumns)}var e=a.prototype;e.initialize=function(a,b,c,d){var e=this;d&&(this.errorHandlers=d);return t(b,this.tableNames,this.tableColumns,this.tableEncryptedColumns,this.transformSchema).then(function(b){e.db.version(a+1).stores(b).upgrade(function(a){if(c){return(a=a[c.name])==null?void 0:a.toCollection().modify(c.callback)}})})};e.open=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDexieCastTypes").dexieCastToPromise(this.db.open())});function c(){return a.apply(this,arguments)}return c}();e.transact=function(a,b,c){var e=this;c===void 0&&(c="rw");return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction(c,a,function(){return b()}))["catch"](function(a){var b=e.errorHandlers.get(a.name);if(b)b(a);else throw a})};e.close=function(){this.db.close();return d("WAWebDexieCastTypes").dexieCastToPromise()};e.view=function(a,b,d,e){this.tableNames.has(a)||h(0,75743,a);this.tableColumns.has(a)||h(0,75744,a);d=d?z(this.tableColumns.get(a)):function(a){return a};return new s(this.db.table(this.tableNames.get(a)),this.db,b,d,c("WANullthrows")(this.tableColumns.get(a)),c("WANullthrows")(this.tableEncryptedColumns.get(a)),{shouldUseDbMsgEncKeyForEncryptedCol:e,packColumns:this.packColumns})};e.available=function(){return(i||(i=b("Promise"))).resolve(!0)};e.reset=function(){this.tableNames=new Map();return d("WAWebDexieCastTypes").dexieCastToPromise(this.db["delete"]())};e.getDbName=function(){return this.name};return a}();function t(a,b,c,e,f){return d("WAPromiseReduce").promiseReduce(a,function(a,g){return f(d("WAWebStorageSchema").cloneSchema(g)).then(function(d){d.name in a&&h(0,56349);if(d.deleted===!0){a[d.name]=null;return a}b.set(g.name,d.name);c.set(g.name,d.columns.reduce(function(a,b){a.set(b.name,b);return a},new Map()));e.set(g.name,d.encryptedColumns||{});var f=d.columns.filter(function(a){return a.primaryKey});f.length>=1||h(0,75745,g.name);f=[u(f)].concat(d.indexes.map(v)).join(", ");a[d.name]=f;return a})},{})}function u(a){if(a.length>1){a.forEach(function(a){a.primaryKey&&a.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE||h(0,56354)});return"["+a.map(function(a){return a.packedName}).join("+")+"]"}a=a[0];a.primaryKey&&a.primaryKey!==d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE||h(0,56354);return a.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.AUTO_INCREMENT?a.packedName+"++":a.packedName}function v(a){switch(a.type){case d("WAWebStorageSchema").INDEX_TYPE.SIMPLE:return a.column;case d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE:return"["+a.columns.join("+")+"]";case d("WAWebStorageSchema").INDEX_TYPE.ARRAY:return"*"+a.column;case d("WAWebStorageSchema").INDEX_TYPE.UNIQUE:return"&"+a.column}throw c("err")('Cannot format index of type "'+a.type+'"')}function w(a,b){var e=a.map(function(e){var f=b.get(e);if(f==null){d("WALogger").ERROR(l(),e,a.join(","));throw c("err")("format-query-index-nonexistent-column")}return f.packedName});return e.length===1?e[0]:"["+e.join("+")+"]"}function x(a,b){a=a;(b==null?void 0:b.reverse)===!0&&(a=a.reverse());(b==null?void 0:b.offset)!=null&&(a=a.offset(b.offset));(b==null?void 0:b.limit)!=null&&b.limit!==0&&(a=a.limit(b.limit));return a}function y(a){return(i||(i=b("Promise"))).resolve(a)}function z(a){return!a?function(a){return a}:function(b){var c={};a.forEach(function(a){a=a.name;Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a])});return c}}function A(a,b,c){d("WALogger").WARN(k(),b,c,a).sendLogs("storage-error",{sampling:0}).verbose()}function B(a,b){var e=Array.from(b.entries());a.forEach(function(a){e.forEach(function(b){var e=b[0];b[1];if(!a[e])return;if(a[e]._keyId&&a[e]._data&&a[e].iv)return;if(!c("gkx")("26258"))throw c("err")("[CRITICAL] Records contain unencrypted field");d("WALogger").LOG(j())})})}g["default"]=a}),98);
__d("WAWebWamEnumWebcScenarioType",[],(function(a,b,c,d,e,f){a=Object.freeze({INITIAL_PAIRING:0,OFFLINE_RESUME:1,IDLE:2});f.WEBC_SCENARIO_TYPE=a}),66);
__d("WAWebBrokerGlobalAppState",["WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){var h=(a={},a[d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE]=0,a[d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.INITIAL_PAIRING]=5*60*1e3,a[d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME]=2*60*1e3,a),i,j;b={isLogoutInProgress:!1,takeOver:!1,getCurrentScenario:function(){var a;return(a=j)!=null?a:d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE},initOrUpdateTracking:function(a){i&&self.clearTimeout(i);j=a;if(j===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE)return;i=self.setTimeout(function(){j=d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE,i=null},h[a])}};c=b;g["default"]=c}),98);
__d("WAWebWamDroppedEventWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WamDroppedEvent:[4358,{droppedEventCode:[1,a.TYPES.INTEGER],droppedEventCount:[2,a.TYPES.INTEGER],isFromWamsys:[3,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WamDroppedEvent:[]});g.WamDroppedEventWamEvent=b}),98);
__d("WAWebWamCodegenGlobalMetrics",["WANullthrows","WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){function h(a){return typeof a==="number"&&a===Math.floor(a)}var i=function(a,b,c){this.name=a;this.id=b;this.type=c;if(typeof c==="object"){var e=new Set(Object.values(c));this.validator=function(a){return e.has(a)}}else c===d("WAWebWamCodegenUtils").TYPES.INTEGER||c===d("WAWebWamCodegenUtils").TYPES.TIMER?this.validator=h:(c,this.validator=c)},j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e){a=b.call(this,a,c,d)||this;a.channels=e;return a}return a}(i);a=function(){function a(){this.$1={},this.$2=new Map()}var b=a.prototype;b.$3=function(a,b){return a+"::"+b};b.getEvent=function(a,b){a=this.$3(a,b);return c("WANullthrows")(this.$1[a],a)};b.define=function(a,b,c,d){a=this.$3(a,b);a in this.$1||(this.$1[a]=new i(b,c,d));return this.$1[a]};b.defineGlobal=function(a,b,d,e){this.$2.has(a)||this.$2.set(a,new j(a,b,d,e));return c("WANullthrows")(this.$2.get(a),a)};b.getGlobal=function(a){return c("WANullthrows")(this.$2.get(a),a)};return a}();g.Metric=i;g.GlobalMetric=j;g.Metrics=a}),98);
__d("WAUpperFirst",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.charAt(0).toUpperCase()+a.slice(1)}f["default"]=a}),66);
__d("WAWebWamInitQueue",["WAWebWamRuntimeProvider"],(function(a,b,c,d,e,f,g){var h=[];function a(a,b){b===void 0&&(b=!1),h.push([a,b])}function b(a,b){h.push([!1,a,b])}function c(){var a=d("WAWebWamRuntimeProvider").getWamRuntime();if(a==null)return;var b=h.splice(0);b.forEach(function(b){b.length===2?a.commit.apply(a,b):void a.set(b[1],b[2])})}g.queueEvent=a;g.queueMetric=b;g.processQueuedJobs=c}),98);
__d("WAWebWamRuntimeProvider",["WALogger","WAWebWamInitQueue"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["wamRuntime already set"]);h=function(){return a};return a}var i=null;function a(a){if(i!=null){d("WALogger").ERROR(h());return}i=a;d("WAWebWamInitQueue").processQueuedJobs()}function b(){return i}g.setWamRuntime=a;g.getWamRuntime=b}),98);
__d("WAWebWamTypeHash",["WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["type-validator fails ",""]);h=function(){return a};return a}b=function(){function a(){}var b=a.prototype;b.set=function(a){for(var b in a)this[b]=a[b]};return a}();function a(a,b,d){var e={$className:{value:a}};for(var f in b){var g=b[f];g=typeof g==="string"||typeof g==="function"?{type:g}:g;if(g==null||typeof g!=="object"){var h;throw c("err")(a+" specified with non-object "+((h=JSON.stringify(g))!=null?h:"undefined"))}e[f]={enumerable:!0,get:i(f,g),set:j(f,g)}}h=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.all={};b&&c.set(b);return c}return b}(d);Object.defineProperties(h.prototype,e);return h}function i(a,b){return function(){return this.all[a]}}function j(a,b){var c=b.type,e=b.set;return function(b){if(b===this.all[a])return;if(!(b==null))if(typeof c==="function"){if(!c(b)){d("WALogger").LOG(h(),b);throw new TypeError(this.$className+"."+a+" type-validator failed")}}else if(typeof b!==c)throw new TypeError(this.$className+"."+a+" requires type "+c+", got "+String(b));e&&e.call(this,b);this.all[a]=b}}g.TypeHash=b;g.defineTypeHash=a}),98);
__d("WAWebWamCodegenUtils",["WAUpperFirst","WAWebWamCodegenGlobalMetrics","WAWebWamCodegenWamEvent","WAWebWamInitQueue","WAWebWamRuntimeProvider","WAWebWamTypeHash","err","gkx"],(function(a,b,c,d,e,f,g){var h=Object.freeze({BOOLEAN:"boolean",INTEGER:"integer",NUMBER:"number",STRING:"string",TIMER:"timer"}),i=new(d("WAWebWamCodegenGlobalMetrics").Metrics)(),j={};function k(a){var b=a.name,e=a.id,f=a.weight,g=a.props,k=a.wamChannel,l=a.privateStatsIdInt;a=a.validators;var m={id:e,weight:f,wamChannel:k,privateStatsIdInt:l,validators:a};e={};f=[];for(k in g){l=g[k];a=i.define(b,k,l[0],l[1]);e[k]=a.validator;l[1]===h.TIMER&&f.push(k)}a=d("WAWebWamTypeHash").defineTypeHash(b,e,d("WAWebWamCodegenWamEvent").WamEvent);f.forEach(function(a){m["mark"+c("WAUpperFirst")(a)]=function(){var b=this.startMarkers,c=this.eventTime;this[a]=Date.now()-((b=(b=b[a])==null?void 0:b.ts)!=null?b:c)},m["start"+c("WAUpperFirst")(a)]=function(){var b=Date.now();this.startMarkers[a]={ts:b}}});Object.assign(a.prototype,m);j[b]=a;return a}function a(a,b){b===void 0&&(b={});for(var d in a){var e=a[d],f=e[2],g=1;c("gkx")("26259")&&(g=f[1]);c("gkx")("26258")&&(g=f[2]);f=(f=e[3])!=null?f:"regular";var h=e.length===5?e[4]:-1;return k({name:d,id:e[0],props:e[1],weight:g,wamChannel:f,privateStatsIdInt:h,validators:(e=b[d])!=null?e:[]})}throw c("err")("defineEvent: empty definition")}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.commitOnSet=!0,a)||babelHelpers.assertThisInitialized(c)}return a}(d("WAWebWamTypeHash").TypeHash);function b(a){var b={},c=function(c){var e=a[c],f=e[0],g=e[1];e=e[2];e=e===void 0?["regular"]:e;var h=i.defineGlobal(c,f,g,e);b[c]={type:h.validator,set:function(a){if(this.commitOnSet){var b=d("WAWebWamRuntimeProvider").getWamRuntime();b?void b.set(h,a):d("WAWebWamInitQueue").queueMetric(h,a)}}}};for(var e in a)c(e);c=d("WAWebWamTypeHash").defineTypeHash("Global",b,l);return new c()}g.TYPES=h;g.metrics=i;g.events=j;g.defineEvents=a;g.defineGlobal=b}),98);
__d("WACamelCase",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/_|-/g," ").replace(/[0-9]/g,function(a){return a+" "}).replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return b===0?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,"")}f["default"]=a}),66);
__d("WAWebWamCodegenWamEvent",["Promise","WACamelCase","WALogger","WAWebWamDroppedEventWamEvent","WAWebWamInitQueue","WAWebWamRuntimeProvider","WAWebWamTypeHash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["commitAndWaitForFlush should not be called before initWamRuntime"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam event failed validation: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," event validator failed condition ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["","."," should be nonnull"]);l=function(){return a};return a}var m=1;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){b=a.call(this)||this;b.instanceId=m++;b.eventTime=Date.now();b.commitTime=void 0;b.startMarkers={};return b}var f=e.prototype;f.getValue=function(a){return this.all[a]};f.runPreCommitValidation=function(){var a=this;this.validators.forEach(function(b){var e=b[0],f=b[1];b=b[2];for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;if(!i(a))return}for(i=f,h=Array.isArray(i),g=0,i=h?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(h){if(g>=i.length)break;e=i[g++]}else{g=i.next();if(g.done)break;e=g.value}f=e;if(a.getValue(c("WACamelCase")(f))==null){d("WALogger").LOG(l(),a.$className,f);throw new TypeError(a.$className+"."+f+" should be nonnull")}}for(e=b,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}i=h;b=i[0];h=i[1];if(!b(a)){d("WALogger").LOG(k(),a.$className,h);throw new TypeError(a.$className+" event validator failed condition "+h)}}})};f.commit=function(){try{this.runPreCommitValidation()}catch(a){d("WALogger").ERROR(j(),a);new(d("WAWebWamDroppedEventWamEvent").WamDroppedEventWamEvent)({droppedEventCode:this.id,droppedEventCount:1}).commit();return}var a=d("WAWebWamRuntimeProvider").getWamRuntime();a?void a.commit(this,!1):d("WAWebWamInitQueue").queueEvent(this,!1)};f.commitAndWaitForFlush=function(a){a===void 0&&(a=!1);this.runPreCommitValidation();var c=d("WAWebWamRuntimeProvider").getWamRuntime();if(c==null){d("WAWebWamInitQueue").queueEvent(this,a);return(h||(h=b("Promise"))).resolve()}c=c.commit(this,a);if(c==null){d("WALogger").ERROR(i());return(h||(h=b("Promise"))).resolve()}return c};f.setTime=function(a){this.eventTime=a||Date.now()};return e}(d("WAWebWamTypeHash").TypeHash);g.WamEvent=a}),98);
__d("WAWebWamEnumWebScenarioCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OFFLINE_RESUME:0});f.WEB_SCENARIO_CODE=a}),66);
__d("WAWebWamEnumWebTableLogReasonCode",[],(function(a,b,c,d,e,f){a=Object.freeze({BASE:0,EXCEEDED_THRESHOLD:1});f.WEB_TABLE_LOG_REASON_CODE=a}),66);
__d("WAWebWebDbTableUsageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebScenarioCode","WAWebWamEnumWebTableLogReasonCode"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebDbTableUsage:[5074,{offlineSessionId:[1,a.TYPES.STRING],webScenario:[2,d("WAWebWamEnumWebScenarioCode").WEB_SCENARIO_CODE],webTable:[3,a.TYPES.STRING],webTableLogReason:[4,d("WAWebWamEnumWebTableLogReasonCode").WEB_TABLE_LOG_REASON_CODE],webTableReadCount:[5,a.TYPES.INTEGER],webTableWriteCount:[6,a.TYPES.INTEGER]},[1,1,100],"regular"]},{WebDbTableUsage:[]});g.WebDbTableUsageWamEvent=b}),98);
__d("WAWebDBTableUsage",["WAWebWebDbTableUsageWamEvent"],(function(a,b,c,d,e,f,g){var h=new Map(),i=50;function a(a,b,c){var e=new Map();for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(f){if(g>=b.length)break;j=b[g++]}else{g=b.next();if(g.done)break;j=g.value}j=j;var k=new(d("WAWebWebDbTableUsageWamEvent").WebDbTableUsageWamEvent)({webScenario:a,webTableReadCount:0,webTableWriteCount:0,webTable:j});e.set(j,k)}function l(){if(c!=null)for(var a=e.values(),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(b){if(d>=a.length)break;f=a[d++]}else{d=a.next();if(d.done)break;f=d.value}f=f;f.offlineSessionId=c}for(f=e.values(),d=Array.isArray(f),b=0,f=d?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(b>=f.length)break;a=f[b++]}else{b=f.next();if(b.done)break;a=b.value}a=a;(((g=a.webTableReadCount)!=null?g:0)>i||((g=a.webTableWriteCount)!=null?g:0)>i||a.webTable==="message")&&a.commit()}h["delete"](l);return h.size}h.set(l,e);return l}function b(a,b){for(var c=h,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f[1];f=f.get(a);f!=null&&(b==="read"?f.webTableReadCount++:f.webTableWriteCount++)}}g.beginDBTableUsage=a;g.recordTableUsageStat=b}),98);
__d("WAShiftTimer",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c("WAErr")("ShiftTimer must be given delayMs >= 0")}g.ShiftTimer=a}),98);
__d("WATypeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return typeof a==="function"}function b(a){return typeof a==="number"}function c(a){return typeof a==="string"}function d(a){return typeof a==="boolean"}f.isFunction=a;f.isNumber=b;f.isString=c;f.isBoolean=d}),66);
__d("WAWebProfiler",["WALogger","WAShiftTimer","WATypeUtils","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[db-read-write-stats] table = ",", reads = ",", writes = ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while generating profiler report"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[db-read-write-stats] Read/Write stats for the last "," seconds"]);j=function(){return a};return a}var k=20,l=function(a){this.val=a,this.prev=null,this.next=null},m=function(){function a(){this.head=new l(null),this.tail=new l(null),this.head.next=this.tail,this.tail.prev=this.head,this.size=0}var b=a.prototype;b.add=function(a){var b=this.tail.prev;b&&(a.prev=b,a.next=this.tail,b.next=a,this.tail.prev=a,this.size++)};return a}(),n=60,o=60;a=function(){function a(){var a=this;if(c("gkx")("26258")){this.dbLockStats=new Map();this.dbReadWriteStats=new Map();this.seen=new Map();this.reports={};this.removeOlderLockStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){});this.logReadWriteStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){});return}this.dbLockStats=new Map();this.dbReadWriteStats=new Map();this.seen=new Map();this.reports={};this.removeOlderLockStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){var b=Date.now();a.dbLockStats.forEach(function(a,c){c=a.head.next;var d=a.tail;while(((e=c)==null?void 0:e.val)&&c!==d){var e;if(b-c.val.t<=n*1e3)break;e=c.prev;var f=c.next;e&&f&&(c.next=null,c.prev=null,e.next=f,f.prev=e,a.size--);c=f}});a.removeOlderLockStatsTimer.onOrAfter(n/2*1e3)});this.logReadWriteStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){a.dbReadWriteStats.size>0&&typeof window!=="undefined"&&window.document&&(d("WALogger").DEV(j(),o).tags("db-profiler"),a.logDbReadWriteStats(),a.dbReadWriteStats=new Map()),a.logReadWriteStatsTimer.onOrBefore(o*1e3)});this.removeOlderLockStatsTimer.onOrBefore(n/2*1e3);this.logReadWriteStatsTimer.onOrBefore(o*1e3)}var b=a.prototype;b.recordReadStat=function(a){if(c("gkx")("26258"))return;this.dbReadWriteStats.has(a)||this.dbReadWriteStats.set(a,{reads:0,writes:0});a=this.dbReadWriteStats.get(a);a&&a.reads++};b.recordWriteStat=function(a){if(c("gkx")("26258"))return;this.dbReadWriteStats.has(a)||this.dbReadWriteStats.set(a,{reads:0,writes:0});a=this.dbReadWriteStats.get(a);a&&a.writes++};b.recordLockStat=function(a,b){b===void 0&&(b="default");if(c("gkx")("26258"))return;var d=Date.now();this.dbLockStats.has(b)||this.dbLockStats.set(b,new m());var e=this.dbLockStats.get(b);if(!this.seen.has(a)){b={id:a,group:b,t:d,timestamps:[]};this.seen.set(a,b);e.add(new l(b))}(e=this.seen.get(a))==null?void 0:e.timestamps.push(d)};b.lockReport=function(){if(c("gkx")("26258"))return[];var a=[];try{this.dbLockStats.forEach(function(b,c){c={group:c};var e=[],f=b.head.next,g=new Map(),h=0;while(((i=f)==null?void 0:i.val)&&f!==b.tail){var i;i=f.val;var j=i.timestamps[i.timestamps.length-1];if(!d("WATypeUtils").isNumber(i.row)&&i.timestamps.length===3){var k=0;for(;k<e.length;k++)if(e[k]<=i.t){h=k;break}k===e.length?(i.row=e.length,e.push(-1)):i.row=h}g.has(i.row)||g.set(i.row,[]);(k=g.get(i.row))==null?void 0:k.push({timeRange:[i.t,i.timestamps[1]],val:"waiting"});(k=g.get(i.row))==null?void 0:k.push({timeRange:[i.timestamps[1],j],val:"acquired"});k=i.row===void 0?-1:i.row;k!==-1&&(e[k]=Math.max(e[k],j));f=f.next}var l=[];g.forEach(function(a,b){l.push({label:b+"",data:a})});a.push(babelHelpers["extends"]({},c,{data:l}))})}catch(a){d("WALogger").ERROR(i()).verbose().devConsole(a)}return a};b.logDbReadWriteStats=function(a){a===void 0&&(a=!1);if(c("gkx")("26258"))return;Array.from(this.dbReadWriteStats.entries()).filter(function(b){b[0];b=b[1];return a||b.reads+b.writes>k}).sort(function(a,b){a[0];a=a[1];b[0];b=b[1];return b.reads+b.writes-(a.reads+a.writes)}).map(function(a){var b=a[0];a=a[1];return d("WALogger").DEV(h(),b,a.reads,a.writes).tags("db-profiler")})};b["export"]=function(){return c("gkx")("26258")?"":JSON.stringify(this.reports)};b.getAllReports=function(){if(c("gkx")("26258"))return{};this.reports.lock=this.lockReport();return this.reports};return a}();b=new a();e=b;g["default"]=e}),98);
__d("WAWebIdbLogger",["WAWebDBTableUsage","WAWebProfiler","gkx"],(function(a,b,c,d,e,f,g){function a(a){c("gkx")("26258")||c("WAWebProfiler").recordReadStat(a),d("WAWebDBTableUsage").recordTableUsageStat(a,"read")}function b(a,b){!c("gkx")("26258")&&!b&&c("WAWebProfiler").recordWriteStat(a),d("WAWebDBTableUsage").recordTableUsageStat(a,"write")}g.recordReadStat=a;g.recordWriteStat=b}),98);
__d("WAWebIdbLazyView",["Promise","WAWebBrokerGlobalAppState","WAWebIdbLogger","WAWebMiscErrors"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.errorHandlers=new Map(),this._view=a,b&&(this.errorHandlers=b)}var e=a.prototype;e._maybeHandleError=function(a){var b=this.errorHandlers.get(a.name);b&&b(a)};e._read=function(a){var e=this;if(c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").DbOnLogoutAbort)("dropping db read operation due to logout"));var f=this._view();d("WAWebIdbLogger").recordReadStat(f.table.name);return a(f)["catch"](function(a){e._maybeHandleError(a);throw a})};e._write=function(a,e,f){var g=this;e===void 0&&(e=!1);f===void 0&&(f=!1);if(!e&&c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").DbOnLogoutAbort)("dropping db write operation due to logout"));e=this._view();d("WAWebIdbLogger").recordWriteStat(e.table.name,f);return a(e)["catch"](function(a){g._maybeHandleError(a);throw a})};e.create=function(a){return this._write(function(b){return b.create(a)})};e.preflightEncryptSingleRecord=function(a){return this._write(function(b){return b.preflightEncryptSingleRecord(a)},!1,!0)};e.postflightDecryptSingleRecord=function(a){return this._write(function(b){return b.postflightDecryptSingleRecord(a)},!1,!0)};e.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){return this._write(function(b){return b.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(a)})};e.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){return this._write(function(b){return b.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(a)})};e.createOrReplace=function(a){return this._write(function(b){return b.createOrReplace(a)})};e.createOrMerge=function(a,b){return this._write(function(c){return c.createOrMerge(a,b)})};e.get=function(a,b){return this._read(function(c){return c.get(a,b)})};e.merge=function(a,b){return this._write(function(c){return c.merge(a,b)})};e.remove=function(a){return this._write(function(b){return b.remove(a)})};e.bulkCreate=function(a){return this._write(function(b){return b.bulkCreate(a)})};e.bulkCreateOrReplace=function(a){return this._write(function(b){return b.bulkCreateOrReplace(a)})};e.bulkCreateOrMerge=function(a){return this._write(function(b){return b.bulkCreateOrMerge(a)})};e.bulkGet=function(a,b){return this._read(function(c){return c.bulkGet(a,b)})};e.bulkRemoveByIndex=function(a,b){return this._write(function(c){return c.bulkRemoveByIndex(a,b)})};e.bulkRemove=function(a){return this._write(function(b){return b.bulkRemove(a)})};e.betweenCount=function(a,b,c,d){return this._write(function(e){return e.betweenCount(a,b,c,d)})};e.bulkDeleteRange=function(a,b,c,d){return this._write(function(d){return d.bulkDeleteRange(a,b,c)})};e.all=function(a,b){return this._read(function(c){return c.all(a,b)})};e.count=function(){return this._read(function(a){return a.count()})};e.equals=function(a,b,c){return this._read(function(d){return d.equals(a,b,c)})};e.anyOf=function(a,b,c){return this._read(function(d){return d.anyOf(a,b,c)})};e.startsWithAnyOf=function(a,b,c){return this._read(function(d){return d.startsWithAnyOf(a,b,c)})};e.greaterThan=function(a,b,c){return this._read(function(d){return d.greaterThan(a,b,c)})};e.lessThan=function(a,b,c){return this._read(function(d){return d.lessThan(a,b,c)})};e.between=function(a,b,c,d,e){return this._read(function(f){return f.between(a,b,c,d,e)})};e.forEachSortedBy=function(a,b){return this._read(function(c){return c.forEachSortedBy(a,b)})};e.forEach=function(a){return this._read(function(b){return b.forEach(a)})};e.clear=function(a){a===void 0&&(a=!1);return this._write(function(a){return a.clear()},a)};return a}();g["default"]=a}),98);
__d("WAWebLocalStorage",[],(function(a,b,c,d,e,f){var g;try{g=window.localStorage}catch(a){}a=g;f["default"]=a}),66);
__d("WAWebRuntimeEnvironmentUtils",[],(function(a,b,c,d,e,f){function g(){return typeof WorkerGlobalScope!=="undefined"&&typeof importScripts==="function"}function a(){return g()&&"ServiceWorkerGlobalScope"in self}f.isWorker=g;f.isServiceWorker=a}),66);
__d("WAWebWamEnumWebDbLoaderType",[],(function(a,b,c,d,e,f){a=Object.freeze({MAIN:1,WEB_WORKER:2,SERVICE_WORKER:3});f.WEB_DB_LOADER_TYPE=a}),66);
__d("WAWebWamEnumWebDbNameType",[],(function(a,b,c,d,e,f){a=Object.freeze({MODEL_STORAGE:1,FTS_STORAGE:2,JOBS_STORAGE:3,LOADGEN_STORAGE:4,LRU_MEDIA_STORAGE_IDB:5,OFFD_STORAGE:6,QPL_STORAGE:7,SIGNAL_STORAGE:8,WORKER_STORAGE:9,SW:10,WAWC:11,WAWC_DB_ENC:12});f.WEB_DB_NAME_TYPE=a}),66);
__d("WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebDbLoaderType","WAWebWamEnumWebDbNameType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDbLoadFromVersionFailureNonAnonymous:[4814,{webDbLoader:[1,d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE],webDbName:[2,d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE]},[1,1,1],"regular"]},{WebDbLoadFromVersionFailureNonAnonymous:[]});g.WebDbLoadFromVersionFailureNonAnonymousWamEvent=a}),98);
__d("WAWebSchemaVersions",["$InternalEnum","WALogger","WAResolvable","WAWebRuntimeEnvironmentUtils","WAWebWamEnumWebDbLoaderType","WAWebWamEnumWebDbNameType","WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent","err"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["[storage] set schema versions after dev override: ",""]);a=function(){return b};return b}function e(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] override version url: ",":",""]);e=function(){return a};return a}function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] set schema versions: ",". is worker? ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] Schema versions not initialized"]);i=function(){return a};return a}var j=b("$InternalEnum")({ModelStorage:"model-storage",FtsStorage:"fts-storage",JobsStorage:"jobs-storage",LruMediaStorage:"lru-media-storage-idb",OffdStorage:"offd-storage",QplStorage:"qpl-storage",SignalStorage:"signal-storage",WorkerStorage:"worker-storage",SW:"sw",WAWC:"wawc",WAWCDBEnc:"wawc_db_enc"}),k=new(d("WAResolvable").Resolvable)(),l=null;function m(a){switch(a){case j.ModelStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.MODEL_STORAGE;case j.FtsStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.FTS_STORAGE;case j.JobsStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.JOBS_STORAGE;case j.LruMediaStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.LRU_MEDIA_STORAGE_IDB;case j.OffdStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.OFFD_STORAGE;case j.QplStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.QPL_STORAGE;case j.SignalStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.SIGNAL_STORAGE;case j.WorkerStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WORKER_STORAGE;case j.SW:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.SW;case j.WAWC:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WAWC;case j.WAWCDBEnc:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WAWC_DB_ENC}}function n(){if(d("WAWebRuntimeEnvironmentUtils").isServiceWorker())return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.SERVICE_WORKER;else if(d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.WEB_WORKER;return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.MAIN}function f(){return l!=null}function o(a){if(l==null){var b={webDbLoader:n()};a!=null&&(b.webDbName=m(a));void new(d("WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent").WebDbLoadFromVersionFailureNonAnonymousWamEvent)(b).commitAndWaitForFlush(!0);d("WALogger").ERROR(i()).sendLogs("[storage] Schema versions not initialized");throw c("err")("Schema versions not initialized")}return l}function p(a){d("WALogger").LOG(h(),Array.from(a),d("WAWebRuntimeEnvironmentUtils").isWorker()),l=a,k.resolve()}function q(){return k.promise}function r(){l=null}g.DatabaseNames=j;g.convertDBName=m;g.getLoaderType=n;g.hasSchemaVersions=f;g.getSchemaVersions=o;g.setSchemaVersions=p;g.waitUntilSchemaVersionsReady=q;g.clearSchemaVersions=r}),98);
__d("WAWebEventEmitter",["err"],(function(a,b,c,d,e,f,g){var h=/\s+/,i=0;a=function(){function a(){}var b=a.prototype;b.on=function(a,b,d){var e;if(!b)return this;if(typeof b!=="function")throw c("err")("Callback parameter passed is not a function");if(this._multiEvent.apply(this,[this.on].concat(Array.prototype.slice.call(arguments))))return this;this._getOrCreateEvents(a).push({callback:b,context:d,ctx:(e=d)!=null?e:this});return this};b.once=function(a,b,c){if(!b)return this;if(this._multiEvent.apply(this,[this.once].concat(Array.prototype.slice.call(arguments))))return this;var d=this,e=!1,f=function c(){e||(e=!0,d.off(a,c),b.apply(this,arguments))};f._callback=b;return this.on(a,f,c)};b.off=function(a,b,c){var d=this._events;if(!d)return this;if(this._multiEvent.apply(this,[this.off].concat(Array.prototype.slice.call(arguments))))return this;if(!a&&b==null&&c==null){this._events=void 0;return this}var e=a?[a]:Object.keys(d);for(var f=0;f<e.length;f++){var g=e[f],h=d[g];if(!h)continue;d[g]=[];if(b!=null||c!=null)for(var i=0;i<h.length;i++){var j=h[i];(b&&b!==j.callback&&b!==j.callback._callback||c!=null&&j.context!==c)&&d[g].push(j)}d[g].length||delete d[g]}return this};b.trigger=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(!this._events)return this;if(this._multiEvent.apply(this,[this.trigger].concat(Array.prototype.slice.call(arguments))))return this;var e=this._getEvents(a),f=this._getEvents("all");e&&this._triggerEvents(e,c);f&&this._triggerEvents(f,arguments);return this};b.stopListening=function(a,b,c){var d,e=this._listeningTo;if(!e)return this;var f=a==null?void 0:a._listenId;f=f?(d={},d[f]=a,d):e;a=!b&&!c;for(d in f){var g=f[d];g.off(b,c,this);g=g._events;(a||!g||Object.keys(g).length===0)&&delete e[d]}(!this._listeningTo||Object.keys(this._listeningTo).length===0)&&delete this._listeningTo;return this};b.listenTo=function(a,b,c){if(!c)return this;this._addListeningTo(a);a.on(b,c,this);return this};b.listenToOnce=function(a,b,c){this._addListeningTo(a);a.once(b,c,this);return this};b.listenToAndRun=function(a,b,c){this.listenTo.apply(this,arguments);c.apply(this);return this};b.isListening=function(a){var b=this._events;return!b?!1:typeof a==="string"?!!b[a]:Object.keys(b).length===0};b._addListeningTo=function(a){var b=this._listeningTo||(this._listeningTo={}),c=a._listenId||(a._listenId="l"+ ++i);b[c]=a};b._getOrCreateEvents=function(a){var b=this._events||(this._events={});return b[a]||(b[a]=[])};b._getEvents=function(a){if(!a)return;var b=this._events;if(!b)return;return b[a]};b._multiEvent=function(a,b){if(h.test(b)){var c=b.split(h);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];for(var g=0;g<c.length;g++)a.call.apply(a,[this,c[g]].concat(e));return!0}return!1};b._triggerEvents=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b);return}};b.bind=function(a,b,c){return this.on.apply(this,arguments)};b.unbind=function(a,b,c){return this.off.apply(this,arguments)};b.removeListener=function(a,b,c){return this.off.apply(this,arguments)};b.removeAllListeners=function(){return this.off()};b.emit=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return this.trigger(arguments)};return a}();g["default"]=a}),98);
__d("WAWebStorageCmd",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebEventEmitter"));b=new a();g.StorageCmd=b}),98);
__d("WAWebStorageMutation",["invariant","err"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){(a==null?void 0:a.intentionallyUsePrivateConstructor)===!0||h(0,69810),this.constructor.name!=="Mutation"||h(0,56364)}var b=a.prototype;b.validate=function(a){throw c("err")("Subclasses of Mutation must implement `validate`")};b.apply=function(a){throw c("err")("Subclasses of Mutation must implement `apply`")};return a}();g["default"]=a}),98);
__d("WAWebStorageAddArrayIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddArrayIndex1());return a};c.$AddArrayIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.ARRAY,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d=a.call(this,d)||this;d.name=b;d.packedName=c;return d}var c=b.prototype;c.validate=function(a){var b=this;a.columns.find(function(a){return a.name===b.name})&&h(0,75717,this.name,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.push({name:this.name,packedName:this.packedName});return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddCompositeIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.columns=[].concat(b);return c}var c=b.prototype;c.validate=function(a){var b=this;this.columns.forEach(function(b){a.columns.find(function(a){return a.packedName===b})||h(0,75731,b,a.name)});this.columns.length>1||h(0,56264);d("WAWebStorageSchema").findIndex(a,this.$AddCompositeIndex1())===-1||h(0,75735,String(this.columns),a.name);var c=a.columns.filter(function(a){return a.primaryKey&&a.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE}).map(function(a){return a.name});c.length!==this.columns.length||c.some(function(a){return!b.columns.includes(a)})||h(0,75736,String(this.columns),a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddCompositeIndex1());return a};c.$AddCompositeIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE,columns:this.columns}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddEncryptedColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){e=a.call(this,e)||this;e.name=b;e.packedName=c;e.dataType=d;return e}var c=b.prototype;c.validate=function(a){var b=this;a.columns.find(function(a){return a.name===b.name})&&h(0,75738,this.name,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.push({name:this.name,packedName:this.packedName});a.encryptedColumns[this.name]=this.dataType;return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.keyPath=b;c.column=b.split(".")[0];return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddIndex1());return a};c.$AddIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.SIMPLE,column:this.keyPath}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddUniqueIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddUniqueIndex1());return a};c.$AddUniqueIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.UNIQUE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAbstractPrimaryKey",["invariant","WAWebStorageMutation","err"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.constructor.name!=="AbstractPrimaryKey"||h(0,56321);Array.isArray(b)?c.columns=[].concat(b):c.columns=[b];return c}var d=b.prototype;d.validate=function(a){a.columns.length===0||h(0,56320)};d.apply=function(a){throw c("err")("Subclass of `AbstractPrimaryKey` must implement `apply` method")};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAutoIncrementingPrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length===1||h(0,56293)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:d("WAWebStorageSchema").PRIMARY_KEY_TYPE.AUTO_INCREMENT});return a};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageCompositePrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length>1||h(0,56266)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);this.columns.forEach(function(a){b.columns.push({name:a.name,packedName:a.packedName,primaryKey:d("WAWebStorageSchema").PRIMARY_KEY_TYPE.COMPOSITE})});return b};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageRemoveArrayIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveArrayIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveArrayIndex1());b.indexes.splice(a,1);return b};c.$RemoveArrayIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.ARRAY,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.name=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.name===b.name});c||h(0,75721,this.name,a.name);c.primaryKey&&h(0,75722,this.name);a.indexes.some(function(a){return d("WAWebStorageSchema").indexContainsColumn(a,b.name)})&&h(0,75723,this.name,a.name)};c.apply=function(a){var b=this;a=d("WAWebStorageSchema").cloneSchema(a);a.columns.splice(a.columns.findIndex(function(a){return a.name===b.name}),1);return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveCompositeIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.columns=b.toSorted();return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1())!==-1||h(0,75726,String(this.columns),a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1());b.indexes.splice(a,1);return b};c.$RemoveIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE,columns:this.columns}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1());b.indexes.splice(a,1);return b};c.$RemoveIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.SIMPLE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveUniqueIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveUniqueIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveUniqueIndex1());b.indexes.splice(a,1);return b};c.$RemoveUniqueIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.UNIQUE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageUserDefinedPrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length===1||h(0,56293)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:d("WAWebStorageSchema").PRIMARY_KEY_TYPE.USER_DEFINED});return a};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageMutationBuilder",["WAWebStorageAddArrayIndex","WAWebStorageAddColumn","WAWebStorageAddCompositeIndex","WAWebStorageAddEncryptedColumn","WAWebStorageAddIndex","WAWebStorageAddUniqueIndex","WAWebStorageAutoIncrementingPrimaryKey","WAWebStorageCompositePrimaryKey","WAWebStorageRemoveArrayIndex","WAWebStorageRemoveColumn","WAWebStorageRemoveCompositeIndex","WAWebStorageRemoveIndex","WAWebStorageRemoveUniqueIndex","WAWebStorageUserDefinedPrimaryKey","err"],(function(a,b,c,d,e,f,g){function a(a){var b={};return function(c){if(b[c])return b[c];var d=a.apply(null,[c]);b[c]=d;return d}}var h=a(b);function b(a){a=a;var b=[];while(a>0){a--;var c=a%26;b.push(String.fromCharCode("a".charCodeAt(0)+c));a=Math.floor(a/26)}b.reverse();return b.join("")}function d(a,b){var d={intentionallyUsePrivateConstructor:!0};if((a==null?void 0:a.packColumns)&&b==null)throw c("err")("[storage-config-error] packing columns enabled, but packing data does not exist");var e=(a==null?void 0:a.packColumns)&&b?b:{},f=function(a){return e[a]!=null?h(e[a]):a};a=function(a){return new(c("WAWebStorageAddColumn"))(a,f(a),d)};b=function(a,b){return new(c("WAWebStorageAddEncryptedColumn"))(a,f(a),b,d)};var g=function(a){return new(c("WAWebStorageUserDefinedPrimaryKey"))({name:a,packedName:f(a)},d)},i=function(a){return new(c("WAWebStorageAutoIncrementingPrimaryKey"))({name:a,packedName:f(a)},d)},j=function(a){return new(c("WAWebStorageCompositePrimaryKey"))(a.map(function(a){return{name:a,packedName:f(a)}}),d)},k=function(a){a=a.split(".")[0];return new(c("WAWebStorageAddIndex"))(f(a),d)},l=function(a){return new(c("WAWebStorageAddArrayIndex"))(f(a),d)},m=function(a){return new(c("WAWebStorageAddCompositeIndex"))(a.map(function(a){return f(a)}),d)},n=function(a){return new(c("WAWebStorageAddUniqueIndex"))(f(a),d)},o=function(a){return new(c("WAWebStorageRemoveColumn"))(a,d)},p=function(a){return new(c("WAWebStorageRemoveIndex"))(f(a),d)},q=function(a){return new(c("WAWebStorageRemoveUniqueIndex"))(f(a),d)},r=function(a){return new(c("WAWebStorageRemoveArrayIndex"))(f(a),d)},s=function(a){return new(c("WAWebStorageRemoveCompositeIndex"))(a.map(function(a){return f(a)}),d)};return{addColumn:a,addEncryptedColumn:b,addUserDefinedPrimaryKey:g,addAutoIncrementingPrimaryKey:i,addCompositePrimaryKey:j,addIndex:k,addArrayIndex:l,addCompositeIndex:m,addUniqueIndex:n,removeColumn:o,removeIndex:p,removeUniqueIndex:q,removeArrayIndex:r,removeCompositeIndex:s}}g.memoize=a;g.columnBuilder=d}),98);
__d("WAWebStorageMutationUtils",["invariant","WAWebStorageAddArrayIndex","WAWebStorageAddColumn","WAWebStorageAddCompositeIndex","WAWebStorageAddEncryptedColumn","WAWebStorageAddIndex","WAWebStorageAddUniqueIndex","WAWebStorageAutoIncrementingPrimaryKey","WAWebStorageCompositePrimaryKey","WAWebStorageRemoveArrayIndex","WAWebStorageRemoveColumn","WAWebStorageRemoveCompositeIndex","WAWebStorageRemoveIndex","WAWebStorageRemoveUniqueIndex","WAWebStorageUserDefinedPrimaryKey"],(function(a,b,c,d,e,f,g,h){var i=[c("WAWebStorageRemoveCompositeIndex"),c("WAWebStorageRemoveArrayIndex"),c("WAWebStorageRemoveUniqueIndex"),c("WAWebStorageRemoveIndex"),c("WAWebStorageRemoveColumn"),c("WAWebStorageAutoIncrementingPrimaryKey"),c("WAWebStorageUserDefinedPrimaryKey"),c("WAWebStorageCompositePrimaryKey"),c("WAWebStorageAddColumn"),c("WAWebStorageAddIndex"),c("WAWebStorageAddArrayIndex"),c("WAWebStorageAddCompositeIndex"),c("WAWebStorageAddUniqueIndex"),c("WAWebStorageAddEncryptedColumn")];function a(a){return a.toSorted(j)}function j(a,b){var c=i.indexOf(a.constructor),d=i.indexOf(b.constructor);c!==-1||h(0,75730,a.constructor.name);d!==-1||h(0,75730,b.constructor.name);return c-d}g.sortMutations=a}),98);
__d("WAWebStorageTableBuilder",["invariant","WAWebStorageMutationUtils","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){function i(a){return a}function j(a){return a}a=function(){function a(a,b,c){this.maxVersion=j(-1),this.versions=new Map(),this.upgraders=new Map(),this.shouldEnablePropFilter=!0,this.shouldUseDbMsgEncKeyForEncryptedCol=!0,this.name=a,this.versionManager=b,this.maxVersionAllowedRollout=c}var b=a.prototype;b.version=function(a,b,c){var e=this.versionManager.claim(a,this.maxVersionAllowedRollout,this.name);if(!e)return this;this.versions.has(a)&&h(0,75719,this.name,+a);i(a)>i(this.maxVersion)||h(0,75720,this.name);this.maxVersion=a;e=this.schema(a)||d("WAWebStorageSchema").emptySchema(this.name);b=d("WAWebStorageMutationUtils").sortMutations(b).reduce(function(a,b){b.validate(a);return b.apply(a)},d("WAWebStorageSchema").cloneSchema(e));this.versions.set(a,d("WAWebStorageSchema").freezeSchema(b));this.upgraders.set(a,c);return this};b.devOnlyDoNotUseInitWithMaxVersion=function(a,b){var c=this.versionManager.getMax()+1;c=c;return this.version(c,a,b)};b["delete"]=function(a){var b=this.versionManager.claim(a,this.maxVersionAllowedRollout,this.name);if(!b)return this;this.versions.has(a)&&h(0,75719,this.name,+a);i(a)>i(this.maxVersion)||h(0,75720,this.name);this.maxVersion=a;b=this.schema(a)||d("WAWebStorageSchema").emptySchema(this.name);b=babelHelpers["extends"]({},b,{deleted:!0});this.versions.set(a,d("WAWebStorageSchema").freezeSchema(b));return this};b.view=function(a){this.rowview=a;return this};b.enablePropFilter=function(a){this.shouldEnablePropFilter=a;return this};b.useDbMsgEncKeyForEncryptedCol=function(a){this.shouldUseDbMsgEncKeyForEncryptedCol=a;return this};b.schema=function(a){var b=this.versions.get(a);if(b)return b;b=Array.from(this.versions.keys()).map(i).sort(function(a,b){return a-b}).filter(function(b){return b<i(a)});b=b.pop();if(!b&&b!==0)return null;b=b;return this.versions.get(b)||d("WAWebStorageSchema").emptySchema(this.name)};b.tableExists=function(){return this.maxVersion!==j(-1)};b.commit=function(){return this};return a}();g["default"]=a}),98);
__d("WAWebStorageVersionManager",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] skipping version "," for table "," since it is higher than max version to rollout ",""]);h=function(){return a};return a}var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DuplicateVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="InvalidVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="MissingVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(){this.versions=new Set(),this.$1=-1}var b=a.prototype;b.claim=function(a,b,c){if(a<0)throw new j("Versions must by greater than or equal to zero!");if(this.versions.has(a))throw new i("Version #"+a+" has already been claimed!");if(b!=null&&b<a){d("WALogger").LOG(h(),a,c,b);return!1}this.versions.add(a);this.$1=Math.max(this.getMax(),a);return!0};b.version=function(a){if(a<0)throw new j("Versions must by greater than or equal to zero!");return a};b.validate=function(){for(var a=0;a<=this.getMax();++a){if(this.versions.has(a))continue;throw new k("Schema version #"+a+" is missing!")}};b.getMax=function(){return this.$1};return a}();g.StorageVersionManager=a}),98);
__d("WAWebStorage",["Promise","WALogger","WAWeb-dexie","WAWebBrokerGlobalAppState","WAWebIdbLazyView","WAWebLocalStorage","WAWebMiscErrors","WAWebProfiler","WAWebSchemaVersions","WAWebStorageCmd","WAWebStorageMutationBuilder","WAWebStorageTableBuilder","WAWebStorageVersionManager","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: log failed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: navigator.storage.estimate: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: localStorage usage: key:"," length:",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Logout due to: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Logout due to: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] unknown database name: ",""]);n=function(){return a};return a}var o=1<<0,p=1<<1,q=1<<2,r={packColumns:!1},s=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="AlreadyInitializedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),t=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DuplicateTableError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),u=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoSuchDatabaseError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),v=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoSuchTableError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),w=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NotInitializedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b){this.tables=new Map();this.views=new Map();this.state=o;this.versions=new(d("WAWebStorageVersionManager").StorageVersionManager)();this.errorHandlers=new Map();this.$1=a;this.config=(a=b)!=null?a:r;this.$2()}var e=a.prototype;e.addErrorHandler=function(a,b){a=new a().name;this.errorHandlers.set(a,b)};e.add_OPTIMIZED_EXPERIMENT=function(a,b){a=this.add(a);b(a,d("WAWebStorageMutationBuilder").columnBuilder(this.config))};e.add=function(a){if(this.tables.has(a))throw new t('Table "'+a+'" already added. Reuse the definition.');var b=d("WAWebSchemaVersions").DatabaseNames.cast(this.$1.getDbName());if(b===void 0){d("WALogger").ERROR(n(),this.$1.getDbName()).sendLogs("[storage] unknown database name");throw c("err")("unknown database name: "+this.$1.getDbName())}b=b===d("WAWebSchemaVersions").DatabaseNames.LruMediaStorage?null:d("WAWebSchemaVersions").getSchemaVersions(b).get(b);b=new(c("WAWebStorageTableBuilder"))(a,this.versions,b);this.tables.set(a,b);return b};e.$2=function(){this.addErrorHandler(c("WAWeb-dexie").DatabaseClosedError,function(a){if(c("WAWebBrokerGlobalAppState").takeOver&&a.message.includes("DatabaseClosedError"))throw new(d("WAWebMiscErrors").DbClosedOnTakeover)(a.message)}),this.addErrorHandler(c("WAWeb-dexie").NoSuchDatabaseError,function(a){if(c("WAWebBrokerGlobalAppState").takeOver&&a.message.includes("NoSuchDatabaseError"))throw new(d("WAWebMiscErrors").DbNotFoundOnTakeover)(a.message)}),this.addErrorHandler(c("WAWeb-dexie").AbortError,function(a){a.message.includes("QuotaExceededError")&&(!c("gkx")("26258")?(void x(),d("WALogger").ERROR(m(),a).sendLogs("logout-due-to-quota-exceeded-error-intern")):d("WALogger").ERROR(l(),a).sendLogs("logout-due-to-quota-exceeded-error",{sampling:.01,sendLogsType:d("WALogger").SendLogsType.USER_FORCEFULLY_LOGGED_OUT_SAD}),d("WAWebStorageCmd").StorageCmd.trigger("storage_not_enough_space"))})};e.$3=function(){return this.$1};e.$4=function(a){if(this.views.has(a))return this.views.get(a);var b=this.$1;b=b.view(a.name,a.rowview,a.shouldEnablePropFilter,a.shouldUseDbMsgEncKeyForEncryptedCol);this.views.set(a,b);return b};e.$5=function(a){var b=this;return function(){if(b.state&(p|o))throw new w("Storage must be initialized before accessing a table!");return a()}};e.table=function(a){var b=this,d=this.tables.get(a);if(!d||!d.tableExists())throw new v("Unknown table "+a+" requested, ensure table is defined!");var e=this.$3();if(!e)throw new u('Unable to find associated database with table "'+a+'"');return new(c("WAWebIdbLazyView"))(this.$5(function(){return b.$4(d)}),this.errorHandlers)};e.lock=function(a,c){var d=this,e;if(this.state&(p|o))return(h||(h=b("Promise"))).reject(new w("Initialize storage before attempting to lock tables!"));for(var f=0;f<a.length;++f){var g;if(this.tables.has(a[f])&&((g=this.tables.get(a[f]))==null?void 0:g.tableExists()))continue;return(h||(h=b("Promise"))).reject(new v('Requested lock of unknown table "'+a[f]+'"'))}g=a.map(function(a){var b=d.tables.get(a);if(b)return b;throw new v('Requested lock of unknown table "'+a+'"')});var i=g.map(function(a){return d.$4(a)});f=this.$3().transact(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return c(i)}));return f["finally"](function(){})};e.$6=function(a,b){for(var c=0;c<a.length;c++)if(a[c].maxVersion===b){var d=a[c].upgraders.get(b);if(d)return{name:a[c].name,callback:d}}return void 0};e.$7=function(a,b,c){var d=b,e=c.map(function(a){return a.schema(d)}).filter(Boolean);return a.initialize(b,e,this.$6(c,d),this.errorHandlers)};e.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.state&q)throw new s("Storage instance has already been initialized");this.versions.validate();if(this.$1)yield this.$1.available();else throw new u('"'+this.$1.constructor.name+'" failed availability check!');var a=Array.from(this.tables.values()),b=this.$3();if(!a||!b)return;for(var c=0;c<=this.versions.getMax();c++)yield this.$7(b,c,a);yield b.open();this.state=q});function c(){return a.apply(this,arguments)}return c}();e.purge=function(){this.state=p;this.views=new Map();return this.$3().reset().then(function(){return void 0})};e.doesLocalSchemaIncludeVersion=function(a){return a<=this.versions.getMax()};e.getExistingTables=function(){var a=new Map();this.tables.forEach(function(b,c){b.tableExists()&&a.set(c,b)});return a};return a}();function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{c("WAWebLocalStorage")!=null&&Object.keys(c("WAWebLocalStorage")).forEach(function(a){var b;b=(b=(b=c("WAWebLocalStorage").getItem(a))==null?void 0:b.length)!=null?b:0;b>1e3&&d("WALogger").WARN(k(),a,b)});if(navigator!=null){var a;a=(yield (a=navigator.storage)==null?void 0:a.estimate==null?void 0:a.estimate());d("WALogger").WARN(j(),JSON.stringify(a))}}catch(a){d("WALogger").WARN(i(),a)}});return y.apply(this,arguments)}g.NoSuchTableError=v;g.Storage=a}),98);
__d("WAWebModelStorageUtils",["invariant","Promise","WAWeb-dexie","WAWebDexieCastTypes","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="model-storage",k=null;function a(){return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie").exists(j))}function e(a){var b=new(c("WAWebIdb"))(j,{packColumns:a.packColumns});k=new(d("WAWebStorage").Storage)(b,a)}function f(){k!=null||h(0,56367);return k}function l(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[model-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.storageExists=a;g.createStorage=e;g.getStorage=f;g.destroyStorage=l}),98);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WAWebProtobufsAdv.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({E2EE:0,HOSTED:1});c={};e={};f={};b={};var h={};c.internalDefaults={accountType:a.E2EE};c.internalSpec={rawId:[1,(d=d("WAProtoConst")).TYPES.UINT32],timestamp:[2,d.TYPES.UINT64],currentIndex:[3,d.TYPES.UINT32],validIndexes:[4,d.FLAGS.REPEATED|d.FLAGS.PACKED|d.TYPES.UINT32],accountType:[5,d.TYPES.ENUM,a]};e.internalSpec={details:[1,d.TYPES.BYTES],accountSignature:[2,d.TYPES.BYTES],accountSignatureKey:[3,d.TYPES.BYTES]};f.internalDefaults={accountType:a.E2EE,deviceType:a.E2EE};f.internalSpec={rawId:[1,d.TYPES.UINT32],timestamp:[2,d.TYPES.UINT64],keyIndex:[3,d.TYPES.UINT32],accountType:[4,d.TYPES.ENUM,a],deviceType:[5,d.TYPES.ENUM,a]};b.internalSpec={details:[1,d.TYPES.BYTES],accountSignatureKey:[2,d.TYPES.BYTES],accountSignature:[3,d.TYPES.BYTES],deviceSignature:[4,d.TYPES.BYTES]};h.internalDefaults={accountType:a.E2EE};h.internalSpec={details:[1,d.TYPES.BYTES],hmac:[2,d.TYPES.BYTES],accountType:[3,d.TYPES.ENUM,a]};g.ADVEncryptionType=a;g.ADVKeyIndexListSpec=c;g.ADVSignedKeyIndexListSpec=e;g.ADVDeviceIdentitySpec=f;g.ADVSignedDeviceIdentitySpec=b;g.ADVSignedDeviceIdentityHMACSpec=h}),98);
__d("WAWebApiContact",["$InternalEnum","Promise","WABase64","WAErr","WAJids","WALogger","WAMd5","WAResolvable","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebLidAwareContactsDB","WAWebLidPnCache","WAWebModelStorageUtils","WAWebProtobufsAdv.pb","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateContactAdvHostedTypefailed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateContactAdvHostedType: check coex cache for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["warmUpAllLidPnMappings: finished in ","ms"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["warmUpAllLidPnMappings: error ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["warmUpAllLidPnMappings: warming up "," contacts"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["warmUpAllLidPnMappings: queried contact DB and found "," records in ","ms"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["warmUpAllLidPnMappings: already warmed up"]);o=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["LID is null - fetching "," PN records. Mapping is missing for: ",""]);a=function(){return b};return b}var p=new(d("WAWebLidPnCache").LidPnCache)(),q=new Set();function e(a){return d("WAWebModelStorageUtils").getStorage().lock(["contact"],function(){var b=a.map(function(a){return{id:a,isAddressBookContact:0,name:void 0,shortName:void 0,type:"out",contactHash:u(a)}});return c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b)})}function f(a){return c("WAWebLidAwareContactsDB").bulkCreateOrMerge(a)}function r(a){return c("WAWebLidAwareContactsDB").bulkRemove(a)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("WAWebLidAwareContactsDB").get(a));return a==null?!1:a.isAddressBookContact===1});return t.apply(this,arguments)}function u(a){a=d("WAWebWidFactory").createWid(a).user;a=d("WABase64").decodeB64(c("WAMd5")(a+"WA_ADD_NOTIF"));return d("WABase64").encodeB64(a.slice(0,3))}function v(a){return d("WAWebModelStorageUtils").getStorage().lock(["contact"],function(){var b=a.map(function(a){var b=a.lid;a=a.data;return babelHelpers["extends"]({id:b.toString()},a)});return c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b)})}function w(a,b,c){p.add(a,{lid:a,phoneNumber:b,phoneNumberCreatedAt:c})}var x;function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(x!=null){d("WALogger").LOG(o());return x.promise}b=(b=self)==null?void 0:b.performance.now();x=new(d("WAResolvable").Resolvable)();try{a=a;if(a==null){var e;a=(yield c("WAWebLidAwareContactsDB").all());d("WALogger").LOG(n(),a.length,((e=self)==null?void 0:e.performance.now())-b)}else d("WALogger").LOG(m(),a.length);for(e of a){a=e.id;var f=e.phoneNumber,g=e.phoneNumberCreatedAt;c("WAWebWid").isLid(a)&&f!=null&&g!=null&&w(d("WAWebWidFactory").createUserWid(a,"lid"),d("WAWebWidFactory").createUserWid(f),g)}}catch(a){d("WALogger").ERROR(l(),a).sendLogs("warmup-all-lid-pn-mappings-error")}d("WALogger").LOG(k(),((a=self)==null?void 0:a.performance.now())-b);(f=x)==null?void 0:f.resolve()});return z.apply(this,arguments)}function A(a){if(a.device!=null)throw c("WAErr")("getAlternateUserWid - Invalid get call using deviceWid");return a.isLid()?E(a):D(a)}function B(a){var b=A(d("WAWebWidFactory").toUserWid(a));if(b!=null){return d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,b.server,(b=a.device)!=null?b:d("WAJids").DEFAULT_DEVICE_ID)}}function C(a){var b=D(d("WAWebWidFactory").toUserWid(a));if(b!=null){return d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,"lid",(b=a.device)!=null?b:d("WAJids").DEFAULT_DEVICE_ID)}}function D(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeUser(),c=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();return c!=null&&b!=null&&a.equals(b)?c:p.getCurrentLid(a)}function E(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeLidUser(),c=d("WAWebUserPrefsMeUser").getMaybeMeUser();return c!=null&&b!=null&&a.equals(b)?c:p.getPhoneNumber(a)}function F(a){var b=E(d("WAWebWidFactory").toUserWid(a));if(b!=null){var c=D(b);if(a.equals(c))return b}return}function G(){p.clear(),q.clear()}function H(){return p.getAllLids()}function I(a){return c("WAWebLidAwareContactsDB").get(a.toJid())}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield I(a));return a==null?void 0:a.username});return K.apply(this,arguments)}function L(a){return d("WAWebModelStorageUtils").getStorage().lock(["contact"],function(){var b=a.map(function(a){var b=a.id,c=a.username;a=a.displayNameLID;return babelHelpers["extends"]({id:b,username:c},a!=null&&{displayNameLID:a})});return c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b)})}function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(e==null)return;e===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(j(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").assertThrowsWidAdvTypeFromVerificationCache(a));var f=a.isLid()?d("WAJids").toLidUserJid(a.user):d("WAJids").toPhoneUserJid(a.user),g=e===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED;yield c("WAWebLidAwareContactsDB").merge(f,g?{isHosted:!0,isOrHasBeenHosted:!0}:{isHosted:!1})["catch"](function(a){d("WALogger").ERROR(i()).verbose().devConsole(a);throw a});d("WAWebBackendApi").frontendFireAndForget("updateContactAdvAccountType",{contactId:a,advAccountType:e})}return(h||(h=b("Promise"))).resolve()});return N.apply(this,arguments)}var O=b("$InternalEnum")({WAWEB_SIGNAL_SESSION_HAS_SIGNAL_SESSIONS:"waweb-ss-has-signal-sessions",WAWEB_SIGNAL_SESSION_DELETE_REMOTE_INFO:"waweb-ss-delete-remote-info",WAWEB_SIGNAL_SESSION_DELETE_REMOTE_SESSION:"waweb-ss-delete-remote-session",WAWEB_SIGNAL_SESSION_SAVE_SESSION_BASE_KEY:"waweb-ss-save-session-base-key",WAWEB_SIGNAL_SESSION_HAS_SAME_BASE_KEY:"waweb-ss-has-same-base-key",WAWEB_SIGNAL_SESSION_DELETE_GROUP_SENDER_KEY_INFO:"waweb-ss-delete-group-sender-key-info",WAWEB_SIGNAL_SESSION_DELETE_DEVICE_SENDER_KEY:"waweb-ss-delete-device-sender-key",WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_LOAD_SESSION:"waweb-cldca-load-session",WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_HANDLE_NEW_SESSION:"waweb-cldca-handle-new-session",WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_LOAD_SENDER_KEY_SESSION:"waweb-cldca-load-sender-key-session",WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_SAVE_SENDER_KEY_SESSION:"waweb-cldca-save-sender-key-session",WAWEB_ADV_SYNC_DEVICE_LIST_SEND_DEVICE_SYNC_REQUEST:"waweb-asdl-send-device-sync-request",WAWEB_API_DEVICE_LIST_GET_DEVICE_RECORD:"waweb-adl-get-device-record",WAWEB_API_DEVICE_LIST_BULK_GET_DEVICE_RECORD:"waweb-adl-bulk-get-device-record",WAWEB_API_DEVICE_LIST_CREATE_OR_REPLACE_DEVICE_RECORD:"waweb-adl-create-or-replace-device-record",WAWEB_API_DEVICE_LIST_BULK_CREATE_OR_REPLACE_DEVICE_RECORD:"waweb-adl-bulk-create-or-replace-device-record"});function P(a,b){var c=new Set();a.forEach(function(a){if(a.isBot()||a.isHosted()||a.isLid())return;c.add(d("WAWebWidFactory").toUserWid(a).toString())});var e=new Set();c.forEach(function(a){var b=D(d("WAWebWidFactory").createUserWid(a));b==null&&e.add(a)})}function Q(a){var b=new Map();a.forEach(function(a){var c=A(d("WAWebWidFactory").toUserWid(a));c!=null&&b.set(c.toString(),a)});return b}function R(a){var b=new Map();a.forEach(function(a){a=d("WAWebWidFactory").createUserWid(a);if(c("WAWebWid").isLid(a)){var e=E(a);if(e!=null){var f=[];f.push(e.toString());if(!e.isLid()){e=D(e);e!=null&&!c("WAWebWid").equals(a,e)&&f.push(e.toString())}b.set(a.toString(),f)}}});return b}g.lidPnCache=p;g.lidPnCacheDirtySet=q;g.setNotAddressBookContacts=e;g.createOrMergeAddressBookContacts=f;g.deleteAddressBookContacts=r;g.isAddressBookContact=s;g.getContactHash=u;g.updateLidMetadata=v;g.warmUpLidPnMapping=w;g.warmUpAllLidPnMappings=y;g.getAlternateUserWid=A;g.getAlternateDeviceWid=B;g.getCurrentLidDevice=C;g.getCurrentLid=D;g.getPhoneNumber=E;g.getPnIfLidIsLatestMapping=F;g.clearLidPnMappingCache=G;g.getAllLidContacts=H;g.getContactRecord=I;g.getContactUsername=J;g.bulkUpdateUsernamesInDb=L;g.updateContactAdvHostedType=M;g.CheckPnToLidMappingCaller=O;g.checkPnToLidMapping=P;g.getAlternateWidBulk_DEPRECATED=Q;g.getAlternateWidBulkForLids_DEPRECATED=R}),98);
__d("WAWebLidPnCache",["WALogger","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WaWebLidPnCache - Invalid get call (not lid) - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WaWebLidPnCache - Invalid get call (not user) - ","}"]);i=function(){return a};return a}a=function(){function a(){this.$1=new Map(),this.$2=new Map()}var b=a.prototype;b.getPhoneNumber=function(a){return(a=this.getLidEntry(a))==null?void 0:a.phoneNumber};b.getLidEntry=function(a){if(!a.isUser()){d("WALogger").DEV(i(),a.toString());throw c("err")("WaWebLidPnCache - Invalid get call (not user)")}if(!a.isLid()){d("WALogger").DEV(h(),a.toString());throw c("err")("WaWebLidPnCache - Invalid get call (not lid)")}a=a.toString();if(this.$1.has(a))return this.$1.get(a)};b.getCurrentLid=function(a){if(!a.isUser()||a.isLid())throw c("err")("WaWebLidPnCache - Invalid get call");a=a.toString();if(this.$2.has(a)){return(a=this.$2.get(a))==null?void 0:a.lid}};b.add=function(a,b){if(!a.isLid())throw c("err")("WaWebLidPnCache - Invalid add call");a=a.toString();this.$1.set(a,b);a=b.phoneNumber;a!=null&&this.$3(a,b)};b.$3=function(a,b){if(a.isLid())throw c("err")("WaWebLidPnCache - Invalid _updatePnMap call");a=a.toString();if(this.$2.has(a)){var d=this.$2.get(a);d!=null&&(d==null?void 0:d.phoneNumberCreatedAt)<=b.phoneNumberCreatedAt&&this.$2.set(a,b)}else this.$2.set(a,b)};b.getAllLids=function(){return Array.from(this.$1.keys()).sort().map(function(a){return d("WAWebWidFactory").createUserWid(a)})};b.clear=function(){this.$1.clear(),this.$2.clear()};return a}();g.LidPnCache=a}),98);
__d("WAWebSignalAddress",["WALogger","WAWebApiContact","WAWebBizCoexGatingUtils","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["SignalAddress - LID is null"]);h=function(){return a};return a}var i=":99";a=function(){function a(a,b){this.wid=a,this.usingAccountIdentifier=Boolean(b)}var b=a.prototype;b.getWid=function(){return this.wid};b.toString=function(){return this.usingAccountIdentifier?this.getAccountIdentifierAddress():this.getLegacyAddress()};b.getLegacyAddress=function(){var a=this.wid.device!=null&&this.wid.device!==0?":"+this.wid.device:"",b="";this.wid.isLid()&&(b="@lid");this.wid.isFbidBot()&&(b="@bot");if(this.wid.isHosted())if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(a!==i)throw c("err")("Hosted jid with wrong device id");b="@hosted"}else throw c("err")("Unexpected hosted jid");return[this.wid.user,a,b].join("")};b.getAccountIdentifierAddress=function(){var a=this.wid.device!=null&&this.wid.device!==0?":"+this.wid.device:"";if(this.wid.isFbidBot())return[this.wid.user,"@bot"].join("");else if(this.wid.isBot())return[this.wid.user,a,"@c.us"].join("");if(this.wid.isHosted()){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(a!==i)throw c("err")("Hosted jid with wrong device id");return[this.wid.user,a,"@hosted"].join("")}throw c("err")("Unexpected hosted jid")}var b=d("WAWebWidFactory").toUserWid(this.wid),e=!b.isLid()&&b.isUser();e=e?d("WAWebApiContact").getCurrentLid(b):b;if(e==null){d("WALogger").ERROR(h()).sendLogs("signal-address-missing-lid",{sampling:0});return[this.wid.user,a,"@c.us"].join("")}return[e.user,a,"@lid"].join("")};return a}();g.SignalAddress=a}),98);
__d("WAByteBuffer",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=16,i=new ArrayBuffer(0),j=function(){function a(a){var b;this.offset=0;this.limit=0;this.capacity=(b=a)!=null?b:h;if(a==null||a<0)throw c("WAErr")("RangeError: Illegal capacity");this.buffer=this.capacity===0?i:new ArrayBuffer(this.capacity);this.view=this.capacity===0?null:new DataView(this.buffer)}var b=a.prototype;b.toArrayBuffer=function(a){a===void 0&&(a=!1);var b=this.offset,d=this.limit;if(b>d){var e=b;b=d;d=e}if(b==null||b%1!==0)throw c("WAErr")("TypeError: Illegal offset: Not a valid integer");b>>>=0;if(d==null||d%1!==0)throw c("WAErr")("TypeError: Illegal limit: Not a valid integer");d>>>=0;if(b<0||b>d||d>this.buffer.byteLength)throw c("WAErr")("RangeError: Illegal range: 0 <= "+b+" <= "+d+" <= "+this.buffer.byteLength);if(!a&&b===0&&d===this.buffer.byteLength)return this.buffer;if(b===d)return i;e=new ArrayBuffer(d-b);new Uint8Array(e).set(new Uint8Array(this.buffer).subarray(b,d),0);return e};b.toBinaryString=function(a,b){a=(a=a)!=null?a:this.offset;b=(b=b)!=null?b:this.limit;if(a==null||a%1!==0)throw c("WAErr")("TypeError: Illegal begin: Not a valid integer");a>>>=0;if(b==null||b%1!==0)throw c("WAErr")("TypeError: Illegal end: Not a valid integer");b>>>=0;if(a<0||a>b||b>this.buffer.byteLength)throw c("WAErr")("RangeError: Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength);if(a===b)return"";var d=[],e=[];while(a<b){var f;d.push((f=this.view)==null?void 0:f.getUint8(a++));d.length>=1024&&(e.push(String.fromCharCode.apply(String,d)),d=[])}return e.join("")+String.fromCharCode.apply(String,d)};return a}();function a(a){if(typeof a!=="string")throw c("WAErr")("TypedError: Illegal input => not a string");var b=a.length,d=new j(b);for(var e=0;e<b;e++){var f,g=a.charCodeAt(e);if(g>255)throw c("WAErr")("RangeError: Illegal charCode at "+e+": 0 <= "+g+" <= 255");(f=d.view)==null?void 0:f.setUint8(e,g)}d.limit=b;return d.toArrayBuffer()}function b(a){var b=new j(0);a.byteLength>0&&(b.buffer=a,b.offset=0,b.limit=a.byteLength,b.view=a.byteLength>0?new DataView(a):null);return b.toBinaryString()}function d(a){if(a instanceof Uint8Array){var b=new j(0);a.length>0&&(b.buffer=a.buffer,b.offset=a.byteOffset,b.limit=a.byteOffset+a.length,b.view=a.length>0?new DataView(a.buffer):null);return b.toArrayBuffer()}else throw c("WAErr")("TypeError: Illegal input => not an Uint8Array but "+typeof a)}function e(a){if(a instanceof ArrayBuffer){var b=new j(0);a.byteLength>0&&(b.buffer=a,b.offset=0,b.limit=a.byteLength,b.view=a.byteLength>0?new DataView(a):null);return b.toArrayBuffer()}else throw c("WAErr")("TypeError: Illegal input => not an ArrayBuffer but "+typeof a)}g.wrapString=a;g.wrapBufferToString=b;g.wrapUint8Array=d;g.wrapArrayBuffer=e}),98);
__d("WAWebDeprecatedSignalAddress",["err"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.wid=a;this.usingAccountIdentifier=Boolean(b);if(!this.wid.isLid())throw c("err")("Deprecated Session only applies for LID JID")}var b=a.prototype;b.getWid=function(){return this.wid};b.toString=function(){return this.usingAccountIdentifier?this.getAccountIdentifierAddress():this.getLegacyAddress()};b.getLegacyAddress=function(){var a=this.wid.device!=null&&this.wid.device!==0?":"+this.wid.device:"",b="@lid";return[this.wid.user,a,b].join("")};b.getAccountIdentifierAddress=function(){var a=this.wid.device!=null&&this.wid.device!==0?":"+this.wid.device:"";return[this.wid.user,a,"@lid_deprecated"].join("")};return a}();g.DeprecatedSignalAddress=a}),98);
__d("WAWebSignalCommonUtils",["WAByteBuffer","WALogger","WAWebDeprecatedSignalAddress","WAWebSignalAddress","WAWebSingleSignalSession","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal][CommonUtils][SenderKey] using "," - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal][CommonUtils][Session] using "," - ",""]);i=function(){return a};return a}function a(a){var b=new Uint8Array(1);self.crypto.getRandomValues(b);j(a,(b[0]&15)+1)}function j(a,b){for(var c=0;c<b;c++)a.writeUint8(b)}function b(a){return k(a)}function k(a){if(typeof a==="string")return d("WAByteBuffer").wrapString(a);else if(a instanceof Uint8Array)return d("WAByteBuffer").wrapUint8Array(a);else if(a instanceof ArrayBuffer)return d("WAByteBuffer").wrapArrayBuffer(a);throw c("err")("[wrapToArrayBuffer] Unknown input type "+typeof a)}function e(a){return d("WAByteBuffer").wrapBufferToString(a)}function f(a,b){if(!a||!b)return!1;if(a.byteLength!==b.byteLength)return!1;a=new DataView(a);b=new DataView(b);for(var c=0;c<a.byteLength;c++)if(a.getUint8(c)!==b.getUint8(c))return!1;return!0}function l(a){if(typeof a!=="string"||!a.match(/.*\.\d+/))throw c("err")("Invalid SignalLikeProtocolAddress string");a=a.split(".");if(a.length!==2)throw c("err")("Invalid SignalLikeProtocolAddress string");var b="_deprecated";return a[0].includes(b)?a[0].substr(0,a[0].length-b.length):a[0]}function m(a,b){var c=0;b=b&&a.isLid()?new(d("WAWebDeprecatedSignalAddress").DeprecatedSignalAddress)(a,d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()):new(d("WAWebSignalAddress").SignalAddress)(a,d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage());a=b.toString();return a+"."+c}function n(a){if(!(a.isUser()||a.isServer()||a.isPSA()))throw c("err")("Jid "+a.toString({legacy:!0})+' is not fully qualified, jid.server should be "s.whatsapp.net"');return m(a,!1)}function o(a,b){var e=!1;a.isLid()&&(e=b!=null?b:!0);if(d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()){b=e?"DeprecatedSession":"PrimarySession";d("WALogger").DEV(i(),b,a.toString())}if(!(a.isUser()||a.isServer()||a.isPSA()))throw c("err")("Jid "+a.toString({legacy:!0})+' is not fully qualified, jid.server should be "s.whatsapp.net"');return m(a,e)}function p(a,b,c){if(d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()){var e=c?"DeprecatedSession":"PrimarySession";d("WALogger").DEV(h(),e,b.toString())}return a+"::"+o(b,c)}var q={name:"AES-CTR",length:128,counter:new Uint8Array(16)};function r(a){return self.crypto.subtle.generateKey({name:q.name,length:q.length},!1,["encrypt","decrypt"]).then(function(b){return self.crypto.subtle.encrypt(q,b,a).then(function(a){return{encKey:b,value:a}})})}function s(a){return self.crypto.subtle.decrypt(q,a.encKey,a.value)}g.writeRandomPadMax16=a;g.strToBuffer=b;g.bufferToStr=e;g.bufferEqual=f;g.getSignalLikeAddressName=l;g.createSignalLikeAddress=m;g.createSignalAddressForIdentityTable=n;g.createSignalAddress=o;g.createSignalLikeSenderKeyName=p;g.encryptRegistrationMaterial=r;g.decryptRegistrationMaterial=s}),98);
__d("WAWebModelStorageVersions",["WAWebModelStorageUtils"],(function(a,b,c,d,e,f,g){var h=148;function a(){return d("WAWebModelStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebModelStorageUtils").getStorage().versions.version(1)}function c(){return d("WAWebModelStorageUtils").getStorage().versions.version(2)}function e(){return d("WAWebModelStorageUtils").getStorage().versions.version(3)}function f(){return d("WAWebModelStorageUtils").getStorage().versions.version(4)}function i(){return d("WAWebModelStorageUtils").getStorage().versions.version(5)}function j(){return d("WAWebModelStorageUtils").getStorage().versions.version(6)}function k(){return d("WAWebModelStorageUtils").getStorage().versions.version(7)}function l(){return d("WAWebModelStorageUtils").getStorage().versions.version(8)}function m(){return d("WAWebModelStorageUtils").getStorage().versions.version(9)}function n(){return d("WAWebModelStorageUtils").getStorage().versions.version(10)}function o(){return d("WAWebModelStorageUtils").getStorage().versions.version(11)}function p(){return d("WAWebModelStorageUtils").getStorage().versions.version(12)}function q(){return d("WAWebModelStorageUtils").getStorage().versions.version(13)}function r(){return d("WAWebModelStorageUtils").getStorage().versions.version(14)}function s(){return d("WAWebModelStorageUtils").getStorage().versions.version(15)}function t(){return d("WAWebModelStorageUtils").getStorage().versions.version(16)}function u(){return d("WAWebModelStorageUtils").getStorage().versions.version(17)}function v(){return d("WAWebModelStorageUtils").getStorage().versions.version(18)}function w(){return d("WAWebModelStorageUtils").getStorage().versions.version(19)}function x(){return d("WAWebModelStorageUtils").getStorage().versions.version(20)}function y(){return d("WAWebModelStorageUtils").getStorage().versions.version(21)}function z(){return d("WAWebModelStorageUtils").getStorage().versions.version(22)}function A(){return d("WAWebModelStorageUtils").getStorage().versions.version(23)}function B(){return d("WAWebModelStorageUtils").getStorage().versions.version(24)}function C(){return d("WAWebModelStorageUtils").getStorage().versions.version(25)}function D(){return d("WAWebModelStorageUtils").getStorage().versions.version(26)}function E(){return d("WAWebModelStorageUtils").getStorage().versions.version(27)}function F(){return d("WAWebModelStorageUtils").getStorage().versions.version(28)}function G(){return d("WAWebModelStorageUtils").getStorage().versions.version(29)}function H(){return d("WAWebModelStorageUtils").getStorage().versions.version(30)}function I(){return d("WAWebModelStorageUtils").getStorage().versions.version(31)}function J(){return d("WAWebModelStorageUtils").getStorage().versions.version(32)}function K(){return d("WAWebModelStorageUtils").getStorage().versions.version(33)}function L(){return d("WAWebModelStorageUtils").getStorage().versions.version(34)}function M(){return d("WAWebModelStorageUtils").getStorage().versions.version(35)}function N(){return d("WAWebModelStorageUtils").getStorage().versions.version(36)}function O(){return d("WAWebModelStorageUtils").getStorage().versions.version(37)}function P(){return d("WAWebModelStorageUtils").getStorage().versions.version(38)}function Q(){return d("WAWebModelStorageUtils").getStorage().versions.version(39)}function R(){return d("WAWebModelStorageUtils").getStorage().versions.version(40)}function S(){return d("WAWebModelStorageUtils").getStorage().versions.version(41)}function T(){return d("WAWebModelStorageUtils").getStorage().versions.version(42)}function U(){return d("WAWebModelStorageUtils").getStorage().versions.version(43)}function V(){return d("WAWebModelStorageUtils").getStorage().versions.version(44)}function W(){return d("WAWebModelStorageUtils").getStorage().versions.version(45)}function X(){return d("WAWebModelStorageUtils").getStorage().versions.version(46)}function Y(){return d("WAWebModelStorageUtils").getStorage().versions.version(47)}function Z(){return d("WAWebModelStorageUtils").getStorage().versions.version(48)}function $(){return d("WAWebModelStorageUtils").getStorage().versions.version(49)}function aa(){return d("WAWebModelStorageUtils").getStorage().versions.version(50)}function ba(){return d("WAWebModelStorageUtils").getStorage().versions.version(51)}function ca(){return d("WAWebModelStorageUtils").getStorage().versions.version(52)}function da(){return d("WAWebModelStorageUtils").getStorage().versions.version(53)}function ea(){return d("WAWebModelStorageUtils").getStorage().versions.version(54)}function fa(){return d("WAWebModelStorageUtils").getStorage().versions.version(55)}function ga(){return d("WAWebModelStorageUtils").getStorage().versions.version(56)}function ha(){return d("WAWebModelStorageUtils").getStorage().versions.version(57)}function ia(){return d("WAWebModelStorageUtils").getStorage().versions.version(58)}function ja(){return d("WAWebModelStorageUtils").getStorage().versions.version(59)}function ka(){return d("WAWebModelStorageUtils").getStorage().versions.version(60)}function la(){return d("WAWebModelStorageUtils").getStorage().versions.version(61)}function ma(){return d("WAWebModelStorageUtils").getStorage().versions.version(62)}function na(){return d("WAWebModelStorageUtils").getStorage().versions.version(63)}function oa(){return d("WAWebModelStorageUtils").getStorage().versions.version(64)}function pa(){return d("WAWebModelStorageUtils").getStorage().versions.version(65)}function qa(){return d("WAWebModelStorageUtils").getStorage().versions.version(66)}function ra(){return d("WAWebModelStorageUtils").getStorage().versions.version(67)}function sa(){return d("WAWebModelStorageUtils").getStorage().versions.version(68)}function ta(){return d("WAWebModelStorageUtils").getStorage().versions.version(69)}function ua(){return d("WAWebModelStorageUtils").getStorage().versions.version(70)}function va(){return d("WAWebModelStorageUtils").getStorage().versions.version(71)}function wa(){return d("WAWebModelStorageUtils").getStorage().versions.version(72)}function xa(){return d("WAWebModelStorageUtils").getStorage().versions.version(73)}function ya(){return d("WAWebModelStorageUtils").getStorage().versions.version(74)}function za(){return d("WAWebModelStorageUtils").getStorage().versions.version(75)}function Aa(){return d("WAWebModelStorageUtils").getStorage().versions.version(76)}function Ba(){return d("WAWebModelStorageUtils").getStorage().versions.version(77)}function Ca(){return d("WAWebModelStorageUtils").getStorage().versions.version(78)}function Da(){return d("WAWebModelStorageUtils").getStorage().versions.version(79)}function Ea(){return d("WAWebModelStorageUtils").getStorage().versions.version(80)}function Fa(){return d("WAWebModelStorageUtils").getStorage().versions.version(81)}function Ga(){return d("WAWebModelStorageUtils").getStorage().versions.version(82)}function Ha(){return d("WAWebModelStorageUtils").getStorage().versions.version(83)}function Ia(){return d("WAWebModelStorageUtils").getStorage().versions.version(84)}function Ja(){return d("WAWebModelStorageUtils").getStorage().versions.version(85)}function Ka(){return d("WAWebModelStorageUtils").getStorage().versions.version(86)}function La(){return d("WAWebModelStorageUtils").getStorage().versions.version(87)}function Ma(){return d("WAWebModelStorageUtils").getStorage().versions.version(88)}function Na(){return d("WAWebModelStorageUtils").getStorage().versions.version(89)}function Oa(){return d("WAWebModelStorageUtils").getStorage().versions.version(90)}function Pa(){return d("WAWebModelStorageUtils").getStorage().versions.version(91)}function Qa(){return d("WAWebModelStorageUtils").getStorage().versions.version(92)}function Ra(){return d("WAWebModelStorageUtils").getStorage().versions.version(93)}function Sa(){return d("WAWebModelStorageUtils").getStorage().versions.version(94)}function Ta(){return d("WAWebModelStorageUtils").getStorage().versions.version(95)}function Ua(){return d("WAWebModelStorageUtils").getStorage().versions.version(96)}function Va(){return d("WAWebModelStorageUtils").getStorage().versions.version(97)}function Wa(){return d("WAWebModelStorageUtils").getStorage().versions.version(98)}function Xa(){return d("WAWebModelStorageUtils").getStorage().versions.version(99)}function Ya(){return d("WAWebModelStorageUtils").getStorage().versions.version(100)}function Za(){return d("WAWebModelStorageUtils").getStorage().versions.version(101)}function $a(){return d("WAWebModelStorageUtils").getStorage().versions.version(102)}function ab(){return d("WAWebModelStorageUtils").getStorage().versions.version(103)}function bb(){return d("WAWebModelStorageUtils").getStorage().versions.version(104)}function cb(){return d("WAWebModelStorageUtils").getStorage().versions.version(105)}function db(){return d("WAWebModelStorageUtils").getStorage().versions.version(106)}function eb(){return d("WAWebModelStorageUtils").getStorage().versions.version(107)}function fb(){return d("WAWebModelStorageUtils").getStorage().versions.version(108)}function gb(){return d("WAWebModelStorageUtils").getStorage().versions.version(109)}function hb(){return d("WAWebModelStorageUtils").getStorage().versions.version(110)}function ib(){return d("WAWebModelStorageUtils").getStorage().versions.version(111)}function jb(){return d("WAWebModelStorageUtils").getStorage().versions.version(112)}function kb(){return d("WAWebModelStorageUtils").getStorage().versions.version(113)}function lb(){return d("WAWebModelStorageUtils").getStorage().versions.version(114)}function mb(){return d("WAWebModelStorageUtils").getStorage().versions.version(115)}function nb(){return d("WAWebModelStorageUtils").getStorage().versions.version(116)}function ob(){return d("WAWebModelStorageUtils").getStorage().versions.version(117)}function pb(){return d("WAWebModelStorageUtils").getStorage().versions.version(118)}function qb(){return d("WAWebModelStorageUtils").getStorage().versions.version(119)}function rb(){return d("WAWebModelStorageUtils").getStorage().versions.version(120)}function sb(){return d("WAWebModelStorageUtils").getStorage().versions.version(121)}function tb(){return d("WAWebModelStorageUtils").getStorage().versions.version(122)}function ub(){return d("WAWebModelStorageUtils").getStorage().versions.version(123)}function vb(){return d("WAWebModelStorageUtils").getStorage().versions.version(124)}function wb(){return d("WAWebModelStorageUtils").getStorage().versions.version(125)}function xb(){return d("WAWebModelStorageUtils").getStorage().versions.version(126)}function yb(){return d("WAWebModelStorageUtils").getStorage().versions.version(127)}function zb(){return d("WAWebModelStorageUtils").getStorage().versions.version(128)}function Ab(){return d("WAWebModelStorageUtils").getStorage().versions.version(129)}function Bb(){return d("WAWebModelStorageUtils").getStorage().versions.version(130)}function Cb(){return d("WAWebModelStorageUtils").getStorage().versions.version(131)}function Db(){return d("WAWebModelStorageUtils").getStorage().versions.version(132)}function Eb(){return d("WAWebModelStorageUtils").getStorage().versions.version(133)}function Fb(){return d("WAWebModelStorageUtils").getStorage().versions.version(134)}function Gb(){return d("WAWebModelStorageUtils").getStorage().versions.version(135)}function Hb(){return d("WAWebModelStorageUtils").getStorage().versions.version(136)}function Ib(){return d("WAWebModelStorageUtils").getStorage().versions.version(137)}function Jb(){return d("WAWebModelStorageUtils").getStorage().versions.version(138)}function Kb(){return d("WAWebModelStorageUtils").getStorage().versions.version(139)}function Lb(){return d("WAWebModelStorageUtils").getStorage().versions.version(140)}function Mb(){return d("WAWebModelStorageUtils").getStorage().versions.version(141)}function Nb(){return d("WAWebModelStorageUtils").getStorage().versions.version(142)}function Ob(){return d("WAWebModelStorageUtils").getStorage().versions.version(143)}function Pb(){return d("WAWebModelStorageUtils").getStorage().versions.version(144)}function Qb(){return d("WAWebModelStorageUtils").getStorage().versions.version(145)}function Rb(){return d("WAWebModelStorageUtils").getStorage().versions.version(146)}function Sb(){return d("WAWebModelStorageUtils").getStorage().versions.version(147)}function Tb(){return d("WAWebModelStorageUtils").getStorage().versions.version(148)}function Ub(){return d("WAWebModelStorageUtils").getStorage().versions.version(149)}function Vb(){return d("WAWebModelStorageUtils").getStorage().versions.version(150)}function Wb(){return d("WAWebModelStorageUtils").getStorage().versions.version(151)}function Xb(){return d("WAWebModelStorageUtils").getStorage().versions.version(152)}function Yb(){return d("WAWebModelStorageUtils").getStorage().versions.version(153)}function Zb(){return d("WAWebModelStorageUtils").getStorage().versions.version(154)}function $b(){return d("WAWebModelStorageUtils").getStorage().versions.version(155)}function ac(){return d("WAWebModelStorageUtils").getStorage().versions.version(156)}function bc(){return d("WAWebModelStorageUtils").getStorage().versions.version(157)}function cc(){return d("WAWebModelStorageUtils").getStorage().versions.version(158)}g.versionToRollout=h;g.pendingMutationsCreateTable=a;g.collectionVersionCreateTable=b;g.syncActionsCreateTable=c;g.contactCreateTable=e;g.blocklistCreateTable=f;g.profilePicThumbCreateTable=i;g.chatCreateTable=j;g.messageCreateTable=k;g.messageInfoCreateTable=l;g.participantCreateTable=m;g.orphanReceiptCreateTable=n;g.deviceListCreateTable=o;g.inactiveReceiptCreateTable=p;g.verifiedBusinessNameCreateTable=q;g.historySyncNotificationsCreateTable=r;g.encryptedMutationsCreateTable=s;g.labelCreateTable=t;g.labelAssociationCreateTable=u;g.quickReplyCreateTable=v;g.abpropsConfigCreateTable=w;g.groupMetadataCreateTable=x;g.syncKeysCreateTable=y;g.tasksScheduledTimeCreateTable=z;g.activeMessageRangesCreateTable=A;g.ftsIndexingQueueCreateTable=B;g.cartCreateTable=C;g.missingKeysCreateTable=D;g.messageAddIsSendFailureProperties=E;g.contactAddIsContactSyncCompleted=F;g.messageAddPaymentTxnStatus=G;g.messageAddProductListPreviewInfo=H;g.verifiedBusinessNameAddPrivacyMode=I;g.messageAddPrivacyModeFields=J;g.messageInfoAddDeliveryPrivacyMode=K;g.messageAddProductListPreviewHeaderImage=L;g.contactAddDisappearingModeProperties=M;g.chatAddDisappearingModeInitiator=N;g.messageAddDisappearingModeInitiator=O;g.messageAddGroupInviteV4=P;g.groupInviteV4CreateTable=Q;g.orphanPaymentNotificationCreateTable=R;g.deviceListAddDelete=S;g.encryptHistorySyncDirectPath=T;g.peerMessageCreateTable=U;g.addUnreadMentionToChatTable=V;g.encryptHistorySyncFilehash=W;g.addSupportForHSMButtons=X;g.orphanRevokeCreateTable=Y;g.addActionToPendingMutations=Z;g.messageAddPaymentRequestNFMFields=$;g.addWaveformToAudioMessages=aa;g.addUnreadMentionCountToChatTable=ba;g.messageRemovePaymentRequestHeaderField=ca;g.recentStickersCreateTable=da;g.messageAddNativeFlowNameField=ea;g.addGroupFromKeyToGroupInviteV4=fa;g.addTcTokenToChatTable=ga;g.addTcTokenTimestampToChatTable=ha;g.privacyDisallowedListCreateTable=ia;g.deviceListAddV2Fields=ja;g.addStaticURLToImageVideoMessages=ka;g.addArchiveAtMentionViewedInDrawer=la;g.addTcTokenSenderTimestampToChatTable=ma;g.addRequiresDirectConnection=na;g.messageAddPaymentInviteServiceType=oa;g.addStatusPSACampaignFields=pa;g.reactionsCreateTable=qa;g.privacyDisallowedListAddDhashField=ra;g.messageAddPaymentBackground=sa;g.messageAddInteractiveMessageFields=ta;g.directConnectionKeysCreateTable=ua;g.addReactionTableOrphanIndex=va;g.messageAddActionLink=wa;g.favoriteStickersCreateTable=xa;g.messageAddHeaderType=ya;g.addReactionTableMsgKeyIndex=za;g.messageStatusPSAReadTimestamp=Aa;g.addHasAccessedToAbpropsConfigTable=Ba;g.addChatThreadLoggingTable=Ca;g.paymentBackgroundsCreateTable=Da;g.migrateSubgroupsArray=Ea;g.unjoinedSubgroupMetadataCreateTable=Fa;g.agentCreateTable=Ga;g.removeUnjoinedSubgroups=Ha;g.directConnectionKeysAddPostcodeColumns=Ia;g.subscriptionCreateTable=Ja;g.unjoinedSubgroupParentGroupIndex=Ka;g.removeSpamColumnsInGroupMetadata=La;g.addCommunityAdminPromotionColumns=Ma;g.orphanTcTokenCreateTable=Na;g.lidPnMappingCreateTable=Oa;g.pollVotesCreateTable=Pa;g.messageOrphansCreateTable=Qa;g.userPrefsCreateTable=Ra;g.lidDisplayNameMappingCreateTable=Sa;g.lidPnMappingRemoveDisplayName=Ta;g.renameCommunityAdminPromotionColumns=Ua;g.messageOrphansAddColumns=Va;g.messageAddPollInvalidated=Wa;g.removeCommunityAdminPromotionColumns=Xa;g.addIncognitoGroupMetadataColumn=Ya;g.membershipApprovalRequestCreateTable=Za;g.lidChatStateCreateTable=$a;g.chatAssignmentCreateTable=ab;g.pollVotesAddMsgKeyIndex=bb;g.contactAddHash=cb;g.messageHistoryCreateTable=db;g.nonMessageDataRequestCreateTable=eb;g.verifiedBusinessNameAddSmbColumn=fb;g.contactAddLidProperties=gb;g.groupMetadataAddParentIndex=hb;g.messageAddRcat=ib;g.ctwaSuggestionsCreateTable=jb;g.ctwaSuggestionsAddTrackingData=kb;g.pinInChatCreateTable=lb;g.inAppBannerCreateTable=mb;g.errorCodeColumn=nb;g.newsletterMetadataCreateTable=ob;g.addInitialHistBootstrapInlinePayloadColumn=pb;g.addPeerDataRequestSessionIdColumn=qb;g.premiumMessageCreateTable=rb;g.quickPromotionsCreateTable=sb;g.subgroupSuggestionCreateTable=tb;g.newsletterReactionsCreateTable=ub;g.addPeerDataRequestChatIdColumn=vb;g.botProfileCreateTable=wb;g.lastUpdateTimestampColumn=xb;g.paidMessagingCampaignIdColumn=yb;g.addProgressColumn=zb;g.selfMessageTypeCreateTable=Ab;g.addProcessedAndSyncTypeCompositeIndex=Bb;g.subgroupSuggestionV2CreateTable=Cb;g.syncdLogsCreateTable=Db;g.messageAddEditIndex=Eb;g.commentCreateTable=Fb;g.businessProfileCreateTable=Gb;g.newsletterMyVotesCreateTable=Hb;g.newsletterPollsVotesCreateTable=Ib;g.contactTextStatus=Jb;g.reportingTokenTable=Kb;g.reportingTokenTableTsIndex=Lb;g.messageAddIsCarouselIndex=Mb;g.addUnreadMentionMetadataColumn=Nb;g.addEphemeralityIndexToChatTable=Ob;g.removeUnreadMentionMetadataColumn=Pb;g.eventsResponsesCreateTable=Qb;g.eventResponsesAddMsgKeyIndex=Rb;g.favoriteCreateTable=Sb;g.noteCreateTable=Tb;g.abpropEventSamplingConfigCreateTable=Ub;g.createUnifiedAddonsTable=Vb;g.contactPnHash=Wb;g.messageAddIsEventMsgIndex=Xb;g.reportingInfoTable=Yb;g.messageAssociationCreateTable=Zb;g.chatAddAccountLidIndex=$b;g.stickerDownloadCreateTable=ac;g.contactPnHashIndex=bc;g.addEphemeralityIndexToGroupMetadataTable=cc}),98);
__d("WAWebSchemaContact_DEPRECATED",["WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("contact",function(a,b){var c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;return a.version((a=d("WAWebModelStorageVersions")).contactCreateTable(),[e("id"),c("name"),c("shortName"),c("pushname"),c("type"),c("verifiedName"),c("isBusiness"),c("isEnterprise"),c("verifiedLevel"),c("statusMute"),c("sectionHeader"),c("isAddressBookContact"),c("username"),b("isAddressBookContact"),c("isHosted"),c("syncToAddressbook"),c("isOrHasBeenHosted")]).version(a.contactAddIsContactSyncCompleted(),[c("isContactSyncCompleted"),b("isContactSyncCompleted")]).version(a.contactAddDisappearingModeProperties(),[c("disappearingModeDuration"),c("disappearingModeSettingTimestamp")]).version(a.contactAddHash(),[c("contactHash"),b("contactHash")]).version(a.contactAddLidProperties(),[c("phoneNumber"),c("phoneNumberCreatedAt"),c("requestedPnTimestamp"),c("shareOwnPn"),c("displayNameLID"),b("phoneNumber")]).version(a.contactTextStatus(),[c("textStatusString"),c("textStatusEmoji"),c("textStatusEphemeralDuration"),c("textStatusLastUpdateTime"),c("textStatusExpiryTs"),b("textStatusExpiryTs")]).version(a.contactPnHash(),[c("pnContactHash")]).version(a.contactPnHashIndex(),[b("pnContactHash")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("contact")}g.addTable=a;g.getContactTable=b}),98);
__d("WAWebLidAwareContactsDB",["Promise","WAWebApiContact","WAWebContactsDbLidMigrationUtils","WAWebSchemaContact_DEPRECATED","WAWebUserPrefsGeneral","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){var b,e=c("WAWebWid").isLid(a)?null:d("WAWebWidFactory").createWid(a);b=e!=null&&e.isUserNotPSA()?(b=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(e)))==null?void 0:b.toString():null;return e==null||b==null?d("WAWebSchemaContact_DEPRECATED").getContactTable().get(a):d("WAWebSchemaContact_DEPRECATED").getContactTable().get(b).then(function(b){return b==null?null:d("WAWebContactsDbLidMigrationUtils").removeLidOnlyCols(b,a)})}return d("WAWebSchemaContact_DEPRECATED").getContactTable().get(a)}function e(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){var a=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().all());return d("WAWebContactsDbLidMigrationUtils").replacePnRowsWithLidData(a)}return d("WAWebSchemaContact_DEPRECATED").getContactTable().all()});return i.apply(this,arguments)}function f(a){return d("WAWebSchemaContact_DEPRECATED").getContactTable().clear(a)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){if(a[0]==="contactHash"){var g=(yield (h||(h=b("Promise"))).all([d("WAWebSchemaContact_DEPRECATED").getContactTable().equals(a,e,f),d("WAWebSchemaContact_DEPRECATED").getContactTable().equals(["pnContactHash"],e,f)])),i=g[0];g=g[1];var j=new Map();g==null?void 0:g.forEach(function(a){if(c("WAWebWid").isLid(a.id)){var b=a.id;a.contactHash;a.pnContactHash;a.phoneNumber;a.phoneNumberCreatedAt;var e=babelHelpers.objectWithoutPropertiesLoose(a,["id","contactHash","pnContactHash","phoneNumber","phoneNumberCreatedAt"]);b=d("WAWebApiContact").getPnIfLidIsLatestMapping(d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(b)));if(b!=null){b=b.toJid();j.set(b,babelHelpers["extends"]({},e,{id:b,contactHash:a.pnContactHash}))}}});j.size===0&&(i==null?void 0:i.map(function(a){return j.set(a.id,a)}));return Array.from(j.values())}g=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().equals(a,e,f));return d("WAWebContactsDbLidMigrationUtils").replacePnRowsWithLidData(g)}return d("WAWebSchemaContact_DEPRECATED").getContactTable().equals(a,e,f)});return k.apply(this,arguments)}function l(a){return d("WAWebSchemaContact_DEPRECATED").getContactTable().create(a)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){var e=d("WAWebContactsDbLidMigrationUtils").maybeReplacePhoneNumbersWithLatestLids(a);e=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkGet(e,c));var f=[];for(var g=0;g<a.length;g++){var i=a[g],j=e[g];j==null||j.id===i?f.push(j):f.push(d("WAWebContactsDbLidMigrationUtils").removeLidOnlyCols(j,i))}return(h||(h=b("Promise"))).resolve(f)}return d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkGet(a,c)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("WAWebContactsDbLidMigrationUtils").getLidRowUpdates(a,c);e=e!=null?d("WAWebSchemaContact_DEPRECATED").getContactTable().merge(e.id,e):(h||(h=b("Promise"))).resolve();yield (h||(h=b("Promise"))).all([d("WAWebSchemaContact_DEPRECATED").getContactTable().merge(a,c),e])});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("WAWebContactsDbLidMigrationUtils").getLidRowUpdates(a,c);e=e!=null?d("WAWebSchemaContact_DEPRECATED").getContactTable().createOrMerge(e.id,e):(h||(h=b("Promise"))).resolve();yield (h||(h=b("Promise"))).all([d("WAWebSchemaContact_DEPRECATED").getContactTable().createOrMerge(a,c),e])});return r.apply(this,arguments)}function s(a){var b=a.map(function(a){return d("WAWebContactsDbLidMigrationUtils").getLidRowUpdates(a.id,a)}).filter(Boolean);return d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkCreateOrMerge([].concat(a,b))}function t(a){return d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkRemove(a)}function u(a){return d("WAWebSchemaContact_DEPRECATED").getContactTable().remove(a)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){var c=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().lessThan(a,b));return d("WAWebContactsDbLidMigrationUtils").replacePnRowsWithLidData(c)}return d("WAWebSchemaContact_DEPRECATED").getContactTable().lessThan(a,b)});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()){var c=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().anyOf(a,b));return d("WAWebContactsDbLidMigrationUtils").replacePnRowsWithLidData(c)}return d("WAWebSchemaContact_DEPRECATED").getContactTable().anyOf(a,b)});return y.apply(this,arguments)}a={get:a,all:e,clear:f,equals:j,create:l,bulkGet:m,merge:o,createOrMerge:q,bulkCreateOrMerge:s,bulkRemove:t,remove:u,lessThan:v,anyOf:x};g["default"]=a}),98);
__d("WAWebMobilePlatforms",["WALogger","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully writes platform to UserPrefs, platform: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to get primary platform"]);i=function(){return a};return a}var j={ANDROID:"android",IPAD:"ipad",IPHONE:"iphone",SMBA:"smba",SMBI:"smbi"},k;function a(){k==null&&d("WALogger").ERROR(i());return k}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!0),b&&(yield d("WAWebUserPrefsGeneral").setLastMobilePlatform(a)),k=a,d("WALogger").LOG(h(),a)});return l.apply(this,arguments)}function e(){return k===j.SMBA||k===j.SMBI}g.PLATFORMS=j;g.getMobilePlatform=a;g.setMobilePlatform=c;g.isSMB=e}),98);
__d("WAFilteredCatch",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return function(c){var d=Array.isArray(a)?a.some(function(a){return c instanceof a}):c instanceof a;if(d)return b(c);throw c}}f.filteredCatch=a}),66);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("WAWebUA",["ua-parser-js"],(function(a,b,c,d,e,f,g){b={CHROME:"chrome",CHROMIUM:"chromium",FIREFOX:"firefox",SAFARI:"safari",IE:"ie",OPERA:"opera",EDGE:"edge"};d={WINDOWS:"windows",MAC:"mac os",CHROMEOS:"chromium os"};function h(a,b){var c,d,e=/(\.0)+[^\.]*$/;a=(a+"").replace(e,"").split(".");b=(b+"").replace(e,"").split(".");e=Math.min(a.length,b.length);for(c=0;c<e;c++){d=parseInt(a[c],10)-parseInt(b[c],10);if(d!==0)return d}return a.length-b.length}function i(a,b){return h(a,b)>=0}function j(a,b){return h(a,b)<0}function a(a){var b=new(c("ua-parser-js"))();b.setUA(a||"");a=(b.getBrowser().name||"").toUpperCase();var d=b.getBrowser().version||"0.0.0",e=(b.getEngine().name||"").toUpperCase(),f=(b.getOS().name||"").toUpperCase(),g=b.getOS().version||"0.0.0",h=!e||e==="WEBKIT",k=a==="SAFARI",l=a==="CHROME",m=a==="FIREFOX",n=e==="TRIDENT"||e==="EDGEHTML",o=e==="GECKO";e=e==="BLINK";var p=!l&&!k&&(""+a).includes("OCULUS"),q=!1;switch(f){case"MAC OS":l?q=i(g,"10.10")&&i(d,"41.0.0"):i(g,"10.7")&&(q=!0);break;case"WINDOWS":i(g,"8.1")&&(o?q=!0:l&&i(d,"41.0.0")&&(q=!0));break}var r=l&&i(d,"110.0.0"),s=k||l&&j(d,"76");return{isWebkit:h,isGecko:o,isTrident:n,isSafari:k,isFirefox:m,isBlink:e,isBuggyVideoLoad:l&&i(d,"76")||e&&!l,hasEmoji:q,troublesWithLotsOfVideos:l,supportsEmojiEllipsification:!s,isBrokenGetUserMedia:l&&j(d,"50"),isLocalStorageBroken:k&&i(d,"14.1")&&j(d,"14.1.2"),os:f.toLowerCase(),osVersion:g,browser:a.toLowerCase(),browserVersion:d,parser:b,isChrome:l,isOculusBroswer:p,hasCredentiallessIframeSupport:r}}e=a(typeof self!=="undefined"?self.navigator.userAgent:null);g.BROWSER_TYPE=b;g.OS_TYPE=d;g.parseUA=a;g.UA=e}),98);
__d("WAWebIndexedDBPurge",["Promise","WALogger","WAPromiseTimeout","WAWeb-dexie","WAWebUA","asyncToGeneratorRuntime","cr:5411","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] startup purge completed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB delete failed for "," with error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteAllIdb: Deletion List missing DBs: ",""]);k=function(){return a};return a}var l={__dbnames:"__dbnames",fts_storage:"fts-storage",fts_loadgen_metadata:"loadgen-storage",_hsm_storage_DEPRECATED:"hsm-storage",jobs_storage:"jobs-storage",lru_media_storage_idb:"lru-media-storage-idb",model_storage:"model-storage",offd_storage:"offd-storage",pb_detect:"pb_detect",signal_storage:"signal-storage",sw:"sw",wawc:"wawc",wawc_db_enc:"wawc_db_enc",qpl_storage:"qpl-storage",worker_storage:"worker-storage"};function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Object.keys(l).map(function(a){return l[a]});if(!c("gkx")("26258")&&(d("WAWebUA").UA.isChrome&&(b("cr:5411")==null?void 0:b("cr:5411").databases))){var e=(yield b("cr:5411").databases());e=new Set(e.map(function(a){return a.name}));var f=new Set(a);e=Array.from(e).filter(function(a){return!f.has(a)});e.length!==0&&d("WALogger").ERROR(k(),e.join(",")).sendLogs("idb-deletion-list-incomplete")}e=!1;a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==="__dbnames"||a==="sw"||a==="pb_detect")return;try{yield d("WAPromiseTimeout").promiseTimeout((h||(h=b("Promise"))).resolve(c("WAWeb-dexie")["delete"](a)),7*1e3)}catch(b){e=!0,c("gkx")("26258")||d("WALogger").ERROR(j(),a,b).tags("purge-db")}});return function(b){return a.apply(this,arguments)}}());yield (h||(h=b("Promise"))).all(a);d("WALogger").DEV(i());return e});return m.apply(this,arguments)}g.WEB_IDB_DB_NAMES=l;g.deleteAllIdb=a}),98);
__d("WAWebWAWCCommon",[],(function(a,b,c,d,e,f){function a(a){a.version(1).stores({logs:"line,log"}),a.version(2).stores({logs:"line,log",assets:"key,hash,data"}),a.version(3).stores({logs:"line,log",assets:"key,hash,data",wam:",buffer,prevValues,lastSend"}),a.version(4).stores({logs:"line,log",assets:"key,hash,data",wam:",key,buffer",l10n:"key,hash,t"}),a.version(5).stores({logs:"line,log",assets:null,wam:",key,buffer",l10n:"key,hash,t"}),a.version(6).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t"}),a.version(7).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t",user:"key"}),a.version(8).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",l10n:"key,hash,t",user:"key"}),a.version(9).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",l10n:"key,hash,t",user:"key"}),a.version(10).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key"}),a.version(11).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key",core_wam:"key, streamId",core_wam_meta:"streamId"}),a.version(12).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key",core_wam:"key, streamId",core_wam_meta:"streamId",worker_wam_events:"++id"}),a.version(13).stores({logs:"line,timestamp"}),a.version(14).stores({logs:"line,timestamp,&count"})}f.applyVersions=a}),66);
__d("WAWebWebcDbOpenWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcDbOpen:[1940,{webcDbName:[1,a.TYPES.STRING],webcDbOpenNumAttempts:[3,a.TYPES.INTEGER],webcDbOpenWasSuccess:[2,a.TYPES.BOOLEAN]},[1,1e3,2e3],"regular"]},{WebcDbOpen:[]});g.WebcDbOpenWamEvent=b}),98);
__d("WAWebWAWCStorage",["Promise","WACustomError","WAFilteredCatch","WALogger","WAPromiseTimeout","WAWeb-dexie","WAWebIndexedDBPurge","WAWebRuntimeEnvironmentUtils","WAWebUA","WAWebWAWCCommon","WAWebWebcDbOpenWamEvent","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] dexie database is closed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] dexie database is blocked"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] dexie database failed to open, hasClosed ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] deleteDB:Error ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] openDB:Error ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] openDB blocked in "," thread"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] successfully opened db in worker thread"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] successfully opened db in main thread"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage]  close db due to duplicate openDB"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] loadUserIdb:Error ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["openDB failed: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] close db due to versionchange"]);t=function(){return a};return a}var u={ERROR:"error",OPENING:"opening",BLOCKED:"blocked",OPEN:"open",CLOSED:"closed",FAILED:"failed"},v=!1,w=null;function a(){var a=this;this._dbName=d("WAWebIndexedDBPurge").WEB_IDB_DB_NAMES.wawc;this._db=new(c("WAWeb-dexie"))(this._dbName,{chromeTransactionDurability:"relaxed",addons:[]});this._db.on("versionchange",function(b){a._db.close(),d("WALogger").LOG(t()),b&&b.newVersion!=null&&b.newVersion!==b.oldVersion&&(v=!0,w&&w())});d("WAWebWAWCCommon").applyVersions(this._db);this.openAttempt=0;this.openDB()["catch"](function(a){d("WALogger").WARN(s(),a)});this._dbState=u.OPENING}a.prototype.loadUserIdb=function(){var a=this;return this.idb().then(function(b){return b.transaction("rw",b.user,function(){return b.user.toArray().then(function(b){return b.forEach(function(b){a.permanentStorage.dataStore[b.key]=b.value})})})})["catch"](function(a){d("WALogger").WARN(r(),a)})};a.prototype.openDB=function(){var a=this;this._db.isOpen()&&(this._db.close(),d("WALogger").LOG(q()));var c=d("WAPromiseTimeout").promiseTimeout((h||(h=b("Promise"))).resolve(this._db.open()),1e4).then(function(){!d("WAWebRuntimeEnvironmentUtils").isWorker()?d("WALogger").LOG(p()):d("WALogger").LOG(o());var b=new(d("WAWebWebcDbOpenWamEvent").WebcDbOpenWamEvent)({webcDbName:a._dbName,webcDbOpenWasSuccess:!0,webcDbOpenNumAttempts:a.openAttempt});b.commit();a._dbState=u.OPEN;return u.OPEN})["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(){d("WALogger").LOG(n(),d("WAWebRuntimeEnvironmentUtils").isWorker()?"worker":"main");var b=new(d("WAWebWebcDbOpenWamEvent").WebcDbOpenWamEvent)({webcDbName:a._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:a.openAttempt});b.commit();a._dbState=u.BLOCKED;return u.BLOCKED}))["catch"](function(b){d("WALogger").WARN(m(),b);if(a.openAttempt>1||d("WAWebUA").UA.isSafari){a.opening=void 0;a._dbState=u.ERROR;b=new(d("WAWebWebcDbOpenWamEvent").WebcDbOpenWamEvent)({webcDbName:a._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:a.openAttempt});b.commit();throw u.ERROR}a.openAttempt+=1;return a._db["delete"]()["catch"](function(b){d("WALogger").WARN(l(),b);a.opening=void 0;a._dbState=u.ERROR;throw u.ERROR}).then(function(){return a.openDB()})}).then(function(b){a.opening=void 0;if(b===u.BLOCKED)throw u.BLOCKED;return a._db});this.opening||(this.opening=c);return c};a.prototype.idb=function(){if(this._db.isOpen())return(h||(h=b("Promise"))).resolve(this._db);if(this._db.hasFailed()){d("WALogger").WARN(k(),this._db.hasBeenClosed());return(h||(h=b("Promise"))).reject(c("err")(u.FAILED))}else if(this._dbState===u.BLOCKED){d("WALogger").WARN(j());return(h||(h=b("Promise"))).reject(c("err")(u.BLOCKED))}else if(this.opening)return this.opening;d("WALogger").WARN(i());return(h||(h=b("Promise"))).reject(c("err")(u.CLOSED))};a.prototype.onVersionChange=function(a){w=a,v&&w()};a.prototype.State=u;e=new a();f=e;g["default"]=f}),98);
__d("WAWebPermanentStorage",["WALogger","WAWebLocalStorage","WAWebWAWCStorage","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] db clear:Error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] db removeItem:Error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] db setItem:Error ",""]);j=function(){return a};return a}a=function(){function a(){this.dataStore={}}var e=a.prototype;e.setItem=function(a,b,e){e===void 0&&(e=!0);this.dataStore[a]=b;c("WAWebLocalStorage")!=null&&c("WAWebLocalStorage").setItem(a,b);if(!e)return;c("WAWebWAWCStorage").idb().then(function(c){return c.user.put({key:a,value:b})})["catch"](function(a){d("WALogger").WARN(j(),a)})};e.getItem=function(a,b){b===void 0&&(b=!1);if(this.dataStore[a]===void 0||b){if(c("WAWebLocalStorage")!=null){b=c("WAWebLocalStorage").getItem(a);b!=null&&this.setItem(a,b,!1);return b}return null}return this.dataStore[a]};e.removeItem=function(a){delete this.dataStore[a],c("WAWebLocalStorage")!=null&&c("WAWebLocalStorage").removeItem(a),c("WAWebWAWCStorage").idb().then(function(b){return b.user["delete"](a)})["catch"](function(a){d("WALogger").WARN(i(),a)})};e.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.dataStore={},c("WAWebLocalStorage")!=null&&(c("WAWebLocalStorage").clear(),a&&c("lodash").forOwn(a,function(a,b){c("WAWebLocalStorage").setItem(b,a)})),yield c("WAWebWAWCStorage").idb().then(function(a){return a.user.clear()})["catch"](function(a){d("WALogger").WARN(h(),a)})});function e(b){return a.apply(this,arguments)}return e}();return a}();e=new a();g["default"]=e}),98);
__d("WAWebUserPrefsKeys",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["AbpropsWebRefreshId","ChatLockHide","ChatLockSecretCode","DisableLinkPreviews","DeviceCapabilities","PageLoadDebug","SyncContactToAddressbookCounts","MutexBlockStrategy","CagEventsAwarenessBannerFirstSeenTimestamp","WABrigadingState"]);c=Object.freeze({STORAGE_TEST:"storage_test",CLIENT_TOKEN:"WAToken1",SERVER_TOKEN:"WAToken2",SECRET:"WASecretKey",SECURITY_NOTIFICATIONS:"WASecurityNotifications",BROWSER_ID:"WABrowserId",GROUP_ASSIGNED_COLOR:"WAGroupAssignedColor-17",GLOBAL_MUTE_SOUNDS:"WAGlobalSounds",GLOBAL_MUTE_CALL_RINGTONE:"WAGlobalCallRingtone",OUTGOING_MESSAGE_SOUND:"WAOutgoingMessageSound",GLOBAL_MUTE_NOTIFICATIONS:"WAGlobalNotifications",GLOBAL_MUTE_IN_APP_NOTIFICATIONS:"WAGlobalInAppNotifications",GLOBAL_MUTE_PREVIEWS:"WAGlobalPreviews",GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED:"WAGlobalOfflineNotificationsEnabled",GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED_ONCE:"WAGlobalOfflineNotificationsEnabledOnce",GLOBAL_COLLAPSE_MUTED:"WAGlobalCollapseMuted",NOTIFICATION_SOUND:"WANotificationSound",AUTO_DOWNLOAD_PHOTOS:"WAAutoDownloadPhotos",AUTO_DOWNLOAD_AUDIO:"WAAutoDownloadAudio",AUTO_DOWNLOAD_VIDEOS:"WAAutoDownloadVideos",AUTO_DOWNLOAD_DOCUMENTS:"WAAutoDownloadDocuments",LANG:"WALangPref",LANG_FROM_USER:"WALangUserPref",LANG_FROM_PHONE:"WALangPhonePref",LANG_DID_MISMATCH_WITH_COOKIE:"WALangPrefDidMismatchWithCookie",LAST_ACTIVE_EMOJI_TAB:"WALastActiveEmojiTab",LAST_SELECTED_COMPOSE_BOX_PANEL:"WALastActiveComposeBoxPanel",LAST_CHAT_MUTE_DURATION:"WALastChatMuteDuration",UNKNOWN_ID:"WAUnknownID",LOAD_RETRY_GENERATION:"WALoadRetryGeneration",WHATSAPP_MUTEX:"whatsapp-mutex",MUTEX_PING_TIMEOUT_SECONDS:"mutex-ping-timeout",LAST_WID:"last-wid",LAST_WID_MD:"last-wid-md",SAVE_TO_CAMERA_ROLL:"save_to_camera_roll",MARK_TRANSLATIONS:"mark_translations",PINS_DEBUG_MODE:"pins_debug_mode",IS_OPT_IN_EXTERNAL_BETA:"is_opt_in_external_beta",DEXIE_VERSION:"dexie_version",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE:"postcode_auto_open_change_postcode_done",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT:"postcode_auto_open_change_postcode_count",POSTCODE_TOOLTIP_VIEW_COUNT:"postcode_tooltip_view_count",POSTCODE_TOOLTIP_VIEWED_IN_SESSION:"postcode_tooltip_viewed_in_session",LAST_PUSHNAME:"last-pushname",PTT_PLAYBACK_RATE:"WAPttPlaybackRate",LOGOUT_DIRTY_BIT:"post-logout",DAILY_STATS_START_TIME:"WADailyStatsStartTime",PRIMARY_FEATURES:"WAPrimaryFeatures",TOS_STATE_FETCH_ITERATION:"ToSStateFetchIteration",NUX_LIST:"WANuxList",BANNER_STATES:"WABannerStates",LID:"WALid",ME_DISPLAY_NAME:"me-display-name",PRESERVED_USER_KEYS:"preserved_user_keys",LAST_STATUS_USAGE:"last-status-usage",MOBILE_PLATFORM_DEPRECATED:"mobile-platform",REMEMBER_ME:"remember-me",NO_TAKEOVER:"no-takeover",WHATSAPP_LS_VERSION:"ver",USER_ACTIVITY_TIME_SPENT_EVENT:"WaTimeSpentEvent",TIME_SPENT_BITARRAY_EVENT:"WAWebTsBitarrayEvent",MEDIA_VOLUME:"video-volume",MEDIA_MUTE:"video-mute",MEDIA_HD:"hd-media",CONTACT_CHECKSUM:"contact-checksum",CONTACT_CHECKSUM_MODEL_STORAGE:"contact_checksum",FREQUENT_CONTACTS:"frequent_contacts",GK_PROTO:"gk_proto",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry",INITIAL_GROUP_PHASH:"initial_group_phash",IS_SMB:"is-smb",COMPOSE_CONTENTS_PREFIX:"compose-contents_",THEME:"theme",SYSTEM_THEME_MODE:"system-theme-mode",ABPROPS:"abprops",ABPROPS_REFRESH_ID:"abprops-refresh-id",HISTORY_SYNC_EARLIEST_DATE:"history-sync-earliest-date",CHATS_USER_SENT_MESSAGE_TO:"chats-user-sent-message-to",CONTACT_SYNC_REFRESH:"contact-sync-refresh-seconds",TOS_3:"TOS_STATE_20210210",LOCAL_TAKEOVER_OK:"local-takeover-ok",PS_KILLSWITCH_TOKEN:"ps-killswitch-token",STORAGE_DISMISS_STATE:"storage-dismiss-state",STORAGE_ALERT_FLAG:"storage-alert-flag",HOUR_24_FROM_PHONE:"hour-24-from-phone",HOUR_24:"hour-24",HOUR_24_FROM_DEVICE:"hour-24-from-device",PERSISTENT_EXPIRING_ID:"WaPersistentExpiringId",FIRST_SEEN_DESKTOP_UPSELL_BBAR:"first-seen-desktop-upsell-bbar",DESKTOP_UPSELL_USER_HAS_CLICKED_CALL_MODAL:"desktop-upsell-user-has-clicked-call-modal",DESKTOP_UPSELL_USER_HAS_DISMISSED_CHATLIST_TOASTBAR:"desktop-upsell-user-has-dismissed_chatlist-toastbar",WEB_NOTIFICATIONS_BB_STATUS:"WAWebNotificationsButterbarStatus",OFFLINE_NOTIFICATIONS_BB_STATUS:"WAOfflineNotificationsButterbarStatus",FB_SHOPS_SUNSET_BB_STATUS:"WAWebFBShopsSunsetButterbarStatus",EXISTING_LID_SIGNAL_SESSION_IS_CLEANED:"existing_lid_signal_session_is_cleaned",LID_DB_MIGRATION:"lid_db_migration",VERIFIED_BUSINESS_NAME_IS_CLEANED:"WAVerifiedBusinessNameIsCleaned",WHATSAPP_WEB_EXTERNAL_BETA:"whatsapp_web_beta",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT:"whatsapp_web_beta_dirty_bit",WHATSAPP_WEB_EXTERNAL_BETA_IDB:"WAWebBetaOptInStatus",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB:"WAWebBetaOptInDirtyBit",CHAT_UTM:"deeplink_utm",AD_CREATION_FLOW_ID_KEY:"ad_creation_flow_id_key",AD_CREATION_SEQUENCE_NUMBER_KEY:"ad_creation_sequence_number_key",AD_ENTRY_POINTS_CONFIGURATION:"ad_entry_points_configuration",AD_ACCOUNT_TOKEN:"ad_account_token",CHATLIST_PANEL_STATE:"chatlist_panel_state",CTWA_DATA_SHARING_UPSELL_ACTIVE:"ctwa_data_sharing_upsell_active",CTWA_DATA_SHARING_COOL_OFF:"ctwa_data_sharing_cool_off",CTWA_CONSUMER_TRANSPARENCY_INFO_ICON:"ctwa_consumer_transparency_info_icon",DISAPPEARING_MSG_DISCLAIMER_DIMISSED:"disappearing_msg_disclaimer_dimissed",TIME_SPENT_SESSION:"WAWebTimeSpentSession",TIME_SPENT_PENDING_BACKGROUND_NAVIGATION:"WAWebTimeSpentPendingBackgroundNavigation",WA_WEB_CACHED_RECOMMENDED_NEWSLETTERS:"WAWebCachedRecommendedNewsletters",WA_WEB_NEWSLETTERS_SUBSCRIBERS_FULL:"WAWebNewsletterSubscribersFull",WA_WEB_NEWSLETTERS_SUBSCRIBERS_LIMITED:"WAWebNewsletterSubscribersLimited",WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS:"WAWebCachedNewsletterSubscribers",WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES:"WAWebCachedNewsletterDirectoryPages",WA_WEB_CACHED_NEWSLETTER_DIRECTORY_CATERGORY_PREVIEW:"WAWebCachedNewsletterDirectoryCategoryPreview",LAST_PROFILE_PIC_THUMB_UPDATE_TS:"last_profile_pic_thumb_update_ts_v2",AUTO_LOGOUT_ENABLED:"auto_logout_enabled",PAYMENT_INFO:"WAPaymentInfo",CUSTOM_PAYMENT_METHODS:"WACustomPaymentMethods",MERCHANT_PAYMENT_PARTNER:"WAMerchantPaymentPartner",WA_WEB_ID_UPSELL_SNOOZE_UNTIL:"WAWebIDUpsellSnoozeUntil",WA_WEB_DB_TABLE_USAGE_ENABLED:"WAWebDBUsageLoggingEnabled",WA_WEB_WAM_BEACONING_SETTINGS:"WAWebWAMBeaconingSettings"});d=Object.freeze({EMOJI_VARIANT_COLLECTION:"emoji_variant_collection",RECENT_EMOJI_COLLECTION:"recent_emoji_collection",RECENT_REACTIONS_COLLECTION:"recent_reactions_collection",CHAT_PREFERENCE_COLLECTION:"chat_preference",CONVERSION_TUPLE_COLLECTION:"conversion_tuple",MUTE_COLLECTION:"mute",PROFILE_PIC_THUMB_COLLECTION:"profile_pic_thumb",UNATTRIBUTED_MESSAGE_COLLECTION:"unattributed_message_collection",CART_COLLECTION:"cart_collection",DAILY_AGGREGATED_STATS_COLLECTION:"daily_aggregated_stats"});e=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",ME_INFO:"WAMeInfo",DEVICE_ID:"WADeviceId",ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WaInitialHistorySynced",CRITICAL_DATA_SYNCED:"critical_data_synced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",HISTORY_SYNC_REMAINING_PAUSED_SECONDS:"WAHistorySyncRemainingPausedSeconds",ADV_SECRET_KEY:"WaADVSecretKey",IS_SMB:"WAIsSMB",LAST_OFFLINE_MESSAGE:"WALastOfflineMessage",BLOCKLIST_HASH:"WABlocklistHash",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",WEB_ENC_SALT:"WebEncKeySalt",MD_UPGRADE_WAM_FLAG:"MdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"MdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS:"WASyncdPrimaryAllowsAllMutations",MD_SYNC_ACTIONS_ACTION_SANITIZED:"MdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"ChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"ChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"ChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"MdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"MdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"MdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"MdLoginCookieRequestComplete",SCREEN_LOCK_DURATION_SECONDS:"WAScreenLockDuration",SCREEN_UNLOCK_TRY_COUNT:"WAScreenUnlockTryCount",SCREEN_LOCK_IV:"WAScreenLockIV",SCREEN_LOCK_DATA_IV:"WAScreenLockDataIV",SCREEN_LOCK_SALT:"WAScreenLockSalt",SCREEN_LOCK_ITERATIONS:"WAScreenLockIterations",CACHED_PROFILE_PIC_EURL:"WACachedProfilePicEURL",COMMUNITY_TAB_LAST_SEEN_TIMESTAMP:"WACommunityTabLastSeenTimestamp",KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE:"key_sever_client_expiration_override",COLUMN_PACKING_ENABLED:"WAWebColumnPackingEnabled",NEWSLETTER_TAB_LAST_SEEN_TIMESTAMP:"WANewslettersTabLastSeenTimestamp",NEWSLETTER_WAS_BOOTSTRAPPED:"WANewslettersWasBootstrapped",BOT_LIST_LAST_REQUESTED_TIMESTAMP:"WABotListLastRequestedTimestamp",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",MMS4_CONN:"WAMms4Conn"});b=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",WEB_ENC_SALT:"WAWebEncKeySalt"});var g=Object.freeze({ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WAInitialHistorySynced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",BLOCKLIST_HASH:"WABlocklistHash",CRITICAL_DATA_SYNCED:"WACriticalDataSynced",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",ADV_SECRET_KEY:"WAADVSecretKey",MD_UPGRADE_WAM_FLAG:"WAMdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"WAMdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",MD_SYNC_ACTIONS_ACTION_SANITIZED:"WAMdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"WAChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"WAChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"WAChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"WAMdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"WAMdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"WAMdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"WAMdLoginCookieRequestComplete",HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAHistorySyncChunkCountForEndOfRecentSync",MOBILE_PLATFORM:"WAMobilePlatform",NON_CRITICAL_DATA_SYNC_STATUS:"WANonCriticalDataSyncStatus",SERVER_PROPS:"WAServerProps",SERVER_PROPS_ATTRIBUTES:"WAServerPropsAttributes",PRIMARY_FEATURES:"WAPrimaryFeatures",APP_VERSION_BASE:"WAVersionBase",ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAEstimatedHistorySyncChunkCountForEndOfRecentSync",OFFLINE_PUSH_COUNT:"WAOfflinePushCount",HISTORY_SYNC_SINGLE_CHUNK_STATUS:"WAHistorySyncSingleChunkStatus",LAST_PUSH_COMPLETE_TIMESTAMP:"WALastPushCompleteTimestamp",OFFLINE_PUSH_DISABLED:"WAOfflinePushDisabled",MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED:"WAMdHistoryLastRecentSyncChunkProcessed",OFFLINE_NOTIFICATION_L10N_CONTENT:"WAOfflineNotificationContent",LOGOUT_REASON:"WALogoutReason",HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT:"WAHistorySyncStatusAfterPairingLoggingCount",STATUS_ALLOW_LIST:"WAStatusPostingAllowList",STATUS_DENY_LIST:"WAStatusPostingDenyList",STATUS_SENDER_KEY:"WAStatusPostingSenderkey",STATUS_PRIVACY_SETTING:"WAStatusPostingPrivacySetting",OFFLINE_NOTIFICATION_ENGAGEMENT:"WAOfflineNotificationEngagement",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",TEXT_STATUS_SUGGESTIONS:"WATextStatusSuggestions",MMS4_CONN:"WAMms4Conn",HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT:"WAHistorySyncTotalProcessedMessageCount",HAVE_PROCESSED_COEX_ADV:"WAHaveProcessedCoexAdv",USING_ACCOUNT_IDENTIFIER_FOR_SIGNAL_STORAGE:"WAUsingAccountIdentifierForSignalStorage",CONTACTS_DB_READ_USING_LID:"WAContactsDBReadUsingLid"}),h=Object.freeze({USER_PRIVACY_SETTINGS:"user-privacy-settings",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry"});f.UserPrefs=a;f.KEYS=c;f.COLLECTIONS_KEYS=d;f.MD_KEYS=e;f.MD_NOISE_KEYS=b;f.BACKEND_ONLY_KEYS=g;f.HASHED_KEYS=h}),66);
__d("WAWebUserPrefsBase",["WALogger","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebWidJsonReviver","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPreferencesStoreBase.get(): failed: ",""]);h=function(){return a};return a}var i=[(a=d("WAWebUserPrefsKeys")).KEYS.WHATSAPP_MUTEX,a.KEYS.PRESERVED_USER_KEYS,a.MD_KEYS.ROUTING_INFO,a.MD_KEYS.INITIAL_HISTORY_SYNCED,a.MD_KEYS.WEB_ENC_SALT,a.MD_KEYS.CRITICAL_DATA_SYNCED],j={isRawString:!1,ignoreCache:!1,shouldWriteToIdb:!0,storage:c("WAWebPermanentStorage")};b=function(){function a(){}var b=a.prototype;b.$1=function(a,b){return i.includes(a)?c("WAWebPermanentStorage"):(a=b)!=null?a:j.storage};b.get=function(a,b){if(a==null)throw c("err")("UserPreferencesStoreBase.get called with no key");a=a;var e=this.$1(a,b==null?void 0:b.storage),f=(b==null?void 0:b.ignoreCache)==null?j.ignoreCache:b.ignoreCache;f=e.getItem(a,f);b=(b==null?void 0:b.isRawString)==null?j.isRawString:b.isRawString;if(b||f==null)return f;try{return JSON.parse(f,d("WAWebWidJsonReviver").jsonWidReviver)}catch(b){d("WALogger").LOG(h(),b.toString()).sendLogs("userprefs-parse-error");e.removeItem(a);return void 0}};b.set=function(a,b,d){if(a==null)throw c("err")("UserPreferencesStoreBase.set called with no key");a=a;var e=this.$1(a,d==null?void 0:d.storage);if(b==null)e.removeItem(a);else{var f=(d==null?void 0:d.isRawString)==null?j.isRawString:d.isRawString;if(f)if(typeof b==="string")e.setItem(a,b);else throw c("err")("UserPreferencesStoreBase.set: expecting string because isRawString is true");else{f=(d==null?void 0:d.shouldWriteToIdb)==null?j.shouldWriteToIdb:d.shouldWriteToIdb;e.setItem(a,JSON.stringify(b),f)}}};return a}();e=new b();g.ENFORCE_PERMANENT_STORAGE_KEYS=i;g.UserPreferencesStoreBase=b;g.userPreferencesStoreBase=e}),98);
__d("WAWebDbUsageApiConst",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOW_QUOTA_EXCEEDED:"low_quota_exceed",HIGH_QUOTA_EXCEEDED:"high_quota_exceed",NO_ALERT:"no_alert"});f.StorageAlertType=a}),66);
__d("WAWebPrivacySettings",[],(function(a,b,c,d,e,f){a={all:"all",contacts:"contacts",contact_blacklist:"contact_blacklist",none:"none"};b=babelHelpers["extends"]({},a,{error:"error"});c={all:"all",none:"none"};d={all:"all",match_last_seen:"match_last_seen"};e=babelHelpers["extends"]({},d,{error:"error"});var g=babelHelpers["extends"]({},c,{error:"error"}),h={all:"all",contacts:"contacts"},i={all:"all",known:"known"},j=babelHelpers["extends"]({},i,{error:"error"});f.VISIBILITY=a;f.VISIBILITY_WITH_ERROR=b;f.ALL_NONE=c;f.ONLINE_VISIBILITY=d;f.ONLINE_VISIBILITY_WITH_ERROR=e;f.ALL_NONE_WITH_ERROR=g;f.ALL_CONTACTS=h;f.CALL_ADD=i;f.CALL_ADD_WITH_ERROR=j}),66);
__d("WAWebABPropsConfigs",[],(function(a,b,c,d,e,f){"use strict";a={abort_building_e2e_proto_on_error:[3224,"bool",!1,!0],abort_decrypting_e2e_on_error:[4055,"bool",!1,!0],active_cart_discovery_enabled:[1766,"bool",!1,!0],add_contact_pushname_split_fields_enabled:[8398,"bool",!1,!1],add_dm_to_chat_overflow_menu:[1309,"bool",!1,!1],add_member_system_message:[4579,"bool",!1,!1],additional_pre_logging_enabled:[3490,"bool",!1,!0],addon_infra_enable_perf_logging:[7567,"bool",!1,!0],addon_infra_unified_preview_generation:[9959,"bool",!1,!1],address_message_native_flow_killswitch:[1538,"bool",!1,!1],admin_hfm_toggle:[1021,"bool",!1,!1],admin_include_message_secret_in_cag:[1921,"bool",!0,!0],admin_revoke_history_sync_consumer:[1245,"bool",!1,!0],admin_revoke_receiver:[1177,"bool",!1,!0],admin_revoke_sender:[1292,"bool",!1,!0],adv_accept_hosted_devices:[6939,"bool",!1,!0],adv_v2_m4_m5:[753,"bool",!1,!1],adv_v2_m6:[903,"bool",!1,!1],advanced_security_menu:[7691,"bool",!1,!0],ai_experiment_graphql_config:[9601,"string","",""],ai_pdfn_tos_invoke_notice_id:[9483,"string"," "," "],ai_pdfn_tos_shortcut_notice_id:[9482,"string"," "," "],ai_reminders_enabled:[9379,"bool",!1,!1],album_v2_forward_as_album_enabled:[10725,"bool",!1,!0],album_v2_item_with_caption_in_album_enabled:[10847,"bool",!1,!0],album_v2_min_items_to_send_as_album_enabled:[10848,"int",4,4],album_v2_reactions_enabled:[10726,"bool",!1,!0],album_v2_receiving_enabled:[8528,"bool",!1,!0],album_v2_replying_enabled:[10727,"bool",!1,!0],album_v2_sender_enabled:[8529,"bool",!1,!1],all_outgoing_message_validataion_enabled:[8459,"bool",!1,!0],allow_lid_contacts_add_to_group:[3752,"bool",!1,!1],allow_lid_contacts_calling:[3762,"bool",!1,!1],allow_lid_contacts_new_1on1_chat:[3751,"bool",!1,!1],allow_lid_contacts_privacy_settings:[3763,"bool",!1,!1],allow_lid_contacts_storage:[3519,"bool",!1,!1],allow_nl_linkpreview:[3209,"bool",!0,!0],allow_parse_lid_contacts_vcard:[3790,"bool",!1,!1],allow_share_lid_contacts_vcard:[3789,"bool",!1,!1],allow_subgroup_admin_to_unlink:[3054,"bool",!1,!0],alt_device_linking_enabled:[3128,"bool",!1,!1],alt_profile:[6149,"bool",!1,!1],animated_emoji_final_set_enabled:[9757,"bool",!1,!1],animated_emoji_set_1_enabled:[9758,"bool",!1,!1],animated_emojis_enabled:[3575,"bool",!1,!1],animated_emojis_optimized_asset_enabled:[10639,"bool",!1,!1],anr_media_fixes_list:[5981,"string","",""],anyone_can_add_to_groups_by_default:[4441,"bool",!1,!1],appdata_meta_sending_enabled:[8814,"bool",!1,!1],append_message_when_forwarding_media:[3177,"bool",!1,!1],append_message_when_forwarding_media_desktop_beta:[3818,"bool",!1,!1],append_message_when_forwarding_media_without_caption:[3875,"bool",!1,!1],attach_menu_redesign_enabled:[3223,"bool",!1,!1],attachment_tray_logging_enabled:[2914,"bool",!1,!0],autodownload_update_in_group_chat:[3273,"bool",!0,!0],autodownload_update_in_one_one_chat:[5517,"bool",!1,!0],banned_shops_ux_enabled:[957,"bool",!1,!0],batch_group_info_new_pipeline_enabled:[6350,"bool",!0,!0],biz_api_virtual_phone_number_ranges:[5850,"string","{}",'{"ranges":[{"start": 12115556300, "end": 12115556300}, {"start": 18895551110, "end": 18895551110}, {"start": 18895554429, "end": 18895554429}]}'],biz_api_virtual_phone_number_string_ranges:[5894,"string","{}",'{"ranges":[{"start": 12115556300, "end": 12115556300}, {"start": 18895551110, "end": 18895551110}, {"start": 18895554429, "end": 18895554429}]}'],biz_api_voip_enabled:[1464,"bool",!1,!1],biz_extensions_metadata_ban_ttl_minutes:[2892,"int",525600,525600],biz_extensions_metadata_cache_ttl_minutes:[2891,"int",1440,1440],block_entry_point_logging_enabled:[2522,"bool",!1,!0],block_from_chat_list:[2290,"bool",!1,!0],block_from_notification:[2374,"bool",!1,!0],blue_client_p0_logging_enabled:[5918,"bool",!1,!0],blue_client_p1_logging_enabled:[6288,"bool",!1,!0],blue_education_enabled:[5295,"bool",!1,!1],blue_education_v2_enabled:[6127,"bool",!1,!1],blue_enabled:[5276,"bool",!1,!1],blue_phase1a_fast_follow_enabled:[6687,"bool",!1,!1],blue_profile_locked_ui_enabled:[6337,"bool",!1,!0],blue_strings_enabled:[5846,"bool",!1,!0],bonsai_avatar_enabled:[4532,"bool",!1,!1],bonsai_carousel_enabled:[5283,"bool",!1,!0],bonsai_carousel_hq_thumbnail_enabled:[6459,"bool",!1,!0],bonsai_carousel_reels_profile_photo_enabled:[6458,"bool",!1,!0],bonsai_chat_list_entry_point_enabled:[6251,"bool",!1,!1],bonsai_composer_new_ai_chat_entrypoint_enabled:[7639,"bool",!1,!0],bonsai_enabled:[4010,"bool",!1,!1],bonsai_english_only:[5637,"bool",!1,!1],bonsai_entry_point_enabled:[5362,"bool",!1,!1],bonsai_fp_ugc_sender:[9541,"bool",!1,!1],bonsai_inline_feedback_enabled:[5246,"bool",!1,!1],bonsai_meta_ai_shortcut_tos_enabled:[8004,"bool",!1,!0],bonsai_new_ai_chats_entry_point_enabled:[7602,"bool",!1,!0],bonsai_plugin_storage_enabled:[6048,"bool",!1,!1],bonsai_plugins_v2_enabled:[7075,"bool",!1,!1],bonsai_ptt_enabled:[4416,"bool",!1,!0],bonsai_receiver_enabled:[4165,"bool",!0,!0],bonsai_remove_meta_ai_shortcut_setting_switch:[8002,"bool",!1,!0],bonsai_streaming_chunk_latency:[5150,"int",0,0],bonsai_streaming_line_count_for_pinning:[5268,"int",4,4],bonsai_supported_languages:[7848,"string","en","en"],bonsai_ti_timeout_duration_ms:[4736,"int",1e4,1e4],bonsai_update_interval:[4417,"int",86400,86400],bonsai_user_jurisdiction_enum:[8181,"string","row","us"],bonsai_waitlist_enabled:[5459,"bool",!0,!1],bonsai_waitlist_logging_enabled:[8213,"bool",!1,!1],bonsai_waitlist_update_interval:[5413,"int",21600,21600],bonsai_web_electron_receiver_allowed:[6065,"bool",!0,!0],bonsai_word_streaming_enabled:[4974,"bool",!1,!1],bot_3p_diy_delete_enabled:[6348,"bool",!1,!0],bot_3p_enabled:[5587,"bool",!1,!0],bot_3p_status:[5985,"int",0,0],bot_commands_1p_enabled:[5811,"bool",!1,!0],bot_response_futureproof_message_enabled:[4274,"bool",!1,!0],br_buyer_awareness_experiences:[5944,"string","{}",'{"updated_order_bubble_subtext": 0, "updated_order_cta": 0}'],br_enable_payment_logos_on_bubble:[8160,"bool",!1,!1],br_order_message_copy_pix_key_cta_enabled:[10566,"bool",!1,!1],br_pay_with_card_cta_buyer_enabled:[7102,"bool",!1,!1],br_pay_with_card_cta_seller_enabled:[7103,"bool",!1,!1],br_pay_with_payment_link_cta_buyer_enabled:[9847,"bool",!1,!1],br_pay_with_pix_cta_buyer_enabled:[7101,"bool",!1,!1],br_pix_biz_profile_entrypoint_enabled:[8178,"bool",!1,!1],brigading_privacy_setting_enabled:[9876,"bool",!1,!0],british_english_localization_enabled_web:[10865,"bool",!1,!1],broadcast_message_edit_receive:[4091,"bool",!1,!1],broadcast_message_edit_send:[4092,"bool",!1,!1],btm_qpl_enabled:[1272,"bool",!1,!0],btm_threads_logging_enabled:[1022,"bool",!1,!0],bump_receiver_existing_thread_with_inviter:[9173,"bool",!1,!1],bump_sender_existing_thread_from_invite_notif:[9177,"int",-1,-1],business_bot_include_automated_type_in_msg_stanza:[6417,"bool",!1,!1],business_profile_refresh_m1_enabled:[470,"bool",!1,!0],business_threads_logging_enabled:[853,"bool",!1,!1],business_tool_enhanced_logging:[4427,"bool",!1,!1],buyer_initiated_order_request_variant_enabled:[5114,"bool",!1,!1],buyer_order_payment_request_enabled:[5575,"bool",!1,!1],cag_member_key_rotation_optimization:[2521,"bool",!1,!1],cag_message_edit_receive:[4089,"bool",!1,!1],cag_message_edit_send:[4090,"bool",!1,!1],cag_reactions_receive:[2035,"bool",!1,!1],cag_reactions_send:[2036,"bool",!1,!1],call_only_primary_device_limit_exceeded:[1525,"bool",!1,!1],calling_privacy_callee:[1972,"bool",!0,!0],can_support_web_column_packing:[3600,"bool",!1,!1],caption_edit_receive:[3686,"bool",!1,!1],caption_edit_send:[3687,"bool",!1,!1],carousel_message_client_enabled:[4668,"bool",!1,!0],cart_order_creation_shortcut_enabled:[4257,"bool",!1,!1],catalog_categories_enabled:[1514,"bool",!1,!0],catalog_video_max_size_mb:[8606,"int",50,50],catalog_video_upload:[8272,"bool",!1,!1],catalog_video_view_enabled:[10691,"bool",!1,!1],category_and_collection_deeplinks_catalog_filter:[10218,"string","917977079770","16005554444"],category_deeplink_enabled:[10215,"bool",!1,!0],channel_core_event_logging_enabled:[5262,"bool",!0,!0],channel_follower_list_enabled:[4307,"bool",!0,!0],channel_forward_bottom_button_enabled:[9422,"bool",!1,!0],channel_forward_to_chat_enabled:[4338,"bool",!1,!0],channel_forward_to_chat_link_enabled:[4860,"bool",!1,!0],channel_forward_to_chat_v2_enabled:[4644,"bool",!0,!0],channel_forward_to_chat_v2_message_navigation_enabled:[4682,"bool",!1,!0],channel_forward_to_chat_v2_new_ui_enabled:[4683,"bool",!1,!0],channel_info_admin_metadata_fetching_enabled:[5621,"bool",!1,!0],channel_link_in_nav_bar_enabled:[5041,"bool",!1,!0],channel_playable_message_views_duration_milliseconds:[4722,"int",3e3,3e3],channel_poll_forwarding_enabled:[10412,"bool",!1,!0],channel_poll_status_card_enabled:[10413,"bool",!1,!0],channel_ptt_status_card_enabled:[10513,"bool",!1,!0],channel_pull_message_updates_threshold_seconds:[4326,"int",120,120],channel_reactions_enabled:[4306,"bool",!1,!0],channel_reactions_sender_list_enabled:[5185,"bool",!1,!0],channel_reactions_sending_enabled:[4633,"bool",!1,!0],channel_reactions_settings_enabled:[4887,"bool",!1,!0],channel_reactions_settings_none_option_enabled:[5274,"bool",!1,!1],channel_supported_message_types:[3919,"string","1, 2, 3, 5, 9, 10, 12, 15","1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"],channel_to_channel_forwarding_logging_enabled:[8227,"bool",!1,!1],channel_tombstone_messages_visibility_disabled:[10657,"bool",!1,!0],channel_view_counts_enabled:[4721,"int",0,3],channel_views_duration_milliseconds:[4648,"int",1e3,1e3],channel_web_reparse_enabled:[6304,"bool",!1,!0],channels_admin_context_card_enabled:[5158,"bool",!1,!0],channels_admin_insights_gizmos_enabled:[9641,"bool",!1,!1],channels_admin_reply_enabled:[7211,"bool",!1,!1],channels_admin_reply_receiver_enabled:[7237,"bool",!1,!1],channels_audio_files_display_waveform_enabled:[6996,"bool",!1,!0],channels_audio_files_receiver_enabled:[6506,"bool",!1,!0],channels_audio_files_sender_enabled:[6505,"bool",!1,!0],channels_audio_files_sender_waveform_enabled:[6943,"bool",!1,!0],channels_block_unsupported_stickers_enabled:[6373,"bool",!1,!0],channels_capabilities_enabled:[10328,"bool",!1,!1],channels_creation_enabled:[3878,"int",0,2],channels_creation_logging_enabled:[4784,"bool",!1,!0],channels_directory_categories_cache_refresh_interval_ms:[8151,"int",864e5,6e5],channels_directory_categories_enabled:[7685,"bool",!1,!1],channels_directory_categories_logging_enabled:[10188,"bool",!1,!0],channels_directory_category_types:[7734,"string","3,7,6,4,1,5,2","3,7,6,4,1,5,2"],channels_directory_enabled:[3879,"int",0,2],channels_directory_fetch_limit:[5203,"int",50,50],channels_directory_logging_enabled:[4783,"bool",!1,!0],channels_directory_page_size:[5853,"int",50,50],channels_directory_pagination_enabled:[5487,"bool",!1,!0],channels_directory_quick_action_button_enabled:[7686,"bool",!1,!0],channels_directory_search_debounce_ms:[5204,"int",250,250],channels_directory_v2_cache_refresh_interval_ms:[5304,"int",18e5,6e5],channels_directory_v2_cache_ttl_ms:[5303,"int",72e5,36e5],channels_directory_v2_enabled:[5126,"bool",!1,!0],channels_directory_v2_filter_types:[5127,"string","","1, 2, 3, 4, 5, 6"],channels_directory_v2_logging_enabled:[5471,"bool",!1,!0],channels_dyi_enabled:[4635,"bool",!1,!0],channels_dyi_logging_enabled:[5488,"bool",!1,!0],channels_dyi_max_file_size_in_bytes_warning_threshold:[4866,"int",1e9,1e9],channels_edit_backwards_compatibility:[5208,"bool",!1,!0],channels_enable_msg_history_metrics:[5777,"bool",!1,!0],channels_enabled:[3877,"int",0,0],channels_fetch_and_log_capabilities:[10325,"bool",!1,!1],channels_fetch_increased_video_data_for_thumbnails_web_enabled:[5827,"bool",!1,!0],channels_fetch_metadata_from_server_by_invite_code_web:[5935,"bool",!1,!0],channels_filter_out_subscribed_in_directory_null_state:[5015,"bool",!1,!0],channels_followers_list_cache_refresh_milliseconds:[5217,"int",6e4,6e4],channels_followers_list_cache_refresh_seconds:[5182,"int",60,60],channels_forward_from_chat_to_channel_enabled:[8054,"bool",!1,!1],channels_forward_logging_v2_additional_fields_enabled:[7264,"bool",!1,!1],channels_forward_logging_v2_enabled:[5492,"bool",!1,!0],channels_forward_to_channel_enabled:[6323,"bool",!1,!0],channels_forwarding_logging_enabled:[4782,"bool",!1,!1],channels_geosuspend_admin_alerts_enabled:[5216,"bool",!1,!0],channels_geosuspend_appeals_enabled:[5959,"bool",!1,!0],channels_geosuspend_enabled:[5161,"bool",!1,!0],channels_hide_news_url_preview:[5287,"bool",!1,!0],channels_hq_link_preview:[5511,"bool",!1,!1],channels_inbox_actions_enabled:[8686,"bool",!1,!0],channels_inbox_compact_style_enabled:[7197,"bool",!1,!1],channels_inbox_directory_search_web_enabled:[6241,"bool",!1,!0],channels_inbox_filters_web_enabled:[6020,"bool",!1,!1],channels_invite_close_loop:[8400,"int",-1,-1],channels_large_number_format_enabled:[4653,"bool",!1,!0],channels_last_line_links_padding_enabled:[9342,"bool",!1,!0],channels_max_messages_batch_pull:[5494,"int",100,100],channels_media_cache_setting_enabled:[5625,"bool",!1,!1],channels_media_storage_management_enabled:[7761,"bool",!1,!0],channels_message_edit_enabled:[5174,"bool",!1,!0],channels_message_link_enabled:[5188,"bool",!1,!0],channels_message_loading_indicators_enabled:[5646,"bool",!1,!0],channels_multi_admin_enabled:[6096,"bool",!1,!0],channels_multi_admin_max_admin_count:[6461,"int",16,16],channels_multi_admin_non_followers_enabled:[6389,"bool",!0,!0],channels_multi_admin_receiver_enabled:[6535,"bool",!1,!0],channels_multi_admin_transfer_ownership_enabled:[7124,"bool",!1,!0],channels_multi_admin_transfer_ownership_receiver_enabled:[7244,"bool",!1,!0],channels_multi_m1_improvements_enabled:[7245,"bool",!1,!0],channels_non_basic_stickers_enabled:[6383,"bool",!1,!0],channels_nudge_to_unmute_max_nudges_count:[7530,"int",2,2],channels_nudge_to_unmute_mode:[7239,"int",0,0],channels_nudge_to_unmute_should_show_tooltip:[7529,"bool",!1,!1],channels_pinning_enabled:[7387,"bool",!1,!0],channels_poll_creation_enabled:[5533,"bool",!1,!0],channels_poll_message_short_number_format_enabled:[6489,"bool",!0,!0],channels_poll_receive_enabled:[6191,"bool",!1,!0],channels_poll_single_option_control_enable:[5534,"bool",!1,!0],channels_poll_voter_list_enabled:[6382,"bool",!1,!0],channels_poll_voters_details_cache_ttl_ms:[7920,"int",3e5,3e5],channels_poll_voters_summary_cache_ttl_ms:[7919,"int",12e4,12e4],channels_proactive_message_gap_handling_enabled:[5871,"bool",!1,!0],channels_producer_insights_enabled:[8960,"bool",!1,!0],channels_producer_insights_hide_deltas:[9792,"bool",!0,!0],channels_producer_insights_min_followers:[9447,"int",100,1],channels_profile_picture_deletion_appeals_enabled:[7552,"bool",!1,!0],channels_ptt_forwarded_ui_enabled:[5885,"bool",!0,!0],channels_ptt_logging_enabled:[6274,"bool",!0,!0],channels_ptt_receiver_enabled:[5876,"bool",!1,!0],channels_ptt_sender_enabled:[5875,"bool",!1,!0],channels_ptt_transcription_blocked:[5884,"bool",!0,!0],channels_pull_last_msg_on_channel_open:[6138,"bool",!1,!1],channels_qpl_logging:[7677,"bool",!1,!1],channels_quick_forwarding_button_mode:[7234,"int",0,0],channels_quick_forwarding_download_missing_media:[7662,"bool",!1,!0],channels_quick_forwarding_media_only:[7389,"bool",!1,!0],channels_reactions_bottomsheet_tap_to_react_enabled:[7682,"bool",!1,!0],channels_recommended_cache_ttl_ms:[4271,"int",6048e5,864e5],channels_recommended_enabled:[4356,"int",0,2],channels_recommended_v2_recently_followed_channels_below_enabled:[5464,"bool",!1,!0],channels_recommended_v2_ui_enabled:[5096,"bool",!1,!0],channels_recommended_v3_ui_enabled:[8108,"bool",!1,!0],channels_recommended_v3_ui_limit:[8167,"int",5,5],channels_report_outcome_appeals_enabled:[6322,"bool",!1,!0],channels_restricted_updates_enabled:[4219,"bool",!1,!0],channels_send_album_enabled:[5643,"bool",!1,!0],channels_send_view_receipt_enabled:[4760,"bool",!1,!0],channels_share_link_logging_enabled:[5491,"bool",!1,!0],channels_status_consumption_disable_tooltip_enabled:[6801,"bool",!0,!0],channels_status_creation_buttons_to_nav_bar:[8845,"bool",!1,!1],channels_status_image_hd_quality_enabled:[6713,"bool",!1,!1],channels_status_invite_links_production_enabled:[6445,"bool",!1,!0],channels_status_updates_consumption_enabled:[6444,"bool",!1,!0],channels_status_updates_production_enabled:[6442,"bool",!1,!0],channels_status_updates_production_message_types:[6443,"string","1, 2, 9","1, 2, 9"],channels_status_video_hd_quality_enabled:[6714,"bool",!1,!1],channels_sticker_receiving_enabled:[6111,"bool",!1,!0],channels_sticker_sending_enabled:[6110,"bool",!1,!0],channels_suspend_appeals_enabled:[5973,"bool",!1,!0],channels_updates_tab_fuzzy_search_enabled:[7681,"bool",!1,!0],channels_updates_tab_group_actions_enabed:[8652,"bool",!1,!0],channels_updates_tab_logging_enabled:[4506,"bool",!1,!0],channels_updates_tab_long_press_actions_enabled:[8651,"bool",!1,!0],channels_updates_tab_swipe_actions_enabled:[8653,"bool",!1,!0],channels_verified_badge_in_compact_inbox_enabled:[8059,"bool",!1,!1],channels_video_autoplay:[7588,"bool",!1,!1],channels_video_limit_mb:[4787,"int",16,16],channels_view_counts_display_to_followers_enabled:[4684,"bool",!1,!0],channels_view_counts_enabled:[4590,"bool",!1,!0],channels_violating_message_appeals_enabled:[6321,"bool",!1,!0],channels_vpv_logging_enabled:[9834,"bool",!1,!0],channels_waitlist_enabled:[4357,"bool",!1,!0],channels_waitlist_logging_enabled:[4632,"bool",!1,!0],channels_web_bootstrap_improvements_enabled:[5825,"bool",!0,!0],channels_web_bootstrap_timeout_enabled:[5551,"bool",!1,!0],channels_web_wasm_worker_enabled:[6830,"bool",!1,!1],chat_upsell_for_1on1_invites:[3689,"bool",!1,!1],chat_with_support_cta:[8646,"bool",!1,!1],chatlist_filters_v1:[1608,"bool",!1,!1],client_group_participants_limit:[618,"int",257,257],client_message_id_media_download_log_enabled:[3820,"bool",!1,!0],coex_biz_states_sys_msg_enabled:[2320,"bool",!1,!0],coex_identity_verification_v1:[6647,"bool",!1,!1],coex_infra_logging_enabled:[6500,"bool",!1,!1],coex_lazy_insertion_logging_enabled:[10487,"bool",!1,!0],coex_status_reply_privacy_disclaimer_enabled:[8674,"bool",!1,!0],coex_system_message_logging_enabled:[7564,"bool",!0,!0],collapsing_recommended_channels_enabled:[5852,"bool",!1,!0],collapsing_recommended_channels_enabled_by_default:[9477,"bool",!1,!0],collection_and_category_deeplink_logging_enabled:[10224,"bool",!1,!0],collection_deeplink_enabled:[10216,"bool",!1,!0],column_serialization_perf_impact_test:[3973,"bool",!1,!1],commerce_bloks_apps_mapping:[1320,"string",'{"address_message":{"app_id":"com.bloks.www.whatsapp.commerce.address_message","expiration_secs":300,"version":"1.5","supported_businesses":["+918591749310","+917977079770","+12165552716","+918591749310","+917977079770","+919324433533","+917669800185","+919355081749","+917217010106","+912248913727","+912068135414","+918368818019","+917827971992","+917827971988","+911244632002","+919999006542","+917982465931","+911244632030","+918920528558","+911244632026","+918920530301","+15550083895","+12995550004","+6589523673","+6597685939","+6580536071","+6531631404","+6590834813","+6588867112","+16615555837","+12765985268","+18055908026"]},"galaxy_message":{"flow_message_version":{"1":{"min_android_app_supported_version":"2.22.21","min_ios_app_supported_version":"2.22.16"}},"app_id":"com.bloks.www.whatsapp.commerce.galaxy_message","expiration_secs":86400,"version":"1.0","flows":{}}}','{"address_message":{"app_id":"com.bloks.www.whatsapp.commerce.address_message","expiration_secs":300,"version":"1.5","supported_businesses":["+918591749310","+917977079770","+12165552716","+918591749310","+917977079770","+919324433533","+917669800185","+919355081749","+917217010106","+912248913727","+912068135414","+918368818019","+917827971992","+917827971988","+911244632002","+919999006542","+917982465931","+911244632030","+918920528558","+911244632026","+918920530301","+15550083895","+12995550004","+6589523673","+6597685939","+6580536071","+6531631404","+6590834813","+6588867112","+16615555837","+12765985268","+18055908026"]},"galaxy_message":{"flow_message_version":{"1":{"min_android_app_supported_version":"2.22.21","min_ios_app_supported_version":"2.22.16"}},"app_id":"com.bloks.www.whatsapp.commerce.galaxy_message","expiration_secs":86400,"version":"1.0","flows":{}}}'],commerce_metadata_supported_business:[1693,"string","18785550326,918591749310,917977079770,12245555037,5515997781156,5511989238421,555191894444,905333860133,908502213040,5511916282555,551147664020,622150851766,551121038525","18785550326,447766028329,918591749310,917977079770,12245555037,5515997781156,5511989238421,555191894444,905333860133,908502213040,5511916282555,551147664020,622150851766"],commerce_sanctioned:[1319,"bool",!1,!1],community_admin_promotion_one_time_prompt:[1864,"bool",!1,!1],community_announcement_group_size_limit:[2774,"int",5e3,5e3],community_announcement_improvement_m1:[3121,"bool",!1,!0],community_announcement_improvement_m2:[3239,"bool",!1,!0],community_announcement_improvement_m3:[3380,"bool",!1,!0],community_breakout_groups_enabled:[3864,"bool",!1,!1],community_chat_list_tabs:[3748,"bool",!1,!1],community_creation_nux_always:[4053,"bool",!1,!1],community_examples:[4852,"bool",!1,!0],community_general_chat_UI_enabled:[5021,"bool",!1,!1],community_general_chat_create_enabled:[5453,"bool",!1,!1],community_general_chat_max_auto_add_users:[5144,"int",1024,1024],community_general_chat_notification_followup_enabled:[5665,"bool",!1,!1],community_group_visibility_enabled:[8530,"bool",!1,!1],community_groups_navigation:[3023,"bool",!1,!0],community_hidden_groups_enabled:[8510,"bool",!1,!1],community_hidden_groups_receiver_enabled:[10689,"bool",!1,!1],community_history_receive:[5192,"bool",!1,!1],community_history_send:[5193,"bool",!1,!1],community_history_setting_receive:[5046,"bool",!1,!1],community_history_setting_send:[5191,"bool",!1,!1],community_media:[9027,"bool",!1,!1],community_members_bottomsheet_enabled:[4979,"bool",!1,!1],community_members_bottomsheet_post_creation_enabled:[5e3,"bool",!1,!1],community_navigate_to_unread_subgroup_enabled:[5169,"bool",!1,!1],community_permissions_m1:[7180,"bool",!1,!0],community_permissions_m1_5:[7889,"bool",!1,!0],community_permissions_m2:[7608,"bool",!1,!0],community_reporting_ui_upsell_exit:[2818,"bool",!0,!0],community_rich_system_message_enabled:[3292,"bool",!1,!1],community_shorter_group_creation_enabled:[3966,"bool",!1,!1],community_spam_exiting_delete_chats_enabled:[10981,"bool",!1,!1],community_stacked_squircle_enabled:[5103,"bool",!1,!1],community_subgroup_icon_variant:[3078,"int",0,2],community_subgroup_identity_v2:[4160,"bool",!1,!0],community_subgroup_join_from_system_message_enabled:[4345,"bool",!1,!0],community_subgroup_switcher_entrypoint_enabled:[3738,"bool",!1,!0],community_suspend_v0_enabled:[1653,"bool",!1,!0],community_tab_m2:[2154,"bool",!1,!0],community_transfer_ownership_receiver:[8499,"bool",!1,!0],community_transfer_ownership_sender:[10736,"bool",!1,!1],companion_biz_label_sync_enabled:[5610,"bool",!1,!1],companion_biz_quick_reply_sync_enabled:[5694,"bool",!1,!1],companion_favorites_sync_enabled:[7403,"bool",!1,!1],companion_min_versions:[1367,"string","json:[]","json:[]"],comparion_force_upgrade:[1368,"bool",!1,!1],consumer_collections_enabled:[582,"bool",!1,!0],contact_permission_deeplink_enabled:[7633,"bool",!1,!1],country_client_gating_enabled:[1105,"bool",!1,!1],country_region_name_connecticut_aa:[10832,"bool",!1,!1],country_region_name_maine_aa:[10833,"bool",!1,!1],country_region_name_massachusetts_aa:[10834,"bool",!1,!1],country_region_name_new_hampshire_aa:[10835,"bool",!1,!1],country_region_name_new_jersey_aa:[10836,"bool",!1,!1],country_region_name_new_york_aa:[10837,"bool",!1,!1],country_region_name_north_east_aa:[10838,"bool",!1,!1],country_region_name_pennsylvania_aa:[10839,"bool",!1,!1],country_region_name_rhode_island_aa:[10840,"bool",!1,!1],country_region_name_texas_prod_aa:[10318,"bool",!1,!1],country_region_name_vermont_aa:[10841,"bool",!1,!1],coupon_copy_button_url:[3631,"string","https://www.whatsapp.com/coupon?code=","https://www.whatsapp.com/coupon?code="],create_group_as_lid:[10956,"bool",!1,!1],create_new_group_deeplink_enabled:[7912,"bool",!1,!1],csat_message_rating:[690,"bool",!1,!0],csat_message_trigger:[1082,"bool",!1,!0],ctwa_3pd_conversion_signal_logging:[7138,"bool",!1,!0],ctwa_ad_account_nonce_push_wait_timeout_web:[8664,"int",20,20],ctwa_ad_account_nonce_retries_max_web:[8663,"int",0,0],ctwa_ad_account_token_storage_kill_switch_web:[8166,"bool",!0,!1],ctwa_ad_creation_entry_point_catalog_product_web:[9677,"bool",!1,!0],ctwa_ad_creation_entry_point_catalog_web:[9596,"bool",!1,!0],ctwa_additional_label_event_logging_enabled:[3793,"bool",!1,!0],ctwa_additional_user_journey_logging:[9064,"bool",!1,!0],ctwa_biz_action_bar_holdout:[6073,"bool",!1,!1],ctwa_bmx_pairless_logging_refactoring:[7129,"bool",!1,!1],ctwa_business_funnel_logging:[8140,"bool",!1,!0],ctwa_clear_tracking:[5151,"bool",!1,!1],ctwa_consumer_data_sharing_consent:[2935,"bool",!1,!0],ctwa_consumer_funnel_logging:[8492,"bool",!1,!0],ctwa_content_gen_enabled:[5330,"bool",!1,!1],ctwa_coupons_enabled:[7313,"bool",!1,!1],ctwa_data_max_length:[1841,"int",768,768],ctwa_enhanced_label_logging:[4761,"bool",!1,!0],ctwa_entry_point_config_fetch_threshhold:[6214,"int",432e5,2e3],ctwa_lead_and_follow_up_label_signals:[9305,"bool",!1,!0],ctwa_lead_labels_send_signals:[9593,"bool",!1,!0],ctwa_long_term_holdout_client_side_check:[11e3,"bool",!1,!1],ctwa_long_term_holdout_content_enabled:[8015,"bool",!1,!0],ctwa_manage_ads_tab_web:[5554,"bool",!1,!0],ctwa_manage_ads_tab_web_ad_actions_menu:[6237,"bool",!1,!1],ctwa_manage_ads_tab_web_ad_details:[6971,"bool",!1,!1],ctwa_manage_ads_tab_web_ad_metrics:[6238,"bool",!1,!1],ctwa_manage_ads_tab_web_recovery_flow:[7215,"bool",!1,!1],ctwa_mm_biz_ai_disclosure_update_enabled:[10379,"bool",!1,!1],ctwa_mm_biz_ai_tos_filtering_enabled:[10388,"bool",!1,!1],ctwa_new_customer_label_signals:[9302,"bool",!1,!0],ctwa_order_amount_and_currency_logging_enabled:[7563,"bool",!1,!0],ctwa_quick_reply_labels:[5671,"bool",!1,!1],ctwa_smb_data_sharing_consent:[2934,"bool",!1,!0],ctwa_smb_data_sharing_opt_in_cool_off_period:[3331,"int",259200,259200],ctwa_smb_data_sharing_settings_killswitch:[5615,"bool",!1,!1],ctwa_value_holdout_h1_24_enabled:[7617,"bool",!1,!1],ctwa_value_holdout_h2_23_enabled:[4796,"bool",!1,!1],ctwa_wame_message_support:[8884,"bool",!1,!0],custom_racing_emoji:[7463,"bool",!1,!1],data_privacy_phase_2_enabled:[6843,"bool",!1,!0],data_privacy_phase_2_non_e2ee_enabled:[7131,"bool",!1,!0],dc_edit_postcode_by_default_enabled:[1534,"bool",!1,!1],ddm_reversed_options:[1397,"bool",!1,!1],default_audio_limit_mb:[3657,"int",16,64],default_gif_limit_mb:[3656,"int",16,64],default_media_limit_mb:[3660,"int",16,64],default_status_media_limit_mb:[3659,"int",16,64],default_video_limit_mb:[3185,"int",16,64],default_video_limit_mb_newsletter:[4155,"int",16,16],desktop_upsell_mac_cta_call_btn:[5568,"bool",!0,!0],desktop_upsell_mac_cta_chatlist_dropdown:[5565,"bool",!0,!0],desktop_upsell_mac_cta_chatlist_toastbar:[5566,"bool",!0,!0],desktop_upsell_mac_cta_intro_panel:[5569,"bool",!0,!0],desktop_upsell_mac_cta_missed_call:[6532,"bool",!0,!0],desktop_upsell_mac_cta_search_results_toastbar:[5567,"bool",!0,!0],desktop_upsell_mac_permanent_ctas:[4805,"bool",!1,!1],desktop_upsell_mac_temporary_ctas:[4803,"bool",!1,!1],desktop_upsell_win_butterbar:[2348,"bool",!1,!1],desktop_upsell_win_cta_call_btn:[5148,"bool",!0,!0],desktop_upsell_win_cta_call_btn_variation_2:[5900,"bool",!0,!0],desktop_upsell_win_cta_chatlist_dropdown:[5145,"bool",!0,!0],desktop_upsell_win_cta_chatlist_toastbar:[5146,"bool",!0,!0],desktop_upsell_win_cta_intro_panel:[5149,"bool",!0,!0],desktop_upsell_win_cta_missed_call_variation_1:[5901,"bool",!1,!1],desktop_upsell_win_cta_missed_call_variation_2:[5902,"bool",!0,!0],desktop_upsell_win_cta_search_results_toastbar:[5147,"bool",!0,!0],desktop_upsell_win_ctas:[2349,"bool",!1,!1],desktop_upsell_win_dropdown_btn:[2725,"bool",!1,!1],desktop_upsell_win_permanent_ctas:[4804,"bool",!1,!1],desktop_upsell_win_temporary_ctas:[4802,"bool",!1,!1],dev_prop_boolean:[1065,"bool",!1,!1],dev_prop_float:[1067,"float",0,0],dev_prop_int:[1066,"int",0,0],dev_prop_string:[1064,"string","",""],device_capabilities_sync_enabled:[7853,"bool",!1,!1],df_config:[3471,"string","",""],df_enabled:[3472,"bool",!1,!1],direct_connection_business_numbers:[1846,"string","16005554444,918591749310,917977079770","16005554444,918591749310,917977079770"],directory_categories_display_newsletters_per_category_limit:[9312,"int",3,3],directory_categories_endless_scrolling_enabled:[9448,"bool",!1,!0],directory_categories_newsletters_per_category_limit:[7986,"int",10,10],directory_categories_scrollable_columns_enabled:[9730,"bool",!1,!0],directory_search_kill_switch:[4283,"bool",!0,!0],directory_sort_kill_switch:[4282,"bool",!0,!0],disable_auto_download:[1838,"bool",!1,!1],disable_status_to_non_sub:[3077,"bool",!1,!1],disappearing_messages_chat_picker:[1518,"bool",!1,!1],disappearing_mode:[536,"bool",!1,!1],dm_additional_durations:[3305,"bool",!1,!1],dm_chat_picker_v2:[2597,"bool",!1,!0],dm_initiator_trigger:[5309,"bool",!1,!1],dm_initiator_trigger_daily_logs:[7402,"bool",!1,!0],dm_initiator_trigger_groups:[7141,"bool",!1,!0],dm_reliability_logging:[5580,"bool",!1,!1],dm_reliability_refactor:[4131,"bool",!1,!1],dm_updated_system_message:[1670,"bool",!1,!0],dmcp_manage_storage_LAUNCH:[2919,"bool",!1,!0],document_preview_caption_changes_enabled:[2307,"bool",!1,!0],documents_with_captions_receive:[1749,"bool",!1,!0],documents_with_captions_send:[1750,"bool",!1,!0],documents_with_captions_send_desktop_beta_rollout:[2486,"bool",!1,!1],download_document_thumb_mms_enabled:[250,"bool",!1,!0],download_status_thumb_mms_enabled:[249,"bool",!1,!1],draft_orders_enabled:[6659,"bool",!1,!1],drop_inner_message_context_infos_when_sending:[7772,"bool",!1,!0],drop_last_name:[726,"bool",!1,!1],dsa_appeals_query_optimization_enabled:[8593,"bool",!1,!1],dsa_article21_channel_suspend_enabled:[8591,"bool",!1,!0],dsa_article21_channel_violating_messages_enabled:[8595,"bool",!1,!0],dsa_article_21_channel_geosuspend_enabled:[8592,"bool",!1,!0],dsa_article_21_channel_profile_picture_deletion_enabled:[8594,"bool",!1,!0],dsa_channels_enforcement_geo_suspension_enabled:[6147,"bool",!1,!0],dsa_channels_enforcement_messages_enabled:[6148,"bool",!1,!0],dsa_channels_enforcement_profile_picture_deletion_enabled:[7553,"bool",!1,!0],dsa_channels_enforcement_suspension_enabled:[6146,"bool",!1,!0],dsa_channels_report_unlawful_content_enabled:[6145,"bool",!1,!0],dsa_channels_reports_outcome_list_enabled:[6297,"bool",!1,!0],dsa_information_for_eu_only_enabled:[7592,"bool",!1,!0],dsa_new_user_journey_enabled:[8786,"bool",!1,!0],elevated_important_msg:[809,"bool",!1,!1],elevated_push_names_v2_enabled:[2540,"bool",!1,!1],elevated_push_names_v2_m1_follow_up_enabled:[2763,"bool",!1,!1],elevated_push_names_v2_m2_enabled:[2904,"bool",!1,!1],elevating_profile_names_enabled:[604,"bool",!1,!1],emoji_search_tokenize:[9296,"bool",!1,!1],enable_biz_activity_report_request:[455,"bool",!1,!1],enable_carousel_message_client_logging:[5542,"bool",!1,!0],enable_chat_list_sticker_emojis:[9069,"bool",!1,!1],enable_chat_psa_auto_play_videos:[3182,"bool",!1,!0],enable_chat_psa_forwards:[4033,"bool",!1,!0],enable_clear_formatted_preview:[4659,"bool",!1,!0],enable_client_chat_psa:[1844,"bool",!1,!0],enable_coex_system_message:[5383,"bool",!1,!0],enable_collection_update_for_hydrated_addons_only:[8544,"bool",!1,!1],enable_community_suspend_and_appeals:[10539,"bool",!1,!0],enable_ctwa_ml_entry_point_config:[6216,"bool",!1,!0],enable_days_since_receive_logging:[3322,"bool",!1,!0],enable_funnel_logging:[6250,"bool",!1,!0],enable_granular_reject_reasons:[550,"bool",!1,!1],enable_group_profile_editor:[689,"bool",!1,!1],enable_image_video_sharing_user_journey_logging:[7504,"bool",!1,!0],enable_inline_video_type_field_logging:[5912,"bool",!1,!0],enable_interactive_single_product_message:[7408,"bool",!1,!1],enable_logging_multi_select_from_chat_list:[3118,"bool",!1,!0],enable_logging_user_to_device_size_bucket:[9656,"bool",!1,!0],enable_media_view_reply:[5582,"bool",!1,!0],enable_minimize_individual_mutation_write:[8910,"bool",!1,!0],enable_new_media_as_document_chat_message_layout:[6786,"bool",!1,!0],enable_one_request_ptt_upload_proto:[8264,"bool",!1,!1],enable_override_syncd_key:[10761,"bool",!1,!1],enable_persisting_only_updated_syncd_individual_mutations:[10391,"bool",!0,!0],enable_privacy_token_with_timestamp:[4992,"bool",!1,!0],enable_product_carousel_message:[7177,"bool",!1,!1],enable_product_carousel_message_logging:[7802,"bool",!1,!0],enable_receiving_hd_photo_quality:[3116,"bool",!1,!0],enable_soox_message_receiving:[2802,"bool",!0,!0],enable_soox_message_sending:[2832,"bool",!1,!0],enable_spam_report_iq_with_privacy_token:[4991,"bool",!1,!0],enable_status_report_and_block:[3988,"bool",!1,!0],enable_status_reporting:[2728,"bool",!1,!0],enable_sticker_pack_messages_sending:[10692,"bool",!1,!1],enable_sticker_sharing_user_journey_logging:[7503,"bool",!1,!0],enable_sticker_sharing_user_journey_qpl_logging:[8193,"bool",!1,!0],enable_syncd_debug_data_in_patch:[6614,"bool",!1,!1],enabled_cached_indexmac:[8911,"bool",!1,!0],ephemeral_24h_duration:[407,"bool",!1,!0],ephemeral_allow_group_members:[432,"bool",!1,!0],ephemeral_allow_group_members_web:[8152,"bool",!1,!0],ephemeral_chat_psa:[7157,"bool",!1,!1],ephemeral_sync_response:[2714,"bool",!1,!1],esr_use_new_xmpp_type:[7534,"bool",!1,!1],event_cover_image_receiver_enabled:[8792,"bool",!1,!0],event_cover_image_sender_enabled:[8793,"bool",!1,!0],event_description_length_limit:[6208,"int",2048,2048],event_messages_meta_node:[6822,"bool",!1,!1],event_name_length_limit:[6207,"int",100,100],event_show_add_to_calendar_option:[8309,"bool",!0,!0],event_wa_call_max_days_in_advance:[6265,"int",365,365],events_advanced_location_input:[8380,"bool",!1,!1],events_cnav_promo:[8704,"bool",!0,!0],events_create:[5562,"bool",!1,!1],events_create_cag_enabled:[9932,"bool",!1,!0],events_create_regular_groups_enabled:[7258,"bool",!1,!1],events_edit_and_cancel_system_messages:[7941,"bool",!1,!1],events_edit_receive:[7358,"bool",!1,!1],events_edit_send:[7357,"bool",!1,!1],events_m3_allow_guests_receive:[7421,"bool",!1,!1],events_m3_allow_guests_send:[7420,"bool",!1,!1],events_m3_attendee_chat:[7509,"bool",!1,!1],events_m3_cover_image_receive:[7511,"bool",!1,!1],events_m3_cover_image_send:[7510,"bool",!1,!1],events_m3_dynamic_pin_expiry_receive:[9108,"bool",!0,!0],events_m3_end_time_receive:[8509,"bool",!1,!1],events_m3_end_time_send:[8508,"bool",!1,!1],events_m3_maybe_respone_send:[9277,"bool",!1,!1],events_m3_maybe_response_receive:[9278,"bool",!1,!1],events_m3_pin_customization_receive:[9062,"bool",!1,!1],events_m3_pin_customization_send:[9063,"bool",!1,!1],events_m3_reminders_send:[9180,"bool",!1,!1],events_m3_rsvp_notification_grouping:[9665,"bool",!1,!0],events_m3_search_support_enabled:[10173,"bool",!1,!1],events_search_indexing_support:[8451,"bool",!1,!1],events_send_one_on_one_chat:[8357,"bool",!1,!1],events_start_notification:[7306,"bool",!1,!1],events_view:[5563,"bool",!1,!1],evolve_about_m1_enabled:[4921,"bool",!1,!1],evolve_about_m1_receiver_enabled:[5839,"bool",!1,!1],evolve_about_m1_receiver_for_new_surfaces_enabled:[6172,"bool",!1,!1],expanded_formatting_v2_expansion:[7822,"bool",!1,!1],expanded_formatting_v2_improvements:[7824,"bool",!1,!1],expanded_formatting_v2_menu:[7823,"bool",!1,!1],expanded_text_formatting_enabled:[4093,"bool",!1,!1],expanded_text_formatting_preview_enabled:[6004,"bool",!1,!1],expiring_groups_enabled:[3181,"bool",!1,!1],extensions_central_config_killswitch:[5247,"bool",!1,!1],extensions_geoblocking_enabled:[5333,"bool",!1,!0],extensions_graphql_cta_disable:[3192,"string","2498088","2498088"],extensions_message_support_version:[2306,"string",'{"1":{"min_android_app_supported_version":"2.22.21"},"2":{"min_android_app_supported_version":"2.22.23.11","min_ios_app_supported_version":"2.23.18.15"},"3":{"min_android_app_supported_version":"2.23.17.10","min_ios_app_supported_version":"2.23.18.15"}}','{"1":{"min_android_app_supported_version":"2.22.21"},"2":{"min_android_app_supported_version":"2.22.23","min_ios_app_supported_version":"2.23.18.15"},"3":{"min_android_app_supported_version":"2.23.17","min_ios_app_supported_version":"2.23.18.15"}}'],extensions_template_killswitch:[2885,"bool",!1,!1],external_beta_can_join:[3081,"bool",!1,!0],external_payments_supported_business:[1763,"string","+917000770007","+918369150604,+917000770007"],facebook_link_preview_use_thumbnail:[810,"bool",!1,!0],favorite_sticker_rmr_sync_enabled:[2155,"bool",!1,!1],favorites_limit:[7267,"int",100,100],fieldstats_event_validation_skip_config:[8834,"string",'""','""'],fieldstats_validation_enabled:[8835,"bool",!0,!0],first_message_experience:[3962,"bool",!1,!1],first_message_experience_v2:[5263,"bool",!1,!1],flattened_reactions_collection:[4390,"bool",!1,!1],fmx_ctwa_kill_switch:[6061,"bool",!1,!1],force_transcode_photos:[5179,"bool",!1,!1],force_transcode_videos:[5178,"bool",!1,!1],forward_media_with_caption_desktop_beta_rollout:[2664,"bool",!0,!0],forward_media_with_captions:[1853,"bool",!1,!1],forwarded_ptt_ui_enabled:[1040,"bool",!1,!0],four_reactions_in_bubble_enabled:[2378,"bool",!1,!0],fullscreen_animation_for_keyword:[2776,"bool",!1,!1],fun_stickers_locale_langs:[4631,"string","en","en"],fun_stickers_phase2_enabled:[4643,"bool",!1,!1],gate_new_invite_contact_picker:[7478,"bool",!1,!1],gif_autoplay_enabled:[2281,"bool",!1,!1],gif_max_play_duration:[3684,"int",5,5],gif_max_play_loops:[3683,"int",3,3],gif_min_play_loops:[3682,"int",1,1],gimmick_phase_two_cache_size:[7185,"int",20,20],gimmick_phase_two_data:[6784,"string","{}","{}"],gimmick_phase_two_data_suffix:[6785,"string","",""],gimmick_phase_two_data_test:[7011,"bool",!1,!1],gimmick_phase_two_logging_enabled:[6787,"bool",!1,!1],gimmick_phase_two_receiver_enabled:[5692,"bool",!1,!1],gimmick_phase_two_sender_enabled:[5693,"bool",!1,!1],graphql_get_product_list:[8800,"bool",!1,!1],graphql_locale_remapping:[2014,"string","{}","{}"],graphql_migrate_legacy_catalog_query:[10309,"bool",!1,!0],graphql_privacy_imp_m1:[1096,"bool",!1,!1],graphql_privacy_imp_m2:[1327,"bool",!1,!1],groove_enabled_web:[2980,"bool",!1,!1],group_catch_up:[559,"bool",!1,!1],group_chat_profile_pictures_enabled:[1825,"bool",!1,!1],group_chat_profile_pictures_enabled_web_beta_rollout:[2543,"bool",!0,!0],group_chat_profile_pictures_v2_enabled:[3261,"bool",!1,!1],group_invite_new_bottom_sheet_enabled:[2749,"bool",!0,!0],group_join_request_can_send_optional_message:[3384,"bool",!1,!1],group_join_request_can_view_optional_message:[3383,"bool",!1,!1],group_join_request_m0_anyone_can_join:[2367,"bool",!1,!1],group_join_request_m1:[1727,"bool",!1,!1],group_join_request_m2:[1728,"bool",!1,!1],group_join_request_m2_banner_on_conversation:[2449,"bool",!1,!1],group_join_request_m2_logging:[2913,"bool",!1,!1],group_join_request_m2_max_pending_participants_limit:[2418,"float",2,2],group_join_request_m2_pushname:[2376,"bool",!1,!0],group_join_request_m2_setting:[1887,"bool",!1,!1],group_join_request_m3:[2369,"bool",!1,!1],group_join_request_m3_banner:[3452,"bool",!1,!1],group_join_request_m3_groups_in_common:[3895,"bool",!1,!1],group_join_request_m3_invited_tab:[3571,"bool",!1,!1],group_join_request_m3_push_notification:[5212,"bool",!1,!1],group_join_request_m3_sort_by_time:[3451,"bool",!1,!1],group_join_request_on_by_default:[4593,"bool",!1,!1],group_join_request_optional_message_soak:[3382,"bool",!1,!1],group_member_recommendations_m1:[7809,"bool",!1,!1],group_member_recommendations_ts_logging:[7492,"bool",!1,!1],group_mentions_in_cag:[3097,"bool",!1,!0],group_mentions_in_subgroups:[4087,"bool",!1,!0],group_size_bypassing_sampling:[1861,"int",1e5,1e5],group_size_limit:[1304,"int",257,257],group_suspend_appeal_include_entity_id_enabled:[2057,"bool",!1,!0],group_suspend_v1_enabled:[1415,"bool",!1,!0],group_suspend_v2_enabled:[3180,"bool",!1,!0],groups_dogfooding_ui:[308,"bool",!1,!1],growth_dry_run_connecticut_holdout_placeholder_abprop:[8816,"bool",!1,!1],growth_lock_v0_enabled:[1204,"bool",!1,!0],hash_identity_keys_for_qr_code_device_verification:[9211,"bool",!1,!0],hd_media_tooltip_enabled:[6286,"bool",!1,!0],hd_media_tooltip_killswitch_enabled:[6378,"bool",!1,!1],hd_media_tooltip_logging_enabled:[7122,"bool",!1,!1],hd_video_data_warning_max_mb:[4153,"int",64,64],hd_video_definition_max_edge:[4172,"int",864,864],hd_video_definition_min_edge:[4171,"int",720,720],hd_video_definition_min_edge_with_max_edge:[4175,"int",480,480],hd_video_label_enabled:[3934,"bool",!1,!0],hd_video_min_streaming_bandwidth:[3936,"int",150,150],hd_video_show_data_warning_dialog:[4152,"bool",!1,!0],hide_channel_tombstone_messages_enabled:[10259,"bool",!1,!0],high_quality_link_preview_enabled:[3665,"bool",!1,!0],history_sync_loop_interval_ms:[4149,"int",2e4,2e4],history_sync_on_demand:[3337,"bool",!1,!1],history_sync_on_demand_cooldown_sec:[4365,"int",7200,7200],history_sync_on_demand_failure_limit:[4364,"int",10,10],history_sync_on_demand_message_count:[3811,"int",50,50],history_sync_on_demand_request_send_killswitch:[4366,"bool",!0,!0],history_sync_on_demand_time_boundary_days:[3642,"int",365,365],history_sync_on_demand_timeout_ms:[3882,"int",1e4,1e4],history_sync_on_demand_with_android_beta:[4135,"bool",!1,!1],hqp_log_enabled:[3349,"bool",!1,!0],hyperlinked_phone_numbers_enabled:[1215,"bool",!1,!1],ig_reels_music_attribution:[1912,"bool",!1,!1],im_nfm_dynamic_message_killswitch:[5124,"bool",!1,!1],improve_subgroup_activation_new_subgroup_poll_interval:[8541,"int",0,0],improve_subgroup_activation_subgroup_poll_interval:[8542,"int",43200,43200],in_app_comms_manage_ads_web_banner_campaign_enabled:[4542,"bool",!1,!0],in_app_support_capi_number_prefixes:[4799,"string","155178684","155178684"],in_app_support_v2_enabled:[233,"bool",!1,!1],in_app_support_v2_jump_to_group:[819,"bool",!1,!1],in_app_support_v2_jump_to_group_wait_time_in_ms:[974,"int",5e3,5e3],in_app_support_v2_locale_langs:[379,"string","",""],in_app_support_v2_number_prefixes:[1031,"string","15517868","15517868"],in_app_support_v2_numbers:[390,"string","",""],in_app_survey_enabled:[1377,"bool",!1,!0],in_app_survey_phone_numbers:[1607,"string","16508638904","16508638904"],inactive_days_to_disable_status_autodownload:[6042,"int",14,14],inapp_banner_client_enabled:[2871,"bool",!1,!0],inbox_filters_context_menu_enabled:[8840,"bool",!1,!1],inbox_filters_custom_filters_enabled:[5173,"bool",!1,!1],inbox_filters_custom_smb_enabled:[7637,"bool",!1,!1],inbox_filters_enabled:[5171,"bool",!1,!1],inbox_filters_favorites_deeplink_enabled:[10195,"bool",!1,!0],inbox_filters_favorites_enabled:[5172,"bool",!1,!1],inbox_filters_favorites_enabled_companions:[8928,"bool",!1,!1],inbox_filters_favorites_management_enabled_companions:[8927,"bool",!1,!1],inbox_filters_haptic_feedback_enabled:[6052,"bool",!1,!1],inbox_filters_read_unread_logging_enabled:[6967,"bool",!1,!1],inbox_filters_reset_timeout:[5765,"int",1800,1800],inbox_filters_smb_always_visible:[7221,"bool",!1,!1],inbox_filters_smb_enabled:[7108,"bool",!1,!0],inbox_filters_smb_label_dropdown:[7294,"bool",!1,!1],inbox_filters_smb_messages_folder:[7293,"bool",!1,!1],inbox_filters_suppress_contact_filter:[7769,"bool",!1,!1],inbox_list_based_notification_enabled:[10772,"bool",!1,!0],inbox_management_filters_m2:[3554,"bool",!1,!1],incentive_program_logging_enabled:[1599,"bool",!1,!0],include_privacy_token_flag_in_delivery_receipt:[6163,"bool",!1,!1],inline_video_playback_additional_logging_enabled:[2431,"bool",!1,!0],interactive_message_native_flow_killswitch:[1133,"bool",!1,!1],interactive_response_message_killswitch:[1435,"bool",!1,!1],interactive_response_message_native_flow_killswitch:[1436,"bool",!1,!1],internal_bug_reporting_v1_enabled:[4697,"bool",!1,!1],invalid_hosted_companion_nack_enabled:[5555,"bool",!1,!0],invite_from_call_list_search:[8711,"int",-1,-1],ipayments_br_installment_seller_learn_more_link:[4145,"string","https://faq.whatsapp.com/253337763937767","https://faq.whatsapp.com/253337763937767"],is_capi_groups_alpha_enabled:[6473,"bool",!1,!1],is_coupon_button_enabled:[3630,"bool",!0,!0],is_internal_tester:[2945,"bool",!1,!0],is_lto_offer_enabled:[4693,"bool",!1,!0],is_message_secret_enabled:[1707,"bool",!1,!0],is_meta_employee:[1570,"bool",!1,!1],is_meta_employee_or_internal_tester:[1777,"bool",!1,!1],is_pmx_funnel_metrics_logging_enabled:[6816,"bool",!1,!0],is_pmx_hashed_msg_key_logging_enabled:[6837,"bool",!1,!0],is_roi_data_controller_metrics_enabled:[6748,"bool",!1,!0],keep_in_chat_receiver:[1352,"bool",!1,!1],keep_in_chat_sender:[1353,"bool",!1,!1],keep_in_chat_ui_content:[2005,"bool",!1,!1],keep_in_chat_undo_duration_limit:[1698,"int",2592e3,2592e3],key_hash_in_msg_send_and_media_upload_logging:[7773,"bool",!1,!0],kic_msg_send_expiry_sec:[4042,"int",86400,86400],kic_orphan_cleanup_days:[1673,"int",31,31],kill_switch_ctwa_ml_entry_point_config:[6215,"bool",!0,!1],language_and_time_web:[9410,"bool",!1,!1],large_number_format_uses_generic_plural:[5402,"bool",!0,!0],lazy_system_message_insertion_enabled:[9077,"bool",!1,!0],lid_group_send_lid_mention:[7439,"bool",!1,!1],lid_groups_aggregate_participant_change_system_message:[3804,"bool",!1,!1],lid_groups_create_lid_individual_chats:[3876,"bool",!1,!1],lid_groups_handle_server_addressing_mode:[3688,"bool",!1,!0],lid_groups_message_send_validation:[4162,"bool",!1,!0],lid_groups_new_group_creation:[3645,"bool",!1,!1],lid_groups_outgoing_explicit_address_mode:[3803,"bool",!1,!0],lid_migration_for_biz_app_enabled:[9652,"bool",!1,!1],lid_migration_notifications_enabled:[8785,"bool",!1,!1],lid_one_on_one_migration_enabled:[9435,"bool",!1,!1],lid_one_to_one_migration_outgoing_stanzas:[9987,"int",0,0],lid_outgoing_msg_attach_meta_tag:[5623,"bool",!1,!1],lid_status_create_individual_lid_chats:[6978,"bool",!1,!1],lid_status_send_enabled:[6791,"bool",!1,!1],lift_me_up_m1:[8e3,"bool",!1,!0],lift_me_up_m2:[8596,"bool",!1,!1],link_preview_shimmer_enabled:[4205,"bool",!1,!1],link_preview_wait_time:[2566,"int",7,7],lists_consumer_enabled:[9598,"bool",!1,!1],lists_feature_enabled:[10313,"bool",!1,!1],lists_labels_migration_enabled:[9597,"bool",!1,!1],log_clock_skew:[1190,"bool",!1,!1],lottie_sticker_rendering_killswitch:[8743,"bool",!1,!1],low_cache_hit_rate_media_types:[4836,"string","ptt,audio,document,ppic","ptt,audio,document,ppic"],lthash_check_hours:[1104,"int",0,0],lto_offer_media_aspect_ratio:[5073,"float",.800000011920929,.800000011920929],maiba_1p_status:[6566,"int",0,0],mark_as_action:[2936,"bool",!1,!0],max_message_per_chunk_count_tuning_enabled:[7897,"int",5e3,5e3],max_participants_in_group_queries:[6267,"int",5e4,5e4],max_pinned_chats_count:[7489,"int",3,3],max_pixels_size_allowed_for_image:[4538,"int",921600,921600],maximum_group_size_for_rcat:[2915,"int",100,100],md_app_state_critical_data_processing_logging:[1187,"bool",!1,!0],md_app_state_gate_D34336913:[1379,"bool",!1,!1],md_app_state_report_md_sync_mutation_stats:[1221,"bool",!1,!0],md_icdc_enabled:[309,"bool",!1,!1],md_icdc_hash_length:[310,"int",10,10],md_link_device_with_phone_number_enabled:[2734,"bool",!1,!1],md_link_device_with_phone_number_force_enabled:[3693,"bool",!1,!1],md_migration_experience:[861,"int",2,2],md_offline_v2_m2_enabled:[1517,"int",10,10],md_syncd_24_hour_time_format_sync_enabled:[1612,"bool",!1,!1],md_syncd_primary_version_sync_enabled:[1993,"bool",!1,!1],media_autodownload_audio_max_size:[6040,"int",524288,524288],media_autodownload_gif_as_image_max_size:[6041,"int",524288,524288],media_engagement_logging_enabled:[3787,"bool",!1,!1],media_large_file_awareness_popup_enabled:[3061,"bool",!1,!0],media_large_file_awareness_popup_file_size_in_MB:[3115,"int",2048,2048],media_picker_select_limit:[2614,"int",30,30],media_picker_select_limit_new:[2693,"int",30,30],media_reupload_limit_mb:[1098,"int",100,100],media_sender_client_logging_enabled:[3491,"bool",!1,!0],media_sent_as_doc_thumb_blur_radius:[6249,"int",2,2],media_sent_as_doc_thumbnail_max_edge:[6003,"int",100,100],media_sharing_team_holdout_h1_2024:[6972,"bool",!1,!1],media_sharing_team_holdout_h2_2024:[9797,"bool",!1,!1],media_upload_prekeys_fetch_enabled:[907,"bool",!1,!0],media_viewer_default_reaction_enabled:[9486,"bool",!1,!1],media_viewer_reaction_enabled:[7859,"bool",!1,!0],media_viewer_replies_enabled:[7860,"bool",!1,!0],member_name_tag_enabled:[4233,"bool",!1,!0],member_suggested_group_fetch_sync_version:[6600,"int",0,0],member_suggested_group_push:[6601,"bool",!1,!1],message_association_infra_enabled:[8783,"bool",!1,!1],message_count_logging_md_enabled:[1135,"bool",!1,!1],message_edit_bubble_animation:[4325,"bool",!1,!1],message_edit_client_entry_point_limit_seconds:[3272,"int",900,900],message_edit_receive:[2189,"bool",!1,!0],message_edit_send:[2190,"bool",!1,!0],message_edit_window_duration_seconds:[2983,"int",1200,1200],message_level_reporting:[535,"bool",!1,!0],message_partial_selection:[8502,"bool",!1,!1],message_quick_reply:[1623,"bool",!1,!1],messaging_experience_team_holdout_h2_2024:[9798,"bool",!1,!1],meta_variants_view_enabled:[8798,"bool",!1,!1],meta_verified_badge_education_vai_content:[7976,"bool",!1,!0],meta_verified_newsletter_enabled:[6618,"bool",!1,!0],metaai_dosa:[10248,"bool",!1,!1],mex_group_flags:[6725,"int",0,0],mex_group_get_group_info:[7653,"bool",!1,!1],mex_group_get_group_info_by_invite_code:[9428,"bool",!1,!1],mex_group_get_group_info_mode:[8179,"int",0,0],mex_group_get_subgroups:[7598,"bool",!1,!1],mex_group_migration_enabled:[6724,"bool",!1,!1],mex_group_query_invite_link:[7908,"bool",!1,!1],mex_group_set_allow_non_admin_subgroup_creation:[7609,"bool",!1,!1],mex_groups_batch_get_group_info:[10805,"bool",!1,!1],mex_groups_get_linked_subgroup:[10797,"bool",!1,!1],mex_groups_get_participating_groups:[10118,"bool",!1,!1],mex_native_client_enabled:[5437,"bool",!1,!1],mex_newsletter_flags:[3605,"int",0,0],mex_newsletter_killswitch:[3604,"bool",!1,!1],mex_phase3_enabled:[2249,"bool",!1,!1],mex_phase3_status_flags:[2250,"int",0,0],mex_usync_about_status:[9524,"bool",!1,!0],mex_usync_biz_query:[9732,"bool",!1,!1],mex_usync_ddm_query:[9731,"bool",!1,!1],mex_usync_devices_query:[9733,"bool",!1,!1],mex_usync_lid_query:[8420,"bool",!1,!1],mex_usync_picture_query:[9736,"bool",!1,!1],mex_usync_username_query:[8421,"bool",!1,!0],minimum_percentage_to_proactive_distribute_sender_keys:[2860,"int",200,50],mm_log_links_clicked_in_message_body:[10097,"bool",!1,!1],mm_message_level_feedback_analytics_enabled:[10667,"bool",!1,!1],mm_message_level_feedback_enabled:[10011,"bool",!1,!1],mm_message_level_feedback_not_interested_menu_enabled:[10668,"bool",!1,!1],mm_message_level_feedback_server_undo_enabled:[10749,"bool",!1,!1],mm_message_level_feedback_text_override:[10669,"string","",""],mms_hot_content_timespan_in_seconds:[2136,"int",0,0],mms_vcache_aggregation_enabled:[2134,"bool",!1,!1],more_reactions_option:[1322,"bool",!1,!1],more_reactions_option_desktop_beta_rollout:[1759,"bool",!0,!0],mpm_nfm_forwarding_enabled:[2909,"bool",!1,!1],msgd_drop_device_notifications:[3806,"bool",!1,!1],multi_select_from_chat_list:[2312,"bool",!1,!0],mute_always_show_notification_action:[3156,"bool",!1,!0],mute_dialog_description:[3155,"bool",!1,!0],native_commerce_threads_logging_enabled:[1034,"bool",!1,!0],native_contact_companion_change_enabled:[7301,"bool",!1,!0],native_shop_preview_enabled:[636,"bool",!1,!0],newsletter_admin_invite_tos_id:[6498,"string","20610101","20610101"],newsletter_admin_invite_tos_id_smb_web:[6536,"string","20610104","20610104"],newsletter_all_tos_disabled:[6133,"bool",!1,!1],newsletter_creation_enabled:[3607,"bool",!1,!1],newsletter_creation_nux_id:[3835,"string","20601218","20601218"],newsletter_creation_nux_version_v2:[5457,"int",1,1],newsletter_creation_tos_id:[3834,"string","20601217","20601217"],newsletter_creation_tos_id_smb_web:[5598,"string","20601217","20601217"],newsletter_creation_tos_version_v2:[5456,"int",1,1],newsletter_enabled:[3385,"bool",!1,!1],newsletter_media_autodownload_jitter_multiplier:[4369,"int",5e3,1e3],newsletter_media_autodownload_mode:[3778,"int",3,3],newsletter_media_autodownload_queue_max_concurrency:[4370,"int",5,5],newsletter_media_priority_queue_incoming_max_size:[4479,"int",32,32],newsletter_reporting_enabled:[3148,"bool",!1,!0],newsletter_suspend_enabled:[3149,"bool",!1,!0],newsletter_tos_notice_id:[3810,"string","20601216","20601216"],newsletter_tos_notice_id_smb_web:[5597,"string","20601216","20601216"],newsletter_tos_notice_version:[5448,"int",1,1],nfm_rendering_enabled:[760,"bool",!1,!1],nl_crt_df_gid:[3618,"string","","120363080354356818"],nl_df_gid:[3617,"string","",""],no_delete_message_time_limit:[1011,"bool",!1,!1],non_blocking_resume_from_open_tab_enabled:[3191,"bool",!1,!1],non_blocking_resume_from_open_tab_signal_enabled:[3622,"bool",!1,!1],non_message_data_request_logging_enabled:[2573,"bool",!1,!0],note_to_self:[1967,"bool",!1,!0],note_to_self_entry_point:[2630,"bool",!1,!0],notification_permission_deeplink_enabled:[7911,"bool",!1,!1],noyb_opt_out_flag:[3488,"bool",!1,!1],num_days_before_device_expiry_check:[731,"int",7,7],num_days_hosted_device_signed_identity_signature_expiration:[2461,"int",90,90],num_days_key_index_list_expiration:[730,"int",35,35],nux_sync:[1343,"bool",!1,!0],offline_resume_orphan_addons_with_failed_parents:[9107,"bool",!1,!1],order_bizhome_badging_enabled:[5814,"bool",!1,!0],order_details_custom_item_enabled:[1176,"bool",!1,!0],order_details_from_cart_enabled:[1107,"bool",!1,!0],order_details_from_catalog_enabled:[1212,"bool",!1,!0],order_details_payment_instructions_enabled:[1595,"bool",!1,!0],order_details_payment_instructions_sync_enabled:[6670,"bool",!1,!1],order_details_payment_options:[1767,"string",'{"payment_options":[{"type":"JioPay","url_regex_list":["^https://www.jio.com/.*$","^https://t.jio/.*$","^http://tiny.jio.com/.*$"],"title":{"name":"jiopay_title","default_text":"Pay on Jio.com"},"subtitle":{"name":"jiopay_subtitle","default_text":"Go to Jio.com website"},"button":{"name":"jiopay_button","default_text":"Proceed to Jio.com"}}]}','{"payment_options":[{"type":"JioPay","url_regex_list":["^https://www.jio.com/.*$","^https://t.jio/.*$","^http://tiny.jio.com/.*$"],"title":{"name":"jiopay_title","default_text":"Pay on Jio.com"},"subtitle":{"name":"jiopay_subtitle","default_text":"Go to Jio.com website"},"button":{"name":"jiopay_button","default_text":"Proceed to Jio.com"}}]}'],order_details_payment_protection_link:[3014,"string","https://faq.whatsapp.com/725152392426717","https://faq.whatsapp.com/725152392426717"],order_details_quick_pay:[1600,"string",'{"allowed_product_type":"none"}','{"allowed_product_type":"none"}'],order_details_total_maximum_value:[1684,"float",5e8,5e8],order_details_total_minimum_value:[1683,"int",0,0],order_details_total_order_minimum_value:[1719,"float",1,1],order_management_enabled:[1188,"bool",!1,!1],order_messages_ephemeral_exception_enabled:[3240,"bool",!1,!0],order_payment_amount_detection_enabled:[6151,"bool",!1,!1],order_show_payment_request_on_payment_amount_detection_enabled:[6167,"bool",!1,!1],order_statuses_revamp_m1_enabled:[5770,"bool",!1,!0],orders_expansion_paying_enabled:[3771,"bool",!1,!1],orders_expansion_receiver_countries_allowed:[3690,"string","",""],orders_from_cart_without_price_enabled:[8511,"bool",!1,!1],orders_two_fold_confirmation_enabled:[7238,"bool",!1,!1],original_quality_data_warning_max_mb:[3306,"int",16,16],original_quality_image_min_edge:[3068,"int",2560,2560],original_quality_minimum_elements_to_show_data_warning_dialog:[3613,"int",20,20],original_quality_show_data_warning_dialog:[3307,"bool",!1,!0],otp_mask_linked_devices:[6673,"bool",!1,!0],otp_mask_linked_devices_learn_more_link:[7550,"string","https://faq.whatsapp.com/372839278914311","https://faq.whatsapp.com/372839278914311"],otp_ttl_inject_receipt_enabled:[3710,"bool",!1,!0],out_of_sync_disappearing_messages_logging:[2561,"bool",!1,!0],pairless_logging_attribution_window:[3017,"int",7,7],parent_group_admins_limit:[1655,"int",20,20],parent_group_allow_member_added_groups_default_on_creation:[4530,"bool",!1,!0],parent_group_allow_member_added_groups_m1:[3829,"bool",!1,!0],parent_group_allow_member_added_groups_m2:[4184,"bool",!1,!0],parent_group_allow_member_suggest_existing_m3_receiver:[5078,"bool",!1,!0],parent_group_allow_member_suggest_existing_m3_sender:[5077,"bool",!1,!0],parent_group_announcement_comment_subscription_enabled:[4729,"bool",!1,!1],parent_group_announcement_comments_banner:[5656,"bool",!1,!0],parent_group_announcement_comments_enabled:[4727,"bool",!1,!0],parent_group_announcement_comments_history_sync_receiver_enabled:[5813,"bool",!1,!1],parent_group_announcement_comments_participant_limit:[4728,"int",1024,1024],parent_group_announcement_comments_receiver_enabled:[5141,"bool",!1,!0],parent_group_announcement_comments_receiver_validation_killswitch:[6416,"bool",!1,!1],parent_group_announcement_comments_sender_use_lid:[5660,"bool",!1,!1],parent_group_create_enabled_for_smb_on_web:[2206,"bool",!1,!0],parent_group_create_privacy:[2356,"bool",!1,!0],parent_group_directory_enabled:[3795,"bool",!1,!0],parent_group_enhanced_description_enabled:[3154,"bool",!1,!0],parent_group_home_header_actions_enabled:[3267,"bool",!1,!1],parent_group_improve_subgroup_activation_variant:[8062,"int",0,0],parent_group_info_updates_enabled:[3616,"bool",!1,!1],parent_group_join_request_system_enabled:[5109,"bool",!1,!1],parent_group_link_limit:[1238,"int",100,100],parent_group_link_limit_community_creation:[1990,"int",10,20],parent_group_member_can_add_default_everyone_enabled:[5385,"bool",!1,!1],parent_group_member_can_add_enabled:[4654,"bool",!1,!1],parent_group_min_participants_for_group_entry_point:[2382,"int",20,1],parent_group_no_disclaimer:[2447,"bool",!1,!0],parent_group_no_subgroup_requirement:[3167,"bool",!1,!0],parent_group_remove_orphaned_members:[3079,"bool",!1,!0],parent_group_subgroup_filter:[3147,"bool",!1,!1],parent_group_tap_to_add_enabled:[2446,"bool",!1,!0],parent_group_tap_to_request_enabled:[2436,"bool",!1,!0],parent_group_view_enabled:[982,"bool",!1,!0],parent_group_view_enabled_for_smb_on_web:[2205,"bool",!1,!0],payment_stickers_render_enabled:[812,"bool",!1,!1],payments_br_content_optimization_variant:[4248,"int",0,0],payments_br_copy_pix_code_api_merchant_enabled:[9017,"bool",!1,!1],payments_br_force_copy_pix_cta_enabled:[8953,"bool",!1,!1],payments_br_info_architecture_orders_hub_enabled:[4976,"bool",!1,!1],payments_br_installment_buyer_learn_more_link:[4144,"string","https://faq.whatsapp.com/1134168457974360","https://faq.whatsapp.com/1134168457974360"],payments_br_installment_seller_learn_more_link:[4254,"string","https://faq.whatsapp.com/253337763937767","https://faq.whatsapp.com/253337763937767"],payments_br_merchant_psp_account_status_sync:[9076,"bool",!1,!1],payments_br_pix_phase_1_seller_enabled:[4781,"bool",!1,!1],payments_br_pix_phase_1_seller_sync_enabled:[7024,"bool",!1,!1],payments_br_pix_phase_2_seller_enabled:[5861,"bool",!1,!1],payments_br_pix_quick_reply_enabled:[7857,"bool",!1,!1],payments_br_supported_payment_method_seller_enabled:[5862,"bool",!1,!1],payments_expressive_backgrounds_enabled:[605,"bool",!1,!0],payments_info_architecture_orders_hub_enabled:[5414,"bool",!1,!1],payments_link_to_lite_consumer_enabled:[3051,"bool",!1,!0],payments_merchant_global_orders_value_props_banner_enabled:[3744,"bool",!1,!0],payments_merchant_global_orders_value_props_banner_logging_enabled:[5255,"bool",!0,!0],pdf_auto_start_interval_seconds:[3479,"int",86400,30],pdf_client_driven_rollout_enabled:[4679,"bool",!1,!0],pdf_external_deeplink_enabled:[4100,"bool",!1,!0],pdf_max_download_jitter_time_seconds:[4680,"int",180,180],pdf_md_support_enabled:[4779,"bool",!1,!0],per_send_hd_video_setting_enabled:[3935,"bool",!1,!0],per_send_hd_video_setting_for_groups_enabled:[4138,"bool",!1,!0],persisted_profile_name:[3366,"bool",!1,!1],pinned_messages_m0:[3138,"bool",!0,!0],pinned_messages_m1_receiver:[3139,"bool",!0,!0],pinned_messages_m1_sender:[3140,"bool",!0,!0],pinned_messages_m1_sender_debug_expiry_duration_secs:[3813,"int",86400,86400],pinned_messages_m2:[3141,"bool",!1,!1],pinned_messages_m2_image_thumbnail:[7467,"bool",!1,!1],pinned_messages_m2_pin_max:[3732,"int",1,1],pinned_messages_sender_short_expiry_durations_enabled:[4432,"bool",!1,!1],pinned_messsages_m1_receiver_first_time_server_ts_storage:[5474,"bool",!0,!0],placeholder_chat_open_group_fetch:[3644,"bool",!1,!1],placeholder_chat_open_group_fetch_size_limit:[3749,"int",33,65],placeholder_message_key_hash_logging:[2639,"bool",!1,!0],placeholder_message_resend:[3579,"bool",!1,!1],placeholder_message_resend_maximum_days_limit:[3639,"int",14,14],played_self_enabled:[361,"bool",!1,!1],plm_products_max_batch_fetch_size:[464,"int",18,18],pnh_1on1_lid_expected:[3469,"bool",!1,!0],pnh_1on1_report_lid_message_send:[4178,"bool",!1,!1],pnh_cag_block_lid_in_limbo:[2962,"bool",!0,!0],pnh_cag_disable_polls_group_size:[5056,"int",1e4,1e4],pnh_cag_disable_reactions_group_size:[4495,"int",1e4,1e4],pnh_cag_future_proof_banner:[2433,"bool",!1,!1],pnh_cag_show_masked_members:[2346,"bool",!1,!1],pnh_cag_upgrade:[2304,"int",0,0],pnh_companion_history_sync_lid_chat:[3481,"bool",!1,!0],pnh_copy_identity_keys_and_devices:[4476,"bool",!1,!0],pnh_ctwa:[1823,"bool",!1,!1],pnh_ctwa_consumer_ui:[6355,"bool",!0,!0],pnh_ctwa_mat_crashlog:[3691,"bool",!1,!1],pnh_ctwa_show_privacy_system_msg:[6336,"bool",!0,!0],pnh_group_lid:[2507,"int",0,0],pnh_historical_mapping_retention_seconds:[1429,"int",7776e3,7776e3],pnh_identity_verification_v3:[2751,"bool",!1,!1],pnh_identity_verification_v3_pn_generation:[3458,"bool",!1,!1],pnh_pn_for_lid_chat_sync:[3062,"bool",!1,!0],pnh_prevent_undefined_lid_chat_origin:[3872,"bool",!1,!1],pnh_split_thread_case1_detection:[2939,"bool",!1,!0],pnh_split_threads_detection:[2479,"bool",!1,!1],pnh_sync_identity_keys_and_devices:[4533,"bool",!1,!0],poll_a11y_enabled:[2390,"bool",!1,!0],poll_animations_enabled:[5753,"bool",!1,!0],poll_chatlist_preview_enabled:[2720,"bool",!1,!0],poll_cleanup_days:[1410,"int",31,31],poll_creation_cag_enabled:[2738,"bool",!1,!1],poll_creation_enabled:[1394,"bool",!1,!1],poll_creation_one_on_one_chats_enabled:[2194,"bool",!1,!1],poll_name_length:[1406,"int",255,255],poll_offline_accuracy:[1409,"int",30,30],poll_option_count:[1408,"int",12,12],poll_option_length:[1407,"int",100,100],poll_receiving_cag_enabled:[2737,"bool",!1,!1],poll_receiving_enabled:[1395,"bool",!1,!1],poll_result_details_view_enabled:[1948,"bool",!0,!0],poll_result_snapshot_message_receiver_enabled:[10414,"bool",!1,!0],poll_update_drop_unknowns:[6662,"bool",!1,!1],poll_vote_processing_enabled:[1541,"bool",!1,!1],polls_fast_follow_enabled:[2661,"bool",!0,!0],polls_notification_enabled:[3158,"bool",!0,!0],polls_reply_support_enabled:[2663,"bool",!1,!0],polls_search_support_enabled:[2662,"bool",!1,!0],polls_single_option_control_enabled:[3050,"bool",!1,!0],polls_single_option_receiver_control_enabled:[3437,"bool",!0,!0],polls_single_option_reciever_control_enabled:[3434,"bool",!0,!0],polls_single_option_sender_control_enabled:[3433,"bool",!1,!0],portrait_thumb_enabled_chat:[1961,"bool",!1,!0],portrait_thumb_enabled_status:[1962,"bool",!1,!0],post_status_in_companion:[4905,"bool",!1,!1],prekey_fetch_iq_for_missing_devices_enabled:[2193,"bool",!1,!1],prekey_fetch_iq_pnh_lid_enabled:[3103,"bool",!1,!1],premium_blue_enabled:[5318,"bool",!1,!1],prevent_creating_unintentional_one_on_one_chat:[10757,"bool",!1,!0],primary_feature_sync:[1063,"bool",!1,!0],privacy_allow_contacts_except:[808,"bool",!1,!1],privacy_disable_link_previews:[7955,"bool",!1,!0],privacy_narrative_v1:[1071,"bool",!1,!1],privacy_tip_expiration_min:[4214,"int",10080,10080],privacy_tips_callers_build:[3996,"bool",!1,!1],privacy_tips_groups_build:[3995,"bool",!1,!1],privacy_tips_killswitch:[4314,"bool",!1,!1],privacy_tips_profile_build:[3998,"bool",!1,!1],privacy_tips_status_build:[3997,"bool",!1,!1],privacy_token_sending_on_all_1_on_1_messages:[10518,"bool",!1,!1],private_stats_biz_view_logging_enabled:[904,"bool",!1,!1],proactive_distribute_sender_keys_enabled:[2757,"bool",!1,!0],product_catalog_qpl_direct_connection_status_logging_enabled:[2024,"bool",!1,!0],product_catalog_qpl_logging_enabled:[2003,"bool",!1,!0],product_search_m1_enabled:[1678,"bool",!1,!0],profile_photo_rings_for_status_enabled:[1533,"bool",!1,!0],profile_photo_rings_for_status_on_web_enabled:[2512,"bool",!1,!0],profile_picture_deeplink_enabled:[7634,"bool",!1,!1],project_pdf_enabled:[2575,"bool",!1,!0],ptt_button_toggle_cooldown:[5384,"int",0,0],ptt_conversation_waveform:[637,"bool",!1,!0],ptt_draft_enabled:[777,"bool",!1,!0],ptt_pausable_enabled:[871,"bool",!1,!0],ptt_remember_play_position:[952,"bool",!1,!0],ptt_transcription_enabled:[2890,"bool",!1,!0],ptt_waveform_send:[746,"bool",!1,!0],ptv_autoplay_enabled:[3482,"bool",!0,!0],ptv_autoplay_loop_limit:[3483,"int",3,3],ptv_button_animation_enabled:[5317,"bool",!1,!0],ptv_button_persistence_enabled:[4549,"bool",!1,!1],ptv_button_redesign_version:[5507,"int",102,102],ptv_button_reset_minimize_threshold:[5386,"int",-1,-1],ptv_button_tooltip_animation_enabled:[5292,"bool",!1,!0],ptv_max_duration_seconds:[3356,"int",60,60],ptv_nux_enabled:[4548,"bool",!1,!0],ptv_receiving_enabled:[3355,"bool",!1,!0],ptv_recording_countdown_interval:[5412,"int",500,500],ptv_sending_enabled:[3354,"bool",!1,!0],ptv_setting:[5418,"bool",!1,!1],ptv_setting_duration_threshold_seconds:[5483,"int",604800,604800],ptv_setting_sends_threshold:[5419,"int",-1,-1],qm_lean_msg:[1645,"bool",!1,!1],qp_campaign_client_enabled:[3536,"bool",!1,!1],qp_edit_profile_banner_surface_enabled:[7549,"bool",!1,!0],qp_migration_to_graphql_enabled:[7551,"bool",!1,!1],qp_push_notifications_enabled:[4200,"bool",!1,!1],qpl_enabled:[212,"bool",!1,!0],qpl_initial_upload_delay:[1223,"int",5,1],qpl_sampling_as_string:[466,"string",'json:{"sampling":[]}','json:{"sampling":[]}'],qpl_upload_delay:[215,"int",1440,1],quantity_controls_enabled:[1480,"bool",!1,!0],query_verified_name_when_msg_differs:[2549,"bool",!0,!0],query_visible_messages_in_chat_index_enabled:[10257,"bool",!1,!1],quick_mute_enabled:[2765,"bool",!1,!1],quick_promotion_banner_client_consumer_enabled:[8408,"bool",!1,!1],quick_promotion_banner_client_enabled:[3712,"bool",!1,!1],quick_promotion_settings_banner_client_enabled:[10707,"bool",!1,!1],rabbit_enabled:[3603,"bool",!1,!1],rbi_change_delete_behavior_block_report_flows:[6187,"bool",!1,!0],rbi_pre_tick_report:[9871,"bool",!1,!1],rbi_revamped_block_report_dialog_design:[6186,"bool",!1,!0],rbi_show_consistent_block_dialog_all_entry_points:[6185,"bool",!1,!0],reaction_cleanup_days:[987,"int",31,31],reaction_history_sync:[1179,"bool",!1,!1],reactions_allowlisted_channels:[4699,"string","","120363144141162927,120363160538286018"],reactions_animations:[1361,"bool",!1,!0],reactions_animations_simple:[1485,"bool",!1,!0],reactions_announcement_only:[1150,"bool",!1,!1],reactions_chat_preview:[1605,"bool",!1,!0],reactions_keyboard_hides_three_flags:[1792,"bool",!1,!1],reactions_keyboard_hides_three_flags_desktop_beta_rollout:[1796,"bool",!1,!1],reactions_panel_prekeys_fetch_enabled:[1828,"bool",!1,!0],reactions_receive:[827,"bool",!1,!0],reactions_send:[828,"bool",!1,!0],reactions_skin_tone_aggregation:[1593,"bool",!1,!1],receive_sticker_pack:[10419,"bool",!1,!0],recent_emojis_sync:[3198,"bool",!1,!1],recent_sticker_rollout_phase:[1829,"int",4,4],recommended_channels_background_refresh:[4309,"int",144e5,18e5],recommended_channels_cache_max_ttl:[4308,"int",0,0],recommended_channels_fetch_limit:[5205,"int",20,20],remove_bot_invoke_futureproof_wrapping:[10646,"bool",!1,!1],remove_optional_debug_info:[8036,"bool",!1,!1],remove_single_emoji_bubble_background_enabled:[9083,"bool",!1,!1],replies_in_cag_m2_album:[10688,"bool",!1,!0],report_block_classification_logging_enabled:[5245,"bool",!1,!0],report_block_improvements_for_groups_enabled:[8327,"bool",!1,!0],report_string_comprehension:[3032,"bool",!1,!0],report_to_admin_enabled:[3696,"bool",!1,!0],report_to_admin_kill_switch:[3695,"bool",!1,!0],residence_region_connecticut_aa:[10850,"bool",!1,!1],residence_region_connecticut_prod_aa:[8513,"bool",!1,!1],residence_region_internal_connecticut:[8480,"bool",!1,!1],residence_region_maine_aa:[10809,"bool",!1,!1],residence_region_massachusetts_aa:[10810,"bool",!1,!1],residence_region_new_hampshire_aa:[10811,"bool",!1,!1],residence_region_new_jersey_aa:[10812,"bool",!1,!1],residence_region_new_york_aa:[10813,"bool",!1,!1],residence_region_north_east_aa:[10763,"bool",!1,!1],residence_region_ontario_prod_aa:[8518,"bool",!1,!1],residence_region_pennsylvania_aa:[10814,"bool",!1,!1],residence_region_rhode_island_aa:[10815,"bool",!1,!1],residence_region_texas_prod_aa:[9294,"bool",!1,!1],residence_region_vermont_aa:[10816,"bool",!1,!1],retry_receipt_error_code_enabled:[3750,"bool",!1,!0],revokes_logging_unsampled:[1865,"bool",!0,!0],reword_subject_to_group_name_enabled:[3088,"bool",!1,!0],row_buyer_order_revamp_m0_enabled:[4893,"bool",!1,!0],row_buyer_order_revamp_m0_nux_banner_enabled:[5518,"bool",!1,!0],rt_clean_reporting_tag:[6723,"int",-1,-1],rt_clean_reporting_token:[9567,"int",-1,-1],rt_drop_message_invalid_type:[5793,"bool",!1,!1],rt_receive_reporting_tag:[5718,"bool",!0,!0],rt_report_token_from_inclusion_list:[9818,"bool",!1,!1],rt_send_reporting_data:[9070,"bool",!1,!0],rt_send_reporting_tag:[5717,"bool",!1,!1],rt_sender_reporting_token_version:[8860,"int",0,1],rt_store_reporting_data:[8859,"bool",!1,!0],rt_sync_reporting_tag:[6578,"bool",!0,!0],rt_validate_message_type:[5716,"bool",!1,!0],rt_validate_reporting_token:[8858,"bool",!1,!0],saga_copy:[7044,"bool",!1,!0],saga_enabled:[5626,"bool",!1,!1],saga_mvp_enabled:[5881,"bool",!1,!1],saga_mvp_value:[6296,"int",0,0],saga_v1_carousel:[10609,"bool",!1,!1],saga_v1_enabled:[9942,"bool",!1,!1],saga_v1_nux_enabled:[9944,"bool",!1,!1],saga_v1_reengagement_enabled:[9924,"bool",!1,!1],saga_v1_test_enabled:[7752,"bool",!1,!1],saga_v1_test_ready:[8613,"bool",!1,!1],search_the_web_dialog_redesign:[8171,"bool",!1,!0],search_the_web_image_search:[9547,"bool",!1,!0],search_the_web_text_search:[9548,"bool",!1,!0],search_the_web_url_offer:[8473,"bool",!1,!0],seller_order_payment_request_enabled:[5574,"bool",!1,!1],seller_orders_management_revamp:[5190,"bool",!1,!1],send_cag_member_revokes_as_GDM:[3069,"bool",!0,!0],send_cart_cta_long_button_alternative_text_type:[2153,"int",0,0],send_cart_cta_long_button_enabled:[1660,"bool",!0,!0],send_document_thumb_in_message_disabled:[253,"bool",!1,!0],send_extended_nack_enabled:[3280,"bool",!1,!1],send_invalid_protobuf_nack_failure_reason:[9174,"bool",!1,!1],send_link_thumb_in_message_disabled:[254,"bool",!1,!1],send_message_drop_nack_enabled:[3741,"bool",!1,!1],send_message_drop_old_couter_nack_enabled:[4213,"bool",!1,!1],send_reaction_from_details_pane:[2170,"bool",!1,!1],send_status_thumb_in_message_disabled:[252,"bool",!1,!1],send_thumb_mms_status_pjpeg_image:[7835,"bool",!1,!1],sender_key_expired_logging_enabled:[1185,"bool",!1,!1],sender_revoke_ui:[1335,"bool",!1,!0],sender_revoke_window_receiver:[1334,"bool",!1,!0],sender_revoke_window_sender:[1333,"bool",!1,!0],sending_addon_msg_v2:[10317,"bool",!1,!1],sending_optimistic_addons:[10732,"bool",!1,!1],sending_optimistic_pin_message:[10733,"bool",!1,!1],sending_optimistic_poll_vote:[10734,"bool",!1,!1],server_groups_receive_mex_property_update_notif:[7632,"bool",!1,!0],service_improvement_opt_out_flag:[3664,"bool",!1,!1],settings_search:[2800,"bool",!1,!1],share_own_pn_sync:[3070,"bool",!1,!0],share_payment_status_with_api_merchant:[10873,"bool",!1,!1],share_phone_number_on_cart_send_to_direct_connection_biz_enabled:[1867,"bool",!0,!0],shops_storefront_url_format:[1054,"string","https://www.facebook.com/%s/shop/","https://www.facebook.com/%s/shop/"],should_fix_multiple_lid_messages_d61076979:[10632,"bool",!1,!0],should_override_id_for_lid_addons_d61164253:[10633,"bool",!1,!0],should_use_lid_orphan_alternate_reaction_d61074491:[10634,"bool",!1,!0],show_bottom_sheet_gallery:[3844,"bool",!1,!0],show_channels_not_available_dialog:[3880,"bool",!1,!0],show_shops_sunset_banner:[1949,"bool",!1,!0],silent_group_exit:[1527,"bool",!1,!0],silent_group_exit_db:[1613,"bool",!1,!0],silent_group_exit_dialog:[1597,"bool",!1,!0],silent_group_exit_past_participants:[1528,"bool",!1,!0],silent_group_exit_sync:[1598,"bool",!1,!0],similar_channels_in_channel_details_enabled:[7473,"bool",!1,!0],similar_channels_in_thread_on_follow_enabled:[7472,"bool",!1,!0],similar_channels_max_limit:[7559,"int",10,10],similar_channels_min_limit:[7560,"int",4,4],single_e2ee_session_migration_state_incoming:[7821,"int",0,0],single_e2ee_session_migration_state_outgoing:[7820,"int",0,0],single_emoji_logging_enabled:[9669,"bool",!1,!1],smart_filters_enabled:[1015,"bool",!1,!0],smart_filters_enabled_consumer:[1287,"bool",!1,!0],smb_agent_auto_reply_toggle_ui_v2:[10454,"bool",!1,!1],smb_agent_chat_list_indicator_enabled:[10455,"bool",!1,!1],smb_agent_thread_control_notification_enabled:[10456,"bool",!1,!1],smb_billing_enabled:[1583,"bool",!1,!1],smb_billing_logging_enabled:[1672,"bool",!1,!0],smb_billing_premium_access_config:[1619,"string","",""],smb_biz_profile_custom_url:[2582,"bool",!1,!1],smb_biz_profile_custom_url_notifications:[2583,"bool",!1,!1],smb_biz_profile_logging_enabled:[1255,"bool",!1,!0],smb_broadcast_logging_enabled:[1253,"bool",!1,!0],smb_business_action_bar_enabled:[5719,"bool",!1,!1],smb_business_action_bar_exposed:[6184,"bool",!1,!0],smb_capi_coexistence_enabled:[2588,"bool",!1,!0],smb_catalog_collection_items_reordering_enabled:[1794,"bool",!0,!0],smb_catalog_collections_reordering_enabled:[1688,"bool",!0,!0],smb_catalog_graphql_add_product:[7322,"bool",!1,!1],smb_catalog_graphql_appeal_collection:[7330,"bool",!1,!1],smb_catalog_graphql_appeal_product:[7326,"bool",!1,!1],smb_catalog_graphql_create_collection:[7319,"bool",!1,!1],smb_catalog_graphql_create_product_catalog:[7320,"bool",!1,!1],smb_catalog_graphql_delete_collection:[7329,"bool",!1,!1],smb_catalog_graphql_edit_product:[7323,"bool",!1,!1],smb_catalog_graphql_get_collection:[7331,"bool",!1,!1],smb_catalog_graphql_get_product:[7324,"bool",!1,!1],smb_catalog_graphql_get_product_catalog:[7321,"bool",!1,!1],smb_catalog_graphql_get_product_list:[8799,"bool",!1,!1],smb_catalog_graphql_get_single_collection:[7332,"bool",!1,!1],smb_catalog_graphql_report_product:[7325,"bool",!1,!1],smb_catalog_graphql_update_collection:[7327,"bool",!1,!1],smb_catalog_graphql_update_collection_list:[7328,"bool",!1,!1],smb_catalog_messages_download_thumbnail_on_receiver_enabled:[3247,"bool",!1,!1],smb_catkit_query_version:[1229,"int",1,1],smb_click_to_chat_logging_enabled:[1252,"bool",!1,!0],smb_client_side_linkshim_enabled:[2633,"bool",!0,!0],smb_client_side_linkshim_signed_regexp:[2634,"string","https:\\/\\/n\\.wl\\.co\\/[^/]*\\/[^/]*\\/(.*)$","https:\\/\\/n\\.wl\\.co\\/[^/]*\\/[^/]*\\/(.*)$"],smb_collections_appeal_flow_enabled:[724,"bool",!1,!1],smb_collections_enabled:[451,"bool",!1,!0],smb_ctwa_billing_enabled:[2158,"bool",!1,!1],smb_custom_url_display_v2_enabled:[1849,"bool",!1,!0],smb_custom_url_get_user_graphql_migration_enabled:[10519,"bool",!1,!0],smb_dcp_enabled:[1701,"bool",!1,!1],smb_ecommerce_compliance_india_m4:[1003,"bool",!1,!0],smb_ecommerce_compliance_india_m4_5:[1192,"bool",!1,!0],smb_get_subscriptions_graphql_migration_enabled:[10441,"bool",!1,!0],smb_graphql_to_fetch_qp_enabled:[7645,"bool",!1,!1],smb_graphql_to_fetch_qp_frequency_mins:[7646,"int",1320,5],smb_graphql_to_fetch_qp_surface_ids:[7647,"string","",""],smb_graphql_token_recovery_during_account_recovery_enabled:[9197,"bool",!1,!1],smb_hide_unsupported_currency_price:[1203,"bool",!1,!0],smb_label_improvements_m2:[5463,"bool",!1,!0],smb_label_improvements_reordering:[6162,"bool",!1,!0],smb_labels_ctwa_data_sharing:[5009,"bool",!1,!0],smb_marketing_message_body_links_enabled:[10336,"bool",!1,!0],smb_marketing_message_fmx_enabled:[9804,"bool",!1,!1],smb_marketing_messages_enabled:[3046,"bool",!1,!0],smb_marketing_messages_product_ids:[3113,"string","",""],smb_md_agent_chat_assignment_chat_list_new_label_enabled:[2976,"bool",!1,!0],smb_md_agent_chat_assignment_chats_reorder_on_chat_assignment_enabled:[2787,"bool",!1,!0],smb_md_agent_chat_assignment_chats_reorder_on_chat_unassignment_enabled:[2788,"bool",!1,!0],smb_md_agent_chat_assignment_enabled:[1798,"bool",!1,!0],smb_md_agent_chat_assignment_notifications_enabled:[2908,"bool",!1,!0],smb_md_agent_chat_assignment_nux_impressions:[2207,"int",0,3],smb_md_agent_chat_assignment_system_messages_chats_reorder_enabled:[2778,"bool",!1,!0],smb_md_agent_chat_assignment_system_messages_enabled:[2157,"bool",!1,!0],smb_md_agent_chat_assignment_system_messages_logging_v2_enabled:[2709,"bool",!1,!0],smb_melon_display_enabled:[1483,"bool",!1,!1],smb_melon_logging_enabled:[1669,"bool",!1,!0],smb_melon_management_enabled:[1484,"bool",!1,!1],smb_message_label_deprecation_chat_list_banner_cool_down_seconds:[10219,"int",432e3,432e3],smb_message_label_deprecation_max_volume:[10220,"int",100,0],smb_message_label_deprecation_phase:[10165,"int",0,0],smb_message_label_deprecation_target_date:[10221,"string","2024-09-19","2024-09-19"],smb_message_labels_ctwa_data_sharing:[5324,"bool",!1,!0],smb_meta_verified_context_card:[8313,"bool",!1,!0],smb_meta_verified_deeplink_handling_enabled:[10469,"bool",!1,!0],smb_meta_verified_tier_additional_logging_enabled:[9803,"bool",!1,!0],smb_meta_verified_tier_logging_enabled:[8758,"bool",!1,!0],smb_multi_device_agents_enabled:[1438,"bool",!1,!0],smb_multi_device_agents_logging_V2_enabled:[1897,"bool",!1,!0],smb_multi_device_agents_logging_enabled:[1671,"bool",!1,!0],smb_multi_device_awareness:[1074,"bool",!1,!0],smb_multi_device_message_attribution_enabled:[1981,"bool",!1,!0],smb_mv_custom_url_scaling_enabled:[8359,"bool",!1,!0],smb_mv_profile_edit_web_content_enabled:[8212,"bool",!1,!0],smb_notes_content_max_limit:[10272,"int",5e3,5e3],smb_notes_privacy_string:[9843,"int",2,2],smb_notes_v1_enabled:[7710,"bool",!1,!1],smb_orange_enabled:[1469,"bool",!1,!1],smb_orders_graphql_get_order_info:[9030,"bool",!1,!1],smb_orders_graphql_place_order:[9031,"bool",!1,!1],smb_orders_graphql_refresh_cart:[9032,"bool",!1,!1],smb_payment_links_logging_enabled:[9213,"bool",!1,!0],smb_payment_links_psps:[8970,"string","{}","{}"],smb_payment_links_seller_logging_enabled:[10389,"bool",!1,!1],smb_payment_links_url_regex_list:[8969,"string","{}","{}"],smb_phase_out_not_a_business:[1263,"bool",!1,!0],smb_phase_out_not_a_business_V2:[1771,"bool",!1,!0],smb_premium_md_limit_perf_tracker_enabled:[1591,"bool",!1,!0],smb_premium_messages_click_logging_enabled:[4657,"bool",!1,!0],smb_premium_messages_interactivity_catalog_cta_consumer_enabled:[4957,"bool",!1,!0],smb_premium_messages_spam_report_enabled:[4005,"bool",!1,!0],smb_premium_messages_url_cta_alert_dialog_enabled:[5044,"bool",!0,!0],smb_product_price_label:[1417,"string","control","control"],smb_quick_replies_v2_enabled:[875,"bool",!1,!1],smb_rambutan_enabled:[3124,"bool",!1,!0],smb_rambutan_product_ids:[3125,"string","",""],smb_registration_flow_logging_enabled:[1256,"bool",!1,!0],smb_status_logging_enabled:[1254,"bool",!1,!0],smb_store_label_usage_enabled:[10618,"bool",!1,!1],smb_store_label_usage_max_label_count:[10619,"int",0,0],smb_temp_cover_photo_privacy_messaging:[1913,"bool",!1,!0],smb_threads_logging_enabled:[1251,"bool",!1,!0],smb_token_recovery_full_screen_enabled:[9829,"bool",!1,!1],smb_token_recovery_not_me_enabled:[9828,"bool",!1,!1],smb_user_journey_logging_migration:[10999,"bool",!1,!1],smba_premium_messages_insights_v2_trackable_link_domain:[6626,"string","w.meta.me","w.meta.me"],smba_premium_messages_interactivity_catalog_cta_consumer_enabled:[4942,"bool",!1,!0],smba_premium_messages_leaving_wa_content:[6693,"bool",!0,!0],soox_long_press_duration_ms:[4922,"int",500,500],soox_media_send_keep_old_button:[4297,"bool",!1,!1],state_filter_aa_texas:[7572,"bool",!1,!1],status_caption_link_detection_enabled:[2032,"bool",!1,!0],status_deeplink_enabled:[7965,"bool",!1,!0],status_from_me_unseen_enabled:[2039,"bool",!1,!0],status_future_proofing:[9522,"bool",!1,!1],status_inline_link_preview_enabled:[1522,"bool",!1,!0],status_likes_logging_enabled:[8728,"bool",!1,!0],status_mentions_in_chat_receiver:[9816,"bool",!1,!0],status_mentions_in_chat_sender:[9817,"bool",!1,!0],status_mentions_receiver:[7869,"bool",!1,!1],status_poster_side_gating_enabled:[8742,"bool",!1,!0],status_ptt_max_duration_second:[6845,"int",30,30],status_quick_reply_enabled:[1455,"bool",!1,!0],status_quick_reply_receiver_changes_enabled:[1974,"bool",!1,!0],status_ranking_poster_side_gating_enabled:[9453,"bool",!1,!1],status_ranking_top_contacts_count:[9921,"int",30,30],status_reaction_emojis:[1852,"string","[128525, 128514, 128558, 128546, 128591, 128079, 127881, 128175]","[128525, 128514, 128558, 128546, 128591, 128079, 127881, 128175]"],status_reply_received_logging_enabled:[1859,"bool",!1,!0],status_stop_download_at_image_quality_scan_index:[6623,"int",2,2],status_thumb_ignore_thumb_in_message:[8122,"bool",!0,!0],status_thumb_mms_aspect_fill:[8218,"bool",!1,!1],status_thumb_mms_compression:[8216,"float",.47999998927116394,.47999998927116394],status_thumb_mms_max_edge_size:[8217,"float",96,96],status_thumb_prefer_progressive_over_mms:[8123,"bool",!1,!1],status_thumb_progressive_scan_number:[8523,"int",1,1],status_video_max_duration:[175,"int",30,30],status_video_max_duration_second:[6728,"int",30,30],status_view_error_type_logging_enabled:[2086,"bool",!0,!0],sticker_md_favorite_stickers_enabled:[864,"bool",!1,!1],stop_abprops_traffic_in_serverprops_response:[315,"bool",!1,!1],support_message_feedback_enabled:[7080,"bool",!1,!1],support_ticket_data_collection_improvements:[4150,"bool",!1,!1],support_ticket_device_log_retention_period_days:[5553,"int",3,3],support_ticket_stop_uploading_device_logs:[4242,"bool",!1,!1],supported_encoder_decoder_logging_enabled:[5977,"bool",!1,!0],supports_keep_in_chat_in_cag:[2844,"bool",!0,!0],suspicious_link_rtlo_unlinkified:[8028,"bool",!0,!0],sync_archive_v2_setting:[736,"bool",!1,!1],syncd_additional_mutations_count:[2777,"int",1,1],syncd_do_not_fatal_on_snapshot_mac_mismatch_in_patches:[2007,"bool",!1,!1],syncd_periodic_sync_days:[1400,"int",0,0],syncd_report_key_stats:[3301,"bool",!1,!0],syncd_validate_index_mac_for_incoming_patch:[10417,"bool",!1,!0],system_msg_numbers_fb_branded:[1035,"string","16325551023,16505434800,16503130062,16507885324,16508620604,16504228206,447710173736,16315551023,16505361212,16508129150,16315555102,16315558723,16505212669,16507885280,19032707825,0","16325551023,16505434800,16503130062,16507885324,16508620604,16504228206,447710173736,16315551023,16505361212,16508129150,16315555102,16315558723,16505212669,16507885280,19032707825,0"],system_msg_numbers_fb_inc:[1036,"string","",""],system_msg_text_styling:[6246,"bool",!1,!1],system_msg_truncation:[6247,"bool",!1,!1],system_msg_update:[5189,"bool",!1,!1],tam_attachment_cache_compaction_enabled:[838,"bool",!1,!1],tctoken_duration:[865,"int",604800,604800],tctoken_duration_sender:[996,"int",604800,604800],tctoken_num_buckets:[909,"int",4,4],tctoken_num_buckets_sender:[997,"int",4,4],template_button_improvements_on:[3444,"bool",!0,!0],text_status_ttl_seconds_allowlist:[6153,"string","86400,259200,604800,1209600","86400,259200,604800,1209600"],text_status_url_logging_enabled:[1851,"bool",!1,!0],threads_logging_observe_list_enabled:[1168,"bool",!1,!0],top_menu_redesign_enabled:[4545,"bool",!1,!1],tos_3_client_gating_enabled:[791,"bool",!1,!1],tos_client_state_fetch_enabled:[877,"bool",!1,!1],tos_client_state_fetch_iteration:[908,"int",0,0],trusted_contacts:[794,"bool",!1,!1],trusted_contacts_chat_state_optimization:[1566,"string","old","old"],trusted_contacts_op:[1687,"bool",!1,!0],trusted_contacts_reciprocity:[1437,"bool",!1,!1],trusted_contacts_sender:[995,"bool",!1,!1],trusted_contacts_ti:[922,"bool",!1,!1],ts_bit_array_enabled:[3859,"bool",!1,!1],ts_business_interactions_enabled:[6715,"bool",!1,!1],ts_external_enabled:[4928,"bool",!1,!1],ts_navigation_channels_enabled:[5040,"bool",!1,!0],ts_navigation_community_enabled:[3858,"bool",!1,!1],ts_session_duration_ms:[3860,"int",6e5,6e5],ts_smb_catalog:[6547,"bool",!1,!1],ts_surface_killswitch:[4929,"int",0,0],ug_chat_banner_enabled:[5002,"bool",!1,!0],ug_chat_banner_visibility_max_seconds:[5016,"int",432e3,432e3],ug_chat_banner_visibility_min_seconds:[5119,"int",0,0],ugc_enabled:[3011,"bool",!1,!0],ugc_participant_limit:[4118,"int",5,5],ugr_enabled:[3010,"bool",!1,!0],unified_e2ee_backup_page:[5113,"bool",!1,!1],unified_e2ee_bottomsheet:[5111,"bool",!1,!1],unified_e2ee_copy_build:[3999,"bool",!1,!1],unified_e2ee_copy_launch:[4869,"bool",!1,!1],unified_e2ee_security_page:[5112,"bool",!1,!1],unified_e2ee_ui_build:[4e3,"bool",!1,!1],unified_e2ee_ui_launch:[4870,"bool",!1,!1],unified_otp_copy_code_url:[3827,"string","https://www.whatsapp.com/otp/copy/","https://www.whatsapp.com/otp/copy/"],unified_otp_retriever_url:[3828,"string","https://www.whatsapp.com/otp/code","https://www.whatsapp.com/otp/code"],unified_pin_addon_infra_enabled:[4475,"bool",!1,!1],unified_pin_addon_table_enabled:[8356,"bool",!1,!1],unified_poll_vote_addon_infra_enabled:[6046,"bool",!1,!1],unified_reaction_addon_infra_enabled:[6877,"bool",!1,!1],unified_session_log_ts_event:[9611,"bool",!1,!1],unified_session_version:[8581,"int",0,0],unified_user_profile_navigation_enabled:[3523,"bool",!1,!1],updates_remote_search_enabled:[5851,"bool",!0,!0],updates_search_enabled:[5769,"bool",!1,!0],updates_tab_backtests_hide_channels_in_overflow:[10993,"bool",!1,!1],updates_tab_backtests_remove_channel_badging:[10994,"bool",!1,!1],updates_tab_backtests_remove_reco_unit:[10995,"bool",!1,!1],updates_tab_backtests_tab_name_status:[10996,"bool",!1,!1],updates_tab_backtests_tab_no_channels_in_search:[10997,"bool",!1,!1],updates_tab_open_channels_fields_logging_enabled:[5489,"bool",!1,!0],updates_tab_search_logging_enabled:[5909,"bool",!1,!0],updates_tab_status_large_tiles_enabled:[7516,"bool",!1,!1],updates_tab_status_tiles_min_visible_count:[9124,"float",3.5,3.5],updates_tab_status_tiles_mode_no_newsletters:[8522,"int",0,0],updates_tab_status_tiles_mode_with_newsletters:[8521,"int",0,0],updates_tab_status_tiles_qpl_logging_enabled:[8842,"bool",!1,!0],upload_document_thumb_mms_enabled:[247,"bool",!1,!0],upload_status_thumb_mms_enabled:[246,"bool",!1,!1],url_send_receive_logging_enabled:[2430,"bool",!1,!0],us_aa:[7671,"bool",!1,!1],use_appdata_stanza_on_receiver:[2795,"bool",!1,!1],use_appdata_stanza_on_sender:[2796,"bool",!1,!1],use_mex_to_fetch_bot_list:[7240,"bool",!1,!1],use_per_chat_wallpaper:[9756,"bool",!1,!1],username_1on1_chat:[4748,"bool",!1,!1],username_change:[4747,"bool",!1,!1],username_chat_search_debounce_interval_ms:[7512,"int",1500,1500],username_chat_start_mode_enabled:[10976,"bool",!0,!0],username_contact_display:[4746,"bool",!1,!1],username_creation:[4745,"bool",!1,!1],username_group_participants:[4749,"bool",!1,!1],username_mex_account_sync_enabled:[8763,"bool",!1,!1],username_security_code_generation:[7468,"bool",!1,!0],username_security_code_verification:[7469,"bool",!1,!1],username_usync:[5290,"bool",!1,!1],usync_add_lid_protocol_for_missing_lid:[10180,"bool",!1,!0],usync_lid:[1892,"bool",!1,!1],utm_tracking_enabled:[2895,"bool",!1,!1],utm_tracking_expiration_hours:[2896,"int",24,24],v_id_deprecation_enabled:[2334,"bool",!0,!0],vcard_max_size_kb:[6736,"int",5e3,5e3],verified_badge_in_chats_list_enabled:[9292,"bool",!0,!0],verified_business_numbers:[3969,"string","{}",'{"paytm":[917531875318, 919004990049]}'],verified_business_numbers_for_business_name_update:[4006,"string","","917531875318,919004990049"],video_stream_buffering_ui_enabled:[2167,"bool",!1,!0],view_all_replies:[4036,"bool",!1,!1],view_all_replies_enabled:[4215,"bool",!1,!1],view_once_sp_receiver:[1710,"bool",!1,!1],view_once_sp_sender:[1711,"bool",!1,!1],visible_message_drop_placeholder_enabled_internal_only:[7287,"bool",!1,!0],vname_cert_deprecation:[5001,"bool",!1,!0],vname_logging_and_debugging:[3961,"bool",!0,!0],voice_status_receipt_enabled:[1875,"bool",!0,!0],voice_status_receipt_on_web_enabled:[2513,"bool",!1,!0],wa_biz_tool_logging_improvement:[3169,"bool",!1,!0],wa_ctwa_action_banner_logging_enabled:[1866,"bool",!1,!0],wa_ctwa_action_banner_logging_enabled_web:[4022,"bool",!1,!0],wa_ctwa_ads_action_banner_enabled:[1495,"bool",!1,!0],wa_ctwa_ads_action_banner_enabled_web:[4021,"bool",!1,!0],wa_ctwa_web_dc_logging_enabled:[2487,"bool",!1,!1],wa_ctwa_web_entrypoint_home_banner_enabled:[3096,"bool",!1,!1],wa_ctwa_web_entrypoint_home_header_dropdown_enabled:[3095,"bool",!1,!1],wa_ctwa_web_entrypoint_home_header_enabled:[3058,"bool",!1,!1],wa_ctwa_web_entrypoint_home_icon_tooltip_enabled:[3242,"bool",!1,!1],wa_ctwa_web_entrypoint_manage_ads_home_header_dropdown_enabled:[3376,"bool",!1,!1],wa_ctwa_web_entrypoint_pageless_enabled:[3293,"bool",!1,!1],wa_ctwa_web_fetch_linked_accounts_enabled:[3294,"bool",!1,!1],wa_ctwa_web_hide_ad_context_if_soft_dismissed_in_primary:[9729,"bool",!1,!1],wa_ctwa_web_thread_ad_attribution_enabled:[2898,"bool",!1,!1],wa_web_business_tools_top_card_enabled:[8191,"bool",!1,!1],wa_web_calling_deep_link_error:[10051,"bool",!0,!0],wa_web_parse_always_show_ad_attribution:[8804,"bool",!1,!1],wa_web_skip_contact_sorting_in_offline_resume:[10823,"bool",!1,!1],wabai_consent_cooldown:[5746,"int",-1,-1],wabai_consent_required:[5747,"bool",!1,!1],wabai_marketing_message_content_gen_enabled:[5224,"bool",!1,!1],wabai_message_feedback_enabled:[5215,"bool",!1,!1],wabai_message_rendering_enabled:[4873,"bool",!1,!1],wabba_enabled:[10024,"bool",!1,!1],wabba_receiver_enabled:[10970,"bool",!1,!1],wae_metadata_integrity_timeout_minutes:[4849,"int",5,5],wallpaper_upload:[10015,"bool",!1,!1],wamo_sub_admin_enabled:[7829,"bool",!1,!1],wamo_sub_admin_enabled_v2:[11020,"bool",!1,!1],wamo_sub_consumer_enabled:[7828,"bool",!1,!1],wamo_sub_consumer_enabled_v2:[11021,"bool",!1,!1],wds_radius_and_casing:[3350,"bool",!1,!0],web_2fa:[1195,"bool",!1,!1],web_abort_building_e2e_proto_on_error:[5388,"bool",!1,!0],web_abort_decrypting_e2e_on_error:[5389,"bool",!1,!0],web_abort_preacks_on_disconnect_enabled:[9212,"bool",!1,!1],web_abprop_block_catalog_creation_ecommerce_compliance_india:[894,"bool",!1,!1],web_abprop_business_profile_incomplete_nux_banner:[710,"bool",!1,!1],web_abprop_business_profile_refresh_cover_photo_view_enabled:[766,"bool",!1,!1],web_abprop_business_profile_refresh_edit_cover_photo_enabled:[765,"bool",!1,!1],web_abprop_business_profile_refresh_linked_account_enabled:[764,"bool",!1,!1],web_abprop_business_profile_refresh_linked_accounts_killswitch:[1351,"bool",!1,!1],web_abprop_business_profile_refresh_status_enabled:[763,"bool",!1,!1],web_abprop_catalog_icon_on_top_bar:[734,"bool",!1,!1],web_abprop_chatd_login_cookie_enabled:[1371,"bool",!1,!1],web_abprop_click_nux_banner_migration:[712,"bool",!1,!1],web_abprop_collections_display:[584,"bool",!1,!1],web_abprop_collections_management:[585,"bool",!1,!1],web_abprop_collections_nux_banner:[741,"bool",!1,!1],web_abprop_core_wam_runtime:[1753,"bool",!1,!1],web_abprop_ctwa_context_compose_enabled:[591,"bool",!1,!1],web_abprop_device_agnostic_voip:[1675,"bool",!1,!1],web_abprop_direct_connection_md:[869,"bool",!1,!0],web_abprop_document_resume_upload:[1247,"bool",!1,!1],web_abprop_drop_full_history_sync:[600,"bool",!1,!1],web_abprop_ecommerce_compliance_india:[717,"bool",!1,!1],web_abprop_edit_ecommerce_compliance_india:[826,"bool",!1,!1],web_abprop_emoji_experimental_api:[1932,"bool",!1,!1],web_abprop_ephemeral_messages_allowed_values:[593,"string","604800","604800"],web_abprop_group_description_length:[592,"int",0,0],web_abprop_large_files_encryption_optimization:[1086,"bool",!1,!1],web_abprop_media_links_docs_search:[2063,"bool",!1,!1],web_abprop_mute_notifications_on_app_focus:[1824,"bool",!1,!0],web_abprop_nux_cart_interstitial:[761,"bool",!1,!1],web_abprop_product_catalog_nux_banner:[711,"bool",!1,!1],web_abprop_remove_downloaded_files:[1496,"bool",!1,!1],web_abprop_remove_uploaded_files:[1481,"bool",!1,!1],web_abprop_screen_lock_enabled:[1680,"bool",!1,!1],web_abprop_screen_lock_show_learn_more_link:[4790,"bool",!1,!1],web_abprop_screen_sharing_enabled:[1189,"bool",!1,!1],web_abprop_skip_file_copy_on_attach:[1174,"bool",!1,!1],web_abprop_stateful_enumeration_enabled:[887,"bool",!0,!0],web_accidental_delete_for_me:[1752,"bool",!0,!0],web_account_table:[6534,"bool",!1,!1],web_adaptive_layout:[10898,"bool",!1,!1],web_adaptive_offline_resume_enabled:[1224,"bool",!1,!1],web_add_non_contacts_to_groups_enabled:[5677,"bool",!1,!1],web_address_capture_message_enabled:[1385,"bool",!1,!1],web_adv_logout_on_self_device_list_expired:[11011,"bool",!1,!1],web_animate_messages:[4952,"bool",!1,!1],web_animate_new_messages:[5523,"bool",!1,!0],web_anyone_can_add_group_setting_enabled:[5080,"bool",!1,!0],web_app_health_heartbeat_enabled:[7025,"bool",!1,!1],web_attach_menu_redesign:[4032,"bool",!1,!0],web_auto_mute_256_groups_confirmation:[2533,"bool",!1,!1],web_autodownload_stickers:[7422,"bool",!1,!0],web_background_sync_v2:[8782,"bool",!1,!1],web_batch_online_read_receipts_enabled:[6631,"bool",!1,!1],web_biz_tools_on_navbar_enabled:[5708,"bool",!1,!1],web_british_english_localization_enabled:[10664,"bool",!1,!1],web_browser_min_storage_quota:[3135,"int",5,5],web_browser_quota_threshold:[3134,"int",100,100],web_business_tools_drawer_enabled:[6803,"bool",!1,!1],web_butterbar_socket_reconnect_enabled:[7855,"bool",!1,!1],web_button_refresh:[10899,"bool",!1,!1],web_can_sw_unsubscribe_push_subscription:[9252,"bool",!1,!1],web_catalog_video_upload_enabled:[9670,"bool",!1,!0],web_catalog_video_view_enabled:[9671,"bool",!1,!0],web_catalog_video_view_fallback_enabled:[9672,"bool",!1,!0],web_chat_info_refresh:[10900,"bool",!1,!1],web_chat_list_panel_refresh:[11005,"bool",!1,!1],web_chat_with_unknown_contacts:[4670,"bool",!1,!1],web_chatlist_toggle:[1964,"bool",!1,!0],web_chatlock_enabled:[7047,"bool",!1,!1],web_clear_delete_keep_orphaned:[10722,"bool",!1,!1],web_client_pull_timeout_ms:[3890,"int",1e4,1e4],web_colors_refresh:[6663,"bool",!1,!1],web_column_data_serialization_enabled:[3970,"bool",!1,!1],web_comet_build_data_logging_verification:[8136,"bool",!1,!1],web_command_palette:[1726,"bool",!0,!0],web_command_palette_plugins:[5100,"bool",!1,!0],web_comments_receive_ui_enabled:[6682,"bool",!1,!1],web_comments_send_ui_enabled:[6683,"bool",!1,!1],web_comms_socket_reconnect_enabled:[7854,"bool",!1,!1],web_communities_general_chat_v_2:[8580,"bool",!1,!0],web_community_permissions_enabled:[9179,"bool",!1,!1],web_compose_box_refresh:[10901,"bool",!1,!1],web_composer_v2_m2_enabled:[8933,"bool",!1,!1],web_contact_form_show_articles:[5955,"bool",!1,!1],web_contacts_db_lid_migration_m2:[9198,"bool",!1,!1],web_contacts_db_lid_migration_m3:[11016,"bool",!1,!1],web_controlled_db_chat_update:[11018,"bool",!1,!0],web_conversation_panel_refresh:[10902,"bool",!1,!1],web_crypto_library_enabled:[2534,"bool",!1,!1],web_crypto_library_verification_enabled:[5320,"bool",!1,!1],web_crypto_library_with_queues_enabled:[4583,"bool",!1,!1],web_db_table_usage_enabled:[7073,"bool",!1,!1],web_default_pull_mode_enabled:[1355,"bool",!1,!1],web_delay_pp_until_offline_complete_enabled:[8134,"bool",!1,!1],web_deprecate_mms4_hash_based_download:[3152,"bool",!1,!0],web_design_refresh:[6665,"bool",!1,!1],web_design_refresh_hotpink:[6664,"bool",!1,!1],web_device_identity_lid_migration_cronjob:[7624,"bool",!1,!1],web_device_identity_lid_migration_read_using_lid:[7625,"bool",!1,!1],web_device_lid_migration_cronjob:[7704,"bool",!1,!1],web_device_lid_migration_read_using_lid:[7703,"bool",!1,!1],web_device_switching:[4792,"bool",!1,!0],web_device_sync_manager_enabled:[4024,"bool",!1,!1],web_device_sync_manager_group_enabled:[4453,"bool",!1,!1],web_disable_sw_on_safari_pwa:[7281,"bool",!1,!1],web_display_name_for_biz_vlevel_low_killswitch:[2716,"bool",!0,!0],web_display_name_for_enterprise_biz_vlevel_low_killswitch:[2715,"bool",!1,!1],web_draft_message_enabled:[4125,"bool",!1,!1],web_e2e_backfill_expire_time:[3234,"int",5,60],web_electron_active_reload:[2322,"bool",!0,!0],web_electron_deprecation_mac_appstore_stage_1_awareness:[5101,"bool",!0,!0],web_electron_deprecation_mac_appstore_stage_1_minimum_darwin_os:[9787,"int",20,20],web_electron_deprecation_mac_appstore_stage_2_expiry_delay:[5365,"int",0,0],web_electron_deprecation_mac_appstore_stage_2_expiry_kickoff:[5364,"bool",!1,!1],web_electron_deprecation_mac_minimum_darwin_os_compatible_with_catalyst:[9380,"int",20,20],web_electron_deprecation_mac_sideload_stage_1_awareness:[5018,"bool",!0,!0],web_electron_deprecation_mac_sideload_stage_1_bbar_dismiss_duration_days:[5294,"int",7,7],web_electron_deprecation_mac_sideload_stage_2_expiry_delay:[5020,"int",0,0],web_electron_deprecation_mac_sideload_stage_2_expiry_kickoff:[5019,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage1_awareness:[1985,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage2_compatible_expiry_delay:[1987,"int",0,0],web_electron_deprecation_windows_sideload_stage2_compatible_expiry_kickoff:[1986,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage2_incompatible_expiry_delay:[1989,"int",0,0],web_electron_deprecation_windows_sideload_stage2_incompatible_expiry_kickoff:[1988,"bool",!1,!1],web_empty_states_and_illustrations:[11006,"bool",!1,!1],web_enable_biz_catalog_view_ps_logging:[2056,"bool",!0,!0],web_enable_capi_support_chat:[4724,"bool",!1,!1],web_enable_hyperlinked_phone_numbers_ps_logging:[1401,"bool",!1,!1],web_enable_open_tab_pre_ack:[4483,"bool",!1,!1],web_enable_profile_pic_thumb_db_caching:[2018,"bool",!1,!1],web_enable_profile_pic_thumb_download_over_mms4:[4327,"bool",!0,!0],web_encryption_failed_message_resend:[3779,"bool",!1,!1],web_evolve_about_receive_enabled:[5346,"bool",!1,!1],web_evolve_about_send_enabled:[5347,"bool",!1,!1],web_expandable_side_nav:[10903,"bool",!1,!1],web_expression_panel_2:[8950,"bool",!1,!0],web_expression_panel_open:[8951,"bool",!1,!1],web_expression_panels:[3420,"bool",!1,!1],web_expression_panels_mitigations:[4951,"bool",!1,!0],web_expression_panels_outside_input:[6368,"bool",!1,!1],web_expression_panels_show_less_stickers:[5726,"bool",!1,!1],web_expression_panels_show_less_stickers_v_2:[8545,"bool",!1,!0],web_extra_lid_group_logging_attributes:[7145,"bool",!1,!1],web_favorite_stickers:[962,"bool",!1,!1],web_favorites_sync_enabled:[7404,"bool",!1,!1],web_file_streaming_upload:[2210,"bool",!1,!1],web_fix_media_conn_block_rule_parsing:[3455,"bool",!1,!1],web_flush_message_cache_before_sending_preacks_enabled:[8683,"bool",!1,!1],web_fp_reparsing_for_non_add_ons:[2231,"bool",!1,!1],web_gdpr_request_account_info_enabled:[1232,"bool",!1,!1],web_get_maybe_me_user_optimization_enabled:[1451,"bool",!1,!1],web_graphql_for_catalog_m1:[1205,"bool",!1,!1],web_group_profile_editor:[1745,"bool",!0,!0],web_group_profile_picture_stickers_label_fix:[4901,"bool",!1,!0],web_hd_media_global_setting_enabled:[9778,"bool",!1,!0],web_history_sync_allow_duplicate_in_bulk_error:[10842,"bool",!1,!0],web_history_sync_notification_handling_queue_v2:[5291,"bool",!1,!1],web_history_sync_ui:[1911,"bool",!1,!1],web_image_max_edge:[3042,"int",1600,1600],web_image_max_hd_edge:[3204,"int",2560,2560],web_improved_message_composer_enabled:[4973,"bool",!0,!0],web_improved_text_tool_enabled:[4669,"bool",!1,!1],web_inactive_receipts_v2:[7132,"bool",!1,!1],web_init_chat_batch_size:[1171,"int",100,100],web_init_chat_max_unread_message_count:[1172,"int",0,0],web_initial_sync_encrypted_msgs_storing:[4904,"bool",!1,!1],web_intern_dogfooding_upsell_content:[6860,"string","",""],web_intern_dogfooding_upsell_enabled:[6858,"bool",!1,!1],web_intern_dogfooding_upsell_snooze_duration:[6859,"int",86400,86400],web_internal_in_app_bug_reporting_enable:[4681,"bool",!1,!1],web_invalid_media_message_validation:[5165,"bool",!1,!0],web_invalid_message_count_validation:[5164,"bool",!1,!0],web_is_internal_user:[8079,"bool",!1,!0],web_jpeg_quality:[6619,"int",92,92],web_js_halt_active_ping_enabled:[9043,"bool",!1,!1],web_js_halt_active_ping_timeout:[9042,"int",200,200],web_jshalt_ping_and_reconnect_version:[8131,"int",0,0],web_kill_socket_on_jshalt_event_disabled:[7566,"bool",!1,!1],web_killswitch_s310872_mitigation:[2879,"bool",!1,!1],web_labels_editing_enabled:[6268,"bool",!1,!1],web_larger_link_previews:[8172,"bool",!1,!1],web_lazy_pull:[2814,"bool",!1,!1],web_lid_flush_mappings_in_message_cache_enabled:[9572,"bool",!1,!1],web_lid_groups_allow_reference_by_alternative_jid:[6836,"bool",!1,!0],web_lid_warmup_cache_before_resume:[9664,"bool",!1,!1],web_link_preview_sync_enabled:[2156,"bool",!1,!0],web_list_refresh:[10904,"bool",!1,!1],web_loading_screen_refresh:[11007,"bool",!1,!1],web_lru_cache_purge_logic_refactor:[1383,"bool",!1,!1],web_material_refresh:[6332,"bool",!1,!1],web_max_contacts_to_show_common_groups:[2264,"int",10,10],web_max_found_common_groups_displayed:[2268,"int",15,15],web_max_socket_loop_wait_time_sec:[10087,"int",900,900],web_md5_message_key:[3164,"bool",!1,!0],web_media_editor_blur_tool:[1816,"bool",!0,!0],web_media_editor_image_filter_enabled:[9146,"bool",!1,!1],web_media_editor_new_toolbar:[9251,"bool",!1,!1],web_media_editor_shape_tools_enabled:[9583,"bool",!1,!1],web_mediaretry_notification_nack_enabled:[4206,"bool",!1,!1],web_message_custom_aria_label:[2280,"bool",!1,!1],web_message_dedup_enabled:[6633,"bool",!1,!1],web_message_drop_bulk_db_operation_fallback_enabled:[7865,"bool",!1,!1],web_message_edit_processing_reply_messages:[3883,"bool",!0,!0],web_message_edit_receive_desktop_beta_rollout:[3723,"bool",!1,!1],web_message_edit_send_desktop_beta_rollout:[3724,"bool",!1,!1],web_message_list_a11y_redesign:[2016,"bool",!0,!0],web_message_list_a11y_redesign_beta_only:[2294,"bool",!0,!0],web_message_plugin_backend_registration_enabled:[2545,"bool",!1,!1],web_message_plugin_frontend_registration_enabled:[2793,"bool",!1,!1],web_message_processing_cache_size:[3728,"int",400,400],web_message_send_precalculate_icdc:[2801,"bool",!1,!0],web_message_table_index_rowid_optimization:[3279,"bool",!1,!1],web_messaging_drop_cleared_messages:[10648,"bool",!1,!1],web_migrate_message_decrypt_api:[6021,"bool",!1,!1],web_missed_call_notifications:[6807,"bool",!1,!1],web_mms4_media_conn_cache_enabled:[6591,"bool",!0,!0],web_modal_refresh:[11008,"bool",!1,!1],web_msg_sync_update_tunnel:[9747,"bool",!1,!1],web_msg_sync_update_tunnel_store_before_postprocess:[10063,"bool",!0,!0],web_msg_sync_update_tunnel_timeout_ms:[9956,"int",300,300],web_multi_skin_toned_emoji_picker:[1850,"bool",!1,!1],web_mutex_block_strategy:[9047,"int",0,0],web_mutex_ping_timeout_seconds:[7898,"int",10,10],web_native_fetch_media_download:[3031,"bool",!1,!1],web_new_group_member_search:[2220,"bool",!1,!1],web_non_blocking_fire_ui_update:[10795,"bool",!1,!1],web_non_blocking_offline_resume_max_message_count:[2508,"int",1e3,1e3],web_noncritical_history_sync_message_processing_break_iteration:[5106,"int",100,100],web_offline_dynamic_batch_config:[5297,"string",'{"version": "progressive", "multiplier": 0.25}','{"version": "progressive", "multiplier": 0.25}'],web_offline_dynamic_batch_size_enabled:[5271,"bool",!1,!0],web_offline_message_processor_timeout_seconds:[8406,"int",0,0],web_offline_msg_ui_throttled_update_enabled:[10957,"bool",!1,!1],web_offline_notification_priority:[4403,"bool",!1,!1],web_offline_progress_toastbar:[5410,"bool",!1,!0],web_offline_resume_m3_enabled:[1802,"bool",!1,!1],web_offline_resume_max_batch_size:[8006,"int",200,400],web_offline_resume_max_batch_size_enabled:[8065,"bool",!1,!0],web_offline_resume_qpl_enabled:[1773,"bool",!1,!1],web_offline_resume_update_opened_chat:[10926,"bool",!1,!1],web_offline_stage_manager_singleton_enabled:[10235,"bool",!1,!1],web_optimize_active_msg_range_offline_resume_enabled:[9575,"bool",!1,!0],web_optimized_handshake_flow_enabled:[7932,"bool",!1,!1],web_optimized_handshake_flow_v2_enabled:[8930,"bool",!1,!1],web_optimized_resume_handshake_enabled:[7805,"bool",!1,!1],web_orchestrator_enabled_version:[984,"string","bucket","bucket"],web_original_photo_quality_upload_enabled:[3136,"bool",!1,!1],web_other_items_on_navbar_enabled:[7732,"bool",!1,!1],web_otp_copy_code_disabled:[4330,"bool",!1,!1],web_page_load_qpl_enabled:[7658,"bool",!1,!0],web_passive_mode_message_cache_flush_wait_for_message_queue_enabled:[9582,"bool",!1,!1],web_payment_notifications_ack_kick_fix_enabled:[7546,"bool",!1,!1],web_pending_message_cache_enabled:[8353,"bool",!1,!0],web_persist_resend_group_msg_enabled:[8949,"bool",!1,!1],web_persist_resend_msg_enabled:[8846,"bool",!1,!1],web_poll_creation_desktop_beta_rollout:[2179,"bool",!1,!1],web_poll_receiving_desktop_beta_rollout:[2181,"bool",!1,!1],web_poll_spam_report:[2303,"bool",!1,!1],web_postpone_crashlogs_upload_in_offline_resume_enabled:[10082,"bool",!1,!1],web_postpone_qpl_upload_in_offline_resume_enabled:[10083,"bool",!1,!1],web_postpone_wam_upload_in_offline_resume_enabled:[10084,"bool",!1,!1],web_pre_acks_m2_enabled:[5520,"bool",!1,!1],web_pre_acks_m3_enabled:[5521,"bool",!1,!1],web_pre_acks_m3_receipts_enabled:[6438,"bool",!0,!0],web_prekeys_fetch_first_batch_size:[1373,"float",0,0],web_preload_chat_messages:[5079,"bool",!1,!0],web_premium_messages_interactivity_rendering_enabled:[4596,"bool",!1,!0],web_prevent_parallel_socket_connection_enabled:[7708,"bool",!1,!1],web_privacy_settings:[837,"bool",!1,!1],web_privacy_settings_v2:[1226,"bool",!1,!1],web_profile_picture_db_cache_disabled:[1757,"bool",!1,!1],web_promise_queue_wait_mutation_bug_fix:[9065,"bool",!1,!1],web_ps_v3_enabled:[1114,"bool",!1,!1],web_ptt_streamer_upload:[1902,"bool",!1,!0],web_push_notifications:[1643,"bool",!1,!0],web_push_notifications_receipt_handling_enabled:[5564,"bool",!1,!1],web_pwa_background_sync:[6656,"bool",!1,!1],web_pwa_background_sync_min_interval_hours:[6706,"int",24,24],web_quantity_controls_enabled:[1659,"bool",!1,!1],web_quick_reply_authoring:[1751,"bool",!1,!1],web_quoted_generate_msg_data:[5447,"bool",!1,!1],web_reaction_notification_via_add_on_api:[9933,"bool",!1,!0],web_reactions_send_desktop_beta_rollout:[1479,"bool",!0,!0],web_recalculate_app_state_sync_lthash:[7099,"bool",!1,!1],web_recent_sync_chunk_data_handling_worker:[8270,"bool",!1,!1],web_recent_sync_chunk_download_optimization:[7356,"bool",!1,!1],web_recent_sync_chunk_preprocess_optimization:[7876,"bool",!1,!1],web_recent_sync_handling_loop_restart_enabled:[5816,"bool",!1,!1],web_recent_sync_handling_loop_restart_v2_enabled:[6804,"bool",!1,!1],web_recent_sync_next_chunk_fetch_optimization:[7494,"bool",!1,!1],web_recent_sync_worker_compatible_handling:[7247,"bool",!1,!1],web_require_manual_reload_for_locale_change:[7894,"bool",!1,!1],web_reset_offline_batch_state:[6293,"bool",!0,!0],web_reset_offline_state_ondisconnect_enabled:[10872,"bool",!1,!1],web_resume_optimized_message_post_process_interval:[6229,"int",1e3,1e3],web_resume_optimized_message_post_processing_enabled:[5680,"bool",!1,!0],web_resume_optimized_read_receipt_send_active_chat:[5461,"bool",!1,!0],web_resume_optimized_read_receipt_send_interval:[5502,"int",500,500],web_retry_building_e2e_proto_on_error:[5939,"bool",!1,!1],web_rotate_sender_key_if_sent:[1329,"bool",!1,!1],web_screen_lock_max_retries:[2622,"int",10,10],web_search_bar_refresh:[10905,"bool",!1,!1],web_search_by_date_enabled:[4770,"bool",!1,!1],web_search_by_type_date_infra:[4768,"bool",!1,!1],web_search_by_type_enabled:[4769,"bool",!1,!1],web_send_invisible_msg_max_group_size:[1945,"int",1024,1024],web_send_invisible_msg_min_group_size:[1100,"int",128,128],web_send_invisible_msg_to_new_groups:[1099,"bool",!1,!1],web_send_message_context_in_outer_layer:[9202,"bool",!1,!0],web_send_only_active_receipts:[1868,"bool",!1,!0],web_send_optimistic_update:[10755,"string","'[]'",""],web_send_view_once_ptt_enabled:[6636,"bool",!1,!1],web_sha256_message_key:[3729,"bool",!0,!0],web_shop_storefront_message:[1053,"bool",!1,!1],web_should_fatal_on_missing_patch:[1461,"bool",!0,!0],web_should_not_wait_for_stop_push_handler_action:[9271,"bool",!1,!0],web_show_archived_starred_in_navbar_enabled:[8779,"bool",!0,!0],web_side_nav_refactor:[10906,"bool",!1,!1],web_single_signal_session_and_identity_read_using_lid:[8046,"bool",!1,!1],web_skip_expired_status_error:[6391,"bool",!1,!1],web_smb_label_reordering_m2_two_way:[6805,"bool",!1,!1],web_socket_fallback_url_enabled:[7858,"bool",!1,!1],web_socket_parallel_connection_enabled:[8019,"bool",!1,!1],web_socket_reconnect_enabled:[3892,"bool",!1,!1],web_start_backend_refactor:[6263,"bool",!1,!1],web_status_drawer_enabled:[5832,"bool",!1,!1],web_status_likes_receive_enabled:[8611,"bool",!1,!1],web_status_likes_send_enabled:[8612,"bool",!1,!1],web_status_muting_enabled:[6476,"bool",!1,!1],web_status_posting_enabled:[4404,"bool",!1,!1],web_status_posting_thumbnails_enabled:[9336,"bool",!1,!0],web_status_private_mentions_receive_enabled:[8610,"bool",!1,!1],web_status_private_mentions_send_enabled:[8609,"bool",!1,!1],web_status_psa:[873,"bool",!1,!1],web_status_psa_history_sync:[1095,"bool",!1,!1],web_sticker_download_m1:[9406,"bool",!1,!1],web_sticker_store:[930,"bool",!0,!0],web_sticker_suggestions_enable:[4726,"bool",!1,!1],web_sticky_hd_photo_setting_enabled:[8115,"bool",!1,!1],web_storage_version_squash_strategy:[9218,"int",0,0],web_store_quota_manager_enabled:[3133,"bool",!1,!1],web_syncd_fatal_fields_from_L1104589PRV2:[1808,"bool",!1,!1],web_syncd_max_mutations_to_process_during_resume:[1513,"int",1e3,1e3],web_syncd_mutation_lid_jid_resolution_enabled:[10635,"bool",!1,!0],web_tc_token_db_read_enabled:[5110,"bool",!1,!1],web_ui_redesign_m1_navbar_variant:[9426,"int",0,0],web_ui_refresh_m2:[10647,"bool",!1,!1],web_unified_flow:[1809,"int",0,0],web_unified_message_processing_enabled:[1633,"bool",!1,!1],web_unwrap_message_for_stanza_attributes:[9290,"bool",!1,!1],web_user_qualified_for_comet_build:[7151,"bool",!1,!1],web_validate_media_mime_type:[6316,"bool",!1,!1],web_view_mode_usage_enabled:[10856,"bool",!1,!1],web_wa_signal_enabled:[1225,"bool",!1,!1],web_wam_data_loss_mitigation:[8984,"bool",!1,!1],web_wam_data_loss_mitigation_buffering_duration:[9307,"int",5,5],web_wam_data_loss_mitigation_rotate_interval:[9308,"int",120,120],web_wam_finalize_buffers_when_full:[9500,"bool",!0,!0],web_wam_max_buffer_upload_size_bytes:[9501,"int",64e3,64e3],web_wam_v5_enabled:[1033,"bool",!1,!1],web_wasm_worker_enabled_www:[7924,"bool",!1,!1],web_worker_compatible_device_notification_handling:[6975,"bool",!1,!1],web_worker_compatible_profile_pic_notification_handling:[6974,"bool",!1,!1],web_youtube_rcat_chat_generation_enabled:[3044,"bool",!1,!0],web_youtube_rcat_consumption_enabled:[2957,"bool",!1,!0],webc_page_load_early_commit_enabled:[8458,"bool",!1,!1],welcome_msg_should_include_chat_state_metadata:[6361,"bool",!1,!1],whatsapp_authenticated_graphql_qpl_logging_enabled:[10462,"bool",!1,!1],whatsapp_vpv_logging_enabled:[9833,"bool",!1,!0],youtube_inline_playback_killswitch:[3522,"bool",!1,!1]};f.ABPropConfigs=a}),66);
__d("WAWebABProps",["WALogger","WAWebABPropsConfigs","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops] implementation needs to be set before its first access, config name: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops] config not defined, config name: ","."]);i=function(){return a};return a}var j=["parent_group_view_enabled","in_app_support_v2_number_prefixes","web_2fa","web_abprop_screen_lock_enabled","web_abprop_core_wam_runtime","web_offline_resume_qpl_enabled","disable_auto_download","direct_connection_business_numbers","community_admin_promotion_one_time_prompt","web_enable_profile_pic_thumb_db_caching","web_crypto_library_enabled","web_native_fetch_media_download","web_image_max_edge","web_store_quota_manager_enabled","wds_radius_and_casing","non_blocking_resume_from_open_tab_enabled","community_announcement_improvement_m2","column_serialization_perf_impact_test","web_design_refresh","web_material_refresh","web_socket_parallel_connection_enabled"],k=null;function a(a){var b=d("WAWebABPropsConfigs").ABPropConfigs[a];b==null&&d("WALogger").ERROR(i(),a);b[0];b[1];var e=b[2];b=b[3];b=e;if(k==null){!c("gkx")("26258")&&!j.includes(a)&&d("WALogger").WARN(h(),a);return b}a=(e=k(a))!=null?e:b;return a}function b(a){k=a}g.usedBeforeInitializationConfigs=j;g.getABPropConfigValue=a;g.setGetABPropConfigValueImpl=b}),98);
__d("WAWebUIRefreshGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("web_ui_refresh_m2")}function i(){return d("WAWebABProps").getABPropConfigValue("top_menu_redesign_enabled")||h()}function a(){return d("WAWebABProps").getABPropConfigValue("web_colors_refresh")||h()}function b(){return d("WAWebABProps").getABPropConfigValue("web_material_refresh")||h()}function c(){return d("WAWebABProps").getABPropConfigValue("web_chat_info_refresh")||h()}function e(){return d("WAWebABProps").getABPropConfigValue("web_chat_list_panel_refresh")||h()}function f(){return d("WAWebABProps").getABPropConfigValue("web_search_bar_refresh")||h()}function j(){return d("WAWebABProps").getABPropConfigValue("web_conversation_panel_refresh")||h()}function k(){return d("WAWebABProps").getABPropConfigValue("web_compose_box_refresh")||h()}function l(){return d("WAWebABProps").getABPropConfigValue("web_adaptive_layout")||h()}function m(){return d("WAWebABProps").getABPropConfigValue("web_list_refresh")||h()}function n(){return d("WAWebABProps").getABPropConfigValue("web_modal_refresh")||h()}function o(){return d("WAWebABProps").getABPropConfigValue("web_button_refresh")||h()}function p(){return d("WAWebABProps").getABPropConfigValue("web_loading_screen_refresh")||h()}function q(){return d("WAWebABProps").getABPropConfigValue("web_expandable_side_nav")||h()}function r(){return d("WAWebABProps").getABPropConfigValue("web_empty_states_and_illustrations")||h()}function s(){return d("WAWebABProps").getABPropConfigValue("web_side_nav_refactor")||h()}function t(){return d("WAWebABProps").getABPropConfigValue("web_other_items_on_navbar_enabled")&&h()}function u(){return d("WAWebABProps").getABPropConfigValue("web_chatlist_toggle")&&!i()}function v(){return d("WAWebABProps").getABPropConfigValue("web_modal_refresh")||h()}g.uiRefreshM2Enabled=h;g.uiRefreshM1Enabled=i;g.colorRefreshEnabled=a;g.materialRefreshEnabled=b;g.chatInfoRefreshEnabled=c;g.chatListPanelRefreshEnabled=e;g.searchBarRefreshEnabled=f;g.conversationPanelRefreshEnabled=j;g.composeBoxRefreshEnabled=k;g.adaptiveLayoutEnabled=l;g.listRefreshEnabled=m;g.modalRefreshEnabled=n;g.buttonRefreshEnabled=o;g.loadingScreenRefreshEnabled=p;g.expandableSideNavEnabled=q;g.emptyStateAndIllustrationRefreshEnabled=r;g.sideNavRefactorEnabled=s;g.sideNavSecondarySectionEnabled=t;g.webChatlistToggleEnabled=u;g.webModalRefreshEnabled=v}),98);
__d("WAWebUserPrefsGeneral",["$InternalEnum","WALogger","WAWebDbUsageApiConst","WAWebPrivacySettings","WAWebUIRefreshGatingUtils","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefs:removeUserSentMessageToChat"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefs:removeUserSentMessageToChat value in store is not an array"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefs:markUserSentMessageToChat"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefs:markUserSentMessageToChat value in store is not an array"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["setUserPrivacySettings: failed to set to indexedDB"]);l=function(){return a};return a}var m="light";function a(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.LAST_PUSHNAME,a)}function e(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LAST_PUSHNAME);return typeof a==="string"?a:null}function f(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.BROWSER_ID);return typeof a==="string"?a:null}function n(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.BROWSER_ID,a)}function o(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MOBILE_PLATFORM)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MOBILE_PLATFORM,a)});return q.apply(this,arguments)}function r(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SERVER_PROPS_ATTRIBUTES)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SERVER_PROPS_ATTRIBUTES,a)});return t.apply(this,arguments)}function u(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SERVER_PROPS)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SERVER_PROPS,a)});return w.apply(this,arguments)}function x(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.LAST_CHAT_MUTE_DURATION,a===Number.POSITIVE_INFINITY?"Infinity":a)}function y(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LAST_CHAT_MUTE_DURATION);return a==="Infinity"?Number.POSITIVE_INFINITY:typeof a==="number"?a:null}function z(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.THEME,a)}function A(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.THEME);return a==="light"||a==="dark"?a:m}function B(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.SYSTEM_THEME_MODE,a)}function C(){return c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.SYSTEM_THEME_MODE)!==!1}function D(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.LAST_SELECTED_COMPOSE_BOX_PANEL,a)}function E(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LAST_SELECTED_COMPOSE_BOX_PANEL)}function F(a){c("WAWebUserPrefsStore").setUser(a.toString(),!0)}function G(a){return c("WAWebUserPrefsStore").getUser(a.toString())===!0}function H(a,b,c){if(a==null)return;var d=a[0];a=a[1];if(typeof c==="string"){a=a[c];a!=null&&a===c&&(b[d]=a)}}function I(){var a={},b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS);if(b==null||typeof b!=="object")return a;H(["readReceipts",d("WAWebPrivacySettings").ALL_NONE],a,b.readReceipts);H(["groupAdd",d("WAWebPrivacySettings").VISIBILITY],a,b.groupAdd);H(["profilePicture",d("WAWebPrivacySettings").VISIBILITY],a,b.profilePicture);H(["about",d("WAWebPrivacySettings").VISIBILITY],a,b.about);H(["lastSeen",d("WAWebPrivacySettings").VISIBILITY],a,b.lastSeen);H(["online",d("WAWebPrivacySettings").ONLINE_VISIBILITY],a,b.online);H(["callAdd",d("WAWebPrivacySettings").CALL_ADD],a,b.callAdd);H(["messages",d("WAWebPrivacySettings").ALL_CONTACTS],a,b.messages);b.disableLinkPreviews!=null&&(a.disableLinkPreviews=b.disableLinkPreviews===!0);return a}function J(a){d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS,a)["catch"](function(a){d("WALogger").ERROR(l()).devConsole(a)}),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS,a)}function K(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_PHOTOS)!==!1}function aa(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_PHOTOS,a)}function ba(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_AUDIO)!==!1}function ca(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_AUDIO,a)}function da(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_VIDEOS)===!0}function ea(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_VIDEOS,a)}function fa(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_DOCUMENTS)===!0}function ga(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AUTO_DOWNLOAD_DOCUMENTS,a)}function ha(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GROUP_ASSIGNED_COLOR+"-"+a.toString()),e={};if(b==null||typeof b!=="object")return e;Object.keys(b).forEach(function(a){var c=b[a];typeof c==="number"&&(e[a]=c)});return e}function ia(a,b){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GROUP_ASSIGNED_COLOR+"-"+a.toString(),b)}function ja(a,b){L(a),M(b)}function L(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.MEDIA_VOLUME,a)}function M(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.MEDIA_MUTE,a)}function ka(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.MEDIA_VOLUME);return{volume:typeof a==="number"?a:null,muted:c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.MEDIA_MUTE)===!0}}var N=1;function la(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.PTT_PLAYBACK_RATE);if(typeof a!=="number")return N;else if(a===1||a===2)return a;else if(Math.abs(a-1.5)<Number.EPSILON)return 1.5;return N}function ma(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.PTT_PLAYBACK_RATE,a)}function na(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LAST_STATUS_USAGE);return typeof a==="number"?a:null}function oa(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.LAST_STATUS_USAGE,Date.now())}function pa(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE)===!0}function qa(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE,a)}function ra(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT);return typeof a==="number"?a:0}function sa(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT,a)}function ta(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_TOOLTIP_VIEW_COUNT,a)}function ua(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_TOOLTIP_VIEW_COUNT);return typeof a==="number"?a:0}function va(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_TOOLTIP_VIEWED_IN_SESSION,a)}function wa(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.POSTCODE_TOOLTIP_VIEWED_IN_SESSION)===!0}function O(a){return(a.toString()||"").replace("@","_")}function P(a){if(a.some(function(a){return a.endsWith("_")})){var b=a.map(function(a){return a.replace(/_$/,"").replace("@","_")});c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO,b);return b}return a}function xa(a){a=O(a);var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO)||[];if(!Array.isArray(b)){d("WALogger").WARN(k()).devConsole(b);c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO,[a]);return!1}b=P(b);var e=!b.includes(a);e&&(b.push(a),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO,b));d("WALogger").LOG(j()).devConsole({id:a,isFirstSentMessage:e});return e}function ya(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO)||[];if(!Array.isArray(b)){d("WALogger").WARN(i()).devConsole(b);c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO,[]);return}b=P(b);a=O(a);b.includes(a)&&c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.CHATS_USER_SENT_MESSAGE_TO,c("lodash").without(b,a));d("WALogger").LOG(h()).devConsole({id:a})}function za(){Q()}function Q(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.DAILY_STATS_START_TIME);if(typeof a==="number")return a;a=Date.now();c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.DAILY_STATS_START_TIME,a);return a}function Aa(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.PS_KILLSWITCH_TOKEN);return typeof a==="string"?a:null}function Ba(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.PS_KILLSWITCH_TOKEN,a)}function Ca(){if(!c("gkx")("26258")){var a={lowQuotaDismissed:!1,highQuotaDismissed:!1},b=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.STORAGE_DISMISS_STATE);if(typeof b!=="string")return a;var e;try{e=JSON.parse(b)}catch(b){return a}return e==null||typeof e!=="object"?a:{lowQuotaDismissed:e.lowQuotaDismissed===!0,highQuotaDismissed:e.highQuotaDismissed===!0}}return{lowQuotaDismissed:!0,highQuotaDismissed:!0}}function Da(a){c("gkx")("26258")||c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.STORAGE_DISMISS_STATE,JSON.stringify(a))}function Ea(){if(!c("gkx")("26258")){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.STORAGE_ALERT_FLAG);if(typeof a==="string"){return(a=d("WAWebDbUsageApiConst").StorageAlertType.cast(a))!=null?a:d("WAWebDbUsageApiConst").StorageAlertType.NO_ALERT}}return d("WAWebDbUsageApiConst").StorageAlertType.NO_ALERT}function Fa(a){c("gkx")("26258")||c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.STORAGE_ALERT_FLAG,a)}function Ga(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.PERSISTENT_EXPIRING_ID);if(a==null||typeof a!=="object")return null;var b=a.ts;a=a.value;return typeof b!=="number"||typeof a!=="string"?null:{ts:b,value:a}}function Ha(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.PERSISTENT_EXPIRING_ID,a)}function Ia(){var a={},b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LID_DB_MIGRATION);if(b==null||typeof b!=="object")return a;typeof b.deviceTable==="number"&&(a.deviceTable=b.deviceTable);typeof b.identityTable==="number"&&(a.identityTable=b.identityTable);typeof b.sessionStoreTable==="number"&&(a.sessionStoreTable=b.sessionStoreTable);typeof b.senderKeyStoreTable==="number"&&(a.senderKeyStoreTable=b.senderKeyStoreTable);return a}function Ja(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.LID_DB_MIGRATION)||{};c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.LID_DB_MIGRATION,babelHelpers["extends"]({},b,a))}function Ka(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_WEB_EXTERNAL_BETA_IDB);return!!a}function La(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_WEB_EXTERNAL_BETA_IDB,a)}function Ma(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB);return!!a}function Na(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB,a)}function Oa(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.APP_VERSION_BASE)}function Pa(a){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.APP_VERSION_BASE,a)});return R.apply(this,arguments)}function Qa(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_PUSH_COUNT)}function Ra(a){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_PUSH_COUNT,a)});return S.apply(this,arguments)}function Sa(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP)}function Ta(a){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP,a)});return T.apply(this,arguments)}function Ua(){return U.apply(this,arguments)}function U(){U=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.remove(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP)});return U.apply(this,arguments)}function Va(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_PUSH_DISABLED)}function Wa(a){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_PUSH_DISABLED,a)});return V.apply(this,arguments)}function Xa(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_L10N_CONTENT)}function Ya(a){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_L10N_CONTENT,a)});return W.apply(this,arguments)}function Za(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT)}function $a(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT,a)}function ab(){void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.remove(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT)}function bb(){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.remove("WABrigadingState")});return X.apply(this,arguments)}function cb(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LOGOUT_REASON)}function db(a){return Y.apply(this,arguments)}function Y(){Y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LOGOUT_REASON,a)});return Y.apply(this,arguments)}var Z=b("$InternalEnum").Mirrored(["FULL","COLLAPSED"]);function eb(){var a;return Z.FULL;if(!d("WAWebUIRefreshGatingUtils").webChatlistToggleEnabled())return Z.FULL;var b=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.CHATLIST_PANEL_STATE);return(a=Z.cast(b))!=null?a:Z.FULL}function fb(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.CHATLIST_PANEL_STATE,a)}function gb(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.LAST_PROFILE_PIC_THUMB_UPDATE_TS);return typeof a==="number"?a:null}function hb(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.LAST_PROFILE_PIC_THUMB_UPDATE_TS,a)}function ib(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.MEDIA_HD,a)}function jb(){return Boolean(c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.MEDIA_HD))}function kb(){var a,b=[],e=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.WA_WEB_WAM_BEACONING_SETTINGS);try{a=e!=null?JSON.parse(e):b}catch(a){return b}return(e=a)!=null?e:b}function lb(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.WA_WEB_WAM_BEACONING_SETTINGS,JSON.stringify(a))}function mb(a){return $.apply(this,arguments)}function $(){$=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CONTACTS_DB_READ_USING_LID,a)});return $.apply(this,arguments)}function nb(){return Boolean(d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CONTACTS_DB_READ_USING_LID))}g.setPushname=a;g.getPushname=e;g.getBrowserId=f;g.setBrowserId=n;g.getLastMobilePlatform=o;g.setLastMobilePlatform=p;g.getServerPropsAttributes=r;g.setServerPropsAttributes=s;g.getServerProps=u;g.setServerProps=v;g.setLastChatMuteDuration=x;g.getLastChatMuteDuration=y;g.setTheme=z;g.getTheme=A;g.setSystemThemeMode=B;g.getSystemThemeMode=C;g.setLastComposeBoxPanel=D;g.getLastComposeBoxPanel=E;g.setSeenGroupDesc=F;g.getSeenGroupDesc=G;g.applyPrivacySetting=H;g.getUserPrivacySettings=I;g.setUserPrivacySettings=J;g.getAutoDownloadPhotos=K;g.setAutoDownloadPhotos=aa;g.getAutoDownloadAudio=ba;g.setAutoDownloadAudio=ca;g.getAutoDownloadVideos=da;g.setAutoDownloadVideos=ea;g.getAutoDownloadDocuments=fa;g.setAutoDownloadDocuments=ga;g.getGroupParticipantAssignedColor=ha;g.setGroupParticipantAssignedColor=ia;g.setMediaVolumeSettings=ja;g.setMediaVolumeSetting=L;g.setMediaMutedSetting=M;g.getMediaVolumeSettings=ka;g.DEFAULT_PTT_PLAYBACK_RATE=N;g.getPttPlaybackRate=la;g.setPttPlaybackRate=ma;g.getLastStatusUsage=na;g.setLastStatusUsage=oa;g.getPostcodeAutoOpenChangePostcodeDone=pa;g.setPostcodeAutoOpenChangePostcodeDone=qa;g.getPostcodeAutoOpenChangePostcodeCount=ra;g.setPostcodeAutoOpenChangePostcodeCount=sa;g.setPostcodeTooltipViewCount=ta;g.getPostcodeTooltipViewCount=ua;g.setPostcodeTooltipViewedInSession=va;g.getPostcodeTooltipViewedInSession=wa;g.markUserSentMessageToChat=xa;g.removeUserSentMessageToChat=ya;g.initDailyStatsStartTime=za;g.getDailyStatsStartTime=Q;g.getPsKillSwitchToken=Aa;g.setPsKillSwitchToken=Ba;g.getStorageDismissState=Ca;g.setStorageDismissState=Da;g.getStorageAlert=Ea;g.setStorageAlert=Fa;g.getPersistentExpiringId=Ga;g.setPersistentExpiringId=Ha;g.getLidDbMigration=Ia;g.createOrUpdateLidDbMigration=Ja;g.getWhatsAppWebExternalBetaJoinedIdb=Ka;g.setWhatsAppWebExternalBetaJoinedIdb=La;g.getWhatsAppWebExternalBetaDirtyBitIdb=Ma;g.setWhatsAppWebExternalBetaDirtyBitIdb=Na;g.getAppVersionBase=Oa;g.setAppVersionBase=Pa;g.getOfflinePushCount=Qa;g.setOfflinePushCount=Ra;g.getLastPushCompleteTimestamp=Sa;g.setLastPushCompleteTimestamp=Ta;g.clearLastPushCompleteTimestamp=Ua;g.getOfflinePushDisabled=Va;g.setOfflinePushDisabled=Wa;g.getOfflineNotificationContent=Xa;g.setOfflineNotificationContent=Ya;g.getOfflineNotificationEngagement=Za;g.setOfflineNotificationContentEngagement=$a;g.clearOfflineNotificationContentEngagement=ab;g.clearBrigadingstate=bb;g.getLogoutReason=cb;g.setLogoutReason=db;g.ChatlistPanelState=Z;g.getChatlistPanelState=eb;g.setChatlistPanelState=fb;g.getLastProfilePicThumbUpdate=gb;g.setLastProfilePicThumbUpdate=hb;g.setHDMediaSetting=ib;g.getHDMediaSetting=jb;g.getWamBeaconingSettings=kb;g.setWamBeaconingSettings=lb;g.setContactsDbReadIsUsingLid=mb;g.getContactsDbReadIsUsingLid=nb}),98);
__d("WABaseGlobals",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a}function i(){if(h==null)throw c("WAErr")("Trying to access WAGlobals before being set");return h}function b(a){var b=i();b.myJids=a}function d(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function j(){return i().jidUtils}function k(){return i().config}function l(){return i().qpl}function m(a,b){return i().runInTransaction(a,b)}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=d;g.getMyUserJid=e;g.getDbImpls=f;g.getJidUtilsApi=j;g.getConfig=k;g.getQplConfig=l;g.runInTransaction=m}),98);
__d("WAWebGlobals",["WABaseGlobals","WAJids","err"],(function(a,b,c,d,e,f,g){var h=null;function i(){if(h==null)throw c("err")("globals api called before set");return h}function a(){return h!=null}function b(a){h=a,d("WABaseGlobals").setGlobals(a)}function e(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("err")("Trying to access myDeviceJid, but it's not set");return d("WAJids").unsafeCoerceToPhoneDeviceJid(a)}function f(){var a=i().lidDeviceJid;return a}function j(a){i().lidDeviceJid=a}function k(){var a=i().displayName;return a}function l(a){i().displayName=a}g.areGlobalsReady=a;g.setGlobals=b;g.getMyDeviceJid=e;g.getMyLidDeviceJid=f;g.setMyLidDeviceJid=j;g.getMyDisplayName=k;g.setMyDisplayName=l}),98);
__d("WAWebMemoizeWithClearUtils",[],(function(a,b,c,d,e,f){function a(a){var b;return[function(){b||(b=[a()]);return b[0]},function(){b=null}]}f.memoizeWithClear=a}),66);
__d("WAWebWidToJid",["WAJids","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToMulticastJid: "','" is not a MulticastJid']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToChatJid: "','" is not a ChatJid']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToNewsletterJid: "','" is not a NewsletterJid']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToGroupJid: "','" is not a GroupJid']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToDeviceJid: "','" is not a DeviceJid']);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToUserJid: "','" is not a UserJid']);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["widToUserJid: wid is a PSA jid"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(['widToJidWithType: "','" is not a valid jid']);o=function(){return a};return a}function p(a){a=a.toJid();var b=d("WAJids").interpretAndValidateJid(a);if(b.jidType==="unknown"){d("WALogger").ERROR(o(),a);throw c("err")("widToJidWithType: unknown jid type")}return b}function a(a){if(a.isPSA()){d("WALogger").ERROR(n()).sendLogs("invalid-psa-user-jid");throw c("err")("widToUserJid: can not convert wid to UserJid")}var b=p(a);if(b.jidType==="phoneUser"||b.jidType==="lidUser"||b.jidType==="bot")return b.userJid;d("WALogger").ERROR(m(),a.toString());throw c("err")("widToUserJid: can not convert wid to UserJid")}function q(a){var b=p(a);if(b.jidType==="phoneDevice"||b.jidType==="lidDevice")return b.deviceJid;else if(b.jidType==="hosted")return b.hostedDeviceJid;else if(b.jidType==="phoneUser")return d("WAJids").defaultDeviceJidForUser(b.userJid);else if(b.jidType==="lidUser")return d("WAJids").defaultLidDeviceJidForLidUserJid(b.userJid);else if(b.jidType==="bot")return d("WAJids").defaultDeviceJidForBot(b.userJid);d("WALogger").ERROR(l(),a.toString());throw c("err")("widToDeviceJid: can not convert wid to DeviceJid")}function b(a){var b=p(a);if(b.jidType==="group")return b.groupJid;d("WALogger").ERROR(k(),a.toString());throw c("err")("widToGroupJid: can not convert wid to GroupJid")}function e(a){var b=p(a);if(b.jidType==="newsletter")return b.newsletterJid;d("WALogger").ERROR(j(),a.toString());throw c("err")("widToNewsletterJid: can not convert wid to NewsletterJid")}function f(a){var b=p(a);if(b.jidType==="group")return b.groupJid;else if(b.jidType==="phoneUser"||b.jidType==="lidUser"||b.jidType==="bot")return b.userJid;d("WALogger").ERROR(i(),a.toString());throw c("err")("widToChatJid: can not convert wid to ChatJid")}function r(a){var b=p(a);if(b.jidType==="group")return b.groupJid;if(b.jidType==="status")return b.statusJid;if(b.jidType==="broadcast")return b.broadcastJid;d("WALogger").ERROR(h(),a.toString());throw c("err")("widToMulticastJid: can not convert wid to MulticastJid")}function s(a){if(a!=null){a=q(a);return{userJid:d("WAJids").extractUserJid(a),deviceJid:a}}return}g.widToJidWithType=p;g.widToUserJid=a;g.widToDeviceJid=q;g.widToGroupJid=b;g.widToNewsletterJid=e;g.widToChatJid=f;g.widToMulticastJid=r;g.widToMyJids=s}),98);
__d("WAWebUserPrefsMeUser",["WABaseGlobals","WALogger","WANullthrows","WAWebGlobals","WAWebMemoizeWithClearUtils","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsBase","WAWebUserPrefsKeys","WAWebWid","WAWebWidFactory","WAWebWidToJid","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["isWID: input exists but is not WID: ",", ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["isWID: input exists but is not WID"]);i=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["self-lid-missing"]);a=function(){return b};return b}function j(){if(d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebWidFactory").createWid(d("WAWebGlobals").getMyDeviceJid());var a=d("WAWebUserPrefsBase").userPreferencesStoreBase.get(d("WAWebUserPrefsKeys").KEYS.LAST_WID_MD);if(typeof a!=="string")return;if(c("WAWebWid").isWid(a))return d("WAWebWidFactory").createWid(a)}function b(){var a=d("WAWebUserPrefsBase").userPreferencesStoreBase.get(d("WAWebUserPrefsKeys").KEYS.UNKNOWN_ID);(typeof a!=="string"||a==="")&&(a="unknown-"+Math.floor(Math.random()*1e10),k(a));return a}function k(a){return d("WAWebUserPrefsBase").userPreferencesStoreBase.set(d("WAWebUserPrefsKeys").KEYS.UNKNOWN_ID,a)}function l(){return c("WANullthrows")(j(),"me")}function m(){return c("WANullthrows")(p(),"meUser")}function n(){return c("WANullthrows")(u(),"meLid")}function o(){return c("WANullthrows")(x(),"meDisplayName")}function p(){return d("WAWebWidFactory").toUserWid(l())}function e(){return d("WAWebWidFactory").toUserWid(n())}function f(){var a=u();return a==null?[l()]:[l(),a]}var q=d("WAWebMemoizeWithClearUtils").memoizeWithClear(function(){var a=j();return!a?void 0:d("WAWebWidFactory").toUserWid(a)}),r=q[0],s=q[1];function t(a){s(),d("WAWebUserPrefsBase").userPreferencesStoreBase.set(d("WAWebUserPrefsKeys").KEYS.LAST_WID_MD,a==null?null:a.toString()),d("WABaseGlobals").setMyJids(d("WAWebWidToJid").widToMyJids(a))}function u(a){a===void 0&&(a=!0);a=d("WAWebRuntimeEnvironmentUtils").isWorker()?d("WAWebGlobals").getMyLidDeviceJid():d("WAWebUserPrefsBase").userPreferencesStoreBase.get(d("WAWebUserPrefsKeys").KEYS.LID);a=typeof a==="string"?a:null;var b=c("WAWebWid").isWid(a);return a==null||!b?null:d("WAWebWidFactory").createWid(a)}function v(){var a=u();return a==null?null:d("WAWebWidFactory").toUserWid(a)}function w(a){d("WAWebRuntimeEnvironmentUtils").isWorker()?d("WAWebGlobals").setMyLidDeviceJid(a.toString()):d("WAWebUserPrefsBase").userPreferencesStoreBase.set(d("WAWebUserPrefsKeys").KEYS.LID,a.toString())}function x(){d("WAWebRuntimeEnvironmentUtils").isWorker()&&d("WAWebGlobals").getMyDisplayName();var a=d("WAWebUserPrefsBase").userPreferencesStoreBase.get(d("WAWebUserPrefsKeys").KEYS.ME_DISPLAY_NAME);if(typeof a==="string")return a}function y(){return o()}function z(a){d("WAWebRuntimeEnvironmentUtils").isWorker()?d("WAWebGlobals").setMyDisplayName(a):d("WAWebUserPrefsBase").userPreferencesStoreBase.set(d("WAWebUserPrefsKeys").KEYS.ME_DISPLAY_NAME,a)}function A(a){var b=a instanceof c("WAWebWid");if(!b)if(c("gkx")("26258"))d("WALogger").WARN(i());else{var e="";try{e=JSON.stringify(a)}catch(a){}d("WALogger").WARN(h(),e,new Error().stack).sendLogs("WAWebUserPrefsMeUser-invalid-wid")}return b}function B(a){if(a==null||!A(a))return!1;var b=r();if(b!=null&&a.isSameAccount(b))return!0;b=u();return b!=null&&a.isSameAccount(b)}function C(a){if(a==null||!A(a))return!1;var b=r();return b!=null&&a.isSameAccount(b)?!0:!1}function D(a){if(a==null||!A(a))return!1;if(a.equals(l()))return!0;var b=u();return b!=null&&a.equals(b)}function E(a){if(a==null||!A(a))return!1;if(a.equals(p()))return!0;var b=v();return b!=null&&a.equals(b)}function F(a){if(a==null||!A(a))return!1;return a.equals(m())?!0:!1}function G(a){return B(d("WAWebWidFactory").createWid(a))}g.getMe=j;g.getUnknownId=b;g.setUnknownId=k;g.assertGetMe=l;g.assertGetMeUser=m;g.assertGetMeLid=n;g.assertGetMeDisplayName=o;g.getMeUser=p;g.getMeLidUser=e;g.getMePNandLIDWids=f;g.getMaybeMeUser=r;g.clearGetMaybeMeUserCache=s;g.setMe=t;g.getMaybeMeLid=u;g.getMaybeMeLidUser=v;g.setMeLid=w;g.getMeDisplayName=y;g.setMeDisplayName=z;g.isMeAccount=B;g.isMeAccountNonLid=C;g.isMeDevice=D;g.isMePrimary=E;g.isMePrimaryNonLid=F;g.isSerializedWidMe=G}),98);
__d("WAWebAbstractStore",["asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var d=a.prototype;d.open=function(){var a=this;if(this.$2)return this.$2;if(this.$1){this.$2=this.$1["catch"](function(b){a.$2=null;throw b}).then(function(){a.$2=null;return a.open()});return this.$2}this.$2=this.doOpen()["catch"](function(b){a.$2=null;throw b}).then(function(){a.$2=null});return this.$2};d.close=function(){var a=this;if(this.$1)return this.$1;if(this.$2){this.$1=this.$2["catch"](function(b){a.$1=null;throw b}).then(function(){a.$1=null;return a.close()});return this.$1}this.$1=this.doClose()["catch"](function(b){a.$1=null;throw b}).then(function(){a.$1=null});return this.$1};d.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.open();return this.doGet(a)});function c(b){return a.apply(this,arguments)}return c}();d.queryByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.open();return this.doQueryByIndex(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();d.getAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doGetAll()});function c(){return a.apply(this,arguments)}return c}();d.put=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.open();return this.doPut(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();d.del=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.open();return this.doDel(a)});function c(b){return a.apply(this,arguments)}return c}();d.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doCount()});function c(){return a.apply(this,arguments)}return c}();d.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doClear()});function c(){return a.apply(this,arguments)}return c}();d.doGet=function(a){throw c("err")("Not implemented")};d.doQueryByIndex=function(a,b){throw c("err")("Not implemented")};d.doGetAll=function(){throw c("err")("Not implemented")};d.doPut=function(a,b){throw c("err")("Not implemented")};d.doDel=function(a){throw c("err")("Not implemented")};d.doCount=function(){throw c("err")("Not implemented")};d.doClear=function(){throw c("err")("Not implemented")};d.doOpen=function(){throw c("err")("Not implemented")};d.doClose=function(){throw c("err")("Not implemented")};return a}();g["default"]=a}),98);
__d("WAWebKeyValueCacheStore",["Promise","WALogger","WAWebAbstractStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to open cache: ",", error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Tried to delete a non-existent cache: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to delete. This error can occur if abstract method doDel gets called."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to put. This error can occur if abstract method doPut gets called."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to get. This error can occur if abstract method doGet gets called."]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,c,d,e){var f;f=a.call(this)||this;f.$KeyValueCacheStore1=b;f.$KeyValueCacheStore3=c;f.$KeyValueCacheStore4=d;f.$KeyValueCacheStore5=(b=e==null?void 0:e.encodeKey)!=null?b:function(a){return a};f.$KeyValueCacheStore6=(c=e==null?void 0:e.matchOptions)!=null?c:{};return f}var f=e.prototype;f.doGet=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(m());throw c("err")("Unable to get")}a=(yield this.$KeyValueCacheStore2.match(a,this.$KeyValueCacheStore6));return a==null?null:this.$KeyValueCacheStore4(a)});function e(b){return a.apply(this,arguments)}return e}();f.doPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(l());throw c("err")("Unable to put in cache")}yield this.$KeyValueCacheStore2.put(a,this.$KeyValueCacheStore3(b));return b});function e(b,c){return a.apply(this,arguments)}return e}();f.doDel=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(k());return(h||(h=b("Promise"))).reject(c("err")("Unable to delete"))}yield this.$KeyValueCacheStore2["delete"](a,this.$KeyValueCacheStore6)});function e(b){return a.apply(this,arguments)}return e}();f.doClear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield caches["delete"](this.$KeyValueCacheStore1));a||d("WALogger").LOG(j(),this.$KeyValueCacheStore1);this.$KeyValueCacheStore2=null});function c(){return a.apply(this,arguments)}return c}();f.doOpen=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$KeyValueCacheStore2!=null)return;try{this.$KeyValueCacheStore2=(yield caches.open(this.$KeyValueCacheStore1))}catch(a){this.$KeyValueCacheStore2=null;d("WALogger").WARN(i(),this.$KeyValueCacheStore1,a);throw a}});function c(){return a.apply(this,arguments)}return c}();f.doClose=function(){this.$KeyValueCacheStore2=null;return(h||(h=b("Promise"))).resolve()};return e}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebUserPrefsPostProcessors",["WABase64"],(function(a,b,c,d,e,f,g){var h={WANoiseInfo:a,WARoutingInfo:b};function a(a){var b=a.recoveryToken,c=a.pubKey,e=a.privKey;a=a.certificateChainBuffer;b={recoveryToken:d("WABase64").decodeB64(b),staticKeyPair:{pubKey:d("WABase64").decodeB64(c),privKey:d("WABase64").decodeB64(e)},certificateChainBuffer:a!=null?d("WABase64").decodeB64(a):void 0};return b}function b(a){var b=a.domain;a=a.edgeRouting;b={domain:b,edgeRouting:a!=null?d("WABase64").decodeB64(a):null};return b}function c(a,b){var c=b;a=h[a];a!=null&&(c=a(b));return c}g.postProcessUserPref=c}),98);
__d("WAWebUserPrefsPreProcessors",["WABase64"],(function(a,b,c,d,e,f,g){var h={WANoiseInfo:a,WARoutingInfo:b};function a(a){var b=a.certificateChainBuffer,c=a.staticKeyPair,e=c.privKey;c=c.pubKey;a=a.recoveryToken;return{privKey:d("WABase64").encodeB64(e),pubKey:d("WABase64").encodeB64(c),recoveryToken:d("WABase64").encodeB64(a),certificateChainBuffer:b!=null?d("WABase64").encodeB64(b):void 0}}function b(a){var b=a.domain;a=a.edgeRouting;b={domain:b,edgeRouting:a?d("WABase64").encodeB64(a):null};return b}function c(a,b){var c=b;a=h[a];a!=null&&(c=a(b));return c}g.preProcessUserPref=c}),98);
__d("WAWebUserPrefsCacheStorage",["Promise","WALogger","WAWebKeyValueCacheStore","WAWebUserPrefsPostProcessors","WAWebUserPrefsPreProcessors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getItemFromCacheStorage: error while trying to parse a user preference"]);i=function(){return a};return a}function a(a){a=new Response(JSON.stringify(a),{headers:{"content-type":"application/json"}});return a}function e(a){return a.json()}function f(a,b){a=encodeURIComponent(a);b=encodeURIComponent(b);return"https://_user_prefs_key_store_.whatsapp.com/"+b+"_"+a}var j={ignoreSearch:!0,ignoreMethod:!0,ignoreVary:!0},k="wa_web_user_prefs_cache_store",l=new(c("WAWebKeyValueCacheStore"))(k,a,e,{encodeKey:f,matchOptions:j});c=function(){function a(){this.$1={}}var c=a.prototype;c.setItemToCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("WAWebUserPrefsPreProcessors").preProcessUserPref(a,b);this.$1[a]=b;yield l.doPut(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();c.getItemFromCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.$1[a];if(b==null)try{b=(yield l.doGet(a)),this.$1[a]=b}catch(a){d("WALogger").DEV(i())}if(b==null){this.removeItemFromCacheStorage(a);return null}a=d("WAWebUserPrefsPostProcessors").postProcessUserPref(a,b);return a});function c(b){return a.apply(this,arguments)}return c}();c.removeItemFromCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){delete this.$1[a],yield l.doDel(a)});function c(b){return a.apply(this,arguments)}return c}();c.clearCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$1={},yield l.doClear()});function c(){return a.apply(this,arguments)}return c}();c.bulkSetItemsToCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;a=a.map(function(a){return c.setItemToCacheStorage(a.key,a.value)});yield (h||(h=b("Promise"))).all(a)});function c(b){return a.apply(this,arguments)}return c}();return a}();k=new c();g.userPrefsCacheStorage=k}),98);
__d("WAWebUserPrefsMultiDevice",["Promise","WABase64","WAWebBizCoexGatingUtils","WAWebMobilePlatforms","WAWebPermanentStorage","WAWebUserPrefsCacheStorage","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsLocalStorage","WAWebUserPrefsMeUser","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=[(a=d("WAWebUserPrefsKeys")).MD_KEYS.NOISE_INFO,a.MD_KEYS.ME_INFO,a.MD_KEYS.DEVICE_ID,a.MD_KEYS.ROUTING_INFO,a.MD_KEYS.INITIAL_HISTORY_SYNCED,a.MD_KEYS.WEB_ENC_SALT];b.push(a.KEYS.LAST_WID_MD);b.map(function(a){c("WAWebUserPrefsStore").set(a,void 0)});yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.clearCacheStorage()});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO,a),yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.setItemToCacheStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO,a)});return j.apply(this,arguments)}function k(){return c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO)}function f(){return c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MMS4_CONN)}function l(a){return c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MMS4_CONN,a)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO_IV,a),yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.setItemToCacheStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO_IV,a)});return n.apply(this,arguments)}function o(){return c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.NOISE_INFO_IV)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ROUTING_INFO,a);var b=a.domain;a=a.edgeRouting;b={domain:b,edgeRouting:a?d("WABase64").encodeB64(a):null};return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.ROUTING_INFO,b,{storage:c("WAWebPermanentStorage")})});return q.apply(this,arguments)}function r(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ROUTING_INFO);return a}function s(a,b){return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE,{ts:a,appVersion:b})}function t(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE);return(a==null?void 0:a.ts)==null||(a==null?void 0:a.appVersion)==null?void 0:{timestamp:parseInt(a.ts,10),appVersion:a.appVersion}}function u(){return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE,void 0)}function v(){return!!(k()&&d("WAWebUserPrefsMeUser").getMe())}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a!=null?(c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.WEB_ENC_SALT,a),yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.setItemToCacheStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.WEB_ENC_SALT,a)):(c("WAWebUserPrefsLocalStorage").removeItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.WEB_ENC_SALT),yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.removeItemFromCacheStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.WEB_ENC_SALT));return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.WEB_ENC_SALT,a,{shouldWriteToIdb:!1})});return x.apply(this,arguments)}function y(){return c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_NOISE_KEYS.WEB_ENC_SALT)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a==null?yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.remove(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ADV_SECRET_KEY):yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ADV_SECRET_KEY,a);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.ADV_SECRET_KEY,a)});return A.apply(this,arguments)}function B(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ADV_SECRET_KEY);return a}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.BLOCKLIST_HASH,a);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.BLOCKLIST_HASH,a)});return D.apply(this,arguments)}function E(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.BLOCKLIST_HASH);return a}function F(a){return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.PAIRING_TIMESTAMP,a)}function G(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.PAIRING_TIMESTAMP);return a==null?null:parseInt(a,10)}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS,a);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.RECENT_MAILBOX_AGE_DAYS,a)});return I.apply(this,arguments)}function J(){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS);return a});return K.apply(this,arguments)}function L(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS);return a===!0}function M(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.UNARCHIVE_CHATS_SETTING);return a===!0}function N(a){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.UNARCHIVE_CHATS_SETTING,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.UNARCHIVE_CHATS_SETTING,a)});return O.apply(this,arguments)}function P(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ARCHIVE_V2_ENABLED_SETTING);return a===!0}function Q(a){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ARCHIVE_V2_ENABLED_SETTING,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.ARCHIVE_V2_ENABLED_SETTING,a)});return R.apply(this,arguments)}function S(a){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_OFFSET,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_OFFSET,a)});return T.apply(this,arguments)}function U(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_OFFSET);return a}function V(a){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_SECRET,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_SECRET,a)});return W.apply(this,arguments)}function aa(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_SECRET);return(h||(h=b("Promise"))).resolve(a)}function ba(a){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS,a)});return X.apply(this,arguments)}function ca(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS);return a}function da(a){return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.CACHED_PROFILE_PIC_EURL,a)}function ea(){return c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.CACHED_PROFILE_PIC_EURL,{storage:c("WAWebPermanentStorage")})}function fa(){var a;return(a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.COMMUNITY_TAB_LAST_SEEN_TIMESTAMP))!=null?a:0}function ga(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.COMMUNITY_TAB_LAST_SEEN_TIMESTAMP,a)}function ha(){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.NEWSLETTER_WAS_BOOTSTRAPPED,!0)}function ia(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.NEWSLETTER_WAS_BOOTSTRAPPED);return typeof a==="boolean"?a:!1}function ja(){return Y.apply(this,arguments)}function Y(){Y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebBizCoexGatingUtils").smbHostedPrimaryPairingAllowed()&&d("WAWebMobilePlatforms").isSMB()&&(c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT,!0),yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT,!0))});return Y.apply(this,arguments)}function ka(){return Z.apply(this,arguments)}function Z(){Z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&d("WAWebMobilePlatforms").isSMB()){var a=(yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT));if(a===!0)return!0}return!1});return Z.apply(this,arguments)}function la(){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&d("WAWebMobilePlatforms").isSMB()){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT);if(a===!0)return!0}return!1}function ma(){return $.apply(this,arguments)}function $(){$=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HAVE_PROCESSED_COEX_ADV)===!0)return;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HAVE_PROCESSED_COEX_ADV,!0)}});return $.apply(this,arguments)}function na(){return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HAVE_PROCESSED_COEX_ADV)===!0:!1}g.clearRegistrationInfo=a;g.setNoiseInfo=e;g.getNoiseInfo=k;g.getMms4Conn=f;g.setMms4Conn=l;g.setNoiseInfoIv=m;g.getNoiseInfoIv=o;g.setRoutingInfo=p;g.getRoutingInfo=r;g.setServerClientExpirationOverride=s;g.getServerClientExpirationOverride=t;g.clearServerClientExpirationOverride=u;g.isRegistered=v;g.setWebEncSalt=w;g.getWebEncSalt=y;g.setADVSecretKey=z;g.getADVSecretKey=B;g.setBlocklistHash=C;g.getBlocklistHash=E;g.setPairingTimestamp=F;g.getPairingTimestamp=G;g.setRecentMailboxAgeDays=H;g.getRecentMailboxAgeDays=J;g.getShouldCheckContactSyncStatus=L;g.getUnarchiveChatsSetting=M;g.setUnarchiveChatsSetting=N;g.getArchiveV2EnabledSetting=P;g.setArchiveV2EnabledSetting=Q;g.setChatThreadLoggingOffset=S;g.getChatThreadLoggingOffset=U;g.setChatThreadLoggingSecretB64=V;g.getChatThreadLoggingSecretB64=aa;g.setChatThreadLoggingLastUploadedStartTs=ba;g.getChatThreadLoggingLastUploadedStartTs=ca;g.setCachedProfilePicEURL=da;g.getCachedProfilePicEURL=ea;g.getCommunityTabLastSeenTimestamp=fa;g.setCommunityTabLastSeenTimestamp=ga;g.setNewsletterWasBootstrapped=ha;g.getNewsletterWasBootstrapped=ia;g.setIsHostedMeAccount=ja;g.getIsHostedMeAccount=ka;g.getIsHostedMeAccountFromLocalStorage=la;g.setHaveProcessedCoexAdv=ma;g.getHaveProcessedCoexAdv=na}),98);
__d("WAArrayBufferUtils",["Promise","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b("Promise")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c("WAErr")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);
__d("WAWebProtobufsCompanionReg.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({UNKNOWN:0,CHROME:1,FIREFOX:2,IE:3,OPERA:4,SAFARI:5,EDGE:6,DESKTOP:7,IPAD:8,ANDROID_TABLET:9,OHANA:10,ALOHA:11,CATALINA:12,TCL_TV:13,IOS_PHONE:14,IOS_CATALYST:15,ANDROID_PHONE:16,ANDROID_AMBIGUOUS:17,WEAR_OS:18,AR_WRIST:19,AR_DEVICE:20,UWP:21,VR:22,CLOUD_API:23});c={};e={};f={};b={};var h={},i={},j={};c.internalSpec={os:[1,(d=d("WAProtoConst")).TYPES.STRING],version:[2,d.TYPES.MESSAGE,f],platformType:[3,d.TYPES.ENUM,a],requireFullSync:[4,d.TYPES.BOOL],historySyncConfig:[5,d.TYPES.MESSAGE,e]};e.internalSpec={fullSyncDaysLimit:[1,d.TYPES.UINT32],fullSyncSizeMbLimit:[2,d.TYPES.UINT32],storageQuotaMb:[3,d.TYPES.UINT32],inlineInitialPayloadInE2EeMsg:[4,d.TYPES.BOOL],recentSyncDaysLimit:[5,d.TYPES.UINT32],supportCallLogHistory:[6,d.TYPES.BOOL],supportBotUserAgentChatHistory:[7,d.TYPES.BOOL],supportCagReactionsAndPolls:[8,d.TYPES.BOOL],supportBizHostedMsg:[9,d.TYPES.BOOL],supportRecentSyncChunkMessageCountTuning:[10,d.TYPES.BOOL],supportHostedGroupMsg:[11,d.TYPES.BOOL],supportFbidBotChatHistory:[12,d.TYPES.BOOL],supportAddOnHistorySyncMigration:[13,d.TYPES.BOOL]};f.internalSpec={primary:[1,d.TYPES.UINT32],secondary:[2,d.TYPES.UINT32],tertiary:[3,d.TYPES.UINT32],quaternary:[4,d.TYPES.UINT32],quinary:[5,d.TYPES.UINT32]};b.internalSpec={publicKey:[1,d.TYPES.BYTES],deviceType:[2,d.TYPES.ENUM,a],ref:[3,d.TYPES.STRING]};h.internalSpec={publicKey:[1,d.TYPES.BYTES]};i.internalSpec={encryptedPayload:[1,d.TYPES.BYTES],iv:[2,d.TYPES.BYTES]};j.internalSpec={isChatDbLidMigrated:[1,d.TYPES.BOOL]};g.DeviceProps$PlatformType=a;g.DevicePropsSpec=c;g.DeviceProps$HistorySyncConfigSpec=e;g.DeviceProps$AppVersionSpec=f;g.CompanionEphemeralIdentitySpec=b;g.PrimaryEphemeralIdentitySpec=h;g.EncryptedPairingRequestSpec=i;g.ClientPairingPropsSpec=j}),98);
__d("WAWebProtobufsMmsRetry.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({GENERAL_ERROR:0,SUCCESS:1,NOT_FOUND:2,DECRYPTION_ERROR:3});c={};e={};c.internalSpec={stanzaId:[1,(f=d("WAProtoConst")).TYPES.STRING],directPath:[2,f.TYPES.STRING],result:[3,f.TYPES.ENUM,a]};e.internalSpec={stanzaId:[1,f.TYPES.STRING]};g.MediaRetryNotification$ResultType=a;g.MediaRetryNotificationSpec=c;g.ServerErrorReceiptSpec=e}),98);
__d("WAWebProtobufsProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={remoteJid:[1,(b=d("WAProtoConst")).TYPES.STRING],fromMe:[2,b.TYPES.BOOL],id:[3,b.TYPES.STRING],participant:[4,b.TYPES.STRING]};g.MessageKeySpec=a}),98);
__d("WAWebProtobufsE2E.pb",["$InternalEnum","WAProtoConst","WAWebProtobufsAdv.pb","WAWebProtobufsCompanionReg.pb","WAWebProtobufsMmsRetry.pb","WAWebProtobufsProtocol.pb"],(function(a,b,c,d,e,f,g){var h,i;c=(a=b("$InternalEnum"))({MASK_LINKED_DEVICES:0});e=a({UNKNOWN:0,AUDIO:1,VIDEO:2});f=a({CONNECTED:0,MISSED:1,FAILED:2,REJECTED:3,ACCEPTED_ELSEWHERE:4,ONGOING:5,SILENCED_BY_DND:6,SILENCED_UNKNOWN_CALLER:7});b=a({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});var aa=a({UNKNOWN:0,CANCEL:1}),ba=a({UNKNOWN:0,VOICE:1,VIDEO:2}),ca=a({UNKNOWN:0,GOING:1,NOT_GOING:2,MAYBE:3}),da=a({UNKNOWN_TYPE:0,PIN_FOR_ALL:1,UNPIN_FOR_ALL:2}),ea=a({UNKNOWN:0,DISPLAY_TEXT:1}),fa=a({UNKNOWN:0,RESPONSE:1,NATIVE_FLOW:2}),ga=a({UNKNOWN:0,EMPTY:1,TEXT:2,DOCUMENT:3,IMAGE:4,VIDEO:5,LOCATION:6}),ha=a({UNKNOWN:0,EVENT_EDIT:1}),ia=a({DEFAULT:0,PARENT:1}),j=a({DEFAULT:0,EXTENSIONS_1:1}),ja=a({UNKNOWN_SURFACE:0,FB:1,IG:2,WA:3}),ka=a({UNKNOWN:0,SINGLE_SELECT:1}),la=a({UNKNOWN:0,SINGLE_SELECT:1,PRODUCT_LIST:2}),ma=a({CATALOG:1}),na=a({INQUIRY:1,ACCEPTED:2,DECLINED:3}),oa=a({UNKNOWN:0,FBPAY:1,NOVI:2,UPI:3}),pa=a({GREGORIAN:1,SOLAR_HIJRI:2}),qa=a({MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7}),ra=a({REQUEST_SUCCESS:0,REQUEST_TIME_EXPIRED:1,DECLINED_SHARING_HISTORY:2,GENERIC_ERROR:3,ERROR_REQUEST_ON_NON_SMB_PRIMARY:4,ERROR_HOSTED_DEVICE_NOT_CONNECTED:5,ERROR_HOSTED_DEVICE_LOGIN_TIME_NOT_SET:6}),k=a({UPLOAD_STICKER:0,SEND_RECENT_STICKER_BOOTSTRAP:1,GENERATE_LINK_PREVIEW:2,HISTORY_SYNC_ON_DEMAND:3,PLACEHOLDER_MESSAGE_RESEND:4,WAFFLE_LINKING_NONCE_FETCH:5,FULL_HISTORY_SYNC_ON_DEMAND:6}),sa=a({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4,NON_BLOCKING_DATA:5,ON_DEMAND:6,NO_HISTORY:7}),ta=a({EMPTY:0,NON_EMPTY:1}),ua=a({REVOKE:0,EPHEMERAL_SETTING:3,EPHEMERAL_SYNC_RESPONSE:4,HISTORY_SYNC_NOTIFICATION:5,APP_STATE_SYNC_KEY_SHARE:6,APP_STATE_SYNC_KEY_REQUEST:7,MSG_FANOUT_BACKFILL_REQUEST:8,INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:9,APP_STATE_FATAL_EXCEPTION_NOTIFICATION:10,SHARE_PHONE_NUMBER:11,MESSAGE_EDIT:14,PEER_DATA_OPERATION_REQUEST_MESSAGE:16,PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:17,REQUEST_WELCOME_MESSAGE:18,BOT_FEEDBACK_MESSAGE:19,MEDIA_NOTIFY_MESSAGE:20,CLOUD_API_THREAD_CONTROL_NOTIFICATION:21,LID_MIGRATION_MAPPING_SYNC:22,REMINDER_MESSAGE:23,BOT_MEMU_ONBOARDING_MESSAGE:24,STATUS_MENTION_MESSAGE:25}),va=a({UNKNOWN:0,CONTROL_PASSED:1,CONTROL_TAKEN:2}),wa=a({GENERIC:0}),xa=a({BOT_FEEDBACK_MULTIPLE_POSITIVE_GENERIC:1}),ya=a({BOT_FEEDBACK_MULTIPLE_NEGATIVE_GENERIC:1,BOT_FEEDBACK_MULTIPLE_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_MULTIPLE_NEGATIVE_INTERESTING:4,BOT_FEEDBACK_MULTIPLE_NEGATIVE_ACCURATE:8,BOT_FEEDBACK_MULTIPLE_NEGATIVE_SAFE:16,BOT_FEEDBACK_MULTIPLE_NEGATIVE_OTHER:32,BOT_FEEDBACK_MULTIPLE_NEGATIVE_REFUSED:64,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_VISUALLY_APPEALING:128,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_RELEVANT_TO_TEXT:256}),za=a({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9}),Aa=a({NONE:0,GIPHY:1,TENOR:2}),l=a({DEFAULT:0,PARENT:1,SUB:2,DEFAULT_SUB:3}),Ba=a({NONE:0,VIDEO:1,PLACEHOLDER:4,IMAGE:5,PAYMENT_LINKS:6}),Ca=a({SYSTEM:0,SYSTEM_TEXT:1,FB_SCRIPT:2,SYSTEM_BOLD:6,MORNINGBREEZE_REGULAR:7,CALISTOGA_REGULAR:8,EXO2_EXTRABOLD:9,COURIERPRIME_BOLD:10}),Da=a({IMAGE:0,PDF:1}),Ea=a({USER_IMAGE:0,AI_GENERATED:1,AI_MODIFIED:2}),Fa=a({UPDATE:1,UPDATE_CARD:2,LINK_CARD:3}),Ga=a({NONE:0,IMAGE:1,VIDEO:2}),Ha=a({NONE:0,IMAGE:1,VIDEO:2}),m=a({REELS:1,SEARCH:2}),Ia=a({BING:1,GOOGLE:2}),Ja=a({NULL_STATE:1,TYPEAHEAD:2,USER_INPUT:3,EMU_FLASH:4,EMU_FLASH_FOLLOWUP:5,VOICE:6}),Ka=a({CENTER:1,LEFT:2,RIGHT:3}),La=a({ONCE:1,DAILY:2,WEEKLY:3,BIWEEKLY:4,MONTHLY:5}),Ma=a({NOTIFY:1,CREATE:2,DELETE:3,UPDATE:4}),Na=a({AVAILABLE:1,QUOTA_EXCEED_LIMIT:2}),Oa=a({LLAMA_PROD:1,LLAMA_PROD_PREMIUM:2}),Pa=a({UNKNOWN:0,MEDIA_ALBUM:1,BOT_PLUGIN:2,EVENT_COVER_IMAGE:3,STATUS_POLL:4}),Qa=a({STATIC:1,DEPENDENT_ON_PARENT:2}),Ra=a({FULL:1,TALL:2,COMPACT:3}),Sa=a({UNKNOWN:0,DEFAULT:1}),Ta=a({UNKNOWN:0,CHAT_SETTING:1,ACCOUNT_SETTING:2,BULK_CHANGE:3,BIZ_SUPPORTS_FB_HOSTING:4,UNKNOWN_GROUPS:5}),Ua=a({CHANGED_IN_CHAT:0,INITIATED_BY_ME:1,INITIATED_BY_OTHER:2,BIZ_UPGRADE_FB_HOSTING:3}),Va=a({UNKNOWN:0,KEEP_FOR_ALL:1,UNDO_KEEP_FOR_ALL:2});a=a({UNDEFINED:0,LOW:1,MID:2,HIGH:3});var n={},o={},p={},q={},r={},s={},t={},u={},v={},Wa={},Xa={},Ya={},Za={},$a={},ab={},bb={},cb={},db={},eb={},fb={},gb={},hb={},ib={},jb={},kb={},w={},lb={},mb={},nb={},ob={},pb={},qb={},rb={},sb={},tb={},x={},ub={},vb={},wb={},xb={},yb={},y={},z={},A={},B={},C={},zb={},D={},E={},Ab={},Bb={},Cb={},Db={},Eb={},Fb={},Gb={},Hb={},Ib={},Jb={},Kb={},Lb={},F={},G={},Mb={},Nb={},Ob={},H={},I={},Pb={},J={},Qb={},Rb={},Sb={},Tb={},Ub={},Vb={},K={},Wb={},Xb={},Yb={},Zb={},$b={},ac={},bc={},cc={},dc={},ec={},fc={},gc={},hc={},ic={},jc={},kc={},lc={},mc={},nc={},oc={},L={},pc={},qc={},rc={},sc={},tc={},M={},uc={},vc={},wc={},xc={},yc={},zc={},Ac={},Bc={},N={},Cc={},O={},Dc={},P={},Q={},Ec={},R={},S={},T={},U={},Fc={},V={},W={},Gc={},Hc={},Ic={},Jc={},Kc={},Lc={},Mc={},Nc={},Oc={},Pc={},Qc={},Rc={},Sc={},Tc={},Uc={},X={},Vc={},Wc={},Xc={},Y={},Yc={},Zc={},$c={},ad={},bd={},cd={},dd={},ed={},fd={},gd={},hd={},Z={},id={},$={},jd={},kd={},ld={},md={},nd={},od={};n.internalSpec={conversation:[1,(h=d("WAProtoConst")).TYPES.STRING],senderKeyDistributionMessage:[2,h.TYPES.MESSAGE,S],imageMessage:[3,h.TYPES.MESSAGE,R],contactMessage:[4,h.TYPES.MESSAGE,Q],locationMessage:[5,h.TYPES.MESSAGE,P],extendedTextMessage:[6,h.TYPES.MESSAGE,Dc],documentMessage:[7,h.TYPES.MESSAGE,O],audioMessage:[8,h.TYPES.MESSAGE,Cc],videoMessage:[9,h.TYPES.MESSAGE,N],call:[10,h.TYPES.MESSAGE,Bc],chat:[11,h.TYPES.MESSAGE,Ac],protocolMessage:[12,h.TYPES.MESSAGE,xc],contactsArrayMessage:[13,h.TYPES.MESSAGE,ac],highlyStructuredMessage:[14,h.TYPES.MESSAGE,K],fastRatchetKeySenderKeyDistributionMessage:[15,h.TYPES.MESSAGE,S],sendPaymentMessage:[16,h.TYPES.MESSAGE,Vb],liveLocationMessage:[18,h.TYPES.MESSAGE,Qb],requestPaymentMessage:[22,h.TYPES.MESSAGE,Ub],declinePaymentRequestMessage:[23,h.TYPES.MESSAGE,Tb],cancelPaymentRequestMessage:[24,h.TYPES.MESSAGE,Sb],templateMessage:[25,h.TYPES.MESSAGE,H],stickerMessage:[26,h.TYPES.MESSAGE,J],groupInviteMessage:[28,h.TYPES.MESSAGE,xb],templateButtonReplyMessage:[29,h.TYPES.MESSAGE,Ob],productMessage:[30,h.TYPES.MESSAGE,G],deviceSentMessage:[31,h.TYPES.MESSAGE,ub],messageContextInfo:[35,h.TYPES.MESSAGE,Uc],listMessage:[36,h.TYPES.MESSAGE,Fb],viewOnceMessage:[37,h.TYPES.MESSAGE,x],orderMessage:[38,h.TYPES.MESSAGE,F],listResponseMessage:[39,h.TYPES.MESSAGE,Db],ephemeralMessage:[40,h.TYPES.MESSAGE,x],invoiceMessage:[41,h.TYPES.MESSAGE,Ec],buttonsMessage:[42,h.TYPES.MESSAGE,pb],buttonsResponseMessage:[43,h.TYPES.MESSAGE,ob],paymentInviteMessage:[44,h.TYPES.MESSAGE,Rb],interactiveMessage:[45,h.TYPES.MESSAGE,A],reactionMessage:[46,h.TYPES.MESSAGE,nb],stickerSyncRmrMessage:[47,h.TYPES.MESSAGE,mb],interactiveResponseMessage:[48,h.TYPES.MESSAGE,yb],pollCreationMessage:[49,h.TYPES.MESSAGE,w],pollUpdateMessage:[50,h.TYPES.MESSAGE,kb],keepInChatMessage:[51,h.TYPES.MESSAGE,eb],documentWithCaptionMessage:[53,h.TYPES.MESSAGE,x],requestPhoneNumberMessage:[54,h.TYPES.MESSAGE,vb],viewOnceMessageV2:[55,h.TYPES.MESSAGE,x],encReactionMessage:[56,h.TYPES.MESSAGE,cb],editedMessage:[58,h.TYPES.MESSAGE,x],viewOnceMessageV2Extension:[59,h.TYPES.MESSAGE,x],pollCreationMessageV2:[60,h.TYPES.MESSAGE,w],scheduledCallCreationMessage:[61,h.TYPES.MESSAGE,Xa],groupMentionedMessage:[62,h.TYPES.MESSAGE,x],pinInChatMessage:[63,h.TYPES.MESSAGE,db],pollCreationMessageV3:[64,h.TYPES.MESSAGE,w],scheduledCallEditMessage:[65,h.TYPES.MESSAGE,Wa],ptvMessage:[66,h.TYPES.MESSAGE,N],botInvokeMessage:[67,h.TYPES.MESSAGE,x],callLogMesssage:[69,h.TYPES.MESSAGE,u],messageHistoryBundle:[70,h.TYPES.MESSAGE,t],encCommentMessage:[71,h.TYPES.MESSAGE,bb],bcallMessage:[72,h.TYPES.MESSAGE,s],lottieStickerMessage:[74,h.TYPES.MESSAGE,x],eventMessage:[75,h.TYPES.MESSAGE,$a],encEventResponseMessage:[76,h.TYPES.MESSAGE,Za],commentMessage:[77,h.TYPES.MESSAGE,ab],newsletterAdminInviteMessage:[78,h.TYPES.MESSAGE,wb],placeholderMessage:[80,h.TYPES.MESSAGE,r],secretEncryptedMessage:[82,h.TYPES.MESSAGE,tb],albumMessage:[83,h.TYPES.MESSAGE,q],eventCoverImage:[85,h.TYPES.MESSAGE,x],stickerPackMessage:[86,h.TYPES.MESSAGE,o],statusMentionMessage:[87,h.TYPES.MESSAGE,x],pollResultSnapshotMessage:[88,h.TYPES.MESSAGE,fb]};o.internalSpec={stickerPackId:[1,h.TYPES.STRING],name:[2,h.TYPES.STRING],publisher:[3,h.TYPES.STRING],stickers:[4,h.FLAGS.REPEATED|h.TYPES.MESSAGE,p],fileSize:[5,h.TYPES.UINT64],fileSha256:[6,h.TYPES.BYTES],fileEncSha256:[7,h.TYPES.BYTES],mediaKey:[8,h.TYPES.BYTES],directPath:[9,h.TYPES.STRING],caption:[10,h.TYPES.STRING],contextInfo:[11,h.TYPES.MESSAGE,T],packDescription:[12,h.TYPES.STRING],mediaKeyTimestamp:[13,h.TYPES.INT64],trayIconFileName:[14,h.TYPES.STRING],thumbnailDirectPath:[15,h.TYPES.STRING],thumbnailSha256:[16,h.TYPES.BYTES],thumbnailEncSha256:[17,h.TYPES.BYTES],thumbnailHeight:[18,h.TYPES.UINT32],thumbnailWidth:[19,h.TYPES.UINT32]};p.internalSpec={fileName:[1,h.TYPES.STRING],isAnimated:[2,h.TYPES.BOOL],emojis:[3,h.FLAGS.REPEATED|h.TYPES.STRING],accessibilityLabel:[4,h.TYPES.STRING],isLottie:[5,h.TYPES.BOOL],mimetype:[6,h.TYPES.STRING]};q.internalSpec={caption:[1,h.TYPES.STRING],expectedImageCount:[2,h.TYPES.UINT32],expectedVideoCount:[3,h.TYPES.UINT32],contextInfo:[17,h.TYPES.MESSAGE,T]};r.internalSpec={type:[1,h.TYPES.ENUM,c]};s.internalSpec={sessionId:[1,h.TYPES.STRING],mediaType:[2,h.TYPES.ENUM,e],masterKey:[3,h.TYPES.BYTES],caption:[4,h.TYPES.STRING]};t.internalSpec={mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],mediaKey:[5,h.TYPES.BYTES],fileEncSha256:[6,h.TYPES.BYTES],directPath:[7,h.TYPES.STRING],mediaKeyTimestamp:[8,h.TYPES.INT64],contextInfo:[9,h.TYPES.MESSAGE,T],participants:[10,h.FLAGS.REPEATED|h.TYPES.STRING]};u.internalSpec={isVideo:[1,h.TYPES.BOOL],callOutcome:[2,h.TYPES.ENUM,f],durationSecs:[3,h.TYPES.INT64],callType:[4,h.TYPES.ENUM,b],participants:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.internalSpec={jid:[1,h.TYPES.STRING],callOutcome:[2,h.TYPES.ENUM,f]};Wa.internalSpec={key:[1,h.TYPES.MESSAGE,(i=d("WAWebProtobufsProtocol.pb")).MessageKeySpec],editType:[2,h.TYPES.ENUM,aa]};Xa.internalSpec={scheduledTimestampMs:[1,h.TYPES.INT64],callType:[2,h.TYPES.ENUM,ba],title:[3,h.TYPES.STRING]};Ya.internalSpec={response:[1,h.TYPES.ENUM,ca],timestampMs:[2,h.TYPES.INT64],extraGuestCount:[3,h.TYPES.INT32]};Za.internalSpec={eventCreationMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};$a.internalSpec={contextInfo:[1,h.TYPES.MESSAGE,T],isCanceled:[2,h.TYPES.BOOL],name:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],location:[5,h.TYPES.MESSAGE,P],joinLink:[6,h.TYPES.STRING],startTime:[7,h.TYPES.INT64],endTime:[8,h.TYPES.INT64],extraGuestsAllowed:[9,h.TYPES.BOOL]};ab.internalSpec={message:[1,h.TYPES.MESSAGE,n],targetMessageKey:[2,h.TYPES.MESSAGE,i.MessageKeySpec]};bb.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};cb.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES]};db.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],type:[2,h.TYPES.ENUM,da],senderTimestampMs:[3,h.TYPES.INT64]};eb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],keepType:[2,h.TYPES.ENUM,Va],timestampMs:[3,h.TYPES.INT64]};fb.internalSpec={name:[1,h.TYPES.STRING],pollVotes:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,gb],contextInfo:[3,h.TYPES.MESSAGE,T]};gb.internalSpec={optionName:[1,h.TYPES.STRING],optionVoteCount:[2,h.TYPES.INT64]};hb.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES]};ib.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};jb.internalSpec={};kb.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,ib],metadata:[3,h.TYPES.MESSAGE,jb],senderTimestampMs:[4,h.TYPES.INT64]};w.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,lb],selectableOptionsCount:[4,h.TYPES.UINT32],contextInfo:[5,h.TYPES.MESSAGE,T]};lb.internalSpec={optionName:[1,h.TYPES.STRING]};mb.internalSpec={filehash:[1,h.FLAGS.REPEATED|h.TYPES.STRING],rmrSource:[2,h.TYPES.STRING],requestTimestamp:[3,h.TYPES.INT64]};nb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64]};ob.internalSpec={selectedButtonId:[1,h.TYPES.STRING],selectedDisplayText:[2,h.TYPES.STRING],contextInfo:[3,h.TYPES.MESSAGE,T],type:[4,h.TYPES.ENUM,ea],__oneofs__:{response:["selectedDisplayText"]}};pb.internalSpec={text:[1,h.TYPES.STRING],documentMessage:[2,h.TYPES.MESSAGE,O],imageMessage:[3,h.TYPES.MESSAGE,R],videoMessage:[4,h.TYPES.MESSAGE,N],locationMessage:[5,h.TYPES.MESSAGE,P],contentText:[6,h.TYPES.STRING],footerText:[7,h.TYPES.STRING],contextInfo:[8,h.TYPES.MESSAGE,T],buttons:[9,h.FLAGS.REPEATED|h.TYPES.MESSAGE,qb],headerType:[10,h.TYPES.ENUM,ga],__oneofs__:{header:["text","documentMessage","imageMessage","videoMessage","locationMessage"]}};qb.internalSpec={buttonId:[1,h.TYPES.STRING],buttonText:[2,h.TYPES.MESSAGE,sb],type:[3,h.TYPES.ENUM,fa],nativeFlowInfo:[4,h.TYPES.MESSAGE,rb]};rb.internalSpec={name:[1,h.TYPES.STRING],paramsJson:[2,h.TYPES.STRING]};sb.internalSpec={displayText:[1,h.TYPES.STRING]};tb.internalSpec={targetMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,h.TYPES.BYTES],encIv:[3,h.TYPES.BYTES],secretEncType:[4,h.TYPES.ENUM,ha]};x.internalSpec={message:[1,h.TYPES.MESSAGE,n]};ub.internalSpec={destinationJid:[1,h.TYPES.STRING],message:[2,h.TYPES.MESSAGE,n],phash:[3,h.TYPES.STRING]};vb.internalSpec={contextInfo:[1,h.TYPES.MESSAGE,T]};wb.internalSpec={newsletterJid:[1,h.TYPES.STRING],newsletterName:[2,h.TYPES.STRING],jpegThumbnail:[3,h.TYPES.BYTES],caption:[4,h.TYPES.STRING],inviteExpiration:[5,h.TYPES.INT64],contextInfo:[6,h.TYPES.MESSAGE,T]};xb.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.STRING],contextInfo:[7,h.TYPES.MESSAGE,T],groupType:[8,h.TYPES.ENUM,ia]};yb.internalSpec={body:[1,h.TYPES.MESSAGE,z],nativeFlowResponseMessage:[2,h.TYPES.MESSAGE,y],contextInfo:[15,h.TYPES.MESSAGE,T],__oneofs__:{interactiveResponseMessage:["nativeFlowResponseMessage"]}};y.internalDefaults={version:1};y.internalSpec={name:[1,h.TYPES.STRING],paramsJson:[2,h.TYPES.STRING],version:[3,h.TYPES.INT32]};z.internalDefaults={format:j.DEFAULT};z.internalSpec={text:[1,h.TYPES.STRING],format:[2,h.TYPES.ENUM,j]};A.internalSpec={header:[1,h.TYPES.MESSAGE,Cb],body:[2,h.TYPES.MESSAGE,Bb],footer:[3,h.TYPES.MESSAGE,Ab],shopStorefrontMessage:[4,h.TYPES.MESSAGE,E],collectionMessage:[5,h.TYPES.MESSAGE,D],nativeFlowMessage:[6,h.TYPES.MESSAGE,C],carouselMessage:[7,h.TYPES.MESSAGE,B],contextInfo:[15,h.TYPES.MESSAGE,T],__oneofs__:{interactiveMessage:["shopStorefrontMessage","collectionMessage","nativeFlowMessage","carouselMessage"]}};B.internalDefaults={messageVersion:1};B.internalSpec={cards:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A],messageVersion:[2,h.TYPES.INT32]};C.internalDefaults={messageVersion:1};C.internalSpec={buttons:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,zb],messageParamsJson:[2,h.TYPES.STRING],messageVersion:[3,h.TYPES.INT32]};zb.internalSpec={name:[1,h.TYPES.STRING],buttonParamsJson:[2,h.TYPES.STRING]};D.internalDefaults={messageVersion:1};D.internalSpec={bizJid:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING],messageVersion:[3,h.TYPES.INT32]};E.internalDefaults={messageVersion:1};E.internalSpec={id:[1,h.TYPES.STRING],surface:[2,h.TYPES.ENUM,ja],messageVersion:[3,h.TYPES.INT32]};Ab.internalSpec={text:[1,h.TYPES.STRING]};Bb.internalSpec={text:[1,h.TYPES.STRING]};Cb.internalSpec={title:[1,h.TYPES.STRING],subtitle:[2,h.TYPES.STRING],documentMessage:[3,h.TYPES.MESSAGE,O],imageMessage:[4,h.TYPES.MESSAGE,R],jpegThumbnail:[6,h.TYPES.BYTES],videoMessage:[7,h.TYPES.MESSAGE,N],locationMessage:[8,h.TYPES.MESSAGE,P],productMessage:[9,h.TYPES.MESSAGE,G],hasMediaAttachment:[5,h.TYPES.BOOL],__oneofs__:{media:["documentMessage","imageMessage","jpegThumbnail","videoMessage","locationMessage","productMessage"]}};Db.internalSpec={title:[1,h.TYPES.STRING],listType:[2,h.TYPES.ENUM,ka],singleSelectReply:[3,h.TYPES.MESSAGE,Eb],contextInfo:[4,h.TYPES.MESSAGE,T],description:[5,h.TYPES.STRING]};Eb.internalSpec={selectedRowId:[1,h.TYPES.STRING]};Fb.internalSpec={title:[1,h.TYPES.STRING],description:[2,h.TYPES.STRING],buttonText:[3,h.TYPES.STRING],listType:[4,h.TYPES.ENUM,la],sections:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Kb],productListInfo:[6,h.TYPES.MESSAGE,Gb],footerText:[7,h.TYPES.STRING],contextInfo:[8,h.TYPES.MESSAGE,T]};Gb.internalSpec={productSections:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Ib],headerImage:[2,h.TYPES.MESSAGE,Hb],businessOwnerJid:[3,h.TYPES.STRING]};Hb.internalSpec={productId:[1,h.TYPES.STRING],jpegThumbnail:[2,h.TYPES.BYTES]};Ib.internalSpec={title:[1,h.TYPES.STRING],products:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Jb]};Jb.internalSpec={productId:[1,h.TYPES.STRING]};Kb.internalSpec={title:[1,h.TYPES.STRING],rows:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Lb]};Lb.internalSpec={title:[1,h.TYPES.STRING],description:[2,h.TYPES.STRING],rowId:[3,h.TYPES.STRING]};F.internalDefaults={messageVersion:1};F.internalSpec={orderId:[1,h.TYPES.STRING],thumbnail:[2,h.TYPES.BYTES],itemCount:[3,h.TYPES.INT32],status:[4,h.TYPES.ENUM,na],surface:[5,h.TYPES.ENUM,ma],message:[6,h.TYPES.STRING],orderTitle:[7,h.TYPES.STRING],sellerJid:[8,h.TYPES.STRING],token:[9,h.TYPES.STRING],totalAmount1000:[10,h.TYPES.INT64],totalCurrencyCode:[11,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,T],messageVersion:[12,h.TYPES.INT32],orderRequestMessageId:[13,h.TYPES.MESSAGE,i.MessageKeySpec]};G.internalSpec={product:[1,h.TYPES.MESSAGE,Mb],businessOwnerJid:[2,h.TYPES.STRING],catalog:[4,h.TYPES.MESSAGE,Nb],body:[5,h.TYPES.STRING],footer:[6,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,T]};Mb.internalSpec={productImage:[1,h.TYPES.MESSAGE,R],productId:[2,h.TYPES.STRING],title:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],currencyCode:[5,h.TYPES.STRING],priceAmount1000:[6,h.TYPES.INT64],retailerId:[7,h.TYPES.STRING],url:[8,h.TYPES.STRING],productImageCount:[9,h.TYPES.UINT32],firstImageId:[11,h.TYPES.STRING],salePriceAmount1000:[12,h.TYPES.INT64]};Nb.internalSpec={catalogImage:[1,h.TYPES.MESSAGE,R],title:[2,h.TYPES.STRING],description:[3,h.TYPES.STRING]};Ob.internalSpec={selectedId:[1,h.TYPES.STRING],selectedDisplayText:[2,h.TYPES.STRING],contextInfo:[3,h.TYPES.MESSAGE,T],selectedIndex:[4,h.TYPES.UINT32],selectedCarouselCardIndex:[5,h.TYPES.UINT32]};H.internalSpec={fourRowTemplate:[1,h.TYPES.MESSAGE,Pb],hydratedFourRowTemplate:[2,h.TYPES.MESSAGE,I],interactiveMessageTemplate:[5,h.TYPES.MESSAGE,A],contextInfo:[3,h.TYPES.MESSAGE,T],hydratedTemplate:[4,h.TYPES.MESSAGE,I],templateId:[9,h.TYPES.STRING],__oneofs__:{format:["fourRowTemplate","hydratedFourRowTemplate","interactiveMessageTemplate"]}};I.internalSpec={documentMessage:[1,h.TYPES.MESSAGE,O],hydratedTitleText:[2,h.TYPES.STRING],imageMessage:[3,h.TYPES.MESSAGE,R],videoMessage:[4,h.TYPES.MESSAGE,N],locationMessage:[5,h.TYPES.MESSAGE,P],hydratedContentText:[6,h.TYPES.STRING],hydratedFooterText:[7,h.TYPES.STRING],hydratedButtons:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,dd],templateId:[9,h.TYPES.STRING],maskLinkedDevices:[10,h.TYPES.BOOL],__oneofs__:{title:["documentMessage","hydratedTitleText","imageMessage","videoMessage","locationMessage"]}};Pb.internalSpec={documentMessage:[1,h.TYPES.MESSAGE,O],highlyStructuredMessage:[2,h.TYPES.MESSAGE,K],imageMessage:[3,h.TYPES.MESSAGE,R],videoMessage:[4,h.TYPES.MESSAGE,N],locationMessage:[5,h.TYPES.MESSAGE,P],content:[6,h.TYPES.MESSAGE,K],footer:[7,h.TYPES.MESSAGE,K],buttons:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,$c],__oneofs__:{title:["documentMessage","highlyStructuredMessage","imageMessage","videoMessage","locationMessage"]}};J.internalSpec={url:[1,h.TYPES.STRING],fileSha256:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],mediaKey:[4,h.TYPES.BYTES],mimetype:[5,h.TYPES.STRING],height:[6,h.TYPES.UINT32],width:[7,h.TYPES.UINT32],directPath:[8,h.TYPES.STRING],fileLength:[9,h.TYPES.UINT64],mediaKeyTimestamp:[10,h.TYPES.INT64],firstFrameLength:[11,h.TYPES.UINT32],firstFrameSidecar:[12,h.TYPES.BYTES],isAnimated:[13,h.TYPES.BOOL],pngThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T],stickerSentTs:[18,h.TYPES.INT64],isAvatar:[19,h.TYPES.BOOL],isAiSticker:[20,h.TYPES.BOOL],isLottie:[21,h.TYPES.BOOL],accessibilityLabel:[22,h.TYPES.STRING]};Qb.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],accuracyInMeters:[3,h.TYPES.UINT32],speedInMps:[4,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[5,h.TYPES.UINT32],caption:[6,h.TYPES.STRING],sequenceNumber:[7,h.TYPES.INT64],timeOffset:[8,h.TYPES.UINT32],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T]};Rb.internalSpec={serviceType:[1,h.TYPES.ENUM,oa],expiryTimestamp:[2,h.TYPES.INT64]};Sb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};Tb.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};Ub.internalSpec={noteMessage:[4,h.TYPES.MESSAGE,n],currencyCodeIso4217:[1,h.TYPES.STRING],amount1000:[2,h.TYPES.UINT64],requestFrom:[3,h.TYPES.STRING],expiryTimestamp:[5,h.TYPES.INT64],amount:[6,h.TYPES.MESSAGE,hd],background:[7,h.TYPES.MESSAGE,Z]};Vb.internalSpec={noteMessage:[2,h.TYPES.MESSAGE,n],requestMessageKey:[3,h.TYPES.MESSAGE,i.MessageKeySpec],background:[4,h.TYPES.MESSAGE,Z]};K.internalSpec={namespace:[1,h.TYPES.STRING],elementName:[2,h.TYPES.STRING],params:[3,h.FLAGS.REPEATED|h.TYPES.STRING],fallbackLg:[4,h.TYPES.STRING],fallbackLc:[5,h.TYPES.STRING],localizableParams:[6,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Wb],deterministicLg:[7,h.TYPES.STRING],deterministicLc:[8,h.TYPES.STRING],hydratedHsm:[9,h.TYPES.MESSAGE,H]};Wb.internalSpec={"default":[1,h.TYPES.STRING],currency:[2,h.TYPES.MESSAGE,$b],dateTime:[3,h.TYPES.MESSAGE,Xb],__oneofs__:{paramOneof:["currency","dateTime"]}};Xb.internalSpec={component:[1,h.TYPES.MESSAGE,Zb],unixEpoch:[2,h.TYPES.MESSAGE,Yb],__oneofs__:{datetimeOneof:["component","unixEpoch"]}};Yb.internalSpec={timestamp:[1,h.TYPES.INT64]};Zb.internalSpec={dayOfWeek:[1,h.TYPES.ENUM,qa],year:[2,h.TYPES.UINT32],month:[3,h.TYPES.UINT32],dayOfMonth:[4,h.TYPES.UINT32],hour:[5,h.TYPES.UINT32],minute:[6,h.TYPES.UINT32],calendar:[7,h.TYPES.ENUM,pa]};$b.internalSpec={currencyCode:[1,h.TYPES.STRING],amount1000:[2,h.TYPES.INT64]};ac.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Q],contextInfo:[17,h.TYPES.MESSAGE,T]};bc.internalSpec={securityNotificationEnabled:[1,h.TYPES.BOOL]};cc.internalSpec={peerDataOperationRequestType:[1,h.TYPES.ENUM,k],stanzaId:[2,h.TYPES.STRING],peerDataOperationResult:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,dc]};dc.internalSpec={mediaUploadResult:[1,h.TYPES.ENUM,d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType],stickerMessage:[2,h.TYPES.MESSAGE,J],linkPreviewResponse:[3,h.TYPES.MESSAGE,hc],placeholderMessageResendResponse:[4,h.TYPES.MESSAGE,gc],waffleNonceFetchRequestResponse:[5,h.TYPES.MESSAGE,ec],fullHistorySyncOnDemandRequestResponse:[6,h.TYPES.MESSAGE,fc]};ec.internalSpec={nonce:[1,h.TYPES.STRING],waEntFbid:[2,h.TYPES.STRING]};fc.internalSpec={requestMetadata:[1,h.TYPES.MESSAGE,L],responseCode:[2,h.TYPES.ENUM,ra]};gc.internalSpec={webMessageInfoBytes:[1,h.TYPES.BYTES]};hc.internalSpec={url:[1,h.TYPES.STRING],title:[2,h.TYPES.STRING],description:[3,h.TYPES.STRING],thumbData:[4,h.TYPES.BYTES],canonicalUrl:[5,h.TYPES.STRING],matchText:[6,h.TYPES.STRING],previewType:[7,h.TYPES.STRING],hqThumbnail:[8,h.TYPES.MESSAGE,ic]};ic.internalSpec={directPath:[1,h.TYPES.STRING],thumbHash:[2,h.TYPES.STRING],encThumbHash:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestampMs:[5,h.TYPES.INT64],thumbWidth:[6,h.TYPES.INT32],thumbHeight:[7,h.TYPES.INT32]};jc.internalSpec={peerDataOperationRequestType:[1,h.TYPES.ENUM,k],requestStickerReupload:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,oc],requestUrlPreview:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,nc],historySyncOnDemandRequest:[4,h.TYPES.MESSAGE,mc],placeholderMessageResendRequest:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,kc],fullHistorySyncOnDemandRequest:[6,h.TYPES.MESSAGE,lc]};kc.internalSpec={messageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};lc.internalSpec={requestMetadata:[1,h.TYPES.MESSAGE,L],historySyncConfig:[2,h.TYPES.MESSAGE,d("WAWebProtobufsCompanionReg.pb").DeviceProps$HistorySyncConfigSpec]};mc.internalSpec={chatJid:[1,h.TYPES.STRING],oldestMsgId:[2,h.TYPES.STRING],oldestMsgFromMe:[3,h.TYPES.BOOL],onDemandMsgCount:[4,h.TYPES.INT32],oldestMsgTimestampMs:[5,h.TYPES.INT64]};nc.internalSpec={url:[1,h.TYPES.STRING],includeHqThumbnail:[2,h.TYPES.BOOL]};oc.internalSpec={fileSha256:[1,h.TYPES.STRING]};L.internalSpec={requestId:[1,h.TYPES.STRING]};pc.internalSpec={collectionNames:[1,h.FLAGS.REPEATED|h.TYPES.STRING],timestamp:[2,h.TYPES.INT64]};qc.internalSpec={keyIds:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,M]};rc.internalSpec={keys:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,uc]};sc.internalSpec={keyData:[1,h.TYPES.BYTES],fingerprint:[2,h.TYPES.MESSAGE,tc],timestamp:[3,h.TYPES.INT64]};tc.internalSpec={rawId:[1,h.TYPES.UINT32],currentIndex:[2,h.TYPES.UINT32],deviceIndexes:[3,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};M.internalSpec={keyId:[1,h.TYPES.BYTES]};uc.internalSpec={keyId:[1,h.TYPES.MESSAGE,M],keyData:[2,h.TYPES.MESSAGE,sc]};vc.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileLength:[2,h.TYPES.UINT64],mediaKey:[3,h.TYPES.BYTES],fileEncSha256:[4,h.TYPES.BYTES],directPath:[5,h.TYPES.STRING],syncType:[6,h.TYPES.ENUM,sa],chunkOrder:[7,h.TYPES.UINT32],originalMessageId:[8,h.TYPES.STRING],progress:[9,h.TYPES.UINT32],oldestMsgInChunkTimestampSec:[10,h.TYPES.INT64],initialHistBootstrapInlinePayload:[11,h.TYPES.BYTES],peerDataRequestSessionId:[12,h.TYPES.STRING],fullHistorySyncOnDemandRequestMetadata:[13,h.TYPES.MESSAGE,L],encHandle:[14,h.TYPES.STRING]};wc.internalSpec={localChatState:[1,h.TYPES.ENUM,ta]};xc.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],type:[2,h.TYPES.ENUM,ua],ephemeralExpiration:[4,h.TYPES.UINT32],ephemeralSettingTimestamp:[5,h.TYPES.INT64],historySyncNotification:[6,h.TYPES.MESSAGE,vc],appStateSyncKeyShare:[7,h.TYPES.MESSAGE,rc],appStateSyncKeyRequest:[8,h.TYPES.MESSAGE,qc],initialSecurityNotificationSettingSync:[9,h.TYPES.MESSAGE,bc],appStateFatalExceptionNotification:[10,h.TYPES.MESSAGE,pc],disappearingMode:[11,h.TYPES.MESSAGE,$],editedMessage:[14,h.TYPES.MESSAGE,n],timestampMs:[15,h.TYPES.INT64],peerDataOperationRequestMessage:[16,h.TYPES.MESSAGE,jc],peerDataOperationRequestResponseMessage:[17,h.TYPES.MESSAGE,cc],botFeedbackMessage:[18,h.TYPES.MESSAGE,zc],invokerJid:[19,h.TYPES.STRING],requestWelcomeMessageMetadata:[20,h.TYPES.MESSAGE,wc],mediaNotifyMessage:[21,h.TYPES.MESSAGE,md],cloudApiThreadControlNotification:[22,h.TYPES.MESSAGE,yc],lidMigrationMappingSyncMessage:[23,h.TYPES.MESSAGE,nd]};yc.internalSpec={status:[1,h.TYPES.ENUM,va],senderNotificationTimestampMs:[2,h.TYPES.INT64],consumerLid:[3,h.TYPES.STRING],consumerPhoneNumber:[4,h.TYPES.STRING]};zc.internalSpec={messageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],kind:[2,h.TYPES.ENUM,za],text:[3,h.TYPES.STRING],kindNegative:[4,h.TYPES.UINT64],kindPositive:[5,h.TYPES.UINT64],kindReport:[6,h.TYPES.ENUM,wa]};Ac.internalSpec={displayName:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING]};Bc.internalSpec={callKey:[1,h.TYPES.BYTES],conversionSource:[2,h.TYPES.STRING],conversionData:[3,h.TYPES.BYTES],conversionDelaySeconds:[4,h.TYPES.UINT32]};N.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],fileLength:[4,h.TYPES.UINT64],seconds:[5,h.TYPES.UINT32],mediaKey:[6,h.TYPES.BYTES],caption:[7,h.TYPES.STRING],gifPlayback:[8,h.TYPES.BOOL],height:[9,h.TYPES.UINT32],width:[10,h.TYPES.UINT32],fileEncSha256:[11,h.TYPES.BYTES],interactiveAnnotations:[12,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],directPath:[13,h.TYPES.STRING],mediaKeyTimestamp:[14,h.TYPES.INT64],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T],streamingSidecar:[18,h.TYPES.BYTES],gifAttribution:[19,h.TYPES.ENUM,Aa],viewOnce:[20,h.TYPES.BOOL],thumbnailDirectPath:[21,h.TYPES.STRING],thumbnailSha256:[22,h.TYPES.BYTES],thumbnailEncSha256:[23,h.TYPES.BYTES],staticUrl:[24,h.TYPES.STRING],annotations:[25,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],accessibilityLabel:[26,h.TYPES.STRING],processedVideos:[27,h.FLAGS.REPEATED|h.TYPES.MESSAGE,od]};Cc.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],fileSha256:[3,h.TYPES.BYTES],fileLength:[4,h.TYPES.UINT64],seconds:[5,h.TYPES.UINT32],ptt:[6,h.TYPES.BOOL],mediaKey:[7,h.TYPES.BYTES],fileEncSha256:[8,h.TYPES.BYTES],directPath:[9,h.TYPES.STRING],mediaKeyTimestamp:[10,h.TYPES.INT64],contextInfo:[17,h.TYPES.MESSAGE,T],streamingSidecar:[18,h.TYPES.BYTES],waveform:[19,h.TYPES.BYTES],backgroundArgb:[20,h.TYPES.FIXED32],viewOnce:[21,h.TYPES.BOOL],accessibilityLabel:[22,h.TYPES.STRING]};O.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],title:[3,h.TYPES.STRING],fileSha256:[4,h.TYPES.BYTES],fileLength:[5,h.TYPES.UINT64],pageCount:[6,h.TYPES.UINT32],mediaKey:[7,h.TYPES.BYTES],fileName:[8,h.TYPES.STRING],fileEncSha256:[9,h.TYPES.BYTES],directPath:[10,h.TYPES.STRING],mediaKeyTimestamp:[11,h.TYPES.INT64],contactVcard:[12,h.TYPES.BOOL],thumbnailDirectPath:[13,h.TYPES.STRING],thumbnailSha256:[14,h.TYPES.BYTES],thumbnailEncSha256:[15,h.TYPES.BYTES],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T],thumbnailHeight:[18,h.TYPES.UINT32],thumbnailWidth:[19,h.TYPES.UINT32],caption:[20,h.TYPES.STRING],accessibilityLabel:[21,h.TYPES.STRING]};Dc.internalSpec={text:[1,h.TYPES.STRING],matchedText:[2,h.TYPES.STRING],canonicalUrl:[4,h.TYPES.STRING],description:[5,h.TYPES.STRING],title:[6,h.TYPES.STRING],textArgb:[7,h.TYPES.FIXED32],backgroundArgb:[8,h.TYPES.FIXED32],font:[9,h.TYPES.ENUM,Ca],previewType:[10,h.TYPES.ENUM,Ba],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T],doNotPlayInline:[18,h.TYPES.BOOL],thumbnailDirectPath:[19,h.TYPES.STRING],thumbnailSha256:[20,h.TYPES.BYTES],thumbnailEncSha256:[21,h.TYPES.BYTES],mediaKey:[22,h.TYPES.BYTES],mediaKeyTimestamp:[23,h.TYPES.INT64],thumbnailHeight:[24,h.TYPES.UINT32],thumbnailWidth:[25,h.TYPES.UINT32],inviteLinkGroupType:[26,h.TYPES.ENUM,l],inviteLinkParentGroupSubjectV2:[27,h.TYPES.STRING],inviteLinkParentGroupThumbnailV2:[28,h.TYPES.BYTES],inviteLinkGroupTypeV2:[29,h.TYPES.ENUM,l],viewOnce:[30,h.TYPES.BOOL],videoHeight:[31,h.TYPES.UINT32],videoWidth:[32,h.TYPES.UINT32]};P.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING],address:[4,h.TYPES.STRING],url:[5,h.TYPES.STRING],isLive:[6,h.TYPES.BOOL],accuracyInMeters:[7,h.TYPES.UINT32],speedInMps:[8,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[9,h.TYPES.UINT32],comment:[11,h.TYPES.STRING],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T]};Q.internalSpec={displayName:[1,h.TYPES.STRING],vcard:[16,h.TYPES.STRING],contextInfo:[17,h.TYPES.MESSAGE,T]};Ec.internalSpec={note:[1,h.TYPES.STRING],token:[2,h.TYPES.STRING],attachmentType:[3,h.TYPES.ENUM,Da],attachmentMimetype:[4,h.TYPES.STRING],attachmentMediaKey:[5,h.TYPES.BYTES],attachmentMediaKeyTimestamp:[6,h.TYPES.INT64],attachmentFileSha256:[7,h.TYPES.BYTES],attachmentFileEncSha256:[8,h.TYPES.BYTES],attachmentDirectPath:[9,h.TYPES.STRING],attachmentJpegThumbnail:[10,h.TYPES.BYTES]};R.internalSpec={url:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING],caption:[3,h.TYPES.STRING],fileSha256:[4,h.TYPES.BYTES],fileLength:[5,h.TYPES.UINT64],height:[6,h.TYPES.UINT32],width:[7,h.TYPES.UINT32],mediaKey:[8,h.TYPES.BYTES],fileEncSha256:[9,h.TYPES.BYTES],interactiveAnnotations:[10,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],directPath:[11,h.TYPES.STRING],mediaKeyTimestamp:[12,h.TYPES.INT64],jpegThumbnail:[16,h.TYPES.BYTES],contextInfo:[17,h.TYPES.MESSAGE,T],firstScanSidecar:[18,h.TYPES.BYTES],firstScanLength:[19,h.TYPES.UINT32],experimentGroupId:[20,h.TYPES.UINT32],scansSidecar:[21,h.TYPES.BYTES],scanLengths:[22,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[23,h.TYPES.BYTES],midQualityFileEncSha256:[24,h.TYPES.BYTES],viewOnce:[25,h.TYPES.BOOL],thumbnailDirectPath:[26,h.TYPES.STRING],thumbnailSha256:[27,h.TYPES.BYTES],thumbnailEncSha256:[28,h.TYPES.BYTES],staticUrl:[29,h.TYPES.STRING],annotations:[30,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Y],imageSourceType:[31,h.TYPES.ENUM,Ea],accessibilityLabel:[32,h.TYPES.STRING]};S.internalSpec={groupId:[1,h.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,h.TYPES.BYTES]};T.internalSpec={stanzaId:[1,h.TYPES.STRING],participant:[2,h.TYPES.STRING],quotedMessage:[3,h.TYPES.MESSAGE,n],remoteJid:[4,h.TYPES.STRING],mentionedJid:[15,h.FLAGS.REPEATED|h.TYPES.STRING],conversionSource:[18,h.TYPES.STRING],conversionData:[19,h.TYPES.BYTES],conversionDelaySeconds:[20,h.TYPES.UINT32],forwardingScore:[21,h.TYPES.UINT32],isForwarded:[22,h.TYPES.BOOL],quotedAd:[23,h.TYPES.MESSAGE,Ic],placeholderKey:[24,h.TYPES.MESSAGE,i.MessageKeySpec],expiration:[25,h.TYPES.UINT32],ephemeralSettingTimestamp:[26,h.TYPES.INT64],ephemeralSharedSecret:[27,h.TYPES.BYTES],externalAdReply:[28,h.TYPES.MESSAGE,Hc],entryPointConversionSource:[29,h.TYPES.STRING],entryPointConversionApp:[30,h.TYPES.STRING],entryPointConversionDelaySeconds:[31,h.TYPES.UINT32],disappearingMode:[32,h.TYPES.MESSAGE,$],actionLink:[33,h.TYPES.MESSAGE,jd],groupSubject:[34,h.TYPES.STRING],parentGroupJid:[35,h.TYPES.STRING],trustBannerType:[37,h.TYPES.STRING],trustBannerAction:[38,h.TYPES.UINT32],isSampled:[39,h.TYPES.BOOL],groupMentions:[40,h.FLAGS.REPEATED|h.TYPES.MESSAGE,kd],utm:[41,h.TYPES.MESSAGE,Gc],forwardedNewsletterMessageInfo:[43,h.TYPES.MESSAGE,W],businessMessageForwardInfo:[44,h.TYPES.MESSAGE,Jc],smbClientCampaignId:[45,h.TYPES.STRING],smbServerCampaignId:[46,h.TYPES.STRING],dataSharingContext:[47,h.TYPES.MESSAGE,Fc],alwaysShowAdAttribution:[48,h.TYPES.BOOL],featureEligibilities:[49,h.TYPES.MESSAGE,U],entryPointConversionExternalSource:[50,h.TYPES.STRING],entryPointConversionExternalMedium:[51,h.TYPES.STRING]};U.internalDefaults={cannotBeReactedTo:!1,cannotBeRanked:!1,canRequestFeedback:!1};U.internalSpec={cannotBeReactedTo:[1,h.TYPES.BOOL],cannotBeRanked:[2,h.TYPES.BOOL],canRequestFeedback:[3,h.TYPES.BOOL]};Fc.internalSpec={showMmDisclosure:[1,h.TYPES.BOOL],encryptedSignalTokenConsented:[2,h.TYPES.STRING],parameters:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,V]};V.internalSpec={key:[1,h.TYPES.STRING],stringData:[2,h.TYPES.STRING],intData:[3,h.TYPES.INT64],floatData:[4,h.TYPES.FLOAT],contents:[5,h.TYPES.MESSAGE,V]};W.internalSpec={newsletterJid:[1,h.TYPES.STRING],serverMessageId:[2,h.TYPES.INT32],newsletterName:[3,h.TYPES.STRING],contentType:[4,h.TYPES.ENUM,Fa],accessibilityText:[5,h.TYPES.STRING]};Gc.internalSpec={utmSource:[1,h.TYPES.STRING],utmCampaign:[2,h.TYPES.STRING]};Hc.internalSpec={title:[1,h.TYPES.STRING],body:[2,h.TYPES.STRING],mediaType:[3,h.TYPES.ENUM,Ga],thumbnailUrl:[4,h.TYPES.STRING],mediaUrl:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.BYTES],sourceType:[7,h.TYPES.STRING],sourceId:[8,h.TYPES.STRING],sourceUrl:[9,h.TYPES.STRING],containsAutoReply:[10,h.TYPES.BOOL],renderLargerThumbnail:[11,h.TYPES.BOOL],showAdAttribution:[12,h.TYPES.BOOL],ctwaClid:[13,h.TYPES.STRING],ref:[14,h.TYPES.STRING],clickToWhatsappCall:[15,h.TYPES.BOOL],adContextPreviewDismissed:[16,h.TYPES.BOOL]};Ic.internalSpec={advertiserName:[1,h.TYPES.STRING],mediaType:[2,h.TYPES.ENUM,Ha],jpegThumbnail:[16,h.TYPES.BYTES],caption:[17,h.TYPES.STRING]};Jc.internalSpec={businessOwnerJid:[1,h.TYPES.STRING]};Kc.internalSpec={sentiment:[1,h.TYPES.UINT32],behaviorGraph:[2,h.TYPES.STRING],action:[3,h.TYPES.UINT32],intensity:[4,h.TYPES.UINT32],wordCount:[5,h.TYPES.UINT32]};Lc.internalSpec={provider:[1,h.TYPES.ENUM,Ia],pluginType:[2,h.TYPES.ENUM,m],thumbnailCdnUrl:[3,h.TYPES.STRING],profilePhotoCdnUrl:[4,h.TYPES.STRING],searchProviderUrl:[5,h.TYPES.STRING],referenceIndex:[6,h.TYPES.UINT32],expectedLinksCount:[7,h.TYPES.UINT32],searchQuery:[9,h.TYPES.STRING],parentPluginMessageKey:[10,h.TYPES.MESSAGE,i.MessageKeySpec],deprecatedField:[11,h.TYPES.ENUM,m],parentPluginType:[12,h.TYPES.ENUM,m]};Mc.internalSpec={suggestedPrompts:[1,h.FLAGS.REPEATED|h.TYPES.STRING],selectedPromptIndex:[2,h.TYPES.UINT32]};Nc.internalSpec={sessionId:[1,h.TYPES.STRING],sessionSource:[2,h.TYPES.ENUM,Ja]};Oc.internalSpec={fileSha256:[1,h.TYPES.STRING],mediaKey:[2,h.TYPES.STRING],fileEncSha256:[3,h.TYPES.STRING],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64],mimetype:[6,h.TYPES.STRING],orientationType:[7,h.TYPES.ENUM,Ka]};Pc.internalSpec={faceImages:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Oc]};Qc.internalSpec={requestMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],action:[2,h.TYPES.ENUM,Ma],name:[3,h.TYPES.STRING],nextTriggerTimestamp:[4,h.TYPES.UINT64],frequency:[5,h.TYPES.ENUM,La]};Rc.internalSpec={modelType:[1,h.TYPES.ENUM,Oa],premiumModelStatus:[2,h.TYPES.ENUM,Na]};Sc.internalSpec={avatarMetadata:[1,h.TYPES.MESSAGE,Kc],personaId:[2,h.TYPES.STRING],pluginMetadata:[3,h.TYPES.MESSAGE,Lc],suggestedPromptMetadata:[4,h.TYPES.MESSAGE,Mc],invokerJid:[5,h.TYPES.STRING],sessionMetadata:[6,h.TYPES.MESSAGE,Nc],memuMetadata:[7,h.TYPES.MESSAGE,Pc],timezone:[8,h.TYPES.STRING],reminderMetadata:[9,h.TYPES.MESSAGE,Qc],modelMetadata:[10,h.TYPES.MESSAGE,Rc],messageDisclaimerText:[11,h.TYPES.STRING]};Tc.internalSpec={associationType:[1,h.TYPES.ENUM,Pa],parentMessageKey:[2,h.TYPES.MESSAGE,i.MessageKeySpec]};Uc.internalSpec={deviceListMetadata:[1,h.TYPES.MESSAGE,X],deviceListMetadataVersion:[2,h.TYPES.INT32],messageSecret:[3,h.TYPES.BYTES],paddingBytes:[4,h.TYPES.BYTES],messageAddOnDurationInSecs:[5,h.TYPES.UINT32],botMessageSecret:[6,h.TYPES.BYTES],botMetadata:[7,h.TYPES.MESSAGE,Sc],reportingTokenVersion:[8,h.TYPES.INT32],messageAddOnExpiryType:[9,h.TYPES.ENUM,Qa],messageAssociation:[10,h.TYPES.MESSAGE,Tc],capiCreatedGroup:[11,h.TYPES.BOOL],supportPayload:[12,h.TYPES.STRING]};X.internalDefaults={senderAccountType:(i=d("WAWebProtobufsAdv.pb")).ADVEncryptionType.E2EE,receiverAccountType:i.ADVEncryptionType.E2EE};X.internalSpec={senderKeyHash:[1,h.TYPES.BYTES],senderTimestamp:[2,h.TYPES.UINT64],senderKeyIndexes:[3,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32],senderAccountType:[4,h.TYPES.ENUM,i.ADVEncryptionType],receiverAccountType:[5,h.TYPES.ENUM,i.ADVEncryptionType],recipientKeyHash:[8,h.TYPES.BYTES],recipientTimestamp:[9,h.TYPES.UINT64],recipientKeyIndexes:[10,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};Vc.internalSpec={stanzaId:[1,h.TYPES.STRING],message:[2,h.TYPES.MESSAGE,n]};Wc.internalSpec={musicContentMediaId:[1,h.TYPES.STRING],songId:[2,h.TYPES.STRING],author:[3,h.TYPES.STRING],title:[4,h.TYPES.STRING],artworkDirectPath:[5,h.TYPES.STRING],artworkSha256:[6,h.TYPES.BYTES],artworkEncSha256:[7,h.TYPES.BYTES],artistAttribution:[8,h.TYPES.STRING],countryBlocklist:[9,h.TYPES.BYTES]};Xc.internalSpec={embeddedMessage:[1,h.TYPES.MESSAGE,Vc],embeddedMusic:[2,h.TYPES.MESSAGE,Wc],__oneofs__:{content:["embeddedMessage","embeddedMusic"]}};Y.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,Yc],location:[2,h.TYPES.MESSAGE,Zc],newsletter:[3,h.TYPES.MESSAGE,W],embeddedAction:[6,h.TYPES.BOOL],shouldSkipConfirmation:[4,h.TYPES.BOOL],embeddedContent:[5,h.TYPES.MESSAGE,Xc],__oneofs__:{action:["location","newsletter","embeddedAction"]}};Yc.internalSpec={xDeprecated:[1,h.TYPES.INT32],yDeprecated:[2,h.TYPES.INT32],x:[3,h.TYPES.DOUBLE],y:[4,h.TYPES.DOUBLE]};Zc.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};$c.internalSpec={quickReplyButton:[1,h.TYPES.MESSAGE,cd],urlButton:[2,h.TYPES.MESSAGE,bd],callButton:[3,h.TYPES.MESSAGE,ad],index:[4,h.TYPES.UINT32],__oneofs__:{button:["quickReplyButton","urlButton","callButton"]}};ad.internalSpec={displayText:[1,h.TYPES.MESSAGE,K],phoneNumber:[2,h.TYPES.MESSAGE,K]};bd.internalSpec={displayText:[1,h.TYPES.MESSAGE,K],url:[2,h.TYPES.MESSAGE,K]};cd.internalSpec={displayText:[1,h.TYPES.MESSAGE,K],id:[2,h.TYPES.STRING]};dd.internalSpec={quickReplyButton:[1,h.TYPES.MESSAGE,gd],urlButton:[2,h.TYPES.MESSAGE,fd],callButton:[3,h.TYPES.MESSAGE,ed],index:[4,h.TYPES.UINT32],__oneofs__:{hydratedButton:["quickReplyButton","urlButton","callButton"]}};ed.internalSpec={displayText:[1,h.TYPES.STRING],phoneNumber:[2,h.TYPES.STRING]};fd.internalSpec={displayText:[1,h.TYPES.STRING],url:[2,h.TYPES.STRING],consentedUsersUrl:[3,h.TYPES.STRING],webviewPresentation:[4,h.TYPES.ENUM,Ra]};gd.internalSpec={displayText:[1,h.TYPES.STRING],id:[2,h.TYPES.STRING]};hd.internalSpec={value:[1,h.TYPES.INT64],offset:[2,h.TYPES.UINT32],currencyCode:[3,h.TYPES.STRING]};Z.internalSpec={id:[1,h.TYPES.STRING],fileLength:[2,h.TYPES.UINT64],width:[3,h.TYPES.UINT32],height:[4,h.TYPES.UINT32],mimetype:[5,h.TYPES.STRING],placeholderArgb:[6,h.TYPES.FIXED32],textArgb:[7,h.TYPES.FIXED32],subtextArgb:[8,h.TYPES.FIXED32],mediaData:[9,h.TYPES.MESSAGE,id],type:[10,h.TYPES.ENUM,Sa]};id.internalSpec={mediaKey:[1,h.TYPES.BYTES],mediaKeyTimestamp:[2,h.TYPES.INT64],fileSha256:[3,h.TYPES.BYTES],fileEncSha256:[4,h.TYPES.BYTES],directPath:[5,h.TYPES.STRING]};$.internalSpec={initiator:[1,h.TYPES.ENUM,Ua],trigger:[2,h.TYPES.ENUM,Ta],initiatorDeviceJid:[3,h.TYPES.STRING],initiatedByMe:[4,h.TYPES.BOOL]};jd.internalSpec={url:[1,h.TYPES.STRING],buttonTitle:[2,h.TYPES.STRING]};kd.internalSpec={groupJid:[1,h.TYPES.STRING],groupSubject:[2,h.TYPES.STRING]};ld.internalSpec={version:[1,h.TYPES.SFIXED32],encIv:[2,h.TYPES.BYTES],encPayload:[3,h.TYPES.BYTES]};md.internalSpec={expressPathUrl:[1,h.TYPES.STRING],fileEncSha256:[2,h.TYPES.BYTES],fileLength:[3,h.TYPES.UINT64]};nd.internalSpec={encodedMappingPayload:[1,h.TYPES.BYTES]};od.internalSpec={directPath:[1,h.TYPES.STRING],fileSha256:[2,h.TYPES.BYTES],height:[3,h.TYPES.UINT32],width:[4,h.TYPES.UINT32],fileLength:[5,h.TYPES.UINT64],bitrate:[6,h.TYPES.UINT32],quality:[7,h.TYPES.ENUM,a],capabilities:[8,h.FLAGS.REPEATED|h.TYPES.STRING]};g.Message$PlaceholderMessage$PlaceholderType=c;g.Message$BCallMessage$MediaType=e;g.Message$CallLogMessage$CallOutcome=f;g.Message$CallLogMessage$CallType=b;g.Message$ScheduledCallEditMessage$EditType=aa;g.Message$ScheduledCallCreationMessage$CallType=ba;g.Message$EventResponseMessage$EventResponseType=ca;g.Message$PinInChatMessage$Type=da;g.Message$ButtonsResponseMessage$Type=ea;g.Message$ButtonsMessage$Button$Type=fa;g.Message$ButtonsMessage$HeaderType=ga;g.Message$SecretEncryptedMessage$SecretEncType=ha;g.Message$GroupInviteMessage$GroupType=ia;g.Message$InteractiveResponseMessage$Body$Format=j;g.Message$InteractiveMessage$ShopMessage$Surface=ja;g.Message$ListResponseMessage$ListType=ka;g.Message$ListMessage$ListType=la;g.Message$OrderMessage$OrderSurface=ma;g.Message$OrderMessage$OrderStatus=na;g.Message$PaymentInviteMessage$ServiceType=oa;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$CalendarType=pa;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$DayOfWeekType=qa;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$FullHistorySyncOnDemandResponseCode=ra;g.Message$PeerDataOperationRequestType=k;g.Message$HistorySyncNotification$HistorySyncType=sa;g.Message$RequestWelcomeMessageMetadata$LocalChatState=ta;g.Message$ProtocolMessage$Type=ua;g.Message$CloudAPIThreadControlNotification$CloudAPIThreadControl=va;g.Message$BotFeedbackMessage$ReportKind=wa;g.Message$BotFeedbackMessage$BotFeedbackKindMultiplePositive=xa;g.Message$BotFeedbackMessage$BotFeedbackKindMultipleNegative=ya;g.Message$BotFeedbackMessage$BotFeedbackKind=za;g.Message$VideoMessage$Attribution=Aa;g.Message$ExtendedTextMessage$InviteLinkGroupType=l;g.Message$ExtendedTextMessage$PreviewType=Ba;g.Message$ExtendedTextMessage$FontType=Ca;g.Message$InvoiceMessage$AttachmentType=Da;g.Message$ImageMessage$ImageSourceType=Ea;g.ContextInfo$ForwardedNewsletterMessageInfo$ContentType=Fa;g.ContextInfo$ExternalAdReplyInfo$MediaType=Ga;g.ContextInfo$AdReplyInfo$MediaType=Ha;g.BotPluginMetadata$PluginType=m;g.BotPluginMetadata$SearchProvider=Ia;g.BotSessionSource=Ja;g.BotMediaMetadata$OrientationType=Ka;g.BotReminderMetadata$ReminderFrequency=La;g.BotReminderMetadata$ReminderAction=Ma;g.BotModelMetadata$PremiumModelStatus=Na;g.BotModelMetadata$ModelType=Oa;g.MessageAssociation$AssociationType=Pa;g.MessageContextInfo$MessageAddonExpiryType=Qa;g.HydratedTemplateButton$HydratedURLButton$WebviewPresentationType=Ra;g.PaymentBackground$Type=Sa;g.DisappearingMode$Trigger=Ta;g.DisappearingMode$Initiator=Ua;g.KeepType=Va;g.ProcessedVideo$VideoQuality=a;g.MessageSpec=n;g.Message$StickerPackMessageSpec=o;g.Message$StickerPackMessage$StickerSpec=p;g.Message$AlbumMessageSpec=q;g.Message$PlaceholderMessageSpec=r;g.Message$BCallMessageSpec=s;g.Message$MessageHistoryBundleSpec=t;g.Message$CallLogMessageSpec=u;g.Message$CallLogMessage$CallParticipantSpec=v;g.Message$ScheduledCallEditMessageSpec=Wa;g.Message$ScheduledCallCreationMessageSpec=Xa;g.Message$EventResponseMessageSpec=Ya;g.Message$EncEventResponseMessageSpec=Za;g.Message$EventMessageSpec=$a;g.Message$CommentMessageSpec=ab;g.Message$EncCommentMessageSpec=bb;g.Message$EncReactionMessageSpec=cb;g.Message$PinInChatMessageSpec=db;g.Message$KeepInChatMessageSpec=eb;g.Message$PollResultSnapshotMessageSpec=fb;g.Message$PollResultSnapshotMessage$PollVoteSpec=gb;g.Message$PollVoteMessageSpec=hb;g.Message$PollEncValueSpec=ib;g.Message$PollUpdateMessageMetadataSpec=jb;g.Message$PollUpdateMessageSpec=kb;g.Message$PollCreationMessageSpec=w;g.Message$PollCreationMessage$OptionSpec=lb;g.Message$StickerSyncRMRMessageSpec=mb;g.Message$ReactionMessageSpec=nb;g.Message$ButtonsResponseMessageSpec=ob;g.Message$ButtonsMessageSpec=pb;g.Message$ButtonsMessage$ButtonSpec=qb;g.Message$ButtonsMessage$Button$NativeFlowInfoSpec=rb;g.Message$ButtonsMessage$Button$ButtonTextSpec=sb;g.Message$SecretEncryptedMessageSpec=tb;g.Message$FutureProofMessageSpec=x;g.Message$DeviceSentMessageSpec=ub;g.Message$RequestPhoneNumberMessageSpec=vb;g.Message$NewsletterAdminInviteMessageSpec=wb;g.Message$GroupInviteMessageSpec=xb;g.Message$InteractiveResponseMessageSpec=yb;g.Message$InteractiveResponseMessage$NativeFlowResponseMessageSpec=y;g.Message$InteractiveResponseMessage$BodySpec=z;g.Message$InteractiveMessageSpec=A;g.Message$InteractiveMessage$CarouselMessageSpec=B;g.Message$InteractiveMessage$NativeFlowMessageSpec=C;g.Message$InteractiveMessage$NativeFlowMessage$NativeFlowButtonSpec=zb;g.Message$InteractiveMessage$CollectionMessageSpec=D;g.Message$InteractiveMessage$ShopMessageSpec=E;g.Message$InteractiveMessage$FooterSpec=Ab;g.Message$InteractiveMessage$BodySpec=Bb;g.Message$InteractiveMessage$HeaderSpec=Cb;g.Message$ListResponseMessageSpec=Db;g.Message$ListResponseMessage$SingleSelectReplySpec=Eb;g.Message$ListMessageSpec=Fb;g.Message$ListMessage$ProductListInfoSpec=Gb;g.Message$ListMessage$ProductListHeaderImageSpec=Hb;g.Message$ListMessage$ProductSectionSpec=Ib;g.Message$ListMessage$ProductSpec=Jb;g.Message$ListMessage$SectionSpec=Kb;g.Message$ListMessage$RowSpec=Lb;g.Message$OrderMessageSpec=F;g.Message$ProductMessageSpec=G;g.Message$ProductMessage$ProductSnapshotSpec=Mb;g.Message$ProductMessage$CatalogSnapshotSpec=Nb;g.Message$TemplateButtonReplyMessageSpec=Ob;g.Message$TemplateMessageSpec=H;g.Message$TemplateMessage$HydratedFourRowTemplateSpec=I;g.Message$TemplateMessage$FourRowTemplateSpec=Pb;g.Message$StickerMessageSpec=J;g.Message$LiveLocationMessageSpec=Qb;g.Message$PaymentInviteMessageSpec=Rb;g.Message$CancelPaymentRequestMessageSpec=Sb;g.Message$DeclinePaymentRequestMessageSpec=Tb;g.Message$RequestPaymentMessageSpec=Ub;g.Message$SendPaymentMessageSpec=Vb;g.Message$HighlyStructuredMessageSpec=K;g.Message$HighlyStructuredMessage$HSMLocalizableParameterSpec=Wb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTimeSpec=Xb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeUnixEpochSpec=Yb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponentSpec=Zb;g.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMCurrencySpec=$b;g.Message$ContactsArrayMessageSpec=ac;g.Message$InitialSecurityNotificationSettingSyncSpec=bc;g.Message$PeerDataOperationRequestResponseMessageSpec=cc;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResultSpec=dc;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$WaffleNonceFetchResponseSpec=ec;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$FullHistorySyncOnDemandRequestResponseSpec=fc;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$PlaceholderMessageResendResponseSpec=gc;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponseSpec=hc;g.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponse$LinkPreviewHighQualityThumbnailSpec=ic;g.Message$PeerDataOperationRequestMessageSpec=jc;g.Message$PeerDataOperationRequestMessage$PlaceholderMessageResendRequestSpec=kc;g.Message$PeerDataOperationRequestMessage$FullHistorySyncOnDemandRequestSpec=lc;g.Message$PeerDataOperationRequestMessage$HistorySyncOnDemandRequestSpec=mc;g.Message$PeerDataOperationRequestMessage$RequestUrlPreviewSpec=nc;g.Message$PeerDataOperationRequestMessage$RequestStickerReuploadSpec=oc;g.Message$FullHistorySyncOnDemandRequestMetadataSpec=L;g.Message$AppStateFatalExceptionNotificationSpec=pc;g.Message$AppStateSyncKeyRequestSpec=qc;g.Message$AppStateSyncKeyShareSpec=rc;g.Message$AppStateSyncKeyDataSpec=sc;g.Message$AppStateSyncKeyFingerprintSpec=tc;g.Message$AppStateSyncKeyIdSpec=M;g.Message$AppStateSyncKeySpec=uc;g.Message$HistorySyncNotificationSpec=vc;g.Message$RequestWelcomeMessageMetadataSpec=wc;g.Message$ProtocolMessageSpec=xc;g.Message$CloudAPIThreadControlNotificationSpec=yc;g.Message$BotFeedbackMessageSpec=zc;g.Message$ChatSpec=Ac;g.Message$CallSpec=Bc;g.Message$VideoMessageSpec=N;g.Message$AudioMessageSpec=Cc;g.Message$DocumentMessageSpec=O;g.Message$ExtendedTextMessageSpec=Dc;g.Message$LocationMessageSpec=P;g.Message$ContactMessageSpec=Q;g.Message$InvoiceMessageSpec=Ec;g.Message$ImageMessageSpec=R;g.Message$SenderKeyDistributionMessageSpec=S;g.ContextInfoSpec=T;g.ContextInfo$FeatureEligibilitiesSpec=U;g.ContextInfo$DataSharingContextSpec=Fc;g.ContextInfo$DataSharingContext$ParametersSpec=V;g.ContextInfo$ForwardedNewsletterMessageInfoSpec=W;g.ContextInfo$UTMInfoSpec=Gc;g.ContextInfo$ExternalAdReplyInfoSpec=Hc;g.ContextInfo$AdReplyInfoSpec=Ic;g.ContextInfo$BusinessMessageForwardInfoSpec=Jc;g.BotAvatarMetadataSpec=Kc;g.BotPluginMetadataSpec=Lc;g.BotSuggestedPromptMetadataSpec=Mc;g.BotSessionMetadataSpec=Nc;g.BotMediaMetadataSpec=Oc;g.BotMemuMetadataSpec=Pc;g.BotReminderMetadataSpec=Qc;g.BotModelMetadataSpec=Rc;g.BotMetadataSpec=Sc;g.MessageAssociationSpec=Tc;g.MessageContextInfoSpec=Uc;g.DeviceListMetadataSpec=X;g.EmbeddedMessageSpec=Vc;g.EmbeddedMusicSpec=Wc;g.EmbeddedContentSpec=Xc;g.InteractiveAnnotationSpec=Y;g.PointSpec=Yc;g.LocationSpec=Zc;g.TemplateButtonSpec=$c;g.TemplateButton$CallButtonSpec=ad;g.TemplateButton$URLButtonSpec=bd;g.TemplateButton$QuickReplyButtonSpec=cd;g.HydratedTemplateButtonSpec=dd;g.HydratedTemplateButton$HydratedCallButtonSpec=ed;g.HydratedTemplateButton$HydratedURLButtonSpec=fd;g.HydratedTemplateButton$HydratedQuickReplyButtonSpec=gd;g.MoneySpec=hd;g.PaymentBackgroundSpec=Z;g.PaymentBackground$MediaDataSpec=id;g.DisappearingModeSpec=$;g.ActionLinkSpec=jd;g.GroupMentionSpec=kd;g.MessageSecretMessageSpec=ld;g.MediaNotifyMessageSpec=md;g.LIDMigrationMappingSyncMessageSpec=nd;g.ProcessedVideoSpec=od}),98);
__d("WAWebComposeContentsType",["WAArrayBufferUtils","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.ctwaContext;a=babelHelpers.objectWithoutPropertiesLoose(a,["ctwaContext"]);a;if(b!=null){var c=b.conversionData,e=b.mediaType;b=babelHelpers.objectWithoutPropertiesLoose(b,["conversionData","mediaType"]);b;c!=null&&(b.conversionData=d("WAArrayBufferUtils").arrayBufferToString(c));e!=null&&(b.mediaType=e);a.ctwaContext=b}return a}function b(a){if(a==null)return a;var b=a.ctwaContext;a=babelHelpers.objectWithoutPropertiesLoose(a,["ctwaContext"]);a;if(b!=null){var c=b.conversionData,e=b.mediaType;b=babelHelpers.objectWithoutPropertiesLoose(b,["conversionData","mediaType"]);b;c!=null&&(b.conversionData=d("WAArrayBufferUtils").stringToArrayBuffer(c));e!=null&&(b.mediaType=d("WAWebProtobufsE2E.pb").ContextInfo$ExternalAdReplyInfo$MediaType.cast(e));a.ctwaContext=b}return a}g.asSerialisableComposeContentsType=a;g.asComposeContentsType=b}),98);
__d("WAWebSessionStorage",[],(function(a,b,c,d,e,f){var g;try{g=window.sessionStorage}catch(a){}a=g;f["default"]=a}),66);
__d("WAWebTemporaryStorage",["Promise","WANullthrows","WATypeUtils","WAWebSessionStorage","WAWebUserPrefsKeys","lodash"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(){this.dataStore={}}var d=a.prototype;d.setItem=function(a,b){this.dataStore[a]=b,c("WANullthrows")(c("WAWebSessionStorage")).setItem(a,b)};d.getItem=function(a,b){b===void 0&&(b=!1);return this.dataStore[a]==null||b?c("WANullthrows")(c("WAWebSessionStorage")).getItem(a):this.dataStore[a]};d.removeItem=function(a){delete this.dataStore[a],c("WANullthrows")(c("WAWebSessionStorage")).removeItem(a)};d.clear=function(a){this.dataStore={};c("WANullthrows")(c("WAWebSessionStorage")).clear();a&&c("lodash").forOwn(a,function(a,b){c("WANullthrows")(c("WAWebSessionStorage")).setItem(b,a)});return(h||(h=b("Promise"))).resolve()};return a}();e=function(){function a(){this.dataStore={}}var c=a.prototype;c.setItem=function(a,b){this.dataStore[a]=b};c.getItem=function(a){return this.dataStore[a]===void 0?null:this.dataStore[a]};c.removeItem=function(a){delete this.dataStore[a]};c.clear=function(){this.dataStore={};return(h||(h=b("Promise"))).resolve()};return a}();f=function(){try{var a=c("WANullthrows")(c("WAWebSessionStorage"));a.setItem(d("WAWebUserPrefsKeys").KEYS.STORAGE_TEST,d("WAWebUserPrefsKeys").KEYS.STORAGE_TEST);return d("WATypeUtils").isFunction(a.clear)}catch(a){return!1}};f=f()?new a():new e();a=f;g["default"]=a}),98);
__d("WAWebUserPrefsTypes",["$InternalEnum","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({RECENT_STICKER_INITIALIZED:"recent_sticker_initialized"});e=a({SUCCESS:"success",NEED_REQUEST_BOOTSTRAP:"need_request_bootstrap"});f=a({RECEIVED:"received",NOTIFICATION_STORED:"notification_stored",DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DECODED:"decoded",MESSAGE_PREPROCESSED:"message_preprocessed",ENCRYPTED:"encrypted",APPLIED:"applied"});d=[(b=d("WAWebUserPrefsKeys")).KEYS.LANG_FROM_USER,b.KEYS.LANG_FROM_PHONE,b.KEYS.WHATSAPP_MUTEX,b.KEYS.PRESERVED_USER_KEYS,b.KEYS.THEME,b.KEYS.SYSTEM_THEME_MODE,b.KEYS.AUTO_LOGOUT_ENABLED,b.KEYS.WA_WEB_ID_UPSELL_SNOOZE_UNTIL];var h=[];b=[b.COLLECTIONS_KEYS.EMOJI_VARIANT_COLLECTION,b.COLLECTIONS_KEYS.RECENT_EMOJI_COLLECTION,b.COLLECTIONS_KEYS.RECENT_REACTIONS_COLLECTION,b.COLLECTIONS_KEYS.CHAT_PREFERENCE_COLLECTION,b.KEYS.GLOBAL_MUTE_NOTIFICATIONS,b.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED,b.KEYS.OUTGOING_MESSAGE_SOUND,b.KEYS.GLOBAL_MUTE_PREVIEWS,b.KEYS.GLOBAL_COLLAPSE_MUTED,b.KEYS.GLOBAL_MUTE_SOUNDS,b.KEYS.AUTO_DOWNLOAD_PHOTOS,b.KEYS.AUTO_DOWNLOAD_VIDEOS,b.KEYS.AUTO_DOWNLOAD_AUDIO,b.KEYS.AUTO_DOWNLOAD_DOCUMENTS,b.KEYS.TOS_3,b.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT,b.KEYS.POSTCODE_TOOLTIP_VIEW_COUNT,b.KEYS.PERSISTENT_EXPIRING_ID];var i=a.Mirrored(["CPF","CNPJ","EMAIL","PHONE","EVP"]),j=a({PIX_KEY:"pix_key"});a=a.Mirrored(["ACTIVE","INACTIVE"]);g.NonCriticalDataSyncStatusType=c;g.RecentStickerInitializedStatusType=e;g.HistorySyncSingleChunkStatusType=f;g.LS_PRESERVE_KEYS=d;g.TS_PRESERVE_KEYS=h;g.LS_PRESERVE_USER_KEYS=b;g.PixKeyType=i;g.WACustomPaymentMethodType=j;g.PaymentPartnerStatusType=a}),98);
__d("WAWebUserPrefsStore",["WALogger","WAMd5","WAWebComposeContentsType","WAWebPermanentStorage","WAWebTemporaryStorage","WAWebUserPrefsBase","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsTypes","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["userPrefs: Me has not loaded yet."]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.getMe=function(){return d("WAWebUserPrefsMeUser").getMaybeMeUser()};e.getKeys=function(a,b,d){d===void 0&&(d=!1);return c("lodash").zipObject(b,b.map(function(b){return a.getItem(b,d)}))};e.updatePreservedUserKeys=function(){var b=this,e=this.getMe();if(e==null)return;var f=e.toString();e=a.prototype.get.call(this,d("WAWebUserPrefsKeys").KEYS.PRESERVED_USER_KEYS,{storage:c("WAWebPermanentStorage")});e=e instanceof Array?e:[];var g=d("WAWebUserPrefsTypes").LS_PRESERVE_USER_KEYS.map(function(a){return c("WAMd5")(b.$UserPreferencesStore1(f,a))});a.prototype.set.call(this,d("WAWebUserPrefsKeys").KEYS.PRESERVED_USER_KEYS,c("lodash").union(e,g),{storage:c("WAWebPermanentStorage")})};e.getPSIgnoringCache=function(b){return a.prototype.get.call(this,b,{storage:c("WAWebPermanentStorage"),ignoreCache:!0})};e.getTS=function(b){return a.prototype.get.call(this,b,{storage:c("WAWebTemporaryStorage")})};e.setTS=function(b,d){a.prototype.set.call(this,b,d,{storage:c("WAWebTemporaryStorage")})};e.setUserSession=function(b,e){b=this.$UserPreferencesStore2(b);b!=null&&a.prototype.set.call(this,b,d("WAWebComposeContentsType").asSerialisableComposeContentsType(e),{storage:c("WAWebTemporaryStorage")})};e.getUserSession=function(b){b=this.$UserPreferencesStore2(b);return b!=null?a.prototype.get.call(this,b,{storage:c("WAWebTemporaryStorage")}):null};e.clearUserSessionItem=function(a){a=this.$UserPreferencesStore2(a);a!=null&&c("WAWebTemporaryStorage").removeItem(a)};e.getCollection=function(a){return this.getUser(a)};e.setCollection=function(a,b,c){c===void 0&&(c=!1),this.getMe()!=null&&!c&&this.setUser(a,b)};e.getUser=function(b){b=this.$UserPreferencesStore2(b);return b!=null?a.prototype.get.call(this,b):null};e.setUser=function(b,c,d){b=this.$UserPreferencesStore2(b);b!=null&&a.prototype.set.call(this,b,c,d)};e.$UserPreferencesStore2=function(a){var b=this.getMe();if(!b){d("WALogger").WARN(h());return null}b=c("WAMd5")(this.$UserPreferencesStore1(b.toString(),a));return b};e.$UserPreferencesStore1=function(a,b){return[a,b].join(":")};return b}(d("WAWebUserPrefsBase").UserPreferencesStoreBase);b=new a();e=b;g["default"]=e}),98);
__d("WAWebSchemaUserPrefs",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("user-prefs").version(d("WAWebModelStorageVersions").userPrefsCreateTable(),[b("key"),c("value")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("user-prefs")}g.addTable=a;g.getUserPrefsTable=b}),98);
__d("WAWebApiUserPrefs",["WAWebSchemaUserPrefs"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaUserPrefs").getUserPrefsTable().createOrReplace(a)}function b(a){return d("WAWebSchemaUserPrefs").getUserPrefsTable().remove(a)}function c(a){return d("WAWebSchemaUserPrefs").getUserPrefsTable().bulkCreateOrReplace(a)}function e(){return d("WAWebSchemaUserPrefs").getUserPrefsTable().clear()}function f(){return d("WAWebSchemaUserPrefs").getUserPrefsTable().all()}g.createOrReplaceUserPref=a;g.removeUserPref=b;g.bulkCreateOrReplaceUserPrefs=c;g.clearUserPrefs=e;g.allUserPrefsIdb=f}),98);
__d("WAWebUserPrefsIndexedDBStorage",["WALogger","WANullthrows","WAWebApiUserPrefs","WAWebUserPrefsKeys","WAWebUserPrefsPostProcessors","WAWebUserPrefsPreProcessors","WAWebUserPrefsStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["An error ocurred while trying to create multiple user preferences in IndexedDB. Err: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["An error ocurred while trying to clear all user preferences from IndexedDB. Err: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["An error ocurred while trying to remove user preference '","' from IndexedDB. Err: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["An error ocurred while trying to insert the user preference '","' in IndexedDB. Err: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsIndexedDBStorage: attempting to bulk set before initialization"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsIndexedDBStorage: remove(",") called before init."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsIndexedDBStorage: get(",") called before init"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsIndexedDBStorage: set(",") called before init"]);o=function(){return a};return a}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebApiUserPrefs").createOrReplaceUserPref(a)}catch(b){d("WALogger").WARN(k(),a.key,b)}});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebApiUserPrefs").removeUserPref(a)}catch(b){d("WALogger").WARN(j(),a,b)}});return s.apply(this,arguments)}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield d("WAWebApiUserPrefs").clearUserPrefs()}catch(a){d("WALogger").WARN(i(),a)}});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebApiUserPrefs").bulkCreateOrReplaceUserPrefs(a)}catch(a){d("WALogger").WARN(h(),a)}});return w.apply(this,arguments)}function x(a){var b=a;Object.values(d("WAWebUserPrefsKeys").HASHED_KEYS).some(function(b){return b===a})&&(b=d("WAWebUserPrefsStorageUtils").hashUserPrefKey(a));return b}a=function(){function a(){this.loadedUserPrefs=null}var e=a.prototype;e.init=function(){var a=this;this.$1==null&&(this.$1=d("WAWebApiUserPrefs").allUserPrefsIdb().then(function(b){b=Object.fromEntries(b.map(function(a){var b=a.key;a=a.value;return[b,a]}));a.loadedUserPrefs=b}));return this.$1};e.set=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=x(a);if(e==null)return;this.loadedUserPrefs==null&&(d("WALogger").WARN(o(),a).sendLogs("userprefs-idb-set-before-init"),yield this.init());var f=c("WANullthrows")(this.loadedUserPrefs);a=d("WAWebUserPrefsPreProcessors").preProcessUserPref(a,b);f[e]=a;yield p({key:e,value:a})});function e(b,c){return a.apply(this,arguments)}return e}();e.get=function(a){if(this.loadedUserPrefs==null){d("WALogger").ERROR(n(),a).sendLogs("userprefs-idb-get-before-init");return null}var b=this.loadedUserPrefs,c=x(a);if(c==null)return;var e,f=c in b;f&&(e=b[c]);if(e==null)return null;f=d("WAWebUserPrefsPostProcessors").postProcessUserPref(a,e);return f};e.remove=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.loadedUserPrefs==null&&(d("WALogger").WARN(m(),a).sendLogs("userprefs-idb-remove-before-init"),yield this.init());var b=c("WANullthrows")(this.loadedUserPrefs);a=x(a);if(a==null)return;delete b[a];yield r(a)});function e(b){return a.apply(this,arguments)}return e}();e.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.loadedUserPrefs={},yield t()});function c(){return a.apply(this,arguments)}return c}();e.bulkSetItemsToIndexedDB=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(b){var a=x(b.key);if(a==null)return;return{key:a,value:d("WAWebUserPrefsPreProcessors").preProcessUserPref(b.key,b.value)}}).filter(Boolean);yield v(a);this.loadedUserPrefs==null&&(d("WALogger").WARN(l()).sendLogs("userprefs-idb-bulk-set-before-init"),yield this.init());var b=c("WANullthrows")(this.loadedUserPrefs);for(a of a){var e=a.key,f=a.value;b[e]=f}});function e(b){return a.apply(this,arguments)}return e}();return a}();e=new a();g.userPrefsIdb=e}),98);
__d("WAWebUserPrefsLocalStorage",["WALogger","WAWebLocalStorage","WAWebUserPrefsKeys","WAWebUserPrefsPostProcessors","WAWebUserPrefsPreProcessors","WAWebUserPrefsStorageUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getItemFromLocalStorage: error while trying to parse a user preference"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["setItemToLocalStorage: tried to store a value that is not stringifiable"]);i=function(){return a};return a}function j(a){var b=a;Object.values(d("WAWebUserPrefsKeys").HASHED_KEYS).some(function(b){return b===a})&&(b=d("WAWebUserPrefsStorageUtils").hashUserPrefKey(a));return b}a=function(){function a(){this.$1={}}var b=a.prototype;b.setItemToLocalStorage=function(a,b){if(c("WAWebLocalStorage")==null)return;var e=j(a);if(e==null)return;a=JSON.stringify(d("WAWebUserPrefsPreProcessors").preProcessUserPref(a,b));if(a==null){d("WALogger").DEV(i());return}this.$1[e]=a;c("WAWebLocalStorage").setItem(e,a)};b.getItemFromLocalStorage=function(a){var b=j(a);if(b==null)return;var e=this.$1[b];e==null&&c("WAWebLocalStorage")!=null&&(e=c("WAWebLocalStorage").getItem(b));if(e==null)return null;this.$1[b]=e;var f;try{f=JSON.parse(e)}catch(b){d("WALogger").DEV(h()).sendLogs("get-local-storage-item-parse-error");this.removeItemFromLocalStorage(a);return null}b=d("WAWebUserPrefsPostProcessors").postProcessUserPref(a,f);return b};b.removeItemFromLocalStorage=function(a){a=j(a);if(a==null)return;delete this.$1[a];c("WAWebLocalStorage")!=null&&c("WAWebLocalStorage").removeItem(a)};b.clearLocalStorage=function(){this.$1={},c("WAWebLocalStorage")!=null&&c("WAWebLocalStorage").clear()};return a}();b=new a();g["default"]=b}),98);
__d("WAWebUserPrefsStorageUtils",["WALogger","WAMd5","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["hashUserPrefKey: Me has not loaded yet."]);h=function(){return a};return a}function a(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(!b){d("WALogger").WARN(h());return}b=c("WAMd5")(b.toString()+":"+a);return b}g.hashUserPrefKey=a}),98);
__d("WAWebABPropsCAPISupportNumber",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebABProps").getABPropConfigValue("in_app_support_capi_number_prefixes");return b==null||b===""?!1:b.split(",").some(function(b){return a.startsWith(b)})}g["default"]=a}),98);
__d("WAWebABPropsSupportGroup",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebABProps").getABPropConfigValue("in_app_support_v2_number_prefixes");return b==null||b===""?!1:b.split(",").some(function(b){return a.startsWith(b)})}g["default"]=a}),98);
__d("WAWebWidValidator",["$InternalEnum","WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateAndGetParts: Domain not supported"]);h=function(){return a};return a}var i=b("$InternalEnum")({BROADCAST:"broadcast",CALL:"call",C_US:"c.us",G_US:"g.us",LID:"lid",MSGR:"msgr",S_WHATSAPP_NET:"s.whatsapp.net",NEWSLETTER:"newsletter",BOT:"bot"});e=["status","location","chat"];f=/[1-9][0-9]{9}/;b=/[0-9]{1,2}/;var j=/[1-9][0-9]{0,2}/,k=/[1-9][0-9]{0,14}/,l=/0/,m=/[1-9][0-9]{0,19}/,n=/(?!10)[1-9][0-9]{4,19}/,o=/^([0-9a-f]{18,32})$/i,p=new RegExp("^("+n.source+"[-]"+f.source+"$|^"+m.source+")$"),q=new RegExp("^("+m.source+"$|"+e.map(function(a){return"^"+a+"$"}).join("|")+")","i"),r=new RegExp("^(0$|^"+n.source+")([.]"+l.source+")?(?:[:]("+b.source+"))?$"),s=new RegExp("^("+k.source+")([.]"+l.source+")?(?:[:]("+b.source+"))?$"),t=new RegExp("^("+m.source+")(?:[:]("+j.source+"))?$"),u=new RegExp("^("+n.source+")(?=:99$)"),v=new RegExp("^("+k.source+")(?=:99$)"),w=new RegExp("^("+m.source+")$"),x=new RegExp("^("+m.source+")(?::(0))?$");function y(a){switch(a){case i.BROADCAST:return q;case i.CALL:return o;case i.C_US:return r;case i.G_US:return p;case i.LID:return s;case i.MSGR:return t;case i.S_WHATSAPP_NET:return r;case i.NEWSLETTER:return w;case i.BOT:return x}}function a(a,b){b===void 0&&(b=!1);if(a==null)return!1;var c=a.match(/(.*)@(.*)/);if(c==null)return a==="call"||a==="s.whatsapp.net"?!0:!1;a=c[1];c=c[2];if(Boolean(0)||b){if(c==="hosted")return u.test(a);if(c==="hosted.lid")return v.test(a)}b=i.cast(c);if(b==null)return!1;c=y(b);return c.test(a)}function c(a,b){b===void 0&&(b=!1);if(a==null)return null;var c=a.match(/(.*)@(.*)/);if(Boolean(0)||b){if(c&&c[2]==="hosted"){b=c[1];b=b.match(u);return!b?null:{serverPart:"hosted",userPart:b[1],devicePart:"99"}}if(c&&c[2]==="hosted.lid"){b=c[1];b=b.match(v);return!b?null:{serverPart:"hosted.lid",userPart:b[1],devicePart:"99"}}}if(c==null)return a==="call"||a==="s.whatsapp.net"?{serverPart:a}:null;b=c[1];a=i.cast(c[2]);if(a==null){d("WALogger").WARN(h());return null}c=y(a);b=b.match(c);if(!b)return null;switch(a){case i.BROADCAST:return{serverPart:i.BROADCAST,userPart:b[1]};case i.CALL:return{serverPart:i.CALL,userPart:b[1]};case i.G_US:return{serverPart:i.G_US,userPart:b[1]};case i.NEWSLETTER:return{serverPart:i.NEWSLETTER,userPart:b[1]};case i.C_US:return{serverPart:i.C_US,userPart:b[1],devicePart:b[3]};case i.S_WHATSAPP_NET:return{serverPart:i.S_WHATSAPP_NET,userPart:b[1],devicePart:b[3]};case i.LID:return{serverPart:i.LID,userPart:b[1],devicePart:b[3]};case i.MSGR:return{serverPart:i.LID,userPart:b[1],devicePart:b[2]};case i.BOT:return{serverPart:i.BOT,userPart:b[1],devicePart:b[2]}}return null}g.Domains=i;g.validateWid=a;g.validateAndGetParts=c}),98);
__d("WAWebWid",["WAJids","WALogger","WATypeUtils","WAWebABPropsCAPISupportNumber","WAWebABPropsSupportGroup","WAWebBizCoexGatingUtils","WAWebWidValidator","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["wid:isXWid called on typeof: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["isSameAccount check for hosted : "," : ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["@hosted jid must have device id of 99"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["wrong server for wid with device present: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["wid represents server and should not be used: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid wid: ",""]);m=function(){return a};return a}var n="server@c.us",o="0@c.us",p="16508638904@c.us",q="16505361212@c.us",r=/^1313555\d{4}$|^131655500\d{2}$/,s=99,t=4;a=function(){function a(a,b){b=b.intentionallyUsePrivateConstructor;if(!b)throw c("err")("You should use WidFactory.createWid() instead of the Wid constructor. If you absolutely must use the constructor, pass {intentionallyUsePrivateConstructor: true} as a second parameter.");b=d("WAWebWidValidator").validateAndGetParts(a,d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled());if(b==null){d("WALogger").LOG(m(),a);throw c("err")("wid error: invalid wid")}var e=[],f=b.userPart,g=b.devicePart;b=b.serverPart.toLowerCase();var h;switch(b){case"s.whatsapp.net":h="c.us";break;default:h=b;break}this.server=h;if(f==null){d("WALogger").LOG(l(),a);throw c("err")("wid error: wid represents server and should not be used")}this.user=f;e.push(this.user);if(g!=null){if(this.server!=="c.us"&&this.server!=="lid"&&this.server!=="hosted"&&this.server!=="hosted.lid"&&this.server!=="bot"){d("WALogger").LOG(k(),a);throw c("err")("wid error: wrong server for wid with device present")}b=parseInt(g,10);b&&(e.push(":"),e.push(b),this.device=b)}if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(this.isHosted()&&(this.device==null||this.device!==s))){d("WALogger").LOG(j());throw c("err")("wid error: unexpected device id in hosted wid")}e.push("@");e.push(this.server);this._serialized=e.join("")}var b=a.prototype;b.getUserPartForLog=function(){if(!c("gkx")("26258"))return this.user;if(this.isGroup()){var a=this.user.split("-");if(a.length===2){var b=a[0];a=a[1];return b.slice(-t)+"-"+a}}return this.user.slice(-t)};b.toString=function(a){if(a){var b,c,d=a.legacy&&this.server==="c.us"?"s.whatsapp.net":this.server;a.formatFull===!0?(c=":"+(this.device||0),b=".0"):c=this.device!=null&&this.device!==0?":"+this.device:"";var e=a.forLog===!0?this.getUserPartForLog():this.user;if(a.forLog===!0||a.formatFull===!0||a.legacy&&this.server==="c.us")return[e,b,c,"@",d].join("")}return this._serialized};b.toLogString=function(){return this.toString({forLog:!0,legacy:!1})};b.toJid=function(){return this.toString({legacy:!0})};b.getJidServer=function(){return this.server==="c.us"?d("WAJids").WA_USER_JID_SUFFIX:this.server};b.getDeviceId=function(){var a=this.device;return a==null?0:a};b.equals=function(b){return b instanceof a&&this.toString()===b.toString()};b.isLessThan=function(b){return b instanceof a&&this.toString()<b.toString()};b.isGreaterThan=function(b){return b instanceof a&&this.toString()>b.toString()};b.isCompanion=function(){return this.device!=null&&this.device!==d("WAJids").DEFAULT_DEVICE_ID};b.isSameAccount=function(a){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(this.device===s||a.device===s)){d("WALogger").LOG(i(),this.toLogString(),a.toLogString()).tags("coex");var b=!1;switch(this.server){case"hosted":b=a.server==="c.us";break;case"hosted.lid":b=a.server==="lid";break;case"c.us":b=a.server==="hosted";break;case"lid":b=a.server==="hosted.lid";break;default:break}if(b)return this.user===a.user}return this.server===a.server&&this.user===a.user};b.isUser=function(){return(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||c("justknobx")._("371"))&&(this.server==="hosted"||this.server==="hosted.lid")?!0:this.server==="c.us"||this.server==="lid"||this.server==="bot"};b.isLid=function(){return this.server==="lid"};b.isUserNotPSA=function(){return this.isUser()&&!this.isPSA()};b.isBroadcast=function(){return this.server==="broadcast"};b.isBroadcastList=function(){return this.server==="broadcast"&&!this.isStatus()};b.isOfficialBizAccount=function(){return this.toString()===q};b.isEligibleForUSync=function(){return this.isUser()&&!this.isPSA()};b.isGroup=function(){return this.server==="g.us"};b.isGroupCall=function(){return this.server==="call"};b.isServer=function(){return this.user.toLowerCase()==="server"&&this.server==="c.us"};b.isPSA=function(){return this.user==="0"&&this.server==="c.us"};b.isIAS=function(){return this.user==="16508638904"&&this.server==="c.us"};b.isStatus=function(){return this.user.toLowerCase()==="status"&&this.server==="broadcast"};b.isSupportAccount=function(){return c("WAWebABPropsSupportGroup")(this.user)};b.isCAPISupportAccount=function(){return c("WAWebABPropsCAPISupportNumber")(this.user)};b.isNewsletter=function(){return this.server==="newsletter"};b.isBot=function(){return this.isPnBot()||this.isFbidBot()};b.isPnBot=function(){return this.server==="c.us"&&r.test(this.user)&&(this.device==null||this.device===0)};b.isFbidBot=function(){return this.server==="bot"&&(this.device==null||this.device===0)};b.toJSON=function(){return this.toString()};b.isHosted=function(){return this.server==="hosted"||this.server==="hosted.lid"||this.device===s};a.isXWid=function(b,c){if(d("WATypeUtils").isString(c))return c.split("@")[1]===b;else if(c instanceof a)return c.server===b;c!==void 0&&d("WALogger").WARN(h(),typeof c).devConsole(c);return!1};a.isHostedDeviceId=function(a){return a===s};a.isUser=function(b){return a.isXWid("c.us",b)||a.isXWid("lid",b)||a.isXWid("bot",b)};a.isLid=function(b){return a.isXWid("lid",b)};a.isBroadcast=function(b){return a.isXWid("broadcast",b)};a.isGroup=function(b){return a.isXWid("g.us",b)};a.isNewsletter=function(b){return a.isXWid("newsletter",b)};a.isHosted=function(b){return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?a.isXWid("hosted",b)||a.isXWid("hosted.lid",b):!1};a.isFbidBot=function(b){return a.isXWid("bot",b)};a.isGroupCall=function(b){return a.isXWid("call",b)};a.isWid=function(b){if(d("WATypeUtils").isString(b))return d("WAWebWidValidator").validateWid(b,d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled());else if(b instanceof a)return!0;return!1};a.isServer=function(b){if(d("WATypeUtils").isString(b))return b.toLowerCase()===n;else if(b instanceof a)return b.isServer();return!1};a.isPSA=function(b){if(d("WATypeUtils").isString(b))return b.toLowerCase()===o;else if(b instanceof a)return b.isPSA();return!1};a.isIAS=function(b){if(d("WATypeUtils").isString(b))return b.toLowerCase()===p;else if(b instanceof a)return b.isIAS();return!1};a.isStatus=function(b){if(d("WATypeUtils").isString(b))return b.toLowerCase()===d("WAJids").STATUS_JID;else if(b instanceof a)return b.isStatus();return!1};a.isSupportAccount=function(b){if(d("WATypeUtils").isString(b))return c("WAWebABPropsSupportGroup")(b.split("@")[0]);else if(b instanceof a)return b.isSupportAccount();return!1};a.isCAPISupportAccount=function(b){if(d("WATypeUtils").isString(b))return c("WAWebABPropsCAPISupportNumber")(b.split("@")[0]);else if(b instanceof a)return b.isCAPISupportAccount();return!1};a.isOfficialBizAccount=function(b){if(d("WATypeUtils").isString(b))return b.toLowerCase()===q;else if(b instanceof a)return b.isOfficialBizAccount();return!1};a.isEligibleForUSync=function(a){return this.isUser(a)&&!this.isPSA(a)};a.user=function(b){if(d("WATypeUtils").isString(b))return b.split("@")[0];else if(b instanceof a)return b.user;return void 0};a.equals=function(b,c){return!(b instanceof a)&&!(c instanceof a)?b===c:b instanceof a&&b.equals(c)};a.isLessThan=function(b,c){return!(b instanceof a)||!(c instanceof a)?!1:b.toString()<c.toString()};a.isGreaterThan=function(b,c){return!(b instanceof a)||!(c instanceof a)?!1:b.toString()>c.toString()};return a}();g["default"]=a}),98);
__d("WAWebWidStore",[],(function(a,b,c,d,e,f){var g={cache:{},"delete":function(){g.cache={}}};a=g;f["default"]=a}),66);
__d("WAWebWidFactory",["WAJids","WALogger","WANullthrows","WATypeUtils","WAWebBizCoexGatingUtils","WAWebSignalCommonUtils","WAWebWid","WAWebWidStore","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["createUserWid: "," is not a valid user jid"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["createDeviceWid: "," is not a valid device jid with user domain"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["createHostedDeviceWid: "," is not a valid hosted device"]);j=function(){return a};return a}var k=99,l="lid",m="hosted",n="hosted.lid";function o(a){var b=c("WAWebWidStore")==null?void 0:c("WAWebWidStore").cache;if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&c("WAWebWid").isHosted(a))return c("WANullthrows")(p(a));b?(b=c("WAWebWidStore").cache[a],b||(b=new(c("WAWebWid"))(a,{intentionallyUsePrivateConstructor:!0}),c("WAWebWidStore").cache[a]=b)):b=new(c("WAWebWid"))(a,{intentionallyUsePrivateConstructor:!0});return b}function p(a){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var b=c("WAWebWidStore")==null?void 0:c("WAWebWidStore").cache;if(b[a]){var e=b[a];return e}if(!(d("WATypeUtils").isString(a)&&(a.endsWith("@hosted")||a.endsWith("@hosted.lid"))))throw c("err")("Hosted jid create called with wrong domain type");e=new(c("WAWebWid"))(a,{intentionallyUsePrivateConstructor:!0});if(!e.isHosted()){d("WALogger").DEV(j(),a);throw c("err")("createHostedDeviceWid is called with invalid input")}e=e;b&&(b[a]=e);return e}throw c("err")("createDeviceWidFromDeviceListPk: unsupported")}function a(a){if(a instanceof c("WAWebWid"))return a;else if(typeof a==="string")return o(a);return o(a._serialized)}function b(a){if(!a)return!1;if(c("WAWebWid").isWid(a))return!0;return a&&typeof a==="object"&&c("WAWebWid").isWid(a._serialized)?!0:!1}function e(a,b,e){e===void 0&&(e=!1);a=a.split("@");var f=a[0];a=a[1];a=a===void 0?"c.us":a;if(e===!0){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return r(f,a,b);throw c("err")("WAWebWidFactory: feature unsupported")}return q(f,a,b)}function f(a){a=a.split("@");var b=a[0];a=a[1];a=a===void 0?"c.us":a;return v(b,a)}function q(a,b,c){return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&c===k?r(a,b,c):u(a+":"+c+"@"+b)}function r(a,b,c){return p(a+":"+c+"@"+(b.includes(l)?n:m))}function s(a){a=d("WAWebSignalCommonUtils").getSignalLikeAddressName(a);return c("WAWebWid").isLid(a)||c("WAWebWid").isHosted(a)||c("WAWebWid").isFbidBot(a)?o(a):o(d("WAJids").toPhoneUserJid(a))}function t(a){if(!a.isUser()){d("WALogger").ERROR(i(),a);throw c("err")("createDeviceWid is called with invalid user string")}return a}function u(a){a=o(a);return t(a)}function v(a,b){var e;if(d("WATypeUtils").isString(a)&&(a.endsWith("@c.us")||a.endsWith("@s.whatsapp.net")||a.endsWith("@lid")||a.endsWith("@bot")))e=a;else{b=b!=null&&b!=="hosted"?b:"c.us";e=a+"@"+b}e=o(e);if(e.device==null||e.device===0)return e;d("WALogger").ERROR(h(),a);throw c("err")("createUserWid is called with invalid user string")}function w(a){if(!a.isUser())throw c("err")("asUserWid: wid is not a user wid");return a.device==null||a.device===0?a:v(a.user,a.server)}function x(a){return a.isUser()?w(a):a}function y(a){if(a.isUser())throw c("err")("toGroupWid: wid is a user wid");return a}function z(a){if(a.isNewsletter())return a;throw c("err")("toNewsletterWid: wid is not a newsletter wid")}g.createWid=o;g.createHostedDeviceWid=p;g.createWidFromWidLike=a;g.isWidlike=b;g.createDeviceWidFromDeviceListPk=e;g.createUserWidFromDeviceListPk=f;g.createDeviceWidFromUserAndDevice=q;g.widFromSignalAddress=s;g.createDeviceWidFromWid=t;g.createDeviceWid=u;g.createUserWid=v;g.toUserWid=w;g.toChatWid=x;g.toGroupWid=y;g.toNewsletterWid=z}),98);
__d("WAWebWidJsonReviver",["WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(a,b,e,f){e===void 0&&(e=c("WAWebWid").isWid);f===void 0&&(f=d("WAWebWidFactory").createWid);var g=b;switch(a){case"accountLid":case"author":case"broadcastId":case"chat":case"descOwner":case"from":case"gid":case"id":case"jid":case"owner":case"participant":case"quotedRemoteJid":case"quotedParticipant":case"remote":case"subjectOwner":case"s_o":case"to":case"wid":case"changeNumberNewJid":case"changeNumberOldJid":case"recipient":case"paymentMessageReceiverJid":case"parentGroup":case"phoneNumber":case"revokeSender":case"ephemeralSettingUser":case"newsletterId":case"invokedBotWid":case"botTargetSenderJid":e(b)&&(g=f(b));break;default:a=parseInt(a,10);!isNaN(a)&&e(b)&&(g=f(b));break}return g}function a(a,b){return h(a,b)}g.widReviver=h;g.jsonWidReviver=a}),98);
__d("WAWebBizCoexGatingUtils",["WAWebABProps","WAWebMobilePlatforms","WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("WAWebABProps").getABPropConfigValue("adv_accept_hosted_devices")}function a(){return d("WAWebABProps").getABPropConfigValue("adv_accept_hosted_devices")}function b(){return d("WAWebABProps").getABPropConfigValue("adv_accept_hosted_devices")}function c(){return!d("WAWebMobilePlatforms").isSMB()?!1:!0}function e(){return!d("WAWebMobilePlatforms").isSMB()||!h()?!1:d("WAWebABProps").getABPropConfigValue("lazy_system_message_insertion_enabled")}function f(){return h()&&d("WAWebUserPrefsMultiDevice").getHaveProcessedCoexAdv()?d("WAWebABProps").getABPropConfigValue("coex_status_reply_privacy_disclaimer_enabled"):!1}g.bizHostedDevicesEnabled=h;g.bizHostedDevicesSystemMessageEnabled=a;g.hostedDeviceSecurityCodeVerificationEnabled=b;g.smbHostedPrimaryPairingAllowed=c;g.smbHostedLazySystemMsgInsertInHistorySyncEnabled=e;g.smbHostedstatusReplyPrivacyDisclaimerEnabled=f}),98);
__d("WAWebBizCoexHostedAddVerification",["WALogger","WAWebBizCoexGatingUtils","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["coex verification error ",""]);h=function(){return a};return a}var i=new Set();function a(a){if(a==null)return;i.add(d("WAWebWidFactory").toUserWid(a))}function b(a){if(a==null)return;if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return;var b=i.has(d("WAWebWidFactory").toUserWid(a));if(b===!0)return;b="not found in coex verification cache";d("WALogger").ERROR(h(),a.toLogString()).sendLogs(b);throw c("err")(b)}g.addToCoexHostedVerificationCache=a;g.assertThrowsWidAdvTypeFromVerificationCache=b}),98);
__d("WAWebContactsDbLidMigrationUtils",["WALogger","WAWebABProps","WAWebApiContact","WAWebUserPrefsGeneral","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","gkx","justknobx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to get lid row updates ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeReplacePhoneNumbersWithLatestLids: ",""]);i=function(){return a};return a}function j(){return c("justknobx")._("2702")}function k(){return d("WAWebABProps").getABPropConfigValue("web_contacts_db_lid_migration_m2")}function a(){return!c("gkx")("26258")?j()&&!d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid():k()&&!d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()}function e(a){return a.map(function(a){try{var b=c("WAWebWid").isLid(a)?null:d("WAWebWidFactory").createWid(a);b=b!=null&&b.isUserNotPSA()?(b=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(b)))==null?void 0:b.toString():null;return(b=b)!=null?b:a}catch(b){d("WALogger").ERROR(i(),b).sendLogs("maybeReplacePhoneNumbersWithLatestLids");return a}})}function f(a,b){var c=a.pnContactHash;a.phoneNumber;a.phoneNumberCreatedAt;a=babelHelpers.objectWithoutPropertiesLoose(a,["pnContactHash","phoneNumber","phoneNumberCreatedAt"]);return babelHelpers["extends"]({},a,{id:b,contactHash:c})}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();a==null?void 0:a.forEach(function(a){if(c("WAWebWid").isLid(a.id)){var e=a.id;a.contactHash;a.pnContactHash;a.phoneNumber;a.phoneNumberCreatedAt;var f=babelHelpers.objectWithoutPropertiesLoose(a,["id","contactHash","pnContactHash","phoneNumber","phoneNumberCreatedAt"]);b.set(a.id,a);e=d("WAWebApiContact").getPnIfLidIsLatestMapping(d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(e)));if(e!=null){e=e.toJid();b.set(e,babelHelpers["extends"]({},f,{id:e,contactHash:a.pnContactHash}))}}});a==null?void 0:a.forEach(function(a){return!c("WAWebWid").isLid(a.id)&&!b.has(a.id)&&b.set(a.id,a)});return Array.from(b.values())});return m.apply(this,arguments)}function n(a,b){if(a==null||b==null)return null;var c=b.contactHash;b=babelHelpers.objectWithoutPropertiesLoose(b,["contactHash"]);b=babelHelpers["extends"]({},b,{id:a});c!=null&&(b=babelHelpers["extends"]({},b,{pnContactHash:c}));return b}function o(a,b){try{a=a!=null?d("WAWebWidFactory").createWid(a):null;if(a!=null&&!a.isLid()){a=(a=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a)))==null?void 0:a.toString();return n(a,b)}}catch(a){d("WALogger").ERROR(h(),a)}return null}g.isContactsDbReadIsUsingLidJustKnobx=j;g.isContactsDbReadIsUsingLidAbProp=k;g.shouldRunContactsDbLidMigration=a;g.maybeReplacePhoneNumbersWithLatestLids=e;g.removeLidOnlyCols=f;g.replacePnRowsWithLidData=l;g.createContactLidRowFromPnRow=n;g.getLidRowUpdates=o}),98);
__d("WAWebSingleSignalSession",["WAWebABProps","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.USING_ACCOUNT_IDENTIFIER_FOR_SIGNAL_STORAGE,a)});return h.apply(this,arguments)}function e(){var a;a=(a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.USING_ACCOUNT_IDENTIFIER_FOR_SIGNAL_STORAGE))!=null?a:!1;return a===!0}function f(){return d("WAWebABProps").getABPropConfigValue("web_single_signal_session_and_identity_read_using_lid")}function i(){return c("justknobx")._("1784")}g.setIsUsingAccountIdentifierForSignalStorage=a;g.isUsingAccountIdentifierForSignalStorage=e;g.isUsingSingleSignalSessionAbProps=f;g.isSignalStorageUsingAccountIdentifierJustKnobx=i}),98);
__d("WAWebMsgKeyNewId",["WABinary","WAHex","WATimeUtils","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(){var a=d("WATimeUtils").unixTime(),b=d("WAWebUserPrefsMeUser").getMeUser().toString(),c=d("WAHex").parseHex(d("WAHex").randomHex(16)),e=new(d("WABinary").Binary)();e.writeInt64(a);e.writeString(b);e.writeBuffer(c);return e.readByteArray()};a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=new Uint8Array(yield self.crypto.subtle.digest("SHA-256",h()),0,9);return"3EB0"+d("WAHex").toHex(a)});return function(){return a.apply(this,arguments)}}();g.genMsgKeyUint=h;g.getMsgKeyNewSHA256Id=a}),98);
__d("WAWebParseMsgKeyString",["WALogger","WATypeUtils","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MsgKey error: cannot create MsgKey from ",""]);h=function(){return a};return a}function a(a){if(!a||!d("WATypeUtils").isString(a))throw c("err")("MsgKey fromString error: str is null or not a string");var b=a.split("_"),e=void 0;b.length<3?d("WALogger").WARN(h(),a):b.length===4?b[3]!=="out"&&b[3]!=="in"&&(e=b[3]):b.length===5&&(e=b[4]);return{fromMe:b[0]==="true",remote:b[1],id:b[2],participant:e}}g["default"]=a}),98);
__d("WAWebMsgKey",["WAHex","WALogger","WAWebMsgKeyNewId","WAWebParseMsgKeyString","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgKeyNewId: ",", message: ",", stack: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-key] generated ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incorrect Wid MsgKey: remote:"," p:",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MsgKey case error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incorrect Wid MsgKey: from:"," to:"," p:",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["No matching constructor MsgKey: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unclear constructor MsgKey: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["MsgKey error: id is already a MsgKey"]);o=function(){return a};return a}a=function(){function a(b){b=b;if(!b)throw c("err")("MsgKey error: obj is null/undefined");b.id instanceof a&&(b=b.id,d("WALogger").WARN(o()));var e=b.from&&b.to&&b.id,f=b.fromMe!==void 0&&b.remote&&b.id,g,h,i,p,q,r,s,t=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(!t)throw c("err")("MsgKey error: me is undefined. Running tests? Call setupGlobalsForTests first.");else if(e&&f){d("WALogger").WARN(n(),JSON.stringify(b));throw c("err")("MsgKey error: unclear which constructor to use")}else if(!e&&!f){d("WALogger").WARN(m(),JSON.stringify(b));throw c("err")("MsgKey error: don't have a matching constructor")}else if(e){e=b;g=e.from;h=e.to;i=e.id;p=e.participant;q=e.selfDir;if(!(g instanceof c("WAWebWid"))||!(h instanceof c("WAWebWid"))||p&&!(p instanceof c("WAWebWid"))){d("WALogger").WARN(l(),String(g),String(h),String(p));throw c("err")("MsgKey error: something is not a wid")}e=c("WAWebWid").equals(g,h);q=e?q:void 0;e&&d("WAWebUserPrefsMeUser").isMePrimary(g)?(r=q==="out",s=t):d("WAWebUserPrefsMeUser").isMePrimary(g)?(r=!0,s=h):d("WAWebUserPrefsMeUser").isMePrimary(h)?(r=!1,s=g):e&&(c("WAWebWid").isGroup(g)||c("WAWebWid").isBroadcast(g))?(r=!0,s=g):d("WALogger").WARN(k(),[g,h,i,t].join());r!==void 0&&(this.fromMe=r);s&&(this.remote=s);i&&(this.id=i)}else if(f){e=b;r=e.fromMe;s=e.remote;i=e.id;p=e.participant;if(!(s instanceof c("WAWebWid"))||p&&!(p instanceof c("WAWebWid"))){d("WALogger").WARN(j(),String(s),String(p));throw c("err")("MsgKey error: something is not a wid")}d("WAWebUserPrefsMeUser").isMePrimary(s)&&(q=r===!0?"out":"in");r!==void 0&&(this.fromMe=r);s&&(this.remote=s);i&&(this.id=i)}g=[this.fromMe,this.remote,this.id];q!==void 0&&(this.self=q,g.push(this.self));p!==void 0&&(this.participant=p,g.push(this.participant));this._serialized=g.join("_")}var e=a.prototype;e.toString=function(){return this._serialized};e.clone=function(){return new a({fromMe:this.fromMe,remote:this.remote,id:this.id,participant:this.participant})};e.equals=function(b){return b instanceof a&&this.toString()===b.toString()};a.fromString=function(b){if(b==null)throw c("err")("MsgKey.fromString error: str is null or not a string");return a.from(b)};a.from=function(b){if(b instanceof a)return b;var e;typeof b==="string"?e=c("WAWebParseMsgKeyString")(b):e=b;return new a({fromMe:e.fromMe,remote:d("WAWebWidFactory").createWidFromWidLike(e.remote),id:e.id,participant:e.participant?d("WAWebWidFactory").createWidFromWidLike(e.participant):void 0})};a.newId=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield d("WAWebMsgKeyNewId").getMsgKeyNewSHA256Id());d("WALogger").DEV(i(),b);return b}catch(b){d("WALogger").ERROR(h(),b.name,b.message,b.stack).devConsole(b).sendLogs("msg_key: error generating sha256 message key");return a.newId_DEPRECATED()}});function e(){return c.apply(this,arguments)}return e}();a.newId_DEPRECATED=function(){return"3EB0"+d("WAHex").randomHex(8)};return a}();g["default"]=a}),98);
__d("WAWebAddonDeleteMsgs",["Promise","WALogger","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonLogUtils","WAWebAddonPerfUtils","WAWebAddonUpdateDataUtils","WAWebMsgKey","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["delete addons finished with errors"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteAddonMsgsByParentKeys for ",": ",""]);j=function(){return a};return a}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e;try{e=(yield (h||(h=b("Promise"))).all(c.map(function(b){return d("WAWebAddonDBTable").addonInternalDBTable.bulkGetByParentMsgKey(a,[b])})).then(function(a){var b;return(b=[]).concat.apply(b,a)}))}catch(a){return}if(e.length===0)return;c=(yield d("WAWebAddonPerfUtils").createAddonQplMarker(d("WAWebAddonPerfUtils").AddonQplMarkerType.UI,{mode:a,type:d("WAWebAddonPerfUtils").AnnotationRequestType.BulkRemoveByParents,size:e.length}));try{yield d("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:d("WAWebAddonConstants").AddonProcessMode.DeleteWithParent,tableMode:a},{remove:e}),c==null?void 0:c.success()}catch(b){d("WALogger").WARN(j(),a,b);c==null?void 0:c.fail();throw b}});return l.apply(this,arguments)}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.parentMsgKeys;a=a.map(function(a){return c("WAWebMsgKey").fromString(a)});var e=[];for(var f of d("WAWebAddonConstants").AddonTableMode.members())f!==d("WAWebAddonConstants").AddonTableMode.None&&e.push(k(f,a));a=(yield (h||(h=b("Promise"))).allSettled(e));d("WAWebAddonLogUtils").hasSettledWithError(a)&&d("WALogger").WARN(i()).tags("addons","messaging").sendLogs("deleteAddonMsgsByParentKeys")});return m.apply(this,arguments)}g.deleteAddonMsgsByParentKeys=a}),98);
__d("WAWebAddonCrossWindowUtils",[],(function(a,b,c,d,e,f){function g(a){if(a.realType!=null)return a.realType;return a.revokeAddonType!=null?a.revokeAddonType:a.type}function a(a){return a.type===g(a)}function b(a){a=g(a);switch(a){case"pin_message":case"reaction":case"reaction_enc":case"comment":case"event_edit_encrypted":case"event_response":case"poll_update":return!0;case"keep_in_chat":case"unknown":return!1;default:a;return!1}}f.getAddonProcessorType=g;f.isRealAddonType=a;f.isInfraSupportedAddon=b}),66);
__d("WAWebMsgType",[],(function(a,b,c,d,e,f){var g={NOTIFICATION:"notification",NOTIFICATION_TEMPLATE:"notification_template",GP2:"gp2",BROADCAST_NOTIFICATION:"broadcast_notification",NEWSLETTER_NOTIFICATION:"newsletter_notification",E2E_NOTIFICATION:"e2e_notification",CALL_LOG:"call_log",PROTOCOL:"protocol",HISTORY_BUNDLE:"history_bundle",CHAT:"chat",LOCATION:"location",PAYMENT:"payment",VCARD:"vcard",CIPHERTEXT:"ciphertext",DEBUG_PLACEHOLDER:"debug_placeholder",MULTI_VCARD:"multi_vcard",REVOKED:"revoked",OVERSIZED:"oversized",GROUPS_V4_INVITE:"groups_v4_invite",HSM:"hsm",TEMPLATE_BUTTON_REPLY:"template_button_reply",DEBUG:"debug",IMAGE:"image",VIDEO:"video",PTV:"ptv",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",STATUS:"status",DOCUMENT:"document",PRODUCT:"product",ORDER:"order",LIST:"list",INTERACTIVE:"interactive",INTERACTIVE_RESPONSE:"interactive_response",LIST_RESPONSE:"list_response",BUTTONS_RESPONSE:"buttons_response",REACTION:"reaction",REACTION_ENC:"reaction_enc",POLL_CREATION:"poll_creation",REQUEST_PHONE_NUMBER:"request_phone_number",POLL_UPDATE:"poll_update",NATIVE_FLOW:"native_flow",BIZ_COVER_PHOTO:"biz-cover-photo",KEEP_IN_CHAT:"keep_in_chat",PIN_MESSAGE:"pin_message",PINNED_MESSAGE:"pinned_message",COMMENT:"comment",NEWSLETTER_ADMIN_INVITE:"newsletter_admin_invite",EVENT_CREATION:"event_creation",EVENT_RESPONSE:"event_response",BIZ_CONTENT_PLACEHOLDER:"biz_content_placeholder",EVENT_EDIT_ENCRYPTED:"event_edit_encrypted",ALBUM:"album",STICKER_PACK:"sticker_pack",UNKNOWN:"unknown"};a=new Set(Object.keys(g).map(function(a){return g[a]}));b=["notification","notification_template","gp2","newsletter_notification","broadcast_notification","e2e_notification","call_log","protocol","debug"];c={BizContentPlaceholder:"bizContentPlaceholder",Ciphertext:"ciphertext",PlaceholderMessage:"placeholderMessage",PlaceholderAddon:"placeholderAddon",CommentEncrypted:"commentEncrypted",CommentDecrypted:"commentDecrypted",DebugPlaceholder:"debugPlaceholder",EventCreation:"eventCreation",EventResponseEncrypted:"eventResponseEncrypted",EventResponseDecrypted:"eventResponseDecrypted",EventEditEncrypted:"eventEditEncrypted",EventEditDecrypted:"eventEditDecrypted",KeepInChat:"keepInChat",PinInChat:"pinInChat",PollCreation:"pollCreation",PollVoteEncrypted:"pollVoteEncrypted",PollVoteDecrypted:"pollVoteDecrypted",ProtocolRevoke:"protocolRevoke",ProtocolAddonRevoke:"protocolAddonRevoke",ReactionEncrypted:"reactionEncrypted",ReactionDecrypted:"reactionDecrypted",RevokedMessage:"revokedMessage",RevokedAddon:"revokedAddon",Notification:"notification",NotificationTemplate:"notificationTemplate",Gp2:"gp2",BroadcastNotification:"broadcastNotification",NewsletterNotification:"newsletterNotification",E2eNotification:"e2eNotification",CallLog:"callLog",Protocol:"protocol",Historybundle:"historyBundle",Chat:"chat",Location:"location",LocationLive:"locationLive",Payment:"payment",Vcard:"vcard",MultiVcard:"multiVcard",Oversized:"oversized",GroupsV4Invite:"groupsV4Invite",Hsm:"hsm",TemplateButtonReply:"templateButtonReply",Debug:"debug",AssociatedImage:"associatedImage",Image:"image",Video:"video",Ptv:"ptv",Audio:"audio",Ptt:"ptt",Sticker:"sticker",Status:"status",Document:"document",Product:"product",Order:"order",List:"list",Interactive:"interactive",InteractiveResponse:"interactiveResponse",ListResponse:"listResponse",ButtonsResponse:"buttonsResponse",RequestPhoneNumber:"requestPhoneNumber",NativeFlow:"nativeFlow",BizCoverPhoto:"bizCoverPhoto",PinnedMessage:"pinnedMessage",NewsletterAdminInvite:"newsletterAdminInvite",ProtocolEventEdit:"protocolEventEdit",PeerMessage:"peerMessage",Album:"album",StickerPack:"stickerPack",Unknown:"unknown"};f.MSG_TYPE=g;f.ALL_MSG_TYPES_SET=a;f.SYSTEM_MESSAGE_TYPES=b;f.MsgKind=c}),66);
__d("WAWebAddonEncryptAddonMsgData",["WAWebAddonCrossWindowUtils","WAWebAddonPluginProcessor","WAWebAddonProcessRevokeDataUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a);if(a.type!==b)return a.kind===d("WAWebMsgType").MsgKind.ProtocolAddonRevoke?d("WAWebAddonProcessRevokeDataUtils").protocolRevokeToRevokeMsgData(a):a}function a(a,b){var c=h(a);if(c!=null)return;c=d("WAWebAddonPluginProcessor").getAddonProcessor(a);c=c.convert;var e=c.toDualEncryptedMsgData,f=c.toDualDecryptedMsgData;if(e==null||f==null)return;return{decrypt:function(){return f(a,b)},encrypt:function(){return e(a,b)}}}g.createDualEncryptionHelper=a}),98);
__d("WAWebAddonMarkAsReadUtils",["WALogger","WAWebAddonConstants","WAWebAddonSelectUtils","WAWebAddonUpdateDataUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processMarkAsRead update failed ",""]);h=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return a.read!=null?babelHelpers["extends"]({},a,{read:!0}):a});try{a=d("WAWebAddonSelectUtils").getAddonTableMode(a[0]);yield d("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:d("WAWebAddonConstants").AddonProcessMode.MarkAsRead,tableMode:a},{add:b})}catch(a){d("WALogger").ERROR(h(),a).tags("addons","messaging").sendLogs("processMarkAsRead")}});return function(b){return a.apply(this,arguments)}}();g.processMarkAsRead=a}),98);
__d("WAAbortError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("AbortError"));var h="AbortError";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);
__d("WAWebChatEntryPoint",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NewsletterIntegrity","NewsletterChatlist","NewsletterDirectory","NewsletterDirectorySearch","NewsLetterRecommendation","NewsletterCreationFlow","NewsletterAdminInviteAcceptModal","NewsletterPostLinkCard","NewsletterLinkCard","NewsletterLinkCardButton","ForwardedNewsletterMessage","NewsletterCTAOnStatus","SimilarNewsletters","Link","Deeplink","Chatlist","Vcard","Notification","Unknown","BotChatListShortcut","PrivateReply","DirectMessage","ContactInfo","Mention"]);f.ChatEntryPoint=a}),66);
__d("WAWebStateUtils",[],(function(a,b,c,d,e,f){function a(a){return(a==null?void 0:a.$ProxyState$state)?a.$ProxyState$state:a}f.unproxy=a}),66);
__d("WAWebComposeBoxActions",["WAWebEventEmitter","WAWebStateUtils"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.focus=function(a){a=d("WAWebStateUtils").unproxy(a);a?this.trigger("focus_"+a.id.toString()):this.trigger("focus")};c.send=function(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("send_"+a.id.toString())};c.paste=function(a,b,c){if(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("paste_"+a.id.toString(),b,c)}else this.trigger("paste",b,c)};c.sendPaste=function(a,b){a=d("WAWebStateUtils").unproxy(a);this.trigger("send_paste_"+a.id.toString(),b)};c.toggleQuickReplies=function(){this.trigger("toggle_quick_replies")};c.addMsgSendingLogAttributes=function(a,b){this.trigger("add_sending_log_attributes_"+a.id.toString(),b)};c.setCtwaContextLinkData=function(a,b){this.trigger("set_ctwa_context_link_data_"+a.id.toString(),b)};c.setTextContent=function(a,b){this.trigger("set_text_content_"+a.id.toString(),b)};return b}(c("WAWebEventEmitter"));b=new a();g.ComposeBoxActions=b}),98);
__d("WAWebCurrentUser",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("26258")===!1||d("WAWebABProps").getABPropConfigValue("is_meta_employee_or_internal_tester")}g.isEmployee=a}),98);
__d("WAWebDocumentFlushed",["Promise","WAAbortError","once"],(function(a,b,c,d,e,f,g){var h,i=[],j=c("once")(function(){return new AbortController().signal});function k(){while(i.length>0){var a=i.shift();a()}}function l(){var a,b=window.requestAnimationFrame(function(){a=self.setTimeout(function(){k()},0)});return function(){window.cancelAnimationFrame(b),self.clearTimeout(a)}}function a(a){var c=(a=a==null?void 0:a.signal)!=null?a:j();return new(h||(h=b("Promise")))(function(a,b){if(c.aborted){b(new(d("WAAbortError").AbortError)());return}var e;function f(){c.removeEventListener("abort",h);var a=i.indexOf(g);a!==-1&&i.splice(a,1);i.length===0&&e!=null&&(e(),e=null)}function g(){f(),a()}function h(){f(),b(new(d("WAAbortError").AbortError)())}i.push(g);c.addEventListener("abort",h);i.length===1&&(e=l())})}e=function(){k();return(h||(h=b("Promise"))).resolve()};g.documentFlushed=a;g.resolveAllForTestingOnly=e}),98);
__d("WAWebMain.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={"-viewport-width-stop-xl":"1300px;","-viewport-width-stop-l":"1024px;","-viewport-width-stop-m":"900px;",app:"_aigs",materialRefresh:"_ap4v",noAnimation:"_aigt",drawerManager:"_aigu",pane:"_aigv",paneOne:"_aigw",paneOneDrawer:"_aigx",paneOneDrawerWithNavBar:"_aohf",paneTwo:"_aigz",paneThree:"_aig-",paneThreeWithNavBar:"_aohg",chatlistPanelClosed:"_aigy"};b=a;g["default"]=b}),98);
__d("WAWebStylePropertiesDeprecated",[],(function(a,b,c,d,e,f){function g(a,b){return a[b]}function a(a,b){return parseInt(g(a,b),10)}function b(a,b){return parseFloat(g(a,b))}f.getIntFromStylesProp=a;f.getFloatFromStylesProp=b}),66);
__d("WAWebDrawerManager",["Promise","WAWebEventEmitter","WAWebMain.scss","WAWebStylePropertiesDeprecated"],(function(a,b,c,d,e,f,g){var h,i=d("WAWebStylePropertiesDeprecated").getIntFromStylesProp(c("WAWebMain.scss"),"-viewport-width-stop-xl");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.setDrawerContext=function(a,b){this.trigger("update_context_"+a,b)};d.openDrawerRight=function(a,b){this.trigger("open_drawer_right",a,b)};d.openDrawerMid=function(a,b){this.trigger("open_drawer_mid",a,b)};d.openDrawerLeft=function(a,b){this.trigger("open_drawer_left",a,b)};d.existsDrawerRight=function(a){this.trigger("exists_drawer_right",a)};d.existsDrawerMid=function(a){this.trigger("exists_drawer_mid",a)};d.existsDrawerLeft=function(a){this.trigger("exists_drawer_left",a)};d.closeDrawerRight=function(){this.trigger("close_drawer_right")};d.closeDrawerMid=function(){this.trigger("close_drawer_mid")};d.closeDrawerLeft=function(){this.trigger("close_drawer_left")};d.isDrawerRightOverlappingCoversationPanel=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.existsDrawerRight(function(a){b(a&&window.matchMedia("(max-width: "+i+"px)").matches)})})};return c}(c("WAWebEventEmitter"));e=new a();g.DrawerManager=e}),98);
__d("WAWebCmd",["invariant","$InternalEnum","Promise","WAAbortError","WALogger","WAWebChatEntryPoint","WAWebComposeBoxActions","WAWebCurrentUser","WAWebDocumentFlushed","WAWebDrawerManager","WAWebEventEmitter","WAWebPageLoadLogging","WAWebStateUtils","asyncToGeneratorRuntime","err","gkx","lodash"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cmd: botTogglePluginSearchDetailsToggle called w/ null target id."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cmd: offline_process_ready"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["CMD.logout debug: \n ",""],["CMD.logout debug: \\n ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected scrollChatToBottom error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected_scrollToFocusedMsg error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatBottom"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatFromUnread with chat unreadMsgAnchor: ",",  chat unreadCount:  ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected openChat error: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cmd: initialLoadReady"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["cmd:clearUIBusy uibusy timeout"]);s=function(){return a};return a}a=b("$InternalEnum").Mirrored(["Sender","Admin"]);e="app_state_sync_completed";var t=400;f=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(b=e=a.call.apply(a,[this].concat(g))||this,e.isMainLoaded=!1,e.uiBusy=0,e.isMainStreamReadyMd=!1,e.isOfflineDeliveryEnd=!1,e.$CmdImpl4=c("lodash").debounce(function(){e.uiBusy&&(d("WALogger").LOG(s()),e.uiBusy=0,e.$CmdImpl5())},1e3,{maxWait:5e3}),e.$CmdImpl5=v(function(){e.uiBusy===0||h(0,75716,e.uiBusy);if(e.uiBusy!==0)return;e.$CmdImpl4.cancel();e.trigger("ui_idle")}),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.mainLoaded=function(){this.isMainLoaded=!0,this.trigger("main_loaded")};f.initialLoadReady=function(){d("WALogger").LOG(r()),this.trigger("initial_load_ready")};f.logSocketSummary=function(){this.trigger("log_socket_summary")};f.muteAll=function(a,b,c,d){this.trigger("mute_all",a,b,c,d)};f.muteChat=function(a,b,c){this.trigger("mute_chat",d("WAWebStateUtils").unproxy(a),b,c)};f.muteChatMultiselect=function(a,b,c){this.trigger("mute_chat_multiselect",a,b,c)};f.muteChatFromEntryPoint=function(a,b,c,e){this.trigger("mute_chat_from_entrypoint",d("WAWebStateUtils").unproxy(a),b,c,e)};f.assignChat=function(a,b){this.trigger("assign_chat",d("WAWebStateUtils").unproxy(a),b)};f.deleteOrExitChat=function(a,b){this.trigger("delete_or_exit_chat",d("WAWebStateUtils").unproxy(a),b)};f.deleteOrExitChatFromEntryPoint=function(a,b,c){this.trigger("delete_or_exit_chat_from_entrypoint",d("WAWebStateUtils").unproxy(a),b,c)};f.clearChat=function(a,b){this.trigger("clear_chat",d("WAWebStateUtils").unproxy(a),b)};f.archiveChat=function(a,b,c){c===void 0&&(c=!0),this.trigger("archive_chat",d("WAWebStateUtils").unproxy(a),b,c)};f.archiveChatFromEntryPoint=function(a,b,c,e){e===void 0&&(e=!0),this.trigger("archive_chat_from_entrypoint",d("WAWebStateUtils").unproxy(a),b,c,e)};f.pinChat=function(a,b){this.trigger("pin_chat",d("WAWebStateUtils").unproxy(a),b)};f.favoriteChat=function(a,b){this.trigger("favorite_chat",d("WAWebStateUtils").unproxy(a),b)};f.markChatUnread=function(a,b){this.trigger("mark_chat_unread",d("WAWebStateUtils").unproxy(a),b)};f.msgInfoDrawer=function(a){this.trigger("msg_info_drawer",d("WAWebStateUtils").unproxy(a))};f.chatSearch=function(a){this.trigger("chat_search",d("WAWebStateUtils").unproxy(a))};f.scrollChatHeight=function(a){this.trigger("scroll_chat_by_height",a)};f.chatInfoDrawer=function(a,b){this.trigger("chat_info_drawer",d("WAWebStateUtils").unproxy(a),b==null?void 0:b.showFullGroupDescription,b==null?void 0:b.scrollToParticipantList,b==null?void 0:b.sourceGroupChatOrNewsletter,b==null?void 0:b.focusNewsletterDescriptionOnMount,b==null?void 0:b.focusGroupSubjectOnMount,b==null?void 0:b.focusGroupDescriptionOnMount)};f.editGroupDescription=function(){this.trigger("edit_group_description")};f.attachMediaDrawer=function(a){var b=d("WAWebStateUtils").unproxy(a.chat),c=function(c){c.length>0&&d("WAWebComposeBoxActions").ComposeBoxActions.setTextContent(b,c.join("\n\n")),a.onCancel==null?void 0:a.onCancel()};c=babelHelpers["extends"]({},a,{chat:b,onCancel:c});this.trigger("attach_media_drawer",c)};f.attachProduct=function(a){this.trigger("attach_product",a)};f.verificationDrawer=function(a){this.trigger("verification_drawer",a)};f.mediaViewerModal=function(a){var b=a.msg,c=a.getZoomNode,d=a.currentTime;a=a.highlightedMsgIds;this.trigger("media_viewer_modal",{msg:b,getZoomNode:c,currentTime:d,highlightedMsgIds:a})};f.openMediaViewerForAlbumMedia=function(a){this.trigger("open_media_viewer_for_album_media",a)};f.productImageViewerModal=function(a,b){this.trigger("product_image_viewer_modal",a,b)};f.ephemeralDrawer=function(a,b,c){this.trigger("ephemeral_drawer",a,b,c)};f.openCommunityHome=function(a,b){this.trigger("open_community_home",a,b)};f.openCommunityTabbedInfo=function(a,b,c,d){this.trigger("open_community_tabbed_info",a,b,c,d)};f.openCommunityPendingGroupsDrawer=function(a){this.trigger("open_community_pending_groups_drawer",a)};f.openCommunityHomeManageGroups=function(a){this.trigger("open_community_home_manage_groups",a)};f.openCommunitySettingsDrawer=function(a){this.trigger("open_community_settings_drawer",a)};f.openCommunitySubgroupJoinModal=function(a,b){this.trigger("open_subgroup_join_modal",a,b)};f.openProfile=function(a){this.trigger("open_profile",a)};f.communityAddNewGroup=function(a,b,c){this.trigger("open_community_add_new_group",a,b,c)};f.openCreatedNewsletter=function(a){this.trigger("open_created_newsletter",a)};f.openNewsletterProfile=function(a,b){this.trigger("open_newsletter_profile",a,b)};f.editNewsletterDescription=function(){this.trigger("edit_newsletter_description")};f.openEventInfoDrawer=function(a,b,c,d){this.trigger("open_event_info_drawer",a,b,c,d)};f.sendStarMsgs=function(a,b,c,e){this.trigger("send_star_msgs",d("WAWebStateUtils").unproxy(a),b,c,e)};f.sendUnstarMsgs=function(a,b,c,e){this.trigger("send_unstar_msgs",d("WAWebStateUtils").unproxy(a),b,c,e)};f.sendDeleteMsgs=function(a,b,c,e,f){this.trigger("send_delete_msgs",d("WAWebStateUtils").unproxy(a),b,c,e,f)};f.sendRevokeMsgs=function(a,b,c){this.trigger("send_revoke_msgs",d("WAWebStateUtils").unproxy(a),b,c)};f.$CmdImpl1=function(a,c,e){var f=this;e===void 0&&(e=d("WAWebChatEntryPoint").ChatEntryPoint.Unknown);var g=d("WAWebStateUtils").unproxy(a);g.chatEntryPoint=e;return new(i||(i=b("Promise")))(function(a){f.trigger("open_chat",g,c,e,function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){(yield d("WAWebDrawerManager").DrawerManager.isDrawerRightOverlappingCoversationPanel())&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),a(b)});return function(a){return c.apply(this,arguments)}}())})["catch"](function(a){d("WALogger").LOG(q(),String(a));throw a})};f.openChatAt=function(a,c,e){var f=this;a=d("WAWebStateUtils").unproxy(a);if(!c)return this.openChatBottom(a,e);this.setUiBusy(!0);a=this.$CmdImpl1(a,c,e).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d,e,g=c.enableAnimation!=null?c.enableAnimation:!0;if(a)if(a.wasVisible)d=function(){return f.$CmdImpl2({pos:"offset",offset:a.offset})},e=function(){return f.$CmdImpl2({pos:"center",animate:g,duration:t,easing:[.7,0,.3,1]})};else{d=function(){return f.$CmdImpl2({pos:a.alignAt,scrollIfNeeded:!0})};switch(a.alignAt){case"top":case"bottom":e=function(){return f.$CmdImpl2({pos:"center",animate:g,duration:t,easing:[.88,.64,.13,.99]})};break;case"center":default:e=function(){return(i||(i=b("Promise"))).resolve()}}}else d=function(){return f.$CmdImpl2({pos:"center"})},e=function(){return(i||(i=b("Promise"))).resolve()};yield d();return e()});return function(b){return a.apply(this,arguments)}}()).then(function(){var a;if((c==null?void 0:(a=c.msg)==null?void 0:a.botPluginReferenceIndex)!=null){a=c==null?void 0:(a=c.msg)==null?void 0:a.botResponseTargetId;a!=null&&f.botTogglePluginSearchDetailsToggle(a,!0)}(c==null?void 0:c.highlightMsg)===!0&&f.flashFocusedMsg(c.highlightMentionMsg)}).then(function(){return!0})["catch"](d("WAAbortError").catchAbort(function(){return!1}));a["finally"](function(){f.setUiBusy(!1)});return a};f.openChatFromUnread=function(a,e){var f=this;a=d("WAWebStateUtils").unproxy(a);if(!c("gkx")("26258")){window.chat=a;var g=a.unreadMsgAnchor&&a.unreadMsgAnchor.id.toString()||"No unreadMsgAnchor found";d("WALogger").LOG(p(),g,a.unreadCount)}var h;a.unreadMsgAnchor&&(h={collection:a.unreadMsgAnchor.msgChunk,promise:(i||(i=b("Promise"))).resolve(),msg:a.unreadMsgAnchor,isUnreadDivider:a.shouldShowUnreadDivider});if(h||a.unreadCount>0){this.setUiBusy(!0);g=this.$CmdImpl1(a,h,e).then(function(){return f.$CmdImpl2({pos:"top",offset:-120})}).then(function(){return!0})["catch"](d("WAAbortError").catchAbort(function(){return!1}));g["finally"](function(){f.setUiBusy(!1)});return g}return this.openChatBottom(a,e)};f.openChatBottom=function(a,b){var e=this;a=d("WAWebStateUtils").unproxy(a);c("gkx")("26258")||d("WALogger").LOG(o());this.setUiBusy(!0);var f;a.msgs.length>0&&(f={collection:a.msgs,msg:a.msgs.last(),isUnreadDivider:!1});a=this.$CmdImpl1(a,f,b).then(function(){return e.$CmdImpl3()}).then(function(){return!0})["catch"](d("WAAbortError").catchAbort(function(){return!1}));a["finally"](function(){e.setUiBusy(!1)});return a};f.$CmdImpl2=function(a){var c=this;return new(i||(i=b("Promise")))(function(b){c.trigger("scroll_to_focused_msg",b,a)})["catch"](function(a){d("WALogger").WARN(n(),String(a))})};f.$CmdImpl3=function(){var a=this;return new(i||(i=b("Promise")))(function(b){a.trigger("scroll_chat_to_bottom",b)})["catch"](function(a){d("WALogger").WARN(m(),String(a))})};f.flashFocusedMsg=function(a){var b=this;self.setTimeout(function(){b.trigger("flash_focused_msg"),a&&b.trigger("flash_mention_msg")},0)};f.setActiveNavBarItem=function(a){this.trigger("set_active_nav_bar",a)};f.setActiveFilter=function(a,b){this.trigger("set_active_filter",a,b)};f.updateChatlistSelection=function(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("update_chatlist_selection",a)};f.closeChat=function(a){a=d("WAWebStateUtils").unproxy(a);this.trigger("close_chat",a)};f.focusNextChat=function(a){this.trigger("focus_next_chat",a)};f.focusPrevChat=function(a){this.trigger("focus_prev_chat",a)};f.focusChatSearch=function(){this.trigger("focus_chat_search")};f.closeStatusViewer=function(){this.trigger("close_status_viewer")};f.openComposeBoxPanel=function(a){this.trigger("open_compose_box_panel",a)};f.closeExpressionPanels=function(){this.trigger("close_expression_panels")};f.logout=function(){if(!c("gkx")("26258"))try{throw c("err")("Non Error - CMD logout, thrown only for getting logout stack trace")}catch(a){a instanceof Error&&d("WALogger").LOG(l(),a.stack).verbose()}this.trigger("logout")};f.openContextMenu=function(a,b){this.trigger("open_context_menu",a,b)};f.closeContextMenu=function(a){this.trigger("close_context_menu",a)};f.openTooltip=function(a,b){this.trigger("open_tooltip",a,b)};f.closeTooltip=function(a){this.trigger("close_tooltip",a)};f.alertNewMsg=function(a){this.trigger("alert_new_msg",a)};f.newMediaMsg=function(a){this.trigger("new_media_msg",a)};f.alertCall=function(a,b,c,d,e){this.trigger("alert_call",{wid:a,msgId:b,isVideo:c,isGroup:d,isSilenced:e})};f.cancelCall=function(a){this.trigger("cancel_call",a)};f.windowError=function(a){c("gkx")("26258")||this.trigger("window_error",a)};f.onPanesWillChange=function(a){this.trigger("panes_will_change",a)};f.onPanesDidChange=function(a){this.trigger("panes_did_change",a)};f.reactionChangeLastMessage=function(){this.trigger("reaction_changed_last_msg")};f.openGroupsV4InviteRequestFlow=function(a,b,c,d){this.trigger("open_groups_v4_invite_request_flow",a,b,c,d)};f.toggleLidDebugBadge=function(){this.trigger("toggle_lid_debug_badge")};f.openCommandPalette=function(){this.trigger("open_command_palette")};f.closeCommandPalette=function(){this.trigger("close_command_palette")};f.setUiBusy=function(a){var b=this.uiBusy||0;a?(++b,this.$CmdImpl4(),this.$CmdImpl5.cancel()):b&&--b;this.uiBusy=b;b===0&&(this.$CmdImpl4.cancel(),this.$CmdImpl5())};f.windowMouseDown=function(a){this.trigger("window_mousedown",a)};f.windowClick=function(a){this.trigger("window_click",a)};f.midnight=function(){this.trigger("midnight")};f.serverUpdatedClientExpiration=function(){this.trigger("serverUpdatedClientExpiration")};f.scrollMessages=function(){this.trigger("scroll_messages")};f.getConversationHeaderOffset=function(a){this.trigger("get_conversation_header_offset",a)};f.floaterEscapeOverlap=function(a,b){this.trigger("floater_escape_overlap",a,b)};f.refreshMessages=function(){this.trigger("refresh_messages")};f.storageInitializationError=function(){this.trigger("storage_initialization_error")};f.editGroupSubject=function(){this.trigger("edit_group_subject")};f.endFlow=function(){this.trigger("end_flow")};f.refreshQR=function(){this.trigger("md_refresh_qr")};f.setSocketState=function(a){this.trigger("set_socket_state",a)};f.socketStreamDisconnected=function(){this.trigger("socket_stream_disconnected")};f.openSocketStream=function(){this.trigger("open_socket_stream")};f.reconnectSocket=function(){this.trigger("reconnect_socket")};f.openLongLinkModal=function(){this.trigger("open_long_link_modal")};f.closeLongLinkModal=function(a){a===void 0&&(a=!1),this.trigger("close_long_link_modal",a)};f.openLockScreenModal=function(){this.trigger("open_lock_screen_modal")};f.correctPasscodeLockScreen=function(a){this.trigger("correct_passcode_lock_screen",a)};f.incorrectPasscodeLockScreen=function(){this.trigger("incorrect_passcode_lock_screen")};f.offlineDeliveryEnd=function(){this.isOfflineDeliveryEnd=!0,this.trigger("offline_delivery_end")};f.resetOfflineDeliveryState=function(){this.isOfflineDeliveryEnd=!1,this.trigger("offline_delivery_state_reset")};f.readyForProcessOffline=function(){d("WALogger").LOG(k()),this.trigger("offline_process_ready")};f.readyForMainStreamMode=function(){d("WAWebPageLoadLogging").addPageLoadQplPoint("main_stream_mode_ready"),this.isMainStreamReadyMd=!0,this.trigger("main_stream_mode_ready")};f.onInitialChatHistorySynced=function(){this.trigger("on_initial_chat_synced")};f.onRecentChatHistorySynced=function(){this.trigger("on_recent_chat_history_synced")};f.onFullChatHistorySynced=function(){this.trigger("on_full_chat_history_synced")};f.onHistorySyncChunkProcessed=function(a){this.trigger("new_history_sync_chunk_processed",a)};f.handleOfflineProgressUpdate=function(){this.trigger("offline_progress_update")};f.criticalSyncDone=function(){this.trigger("on_critical_sync_done")};f.onTemporaryBan=function(a){this.trigger("account_temporarily_banned",a)};f.onStartingLogout=function(){this.trigger("starting_logout")};f.showServiceUnavailableError=function(){this.trigger("service_unavailable_503")};f.merchantDetailsDrawer=function(a){this.trigger("merchant_details_drawer",a)};f.showMerchantDetailsEntityTypePopup=function(a,b){this.trigger("show_merchant_details_entity_type_popup",a,b)};f.showCountrySelector=function(a,b,c,d){this.trigger("show_country_selector_popup",a,b,c,d)};f.toggleStickerMaker=function(){this.trigger("toggle_sticker_maker")};f.onAccountSyncForPrivacy=function(a){this.trigger("account_sync_for_privacy",a)};f.updateStatusPrivacySettings=function(a){this.trigger("update_status_privacy_settings",a)};f.openStickerPack=function(a){this.trigger("open_sticker_pack",a)};f.onStatusViewerOpen=function(){this.trigger("status_viewer_open")};f.onStatusPostingFlow=function(){this.trigger("status_posting_flow")};f.triggerStorageAlert=function(){c("gkx")("26258")||this.trigger("handle_low_storage_butter_bar")};f.triggerBugReportV2=function(){d("WAWebCurrentUser").isEmployee()&&this.trigger("trigger_bugreport_v2")};f.onAbPropsUpdate=function(a){this.trigger("on_ab_props_update",a)};f.abPropsLoaded=function(){this.trigger("ab_props_loaded")};f.onNotificationPermissionChange=function(){this.trigger("on_notification_permission_change")};f.onBrigadingStateChange=function(a){this.trigger("on_brigading_state_change",a)};f.playNextPtv=function(a){this.trigger("sequential_ptv_playback",a)};f.groupNotificationContextCardRendered=function(a){this.trigger("group_notification_context_card_rendered",a)};f.botTogglePluginSearchDetailsToggle=function(a,b){if(a==null){d("WALogger").WARN(j());return}this.trigger("bot_toggle_plugin_search_details_for_target_id_"+a,b)};f.rerenderApp=function(){this.trigger("rerender_app")};return e}(c("WAWebEventEmitter"));var u=new f();function v(a){var b,c=function(){if(b)return;b=new AbortController();var c=b,e=c.signal;d("WAWebDocumentFlushed").documentFlushed({signal:e}).then(function(){if(e.aborted)return;b=null;a()},function(a){if(a instanceof Error&&a.name===d("WAAbortError").ABORT_ERROR)return;throw a})};c.cancel=function(){if(!b)return;b.abort();b=null};return c}g.Revoke=a;g.APP_STATE_SYNC_COMPLETED=e;g.CmdImpl=f;g.Cmd=u}),98);
__d("WAWebEventsWaitForBbEvent",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){var h;function a(a,c,e,f){e===void 0&&(e=function(){return!0});return(f==null?void 0:f.aborted)?(h||(h=b("Promise"))).reject(new(d("WAAbortError").AbortError)()):new(h||(h=b("Promise")))(function(b,g){var h=function(){if(!e.apply(this,arguments))return;j==null?void 0:j();b(arguments)},i=function(){j==null?void 0:j(),g(new(d("WAAbortError").AbortError)())},j=function(){a.off(c,h),f==null?void 0:f.removeEventListener("abort",i),j=null};f==null?void 0:f.addEventListener("abort",i);a.on(c,h)})}g["default"]=a}),98);
__d("WAWebEventsWaitForOfflineDeliveryEnd",["WACustomError","WALogger","WAPromiseTimeout","WAWebCmd","WAWebEventsWaitForBbEvent","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] offline delievery promise not resolved within 5 mins"]);h=function(){return a};return a}var i,j=5*60*1e3;function a(){if(i)return;i=c("WAWebEventsWaitForBbEvent")(d("WAWebCmd").Cmd,"offline_delivery_end");d("WAWebCmd").Cmd.on("offline_delivery_state_reset",function(){i=c("WAWebEventsWaitForBbEvent")(d("WAWebCmd").Cmd,"offline_delivery_end")})}function e(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebCmd").Cmd.isOfflineDeliveryEnd)return;if(!i)throw c("err")("waitForOfflineDeliveryEnd called before init");try{yield d("WAPromiseTimeout").promiseTimeout(i,j)}catch(a){if(a instanceof d("WACustomError").TimeoutError)d("WALogger").ERROR(h()).sendLogs("offline-resume-promise-unresolved");else throw a}yield i});return k.apply(this,arguments)}g.initWaitForOfflineDeliveryEnd=a;g.waitForOfflineDeliveryEnd=e}),98);
__d("WAWebWamEnumDeviceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:1,COMPANION:2});f.DEVICE_TYPE=a}),66);
__d("WAWebWamEnumDsmError",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_SENDER:1,MISSING_DSM:2,INVALID_DSM:3});f.DSM_ERROR=a}),66);
__d("WAWebMdBadDeviceSentMessageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDeviceType","WAWebWamEnumDsmError"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdBadDeviceSentMessage:[2176,{dsmError:[2,d("WAWebWamEnumDsmError").DSM_ERROR],peerType:[1,d("WAWebWamEnumDeviceType").DEVICE_TYPE]},[1,1,1],"regular"]},{MdBadDeviceSentMessage:[]});g.MdBadDeviceSentMessageWamEvent=a}),98);
__d("WAWebWamEnumE2eFailureReason",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_MESSAGE:0,LEGACY_MESSAGE:1,INVALID_VERSION:2,PRE_KEY_MESSAGE_MISSING_PRE_KEY:3,PRE_KEY_MESSAGE_INVALID_KEY:4,UNTRUSTED_IDENTITY:5,NO_SESSION_AVAILABLE:6,PLAINTEXT_BYTE_MISMATCH:7,UNKNOWN_CIPHERTEXT_TYPE:8,UNKNOWN_CIPHERTEXT_VERSION:9,INVALID_PADDING:10,INVALID_PROTOCOL_BUFFER:11,INVALID_NUMBER_OF_MESSAGE_TYPES:12,INVALID_IMAGE_FILE_LENGTH:13,INVALID_IMAGE_FILE_SHA256:14,INVALID_IMAGE_MEDIA_URL:15,INVALID_IMAGE_MEDIA_KEY:16,INVALID_IMAGE_MIME_TYPE:17,UNKNOWN_V2_TAGS:18,INVALID_EDIT_VERSION:19,INVALID_HSM_NAMESPACE:20,INVALID_HSM_ELEMENT:21,UNKNOWN_PROTOCOL_MESSAGE_TYPE:22,DUPLICATE_MESSAGE:23,FINGERPRINT_IDENTITY_MISMATCH:24,FINGERPRINT_VERSION_MISMATCH:25,INVALID_ARGUMENT:26,INVALID_KEY:27,INVALID_KEY_ID:28,INVALID_MAC:29,NO_MEMORY:30,STALE_KEY_EXCHANGE:31,VRF_SIGNATURE_VERIFICATION_FAILED:32,ERROR_MINIMUM_VALUE:33,ERROR_UNKNOWN:34,INVALID_BROADCAST_STANZA_ATTRIBUTE:35,INVALID_LIST_REPLY_MESSAGE:36,INVALID_LIST_REPLY_ROW_IDENTIFIER:37,INVALID_BUTTONS_RESPONSE_MESSAGE:38,INVALID_BUTTONS_RESPONSE_BUTTON_IDENTIFIER:39,INVALID_ORDER_MESSAGE:40,ERROR_CANCELLED:41,FUTURE_MESSAGE:42,INVALID_EMPTY_PROTOBUF_NOT_ALLOWED:43,SELF_SEND:44,INVALID_MEDIA_MIME_TYPE_TEMPLATE_MESSAGE:45,INVALID_MEDIA_ENC_HASH:46,INVALID_IDENTITY:47,PASSTHROUGH:48,NOT_IN_PENDING_DEVICES:49,EDIT_TYPE_AND_PROTOCOL_MISMATCH:50,DECRYPTION_FAILED:51,DESERIALIZE_INVALID_PROTO_FORMAT:52,DESERIALIZE_RATCHET_KEY_BAD_FORMAT:53,DESERIALIZE_PK_INVALID_PROTO_FORMAT:54,DESERIALZE_PK_KEY_BAD_FORMAT:55,TOO_MANY_MESSAGES_IN_FUTURE:56,EMPTY_VERSION_CONTENT_SUFFIX:57,CONTENT_EXCEEDED_EXPECTED_LENGTH:58,GRP_INVALID_PROTO_FORMAT:59,GRP_INVALID_KEY_FORMAT:60,GRP_VERSION_CONTENT_EMPTY:61,GRP_INVALID_VERSION_CONTENT_LENGTH:62,GRP_SENDER_KEY_INVALID_PROTO_FORMAT:63,GRP_SENDER_KEY_PROTO_ERROR:64,GRP_TOO_MANY_MESSAGES_IN_FUTURE:65,MISSING_MESSAGE_SECRET:66,MESSAGE_SECRET_INVALID:67,INVALID_REACTION_TEXT:68,UNSUPPORTED_MESSAGE_TYPE:69,UNSUPPORTED_IN_INTEROP:70,TARGET_MESSAGE_NOT_FOUND:71,STATUS_FROM_HOSTED_DEVICE_UNSUPPORTED:72,GROUP_MESSAGE_FROM_HOSTED_DEVICE_UNSUPPORTED:73,BROADCAST_FROM_HOSTED_DEVICE_UNSUPPORTED:74,LIVE_LOCATION_FROM_HOSTED_DEVICE_UNSUPPORTED:75,MESSAGE_TYPE_MISMATCH:76,ERROR_SESSION_STATE_UNACKED_PKMSG_GET_BASE_KEY:77,ERROR_SIGNAL_MESSAGE_GET_SENDER_RATCHET_KEY:78,ERROR_SESSION_STATE_GET_ROOT_KEY:79,ERROR_SESSION_STATE_GET_SENDER_RATCHET_KEY_PAIR:80,ERROR_SESSION_STATE_SET_SENDER_CHAIN_KEY:81,ERROR_SESSION_STATE_FIND_RECEIVER_CHAIN:82,ERROR_SESSION_RECORD_DESERIALIZE:83,ERROR_SENDER_KEY_STATE_REMOVE_SENDER_MESSAGE_KEY:84,ERROR_EMPTY_PLAINTEXT_DATA:85,ERROR_MAC_LEN_MISMATCH:86,ERROR_INVALID_MAC_LEN:87,ERROR_INVALID_SIGNATURE_LEN:88,ERROR_SENDER_KEY_LOAD_KEY:89,ERROR_FAST_RATCHET_SENDER_KEY_LOAD_KEY:90,ERROR_UNKNOWN_LOAD_KEY:91,ERROR_UNKNOWN_LOAD_SESSION:92,ERROR_SESSION_RECORD_GET_STATE:93,ERROR_SESSION_STATE_GET_SENDER_CHAIN_KEY:94,ERROR_INVALID_KEY_MATEIRAL_DATA_LEN:95,ERROR_SESSION_STATE_GET_SENDER_RATCHET_KEY:96,ERROR_SESSION_STATE_GET_LOCAL_IDENTITY_KEY:97,ERROR_SESSION_STATE_GET_REMOTE_IDENTITY_KEY:98,ERROR_MEDIA_HASH_VERIFICATION_FAILURE:99,ERROR_CIPHERTEXT_TOO_LONG:100,ERROR_THUMBNAIL_HASH_VERIFICATION_FAILURE:101,ERROR_PARENT_CHILD_SENDER_JID_MISMATCH:102});f.E2E_FAILURE_REASON=a}),66);
__d("WAWebHandleMsgError",["$InternalEnum","WACustomError","WAWebMdBadDeviceSentMessageWamEvent","WAWebWamEnumDsmError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;c===d("WAWebWamEnumDsmError").DSM_ERROR.MISSING_DSM?e=a.call(this,"message should be deviceSentMessage")||this:c===d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_SENDER?e=a.call(this,"message should not be deviceSentMessage")||this:c===d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_DSM?e=a.call(this,"invalid deviceSentMessage")||this:e=a.call(this,"unknown deviceSentMessage error")||this;new(d("WAWebMdBadDeviceSentMessageWamEvent").MdBadDeviceSentMessageWamEvent)({peerType:b,dsmError:c}).commit();e.peerType=b;e.dsmError=c;return babelHelpers.assertThisInitialized(e)}return b}((a=d("WACustomError")).customError("DeviceSentMessageError"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnknownDeviceMessageError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,typeof b==="string"?b:String(b))||this;e.code=b;e.e2eFailureReason=c;e.sendLogs=(b=d==null?void 0:d.sendLogs)!=null?b:!0;return e}return b}(a.customError("MessageValidationError"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,"Received Nack error code "+((c=a)!=null?c:"")+" from Server on message sent")||this;c.ackErrorCode=a;return c}return a}(a.customError("MessageSentAckError"));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("BizNodeValidationError"));b=b("$InternalEnum")({INVALID_POLL_UPDATE_STANZA:"poll_update_message_stanza_invalid",INVALID_REACTION_STANZA:"reaction_message_stanza_invalid",INVALID_PIN_IN_CHAT_STANZA:"pin_in_chat_message_stanza_invalid",INVALID_COMMENT_STANZA:"comment_message_stanza_invalid",INVALID_EVENT_RESPONSE_STANZA:"event_response_message_stanza_invalid",INVALID_EVENT_EDIT_STANZA:"event_edit_message_stanza_invalid"});var i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a=b.call(this,a,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MESSAGE_TYPE_MISMATCH)||this;a.name="MessageProtobufMismatchError";return a}return a}(f),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a=b.call(this,"Received "+a.length+" message keys: "+a.join(", "),d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_NUMBER_OF_MESSAGE_TYPES)||this;a.name="MessageProtobufInvalidMessageTypes";return a}return a}(f);g.DeviceSentMessageError=c;g.UnknownDeviceMessageError=e;g.MessageValidationError=f;g.MessageSentAckError=h;g.BizNodeValidationError=a;g.MessageProtobufMismatchErrorCode=b;g.MessageProtobufMismatchError=i;g.MessageProtobufInvalidMessageTypes=j}),98);
__d("WAWebAddonProcessMsgs",["AddonPlaceholderMsgsUtils","Promise","WALogger","WAWebABProps","WAWebAddonConstants","WAWebAddonCrossWindowUtils","WAWebAddonEncryptAddonMsgData","WAWebAddonLogUtils","WAWebAddonPluginProcessor","WAWebAddonProcessMsgsUtils","WAWebAddonSelectUtils","WAWebAddonSortUtils","WAWebAddonUpdateDataUtils","WAWebEventsWaitForOfflineDeliveryEnd","WAWebHandleMsgError","WAWebMsgSyncTunnelBatcher","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed history sync addons processing"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["process optimistic addon msg send: "," ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[addon-infra]: optimistic update "," (",") addon, id: ",", parent: ",", isParentLid: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["process addon msg: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed incoming addons processing"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[addon-infra]: processed "," addon(s) during ",", table mode ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[addon-infra] Failed to decrypt a message"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot decrypt a message: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[AddonInfraError] failed saving addons in "," with ","]"]);q=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["failed saving addons in "," with ",""]);a=function(){return b};return b}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed incoming addons processing ",""]);r=function(){return a};return a}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=c.addons,f=c.processor;c=c.processMode;var g=f.convert.toDualDecryptedMsgData;if(g==null)return e;if(c===d("WAWebAddonConstants").AddonProcessMode.HistorySync)return e;if(c!==d("WAWebAddonConstants").AddonProcessMode.OnlineReceive)return e;f=[];e=(yield (h||(h=b("Promise"))).allSettled(e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){return d("WAWebAddonCrossWindowUtils").isRealAddonType(b)?g(b,a.getForAddon(b)):b});return function(a){return c.apply(this,arguments)}}())));for(var i of e)i.status==="fulfilled"?f.push(i.value):d("WALogger").LOG(p(),i.reason);d("WAWebAddonLogUtils").hasSettledWithError(e)&&d("WALogger").ERROR(o()).tags("messagings","addons").sendLogs(String(c)+"-decription-failed",{sampling:.01});return f});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.addons,e=b.processor,f=b.processMode,g=b.tableMode,h=e.convert.toDualDecryptedMsgData;h=h==null?c:yield s(a,b);if(e.type===d("WAWebAddonConstants").AddonProcessorType.DualEncryptedWithMessageTraits){c=d("AddonPlaceholderMsgsUtils").getIncomingPlaceholderKeys(b);if(c!=null){var i=(yield d("AddonPlaceholderMsgsUtils").getPlaceholderMsgKeys(g,c));h=h.filter(function(a){return!i.has(a.id.toString())})}}b=(yield e.beforeUpsert(h,{processMode:f,parents:a}));return{processor:e,processMode:f,tableMode:g,addons:b}});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.addons,e=b.processor,f=b.processMode;b=b.tableMode;if(e.type===d("WAWebAddonConstants").AddonProcessorType.DualEncryptedWithMessageTraits){b=(yield d("AddonPlaceholderMsgsUtils").getPlaceholderMsgKeys(b,c.map(function(a){return a.id})));yield e.afterUpsert(c,{processMode:f,parents:a,existingPlaceholderKeys:b})}else yield e.afterUpsert(c,{processMode:f,parents:a})});return x.apply(this,arguments)}function y(a,b,c,d,e){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var i,j=(yield (h||(h=b("Promise"))).all(d("WAWebAddonSortUtils").groupAddonsByProcessor(a.mode,c,e).map(function(a){return u(f,a)})));i=(i=[]).concat.apply(i,j.map(function(a){a=a.addons;return a}));i.length&&(yield d("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:a.mode,tableMode:c},{add:i},{metricReporter:g}));yield h.all(j.map(function(a){return w(f,a)}));d("WALogger").DEV(n(),e.length,a.mode,d("WAWebAddonConstants").AddonTableMode.getName(c)).devConsole(e)});return z.apply(this,arguments)}function A(a,b,c,e){return Array.from(d("WAWebAddonSortUtils").groupAddonsByTableMode(b)).map(function(f){var g=f[0];f=f[1];return y(a,g,f,c,e)["catch"](function(a){if(a instanceof d("WAWebHandleMsgError").MessageValidationError){var c;d("WALogger").ERROR(r(),a).tags("addons","messaging").sendLogs("processAddonMsgs: "+((c=b[0])==null?void 0:c.type)+" in "+String(g));return}d("WALogger").LOG(q(),g,a);throw a})})}function c(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(a.length===0)return{orphans:[]};var e={mode:d("WAWebAddonConstants").AddonProcessMode.OnlineReceive};a=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs(a,e.mode));var f=a[0];a=a[1];a=d("WAWebAddonSortUtils").collectValidAndOrphanAddons(a,f);var g=a.validAddons;a=a.orphans;e=A(e,g,d("WAWebAddonSelectUtils").createAddonParentSelector(f),c);g=(yield (h||(h=b("Promise"))).allSettled(e));d("WAWebAddonLogUtils").hasSettledWithError(g)&&d("WALogger").ERROR(m()).tags("addons","messaging").sendLogs("processAddonMsgs");return{orphans:a}});return B.apply(this,arguments)}function e(a,b,c,d){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a={mode:a};try{a=A(a,[c],d("WAWebAddonSelectUtils").createAddonParentSelector(e),f);yield (h||(h=b("Promise"))).all(a)}catch(a){d("WALogger").ERROR(l(),a).tags("addons","messaging").sendLogs("sendingAddonMsgs");throw a}});return C.apply(this,arguments)}function D(a,b,c,d){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=e.getForAddon(c),i=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebAddonEncryptAddonMsgData").createDualEncryptionHelper(c,g);return a?a.encrypt():c});return function(){return a.apply(this,arguments)}}();i=(yield (h||(h=b("Promise"))).all([i(),y({mode:a},d("WAWebAddonSelectUtils").getAddonTableMode(c),[c],e,f)]));a=i[0];return{encryptedMsgData:a,decryptedMsgData:c,parent:g}});return E.apply(this,arguments)}function f(a,b,c){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{var e=d("WAWebAddonPluginProcessor").getAddonProcessor(b);void e.updateCollection({add:[b],remove:[]},a);d("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.isActive()&&!d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_store_before_postprocess")&&(yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd());e=d("WAWebAddonProcessMsgsUtils").getParentMsgKey(b);d("WALogger").LOG(k(),d("WAWebAddonCrossWindowUtils").getAddonProcessorType(b),b.type,b.id.id,e.id,(e=e.participant)==null?void 0:e.isLid());e=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs([b],a));b=e[0];e=e[1];a=(yield D(a,e[0],d("WAWebAddonSelectUtils").createAddonParentSelector(b),c));return a}catch(a){d("WALogger").ERROR(j(),a.message,a.stack).tags("addons","messaging").sendLogs("failed-optimistic-addon-send");throw a}});return F.apply(this,arguments)}function G(a){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var c={mode:d("WAWebAddonConstants").AddonProcessMode.HistorySync},e=d("WAWebAddonSelectUtils").createAddonParentSelector(new Map());c=A(c,a,e);a=(yield (h||(h=b("Promise"))).allSettled(c));d("WAWebAddonLogUtils").hasSettledWithError(a)&&d("WALogger").ERROR(i()).tags("addons","messaging").sendLogs("processHistoryAddonMsgs")});return H.apply(this,arguments)}g.processMsgsAndGetOrphans=c;g.processOutgoingMsg=e;g.processOutgoingMsgOptimisticUpdate=f;g.processHistoryMsgs=G}),98);
__d("WAWebLid1X1MigrationGating",["$InternalEnum","WAWebABProps","WAWebUserPrefsIndexedDBStorage"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({DEFAULT:0,PN_JID:1,LID_JID:2});a=function(){function a(){}var b=a.prototype;b.isAccountLidFieldMigrated=function(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WAIsAccountLidFieldMigrated")===!0};b.setIsAccountLidFieldMigrated=function(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WAIsAccountLidFieldMigrated",a)};b.isLidBehaviorABPropEnabled=function(){return!1};b.shouldApplyLidMessagingRules=function(){return this.isAccountLidFieldMigrated()&&this.isLidBehaviorABPropEnabled()};b.shouldAssignLidToChatId=function(){return!1};b.getOutgoingStanzaLidMigrationStatus=function(){var a;return(a=h.cast(d("WAWebABProps").getABPropConfigValue("lid_one_to_one_migration_outgoing_stanzas")))!=null?a:h.DEFAULT};b.isSyncdSessionMigrated=function(){return!1};return a}();c=new a();g.OutgoingStanzaMigrationStatus=h;g.Lid1X1MigrationUtils=c}),98);
__d("WAWebIsCagGroupCache",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.add=function(a){this.$1.add(a.toString())};b.remove=function(a){this.$1["delete"](a.toString())};b.isCag=function(a){return this.$1.has(a.toString())};b.clear=function(){this.$1.clear()};return a}();b=new a();c=b;f["default"]=c}),66);
__d("WAWebMsgKeyUtils",["$InternalEnum","WALogger","WANullthrows","WAWebIsCagGroupCache","WAWebUserPrefsMeUser","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["unexpected participant "," in ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["missing participant in a group "," "," ",""]);i=function(){return a};return a}var j=b("$InternalEnum").Mirrored(["Addon","Message","EditMessage"]);function a(a){return a.fromMe&&d("WAWebUserPrefsMeUser").isMeAccount(a.remote)}function k(a,b){var e=a.remote;if(e.isGroup()){if(a.participant==null){d("WALogger").WARN(i(),a.id,a.remote,a.fromMe).sendLogs("group-missing-participant");return!1}var f=c("WAWebIsCagGroupCache").isCag(e);return f&&b===j.Addon?!0:Boolean((f=a.participant)==null?void 0:f.isLid())}return e.isLid()}function l(a,b){if(k(b,a))return d("WAWebUserPrefsMeUser").getMeLidUser();switch(a){case j.Addon:return c("WAWebIsCagGroupCache").isCag(b.remote)?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser();case j.EditMessage:case j.Message:return d("WAWebUserPrefsMeUser").getMeUser()}}function e(a,b){var e=a.remote;b=l(b,a);if(e.isBroadcastList()){var f=c("WANullthrows")(a.participant,"missing participant in broadcast"),g=a.fromMe?b:f;f=a.fromMe?f:b;return{from:g,to:f,broadcastId:e}}g=a.fromMe?b:e;f=a.fromMe?e:b;b=e.isGroup()||e.isStatus();!b&&a.participant&&d("WALogger").WARN(h(),a.participant,e).sendLogs("msgKey-unexpected-participant",{sampling:.01});b=b?a.participant:void 0;return e.isStatus()?{from:g,to:f,author:b,broadcastId:e}:{from:g,to:f,author:b}}function f(a,b){return a.fromMe===b.fromMe&&c("WAWebWid").equals(a.remote,b.remote)&&c("WAWebWid").equals(a.participant,b.participant)}g.TranslateMsgKeyType=j;g.isNoteToSelf=a;g.isLidMsgKey=k;g.msgKeyToTargetInfo=e;g.equalSendersAddressingSensitive=f}),98);
__d("WAWebUsernameTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({CTWA:"ctwa",USERNAME:"username",GENERAL:"general"});f.LidOriginType=a}),66);
__d("WAWebLidMigrationUtils",["WALogger","WAWebApiContact","WAWebLid1X1MigrationGating","WAWebMsgKey","WAWebMsgKeyUtils","WAWebUserPrefsMeUser","WAWebUsernameTypes","WAWebWidFactory","err","nullthrows"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot find PN for LID in 1x1 chat migration"]);h=function(){return a};return a}function i(a){return a.isLid()?d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)):a}function j(a){return a.isLid()?a:d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a))}function a(a){return a?j:i}function b(a,b){if(a!=null&&b!=null&&a.isUser()&&b.isUser()&&a.isLid()!==b.isLid()){var c=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));if(c!=null)return[c,b];c=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(b));if(c!=null)return[a,c]}return[a,b]}function e(a){return(a=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(a))))==null?void 0:a.toString()}function f(a){if(a.remote.isGroup())return k(a);else if(a.remote.isUser())return l(a)}function k(a){var b=a.participant!=null?d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a.participant)):null;if(b==null)return;return new(c("WAWebMsgKey"))({fromMe:a.fromMe,remote:a.remote,id:a.id,participant:b})}function l(a){var b=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a.remote));if(b==null)return;return new(c("WAWebMsgKey"))({fromMe:a.fromMe,remote:b,id:a.id})}function m(a,b){var c=a.id.isLid(),e=a.isCAG;a=a.isGroup&&Boolean((a=a.groupMetadata)==null?void 0:a.isLidAddressingMode);switch(b){case d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon:return c||e||a?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").assertGetMeUser();case d("WAWebMsgKeyUtils").TranslateMsgKeyType.EditMessage:case d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message:return e?a?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").assertGetMeUser():c||a?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").assertGetMeUser()}}function n(a,b){if(a.isGroup())throw c("err")("getOutgoingChatIdOverride should only be used for 1x1 chats");var e=d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.getOutgoingStanzaLidMigrationStatus();if(e===d("WAWebLid1X1MigrationGating").OutgoingStanzaMigrationStatus.DEFAULT)return a;if(a.isUser()&&!a.isLid()){c("nullthrows")(b==null,"lidOriginType is set for PN chats");if(e===d("WAWebLid1X1MigrationGating").OutgoingStanzaMigrationStatus.DEFAULT||e===d("WAWebLid1X1MigrationGating").OutgoingStanzaMigrationStatus.PN_JID)return a;if(e===d("WAWebLid1X1MigrationGating").OutgoingStanzaMigrationStatus.LID_JID)throw c("err")("LID migration for 1x1 PN chats is not implemented yet")}if(a.isLid()&&b==null)throw c("err")("No lidOriginType associated with the LID chat "+a.toLogString());if(b===d("WAWebUsernameTypes").LidOriginType.CTWA||b===d("WAWebUsernameTypes").LidOriginType.USERNAME)return a;if(b===d("WAWebUsernameTypes").LidOriginType.GENERAL&&e===d("WAWebLid1X1MigrationGating").OutgoingStanzaMigrationStatus.PN_JID){b=d("WAWebApiContact").getAlternateDeviceWid(d("WAWebWidFactory").createDeviceWidFromWid(a));if(b==null){d("WALogger").WARN(h()).devConsole(a);throw c("err")("Cannot find PN for LID in 1x1 chat migration")}return b}return a}g.toPn=i;g.toLid=j;g.toAddressingModeFactory=a;g.toCommonAddressingMode=b;g.getAlternateJid=e;g.getAlternateMsgKey=f;g.getMeUserLidOrJidForChat=m;g.getOutgoingChatIdOverride=n}),98);
__d("WAWebMessageAssociationGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("message_association_infra_enabled")}g.isMessageAssociationInfraEnabled=a}),98);
__d("WAWebParentMsgKeyValidation",["$InternalEnum","WACustomError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_PARENT_MESSAGE_KEY:"missing_parent_message_key"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b="errorCode: "+String(b);c!=null&&(b+=" comment: "+c);return a.call(this,b)||this}return b}(d("WACustomError").customError("ParentMsgKeyValidationError"));g.ParentMsgKeyValidationErrorCode=a;g.ParentMsgKeyValidationError=c}),98);
__d("WAWebAddonProcessMsgsUtils",["Promise","WALogger","WAWebABProps","WAWebAddonConstants","WAWebAddonCrossWindowUtils","WAWebAddonGatingUtils","WAWebAddonPerfUtils","WAWebAddonPluginProcessor","WAWebAddonQueryUtils","WAWebLidMigrationUtils","WAWebMessageAssociationGatingUtils","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebParentMsgKeyValidation","WAWebWid","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseHistorySyncMsg: error:",""]);i=function(){return a};return a}function j(a){if(a.targetMessageKey!=null)return"targetMessageKey";else if(a.pinParentKey!=null)return"pinParentKey";else if(a.pollUpdateParentKey!=null)return"pollUpdateParentKey";else if(a.reactionParentKey!=null)return"reactionParentKey";else if(d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()&&a.parentMsgKey!=null)return"parentMsgKey";throw new(d("WAWebParentMsgKeyValidation").ParentMsgKeyValidationError)(d("WAWebParentMsgKeyValidation").ParentMsgKeyValidationErrorCode.MISSING_PARENT_MESSAGE_KEY)}function k(a){var b;b=(b=(b=(b=(b=a.targetMessageKey)!=null?b:a.parentMsgKey)!=null?b:a.pinParentKey)!=null?b:a.pollUpdateParentKey)!=null?b:a.reactionParentKey;if(b instanceof c("WAWebMsgKey"))return b;throw new(d("WAWebParentMsgKeyValidation").ParentMsgKeyValidationError)(d("WAWebParentMsgKeyValidation").ParentMsgKeyValidationErrorCode.MISSING_PARENT_MESSAGE_KEY)}function l(a){a=k(a);if(a.remote.isBroadcastList()){var b=d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message);b=a.fromMe?b.to:b.from;return new(c("WAWebMsgKey"))({remote:b,fromMe:a.fromMe,id:a.id})}return a}function m(a){var b=d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a);if(d("WAWebAddonPluginProcessor").getAddonProcessorsMap().has(b))return a}function n(a,b){var e=new Map();a=a.map(function(a){var f=l(a),g=d("WAWebLidMigrationUtils").getAlternateMsgKey(f),h=null;if(e.has(f.toString()))h=c("nullthrows")(e.get(f.toString()));else if(g!=null&&e.has(g.toString()))h=c("nullthrows")(e.get(g.toString()));else{var i=b.get(f.toString());i==null&&g&&(i=b.get(g.toString()));i!=null&&!f.equals(i.id)&&(h=i.id,e.set(f.toString(),h))}f=(i=b.get(f.toString()))!=null?i:g!=null?b.get(g.toString()):void 0;if(f==null)return a;if(h==null)return p(a,f);i=q(a,h);return p(i,f)});e.forEach(function(a,c){var d=b.get(c);d!=null&&(b.set(a.toString(),d),b["delete"](c))});return[b,a]}function o(a,b){var c=l(a),d=b.get(c.toString());if(d!=null){var e=a;if(!c.equals(d.id)){b["delete"](c.toString());c=d.id;b.set(c.toString(),d);e=q(a,c)}return p(e,d)}return a}function p(a,b){b=b.broadcastId!=null&&c("WAWebWid").isWid(b.broadcastId)&&Boolean((b=b.broadcastId)==null?void 0:b.isBroadcastList());if(!b)return a;b=l(a);return q(a,new(c("WAWebMsgKey"))({id:b.id,fromMe:b.fromMe,remote:b.remote}))}function q(a,b){var e=j(a),f=a.id,g=d("WAWebABProps").getABPropConfigValue("should_use_lid_orphan_alternate_reaction_d61074491");g&&a.id.remote.isUser()&&b.remote.isUser()&&(f=new(c("WAWebMsgKey"))({fromMe:a.id.fromMe,remote:b.remote,id:a.id.id}));return babelHelpers["extends"]({},a,(g={id:f},g[e]=b,g))}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.map(l),e;b===d("WAWebAddonConstants").AddonProcessMode.OnlineReceive&&(e=(yield d("WAWebAddonPerfUtils").createMessagesQplMarker(d("WAWebAddonPerfUtils").AddonQplMarkerType.Incoming,{type:d("WAWebAddonPerfUtils").AnnotationRequestType.BulkGetParentMsgs,size:c.length})));try{b=(yield s(a));(c=e)==null?void 0:c.success();return b}catch(b){(a=e)==null?void 0:a.fail();throw b}});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(l),c=(yield d("WAWebAddonQueryUtils").getParentMsgsByMsgKey(b));b=d("WAWebABProps").getABPropConfigValue("should_fix_multiple_lid_messages_d61076979");if(b)return n(a,c);b=a.map(function(a){return o(a,c)});return[c,b]});return t.apply(this,arguments)}function e(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var c=[];for(var e of d("WAWebAddonPluginProcessor").getAddonProcessorsMap().entries()){var f=e[0],g=e[1];d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(f)&&c.push(g.convert.fromHistorySyncMsg(a))}f=(yield (h||(h=b("Promise"))).all(c).then(function(a){var b;return(b=[]).concat.apply(b,a)}));return f}catch(a){d("WALogger").WARN(i(),a).tags("addons","messaging").sendLogs("parseHistorySyncMsg");return[]}});return u.apply(this,arguments)}function f(a){var b=[],c=[],e=[];for(a of a){var f=a.parsedMsgPayload;if(d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(f.type)){var g=m(f);g!=null?b.push(g):c.push(a)}else f.kind===d("WAWebMsgType").MsgKind.ReactionDecrypted?e.push(f):c.push(a)}return{unifiedAddons:b,otherOrphans:c,legacyReactionAddons:e}}g.getParentMsgKeyName=j;g.getParentMsgKey=l;g.castToAddonMsgData=m;g.updateMsgParentKeyValue=q;g.queryAddonParentMsgs=a;g.queryParentMsgs=s;g.parseHistorySyncMsg=e;g.sortAddonOrphans=f}),98);
__d("WAPhoneFindCC",[],(function(a,b,c,d,e,f){"use strict";var g=/^(1|2[07]|3[0-469]|4[013-9]|5[1-8]|6[0-6]|7|8[1246]|9[0-58])/;function a(a){return h(a)}function h(a){var b=a.match(g);if(b)return b[0];else return a.length>=3?a.substring(0,3):a}function b(a){a=a.match(/\d+/g);return a!=null?a.join(""):""}f.phoneCC=a;f.findCC=h;f.extractDigits=b}),66);
__d("WAWebAck",[],(function(a,b,c,d,e,f){a={INACTIVE:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4,PEER:5};b={MESSAGE_EDIT:1,PIN_IN_CHAT:2,SENDER_REVOKE:7,ADMIN_REVOKE:8};c={SENDER:"sender",DELIVERY:"delivery",READ:"read",PLAYED:"played",INACTIVE:"inactive",READ_SELF:"read-self",PLAYED_SELF:"played-self"};f.ACK=a;f.EDIT_ATTR=b;f.ACK_STRING=c}),66);
__d("WAWebBizSystemMsgSubtypes",[],(function(a,b,c,d,e,f){a=["blue_msg_bsp_fb_to_bsp_premise","blue_msg_bsp_fb_to_self_fb","blue_msg_bsp_fb_to_self_premise","blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_unverified_to_bsp_premise_verified","blue_msg_bsp_fb_unverified_to_self_fb_verified","blue_msg_bsp_fb_unverified_to_self_premise_verified","blue_msg_bsp_fb_verified","blue_msg_bsp_fb_verified_to_bsp_premise_unverified","blue_msg_bsp_fb_verified_to_self_fb_unverified","blue_msg_bsp_fb_verified_to_self_premise_unverified","blue_msg_bsp_premise_to_self_premise","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_unverified_to_self_premise_verified","blue_msg_bsp_premise_verified","blue_msg_bsp_premise_verified_to_self_premise_unverified","blue_msg_consumer_to_bsp_fb_unverified","blue_msg_consumer_to_bsp_premise_unverified","blue_msg_consumer_to_self_fb_unverified","blue_msg_consumer_to_self_premise_unverified","blue_msg_self_fb_to_bsp_premise","blue_msg_self_fb_to_self_premise","blue_msg_self_fb_unverified","blue_msg_self_fb_unverified_to_bsp_premise_verified","blue_msg_self_fb_unverified_to_self_premise_verified","blue_msg_self_fb_verified","blue_msg_self_fb_verified_to_bsp_premise_unverified","blue_msg_self_fb_verified_to_self_premise_unverified","blue_msg_self_premise_to_bsp_premise","blue_msg_self_premise_unverified","blue_msg_self_premise_verified","blue_msg_to_bsp_fb","blue_msg_to_consumer","blue_msg_to_self_fb","blue_msg_unverified_to_bsp_fb_verified","blue_msg_unverified_to_bsp_premise_verified","blue_msg_unverified_to_self_fb_verified","blue_msg_unverified_to_verified","blue_msg_verified_to_bsp_fb_unverified","blue_msg_verified_to_bsp_premise_unverified","blue_msg_verified_to_self_fb_unverified","blue_msg_verified_to_unverified"];b=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp"];c=["biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"];d=[].concat(b,c);e="product_inquiry";f.BIZ_SYSTEM_MSG_SUBTYPES=a;f.BIZ_SYSTEM_MSG_SUBTYPES_V2_INIT=b;f.BIZ_SYSTEM_MSG_SUBTYPES_V2=d;f.PRODUCT_INQUIRY_TYPE=e}),66);
__d("WAWebBotTypes",["$InternalEnum"],(function(a,b,c,d,e,f){c=(a=b("$InternalEnum"))({FIRST:"first",INNER:"inner",LAST:"last",FULL:"full"});d=a({BIZ_1P:"biz_1p",BIZ_3P:"biz_3p"});e=a.Mirrored(["POSITIVE","NEGATIVE_GENERIC","NEGATIVE_HELPFUL","NEGATIVE_INTERESTING","NEGATIVE_ACCURATE","NEGATIVE_SAFE","NEGATIVE_OTHER","NEGATIVE_REFUSED","NEGATIVE_NOT_VISUALLY_APPEALING","NEGATIVE_NOT_RELEVANT_TO_TEXT"]);b=a({UNKNOWN:"unknown",PARTIAL_1P:"1p_partial",FULL_3P:"3p_full"});var g=a({NONE:"none",BASIC:"basic"});a=a({PROMPT:"prompt",COMMAND:"command",VOICE:"voice"});f.BotMsgEditType=c;f.BizBotType=d;f.BotFeedbackKind=e;f.BizBotAutomatedType=b;f.BotWelcomeMsgProtocolModeType=g;f.BotMsgBodyType=a}),66);
__d("WAWebBusinessHSMTypes",[],(function(a,b,c,d,e,f){a={MARKETING:"MARKETING",UTILITY:"UTILITY",AUTHENTICATION:"AUTHENTICATION"};f.HSM_TAG_TYPE=a}),66);
__d("WAWebCommonMsgUtils",["$InternalEnum","WALogger","WAWebMsgType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["undefined message type msgId::",""]);h=function(){return a};return a}b=b("$InternalEnum")({DEFAULT:"d",SIGNIFICANT:"s",AMBIENT:"a",NOTEWORTHY:"n",IGNORE:"i"});function a(a,b){switch(a){case d("WAWebMsgType").MSG_TYPE.GP2:case d("WAWebMsgType").MSG_TYPE.BROADCAST_NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE:case d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION:case d("WAWebMsgType").MSG_TYPE.CALL_LOG:case d("WAWebMsgType").MSG_TYPE.PINNED_MESSAGE:case d("WAWebMsgType").MSG_TYPE.NEWSLETTER_NOTIFICATION:return!0;case d("WAWebMsgType").MSG_TYPE.PROTOCOL:return b==="ephemeral_setting"||b==="share_phone_number"||b==="event_edit_decrypted";default:return!1}}function c(a){return a===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT||a===d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER}function e(a){return a===d("WAWebMsgType").MSG_TYPE.UNKNOWN}function f(a){a.forEach(function(a){a.type===void 0&&d("WALogger").ERROR(h(),a.id).sendLogs("undefined-msg-type",{sampling:.01})})}g.EventType=b;g.isNotificationType=a;g.isPlaceholderMsg=c;g.isFutureproofMsg=e;g.logUndefinedMessage=f}),98);
__d("WAWebConstantsDeprecated",[],(function(a,b,c,d,e,f){a={IMG_THUMB_MAX_EDGE:100,DOC_THUMB_MAX_EDGE:480,VIDEO_THUMB_MAX_EDGE:480,MAX_PORTRAIT_MEDIA_CAPTION_LENGTH:500,MEDIA_EDITOR_OUTLINE_TENSION:.4,MMS_THUMBNAIL_UPLOAD_TIMEOUT:3e3,FREQUENTLY_FORWARDED_SENTINEL:127,WA_COMMERCE_POLICY_URL:"https://www.whatsapp.com/policies/commerce-policy",MAX_TXT_MSG_SIZE:64*1024,GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:100,BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:200,TEMPLATE_URL_START:64,TEMPLATE_URL_END:32,SQUELCH_RESET_VALUE:-1,MAX_CAPTION_LENGTH:1024,REACTION_CONTENT_MAX_LENGTH:30,MAX_CART_MESSAGE_LENGTH:1024,MAX_PUSHNAME_LENGTH:25,KEY_BUNDLE_TYPE:"\x05",NEW_MSG_SENT:"new_msg_sent",ONE_BY_ONE_TRANS_GIF:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",VOIP_LOG_COLOR:"#aa6627",WAM_SYS_INFO_INIT_DELAY:5e3,MARKED_AS_UNREAD:-1};b=a;f["default"]=b}),66);
__d("WAWebEphemeralConstants",["$InternalEnum","WATimeUtils"],(function(a,b,c,d,e,f,g){c=d("WATimeUtils").DAY_SECONDS*7;e=d("WATimeUtils").DAY_SECONDS*90;f=b("$InternalEnum").Mirrored(["KEPT","UNKEPT"]);var h=b("$InternalEnum").Mirrored(["Seconds","Minutes","Hours","Days","Weeks"]);function a(a,b){b===void 0&&(b=!1);if(a<=d("WATimeUtils").MINUTE_SECONDS)return{duration:a,unit:h.Seconds};else if(a<d("WATimeUtils").HOUR_SECONDS){var c=Math.floor(a/60);return{duration:c,unit:h.Minutes}}else if(a<=d("WATimeUtils").DAY_SECONDS){c=Math.floor(a/60/60);return{duration:c,unit:h.Hours}}else if(Boolean(b)){if(a<d("WATimeUtils").WEEK_SECONDS){c=Math.floor(a/24/60/60);return{duration:c,unit:h.Days}}b=Math.floor(a/7/24/60/60);return{duration:b,unit:h.Weeks}}c=Math.floor(a/24/60/60);return{duration:c,unit:h.Days}}g.ONE_DAY=d("WATimeUtils").DAY_SECONDS;g.SEVEN_DAYS=c;g.NINETY_DAYS=e;g.KeepInChatState=f;g.DurationUnit=h;g.getDurationForString=a}),98);
__d("WAWebEphemeralityTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ChangedInChat:"chat",InitiatedByMe:"me",InitiatedByOther:"other",BizUpgradeFbHosting:"biz_upgrade_fb_hosting"});c=b("$InternalEnum")({Unknown:"unknown",ChatSettings:"chat_settings",AccountSettings:"account_settings",BulkChange:"bulk_change",BizSupportFbHosting:"biz_supports_fb_hosting",UnknownGroups:"unknown_groups"});f.DisappearingModeInitiator=a;f.DisappearingModeTrigger=c}),66);
__d("WAWebWamEnumDisappearingChatInitiatorType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT:1,INITIATED_BY_ME:2,INITIATED_BY_OTHER:3,CHAT_PICKER:4,BIZ_UPGRADE_FB_HOSTING:5});f.DISAPPEARING_CHAT_INITIATOR_TYPE=a}),66);
__d("WAWebWamEnumEphemeralityInitiatorType",[],(function(a,b,c,d,e,f){a=Object.freeze({INITIATED_BY_ME:1,INITIATED_BY_OTHER:2,BIZ_UPGRADE_FB_HOSTING:3});f.EPHEMERALITY_INITIATOR_TYPE=a}),66);
__d("WAWebWamEnumEphemeralityTriggerActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,CHAT_SETTINGS:1,ACCOUNT_SETTINGS:2,BULK_CHANGE:3,BIZ_SUPPORTS_FB_HOSTING:4,UNKNOWN_GROUP:5});f.EPHEMERALITY_TRIGGER_ACTION_TYPE=a}),66);
__d("WAWebEphemeralityWAMUtils",["WAWebEphemeralityTypes","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType"],(function(a,b,c,d,e,f,g){function a(a){switch(a){case d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.ACCOUNT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.CHAT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.BULK_CHANGE;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.UNKNOWN_GROUP;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting:case d("WAWebEphemeralityTypes").DisappearingModeTrigger.Unknown:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.UNKNOWN}}function b(a){a===void 0&&(a=!1);return Boolean(a)?d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_ME:d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_OTHER}function c(a){switch(a){case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_ME;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther:case d("WAWebEphemeralityTypes").DisappearingModeInitiator.BizUpgradeFbHosting:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_OTHER;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:return d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE.CHAT}}g.getWamDisappearingModeTrigger=a;g.getWamDisappearingModeInitiatedByMe=b;g.getWamDisappearingModeInitiator=c}),98);
__d("WAWebGetters",["err"],(function(a,b,c,d,e,f,g){var h=function(){var a=i;i++;return a},i=0;function a(a){a=a||{};var b=a.root,d=a.rootEqualityCheck;a=a.createCache;a=a===void 0?s:a;var e=a(),f=h(),g=function(){var a=i;i++;return a},i=0,l=(a=b)!=null?a:k({getterGroupId:f,getterId:g(),resultEqualityCheck:(b=d)!=null?b:r,cache:e});if(l.kind!=="identity")throw c("err")("root must be an identity getter but got kind "+l.kind);return{field:function(a,b){b=b||{};var c=b["default"],d=b.getDefault;b=b.resultEqualityCheck;b=b===void 0?r:b;var h;d!=null?h=function(b){b=b[0];return(b=b[a])!=null?b:d()}:c===void 0?h=function(b){b=b[0];return b[a]}:h=function(b){b=b[0];return(b=b[a])!=null?b:c};return j({getterGroupId:f,getterId:g(),root:l,cache:e,resultFunc:h,resultEqualityCheck:b,props:{kind:"field",dependencyKey:a,dependencies:[l]}})},computed:function(a,b,c){c=c||{};c=c.resultEqualityCheck;c=c===void 0?r:c;return j({getterGroupId:f,getterId:g(),root:l,cache:e,resultFunc:a,resultEqualityCheck:c,props:{kind:"computed",dependencies:b}})},unsafeIdentityGetter:l,clearCacheFor:function(a){e["delete"](t(a))}}}function j(a){var b=a.getterGroupId,d=a.getterId,e=a.root,f=a.cache,g=a.resultFunc,h=a.resultEqualityCheck;a=a.props;var i=a.dependencies,j=i.length,k=n(d),m=o(d),r=p(d);return l({getterGroupId:b,getterId:d,root:e,cache:f,props:babelHelpers["extends"]({},a,{resultFunc:g}),recomputeIfNeeded:function(a,d,e){a=e[b];var f=a[m],l=a[r];if(l!=null&&f!=null){if(l===d)return f;if(l!=null&&j>0){var n=!1;for(var o=0;o<j;o++){var p=i[o];p=p.$$extractChangedAt(e[p.$$getterGroupId]);n=p==null||p>l;if(n)break}if(!n){a[r]=d;return f}}}p=new Array(j);for(o=0;o<j;o++){l=i[o];n=l.$$extractResult(e[l.$$getterGroupId]);if(n===void 0)throw c("err")("No result was stored");p[o]=u(n)}l=g(p);n=a[k];if(f!=null&&n!==void 0&&h(l,u(n))){a[r]=d;return f}a[k]=l===void 0?q:l;a[m]=d;a[r]=d;return d}})}function k(a){var b=a.getterGroupId,c=a.getterId,d=a.resultEqualityCheck;a=a.cache;var e=n(c),f=o(c),g=p(c);return l({getterGroupId:b,getterId:c,root:null,cache:a,props:{kind:"identity",dependencies:[]},recomputeIfNeeded:function(a,c,h){h=h[b];var i=h[e],j=a,k=h[g];a=a==null?0:a.revisionNumber||0;if(i!==void 0&&k===a&&d(j,u(i)))return c;k=c+1;h[e]=j===void 0?q:j;h[f]=k;h[g]=a;return k}})}function l(a){var b=a.getterGroupId,d=a.getterId,e=a.root,f=a.cache,g=a.recomputeIfNeeded;a=a.props;var h=a.dependencies,i=n(d),j=o(d),k=p(d);d=function(a){var d=t(a),e={};for(var f=0;f<s.length;f++){var g=s[f],h=r[g],j=h.get(d);j==null&&(j={},h.set(d,j));e[g]=j}h=q.$$recomputeIfNeeded(a,q.$$extractChangedAt(e[q.$$getterGroupId])||0,e);g=e[b];j=g[k];if(j==null||h>j)for(d=0;d<l.length;d++){f=j!=null;var m=l[d];for(var n=0;n<m.length;n++){var o=m[n].$$recomputeIfNeeded(a,h,e);(j==null||o>j)&&(f=!1)}if(f)break}o=g[i];if(o===void 0)throw c("err")("No result was stored");return u(o)};a=Object.assign(d,{kind:a.kind,dependencies:h,dependencyKey:a.dependencyKey,resultFunc:a.resultFunc,$$getterGroupId:b,$$root:e||d,$$cache:f,$$recomputeIfNeeded:g,$$extractChangedAt:function(a){return a[j]},$$extractResult:function(a){return a[i]}});var l=m(a),q=a.$$root;for(e=0;e<h.length;e++)if(h[e].$$root!==q)throw c("err")("Getter created with multiple roots. This means you used getters that came from different `createGetterFactories()` calls as dependencies in a `computed()` getter. If you want to do this, you must pass the identity getter created by one of the `createGetterFactories()` calls as the `root` option to the other.");var r=(d={},d[q.$$getterGroupId]=q.$$cache,d),s=[q.$$getterGroupId];for(f=0;f<l.length;f++)for(g=0;g<l[f].length;g++){h=l[f][g];e=h.$$getterGroupId;d=h.$$cache;r[e]==null&&(s.push(e),r[e]=d)}return a}function m(a){a=[a];for(var b=0;b<a.length;b++){var d=a[b];d.dependencies!=null&&a.push.apply(a,d.dependencies)}d=Array.from(new Set(a.reverse()));b=[];a=[];for(var e=0;e<d.length;e++){var f=d[e];switch(f.kind){case"identity":break;case"field":b.push(f);break;case"computed":a.push(f);break;default:throw c("err")("Invalid getter kind: "+f.kind)}}return[b,a].filter(function(a){return a.length>0})}var n=function(a){return 3*a},o=function(a){return 3*a+1},p=function(a){return 3*a+2};b=function(){function a(){}var b=a.prototype;b.toString=function(){return"UndefinedSentinel"};return a}();var q=new b();function r(a,b){return a===b}function s(){return new Map()}function t(a){if(a==null)throw c("err")("Getter was called with "+String(a)+" data.");a=a.id;if(a==null)throw c("err")("Data passed to getter must include an id property (it's how we memoize) but got "+String(a));return a.toString()}function u(a){return a===q?void 0:a}g.createGetterFactories=a}),98);
__d("WAWebGettersCaches",[],(function(a,b,c,d,e,f){a=function(){return new Map()};b=function(){return new Map()};c=function(){return new Map()};d=function(){return new Map()};e=function(){return new Map()};var g=function(){return new Map()},h=function(){return new Map()},i=function(){return new Map()},j=function(){return new Map()},k=function(){return new Map()},l=function(){return new Map()},m=function(){return new Map()},n=function(){return new Map()},o=function(){return new Map()},p=function(){return new Map()},q=function(){return new Map()},r=function(){return new Map()},s=function(){return new Map()},t=function(){return new Map()},u=function(){return new Map()},v=function(){return new Map()},w=function(){return new Map()},x=function(){return new Map()},y=function(){return new Map()},z=function(){return new Map()};f.createMessagesCache=a;f.createFrontendMessagesCache=b;f.createContactsCache=c;f.createFrontendContactsCache=d;f.createLabelsCache=e;f.createMuteCache=g;f.createPinInChatsCache=h;f.createFrontendPinInChatsCache=i;f.createMsgInfosCache=j;f.createPollVotesCache=k;f.createFrontendPollVotesCache=l;f.createNewsletterPollVotesCache=m;f.createFrontendNewsletterPollVotesCache=n;f.createSettingsCache=o;f.createStickerModelMdCache=p;f.createMediaEditControllerCache=q;f.createOrderCache=r;f.createOrderItemCache=s;f.createQuickReplyCache=t;f.createFrontendQuickReplyCache=u;f.createStatusCache=v;f.createFrontendStatusCache=w;f.createRecordingSessionCache=x;f.createEventResponseCache=y;f.createFrontendEventResponseCache=z}),66);
__d("WAWebInteractiveMessageHeaderMediaType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["IMAGE","VIDEO","DOCUMENT"]);c=new Set([a.IMAGE,a.VIDEO,a.DOCUMENT]);f.InteractiveMessageHeaderMediaType=a;f.IM_MEDIA_HEADER_TYPES=c}),66);
__d("WATypedArraysEqual",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===b)return!0;return a.length!==b.length?!1:a.every(function(a,c){return a===b[c]})}f["default"]=a}),66);
__d("WAWebMimeToExt",[],(function(a,b,c,d,e,f){a={"application/":{applixware:"aw","atom+xml":"atom","atomcat+xml":"atomcat","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-":{capability:"cdmia",container:"cdmic",domain:"cdmid",object:"cdmio",queue:"cdmiq"},"davmount+xml":"davmount","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc",ecmascript:"ecma","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-":{tdpfr:"pfr",woff:"woff"},"gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","java-":{archive:"jar",vm:"class","serialized-object":"ser"},javascript:"js",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mac-":{binhex40:"hqx",compactpro:"cpt"},"mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx",mathematica:["ma","nb","mb"],"mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps",pdf:"pdf","pgp-":{encrypted:"pgp",signature:["asc","sig"]},pkcs10:"p10","pkcs7-":{mime:["p7m","p7c"],signature:"p7s"},pkcs8:"p8","pkix-":{cert:"cer",crl:"crl",pkipath:"pkipath","attr-cert":"ac"},pkixcmp:"pki","pls+xml":"pls",postscript:["ai","eps","ps"],"pskc+xml":"pskcxml","rdf+xml":"rdf","reginfo+xml":"rif","resource-":{"lists+xml":"rl","lists-diff+xml":"rld"},"rpki-":{ghostbusters:"gbr",manifest:"mft",roa:"roa"},"rsd+xml":"rsd","rss+xml":"rss",rtf:"rtf","sbml+xml":"sbml","scvp-":{"cv-":{request:"scq",response:"scs"},"vp-":{request:"spq",response:"spp"}},sdp:"sdp","set-":{"payment-initiation":"setpay","registration-initiation":"setreg"},"shf+xml":"shf","smil+xml":["smi","smil"],"sparql-":{query:"rq","results+xml":"srx"},srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","vnd.":{acucobol:"acu",acucorp:["atc","acutc"],"adobe.":{fxp:["fxp","fxpl"],"xdp+xml":"xdp",xfdf:"xfdf","formscentral.fcdt":"fcdt","air-application-installer-package+zip":"air"},"apple.":{"installer+xml":"mpkg",mpegurl:"m3u8"},audiograph:"aep",bmi:"bmi",businessobjects:"rep","chemdraw+xml":"cdxml",cinderella:"cdy",claymore:"cla",commonspace:"csp",cosmocaller:"cmc","crick.":{clicker:"clkx","clicker.":{keyboard:"clkk",palette:"clkp",template:"clkt",wordbank:"clkw"}},"curl.":{car:"car",pcurl:"pcurl"},dart:"dart","dece.":{data:["uvf","uvvf","uvd","uvvd"],"ttml+xml":["uvt","uvvt"],unspecified:["uvx","uvvx"],zip:["uvz","uvvz"]},dna:"dna",dpgraph:"dpg",dreamfactory:"dfac","dvb.":{ait:"ait",service:"svc"},dynageo:"geo",enliven:"nml","epson.":{esf:"esf",msf:"msf",quickanime:"qam",salt:"slt",ssf:"ssf"},"eszigno3+xml":["es3","et3"],"ezpix-":{album:"ez2","package":"ez3"},fdf:"fdf","fdsn.":{mseed:"mseed",seed:["seed","dataless"]},flographit:"gph",framemaker:["fm","frame","maker","book"],"frogans.":{fnc:"fnc",ltf:"ltf"},"fujitsu.":{oasys:"oas",oasys2:"oa2",oasys3:"oa3",oasysgp:"fg5",oasysprs:"bh2"},"fujixerox.":{ddd:"ddd",docuworks:"xdw","docuworks.binder":"xbd"},fuzzysheet:"fzs","geogebra.":{file:"ggb",tool:"ggt"},geonext:"gxt",geoplan:"g2w",geospace:"g3w",gmx:"gmx",grafeq:["gqf","gqs"],"groove-":{account:"gac",help:"ghf",injector:"grv","tool-":{message:"gtm",template:"tpl"},vcard:"vcg","identity-message":"gim"},"hal+xml":"hal",hbci:"hbci","hp-":{hpgl:"hpgl",hpid:"hpid",hps:"hps",jlyt:"jlt",pcl:"pcl",pclxl:"pclxl"},"ibm.":{minipay:"mpy",modcap:["afp","listafp","list3820"],"rights-management":"irm","secure-container":"sc"},iccprofile:["icc","icm"],igloader:"igl","immervision-":{ivp:"ivp",ivu:"ivu"},intergeo:"i2g","intu.":{qbo:"qbo",qfx:"qfx"},jam:"jam",jisp:"jisp",kahootz:["ktz","ktr"],"kde.":{karbon:"karbon",kchart:"chrt",kformula:"kfo",kivio:"flw",kontour:"kon",kpresenter:["kpr","kpt"],kspread:"ksp",kword:["kwd","kwt"]},kenameaapp:"htke",kidspiration:"kia",kinar:["kne","knp"],koan:["skp","skd","skt","skm"],"lotus-":{approach:"apr",freelance:"pre",notes:"nsf",organizer:"org",screencam:"scm",wordpro:"lwp","1-2-3":"123"},mcd:"mcd",medcalcdata:"mc1",mfer:"mwf",mfmp:"mfm","micrografx.":{flo:"flo",igx:"igx"},mif:"mif","mobius.":{daf:"daf",dis:"dis",mbk:"mbk",mqy:"mqy",msl:"msl",plc:"plc",txf:"txf"},"mophun.":{application:"mpn",certificate:"mpc"},"ms-":{artgalry:"cil",excel:["xls","xlm","xla","xlc","xlt","xlw"],"excel.":{"sheet.":{"macroenabled.12":"xlsm","binary.macroenabled.12":"xlsb"},"addin.macroenabled.12":"xlam","template.macroenabled.12":"xltm"},fontobject:"eot",htmlhelp:"chm",ims:"ims",lrm:"lrm",outlook:"msg",officetheme:"thmx","pki.":{seccat:"cat",stl:"stl"},powerpoint:["ppt","pps","pot"],"powerpoint.":{"addin.macroenabled.12":"ppam","presentation.macroenabled.12":"pptm","slide.macroenabled.12":"sldm","slideshow.macroenabled.12":"ppsm","template.macroenabled.12":"potm"},project:["mpp","mpt"],"word.":{"document.macroenabled.12":"docm","template.macroenabled.12":"dotm"},works:["wps","wks","wcm","wdb"],wpl:"wpl",xpsdocument:"xps","cab-compressed":"cab"},mseq:"mseq",musician:"mus",mynfc:"taglet",nitf:["ntf","nitf"],"noblenet-":{directory:"nnd",sealer:"nns",web:"nnw"},"nokia.":{"radio-":{preset:"rpst",presets:"rpss"},"n-gage.":{data:"ngdat","symbian.install":"n-gage"}},"novadigm.":{edm:"edm",edx:"edx",ext:"ext"},"osgi.":{dp:"dp",subsystem:"esa"},palm:["pdb","pqa","oprc"],pawaafile:"paw","pg.":{format:"str",osasli:"ei6"},picsel:"efif",pocketlearn:"plf",powerbuilder6:"pbd","recordare.":{musicxml:"mxl","musicxml+xml":"musicxml"},"rn-":{realmedia:"rm","realmedia-vbr":"rmvb"},seemail:"see",sema:"sema",semd:"semd",semf:"semf",smaf:"mmf","spotfire.":{dxp:"dxp",sfs:"sfs"},"stardivision.":{calc:"sdc",draw:"sda",impress:"sdd",math:"smf",writer:["sdw","vor"],"writer-global":"sgl"},"stepmania.":{"package":"smzip",stepchart:"sm"},svd:"svd","syncml+xml":"xsm","syncml.":{"dm+wbxml":"bdm","dm+xml":"xdm"},trueapp:"tra",ufdl:["ufd","ufdl"],umajin:"umj",unity:"unityweb","uoml+xml":"uoml",vcx:"vcx",visio:["vsd","vst","vss","vsw"],visionary:"vis",vsf:"vsf","Webd.":{wbxml:"wbxml",wmlc:"wmlc",wmlscriptc:"wmlsc"},webturbo:"wtb",wordperfect:"wpd",wqd:"wqd",xara:"xar",xfdl:"xfdl","yamaha.":{"hv-":{dic:"hvd",script:"hvs",voice:"hvp"},openscoreformat:"osf","smaf-":{audio:"saf",phrase:"spf"},"openscoreformat.osfpvg+xml":"osfpvg"},zul:["zir","zirz"],"3gpp2.tcap":"tcap","accpac.simply.":{aso:"aso",imp:"imp"},"ahead.space":"ahead","airzip.filesecure.":{azf:"azf",azs:"azs"},"amazon.ebook":"azw","americandynamics.acc":"acc","amiga.ami":"ami","anser-web-":{"certificate-issue-initiation":"cii","funds-transfer-initiation":"fti"},"aristanetworks.swi":"swi","blueice.multipass":"mpm","cloanto.rp9":"rp9","clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"cluetrust.cartomobile-":{config:"c11amc","config-pkg":"c11amz"},"contact.cmsg":"cdbcmsg","criticaltools.wbs+xml":"wbs","ctc-posml":"pml","cups-ppd":"ppd","dolby.mlp":"mlp","ds-keypoint":"kpxx","ecowin.chart":"mag","fluxtime.clip":"ftc","fsc.weblaunch":"fsc","genomatix.tuxedo":"txd","geometry-explorer":["gex","gre"],"google-earth.":{"kml+xml":"kml",kmz:"kmz"},"handheld-entertainment+xml":"zmm","insors.igm":"igm","intercon.formnet":["xpw","xpx"],"ipunplugged.rcprofile":"rcprofile","irepository.package+xml":"irp","is-xpr":"xpr","isac.fcs":"fcs","kodak-descriptor":"sse","las.las+xml":"lasxml","macports.portpkg":"portpkg","mediastation.cdkey":"cdkey","mozilla.xul+xml":"xul","muvee.style":"msty","neurolanguage.nlu":"nlu","oasis.opendocument.":{chart:"odc",database:"odb",formula:"odf",graphics:"odg",image:"odi",presentation:"odp",spreadsheet:"ods",text:"odt","text-":{master:"odm",template:"ott",web:"oth"},"chart-template":"otc","formula-template":"odft","graphics-template":"otg","image-template":"oti","presentation-template":"otp","spreadsheet-template":"ots"},"olpc-sugar":"xo","oma.dd2+xml":"dd2","openofficeorg.extension":"oxt","openxmlformats-officedocument.":{"presentationml.":{presentation:"pptx",slide:"sldx",slideshow:"ppsx",template:"potx"},"spreadsheetml.":{sheet:"xlsx",template:"xltx"},"wordprocessingml.":{document:"docx",template:"dotx"}},"pmi.widget":"wg","previewsystems.box":"box","proteus.magazine":"mgz","pvi.ptid1":"ptid","quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"realvnc.bed":"bed","rig.cryptonote":"cryptonote","rim.cod":"cod","route66.link66+xml":"link66","sailingtracker.track":"st","shana.informed.":{formdata:"ifm",formtemplate:"itp",interchange:"iif","package":"ipk"},"simtech-mindmapper":["twd","twds"],"smart.teacher":"teacher","solent.sdkm+xml":["sdkm","sdkd"],"sun.xml.":{calc:"sxc",draw:"sxd",impress:"sxi",math:"sxm",writer:"sxw","writer.":{global:"sxg",template:"stw"},"calc.template":"stc","draw.template":"std","impress.template":"sti"},"sus-calendar":["sus","susp"],"symbian.install":["sis","sisx"],"tcpdump.pcap":["pcap","cap","dmp"],"tmobile-livetv":"tmo","trid.tpt":"tpt","triscape.mxs":"mxs","uiq.theme":"utz","wolfram.player":"nbp","wt.stf":"stf","zzazz.deck+xml":"zaz","3gpp.pic-bw-":{large:"plb",small:"psb","var":"pvb"},"3m.post-it-notes":"pwn","android.package-archive":"apk","antix.game-component":"atx","astraea-software.iota":"iota","chipnuts.karaoke-mmd":"mmd","data-vision.rdz":"rdz","denovo.fcselayout-link":"fe_launch","hhe.lesson-player":"les","hydrostatix.sof-data":"sfd-hdstx","jcp.javame.midlet-rms":"rms","joost.joda-archive":"joda","llamagraphics.life-balance.":{desktop:"lbd","exchange+xml":"lbe"},"osgeo.mapguide.package":"mgp","publishare-delta-tree":"qps","tao.intent-module-archive":"tao","yellowriver-custom-menu":"cmp"},"voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-":{abiword:"abw","authorware-":{bin:["aab","x32","u32","vox"],map:"aam",seg:"aas"},bcpio:"bcpio",bittorrent:"torrent",blorb:["blb","blorb"],bzip:"bz",bzip2:["bz2","boz"],cbr:["cbr","cba","cbt","cbz","cb7"],cdlink:"vcd",chat:"chat",conference:"nsc",cpio:"cpio",csh:"csh",director:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],doom:"wad","dtbncx+xml":"ncx","dtbook+xml":"dtb","dtbresource+xml":"res",dvi:"dvi",envoy:"evy",eva:"eva","font-":{bdf:"bdf",ghostscript:"gsf",otf:"otf",pcf:"pcf",snf:"snf",ttf:["ttf","ttc"],type1:["pfa","pfb","pfm","afm"],"linux-psf":"psf"},freearc:"arc",futuresplash:"spl",glulx:"ulx",gnumeric:"gnumeric",gtar:"gtar",hdf:"hdf",latex:"latex",mie:"mie","ms-":{application:"application",shortcut:"lnk",wmd:"wmd",wmz:"wmz",xbap:"xbap"},msaccess:"mdb",msbinder:"obd",mscardfile:"crd",msclip:"clp",msdownload:["exe","dll","com","bat","msi"],msmediaview:["mvb","m13","m14"],msmetafile:["wmf","wmz","emf","emz"],msmoney:"mny",mspublisher:"pub",msschedule:"scd",msterminal:"trm",mswrite:"wri",netcdf:["nc","cdf"],nzb:"nzb",pkcs12:["p12","pfx"],"pkcs7-":{certificates:["p7b","spc"],certreqresp:"p7r"},sh:"sh",shar:"shar",sql:"sql",stuffit:"sit",stuffitx:"sitx",subrip:"srt",sv4cpio:"sv4cpio",sv4crc:"sv4crc",tads:"gam",tar:"tar",tcl:"tcl",tex:"tex",texinfo:["texinfo","texi"],tgif:"obj",ustar:"ustar",xfig:"fig","xliff+xml":"xlf",xpinstall:"xpi",xz:"xz",zmachine:["z1","z2","z3","z4","z5","z6","z7","z8"],"7z-compressed":"7z","ace-compressed":"ace","apple-diskimage":"dmg","cfs-compressed":"cfs","chess-pgn":"pgn","debian-package":["deb","udeb"],"dgc-compressed":"dgc","gca-compressed":"gca","gramps-xml":"gramps","install-instructions":"install","iso9660-image":"iso","lzh-compressed":["lzh","lha"],"mobipocket-ebook":["prc","mobi"],"rar-compressed":"rar","shockwave-flash":"swf","silverlight-app":"xap","t3vm-image":"t3","tex-tfm":"tfm","wais-source":"src","java-jnlp-file":"jnlp","research-info-systems":"ris","x509-ca-cert":["der","crt"]},"xaml+xml":"xaml","xenc+xml":"xenc","xhtml+xml":["xhtml","xht"],xml:["xml","xsl"],"xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xspf+xml":"xspf","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",zip:"zip","andrew-inset":"ez","cu-seeme":"cu","octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"],"oebps-package+xml":"opf","pics-rules":"prf","prs.cww":"cww","rls-services+xml":"rs","timestamped-data":"tsd","xcap-diff+xml":"xdf","xml-dtd":"dtd","patch-ops-error+xml":"xer","relax-ng-compact-syntax":"rnc"},"audio/":{adpcm:"adp",basic:["au","snd"],midi:["mid","midi","kar","rmi"],mp4:["m4a","mp4a"],mpeg:["mpga","mp2","mp2a","mp3","m2a","m3a"],ogg:["oga","ogg","spx"],s3m:"s3m",silk:"sil","vnd.":{dra:"dra",dts:"dts","nuera.":{ecelp4800:"ecelp4800",ecelp7470:"ecelp7470",ecelp9600:"ecelp9600"},rip:"rip","dece.audio":["uva","uvva"],"digital-winds":"eol","dts.hd":"dtshd","lucent.voice":"lvp","ms-playready.media.pya":"pya"},webm:"weba","x-":{aac:"aac",aiff:["aif","aiff","aifc"],caf:"caf",flac:"flac",matroska:"mka",mpegurl:"m3u","ms-":{wax:"wax",wma:"wma"},"pn-":{realaudio:["ram","ra"],"realaudio-plugin":"rmp"},wav:"wav"},xm:"xm"},"image/":{bmp:"bmp",cgm:"cgm",g3fax:"g3",gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],ktx:"ktx",png:"png",sgi:"sgi","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.":{djvu:["djvu","djv"],dwg:"dwg",dxf:"dxf",fastbidsheet:"fbs",fpx:"fpx",fst:"fst","ms-":{modi:"mdi",photo:"wdp"},xiff:"xif","adobe.photoshop":"psd","dece.graphic":["uvi","uvvi","uvg","uvvg"],"dvb.subtitle":"sub","fujixerox.edmics-":{mmr:"mmr",rlc:"rlc"},"net-fpx":"npx","wap.wbmp":"wbmp"},webp:"webp","x-":{"3ds":"3ds",cmx:"cmx",freehand:["fh","fhc","fh4","fh5","fh7"],icon:"ico",pcx:"pcx",pict:["pic","pct"],"portable-":{anymap:"pnm",bitmap:"pbm",graymap:"pgm",pixmap:"ppm"},rgb:"rgb",tga:"tga",xbitmap:"xbm",xpixmap:"xpm",xwindowdump:"xwd","cmu-raster":"ras","mrsid-image":"sid"},"prs.btif":"btif"},"model/":{iges:["igs","iges"],mesh:["msh","mesh","silo"],"vnd.":{"collada+xml":"dae",dwf:"dwf",gdl:"gdl",gtw:"gtw",mts:"mts",vtu:"vtu"},vrml:["wrl","vrml"],"x3d+binary":["x3db","x3dbz"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"]},"text/":{calendar:["ics","ifb"],css:"css",csv:"csv",html:["html","htm"],n3:"n3",plain:["txt","text","conf","def","list","log","in"],richtext:"rtx",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl",vcard:"vcard","vnd.":{curl:"curl","curl.":{dcurl:"dcurl",mcurl:"mcurl",scurl:"scurl"},fly:"fly",graphviz:"gv","in3d.":{"3dml":"3dml",spot:"spot"},"wap.":{wml:"wml",wmlscript:"wmls"},"dvb.subtitle":"sub","fmi.flexstor":"flx","sun.j2me.app-descriptor":"jad"},"x-":{asm:["s","asm"],c:["c","cc","cxx","cpp","h","hh","dic"],fortran:["f","for","f77","f90"],nfo:"nfo",opml:"opml",pascal:["p","pas"],setext:"etx",sfv:"sfv",uuencode:"uu",vcalendar:"vcs",vcard:"vcf","java-source":"java"},"cache-manifest":"appcache","uri-list":["uri","uris","urls"],"prs.lines.tag":"dsc","tab-separated-values":"tsv"},"video/":{"3gpp":"3gp","3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],mp4:["mp4","mp4v","mpg4"],mpeg:["mpeg","mpg","mpe","m1v","m2v"],ogg:"ogv",quicktime:["qt","mov"],"vnd.":{"dece.":{hd:["uvh","uvvh"],mobile:["uvm","uvvm"],pd:["uvp","uvvp"],sd:["uvs","uvvs"],video:["uvv","uvvv"]},fvt:"fvt",mpegurl:["mxu","m4u"],vivo:"viv","dvb.file":"dvb","uvvu.mp4":["uvu","uvvu"],"ms-playready.media.pyv":"pyv"},webm:"webm","x-":{f4v:"f4v",fli:"fli",flv:"flv",m4v:"m4v",matroska:["mkv","mk3d","mks"],mng:"mng","ms-":{asf:["asf","asx"],vob:"vob",wm:"wm",wmv:"wmv",wmx:"wmx",wvx:"wvx"},msvideo:"avi",smv:"smv","sgi-movie":"movie"}},"chemical/x-":{cdx:"cdx",cif:"cif",cmdf:"cmdf",cml:"cml",csml:"csml",xyz:"xyz"},"message/rfc822":["eml","mime"],"x-conference/x-cooltalk":"ice"};f["default"]=a}),66);
__d("WAWebMimeTypesBuildExtToMime",["WATypeUtils","WAWebMimeToExt"],(function(a,b,c,d,e,f,g){function h(a,b,c,e){a=a;if(Array.isArray(a)||d("WATypeUtils").isString(a)){d("WATypeUtils").isString(a)&&(a=[a]);for(var f=0;f<a.length;f++){var g=a[f];if(!d("WATypeUtils").isString(g))continue;b[g]=e+c}return}if(typeof a==="object")for(g in a)h(a[g],b,g,e+c)}function a(a){try{a=a!=null&&a!==""?JSON.parse(a):c("WAWebMimeToExt");var b={};h(a,b,"","");return b}catch(a){return null}}g["default"]=a}),98);
__d("WAWebMimeTypes",["WATypedArraysEqual","WAWebMimeTypesBuildExtToMime","WAWebMiscErrors","file-type","lodash"],(function(a,b,c,d,e,f,g){var h=262,i=new Uint8Array([208,207,17,224,161,177,26,225]),j="application/x-cfb";function a(a){return c("WATypedArraysEqual")(a,i)}var k={"text/plain":{ext:"TXT",msgType:"document",icon:"icon-doc-txt",canSend:!0},"text/rtf":{ext:"RTF",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/rtf"},"text/vcard":{ext:"VCF",msgType:"vcard"},"application/zip":{ext:"ZIP",icon:"icon-doc-generic",msgType:"document"},"application/pdf":{ext:"PDF",msgType:"document",icon:"icon-doc-pdf",canSend:!0,signatureMimetype:"application/pdf",previewType:"pdf"},"application/msword":{ext:"DOC",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-excel":{ext:"XLS",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-powerpoint":{ext:"PPT",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{ext:"DOCX",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{ext:"PPTX",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{ext:"XLSX",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"audio/aac":{msgType:"audio",ext:"AAC"},"audio/mp4":{msgType:"audio"},"audio/amr":{msgType:"audio"},"audio/mpeg":{msgType:"audio"},"audio/ogg; codecs=opus":{msgType:"audio",ext:"OGG"},"audio/wav":{msgType:"audio",ext:"wav"},"video/mp4":{msgType:"video",ext:"MP4"},"video/3gpp":{msgType:"video"},"image/jpeg":{msgType:"image"},"image/png":{msgType:"image"}},l=k,m=c("lodash").pickBy(l,function(a){return(a==null?void 0:a.msgType)==="document"}),n="*",o="image/*",p="video/mp4,video/3gpp,video/quicktime",q="audio/wav,audio/mp3,audio/ogg,audio/aac,audio/mpeg",r=c("WAWebMimeTypesBuildExtToMime")(),s=c("lodash").pickBy(k,function(a){return(a==null?void 0:a.msgType)==="document"&&a.canSend===!0&&a.ext!=null});function b(a,b,c){c===void 0&&(c=!1);for(var d in s){var e=k[d];if(e==null)continue;var f=e.signatureMimetype;e=e.ext;f=c?f:d;if(f===a&&e!=null&&(b==null?void 0:b.toLowerCase().endsWith(e.toLowerCase())))return d}return c?a:(f=a)!=null?f:"application/octet-stream"}function e(a){var b=k[a];return!b?"":"."+((b=b.ext)!=null?b:a.split("/")[1]).toLowerCase()}function f(a){a=k[a];return a==null?void 0:a.previewType}function t(a,b){b=b.subarray(0,h);b=c("file-type")(b);if(b)return b.mime;else if(a==="image")return"image/jpeg";throw new(d("WAWebMiscErrors").MediaEncryptionError)("unknown mime decrypt error for type:"+a)}var u="audio/ogg";function v(a){return a==null?!1:a.includes(u)}g.MIMETYPE_DETERMINING_LENGTH=h;g.MSCFB_HEADER=i;g.MSCFB_MIME=j;g.isMsCompoundFileBinaryFormat=a;g.MIMETYPES=l;g.DOCUMENT_MIMETYPES=m;g.DOC_MIMES=n;g.IMAGE_MIMES=o;g.VIDEO_MIMES=p;g.AUDIO_MIMES=q;g.EXT_TO_MIME=r;g.isAllowedDocumentMimetype=b;g.getExtension=e;g.previewType=f;g.getMediaMimeType=t;g.isOpus=v}),98);
__d("WAWebNewsletterIsNewsletterMsg",["WAWebWid"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.from;a=a.to;return c("WAWebWid").isNewsletter(b)||c("WAWebWid").isNewsletter(a)}g["default"]=a}),98);
__d("WATypedArraysCast",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b instanceof a)return b;return typeof b==="string"?new a(d("WABase64").decodeB64(b)):new a(b)}g.castTypedArrays=a}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j={name:"HMAC",hash:"SHA-256"},k={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function m(a,b){b=d("WATypedArraysCast").castTypedArrays(Uint8Array,b);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",b,a,!1,["sign"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var e=a.key;a=a.algo;return d("WACryptoDependencies").getCrypto().subtle.sign(a,e,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f}),98);
__d("WAWebDataUrlToBlob",["WAErr"],(function(a,b,c,d,e,f,g){var h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function a(a){var b=a.match(h);if(!b)throw c("WAErr")("invalid data URI");var d=b[2]?b[1]:"text/plain"+(b[3]||";charset=US-ASCII"),e=!!b[4];a=a.slice(b[0].length);e?b=atob(a):b=decodeURIComponent(a);e=new ArrayBuffer(b.length);a=new Uint8Array(e);for(e=0;e<b.length;e+=1)a[e]=b.charCodeAt(e);return new Blob([a],{type:d})}g.dataURLtoBlob=a}),98);
__d("WAWebFileUtils",["Promise","WAWebMimeTypes","WAWebMiscErrors","WAWebMsgType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({IMAGE:"image",VIDEO:"video",AUDIO:"audio",DOCUMENT:"document",STICKER:"sticker"}),j="NotReadableError",k=function(a){return(a=a==null?void 0:a.message)!=null?a:""};function l(a){var e;return new(h||(h=b("Promise")))(function(b,f){e=new FileReader(),e.onload=b,e.onerror=function(){var a;f(((a=e.error)==null?void 0:a.name)===j?new(d("WAWebMiscErrors").FileNotReadableError)("blobToArrayBuffer error: "+k(e.error)):c("err")("blobToArrayBuffer error: "+k(e.error)))},e.onabort=function(){f(c("err")("blobToArrayBuffer abort: "+k(e.error)))},e.readAsArrayBuffer(a)}).then(function(){return e.result})}function a(a){a=a.webkitSlice?a.webkitSlice(0,1):a.slice(0,1);return l(a).then(function(a){return a.byteLength===1})["catch"](function(){return!1})}function e(a){var d,e;return new(h||(h=b("Promise")))(function(b,f){d=document.createElement("audio"),d.addEventListener("loadeddata",b),d.addEventListener("error",function(){f(c("err")("getAudioDuration: error loading audio"))}),d.src=e=URL.createObjectURL(a)}).then(function(){return~~d.seekable.end(0)})["finally"](function(){e&&URL.revokeObjectURL(e)})}function f(a){a=a.split("/")[0];switch(a){case i.IMAGE:case i.VIDEO:case i.AUDIO:return a;default:return i.DOCUMENT}}function m(a){var b=o(a);b=d("WAWebMimeTypes").isAllowedDocumentMimetype(d("WAWebMimeTypes").EXT_TO_MIME&&b&&d("WAWebMimeTypes").EXT_TO_MIME[b],a,!1);if(b)return b}function n(a){return a.replace(/\.+$/,"")}function o(a){a=n(a.trimRight());a=a.split(".");return a.length>1?a[a.length-1].toLowerCase():null}function p(a,b,c){c=c||{};a=new Blob(a,c);c=a;c.name=b;return c}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(typeof a.text==="function")return a.text();var d=new FileReader();yield new(h||(h=b("Promise")))(function(b,e){d.onload=b,d.onerror=function(a){e(c("err")("blobToText error: "+String(a)))},d.onabort=function(a){e(c("err")("blobToText abort: "+String(a)))},d.readAsText(a)});if(d.result instanceof ArrayBuffer)throw new TypeError("blobToText error: Invalid result type: ArrayBuffer");if(d.result==null)throw new TypeError("blobToText: Invalid result type: null");return d.result});return r.apply(this,arguments)}function s(a){return a.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT}g.FILETYPE=i;g.blobToArrayBuffer=l;g.validateBlob=a;g.getAudioDuration=e;g.typeFromMimetype=f;g.getMimeTypeForFilepath=m;g.removeTrailingDots=n;g.getFileExtension=o;g.createFile=p;g.blobToText=q;g.isDocument=s}),98);
__d("WAWebPonyfillsUrlSearchParams",["url-search-params-polyfill"],(function(a,b,c,d,e,f){b("url-search-params-polyfill");a=URLSearchParams;f["default"]=a}),66);
__d("WAWebURLUtils",["WABase64","WABinary","WACryptoHmac","WALogger","WATypeUtils","WAWebDataUrlToBlob","WAWebFileUtils","WAWebPonyfillsUrlSearchParams","WAWebRuntimeEnvironmentUtils","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebURLUtils: should not call canMuckHistory() from worker runtimes"]);h=function(){return a};return a}var i=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,j="https://l.wl.co/l";a={URL_REGEX:i,build:function(a,b){var d=new(c("WAWebPonyfillsUrlSearchParams"))();c("lodash").forOwn(b||{},function(a,b){d.set(b,a)});return a+"?"+d.toString()},canMuckHistory:function(){var a;if(d("WAWebRuntimeEnvironmentUtils").isWorker()){d("WALogger").ERROR(h());return!1}return((a=window.history)==null?void 0:a.pushState)&&self.location?!0:!1},relToAbs:function(a){a=new URL(a,self.location.href);return a.href},hostname:c("lodash").memoize(function(a){try{a=new URL(this.isHttp(a)?a:"http://"+a);return a.hostname}catch(a){return""}}),withoutWww:function(a){return a.split("www.").join("")},isHttp:function(a){return a&&(a.toLowerCase().substring(0,8)==="https://"||a.toLowerCase().substring(0,7)==="http://")},isHttps:function(a){return a&&a.toLowerCase().substring(0,8)==="https://"},hasValidUrlScheme:function(a){var b=a.trim().toLowerCase();a=["irc://","ftp://","mailto:","http://","https://","whatsapp://","ms-windows-store://"];return a.some(function(a){return b.indexOf(a)===0})},isBlob:function(a){return d("WATypeUtils").isString(a)&&a.substring(0,5)==="blob:"},isData:function(a){return d("WATypeUtils").isString(a)&&a.substring(0,5)==="data:"},parseDataURL:function(a){var b=a.indexOf(":"),c=a.indexOf(";"),d=a.indexOf(",");return{mimetype:a.substring(b+1,c),data:a.substring(d+1)}},dataURLtoFile:function(a){var b=this.parseDataURL(a).mimetype;return d("WAWebFileUtils").createFile([d("WAWebDataUrlToBlob").dataURLtoBlob(a)],"",{type:b})},GSM_NAME:"gme-whatsappinc",GSM_NUMS:"LM4NgcjF-X_EedaZ6MwPVSH0Sac=",gsmURL:function(a,b){b=b.replace(/\-/g,"+").replace(/_/g,"/");b=d("WABase64").decodeB64(b);var c=new URL(a);c=(c.pathname||"")+(c.search||"");c=d("WABinary").Binary.build(c).readByteArray();return d("WACryptoHmac").hmacSha1(b,c).then(function(b){return a+"&signature="+d("WABase64").encodeB64UrlSafe(b)})},thumbToCSSURL:function(a){a=this.isHttp(a)?a:a.startsWith("data:")?a:"data:image/jpeg;base64,"+a;return'url("'+a+'")'},thumbAsBackgroundImage:function(a){return!a?{}:{backgroundImage:this.thumbToCSSURL(a)}},isValid:function(a){return i.test(a)},toMaliciousSiteRedirect:function(a){return a===""||a.indexOf(j)===0?a:j+"?u="+encodeURIComponent(a)}};b=a;g["default"]=b}),98);
__d("WAWebVcardParsingUtils",["WALogger","WATypeUtils","WAWeb-moment","WAWebURLUtils","WAWebWidFactory","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["vcard:parse failed because the vCard is not formatted as expected:\n                Header as expected? ","\n                Version as expected? ","\n                Footer as expected? ","\n                Lines: ",""]);h=function(){return a};return a}var i="wa-biz-name",j=/X-([^;:]+)(?:;[^:]+)*:(.+)/,k={"X-ABLabel":[/X-ABLabel(?:;([^:]+))*:(.+)/,1],ADR:[/ADR(?:;([^:]+))*:;;(.*);(.*);(.*);(.*);(.*)/,5],"X-ABADR":[/X-ABADR(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.*)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1],TEL:[/TEL(?:;([^:]+))*:(.+)/,1]},l={N:[/N(?:;([^:]+))*:([^;]*);([^;]*);([^;]*);([^;]*);(.*)/,5],FN:[/FN(?:;([^:]+))*:(.*)/,1],NICKNAME:[/NICKNAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-FIRST-NAME":[/X-PHONETIC-FIRST-NAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-LAST-NAME":[/X-PHONETIC-LAST-NAME(?:;([^:]+))*:(.*)/,1],ORG:[/ORG(?:;([^:]+))*:([^;]*)(?:;(.*))*/,2],TITLE:[/TITLE(?:;([^:]+))*:(.*)/,1],TEL:[/TEL(?:;([^:]+))*:(.*)/,1],PHOTO:[/PHOTO(?:;([^:]+))*:(.*)/,1],BDAY:[/BDAY(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.+)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1]},m=function(a,b,c,d){this.type=a,this.index=b,this.properties=c||{},this.value=d};function n(a,b,c){a[b]||(a[b]=[]),a[b].push(c)}function o(a){var b={};if(!a)return b;a.split(";").forEach(function(a){a=a.split(/=/);if(a.length===1){var c=a[0];n(b,c.toLowerCase(),!0)}else if(a.length===2){c=a[0];a=a[1];n(b,c.toLowerCase(),a.toLowerCase())}});return b}function a(a){if(!a)return;return a.replace(/^_\$!<([^>]*)>!\$_$/,"$1").replace(/\\,/,",").replace(/\\;/,";").replace(/\\\\/,"\\")}function p(a){var b={};c("lodash").forOwn(a,function(a,d){b[d]=c("lodash").sortBy(a,function(a){return a.index})});return b}function b(a){var b=[/-([^-]*)-([^-]*)-([^-]*)/,/([^-]*)-([^-]*)-([^-]*)/],d=a;c("lodash").forEach(b,function(b){b=a.match(b);if(b){var e=!b[1].length||b[1]==="1604",f=e?"0000":b[1];d=c("WAWeb-moment")(f+"-"+b[2]+"-"+b[3]).format("l");e&&(d=d.replace(/[.,-\/\s]*0000[.,-\/\s]*/,""));return!1}});return d}function e(a){var b=[];if(a==null?void 0:a.TEL)a.TEL.forEach(function(a){var c;((c=(c=a.properties)==null?void 0:(c=c.waid)==null?void 0:c.length)!=null?c:0)>0&&(b=b.concat(a.properties.waid.map(function(a){return d("WAWebWidFactory").createUserWid(a)})))});else{a=((a==null?void 0:a.SERVICE)||[]).find(function(a){return a.type.toLowerCase()==="wa-lid"});(a==null?void 0:a.value)&&(b=b.concat(d("WAWebWidFactory").createUserWid(a.value,"lid")))}return b}function q(a){a=a==null?void 0:a.replace(/\r?\n|\r/g,"\n").replace(/\n^[ \t]/gm,"").split("\n").filter(function(a){return a.trim().length!==0});var b={},c={};if(a==null||a.length<3)return void 0;var e=a[0].trim().toUpperCase(),f=a[1].trim().toUpperCase(),g=a[a.length-1].trim().toUpperCase();f=f==="VERSION:2.1"||f==="VERSION:3.0"||f==="VERSION:4.0";if(e!=="BEGIN:VCARD"||!f||g!=="END:VCARD"){d("WALogger").ERROR(h(),String(e==="BEGIN:VCARD"),String(f),String(g==="END:VCARD"),a.length).sendLogs("vcard-fault");return void 0}for(e=2;e<a.length-1;e++){var i;f=a[e];g=f.match(/item(\d+)\.(.*)/);f=g?g[2]:f;i=(i=f.match(/([^:;]*)[:;].*/))==null?void 0:i[1];if(i==null)continue;var q=g?k:l,r=i;i=i;var s=void 0,t=void 0;if(q[r]){q=q[r];var u=q[0];q=q[1];u=f.match(u);u&&(s=o(u[1]),t=q===1?t=u[2]:u.slice(2,2+q))}else{u=f.match(j);u&&(i="SERVICE",r=u[1],t=u[2],s={})}q=Array.isArray(t)?t:[t];if(q.some(function(a){return a&&d("WATypeUtils").isString(a)&&a.trim()}))if(g){f=g[1];c[f]?c[f].fields.push(new m(r,null,s,t)):c[f]={type:r,index:e,key:i,properties:s,value:t,fields:[]}}else n(b,i,new m(r,e,s,t))}Object.keys(c).forEach(function(f){f=c[f];var g=f.key,h=f.index,a=f.type,e=f.value,d=f.properties;f=f.fields;f.forEach(function(a){d[a.type]=a.value});n(b,g,new m(a,h,d,e))});return p(b)}function f(a){if(!a)return void 0;a=a.PHOTO;if((a==null?void 0:a[0])&&c("WAWebURLUtils").isData(a[0].value))return a[0].value}function r(a){a=a.match(/BEGIN:VCARD([\0-\uFFFF]*?)END:VCARD/g);return a?a.map(function(a){return q(a)}).filter(Boolean):[]}function s(a){return(a.SERVICE||[]).some(function(a){return a.type.toLowerCase()===i&&a.value})}g.WA_BIZ_NAME=i;g.Field=m;g.clean=a;g.vcardGetDate=b;g.vcardWids=e;g.parseVcard=q;g.vcardThumbnail=f;g.parseMultiVcard=r;g.vcardIsBiz=s}),98);
__d("WAWebWamEnumEditType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_EDITED:0,EDITED:1,SENDER_REVOKE:2,ADMIN_REVOKE:3,ADMIN_EDIT:4,PIN:5});f.EDIT_TYPE=a}),66);
__d("WAWebMsgGetters",["WABase64","WALogger","WAPhoneFindCC","WATimeUtils","WATypeUtils","WAWebAck","WAWebBizSystemMsgSubtypes","WAWebBotTypes","WAWebBusinessHSMTypes","WAWebCommonMsgUtils","WAWebConstantsDeprecated","WAWebEphemeralConstants","WAWebEphemeralityWAMUtils","WAWebGetters","WAWebGettersCaches","WAWebInteractiveMessageHeaderMediaType","WAWebMimeTypes","WAWebMsgType","WAWebNewsletterIsNewsletterMsg","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","WAWebVcardParsingUtils","WAWebViewModeUtils","WAWebWamEnumEditType","WAWebWid","WAWebWidFactory","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Msg: could not derive isInternational as some data is missing"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected non-wid for originalSelfAuthorOrSender; value=","; typeof=","; msg.type=",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected non-wid for originalSelfAuthorOrSender; typeof=","; msg.type=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["msg sender is null"]);k=function(){return a};return a}a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createMessagesCache});b=a.field;e=a.computed;f=a.unsafeIdentityGetter;a=a.clearCacheFor;a=a;f=f;function l(a){if(a instanceof c("WAWebWid"))return a;return a.user!=null?d("WAWebWidFactory").createUserWid(a.user,a.server):a}var m=b("type"),n=b("subtype"),o=b("id"),p=b("to"),q=b("from"),r=b("broadcastId"),aa=e(function(a){var b=a[0];a=a[1];return a!=null?a:b.remote},[o,r]),s=b("viewMode"),t=b("author"),u=b("ack"),ba=b("viewCount"),ca=b("viewed"),v=b("originalSelfAuthor"),w=b("kicState"),da=b("kicTimestampMs"),x=b("list"),y=b("latestEditMsgKey"),ea=b("errorCode"),z=b("ephemeralDuration"),fa=b("ephemeralSettingUser"),A=b("t",{"default":0}),B=b("backgroundColor"),ga=b("headerType"),C=b("interactiveHeader"),ha=b("interactiveType"),ia=b("footer"),D=b("mentionedJidList"),ja=b("groupMentions",{getDefault:function(){return[]}}),E=b("quotedMsg"),ka=b("quotedRemoteJid"),F=b("quotedParticipant"),G=b("rcat"),H=b("isViewOnce",{"default":!1}),la=b("isGif",{"default":!1}),ma=b("gifAttribution",{"default":d("WAWebProtobufsE2E.pb").Message$VideoMessage$Attribution.NONE}),na=b("ctwaContext"),I=b("mimetype"),oa=b("filehash"),pa=b("deprecatedMms3Url"),qa=b("waveform"),J=b("disappearingModeInitiator"),K=b("disappearingModeTrigger"),L=b("disappearingModeInitiatedByMe"),ra=b("activeBotMsgStreamingInProgress"),M=b("bizBotType"),N=b("botTargetSenderJid"),O=b("forwardedNewsletterMessageInfo"),sa=b("newsletterAdminInviteInfo"),ta=b("bizSource");function ua(a){return a==="smb_promo"}var va=e(function(a){a=a[0];return ua(a)},[ta]),wa=e(function(a){a=a[0];return a!=null},[E]),xa=e(function(a){a=a[0];return d("WAWebMimeTypes").isOpus(a)},[I]),ya=e(function(a){a=a[0];return a==null?null:d("WABase64").encodeB64UrlSafe(a,!0)},[G]),za=e(function(a){a=a[0];return a==null?!1:a.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(l(a))})},[D]),Aa=b("local",{"default":!1}),P=e(function(a){var b=a[0];a=a[1];return b&&a?d("WAWebUserPrefsMeUser").isMeAccount(l(a)):!1},[E,F]);P=e(function(a){var b=a[0];a=a[1];return b||a},[za,P]);var Ba=b("botPluginReferenceIndex"),Ca=e(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];if(c!=null)return!1;if(!d("WAWebViewModeUtils").isViewModeVisibleInSurface(d("WAWebViewModeUtils").ViewModeSurface.CHAT,a))return!1;switch(b){case"interactive":return e;case"chat":case"image":case"video":case"ptv":case"audio":case"ptt":case"document":case"vcard":case"location":case"ciphertext":case"oversized":case"multi_vcard":case"sticker":case"status":case"product":case"groups_v4_invite":case"poll_creation":case"list":case"newsletter_admin_invite":case"event_creation":case"sticker_pack":case"album":return!0;case"revoked":case"protocol":case"order":case"biz-cover-photo":case"broadcast_notification":case"buttons_response":case"call_log":case"debug":case"debug_placeholder":case"e2e_notification":case"gp2":case"hsm":case"interactive_response":case"keep_in_chat":case"list_response":case"native_flow":case"notification":case"notification_template":case"payment":case"poll_update":case"reaction":case"reaction_enc":case"request_phone_number":case"template_button_reply":case"pin_message":case"pinned_message":case"newsletter_notification":case"comment":case"event_response":case"history_bundle":case"biz_content_placeholder":case"event_edit_encrypted":case"unknown":return!1;default:b;return!1}},[m,Ba,va,s]),Q=e(function(a){var b=a[0];a=a[1];return c("WAWebWid").isGroup(b)||c("WAWebWid").isGroup(a)},[q,p]),R=e(function(a){var b=a[0];a=a[1];return c("WAWebNewsletterIsNewsletterMsg")({from:b,to:a})},[q,p]),S=e(function(a){var b=a[0];a=a[1];return b||a!=null},[R,O]),T=e(function(a){a=a[0];return c("WAWebWid").isStatus(a.remote)},[o]),Da=e(function(a){var b=a[0];a=a[1];return d("WAWebCommonMsgUtils").isNotificationType(b,a)},[m,n]),U=e(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];var f=b;if(a)return b.fromMe;return f.self==="in"||e?!1:d("WAWebUserPrefsMeUser").isMeAccount(c)},[o,q,Da,R]),V=e(function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4];a=a[5];if(b)return f?d("WAWebUserPrefsMeUser").getMeUser():g;b=c||e||(a==null?void 0:a.isBot())?a:g;b==null&&d("WALogger").WARN(k());return b},[U,Q,T,R,q,t]),Ea=e(function(a){var b=a[0],e=a[1];a=a[2];b=b||e;b!=null&&b.isUser==null&&(c("gkx")("26258")?d("WALogger").ERROR(j(),typeof b,a).sendLogs("non-wid-originalselfauthororsender"):d("WALogger").ERROR(i(),String(b),typeof b,a).sendLogs("non-wid-originalselfauthororsender"));return b!=null&&(b.isUser==null?void 0:b.isUser())?d("WAWebWidFactory").toUserWid(b):null},[v,V,m]),Fa=e(function(a){a=a[0];return a===d("WAWebMsgType").MSG_TYPE.REACTION||a===d("WAWebMsgType").MSG_TYPE.REACTION_ENC},[m]),Ga=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&a==="poll_vote"},[m,n]),Ha=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.UNKNOWN||b===d("WAWebMsgType").MSG_TYPE.PAYMENT&&a==="futureproof"},[m,n]),Ia=e(function(a){a=a[0];return a===d("WAWebMsgType").MSG_TYPE.STICKER},[m]),Ja=b("isCarouselCard",{"default":!1}),Ka=e(function(a){var b=a[0];a=a[1];return!b&&!a},[H,Ia]),La=e(function(a){a=a[0];return a===d("WAWebEphemeralConstants").KeepInChatState.KEPT},[w]),Ma=e(function(a){a=a[0];return a===d("WAWebEphemeralConstants").KeepInChatState.UNKEPT},[w]),Na=e(function(a){a=a[0];return c("WAWebWid").isPSA(a.remote)},[o]),Oa=e(function(a){a=a[0];return c("WAWebWid").isIAS(a.remote)},[o]),Pa=e(function(a){a=a[0];return c("WAWebWid").isCAPISupportAccount(a.remote)},[o]),Qa=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.LIST&&(a==null?void 0:a.listType)===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST},[m,x]),Ra=b("title"),W=b("body",{"default":""}),Sa=b("caption"),Ta=b("comment"),Ua=b("pollName",{"default":""}),Va=b("pollOptions"),Wa=b("pollSelectableOptionsCount",{"default":0}),Xa=b("pollInvalidated",{"default":!1}),Ya=b("eventName",{"default":""}),Za=b("eventDescription"),$a=b("eventStartTime",{"default":0}),ab=b("eventEndTime"),bb=b("eventJoinLink"),cb=b("eventLocation"),db=b("isEventCanceled",{"default":!1}),eb=b("eventInvalidated",{"default":!1}),fb=b("replyCount",{"default":0}),gb=b("nativeFlowName"),hb=b("nativeFlowButtons"),ib=b("paymentCurrency",{"default":""}),jb=b("paymentAmount1000",{"default":0}),kb=b("paymentMessageReceiverJid"),lb=b("paymentStatus"),mb=b("paymentTxnStatus"),nb=b("paymentNoteMsg"),ob=b("paymentRequestMessageKey"),pb=b("paymentExpiryTimestamp"),qb=b("paymentInviteServiceType"),rb=b("paymentBackground"),sb=b("isFromTemplate",{"default":!1}),tb=b("isLive",{"default":!1}),X=b("isDynamicReplyButtonsMsg",{"default":!1}),ub=b("dynamicReplyButtons"),vb=e(function(a){var b=a[0],c=a[1];a=a[2];return b===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&c==="ephemeral_setting"?!1:a!=null&&a!==0},[m,n,z]),wb=e(function(a){a=a[0];return a!=null},[y]),xb=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a==="message_edit"},[m,n]),yb=e(function(a){var b=a[0];a=a[1];if(!b)return null;b="rgba(86, 150, 255, 255)";a=a;if(a==null||a===0)return b;b=a>>24&255;var c=a>>16&255,d=a>>8&255;a=a&255;return"rgba("+c+", "+d+", "+a+", "+b+")"},[T,B]),zb=e(function(a){a=a[0];switch(a){case"protocol":case"chat":case"location":case"vcard":case"multi_vcard":case"image":case"video":case"ptv":case"audio":case"ptt":case"document":case"sticker":case"status":case"product":case"groups_v4_invite":case"order":case"poll_creation":case"newsletter_admin_invite":case"comment":case"event_creation":case"sticker_pack":case"album":return!0;case"biz-cover-photo":case"broadcast_notification":case"buttons_response":case"call_log":case"ciphertext":case"debug_placeholder":case"debug":case"e2e_notification":case"gp2":case"newsletter_notification":case"hsm":case"interactive":case"interactive_response":case"keep_in_chat":case"list":case"list_response":case"native_flow":case"notification":case"notification_template":case"oversized":case"payment":case"poll_update":case"reaction":case"reaction_enc":case"request_phone_number":case"revoked":case"template_button_reply":case"pin_message":case"pinned_message":case"event_response":case"history_bundle":case"biz_content_placeholder":case"event_edit_encrypted":case"unknown":return!1;default:a;return!1}},[m]),Ab=e(function(a){var b=a[0],c=a[1];a=a[2];return b.fromMe&&c&&a},[o,Aa,zb]),Bb=b("revokeSender"),Cb=e(function(a){a=a[0];return a!=null&&d("WAWebUserPrefsMeUser").isMeAccount(a)},[Bb]),Db=e(function(a){var b=a[0],c=a[1];a=a[2];b=b.fromMe;b=b?c==null?void 0:c.toString({legacy:!0}):a==null?void 0:a.toString({legacy:!0});a=(c=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:c.toString({legacy:!0});if(b&&a)return d("WAPhoneFindCC").phoneCC(b)!==d("WAPhoneFindCC").phoneCC(a);d("WALogger").WARN(h());return!1},[o,p,q]),Eb=e(function(a){var b=a[0];a=a[1];if(b===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE){if(d("WAWebBizSystemMsgSubtypes").BIZ_SYSTEM_MSG_SUBTYPES.includes(a))return!0;if(d("WAWebBizSystemMsgSubtypes").BIZ_SYSTEM_MSG_SUBTYPES_V2.includes(a))return!0;switch(a){case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":case"biz_verified_transition_top_to_bottom":case"biz_verified_transition_bottom_to_top":case"biz_intro_top":case"biz_intro_bottom":case"biz_name_change":case"biz_move_to_consumer_app":case"biz_two_tier_migration_top":case"biz_two_tier_migration_bottom":return!0;default:return!1}}return!1},[m,n]),Fb=e(function(a){var b=a[0];a=a[1];switch(b){case"image":case"video":case"audio":return!0;case"interactive":return a==null?!1:a.mediaType===d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.IMAGE||a.mediaType===d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO;default:return!1}},[m,C]),Y=b("isForwarded",{"default":!1}),Gb=b("forwardingScore"),Hb=e(function(a){var b=a[0];a=a[1];return a==null?b?1:0:a||0},[Y,Gb]),Ib=e(function(a){a=a[0];return a>=c("WAWebConstantsDeprecated").FREQUENTLY_FORWARDED_SENTINEL},[Hb]),Jb=e(function(a){var b=a[0];a=a[1];return b.fromMe&&a!=null&&a.some(function(a){return a.isBot()})},[o,D]),Kb=e(function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b||c||a||!d},[Y,S,U,Jb]),Lb=b("invis",{"default":!1}),Mb=b("isNewMsg",{"default":!1}),Nb=b("isSendFailure",{"default":!1}),Ob=e(function(a){var b=a[0],c=a[1];a=a[2];return b&&c!=null&&c<d("WAWebAck").ACK.CLOCK||a},[U,u,Nb]),Pb=e(function(a){var b=a[0];a=a[1];if(b!==d("WAWebMsgType").MSG_TYPE.VCARD)return void 0;try{return d("WAWebVcardParsingUtils").parseVcard(a)}catch(a){return void 0}},[m,W]),Qb=b("description"),Rb=b("matchedText",{"default":""}),Sb=b("thumbnail"),Tb=b("thumbnailHQ"),Ub=b("richPreviewType",{"default":d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.NONE}),Vb=e(function(a){var b=a[0],e=a[1],f=a[2];a=a[3];return d("WATypeUtils").isString(a)&&(!c("lodash").isEmpty(e)||!c("lodash").isEmpty(f))&&b!=null&&b.includes(a)},[W,Ra,Qb,Rb]),Wb=e(function(a){var b=a[0];a=a[1];return b||a},[X,sb]),Xb=e(function(a){var b=a[0];a=a[1];return a||b===d("WAWebMsgType").MSG_TYPE.LIST||b===d("WAWebMsgType").MSG_TYPE.INTERACTIVE},[m,X]),Yb=768,Zb=e(function(a){var b=a[0];a=a[1];var c=308;return(a==null?void 0:a.isBot())?Infinity:b?c:Yb},[Ib,V]),$b=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION&&a==="encrypt"||d("WAWebBizSystemMsgSubtypes").BIZ_SYSTEM_MSG_SUBTYPES_V2_INIT.includes(a)},[m,n]),ac=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a==="disappearing_mode"},[m,n]),bc=b("kicKey"),cc=e(function(a){var b=a[0];a=a[1];if(b!=null)if(b.fromMe)return d("WAWebUserPrefsMeUser").getMaybeMeUser();else if(a&&b.participant!=null)return d("WAWebWidFactory").toUserWid(b.participant);else if(!a)return d("WAWebWidFactory").toUserWid(b.remote)},[bc,Q]),dc=e(function(a){var b=a[0],c=a[1];a=a[2];if(a==="ephemeral_setting")return null;return b==null||b===0?null:c+b},[z,A,n]),Z=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&(a==="sender_revoke"||a==="admin_revoke")},[m,n]),ec=b("revokeDuration"),fc=e(function(a){var b=a[0],c=a[1];a=a[2];return c?b==="admin_revoke"?d("WAWebWamEnumEditType").EDIT_TYPE.ADMIN_REVOKE:d("WAWebWamEnumEditType").EDIT_TYPE.SENDER_REVOKE:a?d("WAWebWamEnumEditType").EDIT_TYPE.EDITED:d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED},[n,Z,wb]),gc=e(function(a){a=a[0];if(a==null)return;return d("WAWebEphemeralityWAMUtils").getWamDisappearingModeTrigger(a)},[K]),hc=e(function(a){a=a[0];if(a==null)return;return d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiatedByMe(a)},[L]),ic=e(function(a){a=a[0];if(a==null)return;return d("WAWebEphemeralityWAMUtils").getWamDisappearingModeInitiator(a)},[J]),jc=b("inviteCode",{"default":""}),kc=b("inviteCodeExp",{"default":""}),lc=b("inviteGrp",{"default":""}),mc=b("inviteGrpName"),nc=b("inviteGrpJpegThum"),oc=b("inviteGrpType"),pc=e(function(a){var b=a[0],c=a[1];a=a[2];if(b!==d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE)return!1;if(!c)return!0;b=new Date().getTime()/1e3;return parseInt(b,10)>=parseInt(a,10)},[m,jc,kc]),qc=e(function(a){var b=a[0];a=a[1];if(b!==d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE)return!1;if(a==null)return!0;b=a.inviteExpiration;a=d("WATimeUtils").unixTime();return a>=b},[m,sa]),rc=b("productHeaderImageRejected",{"default":!1}),sc=e(function(a){var b=a[0];a=a[1];return b===!0?null:(b=a==null?void 0:(b=a.productListInfo)==null?void 0:(a=b.headerImage)==null?void 0:a.jpegThumbnail)!=null?b:null},[rc,x]),tc=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.PTT||b===d("WAWebMsgType").MSG_TYPE.PTV||a&&b===d("WAWebMsgType").MSG_TYPE.AUDIO},[m,S]),uc=b("hasReaction",{"default":!1}),vc=b("recipients",{getDefault:function(){return[]}}),wc=b("templateParams",{getDefault:function(){return[]}}),xc=b("clientUrl",{"default":""}),yc=b("loc",{"default":""}),zc=b("lat"),Ac=b("lng"),Bc=b("shareDuration"),Cc=b("finalLat"),Dc=b("finalLng"),Ec=b("star",{"default":!1}),Fc=b("currencyCode"),Gc=b("priceAmount1000"),Hc=b("salePriceAmount1000"),Ic=b("isVcardOverMmsDocument",{"default":!1}),Jc=b("interactiveAnnotations"),Kc=b("messageSecret"),Lc=b("broadcast",{"default":!1}),Mc=b("vcardList",{getDefault:function(){return[]}}),Nc=b("vcardFormattedName"),Oc=b("labels",{getDefault:function(){return[]}}),Pc=b("agentId"),Qc=b("url"),Rc=b("retailerId"),Sc=b("businessOwnerJid"),Tc=b("productId"),Uc=b("productImageCount"),Vc=b("isMdHistoryMsg",{"default":!1}),Wc=b("campaignId"),Xc=b("filename"),Yc=b("smbClientCampaignId"),Zc=b("isCaptionByUser",{"default":!1}),$c=b("doNotPlayInline"),ad=b("thumbnailDirectPath"),bd=b("thumbnailHeight"),cd=b("thumbnailWidth"),dd=b("orderTitle"),ed=b("itemCount"),fd=b("totalAmount1000"),gd=b("totalCurrencyCode"),hd=b("futureproofType"),id=b("futureproofSubtype"),jd=b("ephemeralOutOfSync"),kd=b("isAvatar"),ld=b("bizPrivacyStatus"),md=b("verifiedBizName"),nd=b("mediaKey"),od=b("message",{"default":""}),pd=b("size",{"default":0}),qd=b("hostedBizEncStateMismatch"),rd=e(function(a){a=a[0];return a==="bot_unavailable_fanout"},[n]),sd=e(function(a){var b=a[0];a=a[1];return b.remote.isBot()?b.fromMe:a!=null&&a.some(function(a){return a.isBot()})},[o,D]),td=e(function(a){var b=a[0];a=a[1];return!b.fromMe&&a===d("WAWebBotTypes").BizBotType.BIZ_1P},[o,M]),ud=e(function(a){var b=a[0];a=a[1];return!b.fromMe&&a===d("WAWebBotTypes").BizBotType.BIZ_3P},[o,M]),vd=b("botPluginSearchProvider"),wd=b("botPluginSearchUrl"),xd=b("botResponseTargetId"),yd=b("botPluginSearchQuery"),zd=b("botPluginType"),Ad=e(function(a){var b=a[0];a=a[1];return b!=null&&a!=null},[vd,wd]),$=e(function(a){a=a[0];return(a==null?void 0:a.isBot())===!0},[V]),Bd=e(function(a){var b=a[0];a=a[1];return Boolean(b&&d("WAWebUserPrefsMeUser").isMeAccount(a))},[$,N]),Cd=e(function(a){var b=a[0];a=a[1];return a&&!b.remote.isBot()},[o,$]),Dd=e(function(a){var b=a[0],c=a[1];a=a[2];return b||c||a},[$,td,ud]),Ed=e(function(a){var b=a[0];a=a[1];return b===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a==="bot_feedback"},[m,n]),Fd=b("hsmTag"),Gd=e(function(a){a=a[0];return a===d("WAWebBusinessHSMTypes").HSM_TAG_TYPE.AUTHENTICATION},[Fd]),Hd=b("botRespOrInvocationRevokeBotWid"),Id=e(function(a){var b=a[0];a=a[1];return Boolean((b==null?void 0:b.isBot())&&a)},[Hd,Z]),Jd=e(function(a){var b=a[0];a=a[1];return a&&(b===d("WAWebProtobufsE2E.pb").BotPluginMetadata$PluginType.SEARCH||b===d("WAWebProtobufsE2E.pb").BotPluginMetadata$PluginType.REELS)},[zd,$]),Kd=b("botPluginMaybeParent"),Ld=b("botReelPluginThumbnailCdnUrl");e=e(function(a){a=a[0];return a===d("WAWebMsgType").MSG_TYPE.BIZ_CONTENT_PLACEHOLDER},[m]);b=b("statusMentioned");g.clearMsgGetterCacheFor=a;g.getMsgUnsafe=f;g.getType=m;g.getSubtype=n;g.getId=o;g.getTo=p;g.getFrom=q;g.getBroadcastId=r;g.getRemote=aa;g.getViewMode=s;g.getAuthor=t;g.getAck=u;g.getViewCount=ba;g.getViewed=ca;g.getOriginalSelfAuthor=v;g.getKicState=w;g.getKicTimestampMs=da;g.getList=x;g.getLatestEditMsgKey=y;g.getErrorCode=ea;g.getEphemeralDuration=z;g.getEphemeralSettingUser=fa;g.getT=A;g.getBackgroundColor=B;g.getHeaderType=ga;g.getInteractiveHeader=C;g.getInteractiveType=ha;g.getFooter=ia;g.getMentionedJidList=D;g.getGroupMentions=ja;g.getQuotedMsg=E;g.getQuotedRemoteJid=ka;g.getQuotedParticipant=F;g.getRcat=G;g.getIsViewOnce=H;g.getIsGif=la;g.getGifAttribution=ma;g.getCtwaContext=na;g.getMimetype=I;g.getFilehash=oa;g.getDeprecatedMms3Url=pa;g.getWaveform=qa;g.getDisappearingModeInitiator=J;g.getDisappearingModeTrigger=K;g.getDisappearingModeInitiatedByMe=L;g.getActiveBotMsgStreamingInProgress=ra;g.getBizBotType=M;g.getBotTargetSenderJid=N;g.getForwardedNewsletterMessageInfo=O;g.getNewsletterAdminInviteInfo=sa;g.getBizSource=ta;g.isBizSourceFromMarketingMessage=ua;g.getIsMarketingMessage=va;g.getIsReply=wa;g.getIsOpus=xa;g.getRcatString=ya;g.getHasMentionOfMe=za;g.getLocal=Aa;g.getIsImportantMessage=P;g.getBotPluginReferenceIndex=Ba;g.getIsUnreadType=Ca;g.getIsGroupMsg=Q;g.getIsNewsletterMsg=R;g.getHasOriginatedFromNewsletter=S;g.getIsStatus=T;g.getIsNotification=Da;g.getIsSentByMe=U;g.getSender=V;g.getOriginalSender=Ea;g.getIsReaction=Fa;g.getIsPollVote=Ga;g.getIsFutureproof=Ha;g.getIsStickerMsg=Ia;g.getIsCarouselCard=Ja;g.getHasThumbList=Ka;g.getIsKept=La;g.getIsUnkept=Ma;g.getIsPSA=Na;g.getIsIAS=Oa;g.getIsCAPISupport=Pa;g.getIsProductListMessage=Qa;g.getTitle=Ra;g.getBody=W;g.getCaption=Sa;g.getComment=Ta;g.getPollName=Ua;g.getPollOptions=Va;g.getPollSelectableOptionsCount=Wa;g.getPollInvalidated=Xa;g.getEventName=Ya;g.getEventDescription=Za;g.getEventStartTime=$a;g.getEventEndTime=ab;g.getEventJoinLink=bb;g.getEventLocation=cb;g.getIsEventCanceled=db;g.getEventInvalidated=eb;g.getReplyCount=fb;g.getNativeFlowName=gb;g.getNativeFlowButtons=hb;g.getPaymentCurrency=ib;g.getPaymentAmount1000=jb;g.getPaymentMessageReceiverJid=kb;g.getPaymentStatus=lb;g.getPaymentTxnStatus=mb;g.getPaymentNoteMsg=nb;g.getPaymentRequestMessageKey=ob;g.getPaymentExpiryTimestamp=pb;g.getPaymentInviteServiceType=qb;g.getPaymentBackground=rb;g.getIsFromTemplate=sb;g.getIsLive=tb;g.getIsDynamicReplyButtonsMsg=X;g.getDynamicReplyButtons=ub;g.getIsEphemeral=vb;g.getIsEdited=wb;g.getIsEditProtocolMsg=xb;g.getStatusCanvasColor=yb;g.getIsUserCreatedType=zb;g.getIsSentByMeFromWeb=Ab;g.getRevokeSender=Bb;g.getIsRevokedByMe=Cb;g.getIsInternational=Db;g.getIsBizNotification=Eb;g.getIsMedia=Fb;g.getIsForwarded=Y;g.getForwardingScore=Gb;g.getNumTimesForwarded=Hb;g.getIsFrequentlyForwarded=Ib;g.getIsBotInvoke=Jb;g.getShouldDisplayAsForwarded=Kb;g.getInvis=Lb;g.getIsNewMsg=Mb;g.getIsSendFailure=Nb;g.getIsFailed=Ob;g.getVcard=Pb;g.getDescription=Qb;g.getMatchedText=Rb;g.getThumbnail=Sb;g.getThumbnailHQ=Tb;g.getRichPreviewType=Ub;g.getLinkPreview=Vb;g.getSupportsMessageFooter=Wb;g.getSupportsMessageFooterLinks=Xb;g.INITIAL_PAGE_SIZE=Yb;g.getInitialPageSize=Zb;g.getIsInitialE2ENotification=$b;g.getIsDisappearingModeSystemMessage=ac;g.getKicKey=bc;g.getKicSender=cc;g.getEphemeralExpirationTimestamp=dc;g.getIsRevoke=Z;g.getRevokeDuration=ec;g.getWamEditType=fc;g.getWamDisappearingModeTrigger=gc;g.getWamDisappearingModeInitiatedByMe=hc;g.getWamDisappearingModeInitiator=ic;g.getInviteCode=jc;g.getInviteCodeExp=kc;g.getInviteGrp=lc;g.getInviteGrpName=mc;g.getInviteGrpJpegThum=nc;g.getInviteGrpType=oc;g.getIsGroupsV4InviteExpired=pc;g.getIsNewsletterAdminInviteExpired=qc;g.getProductHeaderImageRejected=rc;g.getProductListHeaderImage=sc;g.getIsAckPlayable=tc;g.getHasReaction=uc;g.getRecipients=vc;g.getTemplateParams=wc;g.getClientUrl=xc;g.getLoc=yc;g.getLat=zc;g.getLng=Ac;g.getShareDuration=Bc;g.getFinalLat=Cc;g.getFinalLng=Dc;g.getStar=Ec;g.getCurrencyCode=Fc;g.getPriceAmount1000=Gc;g.getSalePriceAmount1000=Hc;g.getIsVcardOverMmsDocument=Ic;g.getInteractiveAnnotations=Jc;g.getMessageSecret=Kc;g.getBroadcast=Lc;g.getVcardList=Mc;g.getVcardFormattedName=Nc;g.getLabels=Oc;g.getAgendId=Pc;g.getUrl=Qc;g.getRetailerId=Rc;g.getBusinessOwnerJid=Sc;g.getProductId=Tc;g.getProductImageCount=Uc;g.getIsMdHistoryMsg=Vc;g.getCampaignId=Wc;g.getFilename=Xc;g.getSmbClientCampaignId=Yc;g.getIsCaptionByUser=Zc;g.getDoNotPlayInline=$c;g.getThumbnailDirectPath=ad;g.getThumbnailHeight=bd;g.getThumbnailWidth=cd;g.getOrderTitle=dd;g.getItemCount=ed;g.getTotalAmount1000=fd;g.getTotalCurrencyCode=gd;g.getFutureproofType=hd;g.getFutureproofSubtype=id;g.getEphemeralOutOfSync=jd;g.getIsAvatar=kd;g.getBizPrivacyStatus=ld;g.getVerifiedBizName=md;g.getMediaKey=nd;g.getMessage=od;g.getSize=pd;g.getHostedBizEncStateMismatch=qd;g.getIsBotFutureproofPlaceholder=rd;g.getIsBotQuery=sd;g.getIsBizBot1pResponse=td;g.getIsBizBot3pResponse=ud;g.getBotPluginSearchProvider=vd;g.getBotPluginSearchUrl=wd;g.getBotResponseTargetId=xd;g.getBotPluginSearchQuery=yd;g.getBotPluginType=zd;g.getIsBotSearchResponse=Ad;g.getIsMetaBotResponse=$;g.isMetaBotResponseToMyInvoke=Bd;g.getIsMetaBotInvokeResponse=Cd;g.getIsBotResponse=Dd;g.getIsBotFeedbackMessage=Ed;g.getHsmTag=Fd;g.getIsAuthenticationMessage=Gd;g.getBotRespOrInvocationRevokeBotWid=Hd;g.getIsRevokeForMsgFromOrDeliveredToBot=Id;g.getIsBotPluginCarouselMsg=Jd;g.getBotPluginMaybeParent=Kd;g.getBotReelPluginThumbnailCdnUrl=Ld;g.getIsBizContentPlaceholder=e;g.getStatusMentioned=b}),98);
__d("WAWebViewModeUtils",["$InternalEnum","WAWebABProps","WAWebNewsletterGatingUtils"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["MEDIA_ALBUM","NEWSLETTER_TOMBSTONE"]),i=b("$InternalEnum").Mirrored(["CHAT","SEARCH","CHAT_LIST","NOTIFICATION"]);function a(a,b){if(b==null||!d("WAWebABProps").getABPropConfigValue("web_view_mode_usage_enabled"))return!0;switch(a){case i.CHAT:switch(b){case h.MEDIA_ALBUM:return!1;case h.NEWSLETTER_TOMBSTONE:return!d("WAWebNewsletterGatingUtils").isNewsletterTombstoneMessageHidingEnabled()}break;case i.SEARCH:switch(b){case h.MEDIA_ALBUM:return!1;case h.NEWSLETTER_TOMBSTONE:return!1}break;case i.CHAT_LIST:switch(b){case h.MEDIA_ALBUM:return!1;case h.NEWSLETTER_TOMBSTONE:return!d("WAWebNewsletterGatingUtils").isNewsletterTombstoneMessageHidingEnabled()}break;case i.NOTIFICATION:switch(b){case h.MEDIA_ALBUM:return!1;case h.NEWSLETTER_TOMBSTONE:return!1}}}g.ViewModeType=h;g.ViewModeSurface=i;g.isViewModeVisibleInSurface=a}),98);
__d("WAWebNewsletterFutureProofUtils",["WAWebABProps","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterGatingUtils"],(function(a,b,c,d,e,f,g){var h=new Map([[1,(b=d("WAWebMsgType")).MSG_TYPE.CHAT],[2,b.MSG_TYPE.IMAGE],[3,b.MSG_TYPE.VIDEO],[4,b.MSG_TYPE.AUDIO],[5,b.MSG_TYPE.PTT],[6,b.MSG_TYPE.LOCATION],[7,b.MSG_TYPE.VCARD],[8,b.MSG_TYPE.DOCUMENT],[11,b.MSG_TYPE.MULTI_VCARD],[12,b.MSG_TYPE.REACTION],[13,b.MSG_TYPE.POLL_CREATION],[14,b.MSG_TYPE.POLL_UPDATE],[15,b.MSG_TYPE.STICKER]]);function i(){return d("WAWebABProps").getABPropConfigValue("channel_supported_message_types").split(",").map(function(a){return Number.parseInt(a.trim(),10)}).filter(Number.isSafeInteger).reduce(function(a,b){b=h.get(b);b!=null&&a.add(b);return a},new Set())}function j(a){var b=i().has(a);switch(a){case d("WAWebMsgType").MSG_TYPE.STICKER:return d("WAWebNewsletterGatingUtils").isNewsletterStickerReceivingEnabled();case d("WAWebMsgType").MSG_TYPE.PTT:return d("WAWebNewsletterGatingUtils").isNewsletterPTTReceivingEnabled();case d("WAWebMsgType").MSG_TYPE.POLL_CREATION:case d("WAWebMsgType").MSG_TYPE.POLL_UPDATE:return d("WAWebNewsletterGatingUtils").isNewsletterPollsReceivingEnabled();case d("WAWebMsgType").MSG_TYPE.AUDIO:return d("WAWebNewsletterGatingUtils").isNewsletterAudioFileReceivingEnabled();default:return b}}function a(a){var b=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN?a.futureproofType:a.type;if(b==null)return!1;if(!j(b))return!1;return d("WAWebMsgGetters").getIsReply(a)&&!d("WAWebNewsletterGatingUtils").isNewsletterReceivingAdminRepliesEnabled()?!1:!0}g.isMsgTypeSupported=j;g.isMsgSupported=a}),98);
__d("WAWebCommonNewsletterEnums",["$InternalEnum"],(function(a,b,c,d,e,f){c=(a=b("$InternalEnum"))({Subscriber:"subscriber",Admin:"admin",Guest:"guest",Owner:"owner"});d=a({Public:"public",Private:"private"});e=a({Active:"active",Suspended:"suspended",GeoSuspended:"geosuspended"});b=a({All:0,Basic:1,Blocklist:2,None:3});var g=a.Mirrored(["ALERT_BANNER","INFO_DRAWER"]),h=a.Mirrored(["GEOSUSPEND","SUSPEND","VIOLATING_MSG","PROFILE_PICTURE_DELETION"]),i=a.Mirrored(["SUSPENDED_DETAILED_SCREEN","DELETE_NEWSLETTER","VIOLATING_MESSAGES_SCREEN","PROFILE_PICTURE_DELETION_SCREEN","GEOSUSPENDED_COUNTRY_DETAILED_SCREEN","MULTIPLE_ALERTS_LIST_SCREEN","NO_ALERTS_SCREEN","REQUEST_REVIEW_DESCRIPTION_SCREEN","REQUEST_REVIEW_REASON_SCREEN","APPEAL_OUTCOME_SCREEN","REMEDIATION_OPTIONS_SCREEN","DSB_STEP1_SCREEN","DSB_STEP2_SCREEN","DSB_STEP3_SCREEN"]),j=a.Mirrored(["All","Unread","MyChannels"]);a=a({Insights:0});f.NewsletterMembershipType=c;f.NewsletterPrivacy=d;f.NewsletterState=e;f.NewsletterReactionCodesSetting=b;f.AlertEntryPoint=g;f.EnforcementType=h;f.AlertScreen=i;f.NewsletterInboxFilterTypes=j;f.NewsletterCapability=a}),66);
__d("WAWebGetEnumValuesFromConfig",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.config,c=a.enumCastFunction,d=new Set();return b.split(",").map(function(a){return Number.parseInt(a.trim(),10)}).filter(Number.isSafeInteger).map(function(a){if(d.has(a))return null;d.add(a);return c(a)}).filter(Boolean)}f.getEnumValuesFromConfig=a}),66);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAWebBackendErrors",["WACustomError","WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",", error"]);h=function(){return a};return a}c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.status=b;c.statusCode=b;return c}return b}((b=d("WACustomError")).customError("ServerStatusCodeError"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d=a.call(this,d)||this;d.errors=c;d.status=b;d.statusCode=b;return d}return b}(b.customError("ServerStatusCodeError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,451,"commerce features disabled")||this}return b}(b.customError("E451",!0,c));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,404,a)||this}return a}(b.customError("E404",!0,c)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,507,a)||this;a.backoff=Number.isNaN(c)?null:c;return a}return a}(b.customError("E507",!0,c)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b.customError("Drop")),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b.customError("LogoutDrop",!0,k)),m=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b.customError("EphemeralDrop",!0,k));function a(a,b){return a["catch"](function(a){d("WALogger").ERROR(h(),b).verbose().devConsole(a).sendLogs(b);throw a})}var n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){d=b.call(this,d)||this;d.gid=a;d.membershipApprovalMode=c;return d}return a}(b.customError("UnexpectedJoinGroupViaInviteResponse"));b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.membershipApprovalMode=b;return c}return b}(b.customError("UnexpectedJoinSubgroupResponse"));g.ServerStatusCodeError=c;g.CatalogEditServerError=e;g.E451=f;g.E404=i;g.E507=j;g.Drop=k;g.LogoutDrop=l;g.EphemeralDrop=m;g.attachErrorLogger=a;g.UnexpectedJoinGroupViaInviteResponse=n;g.UnexpectedJoinSubgroupResponse=b}),98);
__d("WAWebMexEventV2WamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MexEventV2:[4336,{mexEventV2DurationMs:[1,a.TYPES.TIMER],mexEventV2EndTime:[2,a.TYPES.INTEGER],mexEventV2ErrorCodes:[3,a.TYPES.STRING],mexEventV2Errors:[4,a.TYPES.STRING],mexEventV2HasData:[5,a.TYPES.BOOLEAN],mexEventV2IsArgoPayload:[10,a.TYPES.BOOLEAN],mexEventV2IsMex:[6,a.TYPES.BOOLEAN],mexEventV2OperationName:[7,a.TYPES.STRING],mexEventV2QueryId:[8,a.TYPES.STRING],mexEventV2StartTime:[9,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MexEventV2:[]});g.MexEventV2WamEvent=b}),98);
__d("WAWebMexLogging",["WALogger","WAWebMexEventV2WamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][MexPerfTracker] Logging event:"]);h=function(){return a};return a}c=function(){function a(a){this.$1=!1,this.$2="",this.$3="",this.$4=-1,this.$5=-1,this.$6=-1,this.$7=!1,this.$8="",this.$9="",this.$1=a}var b=a.prototype;b.start=function(){this.$4=Date.now()};b.stop=function(){this.$5=Date.now(),this.$6=this.$5-this.$4};b.setQueryId=function(a){a!=null&&(this.$3=a)};b.setOperationName=function(a){a!=null&&(this.$2=a)};b.setHasData=function(a){this.$7=a};b.setErrors=function(a){if(a!=null){a=this.parseErrorsAndCodes(a);this.$8=a.errors;this.$9=a.errorCodes}};b.setExtensionErrors=function(a){if(a!=null){a=a.filter(function(a){return((a=a.extensions)==null?void 0:a.error_code)!=null}).map(function(a){return i(a.extensions.error_code,a.message)});this.setErrors(a)}};b.logEvent=function(){var a={mexEventV2DurationMs:this.$6,mexEventV2EndTime:this.$5,mexEventV2ErrorCodes:this.$9,mexEventV2Errors:this.$8,mexEventV2HasData:this.$7,mexEventV2IsMex:this.$1,mexEventV2OperationName:this.$2,mexEventV2QueryId:this.$3,mexEventV2StartTime:this.$4};d("WALogger").DEV(h()).tags("GQL","MEX").devConsole(a);new(d("WAWebMexEventV2WamEvent").MexEventV2WamEvent)(a).commit()};b.parseErrorsAndCodes=function(a){var b=a.map(function(a){return a.code});return{errors:JSON.stringify(a),errorCodes:JSON.stringify(b)}};return a}();function i(a,b){return{code:a,detail:b,type:"EXTENSION"}}function a(a,b){return{code:a,detail:b,type:"CLIENT"}}function b(a,b){return{code:a,detail:b,type:"TRANSPORT"}}g.MexPerfTracker=c;g.createLoggingClientError=a;g.createLoggingTransportError=b}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAXmlParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.parser=a,this.reason=b}var b=a.prototype;b.toString=function(){return"XmlParsingFailure: "+this.parser+": "+this.reason};return a}();f.XmlParsingFailure=a}),66);
__d("WAParsableXmlNode",["WAErr","WAHasProperty","WAXmlParsingFailure"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var c=this;this.$1=a;this.$2=b;this.$3=Array.isArray(b.content)?b.content.map(function(b){return new c.constructor(a,b)}):null}var b=a.prototype;b.name=function(){return this.$1};b.node=function(){return this.$2};b.hasAttr=function(a){return c("WAHasProperty")(this.$2.attrs,a)};b.assertTag=function(a){this.$2.tag!==a&&this["throw"]("to be <"+a+">")};b.tag=function(){return this.$2.tag};b.maybeChild=function(a){var b=this.$3;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].tag()===a)return b[c];return null};b.hasChild=function(a){return!!this.maybeChild(a)};b.child=function(a){var b=this.maybeChild(a);return!b?this["throw"]("to have child <"+a+">"):b};b.assertAttr=function(a,b){var c=this.attrString(a);c!==b&&this["throw"]('to have "'+a+'"="'+b+'", but instead has "'+c+'"')};b.attrString=function(a){return!c("WAHasProperty")(this.$2.attrs,a)?this["throw"]('to have attribute "'+a+'"'):this.decodeAsString(this.$2.attrs[a])};b.forEachAttributeKey=function(a){var b=this.$2.attrs;Object.keys(b).forEach(function(b){return a(b)})};b.maybeAttrString=function(a){return this.hasAttr(a)?this.decodeAsString(this.$2.attrs[a]):null};b.maybeAttrInt=function(a,b,c){return this.hasAttr(a)?this.attrInt(a,b,c):null};b.attrEnumValues=function(a,b,c){b=new Set(b);var d=this.attrString(a);if(!b.has(d)){if(c!=null)return c;c=Array.from(b).join("|");return this["throw"]('to have "'+a+'"={'+c+'} but has value "'+d+'"')}return d};b.attrEnum=function(a,b){var d=this.attrString(a);if(!c("WAHasProperty")(b,d)){var e=Object.keys(b).join("|");return this["throw"]('to have "'+a+'"={'+e+'} but has value "'+d+'"')}return b[d]};b.attrEnumOrNullIfUnknown=function(a,b){a=this.attrString(a);return!c("WAHasProperty")(b,a)?null:b[a]};b.attrEnumOrDefault=function(a,b,c){return this.hasAttr(a)?this.attrEnum(a,b):c};b.attrInt=function(a,b,c){var d=this.attrString(a);return this.$4(d,a,b,c)};b.$4=function(a,b,c,d){var e=parseInt(a,10);if(Number.isNaN(e))return this["throw"]('to have "'+b+'"={integer} but has value "'+a+'"');else if(c!==void 0&&e<c)return this["throw"]('to have "'+b+'"={at least '+c+"} but has value "+e);else if(d!==void 0&&e>=d)return this["throw"]('to have "'+b+'"={below '+d+"} but has value "+e);return e};b.forEachChild=function(a){var b=this.$3;if(b)b.forEach(function(b){return a(b)});else if(this.$2.content!=null)return this["throw"]("to have children")};b.forEachChildWithTag=function(a,b){this.forEachChild(function(c){c.tag()===a&&b(c)})};b.mapChildren=function(a){var b=this.$3;return!b&&this.$2.content!=null?this["throw"]("to have children"):b?b.map(function(b){return a(b)}):[]};b.mapChildrenWithTag=function(a,b){var c=this.$3;return!c&&this.$2.content!=null?this["throw"]("to have children"):c?c.filter(function(b){return b.tag()===a}).map(function(a){return b(a)}):[]};b.mapFirstChild=function(a){var b=this.$3;return!b||b.length===0?this["throw"]("to have children"):a(b[0])};b.hasContent=function(){return!this.$3&&!!this.$2.content};b.hasChildren=function(){return this.$3!=null};b.getChildren=function(){return this.$3};b.mapAttrKeys=function(a){var b=this.getAttrKeys();return b&&b.length?b.map(a):[]};b.getAttrKeys=function(){return Object.keys(this.$2.attrs)};b.hasAttrs=function(){var a=this.$2.attrs?Object.keys(this.$2.attrs):[];return a.length>0};b.getNode=function(){return this.$2};b.unsafeSetChildren=function(a){this.$3=a};b.unsafeSetNodeContent=function(a){this.$2.content=a};b.contentUint=function(a){var b=this.contentBytes(a);return h(b,a)};b.contentBytes=function(a){a===void 0&&(a=-1);if(this.$3)return this["throw"]("to have binary content, but has children instead");else if(this.$2.content!=null){var b=this.$2.content;return a!==-1&&b.length!==a?this["throw"]("to be "+a+" bytes, but got "+b.length+" instead"):b}else return this["throw"]("to have content")};b.contentString=function(){if(this.$3)return this["throw"]("to have string content, but has children instead");else if(this.$2.content!=null)return this.$2.content;else return this["throw"]("to have content")};b.contentInt=function(a,b){var c=this.contentString();return this.$4(c,"content",a,b)};b.contentEnum=function(a){var b=this.contentString();if(!c("WAHasProperty")(a,b)){var d=Object.keys(a).join("|");return this["throw"]("to have content {"+d+'} but has value "'+b+'"')}return a[b]};b.decodeAsString=function(a){if(typeof a!=="string")throw c("WAErr")("decodeAsString: attribute is "+typeof a+" not a string: "+a);return a};b["throw"]=function(a){throw new(d("WAXmlParsingFailure").XmlParsingFailure)(this.$1,"expected <"+this.$2.tag+"> "+a)};b.toString=function(){return this.$2.toString()};return a}();function h(a,b){var c=0;for(var d=0;d<b;d++)c=c*256+a[d];return c}g.ParsableXmlNode=a;g.convertBytesToUint=h}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";b={scalarbase:(a=d("tweetnacl")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,(d=d("WAProtoConst")).TYPES.UINT32],localIdentityPublic:[2,d.TYPES.BYTES],remoteIdentityPublic:[3,d.TYPES.BYTES],rootKey:[4,d.TYPES.BYTES],previousCounter:[5,d.TYPES.UINT32],senderChain:[6,d.TYPES.MESSAGE,e],receiverChains:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],pendingKeyExchange:[8,d.TYPES.MESSAGE,c],pendingPreKey:[9,d.TYPES.MESSAGE,b],remoteRegistrationId:[10,d.TYPES.UINT32],localRegistrationId:[11,d.TYPES.UINT32],needsRefresh:[12,d.TYPES.BOOL],aliceBaseKey:[13,d.TYPES.BYTES]};b.internalSpec={preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[3,d.TYPES.INT32],baseKey:[2,d.TYPES.BYTES]};c.internalSpec={sequence:[1,d.TYPES.UINT32],localBaseKey:[2,d.TYPES.BYTES],localBaseKeyPrivate:[3,d.TYPES.BYTES],localRatchetKey:[4,d.TYPES.BYTES],localRatchetKeyPrivate:[5,d.TYPES.BYTES],localIdentityKey:[7,d.TYPES.BYTES],localIdentityKeyPrivate:[8,d.TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d.TYPES.BYTES],senderRatchetKeyPrivate:[2,d.TYPES.BYTES],chainKey:[3,d.TYPES.MESSAGE,h],messageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f]};f.internalSpec={index:[1,d.TYPES.UINT32],cipherKey:[2,d.TYPES.BYTES],macKey:[3,d.TYPES.BYTES],iv:[4,d.TYPES.BYTES]};h.internalSpec={index:[1,d.TYPES.UINT32],key:[2,d.TYPES.BYTES]};i.internalSpec={currentSession:[1,d.TYPES.MESSAGE,a],previousSessions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,a]};j.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES]};k.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES],signature:[4,d.TYPES.BYTES],timestamp:[5,d.TYPES.FIXED64]};l.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d.TYPES.UINT32],senderChainKey:[2,d.TYPES.MESSAGE,p],senderSigningKey:[3,d.TYPES.MESSAGE,n],senderMessageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d.TYPES.BYTES],"private":[2,d.TYPES.BYTES]};o.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};p.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.SessionStructure$PendingPreKeySpec=b;g.SessionStructure$PendingKeyExchangeSpec=c;g.SessionStructure$ChainSpec=e;g.SessionStructure$Chain$MessageKeySpec=f;g.SessionStructure$Chain$ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderKeyStateStructure$SenderSigningKeySpec=n;g.SenderKeyStateStructure$SenderMessageKeySpec=o;g.SenderKeyStateStructure$SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h,i=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function j(a,e,f){if(f<0||f>i)return(h||(h=b("Promise"))).reject(c("WAErr")("HKDF::expand given bad length "+f));var g,j=Math.ceil(f/d("WACryptoHmac").SHA256_BYTE_LENGTH),k=d("WABinary").Binary.build(e).readByteArray(),l=new(d("WABinary").Binary)(),m=d("WACryptoHmac").encodeKeySha256(a).then(function(a){g=a;return new Uint8Array(0)});e=function(a){m=m.then(function(b){return d("WACryptoHmac").sign(g,d("WABinary").Binary.build(b,k,a).readByteArray())}).then(function(a){a=new Uint8Array(a);l.writeByteArray(a);return a})};for(a=1;a<=j;a++)e(a);return m.then(function(){return l.readBuffer(f)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return j(new Uint8Array(a),b,c)})}function e(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return j(new Uint8Array(a),c,e)})}g.expand=j;g.extractAndExpand=a;g.extractWithSaltAndExpand=e}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","WAErr"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function f(a){if(a!==(a|0))throw c("WAErr")("bound must be int32");if(a<=0)throw c("WAErr")("bound must not be positive");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e/a);var f=-1;while(f===-1){d("WACryptoDependencies").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=e;g.randomNumberLessThan=f}),98);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];var p=o[1],q=o[0];g.push(q);j.push(p);if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){q=o[2];if(typeof q.cast==="function")f[m]=q;else{var r=!0,s=0;for(var t in q)r&&t!==s++&&(r=!1);t=void 0;if(r){t=[];for(r=0;r<s;r++)t.push(!0)}else{t={};for(r in q)t[q[r]]=!0}f[m]=t}}else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP){if(o.length!==3)throw new Error("Map field "+n+" should have exactly three elements in its internalSpec");f[m]=o[2]}else f[m]=null}var u={};s=function(a){l[a].forEach(function(b){u[b]||(u[b]=[]),u[b].push(a)})};for(r in l)s(r);q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];t=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];p=new h(e,g,j,k,f,l,u,q,t);a.internalCompiledSpec=p;return p}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else if(a===d("WAProtoConst").TYPES.MAP)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q],u=(o&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP;if(r===void 0&&!u)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(u&&p!=null){o=g[b];q=o[0];u=o[1];o=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u;var v=t[q],w=t[o];if(v===void 0||w===void 0)throw new Error("Can not find the validator for Map with key type "+q+", value type "+o);for(var o=p,x=Array.isArray(o),y=0,o=x?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=o.length)break;z=o[y++]}else{y=o.next();if(y.done)break;z=y.value}z=z;var A=z[0];z=z[1];m=v(A,q);if(m){m.path.push(n+"'s key ["+A+"]");return{v:m}}m=w(z,u);if(m){m.path.push(n+"["+A+"]'s value");return{v:m}}}}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);z=j[n];z&&z.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof '"+b+"' has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field "+n+" is reserved"})}};for(var n=0;n<c.length&&!m;n++){var o=b(n);if(typeof o==="object")return o.v}return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d("WAProtoCompile").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers["extends"]({},f)||{};s.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(f=0;f<g.length;f++)l[f]&d("WAProtoConst").FLAGS.REPEATED?s[g[f]]=[]:l[f]===(d("WAProtoConst").TYPES.MAP&d("WAProtoConst").TYPE_MASK)&&(s[g[f]]=new Map());var t=0;c=k.length>0;a=k[0];while(b.size()){f=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var u=f&7,v=f>>>3;if(c&&v!==a){f=t;do++t===k.length&&(t=0),a=k[t];while(v!==a&&t!==f)}if(c&&v===a)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d("WAProtoConst").TYPE_MASK,k=m[t];if(c&d("WAProtoConst").FLAGS.PACKED){var w=b.readVarInt(d("WABinary").parseUint64OrThrow);w=b.readBinary(w);while(w.size()){var x=i(a,f,w);(f!==d("WAProtoConst").TYPES.ENUM||k[x]||(k.cast==null?void 0:k.cast(x))!==void 0)&&s[a].push(x)}}else if(f===d("WAProtoConst").TYPES.MESSAGE){x=b.readVarInt(d("WABinary").parseUint64OrThrow);w=b.readBinary(x);if(c&d("WAProtoConst").FLAGS.REPEATED)s[a].push(n(k,w,void 0,e));else{x=s[a];s[a]=n(k,w,x,e)}}else if(f===d("WAProtoConst").TYPES.MAP){w=b.readVarInt(d("WABinary").parseUint64OrThrow);x=b.readBinary(w);var y,z;for(w=0;w<m[t].length;w++){var A=j(x,0,4294967296,"map field and enc type",d("WABinary").parseInt64OrThrow),B=A&7;A=A>>>3;var C=void 0;switch(B){case d("WAProtoConst").ENC.VARINT:C=x.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:C=x.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:B=k[w];if(B===d("WAProtoConst").TYPES.BYTES||B===d("WAProtoConst").TYPES.STRING)C=i(a,B,x);else{var D=x.readVarInt(d("WABinary").parseUint64OrThrow);D=x.readBinary(D);C=n(B,D,void 0,e)}break;case d("WAProtoConst").ENC.BIT32:C=x.readBinary(4);break}A===1?y=C:z=C}s[a].set(y,z)}else{B=i(a,f,b);(f!==d("WAProtoConst").TYPES.ENUM||k[B]||(k.cast==null?void 0:k.cast(B))!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?s[a].push(B):s[a]=B)}D=p[a];D&&typeof s[a]!=="undefined"&&D.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else{s.$$unknownFieldCount++;if(e){s.$$unsafeUnknownFields||(s.$$unsafeUnknownFields={});f=void 0;switch(u){case d("WAProtoConst").ENC.VARINT:f=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:f=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:f=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:f=b.readBinary(4);break}s.$$unsafeUnknownFields[v]=f}else u===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):u===d("WAProtoConst").ENC.BIT64?b.advance(8):u===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):u===d("WAProtoConst").ENC.BIT32&&b.advance(4)}}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithUnknowns=b;g.getUnknownFields=e}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else if(p===d("WAProtoConst").TYPES.MAP)for(var o=l,r=Array.isArray(o),s=0,o=r?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=o.length)break;t=o[s++]}else{s=o.next();if(s.done)break;t=s.value}t=t;var u=t[0];t=t[1];a.writeVarInt(k);var v=q[0],w=q[1],x=typeof w==="object"?d("WAProtoConst").TYPES.MESSAGE:w,y=m[v],z=m[x];if(y==null||z==null)throw new Error("Invalid encoder for map key/value");var A=new(d("WABinary").Binary)(),B=1*8|d("WAProtoUtils").typeToEncType(v);A.writeVarInt(B);y(A,u,v);B=2*8|d("WAProtoUtils").typeToEncType(x);A.writeVarInt(B);z(A,t,w);a.writeVarInt(A.size());a.writeBinary(A)}else{a.writeVarInt(k);y=m[p];y(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WASignalOther",["WACryptoDependencies","WACryptoHkdf","WACryptoUtils","WAErr","WAParsableXmlNode","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw c("WAErr")("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function e(a,b){return a.readByteArray(b)}function f(a){return new Uint8Array(a)}function k(a,b,d){if(a.length-b<d)throw c("WAErr")("Can not split off "+d+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+d)}function l(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function m(a){return q(a)}function n(a){return d("WAParsableXmlNode").convertBytesToUint(a,4)}function o(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function p(a){return q(a)}function q(a,b,d){b===void 0&&(b=0);d===void 0&&(d=4294967296);if(typeof a==="number"&&b<=a&&a<d&&Math.floor(a)===a)return a;else throw c("WAErr")("Expected integer in range ["+b+", "+d+"), given "+String(a))}function r(a,b){return d("encodeProtobuf").encodeProtobuf(a,b).readByteArray()}function s(a,b,c){return c(d("decodeProtobuf").decodeProtobuf(a,b))}function t(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function u(a,b){var c,e;b==="hmac-sha256"?(c=i,e=["sign"]):(b,c=h,e=["encrypt","decrypt"]);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,c,!1,e)}function v(a){return a}function w(a){return a}function x(a,b){return d("WACryptoUtils").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=e;g.makeBytes=f;g.sliceBytes=k;g.makeRegistrationId=l;g.castRegistrationId=m;g.castRegistrationIdFromBytes=n;g.makeSenderKeyId=o;g.castSenderKeyId=p;g.ensureIntInRange=q;g.encodeSignalProto=r;g.decodeSignalProto=s;g.hkdf=t;g.makeCryptoKey=u;g.castToByteEncoded=v;g.castToSessionHash=w;g.areSessionHashesEqual=x}),98);
__d("WASignalKeys",["WACryptoDependencies","WACryptoPrimitives","WAErr","WALogger","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["deserializePreKey error ",""]);h=function(){return a};return a}var i=5,j=16777215;function k(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("WACryptoPrimitives").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function b(a,b){return{publicKey:d("WASignalOther").toBytes(a,32),privateKey:d("WASignalOther").toBytes(b,32)}}function l(){var a=d("WACryptoPrimitives").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function m(a,b){return k(d("WASignalOther").sliceBytes(b,1,32),a)}function n(a,b){return{serializedPubKey:b,privateKey:a}}function e(){var a=l();return n(a.privateKey,o(a))}function o(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(a.publicKey,1);return b}function f(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function p(a){return n(a.privateKey,o(a))}function q(a,b){a=(a-1)%j;a<=0&&(a+=j);var c=[];for(var e=0;e<b;e++){var f=a===j?1:a+1,g=l(),h=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:o(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function r(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:s(b),keyPair:m(d("WASignalOther").toBytes(a,32),u(new Uint8Array(c)))}}catch(a){d("WALogger").DEV(h(),a);return null}}function s(a){return d("WASignalOther").ensureIntInRange(a,1,j)}function t(a){return d("WASignalOther").ensureIntInRange(a,0,j)}function u(a){if(a.length===0||a[0]!==i)throw c("WAErr")("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function v(){var a=d("WASignalOther").makeBytes(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a}function w(a,b){return d("WACryptoPrimitives").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=i;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=l;g.makeKeyPairFromSerialized=m;g.makeSerializedKeyPairFrom=n;g.makeSerializedKeyPair=e;g.serializePubKey=o;g.serializeIdentity=f;g.toSerializedKeyPair=p;g.makePreKeys=q;g.deserializePreKey=r;g.castToPreKeyId=s;g.castToSignedPreKeyId=t;g.castToSerializedPubKey=u;g.makeRawSenderKey=v;g.ecdh=w}),98);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("WAWapDict",[],(function(a,b,c,d,e,f){"use strict";a=3;b=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"];c=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"];d=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"];e=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"];var g=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"],h=[c,d,e,g];f.DICT_VERSION=a;f.SINGLE_BYTE_TOKEN=b;f.DICTIONARY_0_TOKEN=c;f.DICTIONARY_1_TOKEN=d;f.DICTIONARY_2_TOKEN=e;f.DICTIONARY_3_TOKEN=g;f.DICTIONARIES=h}),66);
__d("WAWapJid",["$InternalEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4},i=b("$InternalEnum")({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129});a=function(){function a(a){this.$1=a}a.createAD=function(b,c,d){return new a({type:h.JID_AD,user:b,device:d==null?0:d,agent:c==null?0:c,domainType:i.WHATSAPP})};a.createJidU=function(b,c,d){return new a({type:h.JID_U,user:b,device:d==null?0:d,domainType:c==null?i.WHATSAPP:c})};a.createFbJid=function(b,c){c=c==null?0:c;return new a({type:h.JID_FB,user:b,device:c})};a.createInteropJid=function(b,c,d){c=c==null?0:c;return new a({type:h.JID_INTEROP,user:b,device:c,integrator:d})};a.create=function(b,c){return new a({type:h.JID,user:b,server:c})};var b=a.prototype;b.toString=function(){if(this.$1.type===h.JID_AD||this.$1.type===h.JID_U){var a=this.$1,b=a.user,c=a.device;a=a.domainType;var e;a===i.WHATSAPP?e=d("WAJids").WA_USER_JID_SUFFIX:a===i.HOSTED?e=d("WAJids").HOSTED_SUFFIX:a===i.HOSTED_LID?e=d("WAJids").HOSTED_LID_SUFFIX:e=d("WAJids").LID_SUFFIX;return c===0?b+"@"+e:b+":"+c+"@"+e}else if(this.$1.type===h.JID_FB){a=this.$1;b=a.user;c=a.device;e=d("WAJids").MSGR_USER_JID_SUFFIX;return b+":"+c+"@"+e}else if(this.$1.type===h.JID_INTEROP){a=this.$1;b=a.user;c=a.device;e=a.integrator;a=d("WAJids").INTEROP_USER_JID_SUFFIX;return e+"-"+b+":"+c+"@"+a}else{this.$1.type;e=this.$1;b=e.user;c=e.server;return b!=null?b+"@"+c:c}};b.getInnerJid=function(){return this.$1};return a}();g.WAP_JID_SUBTYPE=h;g.DomainType=i;g.WapJid=a}),98);
__d("WAXmlFormatter",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~");var b=a.length,c=!1,d=0,e="",f=0,h=["\n"];for(f=0;f<100;f++)h.push(h[f]+"    ");var i=function(b,a){var c=/^<[\w:\-.,]+/.exec(b[a-1]);b=/^<\/[\w:\-.,]+/.exec(b[a]);return c!=null&&b!=null&&c[0]===b[0]};for(f=0;f<b;f++)a[f].search(/<!/)>-1?(e+=h[d]+a[f],c=!0,(a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1||a[f].search(/!DOCTYPE/)>-1)&&(c=!1)):a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1?(e+=a[f],c=!1):i(a,f)?(e+=a[f],c||d--):a[f].search(/<\w/)>-1&&a[f].search(/<\//)===-1&&a[f].search(/\/>/)===-1?(a[f]=g(a[f]),e=c?e+=a[f]:e+=h[d++]+a[f]):a[f].search(/<\w/)>-1&&a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d===0?d:--d]+a[f]:a[f].search(/\/>/)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\?/)>-1?e+=h[d]+a[f]:a[f].search(/xmlns:/)>-1||a[f].search(/xmlns=/)>-1?e+=h[d]+a[f]:e+=a[f];return e[0]==="\n"?e.slice(1):e}function g(a){var b=a.match(/(<query.*>|<result>)(\{.*\})/);if(b===null)return a;try{var c=b[1];b=JSON.stringify(JSON.parse(b[2]),null,2);return c+"\n"+b}catch(b){return a+"[Error formatting JSON]"}}f["default"]=a}),66);
__d("WAXmlNode",["WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(){function a(a,b,c){b===void 0&&(b=h),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=i(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b instanceof Uint8Array?a+=">"+j(b)+"</"+this.tag+">":b!=null?a+=">"+String(b)+"</"+this.tag+">":a+=" />";return a};return a}();function i(a){var b=Object.keys(a),c="";for(var d=0;d<b.length;d++){var e=b[d];c+=" "+e+'="'+a[e].toString()+'"'}return c}function j(a){var b;a.length===0?b="<!-- empty binary -->":a.length<50?b=d("WAHex").bytesToDebugString(a):b="<!-- "+a.length+" bytes -->";return b}g.XmlNode=a;g.attrsToString=i;g.uint8ArrayToDebugString=j}),98);
__d("WAWap",["WAAssertUnreachable","WABinary","WACryptoDependencies","WAErr","WAJids","WALogger","WALongInt","WATextEncoding","WAWapDict","WAWapJid","WAXmlFormatter","WAXmlNode"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodeNullableString got invalid value: ",", string expected"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodeString got invalid value: ",", string expected"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoding compressed stanza"]);k=function(){return a};return a}var l=(h=d("WAJids")).MSGR_USER_DOMAIN.replace("@",""),aa=h.WA_USER_DOMAIN.replace("@",""),m=h.LID_DOMAIN.replace("@",""),n=h.INTEROP_DOMAIN.replace("@",""),o=h.HOSTED_DOMAIN.replace("@",""),p=2,ba=128,q=0,r=236,s=237,t=238,u=239,ca=[r,s,t,u],v=245,w=246,x=247,y=248,z=249,A=250,B=251,C=252,D=253,E=254,F=255,da=["0","1","2","3","4","5","6","7","8","9","-",".","\ufffd","\ufffd","\ufffd","\ufffd"],ea=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],G="",fa=1,H={sentinel:"DROP_ATTR"},I=(s=d("WAWapJid")).WapJid.create(null,"g.us"),J=s.WapJid.create(null,h.WA_SERVER_JID_SUFFIX);t=s.WapJid.create("status","broadcast");var K=s.WapJid.create(null,"newsletter");h=s.WapJid.create(null,"hosted");var ga=s.WapJid.create(null,"hosted.lid"),L=s.WapJid.create(null,"call"),M={},N=!1;function a(){N=!0}var ha=d("WATextEncoding").newTextEncoder(),O=function(){function a(a,b,c){b===void 0&&(b=M),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=d("WAXmlNode").attrsToString(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b?a+=">"+d("WAXmlNode").uint8ArrayToDebugString(b)+"</"+this.tag+">":a+=" />";N&&(a=c("WAXmlFormatter")(a));return a};return a}();function b(a,b,e){var f=null;if(b&&b.children!=null)throw c("WAErr")('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(e))f=e.filter(Boolean);else if(typeof e==="string")f=d("WABinary").Binary.build(e).readByteArray();else if(e instanceof ArrayBuffer)f=new Uint8Array(e);else if(e instanceof Uint8Array)f=e;else{var g=[];for(var h=2;h<arguments.length;h++){var i=arguments[h];i&&g.push(i)}f=g}Array.isArray(f)&&f.length===0&&(f=null);var j={};if(b){var k=b;Object.keys(k).forEach(function(b){if(["__self","__source"].includes(b))return;var d=k[b];if(d==null)throw c("WAErr")("Attr "+b+" in <"+a+"> is null");if(d===H)return;j[b]=d})}return new O(a,j,f)}s=b;function e(a){return a instanceof d("WAWapJid").WapJid?a.toString():a}function P(a){var b=a.content;Array.isArray(b)?b=b.map(P):typeof b==="string"&&(b=d("WABinary").Binary.build(b).readByteArray());return new O(a.tag,a.attrs||M,b)}function f(a){a=a instanceof O?a:P(a);var b=new(d("WABinary").Binary)();Q(a,b);a=0;b=b.readByteArray();var c=new Uint8Array(1+b.length);c[0]=a;c.set(b,1);return c}function Q(a,b){if(a==null)b.writeUint8(q);else if(a instanceof O)R(a,b);else if(a instanceof d("WAWapJid").WapJid)ia(a,b);else if(typeof a==="string")V(a,b);else if(a instanceof Uint8Array)ka(a,b);else{a;b=typeof a;throw c("WAErr")("Invalid payload type "+b)}}function ia(a,b){a=a.getInnerJid();if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_U){var c=a.user,e=a.device,f=a.domainType;b.writeUint8(x);b.writeUint8(f);b.writeUint8(e);Q(c,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_FB){f=a.user;e=a.device;b.writeUint8(w);Q(f,b);b.writeUint16(e);Q(l,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_INTEROP){c=a.user;f=a.device;e=a.integrator;b.writeUint8(v);Q(c,b);b.writeUint16(f);b.writeUint16(e)}else{c=a.user;f=a.server;b.writeUint8(A);c!=null?Q(c,b):b.writeUint8(q);Q(f,b)}}function R(a,b){if(a.tag===void 0){b.writeUint8(y);b.writeUint8(q);return}var c=1;a.attrs&&(c+=Object.keys(a.attrs).length*2);a.content&&c++;c<256?(b.writeUint8(y),b.writeUint8(c)):c<65536&&(b.writeUint8(z),b.writeUint16(c));Q(a.tag,b);a.attrs&&Object.keys(a.attrs).forEach(function(c){V(c,b),Q(a.attrs[c],b)});c=a.content;if(Array.isArray(c)){c.length<256?(b.writeUint8(y),b.writeUint8(c.length)):c.length<65536&&(b.writeUint8(z),b.writeUint16(c.length));for(var d=0;d<c.length;d++)R(c[d],b)}else c&&Q(c,b)}var S,T;function U(a){var b=new Map();for(var c=0;c<a.length;c++)b.set(a[c],c);return b}function V(a,b){if(a===""){b.writeUint8(C);b.writeUint8(0);return}S==null&&(S=U(d("WAWapDict").SINGLE_BYTE_TOKEN));var c=S.get(a);if(c!=null){b.writeUint8(c+1);return}if(T==null){T=[];for(c=0;c<d("WAWapDict").DICTIONARIES.length;++c)T.push(U(d("WAWapDict").DICTIONARIES[c]))}for(c=0;c<T.length;++c){var e=T[c].get(a);if(e!=null){b.writeUint8(ca[c]);b.writeUint8(e);return}}e=d("WABinary").numUtf8Bytes(a);if(e<128){c=/[^0-9.-]+?/;var f=/[^0-9A-F]+?/;if(!c.exec(a)){ja(a,F,b);return}else if(!f.exec(a)){ja(a,B,b);return}}la(e,b);b.writeString(a)}function ja(a,b,d){var e=a.length%2===1;d.writeUint8(b);var f=Math.ceil(a.length/2);e&&(f|=ba);d.writeUint8(f);e=0;for(f=0;f<a.length;f++){var g=a.charCodeAt(f),h=null;48<=g&&g<=57?h=g-48:b===F?g===45?h=10:g===46&&(h=11):b===B&&(65<=g&&g<=70&&(h=g-55));if(h==null)throw c("WAErr")("Cannot nibble encode "+g);else f%2===0?(e=h<<4,f===a.length-1&&(e|=15,d.writeUint8(e))):(e|=h,d.writeUint8(e))}}function ka(a,b){la(a.length,b),b.writeByteArray(a)}function la(a,b){if(a<256)b.writeUint8(C),b.writeUint8(a);else if(a<1048576)b.writeUint8(D),b.writeUint8(a>>>16&255),b.writeUint8(a>>>8&255),b.writeUint8(a&255);else if(a<4294967296)b.writeUint8(E),b.writeUint32(a);else throw c("WAErr")("Binary with length "+a+" is too big for WAP protocol")}function ma(a,b){a=new(d("WABinary").Binary)(a);var c=a.readUint8();c=c&p;if(c){d("WALogger").LOG(k());return b(a.readByteArray()).then(function(a){return X(new(d("WABinary").Binary)(a))})}return Promise.resolve(X(a))}function na(a){a=new(d("WABinary").Binary)(a);var b=a.readUint8();b=b&p;if(b)throw c("WAErr")("Cannot pass compressed stanza to decodeStanzaDebug");return X(a)}function W(a,b){var e=a.readUint8();if(e===q)return null;if(e===y)return oa(a,a.readUint8());if(e===z)return oa(a,a.readUint16());if(e===C){var f=a.readUint8();return Z(a,f,b)}if(e===D){f=a.readUint8();var g=a.readUint8(),h=a.readUint8();f=((f&15)<<16)+(g<<8)+h;return Z(a,f,b)}if(e===E){g=a.readUint32();return Z(a,g,b)}if(e===A)return qa(a);if(e===w)return ra(a);if(e===v)return sa(a);if(e===x)return ta(a);if(e===F){h=a.readUint8();f=h>>>7;g=h&127;return ua(a,da,f,g)}if(e===B){b=a.readUint8();h=b>>>7;f=b&127;return ua(a,ea,h,f)}if(e<=0||e>=240)throw c("WAErr")("Unable to decode WAP buffer");if(e>=r&&e<=u){g=e-r;b=d("WAWapDict").DICTIONARIES[g];if(b===void 0)throw c("WAErr")("Missing WAP dictionary "+g);h=a.readUint8();f=b[h];if(f===void 0)throw c("WAErr")("Invalid value index "+h+" in dict "+g);return f}a=d("WAWapDict").SINGLE_BYTE_TOKEN[e-1];if(a===void 0)throw c("WAErr")("Undefined token with index "+e);return a}function oa(a,b){var c=[];for(var d=0;d<b;d++)c.push(X(a));return c}function X(a){var b=a.readUint8(),e;if(b===y)e=a.readUint8();else if(b===z)e=a.readUint16();else throw c("WAErr")("Failed to decode node since type byte "+String(b)+" is invalid");b=void 0;var f=null;if(e===0)throw c("WAErr")("Failed to decode node, list cannot be empty");var g=Y(a);e-=1;while(e>1){b||(b={});var h=Y(a),i=W(a,!0);b[h]=i;e-=2}e===1&&(f=W(a,!1),f instanceof d("WAWapJid").WapJid&&(f=String(f)),typeof f==="string"&&(f=ha.encode(f)));return new O(g,b,f)}function Y(a){a=W(a,!0);if(typeof a!=="string"){d("WALogger").DEV(j(),String(a));throw c("WAErr")("WAWap:decodeString got invalid value, string expected")}return a}function pa(a){a=W(a,!0);if(a!=null&&typeof a!=="string"){d("WALogger").DEV(i(),String(a));throw c("WAErr")("WAWap:decodeNullableString got invalid value, string expected")}return a}function qa(a){var b=pa(a);a=Y(a);return d("WAWapJid").WapJid.create(b,a)}function ra(a){var b=Y(a),c=a.readUint16();Y(a);return d("WAWapJid").WapJid.createFbJid(b,c)}function sa(a){var b=Y(a),c=a.readUint16(),e=a.readUint16();Y(a);return d("WAWapJid").WapJid.createInteropJid(b,c,e)}function ta(a){var b=null,e=a.readUint8();if(e===0)b=d("WAWapJid").DomainType.WHATSAPP;else if(e===1)b=d("WAWapJid").DomainType.LID;else if((1&e)===0&&(128&e)!==0)b=d("WAWapJid").DomainType.HOSTED;else if(e===129)b=d("WAWapJid").DomainType.HOSTED_LID;else throw c("WAErr")("decodeJidU - Invalid domain type encoding "+e);e=a.readUint8();a=Y(a);return d("WAWapJid").WapJid.createJidU(a,b,e)}function Z(a,b,c){c===void 0&&(c=!1);if(c)return a.readString(b);else return a.readByteArray(b)}function ua(a,b,c,d){d=new Array(d*2-c);for(var e=0;e<d.length-1;e+=2){var f=a.readUint8();d[e]=b[f>>>4];d[e+1]=b[f&15]}if(c){f=a.readUint8();d[d.length-1]=b[f>>>4]}return d.join("")}function va(){if(!G){var a=new Uint16Array(2);d("WACryptoDependencies").getCrypto().getRandomValues(a);G=String(a[0])+"."+String(a[1])+"-"}return""+G+fa++}function wa(a){switch(a.type){case"group":return a.groupJid;case"status":return d("WAJids").STATUS_JID;case"device":return a.deviceJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;default:a.type;return a.broadcastJid}}function xa(a){switch(a.type){case"group":return a.author;case"status":return a.author;case"broadcast":return a.author;default:a.type;return null}}function ya(a){return a.type==="status"||a.type==="group"||a.type==="broadcast"?$(a.author):H}function za(a){return $(wa(a))}function $(a){var b=d("WAJids").validateDomainJid(a);if(b!=null)return Aa(b);b=a.split("@");a=b[0];b=b[1];var e=null;if((b===aa||b===l||b===n||b===m||b===o||b===d("WAJids").HOSTED_LID_SUFFIX)&&a.indexOf(":")!==-1){var f=a.split(":");a=f[0];f=f[1];e=parseInt(f,10)}if(b===n){f=a.split("-");var g=f[0];f=f[1];return d("WAWapJid").WapJid.createInteropJid(f,e,parseInt(g,10))}else if(b===l)return d("WAWapJid").WapJid.createFbJid(a,e);f=null;if(b===m)f=d("WAWapJid").DomainType.LID;else if(b===o){if(e!==99)throw c("WAErr")("wid unexpected deviceId");f=d("WAWapJid").DomainType.HOSTED}else if(b===d("WAJids").HOSTED_LID_SUFFIX){if(e!==99)throw c("WAErr")("lid invalid deviceId");f=d("WAWapJid").DomainType.HOSTED_LID}else f=d("WAWapJid").DomainType.WHATSAPP;return e!=null&&e!==0?d("WAWapJid").WapJid.createJidU(a,f,e):d("WAWapJid").WapJid.create(a,b)}function Aa(a){if(a==="s.whatsapp.net")return J;else if(a==="g.us")return I;else if(a==="newsletter")return K;else if(a==="call")return L;else return c("WAAssertUnreachable")(a)}function Ba(a){return $(a)}function Ca(a){return $(a)}function Da(a){return $(a)}function Ea(a){return $(a)}function Fa(a){return $(a)}function Ga(a){return $(a)}function Ha(a){if(a.jidType==="phoneDevice")return $(a.deviceJid);else if(a.jidType==="msgrDevice")return $(a.deviceJid);else if(a.jidType==="lidDevice")return $(a.deviceJid);else if(a.jidType==="phoneUser")return $(a.userJid);else if(a.jidType==="msgrUser")return $(a.userJid);else if(a.jidType==="lidUser")return $(a.userJid);else if(a.jidType==="group")return $(a.groupJid);else if(a.jidType==="status")return $(a.statusJid);else if(a.jidType==="call")return $(a.callJid);else if(a.jidType==="interopDevice")return $(a.deviceJid);else if(a.jidType==="interopUser")return $(a.userJid);else if(a.jidType==="newsletter")return $(a.newsletterJid);else if(a.jidType==="hosted")return $(a.hostedDeviceJid);else if(a.jidType==="hostedLid")return $(a.hostedLidDeviceJid);else if(a.jidType==="bot")return $(a.userJid);else{a.jidType;return $(a.broadcastJid)}}function Ia(a){return a}function Ja(a){return a.toString()}function Ka(a){return a}function La(a){return a==null?H:a}function Ma(a){return a.toString()}function Na(a){return d("WALongInt").longIntToDecimalString(a)}function Oa(a,b){b===void 0&&(b=4);a=a;var c=new Uint8Array(b);for(b=b-1;b>=0;b--)c[b]=a&255,a>>>=8;return c}g.DROP_ATTR=H;g.G_US=I;g.S_WHATSAPP_NET=J;g.STATUS_BROADCAST=t;g.NEWSLETTER=K;g.HOSTED=h;g.HOSTED_LID=ga;g.CALL=L;g.enableXMLFormat=a;g.WapNode=O;g.makeWapNode=b;g.wap=s;g.decodeAsString=e;g.makeStanza=P;g.encodeStanza=f;g.decodeStanza=ma;g.decodeStanzaDebug=na;g.generateId=va;g.extractToJid=wa;g.extractParticipantJid=xa;g.PARTICIPANT_JID=ya;g.TO_JID=za;g.JID=$;g.DOMAIN_JID=Aa;g.USER_JID=Ba;g.DEVICE_JID=Ca;g.GROUP_JID=Da;g.BROADCAST_JID=Ea;g.CALL_JID=Fa;g.NEWSLETTER_JID=Ga;g.TO_WAP_JID=Ha;g.STANZA_ID=Ia;g.SMAX_ID=Ja;g.CUSTOM_STRING=Ka;g.MAYBE_CUSTOM_STRING=La;g.INT=Ma;g.LONG_INT=Na;g.BIG_ENDIAN_CONTENT=Oa}),98);
__d("WAParsableWapNode",["WABinary","WAErr","WAJids","WALogger","WALongInt","WAParsableXmlNode","WASignalKeys","WATimeUtils","WAWap","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""]);i=function(){return a};return a}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"XmppParsingFailure: "+a+": "+c)||this;d.name="XmppParsingFailure";d.parser=a;d.reason=c;return d}var c=a.prototype;c.toString=function(){return"XmppParsingFailure: "+this.parser+": "+this.reason};return a}(babelHelpers.wrapNativeSuper(Error));a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){return a.call(this,b,c)||this}var e=b.prototype;e.assertFromServer=function(){var a=this.attrString("from");a!==d("WAJids").WA_SERVER_JID_SUFFIX&&this["throw"]('to have "from"="s.whatsapp.net", but instead has "'+a+'"')};e.attrUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.userJid==null?this["throw"]('to have "'+a+'"={UserJid}, but instead has "'+b+'"'):c.userJid};e.attrPhoneUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="phoneUser"?c.userJid:this["throw"]('to have "'+a+'"={PhoneUserJid}, but instead has "'+b+'"')};e.attrLidUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="lidUser"?c.userJid:this["throw"]('to have "'+a+'"={LidUserJid}, but instead has "'+b+'"')};e.maybeAttrUserJid=function(a){return this.hasAttr(a)?this.attrUserJid(a):null};e.maybeAttrPhoneUserJid=function(a){return this.hasAttr(a)?this.attrPhoneUserJid(a):null};e.maybeAttrLidUserJid=function(a){return this.hasAttr(a)?this.attrLidUserJid(a):null};e.attrGroupJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.groupJid==null?this["throw"]('to have "'+a+'"={GroupJid}, but instead has "'+b+'"'):c.groupJid};e.maybeAttrGroupJid=function(a){return this.hasAttr(a)?this.attrGroupJid(a):null};e.attrChatJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.userJid!=null)return c.userJid;return c.groupJid!=null?c.groupJid:this["throw"]('to have "'+a+'"={ChatJid}, but instead has "'+b+'"')};e.attrPhoneChatJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="phoneUser")return c.userJid;else if(c.jidType==="group")return c.groupJid;else return this["throw"]('to have "'+a+'"={ChatJid}, but instead has "'+b+'"')};e.attrDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.deviceJid!=null)return c.deviceJid;if(c.userJid!=null)return d("WAJids").defaultDeviceJidForUser(c.userJid);if(c.hostedDeviceJid!=null)return c.hostedDeviceJid;return c.hostedLidDeviceJid!=null?c.hostedLidDeviceJid:this["throw"]('to have "'+a+'"={DeviceJid}, but instead has "'+b+'"')};e.attrPhoneDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="phoneDevice")return c.deviceJid;return c.jidType==="phoneUser"?d("WAJids").defaultPhoneDeviceJidForUser(c.userJid):this["throw"]('to have "'+a+'"={PhoneDeviceJid}, but instead has "'+b+'"')};e.attrLidDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="lidDevice")return c.deviceJid;return c.jidType==="lidUser"?d("WAJids").defaultLidDeviceJidForLidUserJid(c.userJid):this["throw"]('to have "'+a+'"={LidDeviceJid}, but instead has "'+b+'"')};e.attrDeviceId=function(a){a=this.attrInt(a);return d("WAJids").interpretAsDeviceId(a)};e.attrFromJidChat=function(){var a=this.attrJidWithType();switch(a.jidType){case"msgrUser":var b=a.userJid,e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"interopUser":b=a.userJid;e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneUser":b=a.userJid;e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"lidUser":b=a.userJid;e=d("WAJids").defaultLidDeviceJidForLidUserJid(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"msgrDevice":e=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"interopDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"lidDevice":e=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"group":b=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return b==null?this["throw"]("expected to have participant JID for group"):{type:"group",chat:a.groupJid,groupJid:a.groupJid,author:b};case"broadcast":e=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return e==null?this["throw"]("expected to have participant JID for group"):{type:"broadcast",broadcastJid:a.broadcastJid,chat:d("WAJids").extractUserJid(e),author:e};case"hosted":b=a.hostedDeviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"hostedLid":e=a.hostedLidDeviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"call":d("WALogger").ERROR(i(),a.callJid);throw c("WAErr")("ParsableWapNode: attrFromJid() does not support CallJid");default:a.jidType;return this["throw"]("attrFromJidChat should not be used with jid of type "+a.jidType)}};e.attrFromJidPhoneChat=function(){var a=this.attrJidWithType();switch(a.jidType){case"phoneUser":var b=a.userJid,e=d("WAJids").defaultPhoneDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractPhoneUserJid(b),deviceJid:b,author:b};case"group":e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return e==null?this["throw"]("expected to have participant JID for group"):{type:"group",chat:a.groupJid,groupJid:a.groupJid,author:e};case"broadcast":b=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return b==null?this["throw"]("expected to have participant JID for group"):{type:"broadcast",broadcastJid:a.broadcastJid,chat:d("WAJids").extractPhoneUserJid(b),author:b};case"call":d("WALogger").ERROR(h(),a.callJid);throw c("WAErr")("ParsableWapNode: attrFromJid() does not support CallJid");default:a.jidType;return this["throw"]("attrFromJidChat should not be used with jid of type "+a.jidType)}};e.attrFromPhoneJid=function(){var a=this.attrJidWithType();if(a.jidType==="status"){a=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return a==null?this["throw"]("to have participant for status msg"):{type:"status",author:a}}else return this.attrFromJidPhoneChat()};e.attrFromJid=function(){var a=this.attrJidWithType();if(a.jidType==="status"){var b=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return b==null?this["throw"]("to have participant for status msg"):{type:"status",author:b}}if(a.jidType==="newsletter")return{type:"newsletter",newsletterJid:a.newsletterJid};if(a.jidType==="hosted")return{type:"hosted",hostedDeviceJid:a.hostedDeviceJid};return a.jidType==="hostedLid"?{type:"hostedLid",hostedLidDeviceJid:a.hostedLidDeviceJid}:this.attrFromJidChat()};e.attrJidWithType=function(a){a===void 0&&(a="from");var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="unknown"?this["throw"]('to have "'+a+'"={Jid}, but instead has "'+b+'"'):c};e.attrWapJid=function(a){a===void 0&&(a="from");a=this.attrString(a);var b=d("WAJids").interpretAndValidateJid(a);return b.jidType==="unknown"?d("WAWapJid").WapJid.create(null,a):d("WAWap").JID(d("WAJids").extractFromJid(b))};e.attrLongInt=function(a){a=this.attrString(a);return d("WALongInt").decimalStringToLongInt(a)};e.attrTime=function(a){return d("WATimeUtils").castToUnixTime(this.attrInt(a))};e.attrFutureTime=function(a){a=this.attrInt(a);return d("WATimeUtils").futureUnixTime(a)};e.contentString=function(){if(this.hasChildren())return this["throw"]("to have string content, but has children instead");else if(this.hasContent()){var a=new(d("WABinary").Binary)(this.contentBytes());return a.readString(a.size())}else return this["throw"]("to have content")};e.decodeAsString=function(a){return d("WAWap").decodeAsString(a)};e.contentSerializedPubKey=function(){if(this.hasContent())return d("WASignalKeys").serializeIdentity(this.contentBytes());else return this["throw"]("to have content")};e.createParseError=function(a){return new j(this.name(),"expected <"+this.tag()+"> "+a)};e["throw"]=function(a){throw this.createParseError(a)};return b}(d("WAParsableXmlNode").ParsableXmlNode);g.XmppParsingFailure=j;g.ParsableWapNode=a}),98);
__d("WADeprecatedWapParser",["WAErr","WAParsableWapNode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.parse=function(a){a=new(d("WAParsableWapNode").ParsableWapNode)(this.$1,a);try{return{success:this.$2(a)}}catch(a){if(a instanceof d("WAParsableWapNode").XmppParsingFailure)return{error:a};else throw a}};b.parseOrThrow=function(a){a=this.parse(a);if(a.error)throw c("WAErr")(String(a.error));return a.success};return a}();g["default"]=a}),98);
__d("WAAckParser",["WADeprecatedWapParser","WAJids"],(function(a,b,c,d,e,f,g){"use strict";b=new(c("WADeprecatedWapParser"))("ack",function(a){a.assertTag("ack");return{id:a.attrString("id"),ts:a.maybeAttrString("t"),"class":a.attrString("class"),type:a.maybeAttrString("type"),from:a.attrJidWithType(),participant:a.hasAttr("participant")?a.attrDeviceJid("participant"):null,recipient:a.hasAttr("recipient")?a.attrUserJid("recipient"):null}});function a(a,b){return a.id===b.id&&(b["class"]===void 0||a["class"]===b["class"])&&(b.type===void 0||a.type===b.type)&&(b.from===void 0||h(a.from,b.from))&&(b.participant===void 0||a.participant===b.participant)&&(b.recipient===void 0||a.recipient===b.recipient)&&(b.ts===void 0||a.ts===b.ts)}function h(a,b){if(d("WAJids").extractFromJid(a)===b)return!0;if(a.userJid!=null)return d("WAJids").defaultDeviceJidForUser(a.userJid)===b;if(a.deviceJid!=null){a=a.deviceJid;return d("WAJids").extractDeviceId(a)===0&&d("WAJids").extractUserJid(a)===b}return!1}g.AckParser=b;g.ackMatchesTemplate=a;g.fromJidsAreEqual=h}),98);
__d("WAArrayUtils",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("regeneratorRuntime").mark(c);function a(a,b){var c=a.pop();b<a.length&&(a[b]=c)}function c(a,c){var d;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d=0;case 1:if(!(d<a.length)){b.next=7;break}b.next=4;return a.slice(d,d+c);case 4:d+=c;b.next=1;break;case 7:case"end":return b.stop()}},g,this)}f.removeIndexWithoutPreservingOrder=a;f.peekEvery=c}),66);
__d("WAErrors",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=(a=d("WACustomError")).customError("BufferTooLarge",!1);c=a.customError("Disconnected",!1);e=a.customError("Offline",!1,c);f=a.customError("MaxRetries",!1);g.BufferTooLargeError=b;g.Disconnected=c;g.Offline=e;g.MaxRetries=f}),98);
__d("WANotifyConnectionChangeFactory",[],(function(a,b,c,d,e,f){"use strict";var g=15e3;function a(a,b,c){c===void 0&&(c=g);var d={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},e=function(){var a=d.optimismLevel,e=d.connectionStatus;a==="optimist"?d.timeoutID=setTimeout(function(){d.optimismLevel="realist",b(e)},c):b(e)};return function(c){d.connectionStatus=c,c==="disconnected"?e():c==="in_handshake"?e():(c,d.timeoutID!=null&&(clearTimeout(d.timeoutID),d.timeoutID=null),b(c)),a(c)}}f.notifyConnectionChangeFactory=a}),66);
__d("WAPromiseBackoffs",["Promise","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b("Promise")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case"fibonacci":return k(a);case"exponential":return l(a);case"constant":return m(a);case"adjust":return n(a);default:a;throw c("WAErr")("makeTimeFunc unrecognized backoff "+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(h||(h=b("Promise")))(function(b,e){if(c==null?void 0:c.aborted)throw new(d("WAAbortError").AbortError)();var f=setTimeout(g,a);c==null?void 0:c.addEventListener("abort",h);function g(){c==null?void 0:c.removeEventListener("abort",h),b()}function h(){c==null?void 0:c.removeEventListener("abort",h),clearTimeout(f),e(new(d("WAAbortError").AbortError)())}})}function c(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);
__d("WAPromiseRetryLoop",["Promise","WAErr","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);m=function(){return a};return a}a=function(){function a(a){var b=this;this.$2=new(d("WAResolvable").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var e=a.prototype;e.resetTimeoutAfter=function(a){this.$4=Date.now()+a};e.cancelReset=function(){this.$4=null};e.reset=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(m(),this.$1.name);this.$5++;this.$6()};e.start=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(l(),this.$1.name);this.$5!==0&&d("WALogger").ERROR(k());this.$5++;this.$6()};e.$6=function(){var a=this,c=this.$1,e=this.$5,f=d("WAPromiseBackoffs").createTimer(this.$1.timer);f();var g=function b(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var g=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=g+e||a.$4!=null&&a.$4<=Date.now())&&(d("WALogger").LOG(j(),c.name),f=d("WAPromiseBackoffs").createTimer(a.$1.timer));a.$4=null;e=f();d("WALogger").LOG(i(),c.name,e);return d("WAPromiseDelays").delayMs(e).then(b)});return a.$3};this.$3=(h||(h=b("Promise"))).resolve().then(g)};e.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?(h||(h=b("Promise"))).reject(c("WAErr")("PromiseRetryLoop "+this.$1.name+" had promise() called before start()")):(h||(h=b("Promise"))).race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);
__d("WAResultOrError",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function h(a,b){if(b!=null)return{success:!1,error:a,payload:b};else return{success:!1,error:a}}function i(a){return{success:!0,value:a}}function a(a,b){return!a.success?a:i(b(a.value))}function c(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(a);case 2:d=e.sent;if(d.success){e.next=5;break}return e.abrupt("return",d);case 5:return e.abrupt("return",i(c(d.value)));case 6:case"end":return e.stop()}},null,this)}function j(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(a.success){e.next=2;break}return e.abrupt("return",a);case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.value));case 4:d=e.sent;return e.abrupt("return",i(d));case 6:case"end":return e.stop()}},null,this)}function d(a,b){return a.success?i(a.value):h(b(a.error),a.payload)}function k(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.success){e.next=2;break}return e.abrupt("return",i(a.value));case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.error));case 4:d=e.sent;return e.abrupt("return",h(d,a.payload));case 6:case"end":return e.stop()}},null,this)}function e(a,b){return a.success?b(a.value):a}function l(a,c){return a.success?c(a.value):(g||(g=b("Promise"))).resolve(a)}function m(a){return function(b){return j(b,a)}}function n(a){return function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(k(c,a));case 2:case"end":return d.stop()}},null,this)}}f.makeError=h;f.makeResult=i;f.mapResult=a;f.mapAsyncResult=c;f.asyncMapResult=j;f.mapError=d;f.asyncMapError=k;f.chain=e;f.asyncChain=l;f.onResult=m;f.catchError=n}),66);
__d("WASmaxInPingsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={validators:[d("WAJids").validateDomainJid,d("WAJids").validateUserJid],typeName:"DomainJid|UserJid"};g.DOMAINJID_USERJID=a}),98);
__d("WADeepEquals",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===b)return!0;if(!a||!b||typeof a!=="object"&&typeof b!=="object")return!1;var c=Array.isArray(a),d=Array.isArray(b);if(c!==d)return!1;d=!0;if(c){c=a.length;if(c!==b.length)return!1;for(var e=0;d&&e<c;e++)d=g(a[e],b[e]);return d}c=Object.keys(a);for(e=0;d&&e<c.length;e++){var f=c[e];d=b.propertyIsEnumerable(f)&&g(a[f],b[f])}return d&&Object.keys(b).length===c.length}f.deepEqual=g}),66);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a}),66);
__d("WASmaxParseUtils",["WABase64","WABinary","WACryptoUtils","WADeepEquals","WAHasProperty","WAResultOrError","WAStanzaUtils","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAResultOrError").makeResult();function a(a,b){return a.tag!==b?H(a,"to be <"+b+">"):h}function i(a,b){return!I(a,b)?H(a,'to have attribute "'+b+'"'):J(a,a.attrs[b])}function j(a,b,c,e){var f=i(a,b);if(!f.success)return f;c=c(f.value);return c!=null?d("WAResultOrError").makeResult(c):H(a,'to have "'+b+'"={'+e+'}, but instead has "'+f.value+'"')}function k(a,b,c){var e=B(a);if(!e.success)return e;b=b(e.value);return b!=null?d("WAResultOrError").makeResult(b):H(a,"to have "+c+' content, but instead has "'+e.value+'"')}function b(a,b,c){var d=i(a,b);if(!d.success)return d;else if(d.value!==c)return H(a,'to have "'+b+'"="'+c+'", but instead has "'+d.value+'"');return h}function e(a,b){return j(a,b,d("WAStanzaUtils").toStanzaId,"stanzaID")}function l(a,b){return j(a,b,K,"integer")}function f(a,b,c,e){var f=l(a,b);if(!f.success)return f;f=f.value;if(c!==void 0&&f<c)return H(a,'to have "'+b+'"={at least '+c+"} but has value "+f);else if(e!==void 0&&f>e)return H(a,'to have "'+b+'"={at most '+e+"} but has value "+f);return d("WAResultOrError").makeResult(f)}function m(a){var b=a.content;return b instanceof Uint8Array?H(a,"to have children"):d("WAResultOrError").makeResult(b)}function n(a,b){var c=m(a);if(!c.success)return c;c=c.value;if(c==null)return h;var e=null;for(var f=0;f<c.length;f++){var g=c[f];if(g.tag===b){if(e!=null)return H(a,"to have 1 child <"+b+">, but found more than 1");e=g}}return d("WAResultOrError").makeResult(e)}function o(a,b,c){a=n(a,b);if(!a.success)return a;return a.value==null?h:c(a.value)}function p(a,b,c){c=o(a,b,c);if(!c.success)return c;c=c.value;return c==null?H(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c)}function q(a,b){var c=n(a,b);if(!c.success)return c;return c.value==null?H(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c.value)}function r(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=[];for(c=0;c<a.value.length;c++){e=f(a.value[c]);if(!e.success)return e;b.push(e.value)}return d("WAResultOrError").makeResult(b)}function s(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=a.value.length;for(c=0;c<b;c++){e=f(a.value[c]);if(!e.success)return e}return d("WAResultOrError").makeResult(b)}function t(a,b,c){b=r(a,b,0,Infinity,c);if(!b.success)return b;for(c=0;c<b.value.length;c++)if(!d("WADeepEquals").deepEqual(b.value[0],b.value[c]))return H(a,"to have homogeneous children, but found two children that are not equal");return b}function u(a,b,c){a=t(a,b,c);return!a.success?a:d("WAResultOrError").makeResult(a.value.length)}function v(a,b,c,d,e){return I(b,c)?a(b,c,d,e):h}function w(a,b,c,e){if(e==null)return h;a=v(a,b,c);if(!a.success)return a;if(a.value===e)return d("WAResultOrError").makeResult(e);return a.value==null?h:H(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function x(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?d("WAResultOrError").makeResult(e):H(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function y(a,b,c){a=a(b);if(!a.success)return a;return a.value===c?d("WAResultOrError").makeResult(c):H(b,'to have content "'+c+'", but instead has "'+a.value+'"')}function z(a,b,c){var e=i(a,b);if(!e.success)return e;var f=c[e.value];if(f!=null)return d("WAResultOrError").makeResult(f);f=Object.values(c).join("|");return H(a,'to have "'+b+'"={'+f+'}, but instead has "'+e.value+'"')}function A(a,b){var c=B(a);if(!c.success)return c;var e=b[c.value];if(e!=null)return d("WAResultOrError").makeResult(e);e=Object.values(b).join("|");return H(a,'to have content "'+e+'", but instead has "'+c.value+'"')}function B(a){var b=C(a);if(!b.success)return b;else try{b=new(d("WABinary").Binary)(b.value);b=b.readString(b.size());return d("WAResultOrError").makeResult(b)}catch(b){return H(a,"to have string content, but run into decoding error: "+b.message)}}function C(a){var b=a.content;if(b==null)return H(a,"to have content");else if(Array.isArray(b))return H(a,"to have content, but has children instead");else return d("WAResultOrError").makeResult(b)}function D(a,b){var c=C(a);if(!c.success)return c;return d("WACryptoUtils").uint8ArraysEqual(c.value,b)?d("WAResultOrError").makeResult(b):H(a,'to have content ":binary:'+d("WABase64").encodeB64(b)+'", but instead has ":binary:'+d("WABase64").encodeB64(c.value)+'"')}function E(a,b,c){var e=a.content;if(e==null)if(b===void 0||b<1)return d("WAResultOrError").makeResult(new Uint8Array([]));else return H(a,"to have content");else if(Array.isArray(e))return H(a,"to have content, but has children instead");else{var f=e.length;if(b!==void 0&&f<b)return H(a,"to have binary content at least "+b+" bytes but has "+f+" bytes");else if(c!==void 0&&f>c)return H(a,"to have binary content at most "+c+" bytes but has "+f+" bytes");return d("WAResultOrError").makeResult(e)}}function F(a){return k(a,K,"integer")}function G(a){return a}function H(a,b){return d("WAResultOrError").makeError("expected <"+a.tag+">: "+b)}function I(a,b){return c("WAHasProperty")(a.attrs,b)}function J(a,b){if(b instanceof d("WAWapJid").WapJid)return d("WAResultOrError").makeResult(b.toString());return typeof b==="string"?d("WAResultOrError").makeResult(b):H(a,"decodeAsString: attribute is "+typeof b+" not a string: "+String(b))}function K(a){a=parseInt(a,10);return Number.isNaN(a)?null:a}function L(a,b,c,e){var f=m(a);if(!f.success)return f;f=f.value;if(f==null)if(c!==0)return H(a,"to have at least "+c+" <"+b+"> children, but found 0");else return d("WAResultOrError").makeResult([]);var g=[];for(var h=0;h<f.length;h++){var i=f[h];i.tag===b&&g.push(i)}i=g.length;if(i<c)return H(a,"to have at least "+c+" <"+b+"> children, but found "+i);else if(i>e)return H(a,"to have at most "+e+" <"+b+"> children, but found "+i);return d("WAResultOrError").makeResult(g)}var M={};function N(a,b,c){var d=b.map(function(a,b){return a+": "+c[b].error});return H(a,["to match any of following mixins: "+b.join(", ")+", but all mixins failed."].concat(d).join(" "))}g.voidSuccess=h;g.assertTag=a;g.attrString=i;g.attrValidate=j;g.contentValidate=k;g.assertAttr=b;g.attrStanzaId=e;g.attrInt=l;g.attrIntRange=f;g.maybeChildren=m;g.optionalChild=n;g.optionalChildWithTag=o;g.childWithTag=p;g.flattenedChildWithTag=q;g.mapChildrenWithTag=r;g.countChildrenWithTag=s;g.mapHomogeneousChildrenWithTag=t;g.countHomogeneousChildrenWithTag=u;g.optional=v;g.optionalLiteral=w;g.literal=x;g.literalContent=y;g.attrStringEnum=z;g.contentStringEnum=A;g.contentString=B;g.contentBytes=C;g.contentLiteralBytes=D;g.contentBytesRange=E;g.contentInt=F;g.identity=G;g.errorMessage=H;g.emptyObject=M;g.errorMixinDisjunction=N}),98);
__d("WASmaxParseJid",["WAJids","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateUserJid,"UserJid")}function b(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDeviceJid,"DeviceJid")}function c(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateGroupJid,"GroupJid")}function e(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateCallJid,"CallJid")}function f(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDomainJid,"DomainJid")}function h(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateBroadcastJid,"BroadcastJid")}function i(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateStatusJid,"StatusJid")}function j(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateNewsletterJid,"NewsletterJid")}function k(a,b,c){var e=d("WASmaxParseUtils").attrString(a,b);if(!e.success)return e;var f=c.validators;c=c.typeName;for(var g=0;g<f.length;g++){var h=f[g](e.value);if(h!=null)return d("WAResultOrError").makeResult(h)}return d("WASmaxParseUtils").errorMessage(a,'to have "'+b+'"={'+c+'}, but instead has "'+e.value+'"')}function l(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function m(a,b,c,e){a=d("WASmaxParseUtils").optional(a,b,c);if(!a.success)return a;return a.value==null||a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}g.attrUserJid=a;g.attrDeviceJid=b;g.attrGroupJid=c;g.attrCallJid=e;g.attrDomainJid=f;g.attrBroadcastJid=h;g.attrStatusJid=i;g.attrNewsletterJid=j;g.attrJidEnum=k;g.literalJid=l;g.optionalLiteralJid=m}),98);
__d("WASmaxParseReference",["WAHasProperty","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){b=j(b,c);if(!b.success)return l(b);a=a(b.value,c[c.length-1],d,e);return!a.success?l(a):a}function a(a,b,c,e,f){return k(b,c)?h(a,b,c,e,f):d("WASmaxParseUtils").voidSuccess}function i(a,b){return h(d("WASmaxParseUtils").attrString,a,b)}function b(a,b){return k(a,b)?i(a,b):d("WASmaxParseUtils").voidSuccess}function e(a,b){a=j(a,b);if(!a.success)return l(a);b=d("WASmaxParseUtils").contentString(a.value);return!b.success?l(b):b}function j(a,b){var c=b.length;a=a;for(var e=0;e<c-1;e++){var f=b[e];f=d("WASmaxParseUtils").flattenedChildWithTag(a,f);if(!f.success)return f;a=f.value}return d("WAResultOrError").makeResult(a)}function k(a,b){a=j(a,b);return a.success&&c("WAHasProperty")(a.value.attrs,b[b.length-1])}function l(a){return d("WAResultOrError").makeError("in the reference, "+a.error)}g.attrFromReference=h;g.optionalAttrFromReference=a;g.attrStringFromReference=i;g.optionalAttrStringFromReference=b;g.contentStringFromReference=e}),98);
__d("WASmaxInPingsClientResponseServerResponse",["WAResultOrError","WASmaxInPingsEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInPingsEnums").DOMAINJID_USERJID);if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"t");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:e.value,t:b.value})}g.parseClientResponseServerResponse=a}),98);
__d("WASmaxJsx",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";g.smax=d("WAWap").wap}),98);
__d("WASmaxMixins",["WAArrayBufferUtils","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";var h="smax$any";function i(a,b){j(a,b);k(a,b);b.content instanceof Uint8Array?m(a,b.content):b.content!=null&&n(a,b.content);return a}function a(a,b,c,d){return c!=null?a(b,c,d):b}function j(a,b){a=a.tag;b=b.tag;if(b===h)return;if(a!==b)throw new Error("tag mismatch: "+a+" != "+b)}function k(a,b){var c=a.attrs,d=b.attrs;Object.keys(d).forEach(function(a){var b=d[a],e=c[a];if(b!=null&&e!=null){if(l(b,e))return;throw new Error("conflict for key: "+a)}c[a]=b})}function l(a,b){if(typeof a==="string"&&typeof b==="string")return a===b;return a instanceof d("WAWapJid").WapJid&&b instanceof d("WAWapJid").WapJid?a.toString()===b.toString():!1}function m(a,b){var c=a.content;if(c instanceof Uint8Array){if(!d("WAArrayBufferUtils").uint8ArraysEqualUNSAFE(c,b))throw new Error("elementValue mismatch: bytes dose not equal");return}if(c!=null)throw new Error("elementValue mismatch: destination has children");a.content=b}function n(a,b){var c=a.content;if(c instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(c==null||c.length===0){a.content=b;return}if(!o(c,b))throw new Error("children mismatch: child counts are not compatible");var d=[],e=Array.from(c);b.forEach(function(a){var b=e.findIndex(function(b){return b.tag===a.tag});if(b===-1)d.push(a);else{b=e.splice(b,1);b=i(b[0],a);d.push(b)}});e.forEach(function(a){return d.push(a)});a.content=d}function o(a,b){b=p(b);a=p(a);var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e];e=a[e];if(f!=null&&e!=null&&f!==e)return!1}return!0}function p(a){return a.reduce(function(a,b){b=b.tag;var c=a[b];a[b]=c==null?1:c+1;return a},{})}g.mergeStanzas=i;g.optionalMerge=a}),98);
__d("WASmaxOutPingsClientWellFormedToMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientWellFormedToMixin=a}),98);
__d("WASmaxOutPingsClientRequest",["WASmaxJsx","WASmaxOutPingsClientWellFormedToMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutPingsClientWellFormedToMixin").mergeClientWellFormedToMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get",xmlns:"w:p"}));return a}g.makeClientRequest=a}),98);
__d("WAComms",["Promise","WAArrayUtils","WAErr","WAErrors","WALogger","WANotifyConnectionChangeFactory","WAPromiseRetryLoop","WAResolvable","WAResultOrError","WAShiftTimer","WASmaxInPingsClientResponseServerResponse","WASmaxOutPingsClientRequest","WASmaxParseUtils","WATimeUtils","WAWap","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocket called"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration failed ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket disconnected while in noise handshake"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake using treasureHunt strategy"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opened"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opening"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] maybeResetSocketLoop"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPreventRetry called"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAck: unrecognized ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] job response is CLOSE_SOCKET"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Receiving ---\n",""],["--- Receiving ---\\n",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failure parsing stanza!"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms.startHandlingRequests"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["castStanza error ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["castStanza async error ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Sending ---\n",""],["--- Sending ---\\n",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\n",""],["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\n",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched. We return mock response directly."]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Receive (via SMAX+E2E) ---\n",""],["--- Receive (via SMAX+E2E) ---\\n",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched:\n",". We return mock response directly."],["Dropping stanza since onBeforeCastStanza matched:\\n",". We return mock response directly."]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will resend stanza when socket opens"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] No stanzaId in ping request stanza"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing ping still pending"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing when socket dead"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," expired"]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq"]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq with id ",""]);M=function(){return a};return a}var N=null,O=null,P=1,Q=0,R=function(){function a(a,c,e){var f=this;this.nextSocketId=1;this.pendingIqs=new Map();this.ackHandlers=[];this.pendingSmaxStanzas=new Map();this.$2=new(d("WAResolvable").Resolvable)();this.socketAbortController=null;this.activePing=null;this.$3=new Set();this.socketId=Q;this.socket=null;this.softCloseSocket=null;this.handleStanza=function(a,b,c){var e=d("WASmaxParseUtils").attrString(a,"id");if(e.success&&a.tag!=="receipt"){e=e.value;var g=f.pendingSmaxStanzas.get(e);if(g){f.pendingSmaxStanzas["delete"](e);g.resolve(a);f.maybeScheduleHealthCheck();return"NO_ACK"}}e=$(a);if(e!=null){g=f.pendingIqs.get(e);g?(f.pendingIqs["delete"](e),g.resolve(a),f.maybeScheduleHealthCheck()):(d("WALogger").WARN(M(),e),d("WALogger").ERROR(L()))}else if(a.tag==="ack")f.handleAck(a);else return a.tag==="failure"&&f.config.shouldBlockReceivingUntilSuccess?f.$1(a,b,c):f.$2.promise.then(function(){return f.$1(a,b,c)});return"NO_ACK"};this.healthCheckTimer=new(d("WAShiftTimer").ShiftTimer)(function(){if(!f.socketId)return;f.sendPing()});this.deadSocketTimer=new(d("WAShiftTimer").ShiftTimer)(function(a){if(a!==f.socketId)return;d("WALogger").LOG(K(),a);f.softCloseSocket&&f.softCloseSocket()});this.sendPing=function(){var a,c,e,f,g,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:a=Z("sendPing");if(a.socketId){l.next=4;break}d("WALogger").LOG(J());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 4:if(!(a.activePing&&a.activePing.socketId===a.socketId)){l.next=7;break}d("WALogger").LOG(I());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 7:a.activePing&&a.activePing.handler.resolve();c=d("WASmaxOutPingsClientRequest").makeClientRequest();e=c.attrs.id;if(!(typeof e!=="string")){l.next=13;break}d("WALogger").ERROR(H());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 13:f=new(d("WAResolvable").Resolvable)();a.activePing={socketId:a.socketId,stanzaId:e,handler:f};a.callStanza(c);l.next=18;return b("regeneratorRuntime").awrap(f.promise);case 18:g=l.sent,g&&(i=d("WASmaxInPingsClientResponseServerResponse").parseClientResponseServerResponse(g,c),i.success&&(j=d("WATimeUtils").castToUnixTime(i.value.t),k=Math.round(Date.now()/1e3-j),a.config.handlers.onClockSkewUpdate==null?void 0:a.config.handlers.onClockSkewUpdate(k)));case 20:case"end":return l.stop()}},null,this)};this.$1=a;this.onConnectionChange=d("WANotifyConnectionChangeFactory").notifyConnectionChangeFactory((a=c.handlers.onConnectionChange)!=null?a:function(){},(a=c.handlers.onOptimisticConnectionChange)!=null?a:function(){});this.gzipInflate=e;this.config=c;this.socketLoop=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"MainSocketLoop",code:W,timer:(a=c.socketReconnectBackoffAlgo)!=null?a:{jitter:.1,max:c.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4})}var e=a.prototype;e.filterPending=function(a){var b=[];function c(c){a(c)&&b.push(c)}this.pendingIqs.forEach(c);this.ackHandlers.forEach(c);this.pendingSmaxStanzas.forEach(c);return b};e.sendPendingStanza=function(a){a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.callStanza(a.stanza)};e.maybeSendPendingStanza=function(a){if(a.attempt>=this.config.maxRetries)this.config.handlers.onDropStanza==null?void 0:this.config.handlers.onDropStanza(a),a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.removeHandler(a,"max-retries");else if(this.socket){a.attempt+=1;this.sendPendingStanza(a);return}else d("WALogger").LOG(G())};e.callStanzaAsync=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.callStanza(a,c));case 2:d=e.sent;return e.abrupt("return",d);case 4:case"end":return e.stop()}},null,this)};e.callStanza=function(a,b){a=this.castStanza(a,b);this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId);this.healthCheckTimer.cancel();return a};e.castStanzaAsync=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.castStanza(a));case 2:c=d.sent;return d.abrupt("return",c);case 4:case"end":return d.stop()}},null,this)};e.castStanza=function(a,c){var e=this;try{var f=this.config.handlers.onBeforeCastStanzaForE2E==null?void 0:this.config.handlers.onBeforeCastStanzaForE2E(a,c);if(f!=null){d("WALogger").DEV_XMPP(F(),a);d("WALogger").DEV_XMPP(E(),f);d("WALogger").ERROR(D());if(Array.isArray(f))return(h||(h=b("Promise"))).all(f.map(function(a){return(h||(h=b("Promise"))).resolve(e.handleStanza(a,e.socketId,Q))}));else{this.handleStanza(f,this.socketId,Q);return(h||(h=b("Promise"))).resolve()}}}catch(a){d("WALogger").DEV_XMPP(C(),a)}f=this.socketOrThrow("castStanza");try{d("WALogger").DEV_XMPP(B(),a);return f.sendFrame(d("WAWap").encodeStanza(a)).then(function(){e.config.handlers.onCastStanza==null?void 0:e.config.handlers.onCastStanza(a,c)})["catch"](function(a){d("WALogger").ERROR(A(),a).devConsole(a);if(a instanceof d("WAErrors").BufferTooLargeError)return(h||(h=b("Promise"))).reject(a)})}catch(a){d("WALogger").ERROR(z(),a).devConsole(a)}return(h||(h=b("Promise"))).resolve()};e.socketOrThrow=function(a){var b=this.socket;if(b)return b;throw c("WAErr")("Comms."+a+" called while no socket")};e.startHandlingRequests=function(){d("WALogger").LOG(y());this.$2.resolve();return this.$2.promise.then(function(){})};e.parseAndHandleStanza=function(a,b){var c=this;a===this.socketId&&(this.deadSocketTimer.cancel(),O&&(O.resolve(),O=null));var e=d("WAWap").decodeStanza(b,this.gzipInflate)["catch"](function(a){d("WALogger").ERROR(x()).devConsole(b);throw a}).then(function(e){d("WALogger").DEV_XMPP(w(),e);c.config.handlers.onHandleStanza==null?void 0:c.config.handlers.onHandleStanza(e,a,b.byteLength);var f=c.activePing;if(f&&f.socketId===a&&f.stanzaId===$(e)){c.activePing=null;f.handler.resolve(e);c.maybeScheduleHealthCheck();return"NO_ACK"}return c.handleStanza(e,a,b.byteLength)}).then(function(b){if(a!==c.socketId)return;if(b==="CLOSE_SOCKET"){d("WALogger").LOG(v());var e=c.socket;e&&e.close()}else b==="NO_ACK"||c.castStanza(b);return"NO_ACK"});this.$3.add(e);e["finally"](function(){return void c.$3["delete"](e)})};e.handleAck=function(a){var b=this.ackHandlers,c=-1,e=null;while(!e&&++c<b.length)e=b[c].parseAndTest(a);if(e){var f=b[c];d("WAArrayUtils").removeIndexWithoutPreservingOrder(b,c);this.config.handlers.onHandleAck==null?void 0:this.config.handlers.onHandleAck(a);f.resolve(e);this.maybeScheduleHealthCheck()}else d("WALogger").WARN(u(),a)};e.removeHandler=function(a,c){c===void 0&&(c="disconnect");if(a.type==="iq"||a.type==="smax"){var e=a.stanza.attrs.id;if(!e||typeof e!=="string")return;if(a.type==="iq"&&!this.pendingIqs["delete"](e)||a.type==="smax"&&!this.pendingSmaxStanzas["delete"](e))return}else{a.type;e=this.ackHandlers.indexOf(a);if(e===-1)return;d("WAArrayUtils").removeIndexWithoutPreservingOrder(this.ackHandlers,e)}c==="disconnect"?a.resolve((h||(h=b("Promise"))).reject(new(d("WAErrors").Disconnected)())):a.resolve((h||(h=b("Promise"))).reject(new(d("WAErrors").MaxRetries)()))};e.maybeScheduleHealthCheck=function(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;var a=this.config.healthCheckInterval;a=Math.ceil(a*1e3*(1+Math.random()));this.healthCheckTimer.onOrBefore(a)};return a}();function a(){return N}function e(a,b,c,d){d===void 0&&(d=!0);if(N)return;N=new R(a,b,c);d&&setTimeout(T,0)}function f(){var a=Z("stopComms");a.socketLoop.endWithValue();a.socket&&X();N=null}function S(){var a=Z("closeSocketAndPreventRetry");a.socketLoop.endWithValue();a.socket&&(d("WALogger").LOG(t()),X())}function T(){Z("openSocketLoop").socketLoop.start()}function U(){d("WALogger").LOG(s()),V()||Z("maybeResetSocketLoop").socketLoop.reset()}function aa(){Z("forceResetSocketLoop").socketLoop.reset()}function ba(){var a,b=Z("socketAbortController");(a=b.socketAbortController)==null?void 0:a.abort();b.softCloseSocket==null?void 0:b.softCloseSocket()}function V(){var a;return!!((a=N)==null?void 0:a.socket)}function W(){var a=Z("socketLoopIteration"),b=a.nextSocketId++;d("WALogger").LOG(r(),b);var c=function(){a.onConnectionChange("in_handshake")};a.config.handlers.onSocketLoopIteration==null?void 0:a.config.handlers.onSocketLoopIteration(a.socketAbortController);typeof AbortController==="function"&&(a.socketAbortController=new AbortController());return a.config.openChatSocket(c,(c=a.socketAbortController)==null?void 0:c.signal).then(d("WAResultOrError").onResult(function(c){a.config.handlers.onSocketOpen==null?void 0:a.config.handlers.onSocketOpen();var e=new(d("WAResolvable").Resolvable)();d("WALogger").LOG(q(),b);a.socketId=b;a.socket=c;a.softCloseSocket=function(){a.softCloseSocket=null,a.socket&&a.config.shouldCloseStaleSocket&&(X(),a.socket=null),e.resolve()};a.socketLoop.resetTimeoutAfter(1e4);a.deadSocketTimer.cancel();a.maybeScheduleHealthCheck();c.setOnFrame(function(c){return a.parseAndHandleStanza(b,c)});c.setOnClose(function(){d("WALogger").LOG(p(),b);a.activePing&&b===a.activePing.socketId&&(a.activePing.handler.resolve(),a.activePing=null);a.filterPending(function(a){return a.attachedToSocketId===b}).forEach(function(b){return void a.removeHandler(b)});if(b!==a.socketId)return;a.socketId=Q;a.socket=null;a.onConnectionChange("disconnected");a.config.handlers.onDisconnect==null?void 0:a.config.handlers.onDisconnect();e.resolve()});a.onConnectionChange("connected");a.config.handlers.onConnect==null?void 0:a.config.handlers.onConnect();a.filterPending(function(a){return!a.attachedToSocketId}).sort(function(a,b){return a.orderedId-b.orderedId}).forEach(function(b){switch(b.type){case"smax":case"iq":a.maybeSendPendingStanza(b);break;case"ack":a.callStanza(b.stanza);break;default:b.type;break}});return e.promise})).then(d("WAResultOrError").catchError(function(a){switch(a){case"max-hunters":d("WALogger").WARN(o());break;case"disconnected":d("WALogger").WARN(n());break;default:a;return}}))["catch"](function(a){a instanceof d("WAErrors").Disconnected?d("WALogger").LOG(m()):d("WALogger").ERROR(l(),a).devConsole(a)})}function X(){var a=Z("closeSocket");a.socket&&(d("WALogger").LOG(k(),a.socketId),d("WALogger").LOG(j()),a.socket.close())}function ca(){Z("onStreamErrorReceived").socketLoop.cancelReset()}function da(){Z("waitForConnection").sendPing();O||(O=new(d("WAResolvable").Resolvable)());return O.promise}function ea(a,b){var c=Z("castStanza");c.socket?c.castStanza(a,b):d("WALogger").LOG(i())}function fa(a){var b=Z("castStanza");return b.socketId===a}function Y(a,e,f,g,i){f===void 0&&(f=0);i===void 0&&(i="iq");return new(h||(h=b("Promise")))(function(j){var k=Z("sendIq"),l=a.attrs.id;if(!l||typeof l!=="string")throw c("WAErr")("[comms] sendIq given iq without id: "+String(a));var m=k.socketId;if(e&&!m){j((h||(h=b("Promise"))).reject(new(d("WAErrors").Offline)()));return}var n=function(){var a=i==="iq"?k.pendingIqs.get(l):k.pendingSmaxStanzas.get(l);if(!a){j((h||(h=b("Promise"))).reject(c("WAErr")("[comms] _sendIq unexisting stanza to be cancelled: "+l)));return}k.removeHandler(a)},o=null;if(f>0){var p=setTimeout(n,f*1e3);o=function(){clearTimeout(p)}}if(g!=null)if(g.aborted){j((h||(h=b("Promise"))).reject(new(d("WAErrors").Disconnected)()));return}else g.addEventListener("abort",n),o=function(){g.removeEventListener("abort",n)};m={resolve:j,stanza:a,attachedToSocketId:e?m:Q,orderedId:P++,attempt:0,cleanup:o};if(i==="iq"){o=babelHelpers["extends"]({type:i},m);k.pendingIqs.set(l,o);k.config.handlers.onSendIq==null?void 0:k.config.handlers.onSendIq(a);k.maybeSendPendingStanza(o)}else{i;o=babelHelpers["extends"]({type:i},m);k.pendingSmaxStanzas.set(l,o);k.maybeSendPendingStanza(o)}})}function ga(a,b){var c,d;c=(c=b==null?void 0:b.withoutRetry)!=null?c:!1;d=(d=b==null?void 0:b.timeoutSeconds)!=null?d:0;b=(b=b==null?void 0:b.signal)!=null?b:null;return Y(a,c,d,b,"smax")}function ha(){var a=Z("sendPing");return a.sendPing()}function ia(){return Z("startHandlingRequests").startHandlingRequests()}function ja(){N&&N.deadSocketTimer.cancel()}function Z(a){if(N)return N;throw c("WAErr")("[comms] "+a+" called before startComms")}function $(a){if(a.tag==="iq"){var b=a.attrs.type;if(b==="result"||b==="error")return d("WAWap").decodeAsString(a.attrs.id)||null}return null}function ka(){return P++}function la(){N=null,O=new(d("WAResolvable").Resolvable)(),P=1}g.DEFAULT_SOCKET_ID=Q;g.getComms=a;g.startComms=e;g.stopComms=f;g.closeSocketAndPreventRetry=S;g.openSocketLoop=T;g.maybeResetSocketLoop=U;g.forceResetSocketLoop=aa;g.forceAbortSocketConnection=ba;g.isSocketConnected=V;g.socketLoopIteration=W;g.closeSocket=X;g.onStreamErrorReceived=ca;g.waitForConnection=da;g.castSmaxStanza=ea;g.isActiveSocket=fa;g._sendIq=Y;g.sendSmaxStanza=ga;g.sendPing=ha;g.startHandlingRequests=ia;g.cancelDeadSocketTimer=ja;g.singletonOrThrowIfUninitialized=Z;g.getAndIncrementNextOrderedId=ka;g.resetStateForTests=la}),98);
__d("WAParseIqResponse",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=a.content;if(e&&Array.isArray(e)&&e[0]){e=e[0];if(e.tag==="error"){var f=e.attrs||{},g;c&&(typeof c==="function"?g=c(a):g=c.parseOrThrow(e));c=g;return{success:!1,errorCode:parseInt(f.code,10),errorText:d("WAWap").decodeAsString(f.text)||"",errorType:d("WAWap").decodeAsString(f.type)||"",errorBackoff:parseInt(f.backoff,10),toString:h,customError:c}}}if(typeof b==="function")return{success:!0,result:b(a)};else return{success:!0,result:b.parseOrThrow(a)}}function h(){return"IqError "+this.errorCode+": "+this.errorText}g.parseIqResponse=a}),98);
__d("WADeprecatedSendIq",["Promise","WAAckParser","WAArrayUtils","WAComms","WALogger","WAParseIqResponse"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will send stanza when socket opens"]);i=function(){return a};return a}function a(a,b){return d("WAComms")._sendIq(a,!1).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function c(a,b,c){return d("WAComms")._sendIq(a,!1).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b,c)})}function e(a,b,c){return d("WAComms")._sendIq(a,!1,c).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function f(a,b){return d("WAComms")._sendIq(a,!0).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function j(a,b){return k(a,b).then(function(){})}function k(a,c){return new(h||(h=b("Promise")))(function(e){var f=d("WAComms").singletonOrThrowIfUninitialized("deprecatedSendStanzaAndReturnAck"),g=function(a){var b=d("WAAckParser").AckParser.parse(a);return!b.error&&d("WAAckParser").ackMatchesTemplate(b.success,c)?a:null},j={type:"ack",parseAndTest:g,resolve:e,stanza:a,attachedToSocketId:d("WAComms").DEFAULT_SOCKET_ID,orderedId:d("WAComms").getAndIncrementNextOrderedId()};f.ackHandlers.push(j);if(!f.socket){d("WALogger").LOG(i());return}f.callStanza(a)["catch"](function(a){var c=f.ackHandlers.indexOf(j);if(c===-1)return;d("WAArrayUtils").removeIndexWithoutPreservingOrder(f.ackHandlers,c);j.resolve((h||(h=b("Promise"))).reject(a))})})}function l(a,b){d("WAComms").castSmaxStanza(a,b)}g.deprecatedSendIq=a;g.deprecatedSendIqErrorParser=c;g.deprecatedSendIqIfConnectedWithin=e;g.deprecatedSendIqWithoutRetry=f;g.deprecatedSendStanzaAndWaitForAck=j;g.deprecatedSendStanzaAndReturnAck=k;g.deprecatedCastStanza=l}),98);
__d("WAWebMexRelayEnvironment",["WABinary","WADeprecatedSendIq","WADeprecatedWapParser","WANullthrows","WAWap","WAWebMexLogging","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){var e;b!=null&&(e={query_id:d("WAWap").CUSTOM_STRING(b)});return d("WADeprecatedSendIq").deprecatedSendIq(d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:mex"},new(d("WAWap").WapNode)("query",e,d("WABinary").Binary.build(JSON.stringify(a)).readByteArray())),new(c("WADeprecatedWapParser"))("mexParser",function(a){return new TextDecoder("utf-8").decode(a.child("result").contentBytes())}))}var i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this)||this;d.name="MexIqError";d.code=a;d.message=c;return d}return a}(babelHelpers.wrapNativeSuper(Error)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this)||this;c.name="MexPayloadParsingError";c.error=a;return c}return a}(babelHelpers.wrapNativeSuper(Error)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this)||this;c.name="MexFatalExtensionError";c.error=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=(e=e.metadata)==null?void 0:e.mexPerfTracker;e=e instanceof d("WAWebMexLogging").MexPerfTracker?e:null;e!=null&&(e.setQueryId(a.id),e.setOperationName(a.name));b={variables:b};b=(yield n(b,c("WANullthrows")(a.id),e));if(!b.success){e!=null&&(e.setHasData(!1),e.setErrors([d("WAWebMexLogging").createLoggingTransportError(b.errorCode,b.errorText)]));throw new i(b.errorCode,b.errorText)}a={};try{a=JSON.parse(b.result)}catch(a){e!=null&&(e.setHasData(!1),e.setErrors([d("WAWebMexLogging").createLoggingClientError(472,a.message)]));throw new j(a)}b=a;e!=null&&(e.setHasData(b.data!=null),e.setExtensionErrors(b.errors));e=m(b.errors);if(e!=null)throw new k(e);return a});return l.apply(this,arguments)}function m(a){var b;if(a==null||a.length===0)return null;b=(b=a.find(function(a){return((a=a.extensions)==null?void 0:a.is_summary)===!0}))!=null?b:a.find(function(a){return((a=a.extensions)==null?void 0:a.error_code)!=null});if(b==null){a=a[0];a.extensions.error_code=500;return a}return b}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{return yield h(a,b)}catch(a){c!=null&&(c.setHasData(!1),c.setErrors([d("WAWebMexLogging").createLoggingClientError(471,a.message)]));throw new i(500,a.message)}});return o.apply(this,arguments)}g.sendMexIq=h;g.MexIqError=i;g.MexPayloadParsingError=j;g.MexFatalExtensionError=k;g.fetchFunc=a;g.parseFatalExtensionError=m}),98);
__d("WAWebMexNativeClient",["WACustomError","WALogger","WAWebBackendErrors","WAWebMexLogging","WAWebMexRelayEnvironment","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][","] fetch query error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][native-client] unexpected error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][native-client] infra error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][native-client] result:"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][native-client] Mex native client request:"]);l=function(){return a};return a}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").DEV(l()).tags("mex","native-client").devConsole({operation:a,variables:b});var c=new(d("WAWebMexLogging").MexPerfTracker)(!0);c.start();try{var e=o(a),f=e.params;c.setQueryId(f.id);c.setOperationName(f.name);f={metadata:{mexPerfTracker:c}};e=(yield d("WAWebMexRelayEnvironment").fetchFunc(e.params,b,f));d("WALogger").DEV(k()).tags("mex","native-client").devConsole({result:e});b=n(e,c);c.setHasData(!0);c.stop();c.logEvent();return b.data}catch(b){b instanceof d("WAWebMexRelayEnvironment").MexIqError||b instanceof d("WAWebMexRelayEnvironment").MexPayloadParsingError||b instanceof d("WAWebMexRelayEnvironment").MexFatalExtensionError?b instanceof d("WAWebMexRelayEnvironment").MexFatalExtensionError||d("WALogger").ERROR(j(),b.message).tags("mex","native-client").devConsole({error:b}).sendLogs("mex-native-client-infra-error"):(d("WALogger").ERROR(i(),b.message).tags("mex","native-client").devConsole({error:b}).sendLogs("mex-native-client-unexpected-error"),c.setHasData(!1),c.setErrors([d("WAWebMexLogging").createLoggingClientError(417,b.message)]));c.stop();c.logEvent();b instanceof d("WAWebMexRelayEnvironment").MexFatalExtensionError||d("WALogger").ERROR(h(),a.params.name).tags("GQL","MEX").devConsole({e:b});if(b instanceof d("WAWebMexRelayEnvironment").MexFatalExtensionError){f=b.error.extensions.error_code;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(f),"MexFatalExtensionError: "+b.error.message)}if(b instanceof d("WAWebMexRelayEnvironment").MexIqError)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.code,"MexIqError: "+b.message);throw b}});return m.apply(this,arguments)}function n(a,b){if(a.data!=null)return{data:a.data};if(Array.isArray(a)){a="mex response is an array";b.setErrors([d("WAWebMexLogging").createLoggingClientError(472,a)]);throw new(d("WAWebMexRelayEnvironment").MexPayloadParsingError)(c("err")(a))}a="data is missing in mex response";b.setErrors([d("WAWebMexLogging").createLoggingClientError(472,a)]);throw new(d("WAWebMexRelayEnvironment").MexPayloadParsingError)(c("err")(a))}function o(a){if(a.kind==="Request")return a;throw d("WACustomError").customError("operation kind "+((a=JSON.stringify(a.kind))!=null?a:"")+" is not 'Request'",!0,Error)}g.fetchQuery=a}),98);
__d("WAWebGraphQLServerError",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({INVALID_ACCESS_TOKEN:190});c=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.name="GraphQLServerError";c.source=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.GraphQLErrorCode=a;f.GraphQLServerError=c}),66);
__d("JSResource",["JSResourceReferenceImpl"],(function(a,b,c,d,e,f,g){var h={};function i(a,b){h[a]=b}function j(a){return h[a]}function a(a){a=a;var b=j(a);if(b)return b;b=new(c("JSResourceReferenceImpl"))(a);i(a,b);return b}a.loadAll=c("JSResourceReferenceImpl").loadAll;g["default"]=a}),98);
__d("JSResourceForInteraction",["JSResource"],(function(a,b,c,d,e,f,g){function a(a){return c("JSResource").call(null,a)}b=a;g["default"]=b}),98);
__d("WAWebGraphQLConstants",[],(function(a,b,c,d,e,f){a="https://graph.facebook.com/graphql";b="https://graph.whatsapp.com/graphql/catalog";c="WA|787118555984857|7bb1544a3599aa180ac9a3f7688ba243";f.FACEBOOK_GRAPHQL_ENDPOINT=a;f.WHATSAPP_GRAPHQL_ENDPOINT=b;f.WHATSAPP_GRAPHQL_ACCESS_TOKEN=c}),66);
__d("WAWebGraphQLPersistedQueries",[],(function(a,b,c,d,e,f){a={WAWebQueryCatalogHasCategoriesQuery:"5247905281934978",WAWebQueryCatalogProductQuery:"7991603967599873",WAWebQueryCatalogQuery:"8147449291965336",WAWebQueryProductCollectionsQuery:"8721869814495256",WAWebQueryProductListCatalogJobQuery:"5431107963648273",WAWebQueryProductSingleCollectionQuery:"8077336219000219",queryProductListCatalogQuery:"5127568407281377",WAWebBizGetCustomUrlUserGraphqlQuery:"7942225995860428"};f.PersistedQueries=a}),66);
__d("WAWebGraphQLRemapLocale",["WALogger","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid json locale mapping"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid json locale mapping"]);i=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["locale format should use underscore instead of hyphen"]);a=function(){return b};return b}b=function(a,b){try{var e=JSON.parse(b);if(!c("lodash").isPlainObject(e)){d("WALogger").WARN(i());return a}return Object.keys(e).find(function(b){b=e[b];return Array.isArray(b)?b.includes(a):!1})||a}catch(b){d("WALogger").WARN(h());return a}};g.graphQLRemapLocale=b}),98);
__d("Locale",["SiteData"],(function(a,b,c,d,e,f){function a(){return b("SiteData").is_rtl}e.exports={isRTL:a}}),null);
__d("WAWebL10NConstants",[],(function(a,b,c,d,e,f){a={DEBUG:99,SAVED:6,PHONE:5,PREVIOUS:4,URL:3,BROWSER:2,DEFAULT:1};b="en";c="en-US";d=new Set(["ur"]);e=new Set(["af","az","ca","cs","da","de","el","et","fi","fr","he","hr","hu","id","it","kk","lt","mk","nb","pl","pt","pt-BR","ro","ru","sk","sl","sr","sv","th","tr","uk"]);var g={"zh-tw":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYY\u5e74MMMD\u65e5",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5LT",LLLL:"YYYY\u5e74MMMD\u65e5ddddLT",l:"YYYY\u5e74MMMD\u65e5",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5LT",llll:"YYYY\u5e74MMMD\u65e5ddddLT"}},"zh-cn":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYY-MM-DD",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5LT",LLLL:"YYYY\u5e74MMMD\u65e5ddddLT",l:"YYYY\u5e74MMMD\u65e5",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5LT",llll:"YYYY\u5e74MMMD\u65e5ddddLT"}},ar:{longDateFormat:{LT:"h:mm A",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"}},ta:{longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY, h:mm A"},preparse:null,postformat:null,meridiem:null,meridiemHour:null},nl:{longDateFormat:{l:"DD-MM-YYYY",L:"DD-MM-YYYY"}},"en-ie":{longDateFormat:{l:"DD/MM/YYYY",L:"DD/MM/YYYY"}},hi:{preparse:function(a){return a},postformat:function(a){return a},longDateFormat:{LT:"A h:mm \u092c\u091c\u0947",LTS:"A h:mm:ss \u092c\u091c\u0947",LLL:"D MMMM YYYY A h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A h:mm \u092c\u091c\u0947"},meridiem:function(a,b,c){if(a===0&&b===0)return"\u092e\u0927\u094d\u092f\u0930\u093e\u0924\u094d\u0930\u093f";if(a>=20||a<4)return"\u0930\u093e\u0924";if(a>=4&&a<12)return"\u0938\u0941\u092c\u0939";return a>=12&&a<16?"\u0926\u094b\u092a\u0939\u0930":"\u0936\u093e\u092e"}}},h={"pt-pt":{weekdays:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"]}};h=babelHelpers["extends"]({},g,h);var i=!1;i=i;f.L10N_PRIORITY=a;f.DEFAULT_LOCALE=b;f.DEFAULT_MOMENT_LOCALE=c;f.SHOULD_USE_MOMENT_LOCALE_FORMAT=d;f.LOCALES_THAT_PREFER_24HOUR_TIME=e;f.LOCALE_DATE_TIME_CUSTOMIZATIONS=g;f.LOCALE_CUSTOMIZATIONS=h;f.MARK_TRANSLATIONS_ENABLED=i}),66);
__d("WAWebL10NNumbersPluginRegistry",[],(function(a,b,c,d,e,f){var g=Math.pow(10,3),h=Math.pow(10,6);function i(a,b,c,d){d===void 0&&(d=1);var e=".";a=a/Math.pow(10,b);b=a.toString(10).split(".");a=b[0];b=b[1];return b==null||b.startsWith("0".repeat(d))||Number.parseInt(a,10)>=100?parseInt(a,10).toLocaleString(c):parseFloat(""+a+e+b.slice(0,d)).toLocaleString(c)}function j(a,b){return Intl.NumberFormat(b,{notation:"compact"}).format(a)}b={locales:["fr","fr-BE","fr-CA","fr-CH","fr-FR"],format:function(a,b){a=j(a,b);return a.toLocaleUpperCase(b)}};c={locales:["he","he-IL"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<h?i(a,3,b)+" \u05d0\u05dc\u05e3":i(a,6,b)+" \u05de\u05d9\u05dc\u05d9\u05d5\u05df"}};d={locales:["ro","ro-RO"],format:function(a,b){if(a<g)return a.toLocaleString(b);if(a===g)return"1 mie";return a<h?i(a,3,b)+" mii":i(a,6,b)+" mil."}};e={locales:["zh-SG","zh-CN"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<Math.pow(10,4)?i(a,3,b)+"\u5343":j(a,b)}};var k={locales:["ja"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<Math.pow(10,4)?i(a,3,b)+"\u5343":j(a,b)}},l={locales:["de","de-AT","de-CH","de-DE","de-LI","de-LU"],format:function(a,b){return a>g&&a<h?i(a,3,b)+" Tsd.":j(a,b)}},m={locales:["it","it-CH","it-IT"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<h?i(a,3,b)+" mila":i(a,6,b)+" mln"}},n={locales:["pt","pt-BR","pt-PT"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<h?j(a,b):i(a,6,b)+" M"}},o={locales:["zh-TW","zh-MO","zh-HK"],format:function(a,b){if(a<g)return a.toLocaleString(b);return a<Math.pow(10,4)?i(a,3,b)+"\u5343":j(a,"zh-TW")}},p=[l,b,m,c,k,n,d,o,e];l=a();function a(){var a=new Map(),b=function(){var b=p[c];b.locales.forEach(function(c){return a.set(c,b)})};for(var c=0;c<p.length;c++)b();return a}f.M=h;f.l10nNumberFormattersRegister=l}),66);
__d("WAWebL10NPlurals",[],(function(a,b,c,d,e,f){a={ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(a>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(a>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(a>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(a===0?0:a==1?1:a==2?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ay:{name:"Aymar\xe1",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(a!=1)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(a>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},cgg:{name:"Chiga",numbers:[1],plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(a==1?0:a==2?1:a!=8&&a!=11?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(a!=1)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(a!=1)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fa:{name:"Persian",numbers:[1,2],plurals:function(a){return Number(a>1)}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(a>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(a>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(a==1?0:a==2?1:a<7?2:a<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(a==1||a==11?0:a==2||a==12?1:a>2&&a<20?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(a!=1)}},he:{name:"Hebrew",numbers:[1,2,20,3],plurals:function(a){return Number(a===1?0:a===2?1:a>=20&&a%10===0?2:3)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(a!=1)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(a%10!=1||a%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(a!==0)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(a==1?0:a==2?1:a==3?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(a>1)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a!==0?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(a>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(a>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(a>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(a==1||a%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(a===0?0:a==1?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(a==1?0:a===0||a%100>1&&a%100<11?1:a%100>10&&a%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(a!=1)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(a!=1)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(a>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(a!=1)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},"pt-BR":{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(a==1?0:a===0||a%100>0&&a%100<20?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(a!=1)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(a!=1)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(a!=1)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(a>1)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(a>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(a>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(a>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(a>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(a!=1)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}};f["default"]=a}),66);
__d("WAWebLocaleToTranslation",[],(function(a,b,c,d,e,f){a={pt:"pt_br",pt_ao:"pt_pt",pt_ch:"pt_pt",pt_cv:"pt_pt",pt_fr:"pt_pt",pt_gq:"pt_pt",pt_gw:"pt_pt",pt_lu:"pt_pt",pt_mo:"pt_pt",pt_mz:"pt_pt",pt_pt:"pt_pt",pt_st:"pt_pt",pt_tl:"pt_pt"};b=babelHelpers["extends"]({},a,{zh_hans:"zh_cn",zh_hant:"zh_tw",zh_sg:"zh_cn",tl:"fil","in":"id",iw:"he",mo:"ro",jw:"jv",ji:"yi"});c=b;f["default"]=c}),66);
__d("WAWebSupportedLocales",[],(function(a,b,c,d,e,f){a=Object.freeze({af:"af",ar:"ar",ar_xb:"ar-XB",az:"az",bg:"bg",bn:"bn",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",en:"en",es:"es",et:"et",fa:"fa",fi:"fi",fil:"fil",fr:"fr",gu:"gu",he:"he",hi:"hi",hr:"hr",hu:"hu",id:"id",it:"it",ja:"ja",kk:"kk",kn:"kn",ko:"ko",lt:"lt",lv:"lv",mk:"mk",ml:"ml",mr:"mr",ms:"ms",nb:"nb",nl:"nl",pa:"pa",pl:"pl",pt:"pt",pt_br:"pt-BR",pt_pt:"pt-PT",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sq:"sq",sr:"sr",sv:"sv",sw:"sw",ta:"ta",te:"te",th:"th",tr:"tr",uk:"uk",ur:"ur",uz:"uz",vi:"vi",zh_cn:"zh-CN",zh_hk:"zh-HK",zh_tw:"zh-TW"});b=a;f["default"]=b}),66);
__d("WAWebBaseL10N",["Locale","WAWeb-moment","WAWebEventEmitter","WAWebL10NConstants","WAWebL10NHelpers","WAWebL10NNumbersPluginRegistry","WAWebL10NPlurals","WAWebLocaleToTranslation","WAWebSupportedLocales","err","filesize","latenize"],(function(a,b,c,d,e,f,g){var h=new Set(["fa"]),i="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".split(""),j=1024*1024*1024,k=Math.pow(10,6),l=Math.pow(10,3),m=Math.pow(10,4);function n(a){return i[parseInt(a,10)]}var o=c("err")("Unimplemented method");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){var f;f=a.call(this)||this;if(!b||!c)throw o;f._locale=b;f.localeStrings={};f.localeStrings[d("WAWebL10NConstants").DEFAULT_LOCALE]=c;f.fbtStrings={};f.fbtStrings[d("WAWebL10NConstants").DEFAULT_LOCALE]={en_GB:{}};f.markTranslations=e;f.customizeMoment();return f}var e=b.prototype;e.getLocale=function(){throw o};e.getNormalizedLocale=function(){throw o};e.getFullLocale=function(){throw o};e.getFbtTranslations=function(){throw o};e.setLocale=function(a,b,c){throw o};e.normalizeLocaleToWajsLocale=function(a){a=a.replace(/-/g,"_").toLowerCase();var b=this._getTranslationFilename(a);if(b)return b;b=a;while(b){b=b.split("_").slice(0,-1).join("_");a=b&&this._getTranslationFilename(b);if(a)return a}return void 0};e.isLocaleSupported=function(a){return!!a&&!!this.normalizeLocaleToWajsLocale(a)};e._getTranslationFilename=function(a){a=c("WAWebLocaleToTranslation")[a]||a;return c("WAWebSupportedLocales")[a]};e.isRTL=function(){return d("Locale").isRTL()};e.LR=function(a,b){return this.isRTL()?b:a};e.embedDir=function(a,b){b===void 0&&(b=this.isRTL());return b?this.embedRTL(a):this.embedLTR(a)};e.embedLTR=function(a){return"\u202a"+a+"\u202c"};e.embedRTL=function(a){return"\u202b"+a+"\u202c"};e.isolateLTR=function(a){return"\u2066"+a+"\u2069"};e.isolateRTL=function(a){return"\u2067"+a+"\u2069"};e.forceLTR=function(a){return"\u200e"+a};e.forceRTL=function(a){return"\u200f"+a};e._getString=function(a,b,e){var f=this.localeStrings[b]||this.localeStrings[d("WAWebL10NConstants").DEFAULT_LOCALE];if(f==null)throw c("err")("Couldn't find translations for locale "+b+" or default ("+d("WAWebL10NConstants").DEFAULT_LOCALE+")");if(!Array.isArray(f))throw c("err")("Unexpected locale format.");var g=f[0];f=f[1];g=g[a]||"";if(e==null)return g;b=c("WAWebL10NPlurals")[b];if(b==null)return g;e=b.numbers[b.plurals(e)];if(e===1)return g;b=b.numbers.length===2&&e===2?a.toString():a+"_"+e;return f[b]||g};e.useArabicScriptDigits=function(a){return h.has((a=a)!=null?a:this.getNormalizedLocale())};e.isLatinAlphabetLanguage=function(a){return c("latenize").isLatin(this.removeAccents(a))};e.d=function(a,b,c){var e=d("WAWebL10NNumbersPluginRegistry").l10nNumberFormattersRegister.get(this.getFullLocale());if(e!=null&&typeof a==="number")return e.format(a,this.getFullLocale());e=typeof a==="number"&&(a>=k||a>=l&&a<m)?1:0;return this.n(a,b,babelHelpers["extends"]({},c,{notation:"compact",roundingMode:"trunc",trailingZeroDisplay:"stripIfInteger",minimumFractionDigits:e,maximumFractionDigits:e}))};e.n=function(a,b,c){a=a;if(typeof a==="number")return Intl.NumberFormat(this.getFullLocale(),c).format(a);return this.useArabicScriptDigits(b)?a.toString().replace(/[0-9]/g,n):a};e.filesizeWithParams=function(a,b){var d=a>j?1:0,e=this.getFullLocale();return this.n(c("filesize")(a,{base:2,round:d,locale:e,symbols:b}))};e.normalizeForm=function(a){a===void 0&&(a="");return d("WAWebL10NHelpers").normalizeForm(a)};e.removeAccents=function(a){a===void 0&&(a="");return d("WAWebL10NHelpers").removeAccents(a)};e.accentFold=function(a){a===void 0&&(a="");return this.removeAccents(a).toLowerCase()};e.customizeMoment=function(){var a;(a=c("WAWeb-moment")).relativeTimeRounding(Math.floor);a.relativeTimeThreshold("s",60);a.relativeTimeThreshold("m",60);a.relativeTimeThreshold("h",24)};return b}(c("WAWebEventEmitter"));g.WAWebBaseL10n=a}),98);
__d("WAWebEventsWaitForMainStreamReadyMd",["Promise","WAWebCmd","WAWebEventsWaitForBbEvent"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebCmd").Cmd.isMainStreamReadyMd?(h||(h=b("Promise"))).resolve():c("WAWebEventsWaitForBbEvent")(d("WAWebCmd").Cmd,"main_stream_mode_ready")}g["default"]=a}),98);
__d("WAWebL10NCoerceToFBLocale",["bcp-47","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="en_GB",i=new Map([["af","af_ZA"],["ar","ar_AR"],["az","az_AZ"],["bg","bg_BG"],["bn","bn_IN"],["ca","ca_ES"],["cs","cs_CZ"],["da","da_DK"],["de","de_DE"],["el","el_GR"],["en","en_GB"],["es","es_LA"],["et","et_EE"],["fa","fa_IR"],["fi","fi_FI"],["fr","fr_FR"],["gu","gu_IN"],["he","he_IL"],["hi","hi_IN"],["hr","hr_HR"],["hu","hu_HU"],["id","id_ID"],["it","it_IT"],["ja","ja_JP"],["kk","kk_KZ"],["kn","kn_IN"],["ko","ko_KR"],["lt","lt_LT"],["lv","lv_LV"],["mk","mk_MK"],["ml","ml_IN"],["mr","mr_IN"],["ms","ms_MY"],["nb","nb_NO"],["nl","nl_NL"],["pa","pa_IN"],["pl","pl_PL"],["pt","pt_BR"],["ro","ro_RO"],["ru","ru_RU"],["sk","sk_SK"],["sl","sl_SI"],["sq","sq_AL"],["sr","sr_RS"],["sv","sv_SE"],["sw","sw_KE"],["ta","ta_IN"],["te","te_IN"],["th","th_TH"],["tl","tl_PH"],["tr","tr_TR"],["uk","uk_UA"],["ur","ur_PK"],["uz","uz_UZ"],["vi","vi_VN"],["zh","zh_CN"]]),j=new Map([["pt_ao","pt_PT"],["pt_ch","pt_PT"],["pt_cv","pt_PT"],["pt_fr","pt_PT"],["pt_gq","pt_PT"],["pt_gw","pt_PT"],["pt_lu","pt_PT"],["pt_mo","pt_PT"],["pt_mz","pt_PT"],["pt_pt","pt_PT"],["pt_st","pt_PT"],["pt_tl","pt_PT"],["zh_cn","zh_CN"],["zh_hk","zh_HK"],["zh_tw","zh_TW"],["zh_hant","zh_HK"],["zh_hans","zh_CN"],["fil","tl_PH"],["in","id_ID"],["iw","he_IL"],["mo","ro_RO"],["jw","jv_ID"],["ji","yi_DE"]]),k=new Map([["fb_aa","fb_AA"],["fb_ac","fb_AC"],["fb_ar","fb_AR"],["fb_ha","fb_HA"],["fb_hx","fb_HX"],["fb_ll","fb_LL"],["fb_ls","fb_LS"],["fb_lt","fb_LT"],["fb_rl","fb_RL"],["fb_zh","fb_ZH"],["fbt_ac","fbt_AC"]]);function a(a){if(c("gkx")("26259")){var b=a.toLocaleLowerCase("en").replaceAll("-","_");if(k.has(b)){return(b=k.get(b))!=null?b:h}}b=a.toLocaleLowerCase("en").replaceAll("_","-");try{a=c("bcp-47").parse(b);b=[];a.region!=null&&b.push(a.language+"_"+a.region);a.script!=null&&b.push(a.language+"_"+a.script);for(var d=0;d<b.length;d++){var e=b[d];e=j.get(e);if(e)return e}return(e=i.get(a.language))!=null?e:h}catch(a){return h}}function b(a){return c("gkx")("26259")?k.has(a.toLocaleLowerCase("en")):!1}g.DEFAULT_WA_WEB_LOCALE=h;g.LANGUAGE_TO_FB_LOCALE=i;g.EXCEPTION_LANG_REGION_TO_FB_LOCALE=j;g.DEBUG_LOCALES=k;g.coerceWAWebL10nLocaleToFBLocale=a;g.isWAWebl10nDebugLocale=b}),98);
__d("WAWebL10nGetRenderedLocale",["IntlCurrentLocale"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("IntlCurrentLocale").code}g.WAWebL10nGetRenderedLocale=a}),98);
__d("WAWebLocaleToMomentResource",[],(function(a,b,c,d,e,f){a={"zh-HK":"zh-TW",pa:"pa-IN"};b=a;f["default"]=b}),66);
__d("WAWebMomentLocales",["JSResource","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){switch(a.toLocaleLowerCase("en")){case"en-au":yield c("JSResource")("WAWebMoment-en-au").__setRef("WAWebMomentLocales").load();return!0;case"en-ca":yield c("JSResource")("WAWebMoment-en-ca").__setRef("WAWebMomentLocales").load();return!0;case"en-gb":yield c("JSResource")("WAWebMoment-en-gb").__setRef("WAWebMomentLocales").load();return!0;case"en-ie":yield c("JSResource")("WAWebMoment-en-ie").__setRef("WAWebMomentLocales").load();return!0;case"en-in":yield c("JSResource")("WAWebMoment-en-in").__setRef("WAWebMomentLocales").load();return!0;case"en-nz":yield c("JSResource")("WAWebMoment-en-nz").__setRef("WAWebMomentLocales").load();return!0;case"en-sg":yield c("JSResource")("WAWebMoment-en-sg").__setRef("WAWebMomentLocales").load();return!0;case"af":yield c("JSResource")("WAWebMoment-af").__setRef("WAWebMomentLocales").load();return!0;case"ar-dz":yield c("JSResource")("WAWebMoment-ar-dz").__setRef("WAWebMomentLocales").load();return!0;case"ar":yield c("JSResource")("WAWebMoment-ar").__setRef("WAWebMomentLocales").load();return!0;case"ar-kw":yield c("JSResource")("WAWebMoment-ar-kw").__setRef("WAWebMomentLocales").load();return!0;case"ar-ly":yield c("JSResource")("WAWebMoment-ar-ly").__setRef("WAWebMomentLocales").load();return!0;case"ar-ma":yield c("JSResource")("WAWebMoment-ar-ma").__setRef("WAWebMomentLocales").load();return!0;case"ar-sa":yield c("JSResource")("WAWebMoment-ar-sa").__setRef("WAWebMomentLocales").load();return!0;case"ar-tn":yield c("JSResource")("WAWebMoment-ar-tn").__setRef("WAWebMomentLocales").load();return!0;case"az":yield c("JSResource")("WAWebMoment-az").__setRef("WAWebMomentLocales").load();return!0;case"be":yield c("JSResource")("WAWebMoment-be").__setRef("WAWebMomentLocales").load();return!0;case"bg":yield c("JSResource")("WAWebMoment-bg").__setRef("WAWebMomentLocales").load();return!0;case"bm":yield c("JSResource")("WAWebMoment-bm").__setRef("WAWebMomentLocales").load();return!0;case"bn-bd":yield c("JSResource")("WAWebMoment-bn-bd").__setRef("WAWebMomentLocales").load();return!0;case"bn":yield c("JSResource")("WAWebMoment-bn").__setRef("WAWebMomentLocales").load();return!0;case"bo":yield c("JSResource")("WAWebMoment-bo").__setRef("WAWebMomentLocales").load();return!0;case"br":yield c("JSResource")("WAWebMoment-br").__setRef("WAWebMomentLocales").load();return!0;case"bs":yield c("JSResource")("WAWebMoment-bs").__setRef("WAWebMomentLocales").load();return!0;case"ca":yield c("JSResource")("WAWebMoment-ca").__setRef("WAWebMomentLocales").load();return!0;case"cs":yield c("JSResource")("WAWebMoment-cs").__setRef("WAWebMomentLocales").load();return!0;case"cv":yield c("JSResource")("WAWebMoment-cv").__setRef("WAWebMomentLocales").load();return!0;case"cy":yield c("JSResource")("WAWebMoment-cy").__setRef("WAWebMomentLocales").load();return!0;case"da":yield c("JSResource")("WAWebMoment-da").__setRef("WAWebMomentLocales").load();return!0;case"de-at":yield c("JSResource")("WAWebMoment-de-at").__setRef("WAWebMomentLocales").load();return!0;case"de-ch":yield c("JSResource")("WAWebMoment-de-ch").__setRef("WAWebMomentLocales").load();return!0;case"de":yield c("JSResource")("WAWebMoment-de").__setRef("WAWebMomentLocales").load();return!0;case"dv":yield c("JSResource")("WAWebMoment-dv").__setRef("WAWebMomentLocales").load();return!0;case"el":yield c("JSResource")("WAWebMoment-el").__setRef("WAWebMomentLocales").load();return!0;case"eo":yield c("JSResource")("WAWebMoment-eo").__setRef("WAWebMomentLocales").load();return!0;case"es-do":yield c("JSResource")("WAWebMoment-es-do").__setRef("WAWebMomentLocales").load();return!0;case"es":yield c("JSResource")("WAWebMoment-es").__setRef("WAWebMomentLocales").load();return!0;case"es-mx":yield c("JSResource")("WAWebMoment-es-mx").__setRef("WAWebMomentLocales").load();return!0;case"es-us":yield c("JSResource")("WAWebMoment-es-us").__setRef("WAWebMomentLocales").load();return!0;case"et":yield c("JSResource")("WAWebMoment-et").__setRef("WAWebMomentLocales").load();return!0;case"eu":yield c("JSResource")("WAWebMoment-eu").__setRef("WAWebMomentLocales").load();return!0;case"fa":yield c("JSResource")("WAWebMoment-fa").__setRef("WAWebMomentLocales").load();return!0;case"fi":yield c("JSResource")("WAWebMoment-fi").__setRef("WAWebMomentLocales").load();return!0;case"fil":yield c("JSResource")("WAWebMoment-fil").__setRef("WAWebMomentLocales").load();return!0;case"fo":yield c("JSResource")("WAWebMoment-fo").__setRef("WAWebMomentLocales").load();return!0;case"fr-ca":yield c("JSResource")("WAWebMoment-fr-ca").__setRef("WAWebMomentLocales").load();return!0;case"fr-ch":yield c("JSResource")("WAWebMoment-fr-ch").__setRef("WAWebMomentLocales").load();return!0;case"fr":yield c("JSResource")("WAWebMoment-fr").__setRef("WAWebMomentLocales").load();return!0;case"fy":yield c("JSResource")("WAWebMoment-fy").__setRef("WAWebMomentLocales").load();return!0;case"ga":yield c("JSResource")("WAWebMoment-ga").__setRef("WAWebMomentLocales").load();return!0;case"gd":yield c("JSResource")("WAWebMoment-gd").__setRef("WAWebMomentLocales").load();return!0;case"gl":yield c("JSResource")("WAWebMoment-gl").__setRef("WAWebMomentLocales").load();return!0;case"gom-deva":yield c("JSResource")("WAWebMoment-gom-deva").__setRef("WAWebMomentLocales").load();return!0;case"gom-latn":yield c("JSResource")("WAWebMoment-gom-latn").__setRef("WAWebMomentLocales").load();return!0;case"gu":yield c("JSResource")("WAWebMoment-gu").__setRef("WAWebMomentLocales").load();return!0;case"he":yield c("JSResource")("WAWebMoment-he").__setRef("WAWebMomentLocales").load();return!0;case"hi":yield c("JSResource")("WAWebMoment-hi").__setRef("WAWebMomentLocales").load();return!0;case"hr":yield c("JSResource")("WAWebMoment-hr").__setRef("WAWebMomentLocales").load();return!0;case"hu":yield c("JSResource")("WAWebMoment-hu").__setRef("WAWebMomentLocales").load();return!0;case"hy-am":yield c("JSResource")("WAWebMoment-hy-am").__setRef("WAWebMomentLocales").load();return!0;case"id":yield c("JSResource")("WAWebMoment-id").__setRef("WAWebMomentLocales").load();return!0;case"is":yield c("JSResource")("WAWebMoment-is").__setRef("WAWebMomentLocales").load();return!0;case"it-ch":yield c("JSResource")("WAWebMoment-it-ch").__setRef("WAWebMomentLocales").load();return!0;case"it":yield c("JSResource")("WAWebMoment-it").__setRef("WAWebMomentLocales").load();return!0;case"ja":yield c("JSResource")("WAWebMoment-ja").__setRef("WAWebMomentLocales").load();return!0;case"jv":yield c("JSResource")("WAWebMoment-jv").__setRef("WAWebMomentLocales").load();return!0;case"ka":yield c("JSResource")("WAWebMoment-ka").__setRef("WAWebMomentLocales").load();return!0;case"kk":yield c("JSResource")("WAWebMoment-kk").__setRef("WAWebMomentLocales").load();return!0;case"km":yield c("JSResource")("WAWebMoment-km").__setRef("WAWebMomentLocales").load();return!0;case"kn":yield c("JSResource")("WAWebMoment-kn").__setRef("WAWebMomentLocales").load();return!0;case"ko":yield c("JSResource")("WAWebMoment-ko").__setRef("WAWebMomentLocales").load();return!0;case"ku":yield c("JSResource")("WAWebMoment-ku").__setRef("WAWebMomentLocales").load();return!0;case"ky":yield c("JSResource")("WAWebMoment-ky").__setRef("WAWebMomentLocales").load();return!0;case"lb":yield c("JSResource")("WAWebMoment-lb").__setRef("WAWebMomentLocales").load();return!0;case"lo":yield c("JSResource")("WAWebMoment-lo").__setRef("WAWebMomentLocales").load();return!0;case"lt":yield c("JSResource")("WAWebMoment-lt").__setRef("WAWebMomentLocales").load();return!0;case"lv":yield c("JSResource")("WAWebMoment-lv").__setRef("WAWebMomentLocales").load();return!0;case"me":yield c("JSResource")("WAWebMoment-me").__setRef("WAWebMomentLocales").load();return!0;case"mi":yield c("JSResource")("WAWebMoment-mi").__setRef("WAWebMomentLocales").load();return!0;case"mk":yield c("JSResource")("WAWebMoment-mk").__setRef("WAWebMomentLocales").load();return!0;case"ml":yield c("JSResource")("WAWebMoment-ml").__setRef("WAWebMomentLocales").load();return!0;case"mn":yield c("JSResource")("WAWebMoment-mn").__setRef("WAWebMomentLocales").load();return!0;case"mr":yield c("JSResource")("WAWebMoment-mr").__setRef("WAWebMomentLocales").load();return!0;case"ms":yield c("JSResource")("WAWebMoment-ms").__setRef("WAWebMomentLocales").load();return!0;case"ms-my":yield c("JSResource")("WAWebMoment-ms-my").__setRef("WAWebMomentLocales").load();return!0;case"mt":yield c("JSResource")("WAWebMoment-mt").__setRef("WAWebMomentLocales").load();return!0;case"my":yield c("JSResource")("WAWebMoment-my").__setRef("WAWebMomentLocales").load();return!0;case"nb":yield c("JSResource")("WAWebMoment-nb").__setRef("WAWebMomentLocales").load();return!0;case"ne":yield c("JSResource")("WAWebMoment-ne").__setRef("WAWebMomentLocales").load();return!0;case"nl-be":yield c("JSResource")("WAWebMoment-nl-be").__setRef("WAWebMomentLocales").load();return!0;case"nl":yield c("JSResource")("WAWebMoment-nl").__setRef("WAWebMomentLocales").load();return!0;case"nn":yield c("JSResource")("WAWebMoment-nn").__setRef("WAWebMomentLocales").load();return!0;case"oc-lnc":yield c("JSResource")("WAWebMoment-oc-lnc").__setRef("WAWebMomentLocales").load();return!0;case"pa-in":yield c("JSResource")("WAWebMoment-pa-in").__setRef("WAWebMomentLocales").load();return!0;case"pl":yield c("JSResource")("WAWebMoment-pl").__setRef("WAWebMomentLocales").load();return!0;case"pt-br":yield c("JSResource")("WAWebMoment-pt-br").__setRef("WAWebMomentLocales").load();return!0;case"pt":yield c("JSResource")("WAWebMoment-pt").__setRef("WAWebMomentLocales").load();return!0;case"ro":yield c("JSResource")("WAWebMoment-ro").__setRef("WAWebMomentLocales").load();return!0;case"ru":yield c("JSResource")("WAWebMoment-ru").__setRef("WAWebMomentLocales").load();return!0;case"sd":yield c("JSResource")("WAWebMoment-sd").__setRef("WAWebMomentLocales").load();return!0;case"se":yield c("JSResource")("WAWebMoment-se").__setRef("WAWebMomentLocales").load();return!0;case"si":yield c("JSResource")("WAWebMoment-si").__setRef("WAWebMomentLocales").load();return!0;case"sk":yield c("JSResource")("WAWebMoment-sk").__setRef("WAWebMomentLocales").load();return!0;case"sl":yield c("JSResource")("WAWebMoment-sl").__setRef("WAWebMomentLocales").load();return!0;case"sq":yield c("JSResource")("WAWebMoment-sq").__setRef("WAWebMomentLocales").load();return!0;case"sr-cyrl":yield c("JSResource")("WAWebMoment-sr-cyrl").__setRef("WAWebMomentLocales").load();return!0;case"sr":yield c("JSResource")("WAWebMoment-sr").__setRef("WAWebMomentLocales").load();return!0;case"ss":yield c("JSResource")("WAWebMoment-ss").__setRef("WAWebMomentLocales").load();return!0;case"sv":yield c("JSResource")("WAWebMoment-sv").__setRef("WAWebMomentLocales").load();return!0;case"sw":yield c("JSResource")("WAWebMoment-sw").__setRef("WAWebMomentLocales").load();return!0;case"ta":yield c("JSResource")("WAWebMoment-ta").__setRef("WAWebMomentLocales").load();return!0;case"te":yield c("JSResource")("WAWebMoment-te").__setRef("WAWebMomentLocales").load();return!0;case"tet":yield c("JSResource")("WAWebMoment-tet").__setRef("WAWebMomentLocales").load();return!0;case"tg":yield c("JSResource")("WAWebMoment-tg").__setRef("WAWebMomentLocales").load();return!0;case"th":yield c("JSResource")("WAWebMoment-th").__setRef("WAWebMomentLocales").load();return!0;case"tk":yield c("JSResource")("WAWebMoment-tk").__setRef("WAWebMomentLocales").load();return!0;case"tlh":yield c("JSResource")("WAWebMoment-tlh").__setRef("WAWebMomentLocales").load();return!0;case"tl-ph":yield c("JSResource")("WAWebMoment-tl-ph").__setRef("WAWebMomentLocales").load();return!0;case"tr":yield c("JSResource")("WAWebMoment-tr").__setRef("WAWebMomentLocales").load();return!0;case"tzl":yield c("JSResource")("WAWebMoment-tzl").__setRef("WAWebMomentLocales").load();return!0;case"tzm":yield c("JSResource")("WAWebMoment-tzm").__setRef("WAWebMomentLocales").load();return!0;case"tzm-latn":yield c("JSResource")("WAWebMoment-tzm-latn").__setRef("WAWebMomentLocales").load();return!0;case"ug-cn":yield c("JSResource")("WAWebMoment-ug-cn").__setRef("WAWebMomentLocales").load();return!0;case"uk":yield c("JSResource")("WAWebMoment-uk").__setRef("WAWebMomentLocales").load();return!0;case"ur":yield c("JSResource")("WAWebMoment-ur").__setRef("WAWebMomentLocales").load();return!0;case"uz":yield c("JSResource")("WAWebMoment-uz").__setRef("WAWebMomentLocales").load();return!0;case"uz-latn":yield c("JSResource")("WAWebMoment-uz-latn").__setRef("WAWebMomentLocales").load();return!0;case"vi":yield c("JSResource")("WAWebMoment-vi").__setRef("WAWebMomentLocales").load();return!0;case"x-pseudo":yield c("JSResource")("WAWebMoment-x-pseudo").__setRef("WAWebMomentLocales").load();return!0;case"yo":yield c("JSResource")("WAWebMoment-yo").__setRef("WAWebMomentLocales").load();return!0;case"zh-cn":yield c("JSResource")("WAWebMoment-zh-cn").__setRef("WAWebMomentLocales").load();return!0;case"zh-hk":yield c("JSResource")("WAWebMoment-zh-hk").__setRef("WAWebMomentLocales").load();return!0;case"zh-mo":yield c("JSResource")("WAWebMoment-zh-mo").__setRef("WAWebMomentLocales").load();return!0;case"zh-tw":yield c("JSResource")("WAWebMoment-zh-tw").__setRef("WAWebMomentLocales").load();return!0;default:return!1}});return h.apply(this,arguments)}g.downloadAndDefineLocale=a}),98);
__d("WAWebUserPrefsLocales",["WAComms","WAWebABProps","WAWebL10NConstants","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsLocalStorage","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function a(){var a=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_PHONE);return a!=null?a:c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG)}function b(){return c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_USER)}function e(a){d("WAWebABProps").getABPropConfigValue("language_and_time_web")&&(c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_USER,a),d("WAComms").isSocketConnected()&&void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_USER,a))}function f(a){c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_PHONE,a),d("WAComms").isSocketConnected()&&void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_PHONE,a)}function h(a){c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_DID_MISMATCH_WITH_COOKIE,a)}function i(){var a;return(a=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.LANG_DID_MISMATCH_WITH_COOKIE))!=null?a:!1}function j(){if(!d("WAWebL10NConstants").MARK_TRANSLATIONS_ENABLED)return!1;var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.MARK_TRANSLATIONS);return typeof a==="boolean"?a:d("WAWebL10NConstants").MARK_TRANSLATIONS_ENABLED}function k(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.MARK_TRANSLATIONS,a)}function l(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.HOUR_24_FROM_PHONE,a)}function m(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.HOUR_24_FROM_DEVICE,a)}function n(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.HOUR_24_FROM_PHONE);if(typeof a==="boolean")return a;a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.HOUR_24);typeof a==="boolean"&&c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.HOUR_24_FROM_PHONE,a);return typeof a==="boolean"?a:null}function o(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.HOUR_24_FROM_DEVICE);return typeof a==="boolean"?a:null}g.getPhoneLangPref=a;g.getUserLangPref=b;g.setUserLangPref=e;g.setPhoneLangPref=f;g.setLangPrefCookieDidMismatchWithUserPref=h;g.getLangPrefCookieDidMismatchWithUserPref=i;g.getMarkTranslations=j;g.setMarkTranslations=k;g.setPhoneHour24=l;g.setDeviceHour24=m;g.getPhoneHour24=n;g.getDeviceHour24=o}),98);
__d("WAWebL10N",["WALogger","WAWeb-moment","WAWebABProps","WAWebBackendApi","WAWebBaseL10N","WAWebEventsWaitForMainStreamReadyMd","WAWebL10NCoerceToFBLocale","WAWebL10NConstants","WAWebL10nGetRenderedLocale","WAWebLocaleToMomentResource","WAWebMomentLocales","WAWebUserPrefsLocales","asyncToGeneratorRuntime","bcp-47","gkx","justknobx","lodash","nullthrows"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] constructor: Mismatch between rendered locale and user-pref locale. Using cleaned user-pref locale: ","; setting cookie to: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] constructor: Mismatch between rendered locale: ","; and cleaned user-pref locale: ","; NOT setting cookie to avoid refresh loop."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] moment locale updated to: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Could not fetch moment locales, using default en-US"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['[l10n] _cleanRawLocaleString: "','" not compatible with Intl.NumberFormat, falling back to "','"']);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(['[l10n] _cleanRawLocaleString: loc: "','", cleaned: "','"']);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] init: with locale ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] constructor: Using pref locale as full locale: ","; rendered locale: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] setLocale: Language change detected from "," to ",", reloading page."]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] setLocale: No language change detected (","), skipping page reload."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] setLocale: fullLocale:",", renderedLocale:",", newLocale:",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[l10n] setLocale: USER TRIGGERED Language change detected from "," to ","."]);s=function(){return a};return a}var t=5e3,u=d("WAWebL10NCoerceToFBLocale").DEFAULT_WA_WEB_LOCALE.replaceAll("_","-");a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;f=a.call(this,{l:"en",loc:"en"},{},!1)||this;f.$L10n4=null;f.setLocale=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(a==null)return;c=(c=c)!=null?c:!1;b=(b=b)!=null?b:d("WAWebL10NConstants").L10N_PRIORITY.PHONE;var e=d("WAWebABProps").getABPropConfigValue("language_and_time_web")&&b>=d("WAWebL10NConstants").L10N_PRIORITY.SAVED,g=f.normalizeLocaleToBcp47Compliant(a);if(g==null||g===f.$L10n2)return;e?d("WAWebUserPrefsLocales").setUserLangPref(a):d("WAWebUserPrefsLocales").setPhoneLangPref(a);if(d("WAWebABProps").getABPropConfigValue("language_and_time_web")&&b===d("WAWebL10NConstants").L10N_PRIORITY.PHONE&&d("WAWebUserPrefsLocales").getUserLangPref()!=null)return;e=f.$L10n1;f.$L10n2=g;a=d("WAWebL10NCoerceToFBLocale").coerceWAWebL10nLocaleToFBLocale(g);yield d("WAWebBackendApi").frontendSendAndReceive("setLocalePrefCookie",{locale:a});f.$L10n3=g;f.$L10n4=a;c===!0&&b===d("WAWebL10NConstants").L10N_PRIORITY.SAVED&&d("WALogger").LOG(s(),e,a);d("WALogger").LOG(r(),g,f.$L10n1,a);if(c!==!0)f.trigger("locale_changed_on_phone",{newLocale:a,currentLocale:e});else if(e===a)f.$L10n9.cancel(),d("WALogger").LOG(q(),e),yield f.applyMomentLocale(g),f.trigger("locale_change",{l:a,loc:g});else if(c===!0){d("WALogger").LOG(p(),e,a);f.$L10n1=a;if(b>=d("WAWebL10NConstants").L10N_PRIORITY.SAVED){f.$L10n10();return}void f.$L10n9()}});return function(b,c,d){return a.apply(this,arguments)}}();f.$L10n9=c("lodash").debounce(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c("WAWebEventsWaitForMainStreamReadyMd")();return f.$L10n10()}),t);f.$L10n1=d("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale();f.$L10n2=f.$L10n5(d("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale());var g=f.$L10n6(),h=f.$L10n7();e=(e=g)!=null?e:h;h=g==null;if(e==null){d("WAWebUserPrefsLocales").setPhoneLangPref(f.$L10n1);return babelHelpers.assertThisInitialized(f)}g=f.$L10n5(e);f.$L10n3=g;if(g==null){h?d("WAWebUserPrefsLocales").setPhoneLangPref(f.$L10n1):d("WAWebUserPrefsLocales").setUserLangPref(f.$L10n1);return babelHelpers.assertThisInitialized(f)}h=d("WAWebL10NCoerceToFBLocale").coerceWAWebL10nLocaleToFBLocale(g);f.$L10n4=h;h===f.$L10n1&&(d("WALogger").LOG(o(),e,f.$L10n1),f.$L10n2=g);void f.applyMomentLocale(g);return f}var f=e.prototype;f.init=function(a){d("WALogger").LOG(n(),a);return this.setLocale(a,d("WAWebL10NConstants").L10N_PRIORITY.SAVED,!1)};f.getLocale=function(){return this.$L10n1};f.getFullLocale=function(){return!c("gkx")("26258")?d("WAWebL10NCoerceToFBLocale").isWAWebl10nDebugLocale(this.$L10n2)?u:this.$L10n2:this.$L10n2};f.getNormalizedLocale=function(){var a;return(a=this.normalizeLocaleToWajsLocale(String(this.getLocale())))!=null?a:this.getLocale()};f.getLanguage=function(){return this.$L10n8(this.getFullLocale())};f.$L10n8=function(a){return d("bcp-47").parse(a).language};f.getRegion=function(){var a;a=(a=d("bcp-47").parse(this.getFullLocale()))==null?void 0:a.region;if(a!=null)return a;a=this.$L10n1.replace(/_/g,"-");return c("nullthrows")((a=d("bcp-47").parse(a))==null?void 0:a.region)};f.$L10n6=function(){return this.normalizeLocaleToBcp47Compliant(d("WAWebUserPrefsLocales").getUserLangPref())};f.$L10n7=function(){return this.normalizeLocaleToBcp47Compliant(d("WAWebUserPrefsLocales").getPhoneLangPref())};f.normalizeLocaleToBcp47Compliant=function(a){if(a==null)return null;var b=this.$L10n5(a);if(b!==a){d("WALogger").LOG(m(),a,b);try{new Intl.NumberFormat(b)}catch(a){d("WALogger").LOG(l(),b,d("WAWebL10NCoerceToFBLocale").DEFAULT_WA_WEB_LOCALE),b=d("WAWebL10NCoerceToFBLocale").DEFAULT_WA_WEB_LOCALE.replaceAll("_","-")}}return b};f.$L10n5=function(a){return a.replace(/@.*/,"").replace(/_/g,"-")};f.$L10n10=function(){self.setTimeout(function(){window.location.reload()},100)};f.applyMomentLocale=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.toLocaleLowerCase("en");var b;if(a===d("WAWebL10NConstants").DEFAULT_MOMENT_LOCALE.toLocaleLowerCase("en"))b=a;else{var e=[];e.push(a);if(a.match(/en/i)==null){a=a.replace(/_/g,"-");e.push(a);c("WAWebLocaleToMomentResource")[a]!=null&&e.push(c("WAWebLocaleToMomentResource")[a])}e.push(this.getLanguage());e.push(u);for(a=0;a<e.length;++a){var f=(yield d("WAWebMomentLocales").downloadAndDefineLocale(e[a]));if(f){b=e[a];break}}}b==null&&(d("WALogger").WARN(k()),b=d("WAWebL10NConstants").DEFAULT_MOMENT_LOCALE);c("WAWeb-moment").locale(b);d("WALogger").LOG(j(),b);this.customizeMomentLocale(c("WAWeb-moment").locale())});function e(b){return a.apply(this,arguments)}return e}();f.customizeMomentLocale=function(a){var b=d("WAWebL10NConstants").LOCALE_CUSTOMIZATIONS[a];b&&c("WAWeb-moment").locale(a,b)};f.checkForLocaleMismatchBetweenCookieAndUserPref=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$L10n1===this.$L10n4){d("WAWebUserPrefsLocales").setLangPrefCookieDidMismatchWithUserPref(!1);return}d("WAWebUserPrefsLocales").getLangPrefCookieDidMismatchWithUserPref()?d("WALogger").WARN(i(),this.$L10n1,this.$L10n3):this.$L10n4&&(d("WALogger").LOG(h(),this.$L10n3,this.$L10n4),yield d("WAWebBackendApi").frontendSendAndReceive("setLocalePrefCookie",{locale:this.$L10n4}),d("WAWebUserPrefsLocales").setLangPrefCookieDidMismatchWithUserPref(!0),c("justknobx")._("2237")||void this.$L10n9())});function e(){return a.apply(this,arguments)}return e}();return e}(d("WAWebBaseL10N").WAWebBaseL10n);e=new a();g["default"]=e}),98);
__d("WAWebAccentDiacriticRegex",[],(function(a,b,c,d,e,f){a=/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0BCD\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E47-\u0E4C\u0E4E\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1087-\u108D\u108F\u109A\u109B\u17C9-\u17D3\u17DD\u1939-\u193B\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DF9\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA717-\uA721\uA788\uA7F8\uA7F9\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD802[\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDF46-\uDF50]|\uD804[\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97]|\uD81A[\uDEF0-\uDEF4]|\uD81B[\uDF8F-\uDF9F]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g;b=a;f["default"]=b}),66);
__d("WAWebL10NHelpers",["WAWebABProps","WAWebAccentDiacriticRegex","WAWebL10N","latenize"],(function(a,b,c,d,e,f,g){function h(a){a===void 0&&(a="");return a.normalize("NFKD")}function a(a){a===void 0&&(a="");return c("latenize")(h(a).replace(c("WAWebAccentDiacriticRegex"),""))}function b(a){a=a.replace(/_/g,"-").split("-");return a[0].toLowerCase()}function e(a){a=a.replace(/_/g,"-").split("-");return a.length<=1?null:a[a.length-1].toUpperCase()}var i=new Set(["en-GB","en-AU","en-IN"]);function f(){var a=c("WAWebL10N").getFullLocale();return i.has(a)&&d("WAWebABProps").getABPropConfigValue("british_english_localization_enabled_web")}g.normalizeForm=h;g.removeAccents=a;g.getLanguageCodeFromLocale=b;g.getRegionCodeFromLocale=e;g.isUsingSupportedBritishEnglishLocale=f}),98);
__d("WAWebWamEnumTypeOfGroupEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP:1,SUBGROUP:2,DEFAULT_SUBGROUP:3});f.TYPE_OF_GROUP_ENUM=a}),66);
__d("WAWebGroupType",["$InternalEnum","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){f=(e=b("$InternalEnum"))({On:"on",Off:"off"});b=e({Admin:"admin",Regular:"regular"});var h=e({Server:"server",Full:"full"}),i=Object.freeze({SUBJECT:"subject",ADD:"add",PROMOTE:"promote",DEMOTE:"demote",DELETE:"delete",REMOVE:"remove",MODIFY:"modify",INVITE_CODE:"invite",DESC_ADD:"desc_add",DESC_REMOVE:"desc_remove",RESTRICT:"restrict",ANNOUNCE:"announce",NO_FORWARD:"no_frequently_forwarded",EPHEMERAL:"ephemeral",REVOKE_INVITE:"revoke_invite",SUSPEND:"suspend",GROWTH_LOCKED:"growth_locked",GROWTH_UNLOCKED:"growth_unlocked",SUB_GROUP_LINK:"sub_group_link",PARENT_GROUP_LINK:"parent_group_link",PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL:"parent_group_link_membership_approval",SIBLING_GROUP_LINK:"sibling_group_link",SUB_GROUP_UNLINK:"sub_group_unlink",PARENT_GROUP_UNLINK:"parent_group_unlink",SIBLING_GROUP_UNLINK:"sibling_group_unlink",DELETE_PARENT_GROUP:"delete_parent_group",DELETE_PARENT_GROUP_UNLINK:"delete_parent_group_unlink",DELETE_PARENT_SUB_GROUP_UNLINK:"delete_parent_sub_group_unlink",INTEGRITY_PARENT_GROUP_UNLINK:"integrity_parent_group_unlink",INTEGRITY_SUB_GROUP_UNLINK:"integrity_sub_group_unlink",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",MEMBERSHIP_APPROVAL_REQUEST:"membership_approval_request",CREATED_MEMBERSHIP_REQUESTS:"created_membership_requests",REVOKED_MEMBERSHIP_REQUESTS:"revoked_membership_requests",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",ALLOW_ADMIN_REPORTS:"allow_admin_reports",ADMIN_REPORT_RECIEVED:"admin_report_received",CREATED_SUBGROUP_SUGGESTION:"created_subgroup_suggestion",REVOKED_SUB_GROUP_SUGGESTIONS:"revoked_sub_group_suggestions",SUBGROUP_SUGGESTIONS_CHANGE_NUMBER:"subgroup_suggestions_change_number",MEMBER_ADD_MODE:"member_add_mode",GENERAL_CHAT_AUTO_ADD_DISABLED:"general_chat_auto_add_disabled",COMMUNITY_OWNER_UPDATE:"community_owner_update",HIDDEN_GROUP:"hidden_group"}),j=Object.freeze({INTEGRITY_DELETE_PARENT:"integrity_delete_parent",DELETE_PARENT:"delete_parent"}),k=Object.freeze({INVITE:"invite",LINKED_GROUP_JOIN:"linked_group_join",AUTO_ADD:"auto_add",DEFAULT_SUBGROUP_ADMIN_ADD:"default_subgroup_admin_add",DEFAULT_SUBGROUP_PROMOTE:"default_sub_group_promote",INVITE_AUTO_ADD:"invite_auto_add",GENERAL_CHAT_AUTO_ADD:"general_chat_auto_add"}),l=Object.freeze({DEFAULT_SUBGROUP_DEMOTE:"default_sub_group_demote"}),m=e({APPROVED:"approved",REJECTED:"rejected",CANCELLED:"cancelled"}),n=e.Mirrored(["DEFAULT","COMMUNITY","LINKED_SUBGROUP","LINKED_ANNOUNCEMENT_GROUP","LINKED_GENERAL_GROUP"]);function a(a){if(a.defaultSubgroup===!0)return n.LINKED_ANNOUNCEMENT_GROUP;if(a.generalSubgroup===!0)return n.LINKED_GENERAL_GROUP;if(a.parentGroup!=null)return n.LINKED_SUBGROUP;return a.isParentGroup===!0?n.COMMUNITY:n.DEFAULT}function c(a){switch(a){case n.LINKED_ANNOUNCEMENT_GROUP:return d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM.DEFAULT_SUBGROUP;case n.LINKED_SUBGROUP:return d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM.SUBGROUP;default:return d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM.GROUP}}g.GroupSettingChangeSystemMessageToggleEnabled=f;g.GroupSettingChangeSystemMessageIsAdmin=b;g.GeneralChatAutoAddDisabledReasonEnum=h;g.GROUP_ACTIONS=i;g.DELETE_REASON=j;g.ADD_REASON=k;g.REMOVE_REASON=l;g.RevokedSubGroupSuggestionReason=m;g.GroupType=n;g.getGroupTypeFromGroupMetadata=a;g.groupTypeToWamEnum=c}),98);
__d("WAWebModernizr",[],(function(a,b,c,d,e,f){function a(){return self.Modernizr}f.getModernizr=a}),66);
__d("WAWebPrimaryFeatures",["WALogger","WAWebBackendApi","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["primary features loaded"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["primaryFeatureEnabled: primary features have not been initialized!"]);i=function(){return a};return a}var j=null;function a(a){if(j==null){d("WALogger").ERROR(i());return!1}return j.has(a)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.PRIMARY_FEATURES,a),yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.PRIMARY_FEATURES,a),j=new Set(m(a)),d("WAWebBackendApi").frontendFireAndForget("setPrimaryFeatures",{primaryFeatures:Array.from(j)})});return k.apply(this,arguments)}function f(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").KEYS.PRIMARY_FEATURES))!=null?a:[];a=m(a);j=new Set(a);d("WAWebBackendApi").frontendFireAndForget("setPrimaryFeatures",{primaryFeatures:a});d("WALogger").LOG(h())});return l.apply(this,arguments)}function m(a){var b,d;a=a;if(c("gkx")("26258"))return a;b=new URLSearchParams((b=window.location.search)!=null?b:"");d=((d=b.get("primary_features_enabled"))!=null?d:"").split(",").map(function(a){return c("lodash").snakeCase(a)});a=Array.from(new Set([].concat(a,d)));var e=new Set(((d=b.get("primary_features_disabled"))!=null?d:"").split(",").map(function(a){return c("lodash").snakeCase(a)}));a=a.filter(function(a){return!e.has(a)});return a}g.primaryFeatureEnabled=a;g.setPrimaryFeatures=e;g.loadPrimaryFeatures=f}),98);
__d("WAWebBaseMirror",["lodash"],(function(a,b,c,d,e,f,g){function a(a){var b={},c=0,d=function(a){b["change:"+a]=c++};a.props&&Object.keys(a.props).forEach(d);a.session&&Object.keys(a.session).forEach(d);a.derived&&Object.keys(a.derived).forEach(d);return b}var h="change",i=32;function b(a,b){var c=[];for(var d=0;d<b.length;d++){var e=a["change:"+b[d]],f=Math.floor(e/i);e=e%i;k(c,f+1);c[f]|=1<<e}return c}d=function(){function a(a){this.state=a}var b=a.prototype;b.destructor=function(){this.state.off("all",this.onGatherEvent,this)};b.initListener=function(){this.state.on("all",this.onGatherEvent,this),this.masks=[],this.listeners=[],this.changeEvents=[]};b.onGatherEvent=function(a){if(a===h){var b=this.changeEvents;if(!b.filter(Boolean).length)return;this.onChange();this.changeEvents=[]}else{b=this.state.mirrorMask[a];if(b===void 0)return;a=b/i|0;b=b%i|0;k(this.changeEvents,a+1);this.changeEvents[a]|=1<<b}};b.onChange=function(){if(this.listeners==null)return;var a=this.state,b=this.changeEvents;c("lodash").zip(this.masks,this.listeners).forEach(function(c){var d=c[0];c=c[1];var e=Math.min(b.length,d.length);for(var f=0;f<e;f++)if(b[f]&d[f]){var g=c[0],h=c[1];g!=null&&h!=null&&g(h,a);break}})};b.addListener=function(a,b,c){this.listeners||this.initListener();this.masks.push(b);(b=this.listeners)==null?void 0:b.push([a,c])};b.removeListener=function(a){var b=this.listeners;if(b==null)return;for(var c=0;c<b.length;c++)b[c][0]===a&&(b[c][0]=null,b[c][1]=null,j(this.masks,c),j(b,c))};return a}();function j(a,b){a[b]=a[a.length-1],a.pop()}function k(a,b){if(b<=a.length)return;b=b-a.length;for(var c=0;c<b;c++)a.push(0)}g.genMirrorMask=a;g.genBitMask=b;g.BaseMirror=d}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("toposort-1.0.3",[],(function(a,b,c,d,e,f){"use strict";a={};var g={exports:a};function h(){g.exports=a=function(a){return b(c(a),a)};a.array=b;function b(a,b){var c=a.length,d=new Array(c),e={},f=c;while(f--)e[f]||g(a[f],f,[]);return d;function g(h,f,i){if(i.indexOf(h)>=0)throw new Error("Cyclic dependency: "+JSON.stringify(h));if(!~a.indexOf(h))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(h));if(e[f])return;e[f]=!0;var j=b.filter(function(a){return a[0]===h});if(f=j.length){i=i.concat(h);do{var k=j[--f][1];g(k,a.indexOf(k),i)}while(f)}d[--c]=h}}function c(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a[c];b.indexOf(e[0])<0&&b.push(e[0]);b.indexOf(e[1])<0&&b.push(e[1])}return b}}var i=!1;function j(){i||(i=!0,h());return g.exports}function b(a){switch(a){case void 0:return j()}}e.exports=b}),null);
__d("toposort",["toposort-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("toposort-1.0.3")()}),null);
__d("WAWebModelUtils",["WANullthrows","WATypeUtils","err","lodash","toposort"],(function(a,b,c,d,e,f,g){var h={sentinel:"DEFAULT VALUE PLACEHOLDER"},i={PROP:"PROP",SESSION:"SESSION",DERIVED:"DERIVED"},j=Symbol("NO_DEFAULT_VALUE"),k={PROPS:"Props",SESSION:"Session",DERIVED:"Derived",GETTER:"Getter",COLLECTION:"Collection"};function a(a){a===void 0&&(a=j);a={defaultValue:a,type:k.PROPS};return a}function b(a){a===void 0&&(a=j);a={defaultValue:a,type:k.SESSION};return a}function e(a,b){a={fn:a,deps:b,type:k.DERIVED};return a}function f(a){a={fn:a,type:k.GETTER};return a}function l(a){a={val:a,type:k.COLLECTION};return a}function m(a){a=a.defaultValue;return a===j?{}:{defaultValue:a}}var n="__x_";function o(a){return n+a}function p(a,b,e,f){if(!c("lodash").isObject(e))throw c("err")("Invalid Prop/Session definition.");var g={sk:o(b),evt:"change:"+b,attr:f};e.defaultValue!==void 0&&(g.defaultValue=e.defaultValue);a._definition[b]=g;var i=d("WATypeUtils").isFunction(g.defaultValue);if(g.defaultValue!=null&&!i)if(Array.isArray(g.defaultValue))throw c("err")("Do not return mutable types as default values as they are shared. Type: Array provided.");else if(c("lodash").isObject(g.defaultValue))throw c("err")("Do not return mutable types as default values as they are shared. Type: Object provided.");var j=g.sk;Object.defineProperty(a,b,{set:function(a){this.set(b,a)},get:function(){var a=this[j];if(a!==h)return a;return i?this[j]=g.defaultValue():g.defaultValue}})}function q(a,b,c){var d=o(b),e=c.fn;a._definition[b]=a._derived[b]={sk:d,evt:"change:"+b,attr:i.DERIVED,fn:e,deps:c.deps};Object.defineProperty(a,b,{get:function(){var a=this[d];if(a!==h)return a;a=e.call(this);this[d]=a;return a},set:function(){throw new TypeError("'"+b+"' is a derived property, it can't be set directly.")}})}function r(a){var b=[];for(var c in a){if(typeof a[c]==="function")continue;b.push([c,a[c]])}return b}function s(a){var b={},c=Object.getPrototypeOf({}),d=a;Object.getOwnPropertyNames(d).forEach(function(a){if(typeof d[a]!=="function")return;b[a]=d[a]});while((d=Object.getPrototypeOf(d))&&d!==c)Object.getOwnPropertyNames(d).forEach(function(a){if(a in b)return;b[a]=d[a]});return b}function t(a){var b=new a({},{_internalInitializationDoNotUse:!0}),d={name:a.name||"Unknown",props:{},session:{},derived:{},collections:{},isIdType:a.isIdType};a.Collection&&(d.Collection=a.Collection);a.idClass&&(d.idClass=a.idClass);a.allowedIds&&(d.allowedIds=a.allowedIds);var e=new Set(["constructor"]),f=new Set(["collection","parent","revisionNumber","__changes","__fired","__initialized"]),g=new Map(r(b).filter(function(a){var b=a[0];a=a[1];return!f.has(b)&&(a==null?void 0:a.type)===k.GETTER}).map(function(a){var b=a[0];a=a[1].fn;return[a,b]})),h=c("lodash").memoize(function(a){a=c("lodash").flatMap((a=a.dependencies)!=null?a:[],function(a){if(a.dependencyKey!=null)return[a.dependencyKey];var b=g.get(a);return b!=null?[b]:h(a)});return Array.from(new Set(a))});r(b).forEach(function(b){var g=b[0];b=b[1];if(f.has(g)||b==null)return;switch(b.type){case k.PROPS:d.props[g]=m(b);break;case k.SESSION:d.session[g]=m(b);break;case k.DERIVED:d.derived[g]=c("lodash").omit(b,"type");e.add(b.fn.name);break;case k.GETTER:var i=b.fn;d.derived[g]={fn:function(){return i(this)},deps:h(i)};e.add(i.name);break;case k.COLLECTION:d.collections[g]=b.val;break;default:throw c("err")("Invalid defineModel Class type for "+a.name+":"+g+".")}});var i=s(b);e.forEach(function(a){delete i[a]});Object.assign(d,i);return d}function u(a,b){var c;a=(c={},c[b]=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a),c)[b];return a}function v(a,b){var d,e=c("WANullthrows")(b.name);delete b.name;a=u(a,e);var f=a.prototype,g=f.__props=[],j=f.__session=[],k=f.__derived=[],l=f._collections={};e=f._definition={};var m=f._derived={},n=["props","session","derived","collections"];(d=c("lodash")).forOwn(b.props,function(a,b){g.push(b),p(f,b,a,i.PROP)});d.forOwn(b.session,function(a,b){j.push(b),p(f,b,a,i.SESSION)});d.forOwn(b.derived,function(a,b){k.push(b),q(f,b,a)});d.forOwn(b.collections,function(a,b){l[b]=a});Object.assign(f,d.omit(b,n));var o=g.concat(j),r=o.length;Object.defineProperties(f,{attributes:{get:function(){var a={};for(var b=0;b<r;++b)a[o[b]]=this[o[b]];return a}},isState:{get:function(){return!0},set:function(){throw c("err")("attempt to set isState")}}});d={};for(b=0;b<r;b++){n=o[b];"defaultValue"in e[n]&&(d[n]=h)}c("lodash").isEmpty(d)||(f.__defaults=d);if(k.length){var s=[],t={},v={};c("lodash").forOwn(m,function(a,b){v[b]=!0,c("lodash").forOwn(a.deps,function(a){v[a]=!0,(t[a]||(t[a]=[])).push(b),s.push([b,a])})});s.length&&(f._deps=t,f._topo=c("toposort").array(Object.keys(v),s).reverse(),f._topoIndexMap=new Map(f._topo.map(function(a,b){return[a,b]})))}return a}g.INIT=h;g.Attr=i;g.prop=a;g.session=b;g.derived=e;g.getter=f;g.collection=l;g.convert=t;g.stateExtend=v}),98);
__d("WAWebProxyStateFactory",["WACustomError","WALogger","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['Cannot write proxy property "',".",'" created in <',"/>. Make sure it is in your list of concerns."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['Cannot read proxy property "',".",'" created in <',"/>. Make sure it is in your list of concerns."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['Cannot read proxy property "',".",'" created in <',"/>. Make sure it is in your list of concerns."]);j=function(){return a};return a}var k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("DuplicatedProxyProperty")),l={};a=function(a,b,e){var f=b.props,g=b.session,m=b.collections,n=b.derived;b=babelHelpers.objectWithoutPropertiesLoose(b,["props","session","collections","derived"]);var o=function(a){this.$ProxyState$state=a},p={};[f,g,m,n].forEach(function(b){if(!b)return;Object.keys(b).forEach(function(b){p[b]={get:function(){c("gkx")("26258")?d("WALogger").WARN(j(),a,b,this.$ProxyState$ComponentName):d("WALogger").ERROR(i(),a,b,this.$ProxyState$ComponentName).sendLogs("Invalid ProxyState Access");return this.$ProxyState$state[b]},set:function(c){d("WALogger").ERROR(h(),a,b,this.$ProxyState$ComponentName).sendLogs("Invalid ProxyState Write"),this.$ProxyState$state[b]=c}}})});p.proxyName={value:a};p.mirrorMask={value:e};["set","get"].concat(Object.keys(b)).forEach(function(a){p[a]={value:function(){var b=this.$ProxyState$state;return b[a].apply(b,arguments)}}});o.prototype=Object.create(null,p);o.prototype.constructor=o;if(a in l)throw new k('Duplicated proxy property "'+a+'".');l[a]=o};g.ProxyStates=l;g.ProxyStateFactory=a}),98);
__d("WAWebBaseModel",["WALogger","WANullthrows","WATypeUtils","WAWebBaseMirror","WAWebCmd","WAWebEventEmitter","WAWebModelUtils","WAWebNetworkStatus","WAWebProxyStateFactory","cr:5292","err","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["\t",":"],["\\t",":"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["derived:"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["\t",":"],["\\t",":"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["session:"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["\t",":"],["\\t",":"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["props:"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Detected UI change inside a transaction in model ",".\n      This can result in a consistency issue. See https://fburl.com/aleoj4tt item #1 for details."]);n=function(){return a};return a}function a(a){return typeof a==="string"?a:a.toString()}var o=/^change:/,p=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b){var c;b===void 0&&(b={});c=e.call(this)||this;c.stale=d("WAWebModelUtils").session(!1);c.revisionNumber=1;c.__fired=null;c.__changes=null;c.__initialized=!1;if(b._internalInitializationDoNotUse)return babelHelpers.assertThisInitialized(c);c.stale=(a==null?void 0:a.stale)||c.getDefault("stale")===!0;c.parent=b.parent;c.collection=b.collection;c._initDeriveds();c._initCollections();var f=c.__defaults;f=f?babelHelpers["extends"]({},f,a):a;f&&!q(f)&&c.set(f,babelHelpers["extends"]({silent:!0},b));c.initialize();c.__initialized=!0;return c}var f=a.prototype;f.initialize=function(){if(this.collection&&this.id&&!this.collection.modelClass.prototype.isIdType(this.id)){var a=this.collection?typeof this.collection.modelClass.prototype.idClass:"N/A";throw c("err")("Model id:"+String(this.id)+" is wrong type ("+typeof this.id+" vs expected "+a+")")}this._uiObservers=0;this.mirrorMask&&(this.mirror=new(d("WAWebBaseMirror").BaseMirror)(this))};f._refreshStaleModel=function(){if(!this._uiObservers&&this.stale)return;if(this.getCollection)this.getCollection().find(this.id);else throw c("err")("base_model:_refreshStaleModel getCollection does not exist")};f.incObservers=function(a){this._uiObservers++;if(a)return;c("WAWebNetworkStatus").online&&this.stale&&(d("WAWebCmd").Cmd.uiBusy?this.listenToOnce(d("WAWebCmd").Cmd,"ui_idle",this._refreshStaleModel):this._refreshStaleModel())};f.decObservers=function(){this._uiObservers>0&&this._uiObservers--,this._uiObservers===0&&this.stopListening(d("WAWebCmd").Cmd,"ui_idle",this._refreshStaleModel)};f.hasObservers=function(){return this._uiObservers>0};f.getObservers_TEST_ONLY=function(){return null};f.addChild=function(a,b){var c={};c[a]=b;this.set(c,{silent:!0});this.listenTo(b,"all",this._getCachedEventBubblingHandler(a))};f.get=function(a){return this[a]};f.set=function(a,e,f){!c("gkx")("26258")&&(b("cr:5292")==null?void 0:b("cr:5292").currentTransaction)&&d("WALogger").WARN(n(),this.constructor.name);f=f;if(typeof a==="string")return this._set(a,e,f);f=e;return((e=f)==null?void 0:e.merge)?this._set(c("lodash").omitBy(a,function(a){return a===void 0}),f):this._set(a,f)};f._markChange=function(a,b){if(!this.__initialized)return;this._getChanges().push({key:a,oldValue:b});this.__fired&&(this.__fired[a]=!1)};f._set=function(a,b,e){var f,g=this;this.revisionNumber++;var h=!!this.__changes;f=d("WATypeUtils").isString(a)?[(f={},f[a]=b,f),e]:[a,b];var i=f[0],j=f[1],k=new Set();Object.keys(i).forEach(function(a){a=g._setKV(a,i[a],j);a==null?void 0:a.forEach(function(a){k.add(a)})});k.size>0&&(function(){var a=c("WANullthrows")(g._topo,"_topo unexpectedly undefined"),b=c("WANullthrows")(g._topoIndexMap),d=function(d){var e=a[d];if(!k.has(e))return"continue";e=g._setD(e);e==null?void 0:e.forEach(function(a){var e=c("WANullthrows")(b.get(a));if(e<d)throw c("err")("Circular derived properties / event listeners");k.add(a)})};for(var e=0;e<a.length;e++){var f=d(e);if(f==="continue")continue}})();e=j==null?void 0:j.silent;if(!e&&this.hasUnfiredChanges()){a=this.__fired={};b=this._getChanges();f=b.length>0;while(b.length){e=b.shift();var l=e.key;e=e.oldValue;if(!a[l]){a[l]=!0;var m=this._definition[l].evt;if(this.isListening(m)||this.isListening("all")){l=this[l];this.trigger(m,this,l,e)}}}(f&&this.isListening("change")||this.isListening("all"))&&this.trigger("change",this)}h||(this.__changes&&(this.__changes=null),this.__fired&&(this.__fired=null));return this};f._setKV=function(a,b,e){if(this._collections[a]){this[a].set(b,e);return}e=this._definition[a];if(!e){this[a]=b;return}else if(e.attr===d("WAWebModelUtils").Attr.DERIVED)throw c("err")("Attempting to directly set derived property: "+a);e=e.sk;var f=this[a];if(b===f)return;this[e]=b;this._markChange(a,f);return(e=this._deps)==null?void 0:e[a]};f._setD=function(a){var b=this._definition[a],c=b.sk;b=b.fn.call(this);var d=this[c];if(b===d)return;this[c]=b;this._markChange(a,d);return(c=this._deps)==null?void 0:c[a]};f.hasUnfiredChanges=function(){var a=this.__fired,b=this.__changes;if(!b)return!1;if(!a)return!0;for(var c=0;c<b.length;c++)if(!a[b[c].key])return!0;return!1};f._getChanges=function(){return this.__changes||(this.__changes=[])};f._initDeriveds=function(){var a=this;this.__derived.forEach(function(b){a[a._definition[b].sk]=d("WAWebModelUtils").INIT})};f._initCollections=function(){var a=this;c("lodash").forOwn(this._collections,function(b,c){a[c]=new b(null,{parent:a})})};f.unset=function(a,b){a=Array.isArray(a)?a:[a];this.set(c("lodash").zipObject(a),b)};f.clear=function(){this.unset([].concat(this.__props,this.__session))};f["delete"]=function(){this.stopListening()};f.reset=function(){this.set(this.__defaults)};f.toJSON=function(){return this.serialize()};f.serialize=function(){var a=this,b={};for(var d=0;d<this.__props.length;d++)b[this.__props[d]]=this[this.__props[d]];c("lodash").forOwn(this._collections,function(c,d){b[d]=a[d].serialize()});return b};f.getDefault=function(a){a=this._definition[a];if(!a)return void 0;a=a.defaultValue;return d("WATypeUtils").isFunction(a)?a():a};f._getCachedEventBubblingHandler=function(a){return function(b,c,d){o.test(b)?this.trigger("change:"+a+"."+b.split(":")[1],c,d):b==="change"&&this.trigger("change",this)}.bind(this)};a.isIdType=function(a){if(this.allowedIds&&this.allowedIds.includes(a))return!0;return this.idClass?a instanceof this.idClass:typeof a==="string"};f.pp=function(){var a=this;if(!c("gkx")("26258")){var b="#cc3333",e="#33cc33",f="#3333cc";this.__props.length&&d("WALogger").LOG(m()).color(b);this.__props.forEach(function(c){var e=a[c];d("WALogger").LOG(l(),c).color(b).devConsole(e)});this.__session.length&&d("WALogger").LOG(k()).color(e);this.__session.forEach(function(b){var c=a[b];d("WALogger").LOG(j(),b).color(e).devConsole(c)});this.__derived.length&&d("WALogger").LOG(i()).color(f);this.__derived.forEach(function(b){var c=a[b];d("WALogger").LOG(h(),b).color(f).devConsole(c)})}};return a}(c("WAWebEventEmitter"));function e(a){var b=d("WAWebModelUtils").convert(a),c=d("WAWebModelUtils").stateExtend(p,b);if(a.Proxy){var e=d("WAWebBaseMirror").genMirrorMask(b);c.prototype.mirrorMask=e;c.prototype.proxyName=a.Proxy;d("WAWebProxyStateFactory").ProxyStateFactory(a.Proxy,b,e)}return c}function q(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0}g.prop=(f=d("WAWebModelUtils")).prop;g.session=f.session;g.derived=f.derived;g.getter=f.getter;g.collection=f.collection;g.idTypeToString=a;g.BaseModel=p;g.defineModel=e}),98);
__d("WAPromiseRaceAbort",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){if(c==null)return a;var e,f=c.aborted?(h||(h=b("Promise"))).reject(new(d("WAAbortError").AbortError)()):new(h||(h=b("Promise")))(function(a,b){var f=function(){b(new(d("WAAbortError").AbortError)())};c.addEventListener("abort",f);e=function(){c.removeEventListener("abort",f)}});return(h||(h=b("Promise"))).race([f,a])["finally"](function(){e==null?void 0:e(),e=null})}g["default"]=a}),98);
__d("WASignalAggregator",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$1=!1;this.$2=new AbortController();this.$3=new Set();this.signal=this.$2.signal;this.$5=function(b){a["delete"](b.currentTarget),a.$6()}}var b=a.prototype;b.add=function(){this.$4();for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++){var e=b[d];e.aborted||(e.addEventListener("abort",this.$5),this.$3.add(e))}this.$6()};b.$6=function(){if(this.$1)return;var a=Array.from(this.$3).every(function(a){return a.aborted});if(!a)return;this.dispose();this.$2.abort()};b["delete"]=function(){this.$4(),this.$7.apply(this,arguments)};b.$7=function(){var a=!1;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];for(var e=0;e<c.length;e++){var f=c[e];this.$3["delete"](f)&&(a=!0,f.removeEventListener("abort",this.$5))}a&&this.$6()};b.$4=function(){if(this.$1)throw c("WAErr")("Attempt to modify disposed SignalAggregator")};b.dispose=function(){if(this.$1)return;this.$1=!0;for(var a=this.$3,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$7(d)}};b.getSignals__INTERNAL=function(){return this.$3};return a}();g["default"]=a}),98);
__d("WAMemoizeConcurrent",["Promise","WAAbortError","WAPromiseRaceAbort","WASignalAggregator"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=new Map();return function(g){if(g.signal.aborted)return(h||(h=b("Promise"))).reject(new(d("WAAbortError").AbortError)());var i=a.call(this,g),j=f.get(i);if(j==null||j.aggregator.signal.aborted){var k=new(c("WASignalAggregator"))(),l=babelHelpers["extends"]({},g,{signal:k.signal});j={aggregator:k,promise:e.call(this,l)["finally"](function(){k.dispose(),f["delete"](i)})};f.set(i,j)}l=g.signal||new AbortController().signal;j.aggregator.add(l);return c("WAPromiseRaceAbort")(j.promise,l)}}g["default"]=a}),98);
__d("WAWebBuildConstants",["SiteData","gkx"],(function(a,b,c,d,e,f,g){a=c("gkx")("26258")||c("gkx")("26259");b=a?"2":"3";d=a?"3000":"0";e=a?""+c("SiteData").client_revision:"0";f=b+"."+d+"."+e;a="";c("gkx")("26258")||(c("gkx")("26259")?a=".i":a=".d");c=f+a;a=self.location.origin+"/";var h="/",i=self.location.origin+"/";g.VERSION_PRIMARY=b;g.VERSION_SECONDARY=d;g.VERSION_TERTIARY=e;g.VERSION_BASE=f;g.VERSION_STR=c;g.DYN_ORIGIN=a;g.WEB_PUBLIC_PATH=h;g.BUILD_URL=i}),98);
__d("WAWebMiscBrowserUtils",["WABase64","WATimeUtils","WAWebUA","WAWebUserPrefsGeneral","lodash"],(function(a,b,c,d,e,f,g){var h=!1,i=c("lodash").debounce(function(){return h=!1},500),j=90*24*60*60;function k(){var a=new Uint8Array(16);self.crypto.getRandomValues(a);return d("WABase64").encodeB64(a)}a={id:function(){var a=d("WAWebUserPrefsGeneral").getBrowserId();if(a)return a;a=k();d("WAWebUserPrefsGeneral").setBrowserId(a);return a},persistentExpiringId:function(){var a=d("WAWebUserPrefsGeneral").getPersistentExpiringId();if(a!=null){var b=d("WATimeUtils").unixTime()-a.ts>=j;if(!b)return a.value}b={ts:d("WATimeUtils").unixTime(),value:k()};d("WAWebUserPrefsGeneral").setPersistentExpiringId(b);return b.value},info:function(){var a=l();return{os:a.os.name,version:a.os.version,name:a.browser.name,ua:a.browser.name+" "+a.browser.version}},hardRefresh:function(){this.promptUnloadGuards++,location.reload(!1)},startDownloading:function(){h=!0,i()},clearDownloading:function(){h=!1},isDownloading:function(){return h},promptUnloadGuards:0};function l(){var a=d("WAWebUA").UA.parser.getResult();if(a!=null&&a.browser.name==="Chrome"){var b;b=(b=self.navigator)==null?void 0:(b=b.userAgentData)==null?void 0:b.brands;if(b!=null){b=b.some(function(a){return a.brand==="Microsoft Edge"});b&&(a.browser.name="Edge")}}return a}g["default"]=a}),98);
__d("WAWebXHR",["Promise","WAAbortError","WALogger","WAPromiseRaceAbort","WAWebURLUtils"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["xhr.request:onabort"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["xhr.request:ontimeout"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["xhr.request:onerror"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["xhr.request:onload"]);l=function(){return a};return a}var m={GET:"GET",POST:"POST",HEAD:"HEAD",PUT:"PUT"},n={ARRAY_BUFFER:"arraybuffer",BLOB:"blob",JSON:"json"};function o(a,b){for(var c in b)a.setRequestHeader(c,b[c])}function p(a,e,f,g,n,p,q){var r=new XMLHttpRequest(),s=new(h||(h=b("Promise")))(function(b,g){r.onload=function(a){r.readyState===4?b(r):(d("WALogger").ERROR(l()),g(a))};r.onerror=function(a){d("WALogger").ERROR(k()),g(a)};r.ontimeout=function(a){d("WALogger").ERROR(j()),g(a)};p&&(r.onprogress=p);r.onabort=function(a){d("WALogger").ERROR(i()),g(a)};if(f instanceof FormData)r.open(e||m.POST,a,!0),n&&(r.responseType=n),q&&o(r,q),r.send(f);else if(f instanceof Object){var h=c("WAWebURLUtils").build(a,f);r.open(e||m.GET,h,!0);n&&(r.responseType=n);q&&o(r,q);r.send()}else r.open(e||m.GET,a,!0),n&&(r.responseType=n),q&&o(r,q),r.send()});s=c("WAPromiseRaceAbort")(s,g);s["catch"](d("WAAbortError").catchAbort(function(){r.abort()}))["catch"](function(){});return s}function a(a,b,c,d){c===void 0&&(c=null);return p(a,m.GET,null,d,b,void 0,c)}function e(a,b,c){return p(a,m.POST,b,c)}function f(a,b){return p(a,m.HEAD,null,b)}f={head:f,get:a,post:e,request:p,VERB:m,RESP_TYPE:n};g["default"]=f}),98);
__d("WAWebNetworkGetResponseIfOnline",["WAWebXHR"],(function(a,b,c,d,e,f,g){function a(a,b,d,e,f){b===void 0&&(b="GET");return c("WAWebXHR").request(a,b,d,f,e).then(function(a){return a.status&&a.status<12e3?a:null})["catch"](function(){return null})}g["default"]=a}),98);
__d("WAWebNetworkStatus",["Promise","WALogger","WAMemoizeConcurrent","WAWebBaseModel","WAWebBuildConstants","WAWebMiscBrowserUtils","WAWebNetworkGetResponseIfOnline","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] NetworkStatus ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["NetworkStatus:checkOnline errored! ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["NetworkStatus:checkOnline response ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["NetworkStatus:checkOnline simulating offline behavior"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["NetworkStatus:checkOnline checking"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitIfOffline: Continuing..."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitIfOffline: Waiting..."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitIfOffline: XHR online is false, but navigator.onLine is true, resolving promise"]);p=function(){return a};return a}var q=d("WAWebBuildConstants").DYN_ORIGIN+"status.json",r=!1;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,i=new Array(g),s=0;s<g;s++)i[s]=arguments[s];return(e=f=a.call.apply(a,[this].concat(i))||this,f.online=d("WAWebBaseModel").session(!0),f.simulatedOfflineConditions=d("WAWebBaseModel").session(!1),f.waitIfOffline=c("WAMemoizeConcurrent")(function(){return"all"},b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;if(this.online)return;if(c("WAWebMiscBrowserUtils").info().name!=="Firefox"&&navigator.onLine){d("WALogger").LOG(p());return}d("WALogger").LOG(o());yield new(h||(h=b("Promise")))(function(b){a.listenToOnce(a,"change:online",function(){d("WALogger").LOG(n()),b()})})})),f.checkOnline=c("WAMemoizeConcurrent")(function(){return"all"},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.signal;d("WALogger").LOG(m());if((r||c("gkx")("26256"))&&this.simulatedOfflineConditions){d("WALogger").LOG(l());return}try{a=(yield c("WAWebNetworkGetResponseIfOnline")(q,"GET",null,void 0,a));this.online=!!a;d("WALogger").LOG(k(),String(this.online))}catch(a){d("WALogger").WARN(j(),String(a)).devConsole(a)}});return function(b){return a.apply(this,arguments)}}()),e)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.initialize=function(){this.listenTo(this,"change:online",this.$NetworkStatus1),this.$NetworkStatus1()};f.$NetworkStatus1=function(){var a=this.online;d("WALogger").LOG(i(),a?"online":"offline").tags("comms")};f.simulateNetworkStatus=function(a){(r||c("gkx")("26256"))&&(this.online=a,this.simulatedOfflineConditions=!a)};return e}(d("WAWebBaseModel").BaseModel);e=d("WAWebBaseModel").defineModel(a);f=new e();g["default"]=f}),98);
__d("WAWebProductTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum")({IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",AVAILABLE_FOR_ANOTHER_POSTCODE:"available for another postcode",UNKNOWN:"unknown"}),h=[g.OUT_OF_STOCK,g.AVAILABLE_FOR_ANOTHER_POSTCODE],i=6;b=b("$InternalEnum")({Default:"DEFAULT",CountryOriginExempt:"COUNTRY_ORIGIN_EXEMPT"});function a(a){if(a==="APPROVED"||a==="PENDING"||a==="REJECTED")return a}function c(a){if(a==null)return;switch(a){case"TRUE":return"ISHIDDEN_TRUE";case"FALSE":return"ISHIDDEN_FALSE";default:a;return a}}function d(a){if(a==null)return;switch(a){case"COUNTRY_ORIGIN_EXEMPT":return"COMPLIANCECATEGORY_COUNTRYORIGINEXEMPT";case"DEFAULT":return"COMPLIANCECATEGORY_DEFAULT";default:a;return a}}function e(a){if(a==null)return;switch(a){case"STATUS_APPROVED":return"APPROVED";case"STATUS_PENDING":return"PENDING";case"STATUS_REJECTED":return"REJECTED";default:a}}f.ProductAvailability=g;f.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES=h;f.PRODUCT_PAGE_SIZE=i;f.ProductComplianceCategory=b;f.asProductReviewType=a;f.mapIsHiddenToWASchema=c;f.mapComplianceCategoryToWASchema=d;f.mapCollectionReviewStatusToWASchema=e}),66);
__d("WAWebWamEnumAppBuildType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEBUG:1,ALPHA:2,BETA:3,RELEASE:4});f.APP_BUILD_TYPE=a}),66);
__d("WAWebWamEnumDeviceClassification",[],(function(a,b,c,d,e,f){a=Object.freeze({MOBILE:0,TABLET:1,WEARABLES:2,VR:3,DESKTOP:4,FOLDABLE:5,AR_GLASS:6,UNDEFINED:100});f.DEVICE_CLASSIFICATION=a}),66);
__d("WAWebWamEnumPlatformType",[],(function(a,b,c,d,e,f){a=Object.freeze({IPHONE:1,ANDROID:2,BB:3,BBX:7,S40:4,SYMBIAN:5,WP:6,WEBCLIENT:8,OSMETA:11,ENT:12,SMBA:13,KAIOS:14,SMBI:15,WINDOWS:16,WEB:17,PORTAL:18,BLOKS:19,BLUEA:20,BLUEI:21,FBLITEA:22,GREENA:23,GREENI:24,IGDA:25,IGDI:26,IGLITEA:27,MLITEA:28,MSGRA:29,MSGRI:30,MSGRP:31,MSGRW:32,IGDW:33,PAGE:34,MSGRDM:35,MSGRDW:36,MSGROM:37,MSGROC:38,MSGRM:43,IGDM:44,WEARM:45,CAPI:46,XR:47,MACOS:48,WAMETA_REPL:49,ARDEV:50,WEAROS:51,MSGRVR:52,BLUEW:53,IPHONEWAMETATEST:54,MSGRAR:57,IPAD:58,WAVOIP_CLI:59,MSGRT:60,IGDT:61,ANDROIDWAMETATEST:62,MSGRSG:63,IGDSG:64,INTEROP:65,INTEROP_MSGR:66,TEST:9,UNKNOWN:10});f.PLATFORM_TYPE=a}),66);
__d("WAWebWamEnumWebcEnvCode",[],(function(a,b,c,d,e,f){a=Object.freeze({PROD:0,INTERN:1,DEV:2,E2E:3});f.WEBC_ENV_CODE=a}),66);
__d("WAWebWamEnumWebcWebPlatformType",[],(function(a,b,c,d,e,f){a=Object.freeze({WEB:1,WIN32:2,DARWIN:3,IOS_TABLET:4,ANDROID_TABLET:5,WINSTORE:6,MACSTORE:7,DARWIN_BETA:8,WIN32_BETA:9,PWA:10});f.WEBC_WEB_PLATFORM_TYPE=a}),66);
__d("WAWebWamGlobals",["WAWebWamCodegenUtils","WAWebWamEnumAppBuildType","WAWebWamEnumDeviceClassification","WAWebWamEnumPlatformType","WAWebWamEnumWebcEnvCode","WAWebWamEnumWebcWebPlatformType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineGlobal({abKey2:[4473,a.TYPES.STRING,["regular"]],appBuild:[1657,d("WAWebWamEnumAppBuildType").APP_BUILD_TYPE,["regular","private"]],appIsBetaRelease:[21,a.TYPES.BOOLEAN,["regular","private"]],appVersion:[17,a.TYPES.STRING,["regular","private"]],beaconSessionId:[18529,a.TYPES.INTEGER,["regular"]],browser:[779,a.TYPES.STRING,["regular"]],browserVersion:[295,a.TYPES.STRING,["regular"]],datacenter:[2795,a.TYPES.STRING,["regular"]],deviceClassification:[14507,d("WAWebWamEnumDeviceClassification").DEVICE_CLASSIFICATION,["regular"]],deviceName:[13,a.TYPES.STRING,["regular","private"]],deviceVersion:[4505,a.TYPES.STRING,["regular"]],expoKey:[5029,a.TYPES.STRING,["regular","private"]],isInCohort:[19129,a.TYPES.BOOLEAN,["regular"]],mcc:[5,a.TYPES.INTEGER,["regular","private"]],memClass:[655,a.TYPES.INTEGER,["regular","private"]],mnc:[3,a.TYPES.INTEGER,["regular","private"]],networkIsWifi:[23,a.TYPES.BOOLEAN,["regular"]],ocVersion:[6251,a.TYPES.INTEGER,["regular","private"]],osVersion:[15,a.TYPES.STRING,["regular","private"]],platform:[11,d("WAWebWamEnumPlatformType").PLATFORM_TYPE,["regular","private"]],psCountryCode:[6833,a.TYPES.STRING,["private"]],psId:[6005,a.TYPES.STRING,["private"]],serviceImprovementOptOut:[13293,a.TYPES.BOOLEAN,["regular","private"]],streamId:[3543,a.TYPES.INTEGER,["regular","private"]],wametaLoggerTestFilter:[15881,a.TYPES.STRING,["regular","private"]],webcBucket:[875,a.TYPES.STRING,["regular"]],webcEnv:[633,d("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE,["regular"]],webcNativeAutolaunch:[1009,a.TYPES.BOOLEAN,["regular"]],webcNativeBetaUpdates:[1007,a.TYPES.BOOLEAN,["regular"]],webcPhoneAppVersion:[1005,a.TYPES.STRING,["regular"]],webcPhoneCharging:[783,a.TYPES.BOOLEAN,["regular"]],webcPhoneDeviceManufacturer:[829,a.TYPES.STRING,["regular"]],webcPhoneDeviceModel:[831,a.TYPES.STRING,["regular"]],webcPhoneOsBuildNumber:[833,a.TYPES.STRING,["regular"]],webcPhoneOsVersion:[835,a.TYPES.STRING,["regular"]],webcPhonePlatform:[707,d("WAWebWamEnumPlatformType").PLATFORM_TYPE,["regular"]],webcRevision:[18491,a.TYPES.INTEGER,["regular"]],webcTabId:[3727,a.TYPES.STRING,["regular"]],webcWebArch:[6605,a.TYPES.STRING,["regular"]],webcWebDeviceManufacturer:[6599,a.TYPES.STRING,["regular"]],webcWebDeviceModel:[6601,a.TYPES.STRING,["regular"]],webcWebOsReleaseNumber:[6603,a.TYPES.STRING,["regular"]],webcWebPlatform:[899,d("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE,["regular","private"]],yearClass:[689,a.TYPES.INTEGER,["regular","private"]],yearClass2016:[2617,a.TYPES.INTEGER,["regular","private"]]});c=[{key:"DefaultPsId",keyHashInt:113760892,rotationPeriodDays:-1},{key:"IdPreMetrics",keyHashInt:56300709,rotationPeriodDays:-1},{key:"IdTtl90Days",keyHashInt:37887164,rotationPeriodDays:90},{key:"IdTtlDaily",keyHashInt:248614979,rotationPeriodDays:1},{key:"IdTtlMonthly",keyHashInt:191000728,rotationPeriodDays:30},{key:"IdTtlWeekly",keyHashInt:42196056,rotationPeriodDays:7}];g.Global=b;g.PrivateStatsAllIds=c}),98);
__d("WAWebServerPropsModel",["WALogger","WAWebBaseModel","WAWebPonyfillsUrlSearchParams","WAWebProductTypes.flow","WAWebRuntimeEnvironmentUtils","WAWebWamGlobals","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral] incorrect type for ephemeralMessagesAllowedValues"]);h=function(){return a};return a}var i=100*1024*1024,j=3,k=604800;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.serverPropsVersion=d("WAWebBaseModel").prop(),c.gifProvider=d("WAWebBaseModel").prop("tenor"),c.maxParticipants=d("WAWebBaseModel").prop(256),c.maxSubject=d("WAWebBaseModel").prop(25),c.maxFileSize=d("WAWebBaseModel").prop(i),c.streamingUploadChunkSize=d("WAWebBaseModel").prop(0),c.groupDescLength=d("WAWebBaseModel").prop(512),c.ephemeralMessagesAllowedValues=d("WAWebBaseModel").prop(""+k),c.hfmStringChanges=d("WAWebBaseModel").prop(!1),c.mmsCatV1ForwardHotOverrideEnabled=d("WAWebBaseModel").prop(!1),c.pttConversationWaveform=d("WAWebBaseModel").prop(!1),c.pttOotPlayback=d("WAWebBaseModel").prop(!1),c.pttPausableEnabled=d("WAWebBaseModel").prop(!1),c.pttPlaybackSpeedEnabled=d("WAWebBaseModel").prop(!1),c.pttRememberPlayPosition=d("WAWebBaseModel").prop(!1),c.mmsMediaKeyTTL=d("WAWebBaseModel").prop(Infinity),c.webSendDocumentThumbInMessageDisabled=d("WAWebBaseModel").prop(!1),c.webDownloadStatusThumbMmsEnabled=d("WAWebBaseModel").prop(!1),c.groupCallMaxParticipants=d("WAWebBaseModel").prop(0),c.webVoipMacOsMinVersion=d("WAWebBaseModel").prop(""),c.webVoipWindowsOsMinVersion=d("WAWebBaseModel").prop(""),c.syncdInlineMutationsMaxCount=d("WAWebBaseModel").prop(1e3),c.syncdPatchProtobufMaxSize=d("WAWebBaseModel").prop(100),c.syncdKeyMaxUseDays=d("WAWebBaseModel").prop(30),c.syncdWaitForKeyTimeoutDays=d("WAWebBaseModel").prop(2),c.syncdAdditionalMutations=d("WAWebBaseModel").prop(1),c.syncdSentinelTimeoutSeconds=d("WAWebBaseModel").prop(3),c.syncdPinChatEnabled=d("WAWebBaseModel").prop(!1),c.syncdQPLLoggingEnabled=d("WAWebBaseModel").prop(!1),c.webPaymentBackgroundEnabled=d("WAWebBaseModel").prop(!1),c.webBizProfileOptions=d("WAWebBaseModel").prop(j),c.shopsProductGrid=d("WAWebBaseModel").prop(!1),c.greenAlertBannerDuration=d("WAWebBaseModel").prop(0),c.webProductListMessagePageSize=d("WAWebBaseModel").prop(d("WAWebProductTypes.flow").PRODUCT_PAGE_SIZE),c.blockCatalogCreationEcommerceComplianceIndia=d("WAWebBaseModel").prop(!1),c.ecommerceComplianceIndia=d("WAWebBaseModel").prop(!1),c.smbEcommerceComplianceIndiaM4=d("WAWebBaseModel").prop(!1),c.smbEcommerceComplianceIndiaM4_5=d("WAWebBaseModel").prop(!1),c.webLogUploadDownloadCrashes=d("WAWebBaseModel").prop(!1),c.webMdMmsSyncDeletionRequest=d("WAWebBaseModel").prop(!0),c.maxKeys=d("WAWebBaseModel").prop(200),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e["delete"]=function(){a.prototype["delete"].call(this),this.updateProps({})};e.initialize=function(){a.prototype.initialize.call(this),c("gkx")("26258")!==!0&&this.updateProps({})};e.updateProps=function(a){var b=this,e=a;c("gkx")("26258")!==!0&&!d("WAWebRuntimeEnvironmentUtils").isWorker()&&(e=this.extendAndOverrideFromURLParams(e));d("WAWebWamGlobals").Global.set({webcBucket:e.bucket||null});this.__props.forEach(function(a){var c=e[a];c===void 0&&(a==="serverPropsVersion"?c=b.serverPropsVersion:c=b.getDefault(a));b.set(a,c)})};e.extendAndOverrideFromURLParams=function(a){var b=new(c("WAWebPonyfillsUrlSearchParams"))(window.location.search),d=a;this.__props.forEach(function(a){if(b.has(a)===!0){var c=b.get(a);if(c==null)return;c==="true"||c==="false"?d[a]=c==="true":!isNaN(c)&&!isNaN(parseFloat(c))?d[a]=parseFloat(c):d[a]=c}});return d};e.getEphemeralMessagesAllowedValues=function(){try{return this.ephemeralMessagesAllowedValues.split(",").map(function(a){return parseInt(a,10)})}catch(a){d("WALogger").ERROR(h()).sendLogs("ephemeral");return[k]}};return b}(d("WAWebBaseModel").BaseModel);b.Proxy="serverProps";e=d("WAWebBaseModel").defineModel(b);var l=new e({id:"1"});function a(){return l.maxFileSize}g.DEFAULT_MAX_FILE_SIZE_BYTES=i;g.UNINITIALIZED_VALUE_WEB_BIZ_PROFILE_OPTIONS=j;g.ServerPropsImpl=b;g.ServerProps=l;g.getMaxFilesSizeServerProp=a}),98);
__d("WAWebMiscGatingUtils",["WAWebABProps","WAWebGroupType","WAWebMobilePlatforms","WAWebModernizr","WAWebPrimaryFeatures","WAWebServerPropsModel","WAWebUA"],(function(a,b,c,d,e,f,g){function a(){return!d("WAWebABProps").getABPropConfigValue("disable_auto_download")}function b(a){if(a>=d("WAWebABProps").getABPropConfigValue("pnh_cag_disable_reactions_group_size"))return!1;return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("parent_group_view_enabled_for_smb_on_web"):!0}function c(){return d("WAWebServerPropsModel").ServerProps.webPaymentBackgroundEnabled?!0:!1}function e(){return d("WAWebABProps").getABPropConfigValue("web_2fa")}function f(a){a===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?a=d("WAWebABProps").getABPropConfigValue("community_announcement_group_size_limit"):a=d("WAWebABProps").getABPropConfigValue("group_size_limit")-1;(a==null||a<=0||Number.isNaN(a))&&(a=d("WAWebServerPropsModel").ServerProps.maxParticipants);return a}function h(){return d("WAWebABProps").getABPropConfigValue("recent_sticker_rollout_phase")>=3&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("recent_sticker")}function i(){return d("WAWebPrimaryFeatures").primaryFeatureEnabled("favorite_sticker")}function j(){return d("WAWebABProps").getABPropConfigValue("recent_sticker_rollout_phase")>=4||d("WAWebABProps").getABPropConfigValue("favorite_sticker_rmr_sync_enabled")}function k(){var a=d("WAWebModernizr").getModernizr();return d("WAWebUA").UA.isGecko&&!(a==null?void 0:a.exiforientation)?!1:!0}function l(){return d("WAWebABProps").getABPropConfigValue("web_group_profile_editor")}function m(){return d("WAWebABProps").getABPropConfigValue("message_level_reporting")}function n(){return d("WAWebABProps").getABPropConfigValue("web_multi_skin_toned_emoji_picker")}function o(){return d("WAWebABProps").getABPropConfigValue("web_message_list_a11y_redesign")}function p(){return d("WAWebABProps").getABPropConfigValue("web_abprop_media_links_docs_search")}function q(){return d("WAWebABProps").getABPropConfigValue("graphql_locale_remapping")}function r(){return d("WAWebABProps").getABPropConfigValue("web_fp_reparsing_for_non_add_ons")}function s(){return d("WAWebABProps").getABPropConfigValue("web_message_custom_aria_label")}function t(){return d("WAWebABProps").getABPropConfigValue("four_reactions_in_bubble_enabled")}function u(){return d("WAWebABProps").getABPropConfigValue("pnh_cag_show_masked_members")}function v(){return d("WAWebABProps").getABPropConfigValue("web_abprop_screen_lock_enabled")}function w(){return d("WAWebABProps").getABPropConfigValue("web_auto_mute_256_groups_confirmation")}function x(){return d("WAWebABProps").getABPropConfigValue("web_message_plugin_frontend_registration_enabled")}function y(){return!d("WAWebMobilePlatforms").isSMB()}function z(){return d("WAWebPrimaryFeatures").primaryFeatureEnabled("ddm_settings")&&d("WAWebABProps").getABPropConfigValue("web_privacy_settings_v2")}function A(){var a;return(a=d("WAWebABProps").getABPropConfigValue("drop_last_name"))!=null?a:!1}function B(){var a;return(a=d("WAWebABProps").getABPropConfigValue("admin_hfm_toggle"))!=null?a:!1}function C(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_rambutan_enabled")}function D(){return d("WAWebABProps").getABPropConfigValue("group_suspend_v2_enabled")}function E(){return d("WAWebABProps").getABPropConfigValue("query_verified_name_when_msg_differs")}function F(){return d("WAWebABProps").getABPropConfigValue("blue_enabled")}function G(){return d("WAWebABProps").getABPropConfigValue("blue_education_enabled")}function H(){return!d("WAWebMobilePlatforms").isSMB()?!1:d("WAWebABProps").getABPropConfigValue("blue_profile_locked_ui_enabled")}function I(){return d("WAWebABProps").getABPropConfigValue("blue_strings_enabled")}function J(){return d("WAWebABProps").getABPropConfigValue("blue_client_p0_logging_enabled")}g.webMediaAutoDownloadEnabled=a;g.cagReactionsSend=b;g.paymentBackgroundEnabled=c;g.web2FAEnabled=e;g.getGroupSizeLimit=f;g.isRecentStickersMDEnabled=h;g.isFavoriteStickersEnabled=i;g.isStickerRmrSyncEnabled=j;g.isHighQualityVideoThumbnailsEnabled=k;g.groupProfileEditorEnabled=l;g.messageLevelReportingEnabled=m;g.multiSkinToneEmojiPickerEnabled=n;g.messageListA11yRedesignEnabled=o;g.mediaLinksDocsFilteringEnabled=p;g.getGraphqlLocaleRemapping=q;g.futureproofReparsingNonAddOnsEnabled=r;g.messageCustomAriaLabelEnabled=s;g.fourReactionsInBubbleEnabled=t;g.pnhCagShowMaskedMembersEnabled=u;g.screenLockFeatureSupported=v;g.isAutoMuteConfirmationDialogEnabled=w;g.messagePluginFrontendRegistrationEnabled=x;g.isPrivacyNarrativeV1Enabled=y;g.isDefaultDisappearingMessagesEnabled=z;g.isDropLastNameEnabled=A;g.isAdminHfmToggleEnabled=B;g.isRambutanEnabled=C;g.isGroupSuspendV2Enabled=D;g.queryVerifiedNameWhenMsgDiffers=E;g.isBlueEnabled=F;g.isBlueEducationEnabled=G;g.isBlueLockingEnabled=H;g.isBlueStringsEnabled=I;g.isBlueP0LoggingEnabled=J}),98);
__d("WAWebRelayEnvironment",["JSResourceForInteraction","WAWebGraphQLConstants","WAWebGraphQLPersistedQueries","WAWebGraphQLRemapLocale","WAWebGraphQLServerError","WAWebL10N","WAWebMiscGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("JSResourceForInteraction")("relay-runtime").__setRef("WAWebRelayEnvironment").load());return{Environment:a.Environment,RecordSource:a.RecordSource,Store:a.Store,Network:a.Network,fetchQuery:a.fetchQuery,readInlineData:a.readInlineData,commitMutation:a.commitMutation}});return i.apply(this,arguments)}function j(a){switch(a){case"facebook":return d("WAWebGraphQLConstants").FACEBOOK_GRAPHQL_ENDPOINT;default:a;return d("WAWebGraphQLConstants").WHATSAPP_GRAPHQL_ENDPOINT}}function k(a){switch(a){case"facebook":return"locale";default:a;return"lang"}}function l(a){var b=a.status;a=a.statusText;throw new(d("WAWebGraphQLServerError").GraphQLServerError)({errors:[{code:b,message:a}]})}var m=new Map();function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e;e=(e=a.environmentType)!=null?e:"whatsapp";var f=m.get(e);if(f!=null)return f;f=(yield h());var g=f.Environment,i=f.Network,n=f.RecordSource;f=f.Store;var o={Accept:"application/json","Content-Type":"application/json"},p=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var f,g,h;f=(f=a.environmentType)!=null?f:"whatsapp";g=(g=d("WAWebGraphQLPersistedQueries").PersistedQueries[b.name])!=null?g:b.id;b=k(f);g=(h={access_token:(h=a==null?void 0:a.accessToken)!=null?h:d("WAWebGraphQLConstants").WHATSAPP_GRAPHQL_ACCESS_TOKEN,doc_id:g,variables:e},h[b]=d("WAWebGraphQLRemapLocale").graphQLRemapLocale(c("WAWebL10N").getFullLocale().replace("-","_"),d("WAWebMiscGatingUtils").getGraphqlLocaleRemapping()),h);e=(yield self.fetch(j(f),{method:"POST",headers:o,body:JSON.stringify(g)}));if(!e.ok){var i;try{i=(yield e.json())}catch(a){l(e)}if(((b=i)==null?void 0:b.error)!=null)throw new(d("WAWebGraphQLServerError").GraphQLServerError)({errors:[i.error]});else l(e)}h=(yield e.json());if((h==null?void 0:h.errors)!=null)throw new(d("WAWebGraphQLServerError").GraphQLServerError)({errors:h.errors});return h});return function(a,b){return e.apply(this,arguments)}}();g=new g({network:i.create(p),store:new f(new n())});m.set(e,g);return g});return n.apply(this,arguments)}g.requireRelayRuntime=h;g.getEnvironment=a}),98);
__d("WAWebRelayClient",["Promise","WAWebGraphQLServerError","WAWebRelayEnvironment","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function a(a){throw c("err")("Invariant Violation")}function e(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c===void 0?{}:c;var e=c.eventLogger,f=c.environmentType,g=c.accessToken,h=c.getInlineDataReader;c=babelHelpers.objectWithoutPropertiesLoose(c,["eventLogger","environmentType","accessToken","getInlineDataReader"]);var i=(yield d("WAWebRelayEnvironment").requireRelayRuntime()),j=i.fetchQuery;i=i.readInlineData;try{f=(yield d("WAWebRelayEnvironment").getEnvironment({environmentType:f,accessToken:g}));g=(yield j)(f,a,b,c).toPromise();e==null?void 0:e.success();h==null?void 0:h(i);return g}catch(a){a instanceof d("WAWebGraphQLServerError").GraphQLServerError&&(e==null?void 0:e.failure(a.source.errors));throw a}});return i.apply(this,arguments)}function f(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e=e===void 0?{}:e;var f=e.eventLogger,g=e.environmentType,i=e.accessToken,j=e.getInlineDataReader,k=babelHelpers.objectWithoutPropertiesLoose(e,["eventLogger","environmentType","accessToken","getInlineDataReader"]);e=(yield d("WAWebRelayEnvironment").requireRelayRuntime());var l=e.commitMutation,m=e.readInlineData;try{var n=(yield d("WAWebRelayEnvironment").getEnvironment({environmentType:g,accessToken:i}));return new(h||(h=b("Promise")))(function(b,d){l(n,babelHelpers["extends"]({mutation:a,variables:c},k,{onCompleted:function(a){f==null?void 0:f.success(),j==null?void 0:j(m),b(a)},onError:function(a){d(a)}}))})}catch(a){a instanceof d("WAWebGraphQLServerError").GraphQLServerError&&(f==null?void 0:f.failure(a.source.errors));throw a}});return j.apply(this,arguments)}g.graphql=a;g.fetchQuery=e;g.commitMutation=f}),98);
__d("WAWebMexClient",["WAWebMexNativeClient","WAWebRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return d("WAWebMexNativeClient").fetchQuery(a,b)});return h.apply(this,arguments)}g.graphql=d("WAWebRelayClient").graphql;g.fetchQuery=a}),98);
__d("WAWebMexLogNewsletterExposureJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"XWA2NewsletterLogExposureResponse",kind:"LinkedField",name:"xwa2_newsletter_log_exposure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexLogNewsletterExposureJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexLogNewsletterExposureJobMutation",selections:b},params:{id:"7853928111369979",metadata:{},name:"WAWebMexLogNewsletterExposureJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebNewsletterQueryUtils",["WAJids","WAWebCommonNewsletterEnums","WAWebWid"],(function(a,b,c,d,e,f,g){function h(a){if(a==null)return"guest";switch(a){case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin:return"admin";case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner:return"owner";case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber:return"subscriber";default:return"guest"}}function a(a,b,e){e=j(e);if(c("WAWebWid").isNewsletter(a))return{jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs:{jidQueryIQPayload:{anyJid:d("WAJids").toNewsletterJid(a),anyViewRole:h(b),allNewsletterMetadataIQRequestPayloadMixinArgs:e}}};e.hasNewsletterMembershipField;e.hasNewsletterMutedField;e.newsletterPictureFieldMixinArgs;e=babelHelpers.objectWithoutPropertiesLoose(e,["hasNewsletterMembershipField","hasNewsletterMutedField","newsletterPictureFieldMixinArgs"]);return{jidQueryOrDeprecatedInviteQueryOrInviteQueryIQPayloadMixinGroupArgs:{inviteQueryIQPayload:babelHelpers["extends"]({anyKey:a,anyViewRole:h(b)},e,{newsletterPreviewTypePictureFieldMixinArgs:{baseNewsletterPictureFieldMixinArgs:{}}})}}}function i(){return{pictureArgs:[{pictureType:"image"},{pictureType:"preview"}]}}function j(a){return a==null?{hasNewsletterCreationTimeField:!0,hasNewsletterNameField:!0,newsletterPictureFieldMixinArgs:i(),hasNewsletterDescriptionField:!0,hasNewsletterInviteLinkField:!0,hasNewsletterHandleField:!0,hasNewsletterSubscribersField:!0,hasNewsletterPrivacyField:!0,hasNewsletterVerificationField:!0,hasNewsletterLinkedAccountsField:!0,hasNewsletterMembershipField:!0,hasNewsletterMutedField:!0,hasNewsletterStateField:!0}:{hasNewsletterCreationTimeField:a.creationTime,hasNewsletterNameField:a.name,newsletterPictureFieldMixinArgs:a.picture===!0?i():void 0,hasNewsletterDescriptionField:a.description,hasNewsletterInviteLinkField:a.inviteLink,hasNewsletterHandleField:a.handle,hasNewsletterSubscribersField:a.subscribers,hasNewsletterPrivacyField:a.privacy,hasNewsletterVerificationField:a.verification,hasNewsletterLinkedAccountsField:a.linkedAccounts,hasNewsletterMembershipField:a.membership,hasNewsletterMutedField:a.membership,hasNewsletterStateField:a.state}}function b(a){return c("WAWebWid").isNewsletter(a)?{queryNewsletterJIDParams:{anyJid:d("WAJids").toNewsletterJid(a)}}:{queryNewsletterInviteParams:{anyKey:a}}}function e(a){switch(a){case d("WAWebCommonNewsletterEnums").NewsletterCapability.Insights:return"INSIGHTS"}}g.getNewsletterMetadataQueryParamArgs=a;g.getNewsletterMetadataArgs=j;g.getNewsletterMessagesQueryParams=b;g.getNewsletterCapabilityFromEnum=e}),98);
__d("WAWebMexLogNewsletterExposureJob",["WALogger","WAWebMexClient","WAWebMexLogNewsletterExposureJobMutation.graphql","WAWebNewsletterQueryUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][NEWSLETTER] logged newsletter capability exposure"]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexLogNewsletterExposureJobMutation.graphql");function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c={input:{newsletter_id:a,capability:d("WAWebNewsletterQueryUtils").getNewsletterCapabilityFromEnum(b)}};c=(yield d("WAWebMexClient").fetchQuery(j,c));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({newsletterJid:a,capability:b,response:c})});return k.apply(this,arguments)}g.mexLogNewsletterExposure=a}),98);
__d("WAJobPriorityBucket",["WAJobOrchestratorTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskDone found jobId: "," in scheduled tasks"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskPending found jobId: "," in pending tasks"]);i=function(){return a};return a}a=function(){function a(a){this.tasks=[];this.pendingTasks=[];this.lastJobStartedTimestampMs=null;this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}}var b=a.prototype;b.updateConfig=function(a){this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}};b.getStats=function(){return[].concat(this.tasks,this.pendingTasks).reduce(function(a,b){var c;c=(c=a[b.jobName])!=null?c:0;a[b.jobName]=c+1;return a},{})};b.next=function(){var a=this;if(this.tasks.length===0)return null;var b=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),c=this.tasks.filter(function(c){var e;return((e=b.get(c.jobName))!=null?e:0)<((e=a.jobMaxConcurrency[c.jobName])!=null?e:d("WAJobOrchestratorTypes").DEFAULT_CONCURRENCY)});return c.length>0?[c[0]]:null};b.add=function(a,b,c,d){c={jobId:c,jobInfo:b,jobName:a,run:d};this.tasks.push(c);return c};b.markJobTaskPending=function(a){this.pendingTasks.includes(function(b){return b.jobId===a.jobId})&&d("WALogger").ERROR(i(),a.jobId).sendLogs("JobOrchestrator::markJobTaskPending"),this.lastJobStartedTimestampMs=Date.now(),this.pendingTasks.push(a),this.tasks=this.tasks.filter(function(b){return b.jobId!==a.jobId})};b.markJobTaskDone=function(a){this.pendingTasks=this.pendingTasks.filter(function(b){return b.jobId!==a}),this.tasks.includes(function(b){return b.jobId===a})&&d("WALogger").ERROR(h(),a).sendLogs("JobOrchestrator::markJobTaskDone")};b.count=function(){return this.tasks.length};b.pendingCount=function(){return this.pendingTasks.length};b.clearWaitingTasks=function(){this.tasks=[]};b.clear=function(){this.tasks=[],this.pendingTasks=[]};b.getLastJobStartedTimestamp=function(){return this.lastJobStartedTimestampMs};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.next=function(){var a=this,b,c;if(this.tasks.length===0)return null;var d=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),e=this.tasks.filter(function(b){var c;return((c=d.get(b.jobName))!=null?c:0)<((c=a.jobMaxConcurrency[b.jobName])!=null?c:1)});if(e.length===0)return null;b=(b=this.jobMaxConcurrency[e[0].jobName])!=null?b:1;c=(c=d.get(e[0].jobName))!=null?c:0;if(b>1&&c<b){var f=e.filter(function(a){return a.jobName===e[0].jobName});b=Math.min(f.length,b-c);return f.slice(0,b)}return[e[0]]};return b}(a);g.BaseJobBucket=a;g.LowJobBucket=b}),98);
__d("WAMetrics",["Promise","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WATimeUtils").performanceAbsoluteNow();return new(h||(h=b("Promise")))(function(b){setTimeout(function(){b(d("WATimeUtils").performanceAbsoluteNow()-a)},0)})}g.getEventLoopDelay=a}),98);
__d("WAConcurrentBucketJobQueue",["Promise","WABase64","WACustomError","WAErr","WAJobOrchestratorTypes","WAJobPriorityBucket","WALogger","WAMetrics","WANullthrows","WAPromiseTimeout","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: "," exceeding the timeout, release the thread."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: updated WAConcurrentBucketJobQueue config"]);j=function(){return a};return a}var k=30,l=new Map([[d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,5],[d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,1]]);a=function(){function a(){this.$1=!1,this.$2=0,this.$3=0,this.$4=0,this.$5=new Map(),this.$6=new Map(),this.$7=new Map(),this.$9=0}var e=a.prototype;e.init=function(a,b){var e,f,g;if(this.$1)throw c("WAErr")("WAConcurrentBucketJobQueue has already initialized");this.$4=(e=a==null?void 0:a.bestEffortWaitTimeoutSec)!=null?e:k;this.$2=a.maxConcurrency;this.$3=a.maxConcurrency;this.$8=b;this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota);this.$6=new Map(this.$7);this.$5=new Map();this.$9=Date.now();b=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});e=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});f=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(f=a.maxConcurrencyPerJob)!=null?f:{}});g=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(g=a.maxConcurrencyPerJob)!=null?g:{}});a=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(a=a.maxConcurrencyPerJob)!=null?a:{}});this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.OFFLINE,g);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC,a);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,e);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,f);this.$1=!0};e.updateConfig=function(a){this.$3+=a.maxConcurrency-this.$2,this.$2=a.maxConcurrency,this.$5.forEach(function(b){return b.updateConfig({jobMaxConcurrencyMap:(b=a.maxConcurrencyPerJob)!=null?b:{}})}),this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota),d("WALogger").LOG(j())};e.isInitialized=function(){return this.$1};e.clearQueue=function(){if(!this.$1)throw c("WAErr")("WAConcurrentBucketJobQueue not initialized");this.$5.forEach(function(a){return a.clear()})};e.clearQueueByPriority=function(a){if(!this.$1)throw c("WAErr")("WAConcurrentBucketJobQueue not initialized");(a=this.$5.get(a))==null?void 0:a.clearWaitingTasks()};e.getIntStats=function(){var a=this,b=function(b){var c;b=a.$5.get(b);return((c=b==null?void 0:b.count())!=null?c:0)+((c=b==null?void 0:b.pendingCount())!=null?c:0)};return{highPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.getStringStats=function(){var a=this,b=function(b){var c=(b=(b=a.$5.get(b))==null?void 0:b.getStats())!=null?b:{};b=Object.keys(c).reduce(function(a,b){var d=a[0];a=a[1];var e=c[b];return e>d?[e,b]:[d,a]},[0,null]);b=b[1];return b};return{highPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.enqueue=function(a,e,f,g){var i,j=this;if(!this.$1)return(h||(h=b("Promise"))).reject(c("WAErr")("WAConcurrentBucketJobQueue not initialized"));var k,l,m=new(h||(h=b("Promise")))(function(a,b){k=a,l=b}),n=babelHelpers["extends"]({priority:d("WAJobOrchestratorTypes").DEFAULT_JOB_PRIORITY},f),o=this.getJobBucketByType(n.priority);if(!o)return(h||(h=b("Promise"))).reject(c("WAErr")("WAConcurrentBucketJobQueue no bucket for job with name "+a+" was found."));void d("WAMetrics").getEventLoopDelay().then(function(a){(g==null?void 0:g.isActive())&&(g==null?void 0:g.addPoint("measure_event_loop_delay",{"int":{eventLoopDelay:a}}))});g==null?void 0:g.addPoint("scheduling_job",{string:babelHelpers["extends"]({},this.getStringStats(),{priority:n.priority}),"int":babelHelpers["extends"]({},this.getIntStats(),{maxTimeoutMs:(i=f==null?void 0:f.maxTimeoutMs)!=null?i:0})});var p=n.priority+"-"+a+"-"+((i=f==null?void 0:f.jobId)!=null?i:d("WABase64").randomBase64(8));i=o.add(a,n,p,function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.prev=0;j.$8.logJobStarted(p);c.next=4;return b("regeneratorRuntime").awrap(j.$12(e(),f==null?void 0:f.maxTimeoutMs));case 4:a=c.sent;j.$8.logJobCompleted(p);k(a);c.next=13;break;case 9:c.prev=9,c.t0=c["catch"](0),c.t0 instanceof d("WACustomError").TimeoutError?j.$8.logJobTimeout(p):j.$8.logJobError(p),l(c.t0);case 13:case"end":return c.stop()}},null,this,[[0,9]])});this.$8.logJobCreated({jobId:p,jobName:a,jobPriority:n.priority,pendingJobsCount:o.count()});f&&f.priority===d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION&&void this.$13(i);this.$14();return m};e.getAvailableThreadsCount=function(){return this.$3};e.getJobQuotaConfig=function(){return this.$7};e.getRemainingJobCountMap=function(){return this.$6};e.getJobBucketByType=function(a){return this.$5.get(a)};e.getSnapshot=function(a){a=this.getJobBucketByType(a);return!a?null:a.getStats()};e.$11=function(a){var b;!a?b=new Map(l):b=new Map(a);b.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,0);return b};e.$15=function(a){return(a=this.$6.get(a))!=null?a:0};e.$16=function(){this.$6=new Map(this.$7)};e.$17=function(a){var b=this;a===void 0&&(a=!0);var c=0,e=null,f=0;this.$5.forEach(function(a,d){c+=a==null?void 0:a.count();f+=b.$15(d);if(e!=null)return;a.count()>0&&b.$15(d)>0&&(e=a)});var g=e==null||f===0;g&&this.$16();if(this.$18(c,g))return this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);return e==null&&a?this.$17(!1):e};e.$18=function(a,b){var c=this;function e(a,b){var c=Date.now();return a>c?!1:c-a<b*1e3}function f(a,b){a=Math.ceil(a-Date.now())+b*1e3;return a>0?a:0}var g=this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);a=a-((a=g==null?void 0:g.count())!=null?a:0);var h=g==null?void 0:g.getLastJobStartedTimestamp();if((g==null?void 0:g.count())===0)return!1;if(h==null&&e(this.$9,this.$4)){if(this.$10==null){g=f(this.$9,this.$4);this.$10=setTimeout(function(){c.$14(),c.$10=null},g)}return!1}return a>0&&h!=null&&e(h,this.$4)?!1:b};e.$19=function(a){a=this.$20(a);return c("WANullthrows")(this.$5.get(a))};e.$20=function(a){var b=a.split("-")[0];b=d("WAJobOrchestratorTypes").JOB_PRIORITY.cast(b);if(!b)throw c("WAErr")("ConcurrentBucketQueue cannot extract known job priority type from id: "+a);return b};e.$21=function(a){a=this.$20(a);this.$15(a)>0?this.$6.set(a,this.$15(a)-1):this.$6.set(a,0)};e.$14=function(){var a=this;while(this.$3>0){var b=this.$17();b=b==null?void 0:b.next();if(b==null)break;b.forEach(function(b){a.$21(b.jobId),void a.$13(b)})}};e.$12=function(a,b){return b!==void 0?d("WAPromiseTimeout").promiseTimeout(a,b):a};e.$13=function(a){var c=this,e,f,g,h,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=this.$19(a.jobId);this.$3--;e.markJobTaskPending(a);f=a.run,g=a.jobId,h=a.jobName;k.prev=4;k.next=7;return b("regeneratorRuntime").awrap(this.$12(f(),((j=a.jobInfo)==null?void 0:j.maxTimeoutMs)===void 0?d("WAJobOrchestratorTypes").DEFAULT_JOB_TIMEOUT_MS:void 0));case 7:k.next=17;break;case 9:k.prev=9;k.t0=k["catch"](4);if(!(k.t0 instanceof d("WACustomError").TimeoutError)){k.next=16;break}this.$8.logJobTimeout(g);d("WALogger").LOG(i(),h);k.next=17;break;case 16:throw k.t0;case 17:k.prev=17;this.$3++;e.markJobTaskDone(g);this.$3>0&&setTimeout(function(){return c.$14()},0);return k.finish(17);case 22:case"end":return k.stop()}},null,this,[[4,9,17,22]])};return a}();g.WAConcurrentBucketJobQueue=a}),98);
__d("WADefaultJobNoQueue",["WAErr","WAHex","WAJobOrchestratorTypes","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$2=!1}var e=a.prototype;e.init=function(a,b){if(this.$2)throw c("WAErr")("DefaultNoQueue has already initialized");this.$1=b;this.$2=!0};e.updateConfig=function(a){};e.isInitialized=function(){return this.$2};e.clearQueue=function(){};e.clearQueueByPriority=function(a){};e.getSnapshot=function(){throw c("WAErr")("getSnapshot is not implemented for DefaultNoQueue")};e.enqueue=function(a,c,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:h=(f=e==null?void 0:e.jobId)!=null?f:d("WAHex").randomHex(8).substr(0,64);this.$1.logJobCreated({jobId:h,jobName:a,jobPriority:(g=e==null?void 0:e.priority)!=null?g:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,pendingJobsCount:0});j.prev=2;this.$1.logJobStarted(h);j.next=6;return b("regeneratorRuntime").awrap(c());case 6:i=j.sent;this.$1.logJobCompleted(h);return j.abrupt("return",i);case 11:j.prev=11;j.t0=j["catch"](2);this.$1.logJobError(h);throw j.t0;case 15:case"end":return j.stop()}},null,this,[[2,11]])};return a}();g.WADefaultJobNoQueue=a}),98);
__d("WAWebJobOrchestratorHelper",[],(function(a,b,c,d,e,f){function g(a,b){return b instanceof Map||b instanceof Set?Array.from(b):b}function a(a,b){var c;if(a.maxConcurrency!==b.maxConcurrency)return!0;if(((c=a.jobPrioritiesQuota)==null?void 0:c.size)!==((c=b.jobPrioritiesQuota)==null?void 0:c.size))return!0;return Object.keys((c=a.maxConcurrencyPerJob)!=null?c:{}).length!==Object.keys((c=b.maxConcurrencyPerJob)!=null?c:{}).length?!0:JSON.stringify(a,g)!==JSON.stringify(b,g)}f.hasConfigChanged=a}),66);
__d("WAWebOrchestratorJobInfoEvent",[],(function(a,b,c,d,e,f){a=function(){function a(a,b,c,d){this.jobName=a,this.scenario=d,this.pendingJobsCount=c,this.jobPriority=b}var b=a.prototype;b.logJobAdded=function(){this.webcJobAddedT=Date.now()};b.logJobStarted=function(){this.webcJobStartedT=Date.now()};b.logJobCompleted=function(a){this.webcJobCompletedT=Date.now(),this.jobResultType=a};return a}();f.JobInfoEvent=a}),66);
__d("WAWebWamEnumWebcJobResultTypeCode",[],(function(a,b,c,d,e,f){a=Object.freeze({COMPLETED:0,ERROR:1,TIMEOUT:2,ABORTED:3});f.WEBC_JOB_RESULT_TYPE_CODE=a}),66);
__d("WAWebWebcJobInfoWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcJobInfo:[3054,{jobName:[1,a.TYPES.STRING],jobPriority:[2,a.TYPES.STRING],jobResultType:[5,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE],pendingJobsCount:[4,a.TYPES.INTEGER],scenario:[3,d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE],webcJobAddedT:[6,a.TYPES.INTEGER],webcJobCompletedT:[8,a.TYPES.INTEGER],webcJobStartedT:[7,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcJobInfo:[]});g.WebcJobInfoWamEvent=b}),98);
__d("WAWebOrchestratorJobStatsLogger",["WALogger","WAWebBrokerGlobalAppState","WAWebOrchestratorJobInfoEvent","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType","WAWebWebcJobInfoWamEvent","cr:4324","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] "," execution time: "," ms, waiting time: "," ms, success: ",""]);h=function(){return a};return a}a=function(){function a(){this.$1=new Map()}var e=a.prototype;e.logJobCreated=function(a){if(c("gkx")("26258"))return;var b=a.jobName,e=a.jobId,f=a.jobPriority;a=a.pendingJobsCount;var g=c("WAWebBrokerGlobalAppState").getCurrentScenario();b=new(d("WAWebOrchestratorJobInfoEvent").JobInfoEvent)(b,f,a,g);b.logJobAdded();this.$1.set(e,b)};e.logJobStarted=function(a){if(c("gkx")("26258"))return;a=this.$1.get(a);a==null?void 0:a.logJobStarted()};e.logJobCompleted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED)};e.logJobError=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ERROR)};e.logJobTimeout=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.TIMEOUT)};e.logJobAborted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ABORTED)};e.$2=function(a,b){if(c("gkx")("26258"))return;var d=this.$1.get(a);d==null?void 0:d.logJobCompleted(b);this.$3(d);this.$1["delete"](a)};e.$3=function(a){if(!a)return;var c=a.jobName,e=a.webcJobCompletedT,f=a.webcJobStartedT,g=a.webcJobAddedT,i=a.jobResultType;e=e-f;f=f-g;g=i===d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED;d("WALogger").LOG(h(),c,e,f,g);i=new(d("WAWebWebcJobInfoWamEvent").WebcJobInfoWamEvent)({jobName:a.jobName,jobPriority:a.jobPriority,jobResultType:a.jobResultType,pendingJobsCount:a.pendingJobsCount,scenario:a.scenario,webcJobAddedT:a.webcJobAddedT,webcJobCompletedT:a.webcJobCompletedT,webcJobStartedT:a.webcJobStartedT});if(i.scenario===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE){f=(e=b("cr:4324")==null?void 0:b("cr:4324").JOB_EVENT_SAMPLING_RATE[c])!=null?e:1;i.weight=f}i.commit()};return a}();g.JobStatsLogger=a}),98);
__d("WAWebJobOrchestrator",["WAConcurrentBucketJobQueue","WADefaultJobNoQueue","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebBrokerGlobalAppState","WAWebJobOrchestratorHelper","WAWebOrchestratorJobStatsLogger","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] config changed "]);h=function(){return a};return a}var i={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[(b=d("WAJobOrchestratorTypes")).JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,3],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},j={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[b.JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,1],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},k="default",l="bucket";function m(){var a=c("WAWebBrokerGlobalAppState").getCurrentScenario();if(a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE)return i;return a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME?j:i}var n=i,o;function p(){o||(o=new(d("WAWebOrchestratorJobStatsLogger").JobStatsLogger)());return o}var q={};function a(a){a===void 0&&(a=!1);a=a?k:l;var b=m(),c;if(q[a]){d("WAWebJobOrchestratorHelper").hasConfigChanged(n,b)&&(d("WALogger").LOG(h()),n=b,q[a].updateConfig(b));return q[a]}switch(a){case"bucket":c=new(d("WAConcurrentBucketJobQueue").WAConcurrentBucketJobQueue)();break;default:c=new(d("WADefaultJobNoQueue").WADefaultJobNoQueue)();break}c.init(b,p());q[a]=c;n=b;return c}g.getInstance=a}),98);
__d("WAWebOrchestratorNonPersistedJob",["WAJobOrchestratorTypes","WAWebJobOrchestrator","err"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(typeof b!=="function")throw c("err")("getNonPersistJob got invalid function param");var f=d("WAWebJobOrchestrator").getInstance((e==null?void 0:e.priority)===d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP);return{fireAndForget:function(){var c=arguments;f.enqueue(a,function(){return b.apply(null,c)},e)},waitUntilCompleted:function(){var c=arguments,d=f.enqueue(a,function(){return b.apply(null,c)},e);return d}}}g.createNonPersistedJob=a}),98);
__d("WAWebNewsletterLogExposureJob",["WAJobOrchestratorTypes","WAWebMexLogNewsletterExposureJob","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("logNewsletterExposure",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebMexLogNewsletterExposureJob").mexLogNewsletterExposure(a,c)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted()}g.logNewsletterExposure=a}),98);
__d("WAWebNewsletterErrors",["WACustomError"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}((a=d("WACustomError")).customError("UnexpectedNonNewsletterJidError"));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnexpectedNonNewsletterJidError"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("MissingNewsletterServerIdError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("NewsletterMediaUploadError"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnexpectedNewsletterQuotedParticipantMismatchError"));g.UnexpectedNonNewsletterJidError=b;g.UnexpectedNonNewsletterChatError=c;g.MissingNewsletterServerIdError=e;g.NewsletterMediaUploadError=f;g.UnexpectedNewsletterQuotedParticipantMismatchError=d}),98);
__d("WAWebNewsletterValidationUtils",["WAJids","WALogger","WAWebNewsletterErrors"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a valid newsletter JID"]);h=function(){return a};return a}function a(a){i(a);return d("WAJids").toNewsletterJid(a)}function i(a){var b=d("WAJids").validateNewsletterJid(a)!=null;if(!b){d("WALogger").ERROR(h(),a);throw new(d("WAWebNewsletterErrors").UnexpectedNonNewsletterJidError)()}}g.toNewsletterJidOrThrow=a;g.validateNewsletterJidOrThrow=i}),98);
__d("WAWebLogNewsletterExposureAction",["WALogger","WAWebNewsletterLogExposureJob","WAWebNewsletterValidationUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][logNewsletterExposureAction] failed to log exposure"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var c=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a.id.toJid());return d("WAWebNewsletterLogExposureJob").logNewsletterExposure(c,b)}catch(c){d("WALogger").ERROR(h()).tags("newsletter").devConsole(c,a.id,b).sendLogs("log-newsletter-exposure-failed")}});return i.apply(this,arguments)}g.logNewsletterExposureAction=a}),98);
__d("WAWebNewsletterDirectoryCategoryUtils",["$InternalEnum","WALogger","WAWebGetEnumValuesFromConfig"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected category: ",""]);h=function(){return a};return a}var i=b("$InternalEnum")({Business:1,Entertainment:2,Lifestyle:3,News:4,Organizations:5,People:6,Sports:7,SpecialEvents:8,SpecialEvents2:9,SpecialEvents3:10,SpecialEvents4:11,SpecialEvents5:12});function a(a){switch(a){case"BUSINESS":return i.Business;case"ENTERTAINMENT":return i.Entertainment;case"LIFESTYLE":return i.Lifestyle;case"NEWS":return i.News;case"ORGANIZATIONS":return i.Organizations;case"PEOPLE":return i.People;case"SPORTS":return i.Sports;case"SPECIAL_EVENTS":return i.SpecialEvents;case"SPECIAL_EVENTS_2":return i.SpecialEvents2;case"SPECIAL_EVENTS_3":return i.SpecialEvents3;case"SPECIAL_EVENTS_4":return i.SpecialEvents4;case"SPECIAL_EVENTS_5":return i.SpecialEvents5;default:a;d("WALogger").WARN(h(),a).tags("newsletter-directory-category").sendLogs("Unexpected newsletter directory category");return i.Business}}function c(a){switch(a){case i.Business:return"BUSINESS";case i.Entertainment:return"ENTERTAINMENT";case i.Lifestyle:return"LIFESTYLE";case i.News:return"NEWS";case i.Organizations:return"ORGANIZATIONS";case i.People:return"PEOPLE";case i.Sports:return"SPORTS";case i.SpecialEvents:return"SPECIAL_EVENTS";case i.SpecialEvents2:return"SPECIAL_EVENTS_2";case i.SpecialEvents3:return"SPECIAL_EVENTS_3";case i.SpecialEvents4:return"SPECIAL_EVENTS_4";case i.SpecialEvents5:return"SPECIAL_EVENTS_5"}}function e(a){return d("WAWebGetEnumValuesFromConfig").getEnumValuesFromConfig({config:a,enumCastFunction:function(a){return i.cast(a)}})}g.NewsletterDirectoryCategoryType=i;g.getNewsletterDirectoryCategoryTypeFromValue=a;g.getCategoryValueFromEnum=c;g.getNewsletterDirectoryCategoryTypesFromConfig=e}),98);
__d("WAWebNewsletterDirectoryFilterUtils",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum")({Featured:"FEATURED",New:"NEW",Popular:"POPULAR",Recommended:"RECOMMENDED",Trending:"TRENDING"}),h=b("$InternalEnum")({Recommended:1,Trending:2,Featured:3,New:4,Popular:5,Country:6});function a(a){switch(a){case h.Recommended:case h.Country:return g.Recommended;case h.Trending:return g.Trending;case h.Featured:return g.Featured;case h.New:return g.New;case h.Popular:return g.Popular}}function c(a){switch(a){case g.Recommended:return h.Recommended;case g.Trending:return h.Trending;case g.Featured:return h.Featured;case g.New:return h.New;case g.Popular:return h.Popular}}f.NewsletterDirectoryListView=g;f.NewsletterDirectoryFilterType=h;f.getNewsletterDirectoryListViewFromFilter=a;f.getNewsletterDirectoryFilterFromListView=c}),66);
__d("WAWebNewsletterMembershipUtil",["WAWebCommonNewsletterEnums"],(function(a,b,c,d,e,f,g){function a(a){return(a==null?void 0:a.membershipType)===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber}function b(a){return h(a)||i(a)}function h(a){return(a==null?void 0:a.membershipType)===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner}function i(a){return(a==null?void 0:a.membershipType)===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin}function c(a){return(a==null?void 0:a.membershipType)===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest}g.iAmSubscriber=a;g.iAmAdminOrOwner=b;g.iAmOwner=h;g.iAmAdmin=i;g.iAmGuest=c}),98);
__d("WAWebNewsletterGatingUtils",["$InternalEnum","WAWebABProps","WAWebCommonNewsletterEnums","WAWebGetEnumValuesFromConfig","WAWebLogNewsletterExposureAction","WAWebMobilePlatforms","WAWebMsgType","WAWebNewsletterDirectoryCategoryUtils","WAWebNewsletterDirectoryFilterUtils","WAWebNewsletterFutureProofUtils","WAWebNewsletterMembershipUtil","WAWebPrimaryFeatures","WAWebStateUtils","gkx"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({Disabled:0,NeedsUpgrade:1,Enabled:2}),i=b("$InternalEnum")({Disabled:0,NeedsUpgrade:1,Enabled:2,AvailableOnPhone:3}),j=b("$InternalEnum")({Disabled:0,EnabledAdminsOnly:1,EnabledAdminsAndFollowers:2,EnabledEveryone:3});function k(){return d("WAWebPrimaryFeatures").primaryFeatureEnabled("newsletter")||c("gkx")("26256")}function a(){var a=h.cast(d("WAWebABProps").getABPropConfigValue("channels_enabled"));if(a==null)return i.Disabled;if(!k())return i.Disabled;switch(a){case h.Disabled:return i.AvailableOnPhone;case h.Enabled:return i.Enabled;case h.NeedsUpgrade:return i.NeedsUpgrade}}function l(){return d("WAWebABProps").getABPropConfigValue("channels_enabled")===i.Enabled}function m(a){return l()&&d("WAWebABProps").getABPropConfigValue(a)===!0}var n=5e3;function e(){return n}function f(){return m("dsa_information_for_eu_only_enabled")}function o(){return d("WAWebABProps").getABPropConfigValue("dsa_appeals_query_optimization_enabled")}function p(){return m("dsa_new_user_journey_enabled")}function q(){return m("dsa_channels_report_unlawful_content_enabled")}function r(a){var b=!1;if(a==null)return!1;switch(a){case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner:case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin:b=d("WAWebABProps").getABPropConfigValue("channel_view_counts_enabled")>=j.EnabledAdminsOnly;break;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber:b=d("WAWebABProps").getABPropConfigValue("channel_view_counts_enabled")>=j.EnabledAdminsAndFollowers;break;case d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest:b=d("WAWebABProps").getABPropConfigValue("channel_view_counts_enabled")===j.EnabledEveryone;break}return l()&&b}function s(){return m("channels_send_view_receipt_enabled")}function t(){return l()&&d("WAWebABProps").getABPropConfigValue("channels_creation_enabled")===i.Enabled}function u(){return m("channels_creation_logging_enabled")}function v(a){return((a=a.newsletterMetadata)==null?void 0:a.reactionCodesSetting)===d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.All&&x()}function w(){return m("channel_reactions_enabled")&&d("WAWebNewsletterFutureProofUtils").isMsgTypeSupported(d("WAWebMsgType").MSG_TYPE.REACTION)}function x(){return m("channel_reactions_settings_enabled")}function y(a,b){return w()&&!b&&d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a==null?void 0:a.newsletterMetadata)&&d("WAWebABProps").getABPropConfigValue("channel_reactions_sender_list_enabled")}function z(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("newsletter_tos_notice_id_smb_web"):d("WAWebABProps").getABPropConfigValue("newsletter_tos_notice_id")}function A(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("newsletter_creation_tos_id_smb_web"):d("WAWebABProps").getABPropConfigValue("newsletter_creation_tos_id")}function B(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("newsletter_admin_invite_tos_id_smb_web"):d("WAWebABProps").getABPropConfigValue("newsletter_admin_invite_tos_id")}function C(){return d("WAWebABProps").getABPropConfigValue("newsletter_creation_nux_id")}function D(){return!1}function E(){return l()&&d("WAWebABProps").getABPropConfigValue("channels_directory_enabled")===h.Enabled}function F(){return d("WAWebABProps").getABPropConfigValue("channels_directory_page_size")}function G(){return d("WAWebABProps").getABPropConfigValue("channels_directory_search_debounce_ms")}function H(){var a=d("WAWebABProps").getABPropConfigValue("channels_directory_v2_filter_types");return d("WAWebGetEnumValuesFromConfig").getEnumValuesFromConfig({config:a,enumCastFunction:function(a){return d("WAWebNewsletterDirectoryFilterUtils").NewsletterDirectoryFilterType.cast(a)}})}function I(){return m("channels_filter_out_subscribed_in_directory_null_state")}function J(){return d("WAWebABProps").getABPropConfigValue("channels_directory_v2_cache_refresh_interval_ms")}function K(){return m("channels_directory_quick_action_button_enabled")}function L(){return m("channels_directory_categories_enabled")}function M(){return d("WAWebABProps").getABPropConfigValue("directory_categories_newsletters_per_category_limit")}function N(){return d("WAWebABProps").getABPropConfigValue("channels_directory_categories_cache_refresh_interval_ms")}function O(){var a=d("WAWebABProps").getABPropConfigValue("channels_directory_category_types");return d("WAWebGetEnumValuesFromConfig").getEnumValuesFromConfig({config:a,enumCastFunction:function(a){return d("WAWebNewsletterDirectoryCategoryUtils").NewsletterDirectoryCategoryType.cast(a)}})}function P(){return d("WAWebABProps").getABPropConfigValue("directory_categories_display_newsletters_per_category_limit")}function Q(){return d("WAWebABProps").getABPropConfigValue("recommended_channels_background_refresh")}function R(){return d("WAWebABProps").getABPropConfigValue("channels_followers_list_cache_refresh_seconds")*1e3}function S(){return m("channel_forward_to_chat_enabled")}function T(){return m("channel_forward_to_chat_link_enabled")}function U(){return m("channels_forward_logging_v2_enabled")}function V(){return m("channel_to_channel_forwarding_logging_enabled")}function W(){return m("channel_forward_to_chat_v2_message_navigation_enabled")}function X(a){return a.isNewsletter()?aa():ba()}function aa(){return m("channels_forward_to_channel_enabled")}function ba(){return m("channels_forward_from_chat_to_channel_enabled")}function ca(){return m("channel_forward_bottom_button_enabled")}function da(){return m("channels_message_edit_enabled")}function ea(){return m("channels_hide_news_url_preview")}function fa(){return d("WAWebABProps").getABPropConfigValue("channels_max_messages_batch_pull")}function ga(){return d("WAWebABProps").getABPropConfigValue("channel_pull_message_updates_threshold_seconds")}function ha(){return m("channels_recommended_v3_ui_enabled")}function ia(){return d("WAWebABProps").getABPropConfigValue("channels_recommended_v3_ui_limit")}function ja(){return m("channels_share_link_logging_enabled")}function ka(a){return a===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner||a===d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin}function la(){return m("channels_send_album_enabled")}function ma(){return m("channels_inbox_filters_web_enabled")}function na(){return m("channels_proactive_message_gap_handling_enabled")}function Y(){return m("channels_ptt_receiver_enabled")}function oa(){return Y()&&d("WAWebABProps").getABPropConfigValue("channels_ptt_sender_enabled")}function pa(){return m("channels_ptt_logging_enabled")}function qa(){return m("channels_poll_creation_enabled")}function ra(){return m("channels_poll_receive_enabled")}function sa(a){return!d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a==null?void 0:a.newsletterMetadata)?!1:Z()}function Z(){return m("channels_poll_voter_list_enabled")}function ta(){return m("channels_poll_single_option_control_enable")}function ua(){return m("channels_sticker_sending_enabled")}function va(){return m("channels_sticker_receiving_enabled")}function wa(){return m("channels_non_basic_stickers_enabled")}function xa(){return d("WAWebABProps").getABPropConfigValue("channels_multi_admin_max_admin_count")}function ya(){return m("channels_multi_admin_transfer_ownership_enabled")}function za(){return m("channels_multi_m1_improvements_enabled")}function Aa(){return m("channels_audio_files_receiver_enabled")}function Ba(){return m("channels_audio_files_sender_enabled")}function Ca(){return m("channels_audio_files_sender_waveform_enabled")}function Da(){return m("channels_audio_files_display_waveform_enabled")}function Ea(){return m("channels_status_updates_consumption_enabled")}function Fa(){return m("channels_admin_reply_enabled")}function Ga(){return m("channels_admin_reply_receiver_enabled")}function Ha(){return m("similar_channels_in_thread_on_follow_enabled")}function Ia(){return m("similar_channels_in_channel_details_enabled")}function Ja(){return d("WAWebABProps").getABPropConfigValue("similar_channels_max_limit")}function Ka(){return d("WAWebABProps").getABPropConfigValue("similar_channels_min_limit")}function La(){return m("channels_qpl_logging")}function Ma(){return m("channels_reactions_bottomsheet_tap_to_react_enabled")}function Na(a){a=d("WAWebStateUtils").unproxy(a);return((a=a.newsletterMetadata)==null?void 0:a.isSuspendedOrTerminated)?!1:m("channels_updates_tab_swipe_actions_enabled")}function Oa(a){if(a==null)return!1;if(a.isSuspendedOrTerminated)return!1;if(!c("gkx")("26258")&&d("WAWebABProps").getABPropConfigValue("channels_admin_insights_gizmos_enabled"))return!0;if(!d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(a))return!1;if(m("channels_producer_insights_enabled"))return!0;$()&&void d("WAWebLogNewsletterExposureAction").logNewsletterExposureAction(a,d("WAWebCommonNewsletterEnums").NewsletterCapability.Insights);return a.capabilities.has(d("WAWebCommonNewsletterEnums").NewsletterCapability.Insights)&&d("WAWebABProps").getABPropConfigValue("channels_capabilities_enabled")}function Pa(a){if(a==null)return!1;a=d("WAWebStateUtils").unproxy(a);a=a.size;return a>=d("WAWebABProps").getABPropConfigValue("channels_producer_insights_min_followers")}function Qa(){return d("WAWebABProps").getABPropConfigValue("channels_producer_insights_hide_deltas")}function $(){return m("channels_fetch_and_log_capabilities")}function Ra(){return m("hide_channel_tombstone_messages_enabled")}function Sa(){return m("channel_tombstone_messages_visibility_disabled")}g.NewsletterCompanionGating=i;g.isNewsletterEnabledOnPrimary=k;g.getNewsletterDeeplinkGating=a;g.isNewsletterEnabled=l;g.getMaxSubscriberNumber=e;g.isDSAEUOnlyNoticeEnabled=f;g.isDSAAppealsQueryOptimizationEnabled=o;g.isDSANewUserJourneyEnabled=p;g.isNewsletterReportUnlawfulContentEnabled=q;g.isNewsletterViewCountEnabled=r;g.isNewsletterViewCountSendEnabled=s;g.isNewsletterCreationEnabled=t;g.isNewsletterCreationLoggingEnabled=u;g.shouldShowAllReactionsForNewsletter=v;g.isNewsletterReactionEnabled=w;g.isNewsletterReactionSettingsEnabled=x;g.isNewsletterReactionSenderListEnabled=y;g.getNewsletterConsumerTos=z;g.getNewsletterProducerTos=A;g.getNewsletterAdminInviteTos=B;g.getNewsletterProducerNux=C;g.shouldHideProducerNewsletterDisclosure=D;g.isNewsletterDirectoryEnabled=E;g.getNewsletterDirectoryPageSize=F;g.getNewsletterDirectorySearchDebounce=G;g.getNewsletterDirectoryV2FilterTypes=H;g.isFilteringOutSubscribedNewslettersFromDirectoryListEnabled=I;g.getNewsletterDirectoryPageRefreshInterval=J;g.isNewsletterDirectoryQuickActionButtonEnabled=K;g.isNewsletterDirectoryCategoriesEnabled=L;g.getNewslettersPerDirectoryCategoryLimit=M;g.getNewsletterDirectoryCategoriesPreviewRefreshIntervalMs=N;g.getNewsletterDirectoryCategoryTypes=O;g.getDisplayNewsletterPerCategoryLimit=P;g.getRecommendedNewslettersRefreshInterval=Q;g.getNewsletterSubscriberListCacheRefreshMs=R;g.isNewsletterMessageForwardSendingEnabled=S;g.isNewsletterMessageForwardReceivingEnabled=T;g.isNewsletterMessageForwardLoggingEnabled=U;g.isNewsletterForwardToChannelLoggingEnabled=V;g.isNavigationToForwardedNewsletterMessageEnabled=W;g.isForwardToNewsletterEnabled=X;g.isNewsletterForwardBottomButtonEnabled=ca;g.isNewsletterMessageEditingEnabled=da;g.isNewsletterHideNewsUrlPreviewEnabled=ea;g.getMaxMsgCountFromServer=fa;g.getPullMessageUpdatesThresholdSeconds=ga;g.isRecommendedUnitV3Enabled=ha;g.getRecommendedUnitRowCount=ia;g.isNewsletterLinkShareLoggingEnabled=ja;g.isNewsletterAdminContextCardEnabled=ka;g.isNewsletterMediaAlbumUploadEnabled=la;g.isNewsletterInboxFiltersEnabled=ma;g.isProactiveGapFillingEnabled=na;g.isNewsletterPTTReceivingEnabled=Y;g.isNewsletterPTTSendingEnabled=oa;g.isNewsletterPTTLoggingEnabled=pa;g.isNewsletterPollsCreationEnabled=qa;g.isNewsletterPollsReceivingEnabled=ra;g.isNewsletterPollsVotersEnabledForChat=sa;g.isNewsletterPollsVotersEnabled=Z;g.isNewsletterPollsSingleOptionEnabled=ta;g.isNewsletterStickerSendingEnabled=ua;g.isNewsletterStickerReceivingEnabled=va;g.isNewsletterSendingNonBasicStickersEnabled=wa;g.getMaxNumberOfAdmins=xa;g.isNewsletterTransferOwnershipEnabled=ya;g.isNewsletterMultiAdminM1ImprovementsEnabled=za;g.isNewsletterAudioFileReceivingEnabled=Aa;g.isNewsletterAudioFileSendingEnabled=Ba;g.isAudioFileWaveformSenderEnabled=Ca;g.isAudioFileWaveformDisplayEnabled=Da;g.isNewsletterLinksOnStatusConsumptionEnabled=Ea;g.isNewsletterSendingAdminRepliesEnabled=Fa;g.isNewsletterReceivingAdminRepliesEnabled=Ga;g.isSimilarNewsletterInThreadEnabled=Ha;g.isSimilarNewsletterInInfoDrawersEnabled=Ia;g.getSimilarNewslettersMaxFetchLimit=Ja;g.getSimilarNewslettersMinDisplayLimit=Ka;g.isNewsletterQPLLoggingEnabled=La;g.isNewsletterQuickReactionsEnabled=Ma;g.isNewsletterContextMenuEnabled=Na;g.isNewsletterProducerInsightsEnabled=Oa;g.canFetchProducerInsights=Pa;g.shouldHideProducerInsightsDeltas=Qa;g.shouldFetchAndLogCapabilities=$;g.isNewsletterTombstoneMessageHidingEnabled=Ra;g.shouldSetViewModeForNewsletterTombstone=Sa}),98);
__d("WAWebAddonProcessRevoke",["Promise","WALogger","WANullthrows","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonGatingUtils","WAWebAddonLogUtils","WAWebAddonProcessRevokeDataUtils","WAWebAddonRetryRequestUtils","WAWebAddonSelectUtils","WAWebAddonUpdateDataUtils","WAWebMsgGetters","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["process addon revokes: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["process addon revoke ",", ",": ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[addon-infra]: processRevokeMsgs "," addon(s)"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeRevokesForTableMode for ",": ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["revoking addons finished with errors"]);m=function(){return a};return a}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map(),e=[];for(var f of d("WAWebAddonConstants").AddonTableMode.members())f!==d("WAWebAddonConstants").AddonTableMode.None&&e.push(d("WAWebAddonDBTable").addonInternalDBTable.bulkGetByMsgKey(f,a,!1).then(function(a){for(a of a)a!=null&&c.set(a.id.toString(),a)})["catch"](function(){}));yield (h||(h=b("Promise"))).all(e);return d("WAWebAddonSelectUtils").createAddonSelector(c)});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=function(b){var c=b[0];b=b[1];e.push(d("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:a.mode,tableMode:c},b)["catch"](function(a){d("WALogger").WARN(l(),c,a);throw a}))};for(c of c)f(c);f=(yield (h||(h=b("Promise"))).allSettled(e));d("WAWebAddonLogUtils").hasSettledWithError(f)&&d("WALogger").WARN(m()).tags("addons","messaging").sendLogs("revokeAddonMsgs")});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=[],g=new Map();for(b of b){var h=e.get(c("WANullthrows")(b.protocolMessageKey));if(!d("WAWebAddonGatingUtils").isUnifiedInfraEnabled(h))continue;var i=d("WAWebAddonSelectUtils").getTableModeByMsgType(h.type);g.has(i)||g.set(i,{add:[],remove:[]});i=c("WANullthrows")(g.get(i));b.id.equals(h.id)||i.remove.push(h);i.add.push(b);d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebMsgGetters").getFrom(h))&&f.push([h,b])}d("WALogger").DEV(k(),g.size).devConsole(g);yield p(a,g);yield d("WAWebAddonRetryRequestUtils").replaceSelfMessageTypeRows(f)});return s.apply(this,arguments)}function a(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c={mode:d("WAWebAddonConstants").AddonProcessMode.SendRevoke};try{yield r(c,[d("WAWebAddonProcessRevokeDataUtils").protocolRevokeToRevokeMsgData(a)],d("WAWebAddonSelectUtils").createAddonSelector(new Map([[b.id.toString(),b]])))}catch(c){d("WALogger").ERROR(j(),a.id,b.id,c).tags("addons","messaging").sendLogs("processSentRevokeMsg");throw c}});return t.apply(this,arguments)}function e(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={mode:d("WAWebAddonConstants").AddonProcessMode.Revoke},c=new Set();try{var e=a.map(function(a){return a.revokeMsgKey});e=(yield n(e));var f=[];for(a of a){var g=a.revokeMsgKey;if(!e.has(g)){c.add(g);continue}g=e.get(g);g=d("WAWebAddonProcessRevokeDataUtils").revokeMsgInfoToRevokeMsgData(a,g);f.push(g)}yield r(b,f,e);return c}catch(a){d("WALogger").ERROR(i(),a).tags("addons","messaging").sendLogs("processAddonRevokes");throw a}});return u.apply(this,arguments)}g.processSentRevokeMsg=a;g.processRevokeMsgs=e}),98);
__d("WAWebProcessBaseMsgInfo",[],(function(a,b,c,d,e,f){a=function(a){return{id:a.id,from:a.from,to:a.to,type:a.type,t:a.t,ack:a.ack,count:null,author:a.author,notifyName:a.notifyName,invis:a.invis,subtype:a.subtype}};b=function(a){return{id:a.id,from:a.from,to:a.to,type:a.type,t:a.t,ack:a.ack,count:null,author:a.author,notifyName:a.notifyName,invis:a.invis,subtype:a.subtype}};f.msgToBaseMsgInfo=a;f.msgDataToBaseMsgInfo=b}),66);
__d("WAWebAddonProcessRevokeDataUtils",["WAWebAddonCrossWindowUtils","WAWebAddonProcessMsgsUtils","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebProcessBaseMsgInfo"],(function(a,b,c,d,e,f,g){a=function(a,b){var c=d("WAWebAddonCrossWindowUtils").getAddonProcessorType(b);return babelHelpers["extends"]({id:a.newMsgKey,type:d("WAWebMsgType").MSG_TYPE.REVOKED,kind:d("WAWebMsgType").MsgKind.RevokedAddon,subtype:a.subtype==="admin_revoke"?"admin":"sender",revokeTimestamp:(a=a.revokeTimestamp)!=null?a:void 0},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{revokeAddonType:c,protocolMessageKey:b.id,t:d("WAWebMsgGetters").getT(b),parentMsgKey:d("WAWebAddonProcessMsgsUtils").getParentMsgKey(b)})};b=function(a){return babelHelpers["extends"]({},d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(a),{id:a.id},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.REVOKED,kind:d("WAWebMsgType").MsgKind.RevokedAddon,subtype:a.subtype==="admin_revoke"?"admin":"sender",revokeTimestamp:a.revokeTimestamp,revokeAddonType:a.revokeAddonType,protocolMessageKey:a.protocolMessageKey,parentMsgKey:a.targetMessageKey})};g.revokeMsgInfoToRevokeMsgData=a;g.protocolRevokeToRevokeMsgData=b}),98);
__d("WAWebMaybe",[],(function(a,b,c,d,e,f){function a(a,b){if(a!=null)return b(a)}f.ifSome=a}),66);
__d("WAWebAddonQueryUtils",["WAWebDBMsgUtils","WAWebLidMigrationUtils","WAWebMaybe","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(a.map(String))),c=new Map(b.map(function(a){return[a.id.toString(),a]}));if(c.size===a.length)return c;b=a.filter(function(a){return!c.has(a.toString())}).map(d("WAWebLidMigrationUtils").getAlternateMsgKey).filter(Boolean);if(b.length>0){a=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(b.map(String)));a.forEach(function(a){d("WAWebMaybe").ifSome(d("WAWebLidMigrationUtils").getAlternateMsgKey(a.id),function(b){c.set(b.toString(),a)})})}return c});return h.apply(this,arguments)}g.getParentMsgsByMsgKey=a}),98);
__d("WAWebSchemaSelfAddonMessageTypeTable",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addAutoIncrementingPrimaryKey;b=b.addIndex;a.add("self-addon-message-type").version(d("WAWebModelStorageVersions").selfMessageTypeCreateTable(),[e("rowId"),c("msgId"),c("msgType"),b("msgId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("self-addon-message-type")}g.addTable=a;g.getSelfAddonMessageTypeTable=b}),98);
__d("WAWebAddonRetryRequestUtils",["WALogger","WANullthrows","WAWebAck","WAWebAddonConstants","WAWebAddonCrossWindowUtils","WAWebAddonDBTable","WAWebAddonPluginProcessor","WAWebAddonProcessMsgsUtils","WAWebAddonSelectUtils","WAWebAddonSortUtils","WAWebModelStorageUtils","WAWebSchemaSelfAddonMessageTypeTable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["msg-retry: can not find addon ","."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["msg-retry: can not find addon ","."]);i=function(){return a};return a}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield d("WAWebSchemaSelfAddonMessageTypeTable").getSelfAddonMessageTypeTable().equals(["msgId"],a.id))[0]});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if((yield j(a.id))==null){a={msgId:a.id.id,msgType:d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a)};yield d("WAWebSchemaSelfAddonMessageTypeTable").getSelfAddonMessageTypeTable().createOrReplace(a)}});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;return d("WAWebModelStorageUtils").getStorage().lock(["self-addon-message-type"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.anyOf(["msgId"],a.map(function(a){a=a[0];return a.id.id}))),d=a.map(function(a){var b=a[0];a=a[1];return{msgId:a.id.id,msgType:b.type}});yield b.bulkRemove(c.map(function(a){return a.rowId}).filter(Boolean));yield b.bulkCreateOrReplace(d)});return function(a){return c.apply(this,arguments)}}())});return m.apply(this,arguments)}function f(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));if(b==null)return;var e=d("WAWebAddonSelectUtils").getTableModeByMsgType(b.msgType);e=(yield d("WAWebAddonDBTable").addonInternalDBTable.getByMsgKey(e,a));if(e==null){d("WALogger").WARN(i(),a.toString());return}if(!d("WAWebAddonCrossWindowUtils").isRealAddonType(e))return{msgData:e,selfMsgRow:b};var f=e.ack;if(f==null||f<d("WAWebAck").ACK.SENT){d("WALogger").WARN(h(),a.toString()).sendLogs("msg-retry");return}f=d("WAWebAddonPluginProcessor").getAddonProcessor(e).convert.toDualEncryptedMsgData;if(f!=null){a=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs([e],d("WAWebAddonConstants").AddonProcessMode.Send));var g=a[0];a=a[1];a=d("WAWebAddonSortUtils").collectValidAndOrphanAddons(a,g);a=a.validAddons;a=a[0];g=c("WANullthrows")(g.get(d("WAWebAddonProcessMsgsUtils").getParentMsgKey(a).toString()));return{msgData:yield f(a,g),selfMsgRow:b}}return{msgData:e,selfMsgRow:b}});return n.apply(this,arguments)}g.hasSentAddonMsg=j;g.storeSelfMessageTypeRow=a;g.replaceSelfMessageTypeRows=e;g.getSentAddonMsgRecord=f}),98);
__d("WAWebAddonDBSerializationUtils",["WAWebAddonProcessMsgsUtils"],(function(a,b,c,d,e,f,g){function h(a){a=i(a,"string");return typeof a==="symbol"?a:String(a)}function i(a,b){if(typeof a!=="object"||a===null)return a;var c=a[typeof Symbol==="function"?Symbol.toPrimitive:"@@toPrimitive"];if(c!==void 0){c=c.call(a,b||"default");if(typeof c!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(a)}a=function(a){var b=d("WAWebAddonProcessMsgsUtils").getParentMsgKeyName(a),c=a.id,e=a.ack,f=a.t,g=a.read;a.to;a.from;a.type;a.kind;a.notifyName;a.count;a.subtype;a.local;a[b];b=babelHelpers.objectWithoutPropertiesLoose(a,["id","ack","t","read","to","from","type","kind","notifyName","count","subtype","local",b].map(h));return{base:{msgKey:c.toString(),ack:e,t:f,read:g,targetMsgKey:d("WAWebAddonProcessMsgsUtils").getParentMsgKey(a).toString()},addonProps:b}};g.extractAddonForUnifiedTable=a}),98);
__d("WAWebAddonInfraError",["$InternalEnum","WACustomError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({UnexpectedError:"unexpected_error",NotSupportedFeature:"not_supported_feature",NotSupportedMsgType:"not_supported_msg_type",UnexpectedMsgType:"unexpected_msg_type",InvalidParentMsgKey:"invalid_parent_msg_key",MissingParentMsg:"missing_parent_msg"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b="errorCode: "+String(b);c!=null&&(b+=" comment: "+c);return a.call(this,b)||this}return b}(d("WACustomError").customError("AddonInfraError"));g.AddonInfraErrorCode=a;g.AddonInfraError=c}),98);
__d("WAWebCommentSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("comments").version(d("WAWebModelStorageVersions").commentCreateTable(),[e("msgKey"),c("parentMsgKey"),b("parentMsgKey"),c("t"),c("ack"),c("sender"),c("read"),f("msgRowOpaqueData",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("isOverwrittenByRevoke"),c("revokeTimestamp"),c("protocolMessageKey"),c("subtype"),c("isPlaceholder")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("comments")}g.addTable=a;g.getTable=b}),98);
__d("WAWebApiHydrateWidsUtil",["WAWebWidFactory","WAWebWidJsonReviver"],(function(a,b,c,d,e,f,g){function h(a){if(Array.isArray(a))return a.map(function(b,a){return h(d("WAWebWidJsonReviver").widReviver(a,b,d("WAWebWidFactory").isWidlike,d("WAWebWidFactory").createWidFromWidLike))});else if(a&&typeof a==="object"){var b=Object.keys(a);for(var c=0;c<b.length;c++){var e=b[c];a[e]=h(d("WAWebWidJsonReviver").widReviver(e,a[e],d("WAWebWidFactory").isWidlike,d("WAWebWidFactory").createWidFromWidLike))}return a}return a}g.hydrateWids=h}),98);
__d("WAWebDBMessageUtils",["$InternalEnum","WAWebVcardParsingUtils"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({IncomingChatMessage:"1",Outgoing:"2",SystemMessage:"3"});function i(a){a=a.toString(16);return(a.length-1).toString(16)+a}function j(a){return parseInt(a.substring(1),16)}function a(a){return a.toString()+"_/"}function c(a){return a.toString()+"_g"}function e(a,b){b=i(b);return a+"_"+b+"_m"}function f(a){a=a.split("_")[1];return j(a)}function k(a,b,c,d){c?c=h.SystemMessage:!b?c=h.Outgoing:c=h.IncomingChatMessage;return a+"_"+c+"_"+(d!=null?i(d):"")}function l(a){var b;if(a.type==="vcard")b=[a.body];else if(a.type==="multi_vcard")b=a.vcardList.map(function(a){return a.vcard});else return;return b.filter(Boolean).reduce(function(a,b){b=d("WAWebVcardParsingUtils").vcardWids(d("WAWebVcardParsingUtils").parseVcard(b));return a.concat(b.map(function(a){return a.toString()}))},[])}g.MessagePropertyType=h;g.undoOrderPreservingHex=j;g.beginningOfChat=a;g.endOfChat=c;g.craftInternalId=e;g.getInChatMsgId=f;g.craftMessageRangeIndex=k;g.getVcardWids=l}),98);
__d("WAWebDBMsgOpaqueDataKeys",[],(function(a,b,c,d,e,f){b=["body","caption","paymentAmount1000","futureproofBuffer","messageSecret","clientUrl","loc","lng","lat","isLive","matchedText","title","description","pollName","pollSelectableOptionsCount","isSentCagPollCreation","pollUpdateParentKey","encPollVote","senderTimestampMs","targetMessageKey","encIv","encPayload","eventName","isEventCanceled","eventDescription","eventJoinLink","eventStartTime","eventLocation","eventEndTime"];c=["targetMessageKey","pollUpdateParentKey"];var g={targetMessageKey:"encReactionTargetMessageKey",encIv:"encReactionEncIv",encPayload:"encReactionEncPayload",encReactionTargetMessageKey:"targetMessageKey",encReactionEncIv:"encIv",encReactionEncPayload:"encPayload"};function a(a,b){return a==="reaction_enc"?g[b]:b}f.MSG_OPAQUE_DATA_KEYS=b;f.MsgKeyFieldsInOpaqueData=c;f.getKey=a}),66);
__d("WAWebPollsDbUtils",["invariant","WANullthrows"],(function(a,b,c,d,e,f,g,h){function a(a){return a==null?void 0:a.slice().sort(function(a,b){return a.localId-b.localId}).map(function(a,b){var c=a.localId;a=a.name;c===b||h(0,59784);return{name:a}})}function b(a){return a==null?void 0:a.map(function(a,b){a=a.name;return{name:c("WANullthrows")(a),localId:b}})}g.compressPollOptions=a;g.expandPollOptions=b}),98);
__d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={currentMsg:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,c],quotedMsg:[2,d.TYPES.MESSAGE,c]};b.internalSpec={encPayload:[1,d.TYPES.BYTES],encIv:[2,d.TYPES.BYTES]};c.internalSpec={body:[1,d.TYPES.STRING],caption:[3,d.TYPES.STRING],lng:[5,d.TYPES.DOUBLE],isLive:[6,d.TYPES.BOOL],lat:[7,d.TYPES.DOUBLE],paymentAmount1000:[8,d.TYPES.INT32],paymentNoteMsgBody:[9,d.TYPES.STRING],matchedText:[11,d.TYPES.STRING],title:[12,d.TYPES.STRING],description:[13,d.TYPES.STRING],futureproofBuffer:[14,d.TYPES.BYTES],clientUrl:[15,d.TYPES.STRING],loc:[16,d.TYPES.STRING],pollName:[17,d.TYPES.STRING],pollOptions:[18,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],pollSelectableOptionsCount:[20,d.TYPES.UINT32],messageSecret:[21,d.TYPES.BYTES],originalSelfAuthor:[51,d.TYPES.STRING],senderTimestampMs:[22,d.TYPES.INT64],pollUpdateParentKey:[23,d.TYPES.STRING],encPollVote:[24,d.TYPES.MESSAGE,b],isSentCagPollCreation:[28,d.TYPES.BOOL],encReactionTargetMessageKey:[25,d.TYPES.STRING],encReactionEncPayload:[26,d.TYPES.BYTES],encReactionEncIv:[27,d.TYPES.BYTES],botMessageSecret:[29,d.TYPES.BYTES],targetMessageKey:[30,d.TYPES.STRING],encPayload:[31,d.TYPES.BYTES],encIv:[32,d.TYPES.BYTES],eventName:[33,d.TYPES.STRING],isEventCanceled:[34,d.TYPES.BOOL],eventDescription:[35,d.TYPES.STRING],eventJoinLink:[36,d.TYPES.STRING],eventStartTime:[37,d.TYPES.INT64],eventLocation:[38,d.TYPES.MESSAGE,e],eventEndTime:[40,d.TYPES.INT64]};e.internalSpec={degreesLatitude:[1,d.TYPES.DOUBLE],degreesLongitude:[2,d.TYPES.DOUBLE],name:[3,d.TYPES.STRING],address:[4,d.TYPES.STRING],url:[5,d.TYPES.STRING],jpegThumbnail:[6,d.TYPES.BYTES]};f.internalSpec={name:[1,d.TYPES.STRING]};g.MsgRowOpaqueDataSpec=a;g.PollEncValueSpec=b;g.MsgOpaqueDataSpec=c;g.MsgOpaqueData$EventLocationSpec=e;g.MsgOpaqueData$PollOptionSpec=f}),98);
__d("WAWebDBMessageSerialization",["invariant","WAJids","WAWebApiHydrateWidsUtil","WAWebDBMessageUtils","WAWebDBMsgOpaqueDataKeys","WAWebMsgKey","WAWebMsgType","WAWebPollsDbUtils","WAWebProtobufsMdStorageMsgRowOpaqueData.pb","WAWebWid","WAWebWidFactory","WAWebWidToJid","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g,h){var i=1e9,j=new Set(Object.values(d("WAWebMsgType").MSG_TYPE)),k=["id","parentMsgId","protocolMessageKey","paymentRequestMessageKey","keptMessageKey","pollUpdateParentKey","kicKey","latestEditMsgKey","targetMessageKey","pinParentKey","reactionParentKey","parentMsgKey"];function a(a,b){var e,f=babelHelpers["extends"]({},a);a.quotedMsg&&(f.quotedMsg=babelHelpers["extends"]({},a.quotedMsg));((e=a.quotedMsg)==null?void 0:e.paymentNoteMsg)&&(f.quotedMsg.paymentNoteMsg=babelHelpers["extends"]({},a.quotedMsg.paymentNoteMsg));a.paymentNoteMsg&&(f.paymentNoteMsg=babelHelpers["extends"]({},a.paymentNoteMsg));a.paymentBackground&&(f.paymentBackground=babelHelpers["extends"]({},a.paymentBackground));a.groupMentions&&(f.groupMentions=a.groupMentions.map(function(a){return{groupSubject:a.groupSubject,groupJid:d("WAWebWidFactory").createWidFromWidLike(a.groupJid)}}));f.star=f.isStarred!==void 0;f.isMdHistoryMsg=f.rowId<i;f.internalId!=null&&(((e=f.to)==null?void 0:e.server)==="newsletter"||((a=f.from)==null?void 0:a.endsWith("@newsletter")))&&(f.serverId=d("WAWebDBMessageUtils").getInChatMsgId(f.internalId));delete f.internalId;delete f.isStarred;delete f.count;delete f.hasLink;delete f.isMediaMsg;delete f.isDocMsg;delete f.isCarouselMsg;delete f.isEventMsg;delete f.expiredTimestamp;delete f.pendingReadReceipt;m(f);d("WAWebApiHydrateWidsUtil").hydrateWids(f);k.forEach(function(a){f[a]!=null&&(f[a]=c("WAWebMsgKey").from(f[a]))});((e=f.quotedMsg)==null?void 0:e.id)!=null&&(f.quotedMsg.id=c("WAWebMsgKey").from(f.quotedMsg.id));f.messageSecret!=null&&(f.messageSecret=new Uint8Array(f.messageSecret));f.botMessageSecret!=null&&(f.botMessageSecret=new Uint8Array(f.botMessageSecret));a=l(f);e=a[0];var g=a[1];a=a[2];f.futureproofType=e;f.futureproofSubtype=g;f.subtype=(e=a)!=null?e:void 0;f.carouselCardsParsed!=null&&(f.carouselCardsParsed=f.carouselCardsParsed.map(function(a){return babelHelpers["extends"]({},a,{id:a.id instanceof c("WAWebMsgKey")?a.id:new(c("WAWebMsgKey"))(a.id),parentMsgId:a.parentMsgId instanceof c("WAWebMsgKey")?a.parentMsgId:new(c("WAWebMsgKey"))(a.parentMsgId)})}));f.self!=null&&(f.local=f.self==="out",delete f.self);b==null?void 0:b(f);return f}function l(a){var b=a.futureproofType,c=a.futureproofSubtype,e=a.subtype;if(a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType==null&&a.subtype!=null){switch(a.subtype){case"poll_update":b=d("WAWebMsgType").MSG_TYPE.POLL_UPDATE;c="poll_vote";break;case"message_edit":b=d("WAWebMsgType").MSG_TYPE.PROTOCOL;c="message_edit";break;case"phone":case"phone_only_feature":break;default:j.has(a.subtype)||h(0,67194),b=a.subtype}a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&b!=null&&(e=void 0)}a.type===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&e==null&&(e="poll_vote");return[b,c,e]}function m(a){var b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb").MsgRowOpaqueDataSpec,a.msgRowOpaqueData);if(b.currentMsg){if(b.currentMsg.paymentNoteMsgBody&&a.paymentNoteMsg){var e;a.paymentNoteMsg.body=(e=b.currentMsg)==null?void 0:e.paymentNoteMsgBody}d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(c){var e;a[c]=(e=b.currentMsg)==null?void 0:e[d("WAWebDBMsgOpaqueDataKeys").getKey(a.type,c)]});a.pollOptions=d("WAWebPollsDbUtils").expandPollOptions((e=b.currentMsg)==null?void 0:e.pollOptions);e=(e=b.currentMsg)==null?void 0:e.originalSelfAuthor;e!=null&&c("WAWebWid").isWid(e)&&(a.originalSelfAuthor=d("WAWebWidFactory").createWid(e))}if(a.quotedMsg&&b.quotedMsg){b.quotedMsg.paymentNoteMsgBody&&(a.quotedMsg.paymentNoteMsg.body=b.quotedMsg.paymentNoteMsgBody);d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(c){var e;a.quotedMsg[c]=(e=b.quotedMsg)==null?void 0:e[d("WAWebDBMsgOpaqueDataKeys").getKey(a.type,c)]});a.quotedMsg.pollOptions=d("WAWebPollsDbUtils").expandPollOptions((e=b.quotedMsg)==null?void 0:e.pollOptions)}}function b(a){var b,c=babelHelpers["extends"]({},a);a.quotedMsg&&(c.quotedMsg=babelHelpers["extends"]({},a.quotedMsg));((b=a.quotedMsg)==null?void 0:b.paymentNoteMsg)&&(c.quotedMsg.paymentNoteMsg=babelHelpers["extends"]({},a.quotedMsg.paymentNoteMsg));a.paymentNoteMsg&&(c.paymentNoteMsg=babelHelpers["extends"]({},a.paymentNoteMsg));a.from&&(c.from=a.from.toString());k.forEach(function(a){c[a]!=null&&(c[a]=c[a].toString())});delete c.notifyName;delete c.isNewMsg;delete c.clearMedia;delete c.multicast;delete c.urlNumber;delete c.urlText;delete c.linkPreview;delete c.star;delete c.forwardedFromWeb;n(c);return c}function n(a){var b,c={currentMsg:{},quotedMsg:{}};if((b=a.paymentNoteMsg)==null?void 0:b.body){c.currentMsg.paymentNoteMsgBody=a.paymentNoteMsg.body;(b=a.paymentNoteMsg)==null?void 0:delete b.body}((b=a.quotedMsg)==null?void 0:(b=b.paymentNoteMsg)==null?void 0:b.body)&&(c.quotedMsg.paymentNoteMsgBody=a.quotedMsg.paymentNoteMsg.body,delete a.quotedMsg.paymentNoteMsg.body);d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(b){c.currentMsg[d("WAWebDBMsgOpaqueDataKeys").getKey(a.type,b)]=a[b],delete a[b]});a.originalSelfAuthor&&(c.currentMsg.originalSelfAuthor=d("WAJids").extractUserJid(d("WAWebWidToJid").widToDeviceJid(a.originalSelfAuthor)),delete a.originalSelfAuthor);c.currentMsg.pollOptions=d("WAWebPollsDbUtils").compressPollOptions(a.pollOptions);delete a.pollOptions;a.quotedMsg&&(d("WAWebDBMsgOpaqueDataKeys").MSG_OPAQUE_DATA_KEYS.forEach(function(b){c.quotedMsg[b]=a.quotedMsg[b],delete a.quotedMsg[b]}),c.quotedMsg.pollOptions=d("WAWebPollsDbUtils").compressPollOptions(a.quotedMsg.pollOptions),delete a.quotedMsg.pollOptions);b=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb").MsgRowOpaqueDataSpec,c);a.msgRowOpaqueData=b.readBuffer()}g.messageFromDbRow=a;g.movFieldFromOpaqueDataBackToMsg=m;g.dbRowFromMessage=b;g.movEncFieldToOpaqueData=n}),98);
__d("WAWebDBCommentMessageSerialization",["WANullthrows","WAWebDBMessageSerialization","WAWebMsgGetters","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){a=babelHelpers["extends"]({},a);d("WAWebDBMessageSerialization").movEncFieldToOpaqueData(a);return babelHelpers["extends"]({},a,{msgKey:a.id.toString(),parentMsgKey:a.parentMsgKey.toString(),sender:a.author.toString()})}function b(a){var b;return{msgKey:a.id.toString(),sender:c("WANullthrows")(d("WAWebMsgGetters").getSender(a),"undefined sender").toString(),parentMsgKey:a.parentMsgKey.toString(),t:d("WAWebMsgGetters").getT(a),ack:(b=d("WAWebMsgGetters").getAck(a))!=null?b:void 0,read:a.read,isOverwrittenByRevoke:!0,subtype:a.subtype,revokeTimestamp:a.revokeTimestamp,protocolMessageKey:a.protocolMessageKey.toString()}}function e(a){return{isPlaceholder:!0,msgKey:a.id.toString(),sender:c("WANullthrows")(d("WAWebMsgGetters").getSender(a),"undefined sender").toString(),parentMsgKey:a.parentMsgKey.toString(),read:a.read,t:d("WAWebMsgGetters").getT(a)}}function f(a){var b=c("WAWebMsgKey").from(a.msgKey),e=c("WAWebMsgKey").from(a.parentMsgKey);e=babelHelpers["extends"]({id:b,parentMsgKey:e,ack:a.ack,t:a.t},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon));if(a.isOverwrittenByRevoke===!0){return babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.REVOKED,kind:d("WAWebMsgType").MsgKind.RevokedAddon,subtype:c("WANullthrows")(a.subtype),revokeAddonType:d("WAWebMsgType").MSG_TYPE.COMMENT,revokeTimestamp:(b=a.revokeTimestamp)!=null?b:void 0,protocolMessageKey:c("WAWebMsgKey").from(c("WANullthrows")(a.protocolMessageKey,"undefined protocolMessageKey"))})}if(a.isPlaceholder===!0)return babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.CIPHERTEXT,kind:d("WAWebMsgType").MsgKind.PlaceholderAddon,realType:d("WAWebMsgType").MSG_TYPE.COMMENT});b=babelHelpers["extends"]({},a);d("WAWebDBMessageSerialization").movFieldFromOpaqueDataBackToMsg(b);return babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.COMMENT,kind:d("WAWebMsgType").MsgKind.CommentDecrypted,from:d("WAWebWidFactory").createUserWid(b.sender),body:b.body,author:d("WAWebWidFactory").createUserWid(b.sender),read:(e=a.read)!=null?e:!1})}g.dbRowFromCommentMessage=a;g.dbRowFromRevokedMsgData=b;g.dbRowFromPlaceholderAddon=e;g.commentMessageFromDbRow=f}),98);
__d("WAWebAddonCommentTableMode",["WAWebAddonConstants","WAWebAddonInfraError","WAWebCommentSchema","WAWebDBCommentMessageSerialization","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a={mode:d("WAWebAddonConstants").AddonTableMode.Comment,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){if(a.kind===d("WAWebMsgType").MsgKind.CommentDecrypted)return d("WAWebDBCommentMessageSerialization").dbRowFromCommentMessage(a);if(a.kind===d("WAWebMsgType").MsgKind.RevokedAddon)return d("WAWebDBCommentMessageSerialization").dbRowFromRevokedMsgData(a);if(a.kind===d("WAWebMsgType").MsgKind.PlaceholderAddon)return d("WAWebDBCommentMessageSerialization").dbRowFromPlaceholderAddon(a);throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedMsgType)});yield d("WAWebCommentSchema").getTable().bulkCreateOrReplace(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebCommentSchema").getTable().bulkGet(a.map(function(a){return a.toString()}),b));return a.map(function(a){return a==null?a:d("WAWebDBCommentMessageSerialization").commentMessageFromDbRow(a)})});function c(b,c){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebCommentSchema").getTable().anyOf(["parentMsgKey"],a.map(function(a){return a.toString()})));return a.map(d("WAWebDBCommentMessageSerialization").commentMessageFromDbRow)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebCommentSchema").getTable().bulkRemove(a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebCommentSchema").getTable().get(a.toString()));return a==null?null:d("WAWebDBCommentMessageSerialization").commentMessageFromDbRow(a)});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebCommentSchema").getTable().merge(a.id.toString(),{ack:b})});function c(b,c){return a.apply(this,arguments)}return c}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebCommentSchema").getTable().merge(a.toString(),{read:!0})});function c(b){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebCommentSchema").getTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.commentTableMode=a}),98);
__d("WAWebEventResponseDBSerialization",["WANullthrows","WAWebMsgGetters","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","err"],(function(a,b,c,d,e,f,g){function h(a){a=d("WAWebProtobufsE2E.pb").Message$EventResponseMessage$EventResponseType.cast(new Uint8Array(a)[0]);if(a==null)throw c("err")("Value contained in array buffer is not a valid event response");return a}function i(a){var b=new ArrayBuffer(1);b=new Uint8Array(b);b[0]=a;return b.buffer}function a(a){var b=c("WANullthrows")(d("WAWebMsgGetters").getSender(a));return{msgKey:a.id.toString(),parentMsgKey:a.parentMsgKey.toString(),eventResponse:i(a.eventResponse),senderTimestampMs:a.senderTimestampMs,sender:b.toString(),t:a.t,ack:a.ack,read:d("WAWebUserPrefsMeUser").isMeAccount(b)||a.read}}function b(a){var b=c("WAWebMsgKey").from(a.msgKey);return babelHelpers["extends"]({id:b},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,kind:d("WAWebMsgType").MsgKind.EventResponseDecrypted,ack:a.ack,t:a.t,eventResponse:h(a.eventResponse),parentMsgKey:c("WAWebMsgKey").from(a.parentMsgKey),senderTimestampMs:a.senderTimestampMs,read:(b=a.read)!=null?b:!1})}g.dbRowFromEventResponseMessage=a;g.eventResponseMessageFromDBRow=b}),98);
__d("WAWebEventResponsesSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("event-responses").version(d("WAWebModelStorageVersions").eventsResponsesCreateTable(),[e(["parentMsgKey","sender"]),c("msgKey"),b("parentMsgKey"),c("t"),c("ack"),c("read"),c("senderTimestampMs"),f("eventResponse",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version(d("WAWebModelStorageVersions").eventResponsesAddMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("event-responses")}g.addTable=a;g.getTable=b}),98);
__d("WAWebAddonEventResponseTableMode",["WANullthrows","WAWebAddonConstants","WAWebAddonInfraError","WAWebEventResponseDBSerialization","WAWebEventResponsesSchema","WAWebMsgGetters","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={mode:d("WAWebAddonConstants").AddonTableMode.EventResponse,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebEventResponsesSchema").getTable().bulkCreateOrReplace(a.map(function(a){if(a.kind!==d("WAWebMsgType").MsgKind.EventResponseDecrypted)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType);return d("WAWebEventResponseDBSerialization").dbRowFromEventResponseMessage(a)}))});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebEventResponsesSchema").getTable().anyOf(["parentMsgKey","sender"],a.map(function(a){return[a[0].toString(),a[1].toString()]})));return a.map(d("WAWebEventResponseDBSerialization").eventResponseMessageFromDBRow)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebEventResponsesSchema").getTable().anyOf(["parentMsgKey"],a.map(function(a){return a.toString()})));return a.map(d("WAWebEventResponseDBSerialization").eventResponseMessageFromDBRow)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebEventResponsesSchema").getTable().bulkRemoveByIndex(["msgKey"],a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(a=(yield d("WAWebEventResponsesSchema").getTable().equals(["msgKey"],a.toString())))==null?void 0:a[0];return a==null?a:d("WAWebEventResponseDBSerialization").eventResponseMessageFromDBRow(a)});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;if(a.kind===d("WAWebMsgType").MsgKind.EventResponseEncrypted)e=a.targetMessageKey;else if(a.kind===d("WAWebMsgType").MsgKind.EventResponseDecrypted)e=a.parentMsgKey;else throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType);yield d("WAWebEventResponsesSchema").getTable().merge([e.toString(),c("WANullthrows")(d("WAWebMsgGetters").getSender(a)).toString()],{ack:b})});function e(b,c){return a.apply(this,arguments)}return e}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h.getByMsgKey(a));if(a!=null)return h.bulkUpsert([babelHelpers["extends"]({},a,{read:!0})])});function c(b){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebEventResponsesSchema").getTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.eventResponseTableMode=h}),98);
__d("WAWebMaxPerGroup",[],(function(a,b,c,d,e,f){function a(a,b,c){var d=new Map();for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;var h=c(g),i=d.get(h);(i==null||b(g)>=b(i))&&d.set(h,g)}return Array.from(d.values())}f.maxPerGroup=a}),66);
__d("WAWebPollsDbSerialization",["WAWebMsgKey","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b={msgKey:a.msgKey.toString(),parentMsgKey:a.parentMsgKey.toString(),selectedOptionLocalIds:new Uint8Array(a.selectedOptionLocalIds).buffer,senderTimestampMs:a.senderTimestampMs,sender:a.sender.toString(),read:a.read};a.t!=null&&(b.t=a.t);a.ack!=null&&(b.ack=a.ack);return b}function b(a){return{msgKey:c("WAWebMsgKey").fromString(a.msgKey),parentMsgKey:c("WAWebMsgKey").fromString(a.parentMsgKey),selectedOptionLocalIds:Array.from(new Uint8Array(a.selectedOptionLocalIds)),senderTimestampMs:a.senderTimestampMs,t:a.t,sender:d("WAWebWidFactory").createUserWid(a.sender),ack:a.ack,read:(a=a.read)!=null?a:!0}}g.dbRowFromVote=a;g.voteFromDbRow=b}),98);
__d("WAWebPollsGetVoteKey",["WAWebLidMigrationUtils","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=a.parentMsgKey;a=a.sender;a=d("WAWebWidFactory").createWidFromWidLike(a);return String(b)+"|"+String(d("WAWebLidMigrationUtils").toLid(a))+"|"+String(d("WAWebLidMigrationUtils").toPn(a))}g.getVoteKey=a}),98);
__d("WAWebDBPollsUpsertVotes",["WAWebApiContact","WAWebMaxPerGroup","WAWebModelStorageUtils","WAWebPollsDbSerialization","WAWebPollsGetVoteKey","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c=d("WAWebMaxPerGroup").maxPerGroup(a,function(a){return a.senderTimestampMs},d("WAWebPollsGetVoteKey").getVoteKey);return d("WAWebModelStorageUtils").getStorage().lock(["poll-votes"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.anyOf(["parentMsgKey","sender"],h(c))),e=new Map();for(b of b)e.set(d("WAWebPollsGetVoteKey").getVoteKey(b),b);b=[];var f=[],g=[];for(var i of c){var j=e.get(d("WAWebPollsGetVoteKey").getVoteKey(i));if(j!=null){if(j.senderTimestampMs>i.senderTimestampMs){b.push(d("WAWebPollsDbSerialization").voteFromDbRow(j));continue}String(i.sender)!==String(j.sender)&&g.push(j)}var k=i.selectedOptionLocalIds.length===0;j=(j=j==null?void 0:j.read)!=null?j:!1;k=!k&&j&&i.read!==j?babelHelpers["extends"]({},i,{read:!0}):i;b.push(k);f.push(d("WAWebPollsDbSerialization").dbRowFromVote(k))}g.length>0&&(yield a.bulkRemove(f.map(function(a){return[a.parentMsgKey,a.sender]})));f.length>0&&(yield a.bulkCreateOrReplace(f));return b});return function(b){return a.apply(this,arguments)}}())}function h(a){var b=[];for(a of a){var c=a.parentMsgKey,e=a.sender;b.push([c.toString(),e.toString()]);e=d("WAWebApiContact").getAlternateUserWid(e);e!=null&&b.push([c.toString(),e.toString()])}return b}g.upsertVotesDb=a}),98);
__d("WAWebPollsVoteDataUtils",["WANullthrows","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.msgKey,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),c=b.from,e=b.to;b=b.author;return{id:a.msgKey,to:e,from:c,author:b,type:d("WAWebMsgType").MSG_TYPE.POLL_UPDATE,kind:d("WAWebMsgType").MsgKind.PollVoteDecrypted,pollUpdateParentKey:a.parentMsgKey,selectedOptionLocalIds:a.selectedOptionLocalIds,senderTimestampMs:a.senderTimestampMs,t:(e=a.t)!=null?e:void 0,ack:(c=a.ack)!=null?c:void 0,read:(b=a.read)!=null?b:!1}}function b(a){return{msgKey:a.id,parentMsgKey:a.pollUpdateParentKey,selectedOptionLocalIds:a.selectedOptionLocalIds,senderTimestampMs:a.senderTimestampMs,t:a.t,sender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a))),ack:d("WAWebMsgGetters").getAck(a),read:d("WAWebUserPrefsMeUser").isMeAccount(a.from)||a.read}}g.voteDataToPollVoteMsgData=a;g.pollVoteMsgDataToVoteData=b}),98);
__d("WAWebPollsVotesSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("poll-votes").version(d("WAWebModelStorageVersions").pollVotesCreateTable(),[e(["parentMsgKey","sender"]),c("msgKey"),b("parentMsgKey"),f("selectedOptionLocalIds",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("senderTimestampMs"),c("ack"),c("t"),c("read")]).version(d("WAWebModelStorageVersions").pollVotesAddMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("poll-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebAddonPollVoteTableMode",["WANullthrows","WAWebAddonConstants","WAWebAddonInfraError","WAWebDBPollsUpsertVotes","WAWebMsgType","WAWebPollsDbSerialization","WAWebPollsVoteDataUtils","WAWebPollsVotesSchema","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(a){return d("WAWebPollsVoteDataUtils").voteDataToPollVoteMsgData(d("WAWebPollsDbSerialization").voteFromDbRow(a))},i={mode:d("WAWebAddonConstants").AddonTableMode.PollVote,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){if(a.kind!==d("WAWebMsgType").MsgKind.PollVoteDecrypted)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType);return d("WAWebPollsVoteDataUtils").pollVoteMsgDataToVoteData(a)});yield d("WAWebDBPollsUpsertVotes").upsertVotesDb(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPollsVotesSchema").getTable().anyOf(["parentMsgKey","sender"],a.map(function(a){return[a[0].toString(),a[1].toString()]})));return a.map(h)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPollsVotesSchema").getTable().anyOf(["parentMsgKey"],a.map(function(a){return a.toString()})));return a.map(h)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebPollsVotesSchema").getTable().bulkRemoveByIndex(["msgKey"],a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPollsVotesSchema").getTable().equals(["msgKey"],a.toString()))[0];return a==null?a:h(a)});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.kind!==d("WAWebMsgType").MsgKind.PollVoteDecrypted&&a.kind!==d("WAWebMsgType").MsgKind.PollVoteEncrypted)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType);yield d("WAWebPollsVotesSchema").getTable().merge([a.pollUpdateParentKey.toString(),c("WANullthrows")(a.from).toString()],{ack:b})});function e(b,c){return a.apply(this,arguments)}return e}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield i.getByMsgKey(a));if(a!=null)return i.bulkUpsert([babelHelpers["extends"]({},a,{read:!0})])});function c(b){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebPollsVotesSchema").getTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.pollVoteTableMode=i}),98);
__d("WAWebAddonDBTable",["WAWebAddonCommentTableMode","WAWebAddonConstants","WAWebAddonEventResponseTableMode","WAWebAddonInfraError","WAWebAddonPinTableMode","WAWebAddonPollVoteTableMode","WAWebAddonReactionTableMode","WAWebAddonSelectUtils","WAWebAddonUnifiedAddonsTableMode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(a){switch(a){case d("WAWebAddonConstants").AddonTableMode.Pin:return d("WAWebAddonPinTableMode").pinTableMode;case d("WAWebAddonConstants").AddonTableMode.PollVote:return d("WAWebAddonPollVoteTableMode").pollVoteTableMode;case d("WAWebAddonConstants").AddonTableMode.Comment:return d("WAWebAddonCommentTableMode").commentTableMode;case d("WAWebAddonConstants").AddonTableMode.Reaction:return d("WAWebAddonReactionTableMode").reactionTableMode;case d("WAWebAddonConstants").AddonTableMode.EventResponse:return d("WAWebAddonEventResponseTableMode").eventResponseTableMode;case d("WAWebAddonConstants").AddonTableMode.Unified:return d("WAWebAddonUnifiedAddonsTableMode").unifiedAddonsTableMode;case d("WAWebAddonConstants").AddonTableMode.None:throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)}},i={bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.length===0)return;return h(a).bulkUpsert(b)});function c(b,c){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return b.length===0?[]:h(a).bulkGetByParentAndSender(b)});function c(b,c){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return h(a).bulkGetByMsgKey(b,c)});function c(b,c,d){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return h(a).bulkGetByParentMsgKey(b)});function c(b,c){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return h(a).bulkGetByChatWid(b)});function c(b,c){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.length===0)return;return h(a).bulkRemoveByMsgKey(b)});function c(b,c){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return h(a).updateAck(b,c)});function c(b,c,d){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return h(a).getByMsgKey(b)});function c(b,c){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return h(a).getTableSize()});function c(b){return a.apply(this,arguments)}return c}()};a={bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return i.bulkGetByParentAndSender(d("WAWebAddonSelectUtils").getTableModeByMsgType(a),b)});function c(b,c){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return i.getByMsgKey(d("WAWebAddonSelectUtils").getTableModeByMsgType(a),b)});function c(b,c){return a.apply(this,arguments)}return c}()};g.addonInternalDBTable=i;g.addonDBTable=a}),98);
__d("WAWebCastToPinInChatMsg",["invariant","WAWebMsgType"],(function(a,b,c,d,e,f,g,h){function i(a){return a.type===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE?a:null}function a(a){a=i(a);a!=null||h(0,76405);return a}g.assertPinInChatMsgData=a}),98);
__d("WAWebPinInChatSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("pinned-messages").version(d("WAWebModelStorageVersions").pinInChatCreateTable(),[e("parentMsgKey"),c("chatId"),c("msgKey"),c("senderTimestampMs"),c("ack"),c("t"),c("pinType"),c("pinExpiryDuration"),c("sender"),b("msgKey"),b("chatId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("pinned-messages")}g.addTable=a;g.getTable=b}),98);
__d("WAWebAddonPinTableMode",["WAWebAddonConstants","WAWebAddonInfraError","WAWebCastToPinInChatMsg","WAWebDBCRUDOperationsPinInChat","WAWebPinInChatSchema","WAWebPinsDbSerialization","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={mode:d("WAWebAddonConstants").AddonTableMode.Pin,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return d("WAWebPinsDbSerialization").serializePinInChatMsgData(d("WAWebCastToPinInChatMsg").assertPinInChatMsgData(a))});yield d("WAWebDBCRUDOperationsPinInChat").createOrUpdatePinInChat(a[0].id.remote,b)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length!==1)return[];a=(yield d("WAWebPinInChatSchema").getTable().get(a[0].toString()));return a==null?[]:[d("WAWebPinsDbSerialization").deserializePinInChatMsgData(a)]});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPinInChatSchema").getTable().anyOf(["chatId"],a.map(function(a){return a.toString()})));return a.map(d("WAWebPinsDbSerialization").deserializePinInChatMsgData)});function c(b){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebPinInChatSchema").getTable().bulkRemoveByIndex(["msgKey"],a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPinInChatSchema").getTable().equals(["msgKey"],a.toString()))[0];return a==null?a:d("WAWebPinsDbSerialization").deserializePinInChatMsgData(a)});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAWebPinsDbSerialization").serializePinInChatMsgData(d("WAWebCastToPinInChatMsg").assertPinInChatMsgData(a));yield d("WAWebPinInChatSchema").getTable().merge(a.parentMsgKey,{ack:b})});function c(b,c){return a.apply(this,arguments)}return c}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h.getByMsgKey(a));if(a!=null)return h.bulkUpsert([babelHelpers["extends"]({},a,{read:!0})])});function c(b){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebPinInChatSchema").getTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.pinTableMode=h}),98);
__d("WAWebCastToReactionMsg",["invariant","WAWebMsgType"],(function(a,b,c,d,e,f,g,h){function i(a){return a.type===d("WAWebMsgType").MSG_TYPE.REACTION?a:null}function a(a){a=i(a);a!=null||h(0,73785);return a}g.castToReactionMsgData=i;g.assertReactionMsgData=a}),98);
__d("WAWebSchemaReactions",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b("$InternalEnum").Mirrored(["ParentMsgPlaceholder","ParentMsgMissing","ParentMsgFutureproof"]);function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addCompositeIndex;b=b.addIndex;a.add("reactions").version(d("WAWebModelStorageVersions").reactionsCreateTable(),[e(["parentMsgKey","senderUserJid"]),c("msgKey"),c("reactionText"),c("timestamp"),c("orphan"),c("orphanReason"),c("read"),c("ack"),b("parentMsgKey"),b("orphan"),c("t")]).version(d("WAWebModelStorageVersions").addReactionTableOrphanIndex(),[f(["parentMsgKey","orphan"])]).version(d("WAWebModelStorageVersions").addReactionTableMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("reactions")}g.addTable=a;g.getReactionsTable=c}),98);
__d("WAWebAddonReactionTableMode",["WANullthrows","WAWebAddonConstants","WAWebAddonInfraError","WAWebCastToReactionMsg","WAWebMsgGetters","WAWebMsgType","WAWebReactionDataUtils","WAWebSchemaReactions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={mode:d("WAWebAddonConstants").AddonTableMode.Reaction,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return d("WAWebReactionDataUtils").reactionMsgDataToReactionRow(d("WAWebCastToReactionMsg").assertReactionMsgData(a))});yield d("WAWebSchemaReactions").getReactionsTable().bulkCreateOrReplace(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaReactions").getReactionsTable().anyOf(["parentMsgKey","senderUserJid"],a.map(function(a){var b=a[0];a=a[1];return[b.toString(),a.toString()]})));return a.map(d("WAWebReactionDataUtils").reactionRowToReactionMsgData)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaReactions").getReactionsTable().anyOf(["parentMsgKey"],a.map(function(a){return a.toString()})));return a.map(d("WAWebReactionDataUtils").reactionRowToReactionMsgData)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaReactions").getReactionsTable().bulkRemoveByIndex(["msgKey"],a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaReactions").getReactionsTable().equals(["msgKey"],a.toString()))[0];return a==null?a:d("WAWebReactionDataUtils").reactionRowToReactionMsgData(a)});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;if(a.kind===d("WAWebMsgType").MsgKind.ReactionEncrypted)e=a.targetMessageKey;else if(a.kind===d("WAWebMsgType").MsgKind.ReactionDecrypted)e=a.reactionParentKey;else throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedMsgType);yield d("WAWebSchemaReactions").getReactionsTable().merge([e.toString(),c("WANullthrows")(d("WAWebMsgGetters").getSender(a)).toString()],{ack:b})});function e(b,c){return a.apply(this,arguments)}return e}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h.getByMsgKey(a));if(a!=null)return h.bulkUpsert([babelHelpers["extends"]({},a,{read:!0})])});function c(b){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebSchemaReactions").getReactionsTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.reactionTableMode=h}),98);
__d("WAWebSchemaUnifiedAddons",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("addons-unified").version(d("WAWebModelStorageVersions").createUnifiedAddonsTable(),[e("msgKey"),c("targetMsgKey"),b("targetMsgKey"),c("arbitraryIndex"),b("arbitraryIndex"),c("rowType"),b("rowType"),c("ack"),c("t"),c("read"),c("addonProps")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("addons-unified")}g.addTable=a;g.getTable=b}),98);
__d("WAWebAddonUnifiedAddonsTableMode",["WAWebAddonConstants","WAWebAddonInfraError","WAWebMsgType","WAWebPinsDbSerialization","WAWebSchemaUnifiedAddons","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(a){return a.map(function(a){if(a.rowType===d("WAWebAddonConstants").AddonMinimizedType.PinInChat)return d("WAWebPinsDbSerialization").unifiedAddonRowIntoPinInChatMsgData(a);throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType)})};a={mode:d("WAWebAddonConstants").AddonTableMode.Unified,bulkUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){if(a.kind===d("WAWebMsgType").MsgKind.PinInChat)return d("WAWebPinsDbSerialization").pinInChatMsgDatIntoUnifiedAddonRow(a);throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});yield d("WAWebSchemaUnifiedAddons").getTable().bulkCreateOrReplace(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByParentAndSender:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),bulkGetByParentMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaUnifiedAddons").getTable().anyOf(["targetMsgKey"],a.map(function(a){return a.toString()})));return h(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkGetByChatWid:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaUnifiedAddons").getTable().anyOf(["arbitraryIndex"],a.map(function(a){return a.toString()})));return h(a)});function c(b){return a.apply(this,arguments)}return c}(),bulkRemoveByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaUnifiedAddons").getTable().bulkRemove(a.map(function(a){return a.toString()}))});function c(b){return a.apply(this,arguments)}return c}(),getByMsgKey:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaUnifiedAddons").getTable().get(a.toString()));return a==null?null:h([a])[0]});function c(b){return a.apply(this,arguments)}return c}(),updateAck:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebSchemaUnifiedAddons").getTable().merge(a.id.toString(),{ack:b})});function c(b,c){return a.apply(this,arguments)}return c}(),markAsRead:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});function c(){return a.apply(this,arguments)}return c}(),getTableSize:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebSchemaUnifiedAddons").getTable().count()});function c(){return a.apply(this,arguments)}return c}()};g.unifiedAddonsTableMode=a}),98);
__d("AddonPlaceholderMsgsUtils",["WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonInfraError","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var b=a.addons;a=a.processor;if(a.type!==d("WAWebAddonConstants").AddonProcessorType.DualEncryptedWithMessageTraits)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedFeature);a=[];for(b of b)b.kind===d("WAWebMsgType").MsgKind.PlaceholderAddon&&a.push(b.id);return a.length===0?null:a}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebAddonDBTable").addonInternalDBTable.bulkGetByMsgKey(a,b));b=new Set();for(a of a)a!=null&&a.kind===d("WAWebMsgType").MsgKind.PlaceholderAddon&&b.add(a.id.toString());return b});return h.apply(this,arguments)}g.getIncomingPlaceholderKeys=a;g.getPlaceholderMsgKeys=c}),98);
__d("WAWebAddOnParseWebMsgInfo",["WALongInt","WANullthrows","WATimeUtils","WAWebE2EProtoUtils","WAWebMsgKey","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a,b,e){var f=!!a.fromMe,g=d("WAWebE2EProtoUtils").decodeJid(a.remoteJid),h;f?g!=null&&typeof g!=="string"&&!g.isUser()&&(b===!0?h=d("WAWebUserPrefsMeUser").getMaybeMeLidUser():h=d("WAWebUserPrefsMeUser").getMeUser()):h=e!=null?d("WAWebE2EProtoUtils").decodeJid(e):d("WAWebE2EProtoUtils").decodeJid(a.participant);if(typeof g==="string"||g==null)return null;h!=null&&typeof h!=="string"?e=new(c("WAWebMsgKey"))({id:c("WANullthrows")(a.id),fromMe:f,remote:g,participant:h}):e=new(c("WAWebMsgKey"))({id:c("WANullthrows")(a.id),fromMe:f,remote:g});a=b===!0?c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()):d("WAWebUserPrefsMeUser").getMeUser();g=e.participant||e.remote;b=d("WAWebWidFactory").toUserWid(f===!0?a:g);return{msgKey:e,sender:b}}function b(a){return a==null?null:Math.floor(d("WALongInt").numberOrThrowIfTooLarge(a)/1e3)}function e(a){var b=d("WATimeUtils").unixTimeMs();return a==null?b:Math.max(a+1,b)}g.buildAddonMsgKey=a;g.getAddonServerTimestamp=b;g.getIncreasingLatestSenderTimestampMs=e}),98);
__d("WAWebAddonGatingUtils",["WAWebAddonCrossWindowUtils","WAWebAddonPluginProcessor","WAWebAddonProcessMsgsUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebAddonPluginProcessor").hasAddonProcessor(a)?d("WAWebAddonPluginProcessor").getAddonProcessor(a).isEnabled():!1}function b(a){a=d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(a);return a==null||!d("WAWebAddonCrossWindowUtils").isInfraSupportedAddon(a)?!1:d("WAWebAddonPluginProcessor").getAddonProcessor(a).isEnabled()}g.isUnifiedInfraEnabledForType=a;g.isUnifiedInfraEnabled=b}),98);
__d("WAWebReactionGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("flattened_reactions_collection")}function b(){return d("WAWebABProps").getABPropConfigValue("web_reaction_notification_via_add_on_api")}g.isFlattenedReactionsEnabled=a;g.isReactionNotificationAddOnApiEnabled=b}),98);
__d("WAWebProtobufsUserPassword.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,PBKDF2_HMAC_SHA512:1,PBKDF2_HMAC_SHA384:2});c=b("$InternalEnum")({UTF8:0,UTF8_BROKEN:1});e={};f={};b={};e.internalSpec={encoding:[1,(d=d("WAProtoConst")).TYPES.ENUM,c],transformer:[2,d.TYPES.ENUM,a],transformerArg:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],transformedData:[4,d.TYPES.BYTES]};f.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,b]};b.internalSpec={asBlob:[1,d.TYPES.BYTES],asUnsignedInteger:[2,d.TYPES.UINT32],__oneofs__:{value:["asBlob","asUnsignedInteger"]}};g.UserPassword$Transformer=a;g.UserPassword$Encoding=c;g.UserPasswordSpec=e;g.UserPassword$TransformerArgSpec=f;g.UserPassword$TransformerArg$ValueSpec=b}),98);
__d("WAWebProtobufsChatLockSettings.pb",["WAProtoConst","WAWebProtobufsUserPassword.pb"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={hideLockedChats:[1,d("WAProtoConst").TYPES.BOOL],secretCode:[2,d("WAProtoConst").TYPES.MESSAGE,d("WAWebProtobufsUserPassword.pb").UserPasswordSpec]};g.ChatLockSettingsSpec=a}),98);
__d("WAWebProtobufsDeviceCapabilities.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,MINIMAL:1,FULL:2});c={};c.internalSpec={chatLockSupportLevel:[1,d("WAProtoConst").TYPES.ENUM,a]};g.DeviceCapabilities$ChatLockSupportLevel=a;g.DeviceCapabilitiesSpec=c}),98);
__d("WAWebProtobufSyncAction.pb",["$InternalEnum","WAProtoConst","WAWebProtobufsChatLockSettings.pb","WAWebProtobufsDeviceCapabilities.pb","WAWebProtobufsProtocol.pb"],(function(a,b,c,d,e,f,g){var h;c=(a=b("$InternalEnum"))({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});e=a({NONE:0,SCHEDULED:1,PRIVACY:2,LIGHTWEIGHT:3});f=a({CONNECTED:0,REJECTED:1,CANCELLED:2,ACCEPTEDELSEWHERE:3,MISSED:4,INVALID:5,UNAVAILABLE:6,UPCOMING:7,FAILED:8,ABANDONED:9,ONGOING:10});b=a({ACTIVE:0});var aa=a({ACTIVE:0,INACTIVE:1}),ba=a({UNSTRUCTURED:1,STRUCTURED:2}),ca=a({ALLOW_LIST:0,DENY_LIST:1,CONTACTS:2}),da=a({PERSONALIZED:0}),ea=a({LID:1,PN:2});a=a({ANDROID:0,SMBA:1,IPHONE:2,SMBI:3,WEB:4,UWP:5,DARWIN:6});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={},R={},S={},T={},U={},V={},W={},X={},Y={},Z={},$={},fa={},ga={},ha={},ia={},ja={},ka={},la={},ma={},na={},oa={},pa={},qa={},ra={},sa={},ta={},ua={};i.internalSpec={emoji:[1,(h=d("WAProtoConst")).TYPES.STRING],weight:[2,h.TYPES.FLOAT]};j.internalSpec={callResult:[1,h.TYPES.ENUM,f],isDndMode:[2,h.TYPES.BOOL],silenceReason:[3,h.TYPES.ENUM,e],duration:[4,h.TYPES.INT64],startTime:[5,h.TYPES.INT64],isIncoming:[6,h.TYPES.BOOL],isVideo:[7,h.TYPES.BOOL],isCallLink:[8,h.TYPES.BOOL],callLinkToken:[9,h.TYPES.STRING],scheduledCallId:[10,h.TYPES.STRING],callId:[11,h.TYPES.STRING],callCreatorJid:[12,h.TYPES.STRING],groupJid:[13,h.TYPES.STRING],participants:[14,h.FLAGS.REPEATED|h.TYPES.MESSAGE,k],callType:[15,h.TYPES.ENUM,c]};k.internalSpec={userJid:[1,h.TYPES.STRING],callResult:[2,h.TYPES.ENUM,f]};l.internalSpec={timestamp:[1,h.TYPES.INT64],starAction:[2,h.TYPES.MESSAGE,sa],contactAction:[3,h.TYPES.MESSAGE,ra],muteAction:[4,h.TYPES.MESSAGE,qa],pinAction:[5,h.TYPES.MESSAGE,pa],securityNotificationSetting:[6,h.TYPES.MESSAGE,oa],pushNameSetting:[7,h.TYPES.MESSAGE,na],quickReplyAction:[8,h.TYPES.MESSAGE,la],recentEmojiWeightsAction:[11,h.TYPES.MESSAGE,ia],labelEditAction:[14,h.TYPES.MESSAGE,ja],labelAssociationAction:[15,h.TYPES.MESSAGE,ka],localeSetting:[16,h.TYPES.MESSAGE,ma],archiveChatAction:[17,h.TYPES.MESSAGE,ha],deleteMessageForMeAction:[18,h.TYPES.MESSAGE,ga],keyExpiration:[19,h.TYPES.MESSAGE,V],markChatAsReadAction:[20,h.TYPES.MESSAGE,fa],clearChatAction:[21,h.TYPES.MESSAGE,$],deleteChatAction:[22,h.TYPES.MESSAGE,Z],unarchiveChatsSetting:[23,h.TYPES.MESSAGE,Y],primaryFeature:[24,h.TYPES.MESSAGE,U],androidUnsupportedActions:[26,h.TYPES.MESSAGE,T],agentAction:[27,h.TYPES.MESSAGE,S],subscriptionAction:[28,h.TYPES.MESSAGE,R],userStatusMuteAction:[29,h.TYPES.MESSAGE,Q],timeFormatAction:[30,h.TYPES.MESSAGE,P],nuxAction:[31,h.TYPES.MESSAGE,O],primaryVersionAction:[32,h.TYPES.MESSAGE,N],stickerAction:[33,h.TYPES.MESSAGE,L],removeRecentStickerAction:[34,h.TYPES.MESSAGE,M],chatAssignment:[35,h.TYPES.MESSAGE,K],chatAssignmentOpenedStatus:[36,h.TYPES.MESSAGE,J],pnForLidChatAction:[37,h.TYPES.MESSAGE,I],marketingMessageAction:[38,h.TYPES.MESSAGE,G],marketingMessageBroadcastAction:[39,h.TYPES.MESSAGE,F],externalWebBetaAction:[40,h.TYPES.MESSAGE,E],privacySettingRelayAllCalls:[41,h.TYPES.MESSAGE,D],callLogAction:[42,h.TYPES.MESSAGE,C],statusPrivacy:[44,h.TYPES.MESSAGE,B],botWelcomeRequestAction:[45,h.TYPES.MESSAGE,A],deleteIndividualCallLog:[46,h.TYPES.MESSAGE,z],labelReorderingAction:[47,h.TYPES.MESSAGE,y],paymentInfoAction:[48,h.TYPES.MESSAGE,x],customPaymentMethodsAction:[49,h.TYPES.MESSAGE,u],lockChatAction:[50,h.TYPES.MESSAGE,t],chatLockSettings:[51,h.TYPES.MESSAGE,d("WAWebProtobufsChatLockSettings.pb").ChatLockSettingsSpec],wamoUserIdentifierAction:[52,h.TYPES.MESSAGE,s],privacySettingDisableLinkPreviewsAction:[53,h.TYPES.MESSAGE,r],deviceCapabilities:[54,h.TYPES.MESSAGE,d("WAWebProtobufsDeviceCapabilities.pb").DeviceCapabilitiesSpec],noteEditAction:[55,h.TYPES.MESSAGE,q],favoritesAction:[56,h.TYPES.MESSAGE,o],merchantPaymentPartnerAction:[57,h.TYPES.MESSAGE,n],waffleAccountLinkStateAction:[58,h.TYPES.MESSAGE,m],usernameChatStartMode:[59,h.TYPES.MESSAGE,H]};m.internalSpec={linkState:[2,h.TYPES.ENUM,b]};n.internalSpec={status:[1,h.FLAGS.REQUIRED|h.TYPES.ENUM,aa],country:[2,h.FLAGS.REQUIRED|h.TYPES.STRING],gatewayName:[3,h.TYPES.STRING],credentialId:[4,h.TYPES.STRING]};o.internalSpec={favorites:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,p]};p.internalSpec={id:[1,h.TYPES.STRING]};q.internalSpec={type:[1,h.TYPES.ENUM,ba],chatJid:[2,h.TYPES.STRING],createdAt:[3,h.TYPES.INT64],deleted:[4,h.TYPES.BOOL],unstructuredContent:[5,h.TYPES.STRING]};r.internalSpec={isPreviewsDisabled:[1,h.TYPES.BOOL]};s.internalSpec={identifier:[1,h.TYPES.STRING]};t.internalSpec={locked:[1,h.TYPES.BOOL]};u.internalSpec={customPaymentMethods:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.internalSpec={credentialId:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],country:[2,h.FLAGS.REQUIRED|h.TYPES.STRING],type:[3,h.FLAGS.REQUIRED|h.TYPES.STRING],metadata:[4,h.FLAGS.REPEATED|h.TYPES.MESSAGE,w]};w.internalSpec={key:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],value:[2,h.FLAGS.REQUIRED|h.TYPES.STRING]};x.internalSpec={cpi:[1,h.TYPES.STRING]};y.internalSpec={sortedLabelIds:[1,h.FLAGS.REPEATED|h.TYPES.INT32]};z.internalSpec={peerJid:[1,h.TYPES.STRING],isIncoming:[2,h.TYPES.BOOL]};A.internalSpec={isSent:[1,h.TYPES.BOOL]};B.internalSpec={mode:[1,h.TYPES.ENUM,ca],userJid:[2,h.FLAGS.REPEATED|h.TYPES.STRING]};C.internalSpec={callLogRecord:[1,h.TYPES.MESSAGE,j]};D.internalSpec={isEnabled:[1,h.TYPES.BOOL]};E.internalSpec={isOptIn:[1,h.TYPES.BOOL]};F.internalSpec={repliedCount:[1,h.TYPES.INT32]};G.internalSpec={name:[1,h.TYPES.STRING],message:[2,h.TYPES.STRING],type:[3,h.TYPES.ENUM,da],createdAt:[4,h.TYPES.INT64],lastSentAt:[5,h.TYPES.INT64],isDeleted:[6,h.TYPES.BOOL],mediaId:[7,h.TYPES.STRING]};H.internalSpec={chatStartMode:[1,h.TYPES.ENUM,ea]};I.internalSpec={pnJid:[1,h.TYPES.STRING]};J.internalSpec={chatOpened:[1,h.TYPES.BOOL]};K.internalSpec={deviceAgentID:[1,h.TYPES.STRING]};L.internalSpec={url:[1,h.TYPES.STRING],fileEncSha256:[2,h.TYPES.BYTES],mediaKey:[3,h.TYPES.BYTES],mimetype:[4,h.TYPES.STRING],height:[5,h.TYPES.UINT32],width:[6,h.TYPES.UINT32],directPath:[7,h.TYPES.STRING],fileLength:[8,h.TYPES.UINT64],isFavorite:[9,h.TYPES.BOOL],deviceIdHint:[10,h.TYPES.UINT32],isLottie:[11,h.TYPES.BOOL]};M.internalSpec={lastStickerSentTs:[1,h.TYPES.INT64]};N.internalSpec={version:[1,h.TYPES.STRING]};O.internalSpec={acknowledged:[1,h.TYPES.BOOL]};P.internalSpec={isTwentyFourHourFormatEnabled:[1,h.TYPES.BOOL]};Q.internalSpec={muted:[1,h.TYPES.BOOL]};R.internalSpec={isDeactivated:[1,h.TYPES.BOOL],isAutoRenewing:[2,h.TYPES.BOOL],expirationDate:[3,h.TYPES.INT64]};S.internalSpec={name:[1,h.TYPES.STRING],deviceID:[2,h.TYPES.INT32],isDeleted:[3,h.TYPES.BOOL]};T.internalSpec={allowed:[1,h.TYPES.BOOL]};U.internalSpec={flags:[1,h.FLAGS.REPEATED|h.TYPES.STRING]};V.internalSpec={expiredKeyEpoch:[1,h.TYPES.INT32]};W.internalSpec={key:[1,h.TYPES.MESSAGE,d("WAWebProtobufsProtocol.pb").MessageKeySpec],timestamp:[2,h.TYPES.INT64]};X.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,W]};Y.internalSpec={unarchiveChats:[1,h.TYPES.BOOL]};Z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,X]};$.internalSpec={messageRange:[1,h.TYPES.MESSAGE,X]};fa.internalSpec={read:[1,h.TYPES.BOOL],messageRange:[2,h.TYPES.MESSAGE,X]};ga.internalSpec={deleteMedia:[1,h.TYPES.BOOL],messageTimestamp:[2,h.TYPES.INT64]};ha.internalSpec={archived:[1,h.TYPES.BOOL],messageRange:[2,h.TYPES.MESSAGE,X]};ia.internalSpec={weights:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i]};ja.internalSpec={name:[1,h.TYPES.STRING],color:[2,h.TYPES.INT32],predefinedId:[3,h.TYPES.INT32],deleted:[4,h.TYPES.BOOL],orderIndex:[5,h.TYPES.INT32]};ka.internalSpec={labeled:[1,h.TYPES.BOOL]};la.internalSpec={shortcut:[1,h.TYPES.STRING],message:[2,h.TYPES.STRING],keywords:[3,h.FLAGS.REPEATED|h.TYPES.STRING],count:[4,h.TYPES.INT32],deleted:[5,h.TYPES.BOOL]};ma.internalSpec={locale:[1,h.TYPES.STRING]};na.internalSpec={name:[1,h.TYPES.STRING]};oa.internalSpec={showNotification:[1,h.TYPES.BOOL]};pa.internalSpec={pinned:[1,h.TYPES.BOOL]};qa.internalSpec={muted:[1,h.TYPES.BOOL],muteEndTimestamp:[2,h.TYPES.INT64],autoMuted:[3,h.TYPES.BOOL]};ra.internalSpec={fullName:[1,h.TYPES.STRING],firstName:[2,h.TYPES.STRING],lidJid:[3,h.TYPES.STRING],saveOnPrimaryAddressbook:[4,h.TYPES.BOOL]};sa.internalSpec={starred:[1,h.TYPES.BOOL]};ta.internalSpec={index:[1,h.TYPES.BYTES],value:[2,h.TYPES.MESSAGE,l],padding:[3,h.TYPES.BYTES],version:[4,h.TYPES.INT32]};ua.internalSpec={currentLthash:[1,h.TYPES.BYTES],newLthash:[2,h.TYPES.BYTES],patchVersion:[3,h.TYPES.BYTES],collectionName:[4,h.TYPES.BYTES],firstFourBytesFromAHashOfSnapshotMacKey:[5,h.TYPES.BYTES],newLthashSubtract:[6,h.TYPES.BYTES],numberAdd:[7,h.TYPES.INT32],numberRemove:[8,h.TYPES.INT32],numberOverride:[9,h.TYPES.INT32],senderPlatform:[10,h.TYPES.ENUM,a],isSenderPrimary:[11,h.TYPES.BOOL]};g.CallLogRecord$CallType=c;g.CallLogRecord$SilenceReason=e;g.CallLogRecord$CallResult=f;g.SyncActionValue$WaffleAccountLinkStateAction$AccountLinkState=b;g.SyncActionValue$MerchantPaymentPartnerAction$Status=aa;g.SyncActionValue$NoteEditAction$NoteType=ba;g.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=ca;g.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=da;g.SyncActionValue$UsernameChatStartModeAction$ChatStartMode=ea;g.PatchDebugData$Platform=a;g.RecentEmojiWeightSpec=i;g.CallLogRecordSpec=j;g.CallLogRecord$ParticipantInfoSpec=k;g.SyncActionValueSpec=l;g.SyncActionValue$WaffleAccountLinkStateActionSpec=m;g.SyncActionValue$MerchantPaymentPartnerActionSpec=n;g.SyncActionValue$FavoritesActionSpec=o;g.SyncActionValue$FavoritesAction$FavoriteSpec=p;g.SyncActionValue$NoteEditActionSpec=q;g.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=r;g.SyncActionValue$WamoUserIdentifierActionSpec=s;g.SyncActionValue$LockChatActionSpec=t;g.SyncActionValue$CustomPaymentMethodsActionSpec=u;g.SyncActionValue$CustomPaymentMethodSpec=v;g.SyncActionValue$CustomPaymentMethodMetadataSpec=w;g.SyncActionValue$PaymentInfoActionSpec=x;g.SyncActionValue$LabelReorderingActionSpec=y;g.SyncActionValue$DeleteIndividualCallLogActionSpec=z;g.SyncActionValue$BotWelcomeRequestActionSpec=A;g.SyncActionValue$StatusPrivacyActionSpec=B;g.SyncActionValue$CallLogActionSpec=C;g.SyncActionValue$PrivacySettingRelayAllCallsSpec=D;g.SyncActionValue$ExternalWebBetaActionSpec=E;g.SyncActionValue$MarketingMessageBroadcastActionSpec=F;g.SyncActionValue$MarketingMessageActionSpec=G;g.SyncActionValue$UsernameChatStartModeActionSpec=H;g.SyncActionValue$PnForLidChatActionSpec=I;g.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=J;g.SyncActionValue$ChatAssignmentActionSpec=K;g.SyncActionValue$StickerActionSpec=L;g.SyncActionValue$RemoveRecentStickerActionSpec=M;g.SyncActionValue$PrimaryVersionActionSpec=N;g.SyncActionValue$NuxActionSpec=O;g.SyncActionValue$TimeFormatActionSpec=P;g.SyncActionValue$UserStatusMuteActionSpec=Q;g.SyncActionValue$SubscriptionActionSpec=R;g.SyncActionValue$AgentActionSpec=S;g.SyncActionValue$AndroidUnsupportedActionsSpec=T;g.SyncActionValue$PrimaryFeatureSpec=U;g.SyncActionValue$KeyExpirationSpec=V;g.SyncActionValue$SyncActionMessageSpec=W;g.SyncActionValue$SyncActionMessageRangeSpec=X;g.SyncActionValue$UnarchiveChatsSettingSpec=Y;g.SyncActionValue$DeleteChatActionSpec=Z;g.SyncActionValue$ClearChatActionSpec=$;g.SyncActionValue$MarkChatAsReadActionSpec=fa;g.SyncActionValue$DeleteMessageForMeActionSpec=ga;g.SyncActionValue$ArchiveChatActionSpec=ha;g.SyncActionValue$RecentEmojiWeightsActionSpec=ia;g.SyncActionValue$LabelEditActionSpec=ja;g.SyncActionValue$LabelAssociationActionSpec=ka;g.SyncActionValue$QuickReplyActionSpec=la;g.SyncActionValue$LocaleSettingSpec=ma;g.SyncActionValue$PushNameSettingSpec=na;g.SyncActionValue$SecurityNotificationSettingSpec=oa;g.SyncActionValue$PinActionSpec=pa;g.SyncActionValue$MuteActionSpec=qa;g.SyncActionValue$ContactActionSpec=ra;g.SyncActionValue$StarActionSpec=sa;g.SyncActionDataSpec=ta;g.PatchDebugDataSpec=ua}),98);
__d("WAWebProtobufsWeb.pb",["$InternalEnum","WAProtoConst","WAWebProtobufsE2E.pb","WAWebProtobufsProtocol.pb"],(function(a,b,c,d,e,f,g){var h,i;c=(a=b("$InternalEnum"))({E2EE:0,FB:2,BSP:1,BSP_AND_FB:3});e=a({UNKNOWN:0,REVOKE:1,CIPHERTEXT:2,FUTUREPROOF:3,NON_VERIFIED_TRANSITION:4,UNVERIFIED_TRANSITION:5,VERIFIED_TRANSITION:6,VERIFIED_LOW_UNKNOWN:7,VERIFIED_HIGH:8,VERIFIED_INITIAL_UNKNOWN:9,VERIFIED_INITIAL_LOW:10,VERIFIED_INITIAL_HIGH:11,VERIFIED_TRANSITION_ANY_TO_NONE:12,VERIFIED_TRANSITION_ANY_TO_HIGH:13,VERIFIED_TRANSITION_HIGH_TO_LOW:14,VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:15,VERIFIED_TRANSITION_UNKNOWN_TO_LOW:16,VERIFIED_TRANSITION_LOW_TO_UNKNOWN:17,VERIFIED_TRANSITION_NONE_TO_LOW:18,VERIFIED_TRANSITION_NONE_TO_UNKNOWN:19,GROUP_CREATE:20,GROUP_CHANGE_SUBJECT:21,GROUP_CHANGE_ICON:22,GROUP_CHANGE_INVITE_LINK:23,GROUP_CHANGE_DESCRIPTION:24,GROUP_CHANGE_RESTRICT:25,GROUP_CHANGE_ANNOUNCE:26,GROUP_PARTICIPANT_ADD:27,GROUP_PARTICIPANT_REMOVE:28,GROUP_PARTICIPANT_PROMOTE:29,GROUP_PARTICIPANT_DEMOTE:30,GROUP_PARTICIPANT_INVITE:31,GROUP_PARTICIPANT_LEAVE:32,GROUP_PARTICIPANT_CHANGE_NUMBER:33,BROADCAST_CREATE:34,BROADCAST_ADD:35,BROADCAST_REMOVE:36,GENERIC_NOTIFICATION:37,E2E_IDENTITY_CHANGED:38,E2E_ENCRYPTED:39,CALL_MISSED_VOICE:40,CALL_MISSED_VIDEO:41,INDIVIDUAL_CHANGE_NUMBER:42,GROUP_DELETE:43,GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:44,CALL_MISSED_GROUP_VOICE:45,CALL_MISSED_GROUP_VIDEO:46,PAYMENT_CIPHERTEXT:47,PAYMENT_FUTUREPROOF:48,PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:49,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:50,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:51,PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:52,PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:53,PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:54,PAYMENT_ACTION_SEND_PAYMENT_REMINDER:55,PAYMENT_ACTION_SEND_PAYMENT_INVITATION:56,PAYMENT_ACTION_REQUEST_DECLINED:57,PAYMENT_ACTION_REQUEST_EXPIRED:58,PAYMENT_ACTION_REQUEST_CANCELLED:59,BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:60,BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:61,BIZ_INTRO_TOP:62,BIZ_INTRO_BOTTOM:63,BIZ_NAME_CHANGE:64,BIZ_MOVE_TO_CONSUMER_APP:65,BIZ_TWO_TIER_MIGRATION_TOP:66,BIZ_TWO_TIER_MIGRATION_BOTTOM:67,OVERSIZED:68,GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:69,GROUP_V4_ADD_INVITE_SENT:70,GROUP_PARTICIPANT_ADD_REQUEST_JOIN:71,CHANGE_EPHEMERAL_SETTING:72,E2E_DEVICE_CHANGED:73,VIEWED_ONCE:74,E2E_ENCRYPTED_NOW:75,BLUE_MSG_BSP_FB_TO_BSP_PREMISE:76,BLUE_MSG_BSP_FB_TO_SELF_FB:77,BLUE_MSG_BSP_FB_TO_SELF_PREMISE:78,BLUE_MSG_BSP_FB_UNVERIFIED:79,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:80,BLUE_MSG_BSP_FB_VERIFIED:81,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:82,BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:83,BLUE_MSG_BSP_PREMISE_UNVERIFIED:84,BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:85,BLUE_MSG_BSP_PREMISE_VERIFIED:86,BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:87,BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:88,BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:89,BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:90,BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:91,BLUE_MSG_SELF_FB_TO_BSP_PREMISE:92,BLUE_MSG_SELF_FB_TO_SELF_PREMISE:93,BLUE_MSG_SELF_FB_UNVERIFIED:94,BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:95,BLUE_MSG_SELF_FB_VERIFIED:96,BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:97,BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:98,BLUE_MSG_SELF_PREMISE_UNVERIFIED:99,BLUE_MSG_SELF_PREMISE_VERIFIED:100,BLUE_MSG_TO_BSP_FB:101,BLUE_MSG_TO_CONSUMER:102,BLUE_MSG_TO_SELF_FB:103,BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:104,BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:105,BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:106,BLUE_MSG_UNVERIFIED_TO_VERIFIED:107,BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:108,BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:109,BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:110,BLUE_MSG_VERIFIED_TO_UNVERIFIED:111,BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:112,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:113,BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:114,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:115,BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:116,BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:117,E2E_IDENTITY_UNAVAILABLE:118,GROUP_CREATING:119,GROUP_CREATE_FAILED:120,GROUP_BOUNCED:121,BLOCK_CONTACT:122,EPHEMERAL_SETTING_NOT_APPLIED:123,SYNC_FAILED:124,SYNCING:125,BIZ_PRIVACY_MODE_INIT_FB:126,BIZ_PRIVACY_MODE_INIT_BSP:127,BIZ_PRIVACY_MODE_TO_FB:128,BIZ_PRIVACY_MODE_TO_BSP:129,DISAPPEARING_MODE:130,E2E_DEVICE_FETCH_FAILED:131,ADMIN_REVOKE:132,GROUP_INVITE_LINK_GROWTH_LOCKED:133,COMMUNITY_LINK_PARENT_GROUP:134,COMMUNITY_LINK_SIBLING_GROUP:135,COMMUNITY_LINK_SUB_GROUP:136,COMMUNITY_UNLINK_PARENT_GROUP:137,COMMUNITY_UNLINK_SIBLING_GROUP:138,COMMUNITY_UNLINK_SUB_GROUP:139,GROUP_PARTICIPANT_ACCEPT:140,GROUP_PARTICIPANT_LINKED_GROUP_JOIN:141,COMMUNITY_CREATE:142,EPHEMERAL_KEEP_IN_CHAT:143,GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST:144,GROUP_MEMBERSHIP_JOIN_APPROVAL_MODE:145,INTEGRITY_UNLINK_PARENT_GROUP:146,COMMUNITY_PARTICIPANT_PROMOTE:147,COMMUNITY_PARTICIPANT_DEMOTE:148,COMMUNITY_PARENT_GROUP_DELETED:149,COMMUNITY_LINK_PARENT_GROUP_MEMBERSHIP_APPROVAL:150,GROUP_PARTICIPANT_JOINED_GROUP_AND_PARENT_GROUP:151,MASKED_THREAD_CREATED:152,MASKED_THREAD_UNMASKED:153,BIZ_CHAT_ASSIGNMENT:154,CHAT_PSA:155,CHAT_POLL_CREATION_MESSAGE:156,CAG_MASKED_THREAD_CREATED:157,COMMUNITY_PARENT_GROUP_SUBJECT_CHANGED:158,CAG_INVITE_AUTO_ADD:159,BIZ_CHAT_ASSIGNMENT_UNASSIGN:160,CAG_INVITE_AUTO_JOINED:161,SCHEDULED_CALL_START_MESSAGE:162,COMMUNITY_INVITE_RICH:163,COMMUNITY_INVITE_AUTO_ADD_RICH:164,SUB_GROUP_INVITE_RICH:165,SUB_GROUP_PARTICIPANT_ADD_RICH:166,COMMUNITY_LINK_PARENT_GROUP_RICH:167,COMMUNITY_PARTICIPANT_ADD_RICH:168,SILENCED_UNKNOWN_CALLER_AUDIO:169,SILENCED_UNKNOWN_CALLER_VIDEO:170,GROUP_MEMBER_ADD_MODE:171,GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST_NON_ADMIN_ADD:172,COMMUNITY_CHANGE_DESCRIPTION:173,SENDER_INVITE:174,RECEIVER_INVITE:175,COMMUNITY_ALLOW_MEMBER_ADDED_GROUPS:176,PINNED_MESSAGE_IN_CHAT:177,PAYMENT_INVITE_SETUP_INVITER:178,PAYMENT_INVITE_SETUP_INVITEE_RECEIVE_ONLY:179,PAYMENT_INVITE_SETUP_INVITEE_SEND_AND_RECEIVE:180,LINKED_GROUP_CALL_START:181,REPORT_TO_ADMIN_ENABLED_STATUS:182,EMPTY_SUBGROUP_CREATE:183,SCHEDULED_CALL_CANCEL:184,SUBGROUP_ADMIN_TRIGGERED_AUTO_ADD_RICH:185,GROUP_CHANGE_RECENT_HISTORY_SHARING:186,PAID_MESSAGE_SERVER_CAMPAIGN_ID:187,GENERAL_CHAT_CREATE:188,GENERAL_CHAT_ADD:189,GENERAL_CHAT_AUTO_ADD_DISABLED:190,SUGGESTED_SUBGROUP_ANNOUNCE:191,BIZ_BOT_1P_MESSAGING_ENABLED:192,CHANGE_USERNAME:193,BIZ_COEX_PRIVACY_INIT_SELF:194,BIZ_COEX_PRIVACY_TRANSITION_SELF:195,SUPPORT_AI_EDUCATION:196,BIZ_BOT_3P_MESSAGING_ENABLED:197,REMINDER_SETUP_MESSAGE:198,REMINDER_SENT_MESSAGE:199,REMINDER_CANCEL_MESSAGE:200,BIZ_COEX_PRIVACY_INIT:201,BIZ_COEX_PRIVACY_TRANSITION:202,GROUP_DEACTIVATED:203,COMMUNITY_DEACTIVATE_SIBLING_GROUP:204,EVENT_UPDATED:205,EVENT_CANCELED:206,COMMUNITY_OWNER_UPDATED:207,COMMUNITY_SUB_GROUP_VISIBILITY_HIDDEN:208,CAPI_GROUP_NE2EE_SYSTEM_MESSAGE:209,STATUS_MENTION:210});f=a({ERROR:0,PENDING:1,SERVER_ACK:2,DELIVERY_ACK:3,READ:4,PLAYED:5});b=a({UNKNOWN:0,PENDING_SETUP:1,PENDING_RECEIVER_SETUP:2,INIT:3,SUCCESS:4,COMPLETED:5,FAILED:6,FAILED_RISK:7,FAILED_PROCESSING:8,FAILED_RECEIVER_PROCESSING:9,FAILED_DA:10,FAILED_DA_FINAL:11,REFUNDED_TXN:12,REFUND_FAILED:13,REFUND_FAILED_PROCESSING:14,REFUND_FAILED_DA:15,EXPIRED_TXN:16,AUTH_CANCELED:17,AUTH_CANCEL_FAILED_PROCESSING:18,AUTH_CANCEL_FAILED:19,COLLECT_INIT:20,COLLECT_SUCCESS:21,COLLECT_FAILED:22,COLLECT_FAILED_RISK:23,COLLECT_REJECTED:24,COLLECT_EXPIRED:25,COLLECT_CANCELED:26,COLLECT_CANCELLING:27,IN_REVIEW:28,REVERSAL_SUCCESS:29,REVERSAL_PENDING:30,REFUND_PENDING:31});var j=a({UNKNOWN_STATUS:0,PROCESSING:1,SENT:2,NEED_TO_ACCEPT:3,COMPLETE:4,COULD_NOT_COMPLETE:5,REFUNDED:6,EXPIRED:7,REJECTED:8,CANCELLED:9,WAITING_FOR_PAYER:10,WAITING:11}),k=a({UNKNOWN_CURRENCY:0,INR:1}),l=a({NOT_STARTED:0,FORCE_UPGRADE:1,DEVELOPMENT:2,PRODUCTION:3}),m=a({UNKNOWN_TYPE:0,PIN_FOR_ALL:1,UNPIN_FOR_ALL:2});a=a({UNDEFINED:0,REACTION:1,EVENT_RESPONSE:2,POLL_UPDATE:3,PIN_IN_CHAT:4});var n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={};n.internalDefaults={status:f.PENDING};n.internalSpec={key:[1,(h=d("WAProtoConst")).FLAGS.REQUIRED|h.TYPES.MESSAGE,(i=d("WAWebProtobufsProtocol.pb")).MessageKeySpec],message:[2,h.TYPES.MESSAGE,(d=d("WAWebProtobufsE2E.pb")).MessageSpec],messageTimestamp:[3,h.TYPES.UINT64],status:[4,h.TYPES.ENUM,f],participant:[5,h.TYPES.STRING],messageC2STimestamp:[6,h.TYPES.UINT64],ignore:[16,h.TYPES.BOOL],starred:[17,h.TYPES.BOOL],broadcast:[18,h.TYPES.BOOL],pushName:[19,h.TYPES.STRING],mediaCiphertextSha256:[20,h.TYPES.BYTES],multicast:[21,h.TYPES.BOOL],urlText:[22,h.TYPES.BOOL],urlNumber:[23,h.TYPES.BOOL],messageStubType:[24,h.TYPES.ENUM,e],clearMedia:[25,h.TYPES.BOOL],messageStubParameters:[26,h.FLAGS.REPEATED|h.TYPES.STRING],duration:[27,h.TYPES.UINT32],labels:[28,h.FLAGS.REPEATED|h.TYPES.STRING],paymentInfo:[29,h.TYPES.MESSAGE,p],finalLiveLocation:[30,h.TYPES.MESSAGE,d.Message$LiveLocationMessageSpec],quotedPaymentInfo:[31,h.TYPES.MESSAGE,p],ephemeralStartTimestamp:[32,h.TYPES.UINT64],ephemeralDuration:[33,h.TYPES.UINT32],ephemeralOffToOn:[34,h.TYPES.BOOL],ephemeralOutOfSync:[35,h.TYPES.BOOL],bizPrivacyStatus:[36,h.TYPES.ENUM,c],verifiedBizName:[37,h.TYPES.STRING],mediaData:[38,h.TYPES.MESSAGE,u],photoChange:[39,h.TYPES.MESSAGE,v],userReceipt:[40,h.FLAGS.REPEATED|h.TYPES.MESSAGE,x],reactions:[41,h.FLAGS.REPEATED|h.TYPES.MESSAGE,y],quotedStickerData:[42,h.TYPES.MESSAGE,u],futureproofData:[43,h.TYPES.BYTES],statusPsa:[44,h.TYPES.MESSAGE,w],pollUpdates:[45,h.FLAGS.REPEATED|h.TYPES.MESSAGE,z],pollAdditionalMetadata:[46,h.TYPES.MESSAGE,A],agentId:[47,h.TYPES.STRING],statusAlreadyViewed:[48,h.TYPES.BOOL],messageSecret:[49,h.TYPES.BYTES],keepInChat:[50,h.TYPES.MESSAGE,C],originalSelfAuthorUserJidString:[51,h.TYPES.STRING],revokeMessageTimestamp:[52,h.TYPES.UINT64],pinInChat:[54,h.TYPES.MESSAGE,D],premiumMessageInfo:[55,h.TYPES.MESSAGE,F],is1PBizBotMessage:[56,h.TYPES.BOOL],isGroupHistoryMessage:[57,h.TYPES.BOOL],botMessageInvokerJid:[58,h.TYPES.STRING],commentMetadata:[59,h.TYPES.MESSAGE,o],eventResponses:[61,h.FLAGS.REPEATED|h.TYPES.MESSAGE,G],reportingTokenInfo:[62,h.TYPES.MESSAGE,t],newsletterServerId:[63,h.TYPES.UINT64],eventAdditionalMetadata:[64,h.TYPES.MESSAGE,B],isMentionedInStatus:[65,h.TYPES.BOOL],statusMentions:[66,h.FLAGS.REPEATED|h.TYPES.STRING],targetMessageId:[67,h.TYPES.MESSAGE,i.MessageKeySpec],messageAddOns:[68,h.FLAGS.REPEATED|h.TYPES.MESSAGE,I],statusMentionMessageInfo:[69,h.TYPES.MESSAGE,J]};o.internalSpec={commentParentKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],replyCount:[2,h.TYPES.UINT32]};p.internalSpec={currencyDeprecated:[1,h.TYPES.ENUM,k],amount1000:[2,h.TYPES.UINT64],receiverJid:[3,h.TYPES.STRING],status:[4,h.TYPES.ENUM,j],transactionTimestamp:[5,h.TYPES.UINT64],requestMessageKey:[6,h.TYPES.MESSAGE,i.MessageKeySpec],expiryTimestamp:[7,h.TYPES.UINT64],futureproofed:[8,h.TYPES.BOOL],currency:[9,h.TYPES.STRING],txnStatus:[10,h.TYPES.ENUM,b],useNoviFiatFormat:[11,h.TYPES.BOOL],primaryAmount:[12,h.TYPES.MESSAGE,d.MoneySpec],exchangeAmount:[13,h.TYPES.MESSAGE,d.MoneySpec]};q.internalSpec={timestamp:[2,h.TYPES.UINT64],unreadChats:[3,h.TYPES.UINT32],notifyMessageCount:[4,h.TYPES.UINT32],notifyMessages:[5,h.FLAGS.REPEATED|h.TYPES.MESSAGE,n]};r.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageSpec],messageTimestamp:[3,h.TYPES.UINT64],participant:[4,h.TYPES.STRING]};s.internalSpec={labelsDisplay:[1,h.TYPES.ENUM,l],voipIndividualOutgoing:[2,h.TYPES.ENUM,l],groupsV3:[3,h.TYPES.ENUM,l],groupsV3Create:[4,h.TYPES.ENUM,l],changeNumberV2:[5,h.TYPES.ENUM,l],queryStatusV3Thumbnail:[6,h.TYPES.ENUM,l],liveLocations:[7,h.TYPES.ENUM,l],queryVname:[8,h.TYPES.ENUM,l],voipIndividualIncoming:[9,h.TYPES.ENUM,l],quickRepliesQuery:[10,h.TYPES.ENUM,l],payments:[11,h.TYPES.ENUM,l],stickerPackQuery:[12,h.TYPES.ENUM,l],liveLocationsFinal:[13,h.TYPES.ENUM,l],labelsEdit:[14,h.TYPES.ENUM,l],mediaUpload:[15,h.TYPES.ENUM,l],mediaUploadRichQuickReplies:[18,h.TYPES.ENUM,l],vnameV2:[19,h.TYPES.ENUM,l],videoPlaybackUrl:[20,h.TYPES.ENUM,l],statusRanking:[21,h.TYPES.ENUM,l],voipIndividualVideo:[22,h.TYPES.ENUM,l],thirdPartyStickers:[23,h.TYPES.ENUM,l],frequentlyForwardedSetting:[24,h.TYPES.ENUM,l],groupsV4JoinPermission:[25,h.TYPES.ENUM,l],recentStickers:[26,h.TYPES.ENUM,l],catalog:[27,h.TYPES.ENUM,l],starredStickers:[28,h.TYPES.ENUM,l],voipGroupCall:[29,h.TYPES.ENUM,l],templateMessage:[30,h.TYPES.ENUM,l],templateMessageInteractivity:[31,h.TYPES.ENUM,l],ephemeralMessages:[32,h.TYPES.ENUM,l],e2ENotificationSync:[33,h.TYPES.ENUM,l],recentStickersV2:[34,h.TYPES.ENUM,l],recentStickersV3:[36,h.TYPES.ENUM,l],userNotice:[37,h.TYPES.ENUM,l],support:[39,h.TYPES.ENUM,l],groupUiiCleanup:[40,h.TYPES.ENUM,l],groupDogfoodingInternalOnly:[41,h.TYPES.ENUM,l],settingsSync:[42,h.TYPES.ENUM,l],archiveV2:[43,h.TYPES.ENUM,l],ephemeralAllowGroupMembers:[44,h.TYPES.ENUM,l],ephemeral24HDuration:[45,h.TYPES.ENUM,l],mdForceUpgrade:[46,h.TYPES.ENUM,l],disappearingMode:[47,h.TYPES.ENUM,l],externalMdOptInAvailable:[48,h.TYPES.ENUM,l],noDeleteMessageTimeLimit:[49,h.TYPES.ENUM,l]};t.internalSpec={reportingTag:[1,h.TYPES.BYTES]};u.internalSpec={localPath:[1,h.TYPES.STRING]};v.internalSpec={oldPhoto:[1,h.TYPES.BYTES],newPhoto:[2,h.TYPES.BYTES],newPhotoId:[3,h.TYPES.UINT32]};w.internalSpec={campaignId:[44,h.FLAGS.REQUIRED|h.TYPES.UINT64],campaignExpirationTimestamp:[45,h.TYPES.UINT64]};x.internalSpec={userJid:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],receiptTimestamp:[2,h.TYPES.INT64],readTimestamp:[3,h.TYPES.INT64],playedTimestamp:[4,h.TYPES.INT64],pendingDeviceJid:[5,h.FLAGS.REPEATED|h.TYPES.STRING],deliveredDeviceJid:[6,h.FLAGS.REPEATED|h.TYPES.STRING]};y.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],unread:[5,h.TYPES.BOOL]};z.internalSpec={pollUpdateMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,d.Message$PollVoteMessageSpec],senderTimestampMs:[3,h.TYPES.INT64],serverTimestampMs:[4,h.TYPES.INT64],unread:[5,h.TYPES.BOOL]};A.internalSpec={pollInvalidated:[1,h.TYPES.BOOL]};B.internalSpec={isStale:[1,h.TYPES.BOOL]};C.internalSpec={keepType:[1,h.TYPES.ENUM,d.KeepType],serverTimestamp:[2,h.TYPES.INT64],key:[3,h.TYPES.MESSAGE,i.MessageKeySpec],deviceJid:[4,h.TYPES.STRING],clientTimestampMs:[5,h.TYPES.INT64],serverTimestampMs:[6,h.TYPES.INT64]};D.internalSpec={type:[1,h.TYPES.ENUM,m],key:[2,h.TYPES.MESSAGE,i.MessageKeySpec],senderTimestampMs:[3,h.TYPES.INT64],serverTimestampMs:[4,h.TYPES.INT64],messageAddOnContextInfo:[5,h.TYPES.MESSAGE,E]};E.internalSpec={messageAddOnDurationInSecs:[1,h.TYPES.UINT32],messageAddOnExpiryType:[2,h.TYPES.ENUM,d.MessageContextInfo$MessageAddonExpiryType]};F.internalSpec={serverCampaignId:[1,h.TYPES.STRING]};G.internalSpec={eventResponseMessageKey:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestampMs:[2,h.TYPES.INT64],eventResponseMessage:[3,h.TYPES.MESSAGE,d.Message$EventResponseMessageSpec],unread:[4,h.TYPES.BOOL]};H.internalSpec={eventResponseMessage:[1,h.TYPES.MESSAGE,d.Message$EventResponseMessageSpec],pollVote:[2,h.TYPES.MESSAGE,d.Message$PollVoteMessageSpec]};I.internalDefaults={status:f.PENDING};I.internalSpec={messageAddOnType:[1,h.TYPES.ENUM,a],messageAddOn:[2,h.TYPES.MESSAGE,d.MessageSpec],senderTimestampMs:[3,h.TYPES.INT64],serverTimestampMs:[4,h.TYPES.INT64],status:[5,h.TYPES.ENUM,f],addOnContextInfo:[6,h.TYPES.MESSAGE,E],messageAddOnKey:[7,h.TYPES.MESSAGE,i.MessageKeySpec],legacyMessage:[8,h.TYPES.MESSAGE,H]};J.internalSpec={quotedStatus:[1,h.TYPES.MESSAGE,d.MessageSpec]};g.WebMessageInfo$BizPrivacyStatus=c;g.WebMessageInfo$StubType=e;g.WebMessageInfo$Status=f;g.PaymentInfo$TxnStatus=b;g.PaymentInfo$Status=j;g.PaymentInfo$Currency=k;g.WebFeatures$Flag=l;g.PinInChat$Type=m;g.MessageAddOn$MessageAddOnType=a;g.WebMessageInfoSpec=n;g.CommentMetadataSpec=o;g.PaymentInfoSpec=p;g.WebNotificationsInfoSpec=q;g.NotificationMessageInfoSpec=r;g.WebFeaturesSpec=s;g.ReportingTokenInfoSpec=t;g.MediaDataSpec=u;g.PhotoChangeSpec=v;g.StatusPSASpec=w;g.UserReceiptSpec=x;g.ReactionSpec=y;g.PollUpdateSpec=z;g.PollAdditionalMetadataSpec=A;g.EventAdditionalMetadataSpec=B;g.KeepInChatSpec=C;g.PinInChatSpec=D;g.MessageAddOnContextInfoSpec=E;g.PremiumMessageInfoSpec=F;g.EventResponseSpec=G;g.LegacyMessageSpec=H;g.MessageAddOnSpec=I;g.StatusMentionMessageSpec=J}),98);
__d("WAWebProtobufsHistorySync.pb",["$InternalEnum","WAProtoConst","WAWebProtobufSyncAction.pb","WAWebProtobufsChatLockSettings.pb","WAWebProtobufsE2E.pb","WAWebProtobufsWeb.pb"],(function(a,b,c,d,e,f,g){var h;c=(a=b("$InternalEnum"))({IN_WAITLIST:0,AI_AVAILABLE:1});e=a({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4,NON_BLOCKING_DATA:5,ON_DEMAND:6});f=a({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:2});b=a({REGULAR:0,ADMIN:1,SUPERADMIN:2});var i=a({DEFAULT:0,OFF:1,ON:2}),j=a({LEFT:0,REMOVED:1});a=a({E2EE_MSG:1,NE2EE_SELF:2,NE2EE_OTHER:3});var k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={};k.internalSpec={syncType:[1,(h=d("WAProtoConst")).FLAGS.REQUIRED|h.TYPES.ENUM,e],conversations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,l],statusV3Messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d("WAWebProtobufsWeb.pb").WebMessageInfoSpec],chunkOrder:[5,h.TYPES.UINT32],progress:[6,h.TYPES.UINT32],pushnames:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,o],globalSettings:[8,h.TYPES.MESSAGE,r],threadIdUserSecret:[9,h.TYPES.BYTES],threadDsTimeframeOffset:[10,h.TYPES.UINT32],recentStickers:[11,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],pastParticipants:[12,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u],callLogRecords:[13,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d("WAWebProtobufSyncAction.pb").CallLogRecordSpec],aiWaitListState:[14,h.TYPES.ENUM,c],phoneNumberToLidMappings:[15,h.FLAGS.REPEATED|h.TYPES.MESSAGE,m],companionMetaNonce:[16,h.TYPES.STRING],shareableChatIdentifierEncryptionKey:[17,h.TYPES.BYTES]};l.internalSpec={id:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],messages:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,n],newJid:[3,h.TYPES.STRING],oldJid:[4,h.TYPES.STRING],lastMsgTimestamp:[5,h.TYPES.UINT64],unreadCount:[6,h.TYPES.UINT32],readOnly:[7,h.TYPES.BOOL],endOfHistoryTransfer:[8,h.TYPES.BOOL],ephemeralExpiration:[9,h.TYPES.UINT32],ephemeralSettingTimestamp:[10,h.TYPES.INT64],endOfHistoryTransferType:[11,h.TYPES.ENUM,f],conversationTimestamp:[12,h.TYPES.UINT64],name:[13,h.TYPES.STRING],pHash:[14,h.TYPES.STRING],notSpam:[15,h.TYPES.BOOL],archived:[16,h.TYPES.BOOL],disappearingMode:[17,h.TYPES.MESSAGE,d("WAWebProtobufsE2E.pb").DisappearingModeSpec],unreadMentionCount:[18,h.TYPES.UINT32],markedAsUnread:[19,h.TYPES.BOOL],participant:[20,h.FLAGS.REPEATED|h.TYPES.MESSAGE,p],tcToken:[21,h.TYPES.BYTES],tcTokenTimestamp:[22,h.TYPES.UINT64],contactPrimaryIdentityKey:[23,h.TYPES.BYTES],pinned:[24,h.TYPES.UINT32],muteEndTime:[25,h.TYPES.UINT64],wallpaper:[26,h.TYPES.MESSAGE,q],mediaVisibility:[27,h.TYPES.ENUM,i],tcTokenSenderTimestamp:[28,h.TYPES.UINT64],suspended:[29,h.TYPES.BOOL],terminated:[30,h.TYPES.BOOL],createdAt:[31,h.TYPES.UINT64],createdBy:[32,h.TYPES.STRING],description:[33,h.TYPES.STRING],support:[34,h.TYPES.BOOL],isParentGroup:[35,h.TYPES.BOOL],parentGroupId:[37,h.TYPES.STRING],isDefaultSubgroup:[36,h.TYPES.BOOL],displayName:[38,h.TYPES.STRING],pnJid:[39,h.TYPES.STRING],shareOwnPn:[40,h.TYPES.BOOL],pnhDuplicateLidThread:[41,h.TYPES.BOOL],lidJid:[42,h.TYPES.STRING],username:[43,h.TYPES.STRING],lidOriginType:[44,h.TYPES.STRING],commentsCount:[45,h.TYPES.UINT32],locked:[46,h.TYPES.BOOL],systemMessageToInsert:[47,h.TYPES.ENUM,a],capiCreatedGroup:[48,h.TYPES.BOOL]};m.internalSpec={pnJid:[1,h.TYPES.STRING],lidJid:[2,h.TYPES.STRING]};n.internalSpec={message:[1,h.TYPES.MESSAGE,d("WAWebProtobufsWeb.pb").WebMessageInfoSpec],msgOrderId:[2,h.TYPES.UINT64]};o.internalSpec={id:[1,h.TYPES.STRING],pushname:[2,h.TYPES.STRING]};p.internalSpec={userJid:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],rank:[2,h.TYPES.ENUM,b]};q.internalSpec={filename:[1,h.TYPES.STRING],opacity:[2,h.TYPES.UINT32]};r.internalSpec={lightThemeWallpaper:[1,h.TYPES.MESSAGE,q],mediaVisibility:[2,h.TYPES.ENUM,i],darkThemeWallpaper:[3,h.TYPES.MESSAGE,q],autoDownloadWiFi:[4,h.TYPES.MESSAGE,s],autoDownloadCellular:[5,h.TYPES.MESSAGE,s],autoDownloadRoaming:[6,h.TYPES.MESSAGE,s],showIndividualNotificationsPreview:[7,h.TYPES.BOOL],showGroupNotificationsPreview:[8,h.TYPES.BOOL],disappearingModeDuration:[9,h.TYPES.INT32],disappearingModeTimestamp:[10,h.TYPES.INT64],avatarUserSettings:[11,h.TYPES.MESSAGE,w],fontSize:[12,h.TYPES.INT32],securityNotifications:[13,h.TYPES.BOOL],autoUnarchiveChats:[14,h.TYPES.BOOL],videoQualityMode:[15,h.TYPES.INT32],photoQualityMode:[16,h.TYPES.INT32],individualNotificationSettings:[17,h.TYPES.MESSAGE,x],groupNotificationSettings:[18,h.TYPES.MESSAGE,x],chatLockSettings:[19,h.TYPES.MESSAGE,d("WAWebProtobufsChatLockSettings.pb").ChatLockSettingsSpec]};s.internalSpec={downloadImages:[1,h.TYPES.BOOL],downloadAudio:[2,h.TYPES.BOOL],downloadVideo:[3,h.TYPES.BOOL],downloadDocuments:[4,h.TYPES.BOOL]};t.internalSpec={url:[1,h.TYPES.STRING],fileSha256:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],mediaKey:[4,h.TYPES.BYTES],mimetype:[5,h.TYPES.STRING],height:[6,h.TYPES.UINT32],width:[7,h.TYPES.UINT32],directPath:[8,h.TYPES.STRING],fileLength:[9,h.TYPES.UINT64],weight:[10,h.TYPES.FLOAT],lastStickerSentTs:[11,h.TYPES.INT64],isLottie:[12,h.TYPES.BOOL]};u.internalSpec={groupJid:[1,h.TYPES.STRING],pastParticipants:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.internalSpec={userJid:[1,h.TYPES.STRING],leaveReason:[2,h.TYPES.ENUM,j],leaveTs:[3,h.TYPES.UINT64]};w.internalSpec={fbid:[1,h.TYPES.STRING],password:[2,h.TYPES.STRING]};x.internalSpec={messageVibrate:[1,h.TYPES.STRING],messagePopup:[2,h.TYPES.STRING],messageLight:[3,h.TYPES.STRING],lowPriorityNotifications:[4,h.TYPES.BOOL],reactionsMuted:[5,h.TYPES.BOOL],callVibrate:[6,h.TYPES.STRING]};g.HistorySync$BotAIWaitListState=c;g.HistorySync$HistorySyncType=e;g.Conversation$EndOfHistoryTransferType=f;g.GroupParticipant$Rank=b;g.MediaVisibility=i;g.PastParticipant$LeaveReason=j;g.PrivacySystemMessage=a;g.HistorySyncSpec=k;g.ConversationSpec=l;g.PhoneNumberToLIDMappingSpec=m;g.HistorySyncMsgSpec=n;g.PushnameSpec=o;g.GroupParticipantSpec=p;g.WallpaperSettingsSpec=q;g.GlobalSettingsSpec=r;g.AutoDownloadSettingsSpec=s;g.StickerMetadataSpec=t;g.PastParticipantsSpec=u;g.PastParticipantSpec=v;g.AvatarUserSettingsSpec=w;g.NotificationSettingsSpec=x}),98);
__d("WAWebUserPrefsHistorySync",["WALogger","WATimeUtils","WAWebPermanentStorage","WAWebProtobufsHistorySync.pb","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMultiDevice","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] set recent sync single chunk "," status to ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] set last history sync chunk with chunk order ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(a==null||b==null)return;a===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&(d("WALogger").LOG(i(),b),yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED,{chunkOrder:b,progress:e}));yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED,a+"_"+b);c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED,a+"_"+b,{shouldWriteToIdb:!1})});return j.apply(this,arguments)}function e(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED);return a}function f(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED);return a}function k(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.INITIAL_HISTORY_SYNCED,!0);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.INITIAL_HISTORY_SYNCED,"true",{shouldWriteToIdb:!1})});return l.apply(this,arguments)}function m(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.INITIAL_HISTORY_SYNCED);return a===!0}function n(){return!!c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.INITIAL_HISTORY_SYNCED,{storage:c("WAWebPermanentStorage")})}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=(yield q()))!=null?b:{};yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS,babelHelpers["extends"]({},b,a));c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.HISTORY_SYNC_STATUS,babelHelpers["extends"]({},b,a),{shouldWriteToIdb:!1})});return p.apply(this,arguments)}function q(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS);return a}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC,a)});return s.apply(this,arguments)}function t(){var a;return(a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC))!=null?a:0}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC,a)});return v.apply(this,arguments)}function w(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC);return(a=a)!=null?a:0}function x(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.HISTORY_SYNC_REMAINING_PAUSED_SECONDS);if(typeof a==="number")return a}function y(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.HISTORY_SYNC_REMAINING_PAUSED_SECONDS,a)}function z(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.HISTORY_SYNC_EARLIEST_DATE);if(typeof a!=="number"||a===0){var b;b=(b=d("WAWebUserPrefsMultiDevice").getPairingTimestamp())!=null?b:d("WATimeUtils").unixTime();var e=90*d("WATimeUtils").DAY_SECONDS;return b-e}return a}function A(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.HISTORY_SYNC_EARLIEST_DATE,a)}function B(a,b,c){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(c==null||a!==d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT)return;d("WALogger").LOG(h(),c,b);c=(a={},a[c]=b,a);a=(b=(yield D()))!=null?b:{};yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_SINGLE_CHUNK_STATUS,babelHelpers["extends"]({},a,c))});return C.apply(this,arguments)}function D(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_SINGLE_CHUNK_STATUS);return a}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").HASHED_KEYS.INITIAL_HIST_BOUNDARY,a)});return F.apply(this,arguments)}function G(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").HASHED_KEYS.INITIAL_HIST_BOUNDARY)}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT,a)});return I.apply(this,arguments)}function J(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT);return a}function K(a){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=M())!=null?b:0;yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT,b+a)});return L.apply(this,arguments)}function M(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT);return a}g.setLastHistorySyncedChunk=a;g.getLastHistorySyncedChunk=e;g.getLastHistoryRecentSyncedChunk=f;g.setInitialHistorySyncComplete=k;g.getInitialHistorySyncComplete=m;g.getInitialHistorySyncCompleteLocalStorage=n;g.setHistorySyncStatus=o;g.getHistorySyncStatus=q;g.setChunkCountForEndOfRecentHistorySync=r;g.getChunkCountForEndOfRecentHistorySync=t;g.setEstimatedChunkCountForEndOfRecentHistorySync=u;g.getEstimatedChunkCountForEndOfRecentHistorySync=w;g.getHistorySyncRemainingPausedSeconds=x;g.setHistorySyncRemainingPausedSeconds=y;g.getHistorySyncEarliestDate=z;g.setHistorySyncEarliestDate=A;g.setRecentSyncSingleChunkStatus=B;g.getRecentSyncSingleChunkStatus=D;g.setHistoryInitialSyncBoundary=E;g.getHistoryInitialSyncBoundary=G;g.setHistorySyncStatusAfterPairingLoggingCount=H;g.getHistorySyncStatusAfterPairingLoggingCount=J;g.setHistorySyncTotalProcessedMessageCount=K;g.getHistorySyncTotalProcessedMessageCount=M}),98);
__d("WAWebAddonHydrationUtils",["WALogger","WAWebABProps","WAWebAddonConstants","WAWebAddonCrossWindowUtils","WAWebAddonDBTable","WAWebAddonPerfUtils","WAWebAddonPluginProcessor","WAWebAddonProcessMsgsUtils","WAWebAddonSelectUtils","WAWebMsgKey","WAWebMsgType","WAWebReactionGatingUtils","WAWebUserPrefsHistorySync","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Addon][Hydration] Failed to hydrate "," for "," with error, ",""]);h=function(){return a};return a}var i={};function a(a){var b,c=a;b=c.length&&((b=d("WAWebUserPrefsHistorySync").getHistorySyncStatus())==null?void 0:b.recentCompleted)===!0&&!(c[0].type===d("WAWebMsgType").MSG_TYPE.REACTION&&!d("WAWebReactionGatingUtils").isFlattenedReactionsEnabled())&&d("WAWebABProps").getABPropConfigValue("enable_collection_update_for_hydrated_addons_only");b&&(c=a.filter(function(a){var b;a.type===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE?b=a.id.remote:b=d("WAWebAddonProcessMsgsUtils").getParentMsgKey(a);return k(b,d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a))}));return c}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ids,e=a.hydrationType;a=function(a){i[e]||(i[e]=new Set());if(k(a,e))return;i[e].add(a.toString())};b=b.filter(function(a){return!k(a,e)});if(b.length===0)return;var f;try{var g=d("WAWebAddonSelectUtils").getTableModeByMsgType(e);if(e===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE){f=(yield d("WAWebAddonPerfUtils").createAddonQplMarker(d("WAWebAddonPerfUtils").AddonQplMarkerType.UI,{mode:g,type:d("WAWebAddonPerfUtils").AnnotationRequestType.BulkGetByChatWid,size:1}));var j=b.map(function(a){return a instanceof c("WAWebWid")?a:null}).filter(Boolean);j=(yield d("WAWebAddonDBTable").addonInternalDBTable.bulkGetByChatWid(g,j))}else{f=(yield d("WAWebAddonPerfUtils").createAddonQplMarker(d("WAWebAddonPerfUtils").AddonQplMarkerType.UI,{mode:g,type:d("WAWebAddonPerfUtils").AnnotationRequestType.BulkGetByParentMsgKeys,size:1}));var l=b.map(function(a){return a instanceof c("WAWebMsgKey")?a:null}).filter(Boolean);j=(yield d("WAWebAddonDBTable").addonInternalDBTable.bulkGetByParentMsgKey(g,l))}(g=f)==null?void 0:g.success();j.length&&(yield d("WAWebAddonPluginProcessor").getAddonProcessor(e).updateCollection({add:j,remove:[]},d("WAWebAddonConstants").AddonProcessMode.Hydration));l=d("WAWebUserPrefsHistorySync").getHistorySyncStatus();(l==null?void 0:l.recentCompleted)===!0&&b.forEach(a)}catch(a){(g=f)==null?void 0:g.fail();d("WALogger").ERROR(h(),e,b.map(function(a){return a.toString()}),a).sendLogs("hydratingAddonMsgs",{sampling:.01})}});return j.apply(this,arguments)}function k(a,b){return(b=i[b])==null?void 0:b.has(a.toString())}function f(){for(var a of Object.keys(i))delete i[a]}g.filterAddonsByHydratedStatus=a;g.hydrateAddons=e;g.clearHydrationCache=f}),98);
__d("WAQplTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({SUCCESS:2,FAIL:3,CANCEL:4,ABORTED:105,DROPPED:216});d=a({REGULAR:1,USER_FLOW:2});e=a.Mirrored(["AUTO_INCREMENT","MANUAL_INCREMENT","REUSE_INSTANCE"]);b=a({FATAL:1,ERROR:3,CRITICAL:4,WARN:5,INFO:7,DEBUG:9});a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.name="QplServerStatusCodeError";c.name="QplServerStatusCodeError";c.status=b;c.statusCode=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.QuickLogActionType=c;f.QuickLogMarkerType=d;f.QplInstanceKeyOptions=e;f.QPLDataEventLevel=b;f.QplServerStatusCodeError=a}),66);
__d("WAWebQplQuickPerformanceLoggerMarkerIds",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({WHATSAPP_ASSIGN_CHAT:701185297,WHATSAPP_FETCH_ASSIGN_CHAT_AGENT_LIST:701183376,WHATSAPP_MESSAGE_INFO_VIEW:701177629,WHATSAPP_CART_ADD:774774794,WHATSAPP_CART_VIEW:774774619,WHATSAPP_CATALOG_COLLECTIONS_VIEW:774781666,WHATSAPP_CATALOG_CREATE:774769395,WHATSAPP_CATALOG_LOAD_MORE:774769641,WHATSAPP_CATALOG_VIEW:774771408,WHATSAPP_COLLECTION_APPEAL:774776895,WHATSAPP_COLLECTION_EDIT:774777483,WHATSAPP_COLLECTION_RENAME:774782934,WHATSAPP_COLLECTION_VIEW_ALL:774780089,WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:774768970,WHATSAPP_ORDER_CREATE:774777518,WHATSAPP_ORDER_VIEW:774769843,WHATSAPP_PLM_DETAILS_VIEW:774777097,WHATSAPP_PRODUCT_APPEAL:774769273,WHATSAPP_PRODUCT_DELETE:774774122,WHATSAPP_PRODUCT_IMAGES_LOAD:774778674,WHATSAPP_PRODUCT_MESSAGE_SEND:774779800,WHATSAPP_PRODUCT_REPORT:774782053,WHATSAPP_PRODUCT_SAVE:774779113,WHATSAPP_PRODUCT_SET_VISIBLE:774778628,WHATSAPP_PRODUCT_VIEW:774775607,WHATSAPP_PROFILE_CATS_VIEW:774777556,WHATSAPP_PROFILE_SAVE:774775117,WHATSAPP_PROFILE_VIEW:774770248,ADDON_CHAT_REQUEST:891434079,ADDON_PROCESS_INCOMING:891434096,ADDON_PROCESS_OUTGOING:891428956,ALTERNATIVE_DEVICE_LINKING:891429758,CHAT_OPEN:891425633,DESKTOP_UPSELL_LINK_DEVICE_METRICS:891423256,ELECTRON_MACOS_CATALYST_MIGRATION:891427179,MESSAGE_RENDER:891426174,NEWSLETTER_BOOSTRAP:891434294,OFFLINE_RESUME:891431279,PAGE_LOAD:891431414,SYNCD:891431212,WHATSAPP_WEB_TEST_EVENT:891422769,CHANNEL_FOLLOW:1026960759,CHANNEL_OPEN:1026963966,CHANNEL_UNFOLLOW:1026957851,AD_ACCOUNT_RECOVERY_REQUEST_CODE:1029380470,AD_ACCOUNT_RECOVERY_UI_FLOW:1029378759,FETCH_QUICK_PROMOTIONS:1029379849,LONG_TERM_HOLDOUT_CONFIG_FETCH:1029386599,MANAGE_ADS_FETCH_ADS:1029390253,MANAGE_ADS_FETCH_NONCE:1029383287,MANAGE_ADS_FETCH_TOKEN:1029388606});f.QuickLogMarkerId=a}),66);
__d("QPLEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.i}function b(a){return(a=a.r)!=null?a:0}function c(a){return(a=a.m)!=null?a:1}f.getMarkerId=a;f.getSampleRate=b;f.getSamplingMethod=c}),66);
__d("WAQplConfigTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({EVENT_BASED_SAMPLING:1,USER_BASED_SAMPLING:3});f.QplSampleMethod=a}),66);
__d("crc32",[],(function(a,b,c,d,e,f){function b(a){var b=-1;for(var c=0,d=a.length;c<d;c++)b=b>>>8^g[(b^a.charCodeAt(c))&255];return~b}var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];a.Int32Array!==void 0&&(g=new Int32Array(g));f["default"]=b}),66);
__d("WAQplCore",["Promise","crc32"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({TRUST_CLIENT_REPORTED_SAMPLE_RATE:1}),j=Object.freeze({API_CALL:27787270,CRASH_RESILIENCE:27787276,LOCKLESS_IS_MARKER_ON_ACCURACY:27787269,LOCKLESS_MARKER_START:27787266,LOCKLESS_QUEUE_SIZE:27787265,LOCKLESS_STARTED_MARKERS_MAP_COLLISIONS:27787273,LOSS_TRACKING_MARKER_RECEIVED:27787272,LOSS_TRACKING_MARKER_STARTED:27787271,QPL_CONFIG_LOAD:27799150,QPL_CONFIG_SAVE:27791744,QPL_HEARTBEAT_HARDCODED_CONFIG:27792138,QPL_HEARTBEAT_SEVER_CONFIG:27803336,USAGE:27791726,ZERO_SAMPLE_RATE_DUE_MISSING_CONFIG:27787268,ZERO_SAMPLE_RATE_DUE_MISSING_EVENT_IN_CONFIG:27787267}),k=Object.freeze({REGULAR:1,USER_FLOW:2});function l(a,b){b=b-a;if(b===0)return"0";a=b.toFixed(6).split(".",2);b=a[0];a=a[1];return b==="0"?a.replace(/^0+/,""):b+a}function m(a){return c("crc32")(a)>>>0}var n=1,o=3;function p(a,b,c,d){var e=b[a];if(!e||Object.entries(e).length===0)return null;var f={};Object.keys(e).forEach(function(a){var b=e[a];b===null||b===void 0||b.length===0?delete e[a]:d?f[a]=d(b):f[a]=b});return b={},b[a]=babelHelpers["extends"]({},c==null?void 0:c[a],f),b}function q(a,b){if(a==null)return b;var c=babelHelpers["extends"]({},b,p("string",a,b),p("int",a,b,Math.trunc),p("double",a,b),p("bool",a,b),p("string_array",a,b),p("int_array",a,b,function(a){return a.map(Math.trunc)}),p("double_array",a,b),p("bool_array",a,b));Object.keys(c).forEach(function(a){var b=c[a];(b===null||b===void 0||Object.entries(b).length===0)&&delete c[a]});return Object.entries(c).length!==0?c:null}function r(a){var b=Array.from(new Set(a.map(function(a){return a.name})));return b.map(function(b){return a.find(function(a){return a.name===b})}).filter(Boolean)}function s(a,b){return b===!0?babelHelpers["extends"]({},a,{tracked_for_loss:!0}):a}function t(a,b){if(!b)return a;var c={};b.string&&(c.annotations=b.string);b["int"]&&(c.annotations_int=b["int"]);b["double"]&&(c.annotations_double=b["double"]);b.bool&&(c.annotations_bool=b.bool);b.string_array&&(c.annotations_string_array=b.string_array);b.int_array&&(c.annotations_int_array=b.int_array);b.double_array&&(c.annotations_double_array=b.double_array);b.bool_array&&(c.annotations_bool_array=b.bool_array);return babelHelpers["extends"]({},a,c)}var u=new Map([[n,"random_sampling"],[o,"per_user"]]);function v(a,b){if(a===0)return!1;if(a<=1)return!0;return typeof b==="string"?m(b)%a===0:Math.random()*a<=1}a=function(){function a(a){this.$1=1;this.$2=100;this.$3=new Map();this.$4=new Map();this.$5=null;this.$6={};this.activeMarkers=new Map();this.$7=a;this.$8=a.logger;this.$4=(a=a.listenersWithMarker)!==null&&a!==void 0?a:new Map()}var c=a.prototype;c.getMarker=function(a,b){a=this.$9(a);if(!a)return null;a=a.get(b);return!a?null:a};c.getMarkerInstances=function(a){return this.$9(a)};c.$9=function(a){var b;return((b=this.$7.quickLogConfigHelper)===null||b===void 0?void 0:b.isKillswitchOn())?null:this.activeMarkers.get(a)};c.addMarker=function(a,b,c){var d=this.activeMarkers.get(a);d||(d=new Map(),this.activeMarkers.set(a,d));d.set(b,c)};c.deleteMarker=function(a,b){(a=this.activeMarkers.get(a))===null||a===void 0?void 0:a["delete"](b)};c.markerStart=function(a,b,c,d){b===void 0&&(b=0);c===void 0&&(c=this.currentTimestamp());d=d===void 0?{}:d;var e=d.cancelOnUnload;e=e===void 0?!1:e;var f=d.trackedForLoss;f=f===void 0?!1:f;var g=d.type;g=g===void 0?k.REGULAR:g;d=d.samplingBasis;d=d===void 0?null:d;var h;if((h=this.$7.quickLogConfigHelper)===null||h===void 0?void 0:h.isKillswitchOn())return;this.getMarker(a,b)&&this.$8.warn("Duplicate QPL markerId: "+a+" & instanceKey: "+b);h=this.$10(a,d);d=h[0];var i=h[1];h=h[2];var l={passesSampling:d,timestamp:c,sampleRate:i,samplingMethod:h,points:[],cancelOnUnload:e,trackedForLoss:f,type:g};this.$3.forEach(function(d){d.onMarkerStart(a,b,c)});this.$4.forEach(function(d){d.onMarkerStartWithMarker(a,b,c,l)});d&&this.addMarker(a,b,l);d&&f===!0&&this.$11({marker_id:j.LOSS_TRACKING_MARKER_STARTED,action_id:0,sample_rate:1,annotations_int:{tracked_marker_id:a},marker_type:k.REGULAR})};c.markerAnnotate=function(a,b,c){c=c===void 0?{}:c;c=c.instanceKey;var d=c===void 0?0:c;this.$3.forEach(function(c){Object.keys(b).forEach(function(e){var f=b[e];if(!f)return;Object.keys(f).forEach(function(b){c.onAnnotation(a,d,b,f[b])})})});c=this.getMarker(a,d);if(!c)return;c.annotations=q(b,c.annotations)};c.markerPoint=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey,e=d===void 0?0:d;d=c.data;var f=d===void 0?void 0:d;d=c.timestamp;var g=d===void 0?this.currentTimestamp():d;this.$3.forEach(function(c){return c.onMarkerPoint(a,e,b,f===null||f===void 0?void 0:(c=f.string)===null||c===void 0?void 0:c.__key,g)});c=this.getMarker(a,e);if(!c)return;d={name:b,timeSinceStart:Math.trunc(g-c.timestamp)};var h=q(f);h&&(d.data=h);c.points.push(d)};c.markerEnd=function(a,b,c,d){c===void 0&&(c=0),d===void 0&&(d=this.currentTimestamp()),void this.genMarkerEnd(a,b,c,d)};c.genMarkerEnd=function(a,c,d,e){d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());this.$3.forEach(function(b){return b.onMarkerEnd(c,a,d,e)});var f=this.getMarker(a,d);if(!f)return(h||(h=b("Promise"))).resolve();var g=(h||(h=b("Promise"))).resolve();if(f.passesSampling){if(f.timestampIsApproximate!==!0){var j=f.type===k.USER_FLOW?f.points:r(f.points);j={marker_id:a,action_id:c,instance_id:d,sample_rate:f.sampleRate,method:u.get(f.samplingMethod),duration_ns:l(f.timestamp,e),points:j,metadata:{application_analytics:{time_since_qpl_module_init:e-this.$7.moduleLoadTimestamp}},marker_type:f.type,flags:i.TRUST_CLIENT_REPORTED_SAMPLE_RATE};j=t(j,f.annotations);j=s(j,f.trackedForLoss);g=this.$11(j)}this.$5===a&&this.$7.onDebuggingIdEnded&&this.$7.onDebuggingIdEnded()}this.deleteMarker(a,d);return g};c.markerDrop=function(a,b){b===void 0&&(b=0);this.deleteMarker(a,b);var c=this.currentTimestamp();this.$3.forEach(function(d){d.onMarkerDrop&&d.onMarkerDrop(a,b,c)})};c.markEvent=function(a,b,c,d){d=d===void 0?{}:d;var e=d.timestamp;e=e===void 0?this.currentTimestamp():e;d=d.annotations;var f;if((f=this.$7.quickLogConfigHelper)===null||f===void 0?void 0:f.isKillswitchOn())return;f=this.$10(a);var g=f[0],h=f[1];f=f[2];if(!g)return;g=q(typeof d==="function"?d():d);d={marker_id:a,action_id:0,instance_id:0,sample_rate:h,method:u.get(f),da_type:b,da_level:c,metadata:{application_analytics:{time_since_qpl_module_init:e-this.$7.moduleLoadTimestamp}},marker_type:k.REGULAR,flags:i.TRUST_CLIENT_REPORTED_SAMPLE_RATE};this.$11(t(d,g))};c.dropAllMarkers=function(){this.activeMarkers.clear()};c.setAlwaysOnSampleRate=function(a,b){this.$6[a]=b};c.currentTimestamp=function(){return this.$7.performanceNow()};c.enableDebug=function(a){this.$5=parseInt(a,10)};c.disableDebug=function(){this.$5=null};c.addListener=function(a){var b=this,c=this.$1++;this.$3.set(c,a);return{dispose:function(){b.$3["delete"](c)}}};c.$10=function(a,b){var c;if(this.$7.unsampleAllEvents&&this.$7.unsampleAllEvents()||this.$5===a)return[!0,1,n];c=(c=(c=this.$7.quickLogConfigHelper)===null||c===void 0?void 0:c.getEventDetails(a))!==null&&c!==void 0?c:{sampleRate:0,samplingMethod:n};if(this.$6[a]==null&&c.sampleRate!==0&&c.samplingMethod===o){var d;return[!0,(d=c.sampleRate)!==null&&d!==void 0?d:1,o]}d=(a=(d=this.$6[a])!==null&&d!==void 0?d:c.sampleRate)!==null&&a!==void 0?a:this.$2;c=(a=c.samplingMethod)!==null&&a!==void 0?a:n;a=v(d,b);return[a,d,c]};c.$11=function(a){var b=this.$7.decorateEventBeforeUpload?this.$7.decorateEventBeforeUpload(a):a;return this.$7.sendEvent(a,b)};c.getActiveMarkerIDs=function(a){var b=a.type,c=new Set();this.activeMarkers.forEach(function(a,d){a.forEach(function(a){if(a.type===b){c.add(d);return}})});return Array.from(c)};c.forEachMarkerInstance=function(a,b){a=this.$9(a);if(!a)return;for(var a=a.keys(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b(e)}};return a}();g["default"]=a}),98);
__d("WAQplLimitsChecker",[],(function(a,b,c,d,e,f){var g=new Map(),h=new Map(),i=1e3,j=1e3,k=50,l=50;function a(a,b,c,d){b===void 0&&(b=0);var e=a+"|"+b,f=g.get(e)||0,h=0;function i(c,e){h+=e;if(h+f>j){d==null?void 0:d.annotationSizeLimitExceeded(a,b,c);return!1}return!0}function l(e){for(var c=0;c<e.length;c++){if(e[c].length>k){d==null?void 0:d.annotationKeyTooLong(a,b,e[c]);return!1}return!0}}if(c==null?void 0:c.bool){var m=Object.keys(c.bool);if(!i("bool",m.length)||!l(m))return!1}if(c==null?void 0:c["int"]){m=Object.keys(c["int"]);if(!i("int",m.length)||!l(m))return!1}if(c==null?void 0:c["double"]){m=Object.keys(c["double"]);if(!i("double",m.length)||!l(m))return!1}if(c==null?void 0:c.bool_array){m=c.bool_array;var n=Object.keys(m);for(var o=0;o<n.length;o++){var p=m[n[o]];if(p&&!i(n[o],p.length))return!1}if(!l(n))return!1}if(c==null?void 0:c.int_array){p=c.int_array;m=Object.keys(p);for(o=0;o<m.length;o++){n=p[m[o]];if(n&&!i(m[o],n.length))return!1}if(!l(m))return!1}if(c==null?void 0:c.double_array){n=c.double_array;o=Object.keys(n);for(p=0;p<o.length&&c.double_array;p++){m=n[o[p]];if(m&&!i(o[p],m.length))return!1}if(!l(o))return!1}if(c==null?void 0:c.string){m=c.string;p=Object.keys(m);for(n=0;n<p.length&&c.string;n++){o=m[p[n]];if(o!=null&&!i(p[n],o.length))return!1}if(!l(p))return!1}if(c==null?void 0:c.string_array){o=c.string_array;n=Object.keys(o);for(m=0;m<n.length&&c.string_array;m++){p=o[n[m]];if(p)for(var q=0;q<p.length;q++)if(!i(n[m],p[q].length))return!1}if(!l(n))return!1}g.set(e,f+h);return!0}function b(a,b){b===void 0&&(b=0);a=a+"|"+b;g["delete"](a);h["delete"](a)}function c(a,b,c,d){b===void 0&&(b=0);if(c.length>l){d==null?void 0:d.pointNameTooLong(a,b,c);return!1}c=a+"|"+b;var e=h.get(c)||0;if(e+1>i){d==null?void 0:d.maxPointCountExceeded(a,b);return!1}h.set(c,e+1);return!0}f.validateAnnotations=a;f.markerEnded=b;f.validatePoints=c}),66);
__d("WAQplPrecisionMutation",[],(function(a,b,c,d,e,f){function a(a,b){var c=b*1e6;a.duration_ns=Math.round(a.duration_ns/c)*c;a.points&&a.points.map(function(a){a.timeSinceStart=Math.round(a.timeSinceStart/b)*b})}f.inplaceTruncateEventPrecision=a}),66);
__d("WAQuickPerformanceLogger",["Promise","WALogger","WAQplConfigTypes","WAQplCore","WAQplLimitsChecker","WAQplPrecisionMutation","WAQplTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL STARTUP got event ",", duration: ","ms, ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL [","] calling "," without a corresponding open marker for instance: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL markerDrop(",", options: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL markerEnd(",", ",", options: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL markerPoint(",", ",", ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL markerAnnotate(",", annotations: ",", options: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL [","] already has "," open markers"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL [","] is already opened "," time(s), attempting ",", not a problem if intended"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL closingPreviousMarker(",", actionId: ",", instanceKey: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL [","] markerStart called but killSwitch is ON, this call will be ignored, no marker will be instantiated"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL markerStart(",", options: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL [","] There are "," active markers remaining. You need to call markerEnd"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL There are no active markers remaining"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Killswitch thrown: ","; isQplEnabled: ",""]);v=function(){return a};return a}var w,x=function(){function a(){}a.setAllowListDevVerboseLogging=function(b){a.allowListDevVerboseLogging=b};a.setStartupAllowListEventFilter=function(b){a.$4=b};a.setQplReducePrecisionMapMs=function(b){a.$6=b};a.resetQplSettings=function(){a.$7=a.$1};a.setIsDev=function(b){a.isDev=b};a.setEnumConversion=function(b){a.$2=b};a.setStorageApi=function(b){a.$3=b};a.setHealthLogger=function(b){a.$8=b};a.init=function(b,c,d){a.$7={sendEvent:b,isQplEnabled:d,getEventDetails:c}};a.getInstance=function(){w||(w=new(c("WAQplCore"))(a.$5));return w};a.setInstance=function(a){w=a};a.clearInstance=function(){w=null,Object.assign(a.$7,a.$1),a.markerInstanceHelper.clear()};a.getNextMarkerInstanceValue=function(b){a.markerInstanceHelper.get(b)||a.markerInstanceHelper.set(b,a.$10());b=a.markerInstanceHelper.get(b);b=b!==void 0?b.next().value:0;return b!==void 0?b:0};a.$10=function*(){var a=0;while(!0)yield a++};a.throwKillswitch=function(b){a.$7.isQplEnabled=function(){return!b},a.isDev&&d("WALogger").DEV(v(),b,!b)};a.clearStorage=function(){a.$3.clear()};a.logActiveQplMarkers=function(){var b=a.getInstance().getActiveMarkerIDs({type:d("WAQplTypes").QuickLogMarkerType.REGULAR});!b.length?d("WALogger").DEV(u()):b.forEach(function(b){var c=a.$2.getName==null?void 0:a.$2.getName(b);d("WALogger").WARN(t(),c,a.$11(b))})};a.markerStart=function(b,c){if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var e="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown");d("WALogger").DEV(s(),e,JSON.stringify(c));a.$7.isQplEnabled()||d("WALogger").WARN(r(),a.$2.getName==null?void 0:a.$2.getName(b))}var f;(c==null?void 0:c.instanceKeyOption)===d("WAQplTypes").QplInstanceKeyOptions.AUTO_INCREMENT?f=a.getNextMarkerInstanceValue(b):f=(c==null?void 0:c.instanceKey)!==void 0?c.instanceKey:0;if(c==null?void 0:c.closePreviousInstanceWithAction){e=[d("WAQplTypes").QplInstanceKeyOptions.AUTO_INCREMENT,d("WAQplTypes").QplInstanceKeyOptions.MANUAL_INCREMENT].includes(c.instanceKeyOption)?f-1:f;if(a.$12(b,e)){var g=c.closePreviousInstanceWithAction||d("WAQplTypes").QuickLogActionType.ABORTED;if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var h="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown");d("WALogger").DEV(q(),h,g,e)}a.markerEnd(b,g,{instanceKey:e})}}if(a.$13(b)){h=a.$11(b);h<a.$9?a.isDev&&a.allowListDevVerboseLogging.includes(b)&&d("WALogger").WARN(p(),a.$2.getName==null?void 0:a.$2.getName(b),h,h+1).tags("qpl"):d("WALogger").WARN(o(),a.$2.getName==null?void 0:a.$2.getName(b),h).tags("qpl").sendLogs("QPL ["+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown")+"] has "+a.$9+" or more open markers")}a.getInstance().markerStart(b,f,c==null?void 0:c.timestamp);if((c==null?void 0:c.annotations)&&d("WAQplLimitsChecker").validateAnnotations(b,f,c.annotations,a.$8)){g=c.annotations;a.getInstance().markerAnnotate(b,g,{instanceKey:f})}return{instanceKey:f,annotate:function(c){a.markerAnnotate(b,c,{instanceKey:f})},addPoint:function(d,c){a.markerPoint(b,d,{data:c==null?void 0:c.data,timestamp:c==null?void 0:c.timestamp,instanceKey:f})},end:function(d,c){a.markerEnd(b,d,{instanceKey:f,timestamp:c==null?void 0:c.timestamp})},drop:function(){a.markerDrop(b,{instanceKey:f})}}};a.markerAnnotate=function(b,c,e){if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var f="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown");d("WALogger").DEV(n(),f,JSON.stringify(c),JSON.stringify(e));a.$14(b,e?e.instanceKey:0,"markerAnnotate")}d("WAQplLimitsChecker").validateAnnotations(b,e==null?void 0:e.instanceKey,c,a.$8)&&a.getInstance().markerAnnotate(b,c,{instanceKey:e==null?void 0:e.instanceKey})};a.markerPoint=function(b,c,e){if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var f="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown"),g="pointName: "+c,h="options: "+(e?JSON.stringify(e):"");d("WALogger").DEV(m(),f,g,h);a.$14(b,e?e.instanceKey:0,"markerPoint")}(e==null?void 0:e.data)&&d("WAQplLimitsChecker").validateAnnotations(b,e.instanceKey,e.data,a.$8);d("WAQplLimitsChecker").validatePoints(b,(e==null?void 0:e.instanceKey)||0,c,a.$8)&&a.getInstance().markerPoint(b,c,e)};a.markerEnd=function(a,b,c){void this.genMarkerEnd(a,b,c)};a.genMarkerEnd=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e){if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var f="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown"),g="actionId: "+d("WAQplTypes").QuickLogActionType.getName(c);d("WALogger").DEV(l(),f,g,JSON.stringify(e));a.$14(b,e==null?void 0:e.instanceKey,"markerEnd")}yield a.getInstance().genMarkerEnd(b,c,e==null?void 0:e.instanceKey,e==null?void 0:e.timestamp);d("WAQplLimitsChecker").markerEnded(b,e==null?void 0:e.instanceKey)});function e(a,b,d){return c.apply(this,arguments)}return e}();a.markerDrop=function(b,c){if(a.isDev&&a.allowListDevVerboseLogging.includes(b)){var e="markerId: "+((a.$2.getName==null?void 0:a.$2.getName(b))||"unknown");d("WALogger").DEV(k(),e,c);a.$14(b,c==null?void 0:c.instanceKey,"markerDrop")}a.getInstance().markerDrop(b,c==null?void 0:c.instanceKey);d("WAQplLimitsChecker").markerEnded(b,c==null?void 0:c.instanceKey)};a.getActiveMarkerIDs=function(b){return a.getInstance().getActiveMarkerIDs({type:b.type})};a.getMarker=function(b,c){c===void 0&&(c=0);return a.getInstance().getMarker(b,c)};a.getMarkerInstances=function(b){return a.getInstance().getMarkerInstances(b)};a.$13=function(b){b=a.getMarkerInstances(b);return b?b.size!==0:!1};a.$12=function(b,c){b=a.getMarkerInstances(b);return b?b.get(c)!==void 0:!1};a.$11=function(b){b=a.getMarkerInstances(b);return b?b.size:0};a.$14=function(b,c,e){c===void 0&&(c=0),a.$12(b,c)||d("WALogger").WARN(j(),a.$2.getName==null?void 0:a.$2.getName(b),e,c)};return a}();x.$1={sendEvent:function(a,c){if(x.isDev){c=x.$2.cast==null?void 0:x.$2.cast(a.marker_id);c!=null&&x.allowListDevVerboseLogging.includes(c)&&d("WALogger").DEV(i(),x.$2.getName==null?void 0:x.$2.getName(c),parseInt(a.duration_ns,10)/1e6,JSON.stringify(a))}x.$3.add([a]);return(h||(h=b("Promise"))).resolve()},getEventDetails:function(a){return{sampleRate:x.$4.includes(a)?1:0,samplingMethod:d("WAQplConfigTypes").QplSampleMethod.EVENT_BASED_SAMPLING}},isQplEnabled:function(){return!1}};x.$5={performanceNow:function(){return performance.now()},moduleLoadTimestamp:performance.now(),logger:{debug:function(){},warn:function(){}},sendEvent:function(a,b){var c=x.$6.get(a.marker_id);c!=null&&c!==0&&d("WAQplPrecisionMutation").inplaceTruncateEventPrecision(a,c);return x.$7.sendEvent(a,b)},quickLogConfigHelper:{getEventDetails:function(a){return x.$7.getEventDetails(a)},isKillswitchOn:function(){return!x.$7.isQplEnabled()}}};x.markerInstanceHelper=new Map();x.$9=100;x.$4=[];x.allowListDevVerboseLogging=[];x.isDev=!1;x.$6=new Map();x.resetQplSettings();g.QPL=x}),98);
__d("WAWebQplQuickPerformanceLoggerModule",["QPLEvent","WALogger","WAQuickPerformanceLogger","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebRuntimeEnvironmentUtils","cr:4941","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[QPL] Invalid markerId in ALLOWLIST_DEV_VERBOSE_LOGGING: ",""]);i=function(){return a};return a}var j=[(e=d("WAWebQplQuickPerformanceLoggerMarkerIds")).QuickLogMarkerId.WHATSAPP_WEB_TEST_EVENT];f=[e.QuickLogMarkerId.PAGE_LOAD,e.QuickLogMarkerId.ALTERNATIVE_DEVICE_LINKING,e.QuickLogMarkerId.DESKTOP_UPSELL_LINK_DEVICE_METRICS];function a(){if(!c("gkx")("26258")&&!d("WAWebRuntimeEnvironmentUtils").isWorker()&&b("cr:4941")){var a=new(b("cr:4941"))(window.location.search);a=a.get("qpl_dev_allowlist");if(a!=null&&a!==""){a=a.split("_");for(a of a)try{var e=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.cast(Number.parseInt(a,10));e!=null&&j.push(e)}catch(b){d("WALogger").ERROR(i(),a)}}}}e={init:function(a,b,c){d("WAQuickPerformanceLogger").QPL.init(a,b,c)},clearInstance:function(){d("WAQuickPerformanceLogger").QPL.clearInstance()},getInstance:function(){return d("WAQuickPerformanceLogger").QPL.getInstance()},getNextMarkerInstanceValue:function(a){a=k(a);return d("WAQuickPerformanceLogger").QPL.getNextMarkerInstanceValue(a)},throwKillswitch:function(a){d("WAQuickPerformanceLogger").QPL.throwKillswitch(a)},clearStorage:function(){d("WAQuickPerformanceLogger").QPL.clearStorage()},logActiveQplMarkers:function(){d("WAQuickPerformanceLogger").QPL.logActiveQplMarkers()},markerStart:function(a,b){a=k(a);return d("WAQuickPerformanceLogger").QPL.markerStart(a,b)},markerAnnotate:function(a,b,c){a=k(a);d("WAQuickPerformanceLogger").QPL.markerAnnotate(a,b,c)},markerPoint:function(a,b,c){a=k(a);d("WAQuickPerformanceLogger").QPL.markerPoint(a,b,c)},markerEnd:function(a,b,c){a=k(a);d("WAQuickPerformanceLogger").QPL.markerEnd(a,b,c)},genMarkerEnd:function(a,b,c){a=k(a);return d("WAQuickPerformanceLogger").QPL.genMarkerEnd(a,b,c)},markerDrop:function(a,b){a=k(a);d("WAQuickPerformanceLogger").QPL.markerDrop(a,b)},getActiveMarkerIDs:function(a){return d("WAQuickPerformanceLogger").QPL.getActiveMarkerIDs(a)},getMarker:function(a,b){b===void 0&&(b=0);a=k(a);return d("WAQuickPerformanceLogger").QPL.getMarker(a,b)},getMarkerInstances:function(a){a=k(a);return d("WAQuickPerformanceLogger").QPL.getMarkerInstances(a)}};function k(a){return typeof a==="number"?a:(h||(h=d("QPLEvent"))).getMarkerId(a)}g.ALLOWLIST_DEV_VERBOSE_LOGGING=j;g.ALLOWLIST_IMMEDIATE_UPLOAD=f;g.updateAllowlistDevVerboseLoggingOverrides=a;g.QPL=e;g.convertMarkerIdOrEvent=k}),98);
__d("WAWebSchemaMessage",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("message",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey,g=b.addIndex,h=b.addUniqueIndex,i=b.addCompositeIndex,j=b.addArrayIndex;b=b.removeColumn;return a.version((a=d("WAWebModelStorageVersions")).messageCreateTable(),[f("id"),c("internalId"),h("internalId"),c("rowId"),h("rowId"),c("type"),c("subtype"),c("t"),c("notifyName"),c("from"),c("to"),c("author"),c("local"),c("ack"),c("invis"),c("isStarred"),g("isStarred"),c("mentionedJidList"),c("groupMentions"),c("count"),c("devicesAdded"),c("devicesRemoved"),c("isThisDeviceAdded"),c("recipients"),c("protocolMessageKey"),c("protocolMessageRowId"),c("templateParams"),i(["internalId","isStarred"]),c("vcardWAids"),j("vcardWAids"),c("hasLink"),c("isMediaMsg"),c("isDocMsg"),c("isEventMsg"),i(["internalId","isMediaMsg"]),i(["internalId","isDocMsg"]),i(["internalId","hasLink"]),c("ephemeralStartTimestamp"),c("ephemeralDuration"),c("ephemeralSettingTimestamp"),c("ephemeralOutOfSync"),c("ephemeralSettingUser"),c("expiredTimestamp"),g("expiredTimestamp"),c("directPath"),c("mimetype"),c("duration"),c("filehash"),c("uploadhash"),c("size"),c("filename"),c("streamingSidecar"),c("mediaKey"),c("mediaKeyTimestamp"),c("pageCount"),c("isGif"),c("gifAttribution"),c("isViewOnce"),c("width"),c("height"),c("scanLengths"),c("scansSidecar"),c("interactiveAnnotations"),c("firstFrameLength"),c("firstFrameSidecar"),c("isAnimated"),c("isLottie"),c("thumbnail"),c("richPreviewType"),c("doNotPlayInline"),c("broadcast"),c("broadcastParticipants"),c("broadcastId"),c("quotedMsg"),c("quotedStanzaID"),c("quotedRemoteJid"),c("quotedParticipant"),c("footer"),c("hydratedButtons"),c("selectedId"),c("selectedIndex"),c("selectedCarouselCardIndex"),c("vcardFormattedName"),c("isVcardOverMmsDocument"),c("isCaptionByUser"),c("hsmTag"),c("hsmCategory"),c("templateId"),c("businessOwnerJid"),c("productId"),c("currencyCode"),c("priceAmount1000"),c("retailerId"),c("url"),c("productImageCount"),c("paymentCurrency"),c("paymentMessageReceiverJid"),c("paymentTransactionTimestamp"),c("paymentStatus"),c("paymentNoteMsg"),c("paymentRequestMessageKey"),c("paymentExpiryTimestamp"),c("message"),c("orderTitle"),c("itemCount"),c("orderId"),c("surface"),c("status"),c("token"),c("textColor"),c("backgroundColor"),c("font"),c("isForwarded"),c("forwardingScore"),c("ctwaContext"),c("messageRangeIndex"),g("messageRangeIndex"),c("vcardList"),c("totalAmount1000"),c("totalCurrencyCode"),c("list"),c("listResponse"),c("isDynamicReplyButtonsMsg"),c("dynamicReplyButtons"),c("selectedButtonId"),c("sellerJid"),c("deprecatedMms3Url"),c("encFilehash"),e("msgRowOpaqueData",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("thumbnailDirectPath"),c("thumbnailSha256"),c("thumbnailEncSha256"),c("thumbnailHeight"),c("thumbnailWidth"),c("revokeSender"),c("pendingReadReceipt"),i(["from","pendingReadReceipt"]),c("inviteGrpType"),c("quotedGroupSubject"),c("quotedParentGroupJid"),c("reactionParentKey"),c("reactionTimestamp"),c("reactionText"),c("lastPlaybackProgress"),c("hasReaction"),c("kicKey"),c("kicState"),c("kicTimestampMs"),c("kicNotified"),c("keptMessageKey"),c("keepType"),c("keptCount"),c("agentId"),c("revokeTimestamp"),c("futureproofParams"),c("futureproofReparsed"),c("futureproofType"),c("futureproofSubtype"),c("botFeedbackKind"),c("botFeedbackText"),c("latestEditMsgKey"),c("latestEditSenderTimestampMs"),c("editMsgType"),c("bizSource"),c("invokedBotWid"),c("botEditType"),c("botTargetSenderJid"),c("bizBotType"),c("botPersonaId"),c("viewCount"),c("forwardedNewsletterMessageInfo"),c("viewed"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("botResponseTargetId"),c("botPluginType"),c("botPluginReferenceIndex"),c("botPluginSearchProvider"),c("botPluginSearchUrl"),c("botReelPluginThumbnailCdnUrl"),c("botPluginMaybeParent"),c("carouselCardsParsed"),c("botMsgBodyType"),c("botPluginSearchQuery"),c("newsletterAdminInviteInfo"),c("bizContentPlaceholderType"),c("hostedBizEncStateMismatch"),c("placeholderCreatedWhenAccountIsHosted"),c("senderOrRecipientAccountTypeHosted"),c("eventInvalidated"),c("replyCount"),c("associationType"),c("parentMsgKey"),c("statusMentioned"),c("viewMode")]).version(a.messageAddIsSendFailureProperties(),[c("isSendFailure")]).version(a.messageAddPaymentTxnStatus(),[c("paymentTxnStatus")]).version(a.messageAddProductListPreviewInfo(),[c("productListItemCount")]).version(a.messageAddPrivacyModeFields(),[c("privacyModeWhenSent"),c("bizPrivacyStatus")]).version(a.messageAddProductListPreviewHeaderImage(),[c("productHeaderImageRejected")]).version(a.messageAddDisappearingModeInitiator(),[c("disappearingModeInitiator")]).version(a.messageAddGroupInviteV4(),[c("inviteGrp"),c("inviteGrpName"),c("comment"),c("inviteCode"),c("inviteCodeExp")]).version(a.addSupportForHSMButtons(),[c("isFromTemplate")]).version(a.messageAddPaymentRequestNFMFields(),[c("nativeFlowButtons"),c("paymentRequestHeader")]).version(a.addWaveformToAudioMessages(),[c("waveform")]).version(a.messageRemovePaymentRequestHeaderField(),[b("paymentRequestHeader")]).version(a.messageAddNativeFlowNameField(),[c("nativeFlowName")]).version(a.addStaticURLToImageVideoMessages(),[c("staticUrl")]).version(a.addRequiresDirectConnection(),[c("requiresDirectConnection")]).version(a.messageAddPaymentInviteServiceType(),[c("paymentInviteServiceType")]).version(a.addStatusPSACampaignFields(),[c("campaignId"),c("campaignDuration")]).version(a.messageAddPaymentBackground(),[c("paymentBackground")]).version(a.messageAddInteractiveMessageFields(),[c("interactiveHeader"),c("interactiveType"),c("interactivePayload")]).version(a.messageAddActionLink(),[c("actionLink")]).version(a.messageAddHeaderType(),[c("headerType")]).version(a.messageStatusPSAReadTimestamp(),[c("statusPSAReadTimestamp")]).version(a.messageAddPollInvalidated(),[c("pollInvalidated")]).version(a.messageAddRcat(),[c("rcat")]).version(a.errorCodeColumn(),[c("errorCode")]).version(a.lastUpdateTimestampColumn(),[c("lastUpdateFromServerTs")]).version(a.paidMessagingCampaignIdColumn(),[c("pmCampaignId")]).version(a.messageAddEditIndex(),[g("latestEditMsgKey")]).version(a.messageAddIsCarouselIndex(),[c("isCarouselMsg"),i(["internalId","isCarouselMsg"])]).version(a.messageAddIsEventMsgIndex(),[i(["internalId","isEventMsg"])]).view(function(a){return a}).enablePropFilter(!0).useDbMsgEncKeyForEncryptedCol(!0).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message")}g.addTable=a;g.getMessageTable=b}),98);
__d("WAWebAddonPerfUtils",["$InternalEnum","WANullthrows","WAQplTypes","WAWebABProps","WAWebAddonConstants","WAWebAddonDBTable","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({BulkUpsert:"bulk_upsert",BulkRemoveByParents:"bulk_remove_by_parents",BulkGetByParentMsgKeys:"bulk_get_by_parent_msg_keys",BulkGetByChatWid:"bulk_get_by_chat_wid",BulkGetParentMsgs:"bulk_get_parent_msgs"}),i=b("$InternalEnum").Mirrored(["Incoming","Outgoing","UI"]);function j(a){if(a<10001)return 1e4;else if(a<30001)return 3e4;else if(a<500001)return 5e4;else if(a<1000001)return 1e5;else if(a<3000001)return 3e5;else if(a<5000001)return 5e5;else if(a<8000001)return 8e5;return 1e6}var k={date:0,values:new Map()};function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=k,c=new Date().setHours(0,0,0,0);if(b.date===c){var e=b.values.get(a);if(e==null){var f=j(yield d("WAWebAddonDBTable").addonInternalDBTable.getTableSize(a));b.values.set(a,f);return f}return e}b.date=c;b.values.clear();f=j(yield d("WAWebAddonDBTable").addonInternalDBTable.getTableSize(a));b.values.set(a,f);return f});return m.apply(this,arguments)}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a="messages",b=k,c=new Date().setHours(0,0,0,0);if(b.date===c){var e=b.values.get(a);if(e==null){var f=j(yield d("WAWebSchemaMessage").getMessageTable().count());b.values.set(a,f);return f}return e}b.date=c;b.values.clear();f=j(yield d("WAWebSchemaMessage").getMessageTable().count());b.values.set(a,f);return f});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{string:{request_type:h.getName(a.type),table_mode:d("WAWebAddonConstants").AddonTableMode.getName(a.mode)},"int":{request_size:a.size,table_size:yield l(a.mode)}}});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{string:{request_type:h.getName(a.type),table_mode:"messages"},"int":{request_size:a.size,table_size:yield n()}}});return s.apply(this,arguments)}function t(){return d("WAWebABProps").getABPropConfigValue("addon_infra_enable_perf_logging")}function u(a){return{success:function(){return a==null?void 0:a.end(d("WAQplTypes").QuickLogActionType.SUCCESS)},fail:function(){return a==null?void 0:a.end(d("WAQplTypes").QuickLogActionType.FAIL)}}}function v(a){var b=Math.random();return b<=a/100?!0:!1}function w(a,b){switch(a){case i.Incoming:return b===d("WAWebAddonConstants").AddonTableMode.Reaction?v(3):v(10);case i.Outgoing:return v(25);case i.UI:return v(1)}}function x(a,b,c){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(!t())return;if(!w(a,b))return;var f;switch(a){case i.Incoming:f=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.ADDON_PROCESS_INCOMING;break;case i.Outgoing:f=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.ADDON_PROCESS_OUTGOING;break;case i.UI:f=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.ADDON_CHAT_REQUEST;break}b=d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(c("WANullthrows")(f),{annotations:yield e()});return u(b)});return y.apply(this,arguments)}function a(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return x(a,b.mode,function(){return p(b)})});return z.apply(this,arguments)}function e(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return x(a,d("WAWebAddonConstants").AddonTableMode.None,function(){return r(b)})});return A.apply(this,arguments)}g.AnnotationRequestType=h;g.AddonQplMarkerType=i;g.getCachedTableSize=l;g.createAddonQplMarker=a;g.createMessagesQplMarker=e}),98);
__d("WAWebAddonSelectUtils",["WAWebABProps","WAWebAddonConstants","WAWebAddonCrossWindowUtils","WAWebAddonInfraError","WAWebAddonProcessMsgsUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function h(a){if(a===d("WAWebMsgType").MSG_TYPE.REVOKED)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedMsgType,"revoke is not expected to cross this path");if(a===d("WAWebMsgType").MSG_TYPE.PROTOCOL)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedMsgType,"protocol revoke is not expected to cross this path");switch(a){case d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE:return d("WAWebABProps").getABPropConfigValue("unified_pin_addon_table_enabled")?d("WAWebAddonConstants").AddonTableMode.Unified:d("WAWebAddonConstants").AddonTableMode.Pin;case d("WAWebMsgType").MSG_TYPE.COMMENT:return d("WAWebAddonConstants").AddonTableMode.Comment;case d("WAWebMsgType").MSG_TYPE.POLL_UPDATE:return d("WAWebAddonConstants").AddonTableMode.PollVote;case d("WAWebMsgType").MSG_TYPE.REACTION_ENC:case d("WAWebMsgType").MSG_TYPE.REACTION:return d("WAWebAddonConstants").AddonTableMode.Reaction;case d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE:return d("WAWebAddonConstants").AddonTableMode.EventResponse;case d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED:return d("WAWebAddonConstants").AddonTableMode.None;default:throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.NotSupportedMsgType,"received "+a+" msgType")}}function a(a){return h(d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a))}function b(a){return{getByParentMsgKey:function(b){b=a.get(b);if(b==null)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError);return b},getForAddon:function(b){b=a.get(d("WAWebAddonProcessMsgsUtils").getParentMsgKey(b).toString());if(b==null)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError);return b}}}function c(a){return{get:function(b){b=a.get(b.toString());if(b==null)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError);return b},has:function(b){return Boolean(a.get(b.toString()))}}}g.getTableModeByMsgType=h;g.getAddonTableMode=a;g.createAddonParentSelector=b;g.createAddonSelector=c}),98);
__d("WAWebMessageAssociationConstants",["WAWebMsgType"],(function(a,b,c,d,e,f,g){a=new Set([d("WAWebMsgType").MSG_TYPE.ALBUM]);g.orphanIneligibleFutureproofTypes=a}),98);
__d("WAWebAddonSortUtils",["WAWebAddonCrossWindowUtils","WAWebAddonPluginProcessor","WAWebAddonProcessMsgsUtils","WAWebAddonSelectUtils","WAWebMessageAssociationConstants","WAWebMsgType","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a,b){a=h(a,b);b=a.orphans;a=a.nonOrphans;return{orphans:b,validAddons:a}}function h(a,b){var e=[],f=[];for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;var j=b.get(d("WAWebAddonProcessMsgsUtils").getParentMsgKey(i).toString()),k=j==null||(j==null?void 0:j.type)===d("WAWebMsgType").MSG_TYPE.UNKNOWN;(j==null?void 0:j.futureproofType)!=null?k=!d("WAWebMessageAssociationConstants").orphanIneligibleFutureproofTypes.has(j.futureproofType):(j==null?void 0:j.type)===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT&&(k=!0);if(k)e.push(i);else if(j!=null){j=j.broadcastId!=null&&c("WAWebWid").isWid(j.broadcastId)&&Boolean((k=j.broadcastId)==null?void 0:k.isBroadcastList());j?f.push(babelHelpers["extends"]({},i,{author:void 0})):f.push(i)}}return{orphans:e,nonOrphans:f}}function b(a){var b=new Map();for(var a=a,c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=d("WAWebAddonSelectUtils").getAddonTableMode(f);b.has(g)||b.set(g,[]);(g=b.get(g))==null?void 0:g.push(f)}return b}function e(a,b,c){var e=new Map();for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;var i=d("WAWebAddonCrossWindowUtils").getAddonProcessorType(h);if(!e.has(i)){var j=d("WAWebAddonPluginProcessor").getAddonProcessor(i);e.set(i,{processor:j,processMode:a,tableMode:b,addons:[]})}(j=e.get(i))==null?void 0:j.addons.push(h)}return Array.from(e.values())}g.collectValidAndOrphanAddons=a;g.collectValidAndOrphans=h;g.groupAddonsByTableMode=b;g.groupAddonsByProcessor=e}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f,g){var j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:g===void 0&&(g=16);j={name:"AES-GCM",iv:i(c),tagLength:g*8};f!=null&&(j.additionalData=i(f));k.t0=d("WACryptoDependencies").getCrypto().subtle;k.t1=j;k.next=7;return b("regeneratorRuntime").awrap(h(a));case 7:k.t2=k.sent;k.t3=e;return k.abrupt("return",k.t0.encrypt.call(k.t0,k.t1,k.t2,k.t3));case 10:case"end":return k.stop()}},null,this)}function c(a,c,e,f,g){var j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:g===void 0&&(g=16);j={name:"AES-GCM",iv:i(c),tagLength:g*8};f!=null&&(j.additionalData=i(f));k.t0=d("WACryptoDependencies").getCrypto().subtle;k.t1=j;k.next=7;return b("regeneratorRuntime").awrap(h(a));case 7:k.t2=k.sent;k.t3=e;return k.abrupt("return",k.t0.decrypt.call(k.t0,k.t1,k.t2,k.t3));case 10:case"end":return k.stop()}},null,this)}function h(a){return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"])}function i(a){if(a instanceof Uint8Array)return a;if(typeof a==="string"){var b=new(d("WABinary").Binary)();b.writeString(a);return b.readByteArray()}return new Uint8Array(a)}g.gcmEncrypt=a;g.gcmDecrypt=c}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(a,b,c,d,e,f,g){"use strict";c=b("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit"});var h=32;function a(a){var b=a.messageSecret,c=a.stanzaId,e=a.parentMsgOriginalSender,f=a.modificationSender;a=a.modificationType;c=d("WABinary").Binary.build(c,e,f,a).readBuffer();return d("WACryptoHkdf").extractAndExpand(b instanceof ArrayBuffer?new Uint8Array(b):b,c,h)}g.UseCaseSecretModificationType=c;g.createUseCaseSecret=a}),98);
__d("WAWebWamEnumMediaType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:1,PHOTO:2,VIDEO:3,AUDIO:4,PTT:5,LOCATION:6,CONTACT:7,DOCUMENT:8,URL:9,CALL:10,GIF:11,FUTURE:12,CONTACT_ARRAY:13,LIVE_LOCATION:14,PROFILE_PIC:15,STICKER:16,HSM:17,PRODUCT_IMAGE:18,TEMPLATE:19,MD_APP_STATE:20,MD_HISTORY_SYNC:21,CATALOG_LINK:22,PRODUCT_LINK:23,ORDER:24,LIST:25,LIST_REPLY:26,BUTTON_MESSAGE:27,BUTTON_RESPONSE_MESSAGE:28,PRODUCT_LIST:29,BUTTON_NFM:30,VIEW_ONCE_IMAGE:31,VIEW_ONCE_VIDEO:32,SHOP_STOREFRONT:33,REACTION:34,INTERACTIVE_NFM:35,INTERACTIVE_RESPONSE_NFM:36,POLL_CREATE:37,POLL_VOTE:38,TEXT:39,KEEP:40,UNKEEP:41,INVISIBLE_HELLO:42,MEDIA_EXPRESS_NOTIFY:43,UNDECRYPTED_MEDIA:44,UNDECRYPTED_TEXT:45,UNDECRYPTED_PAY:46,UNDECRYPTED_POLL:47,UNDECRYPTED_REACTION:48,UNDECRYPTED_MEDIA_NOTIFY:49,VIEW_ONCE_AUDIO:50,SCHEDULED_CALL_CREATE:51,SCHEDULED_CALL_CANCEL:52,PUSH_TO_VIDEO:53,PIN_IN_CHAT:54,INTERACTIVE_CAROUSEL:55,COMMENT:56,EPHEMERAL_SYNC_RESPONSE:57,EVENT_CREATE:58,EVENT_RESPOND:59,LOTTIE_STICKER:60,INTERACTIVE_PRODUCT_CAROUSEL:61,INTERACTIVE_PRODUCT:62,MEDIA_ALBUM:63,STICKER_PACK:64});f.MEDIA_TYPE=a}),66);
__d("WAWebWamEnumMessageSecretAllowedType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE_POLL:0,MESSAGE_EDIT:1,REACTION:2,COMMENT:3,EVENT_RESPONSE:4,MESSAGE_EVENT_EDIT:5,MESSAGE_REPORTING_TOKEN:6});f.MESSAGE_SECRET_ALLOWED_TYPE=a}),66);
__d("WAWebWamEnumMessageSecretErrorType",[],(function(a,b,c,d,e,f){a=Object.freeze({MISSING_MESSAGE_SECRET:0,WRONG_LENGTH:1,ENCRYPTION_ERROR:2,DECRYPTION_ERROR:3});f.MESSAGE_SECRET_ERROR_TYPE=a}),66);
__d("WAWebMessageSecretErrorsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageSecretAllowedType","WAWebWamEnumMessageSecretErrorType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MessageSecretErrors:[3686,{messageMediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageSecretAllowedList:[1,d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE],messageSecretError:[2,d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE]},[1,1,1],"regular"]},{MessageSecretErrors:[]});g.MessageSecretErrorsWamEvent=a}),98);
__d("WAWebAddonEncryptionError",["$InternalEnum","WALogger","WAWebAddonInfraError","WAWebHandleMsgError","WAWebMessageSecretErrorsWamEvent","WAWebMsgType","WAWebWamEnumE2eFailureReason","WAWebWamEnumMediaType","WAWebWamEnumMessageSecretAllowedType","WAWebWamEnumMessageSecretErrorType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DualEncryptionValidationError] missing media type and allowed list value for ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parent msg "," secret is not 32 bytes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parent msg "," secret is missing"]);j=function(){return a};return a}var k=b("$InternalEnum")({MISSING_MESSAGE_SECRET:"missing_message_secret",WRONG_MESSAGE_SECRET_LENGTH:"wrong_message_secret_length",ENCRYPTION_ERROR:"encryption_error",DECRYPTION_ERROR:"decryption_error"}),l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d="addonType: "+a+", errorCode: "+String(c);d=b.call(this,d,q(c))||this;d.name="DualEncryptionValidationError";m(a,c);return d}return a}(d("WAWebHandleMsgError").MessageValidationError);a=function(a,b){var c=b.messageSecret;if(c==null){d("WALogger").LOG(j(),b.id);throw new l(a,k.MISSING_MESSAGE_SECRET)}if(c.length!==32){d("WALogger").LOG(i(),b.id);throw new l(a,k.WRONG_MESSAGE_SECRET_LENGTH)}return c};function m(a,b){var c=n(a),e=o(a);if(c==null||e==null){d("WALogger").ERROR(h(),a).sendLogs("dual-encryption-validation-error");throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)}new(d("WAWebMessageSecretErrorsWamEvent").MessageSecretErrorsWamEvent)({messageSecretError:p(b),messageMediaType:c,messageSecretAllowedList:e}).commit()}function n(a){switch(a){case d("WAWebMsgType").MsgKind.PollVoteEncrypted:case d("WAWebMsgType").MsgKind.PollVoteDecrypted:return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_VOTE;case d("WAWebMsgType").MsgKind.ReactionEncrypted:case d("WAWebMsgType").MsgKind.ReactionDecrypted:return d("WAWebWamEnumMediaType").MEDIA_TYPE.REACTION;case d("WAWebMsgType").MsgKind.EventResponseEncrypted:case d("WAWebMsgType").MsgKind.EventResponseDecrypted:return d("WAWebWamEnumMediaType").MEDIA_TYPE.EVENT_RESPOND;case d("WAWebMsgType").MsgKind.EventEditEncrypted:case d("WAWebMsgType").MsgKind.EventEditDecrypted:return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case d("WAWebMsgType").MsgKind.CommentEncrypted:case d("WAWebMsgType").MsgKind.CommentDecrypted:return d("WAWebWamEnumMediaType").MEDIA_TYPE.COMMENT;default:return}}function o(a){switch(a){case d("WAWebMsgType").MsgKind.PollVoteEncrypted:case d("WAWebMsgType").MsgKind.PollVoteDecrypted:return d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL;case d("WAWebMsgType").MsgKind.ReactionEncrypted:case d("WAWebMsgType").MsgKind.ReactionDecrypted:return d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.REACTION;case d("WAWebMsgType").MsgKind.EventResponseEncrypted:case d("WAWebMsgType").MsgKind.EventResponseDecrypted:return d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.EVENT_RESPONSE;case d("WAWebMsgType").MsgKind.EventEditEncrypted:case d("WAWebMsgType").MsgKind.EventEditDecrypted:return d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_EVENT_EDIT;case d("WAWebMsgType").MsgKind.CommentEncrypted:case d("WAWebMsgType").MsgKind.CommentDecrypted:return d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.COMMENT;default:return}}function p(a){switch(a){case k.MISSING_MESSAGE_SECRET:return d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.MISSING_MESSAGE_SECRET;case k.WRONG_MESSAGE_SECRET_LENGTH:return d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.WRONG_LENGTH;case k.ENCRYPTION_ERROR:return d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.ENCRYPTION_ERROR;case k.DECRYPTION_ERROR:return d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.DECRYPTION_ERROR}}function q(a){switch(a){case k.MISSING_MESSAGE_SECRET:return d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET;case k.WRONG_MESSAGE_SECRET_LENGTH:return d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID;case k.ENCRYPTION_ERROR:return d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE;case k.DECRYPTION_ERROR:return d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.DECRYPTION_FAILED}}g.DualEncryptionValidationErrorCode=k;g.DualEncryptionValidationError=l;g.getValidatedMessageSecret=a}),98);
__d("WAWebAddonEncryption",["WACryptoAesGcm","WALogger","WANullthrows","WAUseCaseSecret","WAWebAddonEncryptionError","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWidToJid","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed decrypting an addon "," "," ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed encrypting an addon "," "," ",""]);i=function(){return a};return a}function j(a,b){switch(a){case d("WAWebMsgType").MsgKind.PollVoteEncrypted:case d("WAWebMsgType").MsgKind.PollVoteDecrypted:return b.stanzaId+"\0"+b.addOnSenderJid;case d("WAWebMsgType").MsgKind.EventResponseEncrypted:case d("WAWebMsgType").MsgKind.EventResponseDecrypted:return b.stanzaId+"\0"+b.addOnSenderJid;default:return}}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.messageSecret,f=b.iv,g=b.stanzaId,h=b.originalMessageSender;b=b.addOnSender;try{b=d("WAWebWidToJid").widToUserJid(b);var k=c("WANullthrows")(m(a.type)),l=k.spec;k=k.usecase;e=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:e,stanzaId:g,parentMsgOriginalSender:d("WAWebWidToJid").widToUserJid(h),modificationSender:b,modificationType:k}));h=d("encodeProtobuf").encodeProtobuf(l,a.encode).readBuffer();k=(yield d("WACryptoAesGcm").gcmEncrypt(e,f,h,j(a.type,{stanzaId:g,addOnSenderJid:b})));return k}catch(b){d("WALogger").LOG(i(),g,a.type,b);throw new(d("WAWebAddonEncryptionError").DualEncryptionValidationError)(a.type,d("WAWebAddonEncryptionError").DualEncryptionValidationErrorCode.ENCRYPTION_ERROR)}});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.messageSecret,f=b.iv,g=b.stanzaId,i=b.originalMessageSender;b=b.addOnSender;try{b=d("WAWebWidToJid").widToUserJid(b);var k=c("WANullthrows")(m(a.type));k=k.usecase;e=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:e,stanzaId:g,parentMsgOriginalSender:d("WAWebWidToJid").widToUserJid(i),modificationSender:b,modificationType:k}));i=(yield d("WACryptoAesGcm").gcmDecrypt(e,f,a.encryptedAddOn,j(a.type,{stanzaId:g,addOnSenderJid:b})));return i}catch(b){d("WALogger").LOG(h(),g,a.type,b);throw new(d("WAWebAddonEncryptionError").DualEncryptionValidationError)(a.type,d("WAWebAddonEncryptionError").DualEncryptionValidationErrorCode.DECRYPTION_ERROR)}});return l.apply(this,arguments)}function m(a){switch(a){case d("WAWebMsgType").MsgKind.ReactionEncrypted:case d("WAWebMsgType").MsgKind.ReactionDecrypted:return{spec:d("WAWebProtobufsE2E.pb").Message$ReactionMessageSpec,usecase:d("WAUseCaseSecret").UseCaseSecretModificationType.ENC_REACTION};case d("WAWebMsgType").MsgKind.PollVoteEncrypted:case d("WAWebMsgType").MsgKind.PollVoteDecrypted:return{spec:d("WAWebProtobufsE2E.pb").Message$PollVoteMessageSpec,usecase:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE};case d("WAWebMsgType").MsgKind.CommentEncrypted:case d("WAWebMsgType").MsgKind.CommentDecrypted:return{spec:d("WAWebProtobufsE2E.pb").MessageSpec,usecase:d("WAUseCaseSecret").UseCaseSecretModificationType.ENC_COMMENT};case d("WAWebMsgType").MsgKind.EventResponseEncrypted:case d("WAWebMsgType").MsgKind.EventResponseDecrypted:return{spec:d("WAWebProtobufsE2E.pb").Message$EventResponseMessageSpec,usecase:d("WAUseCaseSecret").UseCaseSecretModificationType.EVENT_RESPONSE};case d("WAWebMsgType").MsgKind.EventEditEncrypted:case d("WAWebMsgType").MsgKind.EventEditDecrypted:return{spec:d("WAWebProtobufsE2E.pb").MessageSpec,usecase:d("WAUseCaseSecret").UseCaseSecretModificationType.EVENT_EDIT_ENCRYPTED}}}g.encryptAddOn=a;g.decryptAddOn=e}),98);
__d("WAWebApiUpdateReplyCount",["WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[];for(a of a){var e=a[0],f=a[1],g=b.getByParentMsgKey(e);if(g==null)continue;g=(g=g.replyCount)!=null?g:0;c.push({id:e,replyCount:g+f})}yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(c)});return h.apply(this,arguments)}g.updateReplyCountInParentMsgs=a}),98);
__d("WAWebCommentGroupBy",[],(function(a,b,c,d,e,f){function a(a,b){var c=new Map();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;g=g.parentMsgKey.toString();f=(f=c.get(g))!=null?f:0;c.set(g,f+1)}for(g=b,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}a=d;b=a.parentMsgKey.toString();a=(d=c.get(b))!=null?d:0;c.set(b,a-1)}return c}f.commentCountByParents=a}),66);
__d("WAWebCommentMessageValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_COMMENT_ENC_IV:"comment_missing_enc_iv",MISSING_COMMENT_ENC_PAYLOAD:"comment_missing_enc_payload",MISSING_COMMENT_MESSAGE_KEY:"comment_missing_target_message_key",INVALID_COMMENT_ENC_IV:"comment_invalid_enc_iv",MISSING_COMMENT_SENDER:"comment_missing_sender",MISSING_MESSAGE_SECRET:"comment_parent_missing_message_secret",MISSING_ORIGINAL_MESSAGE_SENDER:"comment_missing_original_message_sender",MISSING_COMMENT_CONTENT:"comment_missing_comment_content"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="CommentMessageValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.CommentMessageValidationErrorCode=a;g.CommentMessageValidationError=c}),98);
__d("WAWebCommentMsgDataConversion",["WANullthrows","WAWebCommentMessageValidationError","WAWebMsgType","WAWebWamEnumE2eFailureReason","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(a){var b;return(b=a.conversation)!=null?b:(b=a.extendedTextMessage)==null?void 0:b.text}function a(a,b){a=h(a);if(a==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_CONTENT,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{ack:b.ack,body:a,from:b.from,to:b.to,id:b.id,parentMsgKey:b.targetMessageKey,author:d("WAWebWidFactory").toUserWid(c("WANullthrows")(b.author)),t:b.t,type:d("WAWebMsgType").MSG_TYPE.COMMENT,kind:d("WAWebMsgType").MsgKind.CommentDecrypted,read:!1}}g.extractCommentTextFromMessage=h;g.convertMessageToCommentMsgData=a}),98);
__d("WAWebProcessCommentMsg",["WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebCommentMessageValidationError","WAWebMsgGetters","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWamEnumE2eFailureReason","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.targetMessageKey,e=a.encIv,f=a.encPayload;if(e==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(f==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(c==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);c=a.author?a.author:a.id.participant;a=d("WAWebMsgGetters").getOriginalSender(b);if(c==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(a==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_ORIGINAL_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);f={type:d("WAWebMsgType").MsgKind.CommentEncrypted,encryptedAddOn:f};var g=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.CommentEncrypted,b);f=(yield d("WAWebAddonEncryption").decryptAddOn(f,{messageSecret:g,iv:e,stanzaId:b.id.id,originalMessageSender:a,addOnSender:d("WAWebWidFactory").toUserWid(c)}));return d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,f)});return h.apply(this,arguments)}g.processEncCommentMsg=a}),98);
__d("WAWebReferentialMsgKey",["WAWebMsgKey","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){if(a.broadcastId&&d("WAWebWidFactory").isWidlike(a.broadcastId)){var b=a.id;return new(c("WAWebMsgKey"))({fromMe:b.fromMe,remote:d("WAWebWidFactory").createWidFromWidLike(a.broadcastId),id:b.id,participant:b.remote})}return a.id}g.getReferentialMsgKey=a}),98);
__d("WAWebSchemaChat",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){d("WAWebModelStorageUtils").getStorage().add_OPTIMIZED_EXPERIMENT("chat",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addIndex,g=b.addUniqueIndex;b=b.addUserDefinedPrimaryKey;return a.version((a=d("WAWebModelStorageVersions")).chatCreateTable(),[b("id"),c("t"),c("unreadCount"),c("unreadDividerOffset"),c("archive"),c("isReadOnly"),c("isLocked"),c("isAnnounceGrpRestrict"),c("modifyTag"),c("muteExpiration"),c("isAutoMuted"),c("name"),c("notSpam"),c("pin"),c("changeNumberOldJid"),c("changeNumberNewJid"),c("ephemeralDuration"),c("ephemeralSettingTimestamp"),c("unreadMsgAnchorId"),c("endOfHistoryTransferType"),c("lastReactionPreview"),c("chatlistPreview"),c("isDeprecated"),c("unreadEditTimestampMs"),e("chatRowOpaqueData",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("ephemeralDisplayedExemptions"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("hasOpened"),c("hasCreatedBotInvokeSystemMsg"),c("bizBotSystemMsgType"),c("lidOriginType"),c("hasRequestedWelcomeMsg"),c("wallpaper")]).version(a.chatAddDisappearingModeInitiator(),[c("disappearingModeInitiator")]).version(a.addUnreadMentionToChatTable(),[c("unreadMentionsOfMe")]).version(a.addUnreadMentionCountToChatTable(),[c("unreadMentionCount")]).version(a.addTcTokenToChatTable(),[e("tcToken",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version(a.addTcTokenTimestampToChatTable(),[c("tcTokenTimestamp"),f("tcTokenTimestamp")]).version(a.addArchiveAtMentionViewedInDrawer(),[c("archiveAtMentionViewedInDrawer")]).version(a.addTcTokenSenderTimestampToChatTable(),[c("tcTokenSenderTimestamp")]).version(a.addEphemeralityIndexToChatTable(),[f("ephemeralDuration")]).version(a.chatAddAccountLidIndex(),[c("accountLid"),g("accountLid")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("chat")}g.addTable=a;g.getChatTable=b}),98);
__d("WAWebCommentUtils",["WANullthrows","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebApiUpdateReplyCount","WAWebBackendApi","WAWebCommentGroupBy","WAWebCommentMsgDataConversion","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebProcessCommentMsg","WAWebReferentialMsgKey","WAWebSchemaChat","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();for(a of a){var c=a.id.remote.toString(),e=a.t;if(e==null)continue;var f=b.get(c);b.set(c,{id:c.toString(),t:Math.max(e,(c=f==null?void 0:f.t)!=null?c:0),unreadCount:(f==null?void 0:f.unreadCount)!=null?f.unreadCount+1:1})}for(e of b.entries()){c=e[0];f=e[1];a=(yield d("WAWebSchemaChat").getChatTable().get(c));a!=null&&f.unreadCount!=null&&(f.unreadCount+=a.unreadCount)}c=Array.from(b.values());return c});return h.apply(this,arguments)}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=self.crypto.getRandomValues(new Uint8Array(12));e={type:d("WAWebMsgType").MsgKind.CommentDecrypted,encode:e};var g=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.CommentDecrypted,a);e=(yield d("WAWebAddonEncryption").encryptAddOn(e,{messageSecret:g,iv:f,originalMessageSender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a))),addOnSender:d("WAWebWidFactory").toUserWid(b),stanzaId:a.id.id}));return{encIv:f.buffer,encPayload:e,targetMessageKey:d("WAWebReferentialMsgKey").getReferentialMsgKey(a)}});return j.apply(this,arguments)}function e(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=d("WAWebCommentGroupBy").commentCountByParents(a,c);yield d("WAWebApiUpdateReplyCount").updateReplyCountInParentMsgs(a,b);d("WAWebBackendApi").frontendFireAndForget("updateReplyCount",{replyCountMap:a})});return k.apply(this,arguments)}function f(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebProcessCommentMsg").processEncCommentMsg(a,b));return d("WAWebCommentMsgDataConversion").convertMessageToCommentMsgData(b,a)});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={conversation:a.body},f=d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a)));return babelHelpers["extends"]({id:a.id},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),yield i(b,f,e),{type:d("WAWebMsgType").MSG_TYPE.COMMENT,kind:d("WAWebMsgType").MsgKind.CommentEncrypted,t:a.t,addonEncrypted:!0,ack:a.ack})});return n.apply(this,arguments)}g.genChatIdToLastTimestamp=a;g.getEncCommentsFields=i;g.updateReplyCount=e;g.encCommentMsgDataToCommentMsgData=f;g.commentMsgDataToEncCommentMsgData=m}),98);
__d("WAWebAddonUpdateDataUtils",["Promise","WANullthrows","WAWebABProps","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonHydrationUtils","WAWebAddonInfraError","WAWebAddonPerfUtils","WAWebAddonProcessMsgsUtils","WAWebAddonSelectUtils","WAWebAddonSortUtils","WAWebCommentUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new Set([(e=d("WAWebAddonConstants")).AddonProcessMode.OnlineReceive,e.AddonProcessMode.Revoke,e.AddonProcessMode.DeleteForMe,e.AddonProcessMode.DeleteWithParent]);function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var i,j,k=[];i=(i=f.removeByMsgKey)!=null?i:[];j=(j=f.removeByMsgKey)!=null?j:[];f.remove!=null&&f.remove.length>0&&(i=i.concat(f.remove.map(function(a){return a.id})),j=j.concat(d("WAWebAddonHydrationUtils").filterAddonsByHydratedStatus(f.remove).map(function(a){return a.id})));if(e!==d("WAWebAddonConstants").AddonTableMode.None){if(f.add!=null&&f.add.length>0){var l=function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var i;g==null?void 0:(i=g.sendPerfReporter)==null?void 0:i.startSavedStage();i=(yield d("WAWebAddonPerfUtils").createAddonQplMarker(a===d("WAWebAddonConstants").AddonProcessMode.Send?d("WAWebAddonPerfUtils").AddonQplMarkerType.Outgoing:d("WAWebAddonPerfUtils").AddonQplMarkerType.Incoming,{mode:e,type:d("WAWebAddonPerfUtils").AnnotationRequestType.BulkUpsert,size:f.add.length}));try{a===d("WAWebAddonConstants").AddonProcessMode.SetAck?yield (h||(h=b("Promise"))).all(f.add.map(function(a){return d("WAWebAddonDBTable").addonInternalDBTable.updateAck(e,a,c("WANullthrows")(a.ack,"ack is not defined"))})):yield d("WAWebAddonDBTable").addonInternalDBTable.bulkUpsert(e,f.add),i==null?void 0:i.success()}catch(a){i==null?void 0:i.fail();throw a}g==null?void 0:(i=g.sendPerfReporter)==null?void 0:i.postSavedStage()});return function(){return i.apply(this,arguments)}}();k.push(l())}i.length>0&&k.push(d("WAWebAddonDBTable").addonInternalDBTable.bulkRemoveByMsgKey(e,i))}k.length>0&&(yield (h||(h=b("Promise"))).all(k));return{removeFromUICollection:j}});return k.apply(this,arguments)}function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=a.processMode;a=a.tableMode;e=e==null?void 0:e.metricReporter;if(f===d("WAWebAddonConstants").AddonProcessMode.Hydration)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError);var g=(yield j(f,a,c,e)),k=g.removeFromUICollection;if(f===d("WAWebAddonConstants").AddonProcessMode.HistorySync&&d("WAWebABProps").getABPropConfigValue("enable_collection_update_for_hydrated_addons_only"))return;if(c.add!=null){e==null?void 0:(g=e.sendPerfReporter)==null?void 0:g.startRenderedStage();yield (h||(h=b("Promise"))).all(d("WAWebAddonSortUtils").groupAddonsByProcessor(f,a,c.add).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebAddonHydrationUtils").filterAddonsByHydratedStatus(a.addons),c=b.length!==0||k.length!==0||f===d("WAWebAddonConstants").AddonProcessMode.OnlineReceive;c&&(yield a.processor.updateCollection({add:b,remove:k},f),i.has(f)&&(yield a.processor.manageNotifications({add:f===d("WAWebAddonConstants").AddonProcessMode.Revoke?[]:a.addons,remove:k},{processMode:f})))});return function(b){return a.apply(this,arguments)}}()));e==null?void 0:(g=e.sendPerfReporter)==null?void 0:g.postRenderedStage()}else if(c.remove!=null){yield (h||(h=b("Promise"))).all(d("WAWebAddonSortUtils").groupAddonsByProcessor(f,a,c.remove).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.processor.updateCollection({add:[],remove:k},f),i.has(f)&&(yield a.processor.manageNotifications({add:[],remove:k},{processMode:f}))});return function(b){return a.apply(this,arguments)}}()));if(f===d("WAWebAddonConstants").AddonProcessMode.DeleteForMe&&a===d("WAWebAddonConstants").AddonTableMode.Comment){e=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs(c.remove,d("WAWebAddonConstants").AddonProcessMode.DeleteForMe));g=e[0];a=[];for(e of c.remove)e.kind===d("WAWebMsgType").MsgKind.CommentDecrypted&&a.push(e);yield d("WAWebCommentUtils").updateReplyCount([],d("WAWebAddonSelectUtils").createAddonParentSelector(g),a)}}else throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedError)});return l.apply(this,arguments)}g.updateAddonsInTableMode=a}),98);
__d("WAWebSchemaMembershipApprovalRequest",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("pending-membership-approval-request").version(d("WAWebModelStorageVersions").membershipApprovalRequestCreateTable(),[e(["groupId","id"]),b("groupId"),c("t"),c("addedBy"),c("requestMethod"),c("parentGroupId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("pending-membership-approval-request")}g.addTable=a;g.getMembershipApprovalRequestTable=b}),98);
__d("WAWebApiMembershipApprovalRequestStore",["WAWebSchemaMembershipApprovalRequest","WAWebWidFactory"],(function(a,b,c,d,e,f,g){a=function(a){return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().equals(["groupId"],a.toString()).then(function(a){return a.map(function(a){var b=a.id,c=a.t,e=a.addedBy,f=a.requestMethod;a=a.parentGroupId;return{id:d("WAWebWidFactory").createWid(b),t:c,addedBy:d("WAWebWidFactory").createWid(e),requestMethod:f,parentGroupId:a!=null?d("WAWebWidFactory").createWid(a):void 0}})})};b=function(a,b){b=b.map(function(b){var c=b.id,d=b.t,e=b.addedBy,f=b.requestMethod;b=b.parentGroupId;return{groupId:a.toString(),id:c.toString(),t:d,addedBy:e.toString(),requestMethod:f,parentGroupId:b==null?void 0:b.toString()}});return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkCreateOrReplace(b)};c=function(a,b){var c=a.toString();return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkRemove(b.map(function(a){return[c,a.toString()]}))};e=function(a){return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkRemoveByIndex(["groupId"],[a.toString()])};g.getMembershipApprovalRequests=a;g.addMembershipApprovalRequests=b;g.removeMembershipApprovalRequests=c;g.removeAllMembershipApprovalRequests=e}),98);
__d("WABatcher",["Promise","WAErr","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,d){var e=a.delayMs,f=a.maxSize,g=null;function i(a){g&&g.args===a&&(g=null);return d(a)}var j=function(){if(g==null)return(h||(h=b("Promise"))).resolve();var a=g;g=null;clearTimeout(a.timer);a.run();return a.batchPromise};a=function(a){if(g)g.args.push(a);else{var d,k=[a];a=new(h||(h=b("Promise")))(function(a){d=function(){return void a(k)}}).then(i);var l=d;g={args:k,batchPromise:a,run:l,timer:setTimeout(l,e)}}if(g==null)throw c("WAErr")("activeBatch should not be null here");a=g;l=a.args;a=a.batchPromise;var m=l.length-1;f!=null&&l.length>=f&&void j();return a.then(function(a){return a[m]})};return{accept:a,runActiveBatch:j}}function a(a,b){var c=i(a,b);return function(a){return c.accept(a)}}function e(a){var e=[],f=new(d("WAResolvable").Resolvable)(),g=function(c){if(e.length===0)return(h||(h=b("Promise"))).resolve(new Map());var g=e,i=f;e=[];f=new(d("WAResolvable").Resolvable)();return(h||(h=b("Promise"))).resolve(a(g,c)).then(function(a){i.resolve(a);return a})},i=function(a){e.push(a);return f.promise.then(function(b){b=b.get(a);if(b==null)throw c("WAErr")("This should not happen because we just added it to the batch");return b})};return{accept:i,runActiveBatch:g}}g.createSimpleBatcher=i;g.batch=a;g.createBatcher=e}),98);
__d("WAWebDBParticipantTypes",[],(function(a,b,c,d,e,f,g){a=Object.freeze({ADD:"add",REMOVE:"remove",DEMOTE:"demote",PROMOTE:"promote",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote"});b=Object.freeze({DEVICE:"device",PARTICIPANT:"participant"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="GroupUnSyncedError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));g.PARTICIPANT_OPERATION=a;g.STALE_TYPES=b;g.GroupUnSyncedError=c}),98);
__d("WAWebLeaveReasonType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Left","Removed"]);f.LeaveReason=a}),66);
__d("WAWebPnhCagIncognito",["WAWebApiContact","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=a.participants.iAmAdmin();a=a.participants.toArray();var c=[],e=[];if(b)for(var b=a,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;c.push(h.id);e.push(d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(h.id)))}else for(h=a,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;b=h[f++]}else{f=h.next();if(f.done)break;b=f.value}a=b;a.id.isLid()?c.push(a.id):e.push(d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a.id)))}return[].concat(c,e).filter(Boolean)}function b(a,b){var c=[];if(a){for(a=0;a<b.length;a++){var d=b[a];c.push(d.id);d.lid&&c.push(d.lid)}return c}for(d=0;d<b.length;d++){a=b[d];a.id.isLid()?c.push(a.id):a.lid&&c.push(a.lid)}return c}g.augmentedCagGroupMetadataParticipantList=a;g.augmentedCagGroupParticipantList=b}),98);
__d("WAWebWamEnumMessageChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4,CHANNEL:5});f.MESSAGE_CHAT_TYPE=a}),66);
__d("WAWebGetMessageChatTypeFromWid",["WAWebWamEnumMessageChatType"],(function(a,b,c,d,e,f,g){function a(a){if(a.isUser())return d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.INDIVIDUAL;if(a.isGroup())return d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.GROUP;if(a.isBroadcast())return d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.BROADCAST;if(a.isStatus())return d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.STATUS;return a.isNewsletter()?d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.CHANNEL:d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.OTHER}g.getMessageChatTypeFromWid=a}),98);
__d("WAWebWamEnumExpiryReason",[],(function(a,b,c,d,e,f){a=Object.freeze({USER_LEAVE:1,DEVICE_UNPAIR:2,IDENTITY_CHANGE:3,AUDIENCE_CHANGE:4,PERIODIC_ROTATION:5,KEY_CORRUPTION:6,PEER_COMPANION_UNPAIR:7,OTHER_DEVICE_UNPAIR:8});f.EXPIRY_REASON=a}),66);
__d("WAWebWamEnumSizeBucket",[],(function(a,b,c,d,e,f){a=Object.freeze({LT32:1,LT64:2,LT128:3,LT256:4,LT512:5,LT1000:6,LT1024:16,LT1500:7,LT2000:8,LT2500:9,LT3000:10,LT3500:11,LT4000:12,LT4500:13,LT5000:14,LARGEST_BUCKET:15});f.SIZE_BUCKET=a}),66);
__d("WAWebSenderKeyExpiredWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumExpiryReason","WAWebWamEnumMessageChatType","WAWebWamEnumSizeBucket"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({SenderKeyExpired:[3130,{chatType:[1,d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE],deviceSizeBucket:[2,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],expiryReason:[3,d("WAWebWamEnumExpiryReason").EXPIRY_REASON]},[1,1,1],"regular"]},{SenderKeyExpired:[]});g.SenderKeyExpiredWamEvent=a}),98);
__d("WAWebWamNumberToSizeBucket",["WAWebWamEnumSizeBucket"],(function(a,b,c,d,e,f,g){function a(a){if(a<32)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT32;if(a<64)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT64;if(a<128)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT128;if(a<256)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT256;if(a<512)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT512;if(a<1024)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT1024;if(a<1500)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT1500;if(a<2e3)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT2000;if(a<2500)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT2500;if(a<3e3)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT3000;if(a<3500)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT3500;if(a<4e3)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT4000;if(a<4500)return d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT4500;return a<5e3?d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT5000:d("WAWebWamEnumSizeBucket").SIZE_BUCKET.LARGEST_BUCKET}g["default"]=a}),98);
__d("WAWebPostSenderKeyExpiredMetric",["WAWebGetMessageChatTypeFromWid","WAWebSenderKeyExpiredWamEvent","WAWebWamNumberToSizeBucket","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=a.chatId,e=a.expiryReason;a=a.deviceCount;var f=new(d("WAWebSenderKeyExpiredWamEvent").SenderKeyExpiredWamEvent)();e!=null&&(f.expiryReason=e);if(b!=null){e=d("WAWebWidFactory").createWidFromWidLike(b);f.chatType=d("WAWebGetMessageChatTypeFromWid").getMessageChatTypeFromWid(e)}a!=null&&a>0&&(f.deviceSizeBucket=c("WAWebWamNumberToSizeBucket")(a));f.commit()}g.postSenderKeyExpiredMetric=a}),98);
__d("WAWebSchemaParticipant",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addArrayIndex;a.add("participant").version(d("WAWebModelStorageVersions").participantCreateTable(),[e("groupId"),c("senderKey"),c("participants"),c("pastParticipants"),c("admins"),c("rotateKey"),c("version"),b("participants"),c("deviceSyncComplete"),c("staleType"),c("superAdmins")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("participant")}g.addTable=a;g.getParticipantTable=b}),98);
__d("WAWebWamGroupMetricUtils",["WAWebWamNumberToSizeBucket"],(function(a,b,c,d,e,f,g){function h(a){return Math.max(a,32)}function a(a){var b=Object.freeze({}),c=a.participants.length;c!=null&&(b=babelHelpers["extends"]({participantCount:h(c)},b));c=a.cachedDeviceCount;c!=null&&(b=babelHelpers["extends"]({deviceCount:h(c)},b));return b}function b(a){return{participantCount:h(a.participants.length),deviceCount:h(a.senderKey.size),deviceSizeBucket:c("WAWebWamNumberToSizeBucket")(a.senderKey.size)}}g.capCount=h;g.getGroupCountMetricsFromGroupMetadata=a;g.getGroupMetricsFromDbRecord=b}),98);
__d("WAWebWamGroupMetricCache",["Promise","WALogger","WAWebSchemaParticipant","WAWebWamGroupMetricUtils"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_getGroupMetricsFromDb: failed to get for ",": ",""]);i=function(){return a};return a}var j=new Map();function a(a){if(!a.isGroup())return(h||(h=b("Promise"))).resolve(null);a=a.toString();j.has(a)||j.set(a,k(a));return j.get(a)||(h||(h=b("Promise"))).resolve(null)}function k(a){return d("WAWebSchemaParticipant").getParticipantTable().get(a).then(function(a){return a&&d("WAWebWamGroupMetricUtils").getGroupMetricsFromDbRecord(a)})["catch"](function(b){d("WALogger").WARN(i(),a,b)})}function c(a){if(a.participants==null||a.senderKey==null)return;j.set(a.groupId,(h||(h=b("Promise"))).resolve(d("WAWebWamGroupMetricUtils").getGroupMetricsFromDbRecord(a)))}g.getGroupMetrics=a;g.cacheGroupMetrics=c}),98);
__d("WAWebDBGroupParticipant",["$InternalEnum","Promise","WABatcher","WAJids","WALogger","WANullthrows","WAWebDBParticipantTypes","WAWebGroupType","WAWebLeaveReasonType","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebPnhCagIncognito","WAWebPostSenderKeyExpiredMetric","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWamEnumExpiryReason","WAWebWamGroupMetricCache","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["addressing mode migration failed for ",": ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateCommunityParticipantsBatched: failed with unknown action ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateCommunityParticipantsBatched: no local record found for group ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateCommunityParticipantsBatched: aggregating "," changes"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateParticipants: failed with unknown action ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateParticipantsBatched: no local record found for group ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateParticipantsBatched: aggregating "," changes"]);o=function(){return a};return a}var p=3e3;function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.groupInfos;var b=(yield d("WAWebSchemaParticipant").getParticipantTable().bulkGet(a.map(function(a){return a.id.toString()}))),c=new Map();b.forEach(function(a){return a&&c.set(a.groupId,a.senderKey)});b=a.map(function(a){var b,e=[],f=[],g=[],h=a.id.toString(),i=c.get(h)||new Map();(b=a.participants)==null?void 0:b.forEach(function(a){a.isAdmin&&f.push(a.id),a.isSuperAdmin&&g.push(a.id),e.push(a.id)});b=(b=(b=a.pastParticipants)==null?void 0:b.map(function(a){var b=a.id,c=a.leaveTs;a=a.leaveReason;return{jid:b.toString(),leaveTs:c,leaveReason:a}}))!=null?b:[];var j=Boolean(a.incognito)&&Boolean(a.defaultSubgroup);if(j){j=f.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a)});j=d("WAWebPnhCagIncognito").augmentedCagGroupParticipantList(j,a.participants);j.forEach(function(a){a=String(a);i.has(a)||i.set(a,!1)})}else{(j=a.participants)==null?void 0:j.forEach(function(a){i.set(String(a.id),!1)})}return{groupId:h,participants:e.map(String),pastParticipants:b,admins:f.map(String),superAdmins:g.map(String),senderKey:i,rotateKey:!1,staleType:d("WAWebDBParticipantTypes").STALE_TYPES.DEVICE}});return d("WAWebSchemaParticipant").getParticipantTable().bulkCreateOrReplace(b)});return q.apply(this,arguments)}function e(a){var c=a.group,e=a.participants,f=a.admins,g=a.superAdmins,h=a.deviceIds;a=a.groupInfo;var i=!1;a!=null&&(i=Boolean(a.incognito)&&Boolean(a.defaultSubgroup));var j=c.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(j));if(!b)return a.create(E(j,{participants:e,admins:f,superAdmins:g,deviceIds:h}));yield a.createOrReplace(i?K(b,{participants:e,admins:f,superAdmins:g,deviceIds:h}):F(b,{participants:e,admins:f,superAdmins:g,deviceIds:h}))});return function(b){return a.apply(this,arguments)}}())}function f(a){return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.bulkGet(a.map(function(a){return a.groupId}))),d=a.map(function(a,b){var d=a.groupId;a=a.pastParticipants;b=c[b];return!b?E(d,{pastParticipants:a}):y(b,a)});return b.bulkCreateOrReplace(d)});return function(a){return c.apply(this,arguments)}}())}var r=function(){return d("WABatcher").batch({delayMs:p},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(o(),a.length).devConsole(a);var c=Array.from(new Set(a.map(function(a){return a.id})));yield d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=new Map((yield b.bulkGet(c)).filter(Boolean).map(function(a){return[a.groupId,a]}));a.forEach(function(a){var b=a.id,c=a.data;a=a.groupMetadata;a=Boolean(a==null?void 0:a.defaultSubgroup);var f=e.get(b);if(!f){d("WALogger").LOG(n(),b);return}b=c.participants;var g=null;switch(c.action){case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.ADD:g=a?x(f,b,c.deviceIds):w(f,b,c.deviceIds);break;case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.REMOVE:g=a?A(f,b,c.timestamp,c.author,c.reason):z(f,b,c.timestamp,c.author,c.reason);break;case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE:g=a?C(f,b,c.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE):B(f,b,c.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE);break;case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE:g=a?C(f,b,c.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE):B(f,b,c.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE);break;default:d("WALogger").LOG(m(),c.action)}g!=null&&e.set(g.groupId,g)});return b.bulkCreateOrReplace(Array.from(e.values()))});return function(a){return e.apply(this,arguments)}}());return a.map(function(a){return void 0})});return function(b){return a.apply(this,arguments)}}())}(),s=function(){return d("WABatcher").batch({delayMs:p},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(l(),a.length).devConsole(a);var c=Array.from(new Set(a.map(function(a){return a.id})));yield d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=new Map((yield b.bulkGet(c)).filter(Boolean).map(function(a){return[a.groupId,a]}));a.forEach(function(a){var b=a.id;a=a.data;var c=e.get(b);if(!c){d("WALogger").LOG(k(),b);return}b=a.participants;var f=null;switch(a.action){case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE:f=D(c,b,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE);break;case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE:f=D(c,b,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE);break;default:d("WALogger").LOG(j(),a.action)}f!=null&&e.set(f.groupId,f)});return b.bulkCreateOrReplace(Array.from(e.values()))});return function(a){return e.apply(this,arguments)}}());return a.map(function(a){return void 0})});return function(b){return a.apply(this,arguments)}}())}();function t(a,e,f){f===void 0&&(f=!1);if(f)return s({id:String(a),data:e});var g=e.participants,h=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(h));if(!b)throw new(d("WAWebDBParticipantTypes").GroupUnSyncedError)("updateCommunityParticipants: group participant info missing for action "+e.action);switch(e.action){case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE:return a.createOrReplace(D(b,g,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE));case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE:return a.createOrReplace(D(b,g,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE));default:throw c("err")("updateCommunityParticipants: failed with unknown action "+e.action)}});return function(b){return a.apply(this,arguments)}}())}function u(a,c){return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=(yield b.get(a.toString()));if(!e)throw new(d("WAWebDBParticipantTypes").GroupUnSyncedError)("updateParticipants: group participant info missing when trying to update super admin");return b.createOrReplace(babelHelpers["extends"]({},e,{superAdmins:[c.toString()]}))});return function(a){return e.apply(this,arguments)}}())}function v(a,e,f,g){g===void 0&&(g=!1);var h=Boolean(f==null?void 0:f.defaultSubgroup);if(g)return r({id:String(a),data:e,groupMetadata:f});var i=e.participants,j=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(j));if(!b)throw new(d("WAWebDBParticipantTypes").GroupUnSyncedError)("updateParticipants: group participant info missing for action "+e.action);switch(e.action){case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.ADD:return a.createOrReplace(h?x(b,i,e.deviceIds):w(b,i,e.deviceIds));case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.REMOVE:return a.createOrReplace(h?A(b,i,e.timestamp,e.author,e.reason):z(b,i,e.timestamp,e.author,e.reason));case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE:return a.createOrReplace(h?C(b,i,e.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE):B(b,i,e.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE));case d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE:return a.createOrReplace(h?C(b,i,e.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE):B(b,i,e.deviceIds,d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE));default:throw c("err")("updateParticipants: failed with unknown action "+e.action)}});return function(b){return a.apply(this,arguments)}}())}function w(a,b,c){var e=new Map(a.senderKey);c.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);e.set(a,!1)});var f=new Set();for(c of b){b=c.id;f.add(String(b))}b=(c=(b=a.pastParticipants)==null?void 0:b.filter(function(a){return!f.has(a.jid)}))!=null?c:[];c=a.participants;for(var g of f.values())c.push(g);return{groupId:a.groupId,senderKey:e,participants:c,pastParticipants:b,admins:a.admins,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function x(a,b,c){var e=new Map(a.senderKey);c.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);e.set(a,!1)});var f=new Set(),g=new Set();for(c of b){b=c.id;var h=c.lid;g.add(String(b));h!=null&&!b.isLid()&&f.add(String(h))}c=(h=(b=a.pastParticipants)==null?void 0:b.filter(function(a){return!g.has(a.jid)}))!=null?h:[];b=a.participants.filter(function(a){return!f.has(a)});for(h of g.values())b.push(h);return{groupId:a.groupId,senderKey:e,participants:b,pastParticipants:c,admins:a.admins,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function y(a,b){return{groupId:a.groupId,senderKey:a.senderKey,participants:a.participants,pastParticipants:b.map(function(a){var b=a.id,c=a.leaveReason;a=a.leaveTs;return{jid:b.toString(),leaveTs:a,leaveReason:c}}),admins:a.admins,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function z(a,b,c,e,f){var g,h=new Map(a.senderKey),i=a.rotateKey;h.forEach(function(a,c){var e=d("WAWebWidFactory").createWid(c),f=b.some(function(a){return a.id.isSameAccount(e)});f&&(i=i||a,h["delete"](c))});i&&h.forEach(function(a,b){h.set(b,!1)});var j=b.map(function(a){a=a.id;return String(a)});f=(f=a.pastParticipants)==null?void 0:f.concat((f=b.map(function(a){return{jid:a.id.toString(),leaveTs:c,leaveReason:a.id.equals(e)?d("WAWebLeaveReasonType").LeaveReason.Left:d("WAWebLeaveReasonType").LeaveReason.Removed}}))!=null?f:[]);!a.rotateKey&&i&&d("WAWebPostSenderKeyExpiredMetric").postSenderKeyExpiredMetric({chatId:a.groupId,deviceCount:a.senderKey.size,expiryReason:d("WAWebWamEnumExpiryReason").EXPIRY_REASON.USER_LEAVE});var k=a.admins.filter(function(a){return!j.includes(a)});g=(g=a.superAdmins)==null?void 0:g.filter(function(a){return!j.includes(a)});var l=a.participants.filter(function(a){return!j.includes(a)});return{groupId:a.groupId,senderKey:h,participants:l,pastParticipants:f,admins:k,superAdmins:g,rotateKey:i,staleType:a.staleType}}function A(a,b,c,e,f){var g,h,i=new Map(a.senderKey),j=a.rotateKey,k=b.map(function(a){return a.id.isLid()?a.id:a.lid}).filter(Boolean);i.forEach(function(a,c){var e=d("WAWebWidFactory").createWid(c);if(e.isLid()&&f!==d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){var g=k.some(function(a){return a.isSameAccount(e)});g&&i["delete"](c);return}if(!e.isLid()&&f===d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){i["delete"](c);return}g=b.some(function(a){return a.id.user===e.user&&a.id.server===e.server});g&&(j=j||a,i["delete"](c))});j&&i.forEach(function(a,b){a=d("WAWebWidFactory").createWid(b);a.isLid()||i.set(b,!1)});var l=b.map(function(a){a=a.id;return String(a)});g=(g=a.pastParticipants)==null?void 0:g.concat((g=b.map(function(a){return{jid:a.id.toString(),leaveTs:c,leaveReason:a.id.equals(e)?d("WAWebLeaveReasonType").LeaveReason.Left:d("WAWebLeaveReasonType").LeaveReason.Removed}}))!=null?g:[]);!a.rotateKey&&j&&d("WAWebPostSenderKeyExpiredMetric").postSenderKeyExpiredMetric({chatId:a.groupId,deviceCount:a.senderKey.size,expiryReason:d("WAWebWamEnumExpiryReason").EXPIRY_REASON.USER_LEAVE});var m=a.admins.filter(function(a){return!l.includes(a)});h=(h=a.superAdmins)==null?void 0:h.filter(function(a){return!l.includes(a)});var n=a.participants;if(f===d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){var o=b.reduce(function(a,b){var c=b.lid;b=b.id;return c==null||b.isLid()?a:a.set(b.toString(),c.toString())},new Map());n=n.map(function(a){var b;return(b=o.get(a))!=null?b:a})}else n=n.filter(function(a){return!l.includes(a)});return{groupId:a.groupId,senderKey:i,participants:n,pastParticipants:g,admins:m,superAdmins:h,rotateKey:j,staleType:a.staleType}}function B(a,b,c,e){c=a.admins;var f=b.map(function(a){a=a.id;return String(a)});if(e===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE)c=a.admins.filter(function(a){return!f.includes(a)});else if(e===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE){var g=new Set(a.admins);f.forEach(function(a){return g.add(a)});c=Array.from(g)}return{groupId:a.groupId,senderKey:a.senderKey,participants:a.participants,pastParticipants:a.pastParticipants,admins:c,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function C(a,b,c,e){var f=a.admins,g=b.map(function(a){a=a.id;return String(a)}),h=new Map(a.senderKey);c!=null&&c.length>0&&c.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);h.set(a,!1)});c=a.participants;if(e===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE){f=a.admins.filter(function(a){return!g.includes(a)});var i=f.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))});if(!i){var j=b.reduce(function(a,b){var c=b.lid;b=b.id;return c==null||b.isLid()?a:a.set(b.toString(),c.toString())},new Map());c=c.map(function(a){var b;return(b=j.get(a))!=null?b:a})}}else if(e===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE){var k=b.reduce(function(a,b){var c=b.lid;b=b.id;return c==null||b.isLid()?a:a.set(c.toString(),b.toString())},new Map());f=a.admins.concat(g);c=c.map(function(a){var b;return(b=k.get(a))!=null?b:a})}return{groupId:a.groupId,senderKey:h,participants:c,pastParticipants:a.pastParticipants,admins:f,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function D(a,b,c){var e=a.admins,f=a.participants,g=b.map(function(a){a=a.id;return String(a)});if(c===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE)e=a.admins.filter(function(a){return!g.includes(a)}),f=e;else if(c===d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE){b=g.filter(function(b){return!a.admins.includes(b)});e=a.admins.concat(b);f=e}return{groupId:a.groupId,senderKey:a.senderKey,participants:f,pastParticipants:a.pastParticipants,admins:e,superAdmins:a.superAdmins,rotateKey:a.rotateKey,staleType:a.staleType}}function E(a,b){var c=b.participants;c=c===void 0?[]:c;var e=b.pastParticipants;e=e===void 0?[]:e;var f=b.admins;f=f===void 0?[]:f;var g=b.deviceIds;g=g===void 0?[]:g;var h=new Map();g.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);h.has(a)||h.set(a,!1)});return{groupId:a,senderKey:h,participants:c.map(function(a){a=a.id;return String(a)}),pastParticipants:e.map(function(a){var b=a.id,c=a.leaveReason;a=a.leaveTs;return{jid:b.toString(),leaveTs:a,leaveReason:c}}),admins:f.map(String),superAdmins:(g=b.superAdmins)==null?void 0:g.map(String),rotateKey:!1,staleType:c.length===0?d("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT:void 0}}function F(a,b){var c=b.participants,e=b.admins,f=b.superAdmins;b=b.deviceIds;var g=a.rotateKey,h=a.senderKey,i=new Map();b.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);var b=h.get(a);b==null?i.set(a,!1):(i.set(a,b),h["delete"](a))});for(b of h.values())g=g||b;return{groupId:a.groupId,senderKey:i,participants:c.map(function(a){a=a.id;return String(a)}),pastParticipants:a.pastParticipants,admins:e.map(String),superAdmins:f==null?void 0:f.map(String),rotateKey:g}}var G=b("$InternalEnum").Mirrored(["Success","Error"]);function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=G.Error;yield d("WAWebModelStorageUtils").getStorage().lock(["participant","group-metadata"],function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(g){var j=g[0];g=g[1];var k=e?d("WAWebLidMigrationUtils").toLid:d("WAWebLidMigrationUtils").toPn;try{var l=c("WANullthrows")(yield j.get(a.toString()),"missing participant record to migrate"),m=Array.from(l.senderKey.entries());l={admins:l.admins.map(function(a){return c("WANullthrows")(k(d("WAWebWidFactory").createWid(a)),"admin missing a LID-PN mapping").toString()}),participants:l.participants.map(function(a){return c("WANullthrows")(k(d("WAWebWidFactory").createWid(a)),"participant missing a LID-PN mapping").toString()}),senderKey:new Map(m.map(function(a){var b=a[0];a[1];return[J(b,k).toString(),!1]}))};m={isLidAddressingMode:e};yield (h||(h=b("Promise"))).all([j.merge(a.toString(),l),g.merge(a.toString(),m)]);f=G.Success}catch(b){d("WALogger").ERROR(i(),a,b.message)}});return function(a){return g.apply(this,arguments)}}());return f});return I.apply(this,arguments)}function J(a,b){a=d("WAWebWidFactory").createDeviceWid(a);b=c("WANullthrows")(b(d("WAWebWidFactory").toUserWid(a)),"senderkey device missing a LID-PN mapping");return d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,b.server,(b=a.device)!=null?b:d("WAJids").DEFAULT_DEVICE_ID).toString()}function K(a,b){var c=b.participants,e=b.admins,f=b.superAdmins;b=b.deviceIds;var g=a.rotateKey,h=a.senderKey,i=new Map();b.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;if(a.isHosted())return;a=String(a);var b=h.get(a);b==null?i.set(a,!1):(i.set(a,b),h["delete"](a))});for(b of h.entries()){var j=b[0],k=b[1];if(k&&!d("WAWebWidFactory").createWid(j).isLid()){g=!0;break}}return{groupId:a.groupId,senderKey:i,participants:c.map(function(a){a=a.id;return String(a)}),pastParticipants:a.pastParticipants,admins:e.map(String),superAdmins:f==null?void 0:f.map(String),rotateKey:g}}function L(a){var b=a.group;return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(a){a=a[0];return a.merge(String(b),{staleType:d("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT})})}function M(a){var b=a.groupIds;return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(a){a=a[0];return a.bulkCreateOrMerge(b.map(function(a){return{groupId:String(a),staleType:d("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT}}))})}function N(a){var c=a.group,e=a.oldId,f=a.newId,g=String(c);return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(g));if(!b)throw new(d("WAWebDBParticipantTypes").GroupUnSyncedError)("modifyGroupParticipant: group participant info missing");return a.createOrReplace(O(b,e,f))});return function(b){return a.apply(this,arguments)}}())}function O(a,b,c){var e,f=String(b),g=String(c),h=new Map(a.senderKey);c=a.participants.filter(function(a){return a!==f}).concat(g);Array.from(h.keys()).forEach(function(a){var c=d("WAWebWidFactory").createWid(a).user;b.user===c?h["delete"](a):h.set(a,!1)});h.set(g,!1);var i=a.admins.map(function(a){return a===f?g:a});e=(e=a.superAdmins)==null?void 0:e.map(function(a){return a===f?g:a});return babelHelpers["extends"]({},a,{participants:c,senderKey:h,admins:i,superAdmins:e,rotateKey:!0})}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c;a=a.groupWid;a=(yield d("WAWebSchemaParticipant").getParticipantTable().get(String(a)));if(!a)return null;var e=new Set(a.admins),f=new Set(a.superAdmins);b=(b=(b=a.participants)==null?void 0:b.map(function(a){return{id:d("WAWebWidFactory").createWid(a),isAdmin:e.has(a),isSuperAdmin:f.has(a)}}))!=null?b:[];c=(c=(c=a.pastParticipants)==null?void 0:c.map(function(a){var b=a.jid,c=a.leaveTs;a=a.leaveReason;return{id:d("WAWebWidFactory").createWid(b),leaveTs:c,leaveReason:a}}))!=null?c:[];d("WAWebWamGroupMetricCache").cacheGroupMetrics(a);var g=a.deviceSyncComplete!=null&&!a.deviceSyncComplete?d("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT:void 0;return{participants:b,pastParticipants:c,staleType:(b=a.staleType)!=null?b:g,deviceCount:a.senderKey.size}});return Q.apply(this,arguments)}g.updateGroupParticipantTableWithoutDeviceSync=a;g.replaceParticipants=e;g.addPastParticipants=f;g.updateCommunityParticipants=t;g.setDBGroupSuperAdmin=u;g.updateDBParticipants=v;g.addParticipantInfo=w;g.addParticipantInfoIncognitoCag=x;g.removeParticipantInfo=z;g.removeParticipantInfoIncognitoCag=A;g.createParticipantInfo=E;g.replaceParticipantInfo=F;g.AddressingModeMigrationResult=G;g.migrateParticipantInfoAddressingMode=H;g.replaceParticipantInfoIncognitoCag=K;g.markGroupParticipantStale=L;g.bulkMarkGroupParticipantStale=M;g.modifyGroupParticipant=N;g.getGroupParticipant=P}),98);
__d("WAWebWamEnumMismatchOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({INCOMING_GROUP_MESSAGE:1,ACK_OUTGOING_MESSAGE:2,GROUP_NOTIFICATION:3,GROUP_PROFILE_PICTURE_NOTIFICATION:4,IQ_RESPONSES:5});f.MISMATCH_ORIGIN_TYPE=a}),66);
__d("WAWebGroupQueryBridgeOneAlreadyInFlightLogger",["WALogger","WAWebABProps","WAWebWamEnumMismatchOriginType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["lid_migration - ",""]);h=function(){return a};return a}var i=Object.fromEntries(Object.entries(d("WAWebWamEnumMismatchOriginType").MISMATCH_ORIGIN_TYPE).map(function(a){var b=a[0];a=a[1];return[a,b]})),j=function(){function a(){this.$1=new Map()}var b=a.prototype;b.$2=function(a){return(a=this.$1.get(a))!=null?a:0};b.increment=function(a){a=a.toString();var b=this.$2(a)+1;this.$1.set(a,b);return b};b.decrement=function(a){a=a.toString();this.$1.set(a,Math.max(this.$2(a)-1,0))};return a}();function a(a){var c=new j();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){if(!d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes"))return a(b);c.increment(b)>1&&d("WALogger").ERROR(h(),i[e]).sendLogs("GroupLidInfra/one_in_flight_group_info_mismatch");try{e=(yield a(b));c.decrement(b);return e}catch(a){c.decrement(b);throw a}});function f(a,b){return e.apply(this,arguments)}return f}()}g.logDuplicateRequestsWrapper=a}),98);
__d("WAWebHandleMsgCommon",["WACustomError"],(function(a,b,c,d,e,f,g){a={text:"text",media:"media",pay:"pay",poll:"poll",reaction:"reaction",event:"event"};b={ctwa:"ctwa",username:"username"};c={pn:"pn",lid:"lid"};e={creation:"creation",vote:"vote"};f={creation:"creation",response:"response",edit:"edit"};var h={high:"high",low:"low",unknown:"unknown"},i="peer";d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("HSMMismatchError"));var j={send:"send",request:"request",futureproof:"futureproof","request-decline":"request-decline","request-cancel":"request-cancel",invite:"invite"},k="biz_source";g.STANZA_MSG_TYPES=a;g.STANZA_MSG_ORIGIN=b;g.STANZA_MSG_ADDRESSING_MODE=c;g.POLL_TYPES=e;g.EVENT_TYPES=f;g.MSG_VERIFIED_LEVEL=h;g.CATEGORY_PEER=i;g.HsmMismatchError=d;g.PAY_NODE_TYPES=j;g.BIZ_SOURCE_ATTR=k}),98);
__d("WAWebWamEnumAddressingMode",[],(function(a,b,c,d,e,f){a=Object.freeze({PN:1,LID:2});f.ADDRESSING_MODE=a}),66);
__d("WAWebWamEnumIqResponseType",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_PARTICIPANT:1,REMOVE_PARTICIPANT:2,PROMOTE_PARTICIPANT:3,DEMOTE_PARTICIPANT:4});f.IQ_RESPONSE_TYPE=a}),66);
__d("WAWebAddressingModeMismatchWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumIqResponseType","WAWebWamEnumMismatchOriginType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({AddressingModeMismatch:[4750,{iqResponse:[1,d("WAWebWamEnumIqResponseType").IQ_RESPONSE_TYPE],localAddressingMode:[2,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],mismatchOrigin:[6,d("WAWebWamEnumMismatchOriginType").MISMATCH_ORIGIN_TYPE],notificationTag:[3,d("WAWebWamCodegenUtils").TYPES.STRING],serverAddressingMode:[5,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE]},[1,1,1],"regular"]},{AddressingModeMismatch:[]});g.AddressingModeMismatchWamEvent=a}),98);
__d("WAWebWamAddressingModeUtils",["WAWebABProps","WAWebHandleMsgCommon","WAWebWamEnumAddressingMode"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case!0:return d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID;case!1:return d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}}function a(a){return a===d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid?d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID:d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}function b(a){if(!d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes"))return{};return a.isLidAddressingMode==null?{}:{localAddressingMode:h(a.isLidAddressingMode)}}g.getWamAddressingModeFromString=a;g.getAddressingModeMetricsFromGroupMetadata=b}),98);
__d("WAWebWamAddressingModeMismatchReporter",["WAWebABProps","WAWebAddressingModeMismatchWamEvent","WAWebWamAddressingModeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes"))return;new(d("WAWebAddressingModeMismatchWamEvent").AddressingModeMismatchWamEvent)(babelHelpers["extends"]({},a,{localAddressingMode:d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(a.localAddressingMode),serverAddressingMode:d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(a.serverAddressingMode)})).commit()}g.logAddressingModeMismatch=a}),98);
__d("WAWebGroupHandleAddressingModeMismatch",["WALogger","WANullthrows","WAWebApiMembershipApprovalRequestStore","WAWebBackendApi","WAWebDBGroupParticipant","WAWebGroupQueryBridge","WAWebGroupQueryBridgeOneAlreadyInFlightLogger","WAWebHandleMsgCommon","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebWamAddressingModeMismatchReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to migrate pending approvals in "," with local data"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to migrate participants in "," with local data"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Migrating group "," to addressing mode ",""]);j=function(){return a};return a}var k=d("WAWebGroupQueryBridgeOneAlreadyInFlightLogger").logDuplicateRequestsWrapper(d("WAWebGroupQueryBridge").sendQueryGroup);function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(j(),a.toString(),b.serverAddressingMode);d("WAWebWamAddressingModeMismatchReporter").logAddressingModeMismatch(b);var c=b.serverAddressingMode===d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid;yield m(a,c,b);yield o(a,c)});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebDBGroupParticipant").migrateParticipantInfoAddressingMode(a,b));if(e===d("WAWebDBGroupParticipant").AddressingModeMigrationResult.Success){e=(yield d("WAWebDBGroupParticipant").getGroupParticipant({groupWid:a}));d("WAWebBackendApi").frontendFireAndForget("updateGroupAddressingMode",{id:a,isLidAddressingMode:b,groupInfoUpdate:{participants:e==null?void 0:e.participants}})}else d("WALogger").LOG(i(),a.toString()),yield k(a,c.mismatchOrigin)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("WAWebLidMigrationUtils").toAddressingModeFactory(e),g=(yield d("WAWebApiMembershipApprovalRequestStore").getMembershipApprovalRequests(a));if(g.length===0)return;try{var i=g.map(function(a){return babelHelpers["extends"]({},a,{id:c("WANullthrows")(f(a.id)),addedBy:c("WANullthrows")(f(a.addedBy))})});yield d("WAWebModelStorageUtils").getStorage().lock(["pending-membership-approval-request"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebApiMembershipApprovalRequestStore").removeMembershipApprovalRequests(a,g.map(function(a){return a.id})),yield d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a,i)}));d("WAWebBackendApi").frontendFireAndForget("removeMembershipApprovalRequests",{groupId:a,requestIds:g.map(function(a){return a.id})});d("WAWebBackendApi").frontendFireAndForget("addMembershipApprovalRequests",{groupId:a,requests:i})}catch(b){d("WALogger").LOG(h(),a.toString())}});return p.apply(this,arguments)}g.handleAddressingModeMismatch=a}),98);
__d("WAWebGroupQueryBridge",["WALogger","WATypeUtils","WAWebBackendApi","WAWebBackendErrors","WAWebGroupQueryGroupJob","WAWebGroupQueryJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store:GroupMetadata Unexpected server response"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["querying server for groupMetadata of group id ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(i(),a.toLogString()).tags("groups");var b=d("WAWebGroupQueryGroupJob").queryGroupJob(a);try{b=(yield b);if(b==null?void 0:b.id){var c;k(a,b.subject);l(a,(c=b.isLidAddressingMode)!=null?c:!1);return{id:b.id,owner:b.owner,creation:b.creation,subject:b.subject,desc:b.desc,descId:b.descId,descOwner:b.descOwner,descTime:b.descTime,restrict:(c=b.restrict)!=null?c:!1,announce:(c=b.announce)!=null?c:!1,noFrequentlyForwarded:(c=b.noFrequentlyForwarded)!=null?c:!1,ephemeralDuration:(c=b.ephemeralDuration)!=null?c:0,membershipApprovalMode:b.membershipApprovalMode,participants:b.participants,support:(c=b.support)!=null?c:!1,suspended:(c=b.suspended)!=null?c:!1,terminated:(c=b.terminated)!=null?c:!1,parentGroup:b.parentGroup,isParentGroup:(c=b.isParentGroup)!=null?c:!1,isParentGroupClosed:(c=b.isParentGroupClosed)!=null?c:!1,defaultSubgroup:(c=b.defaultSubgroup)!=null?c:!1,generalSubgroup:(c=b.generalSubgroup)!=null?c:!1,incognito:(c=b.incognito)!=null?c:!1,isLidAddressingMode:(c=b.isLidAddressingMode)!=null?c:!1,allowNonAdminSubGroupCreation:b.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:b.generalChatAutoAddDisabled,hiddenSubgroup:(c=b.hiddenSubgroup)!=null?c:!1}}d("WALogger").WARN(h()).devConsole(b)}catch(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError&&b.status>=400)return{id:a,stale:!1};throw b}});return j.apply(this,arguments)}function c(a){return d("WAWebGroupQueryJob").queryGroupInvite(a).then(function(a){return babelHelpers["extends"]({status:200},a)})}function k(a,b){d("WATypeUtils").isString(b)&&d("WAWebBackendApi").frontendFireAndForget("updateGroupSubject",{id:a,subject:b})}function l(a,b){d("WAWebBackendApi").frontendFireAndForget("updateGroupAddressingMode",{id:a,isLidAddressingMode:b})}g.sendQueryGroup=a;g.sendQueryGroupInvite=c;g.updateSubject=k}),98);
__d("WAWeb-curve25519-donna",[],(function $module_WAWeb_curve25519_donna(global,require,requireDynamic,requireLazy,module,exports){var e={},aa={},l;for(l in e)e.hasOwnProperty(l)&&(aa[l]=e[l]);e.read=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);return b.responseText};"undefined"!=typeof arguments&&(e.arguments=arguments);"undefined"!==typeof console?(e.print||(e.print=function(a){}),e.printErr||(e.printErr=function(a){})):e.print||(e.print=function(){});"undefined"===typeof e.setWindowTitle&&(e.setWindowTitle=function(a){document.title=a});function ba(a){eval.call(null,a)}!e.load&&e.read&&(e.load=function(a){ba(e.read(a))});e.print||(e.print=function(){});e.printErr||(e.printErr=e.print);e.arguments||(e.arguments=[]);e.thisProgram||(e.thisProgram="./this.program");e.print=e.print;e.S=e.printErr;e.preRun=[];e.postRun=[];for(l in aa)aa.hasOwnProperty(l)&&(e[l]=aa[l]);var n={cb:function(a){ca=a},Ua:function(){return ca},na:function(){return m},X:function(a){m=a},Aa:function(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===a[a.length-1]?n.H:"i"===a[0]?(a=parseInt(a.substr(1)),assert(0===a%8),a/8):0}},Ta:function(a){return Math.max(n.Aa(a),n.H)},dd:16,Bd:function(a,b){"double"===b||"i64"===b?a&7&&(assert(4===(a&7)),a+=4):assert(0===(a&3));return a},od:function(a,b,c){return c||"i64"!=a&&"double"!=a?a?Math.min(b||(a?n.Ta(a):0),n.H):Math.min(b,8):8},J:function(a,b,c){return c&&c.length?(c.splice||(c=Array.prototype.slice.call(c)),c.splice(0,0,b),e["dynCall_"+a].apply(null,c)):e["dynCall_"+a].call(null,b)},U:[],Ma:function(a){for(var b=0;b<n.U.length;b++)if(!n.U[b])return n.U[b]=a,2*(1+b);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},$a:function(a){n.U[(a-2)/2]=null},M:function(a){n.M.ma||(n.M.ma={}),n.M.ma[a]||(n.M.ma[a]=1,e.S(a))},ha:{},rd:function(a,b){assert(b);n.ha[b]||(n.ha[b]={});var c=n.ha[b];c[a]||(c[a]=function(){return n.J(b,a,arguments)});return c[a]},pd:function(){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},W:function(a){var b=m;m=m+a|0;m=m+15&-16;return b},Ia:function(a){var b=p;p=p+a|0;p=p+15&-16;return b},P:function(a){var b=v;v=v+a|0;v=v+15&-16;(a=v>=w)&&(z("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+w+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 "),a=!0);return a?(v=b,0):b},ea:function(a,b){return Math.ceil(a/(b?b:16))*(b?b:16)},xd:function(a,b,c){return c?+(a>>>0)+4294967296*+(b>>>0):+(a>>>0)+4294967296*+(b|0)},La:8,H:4,ed:0};e.Runtime=n;n.addFunction=n.Ma;n.removeFunction=n.$a;var A=!1,da,fa,ca;function assert(a,b){a||z("Assertion failed: "+b)}function ga(a){var b=e["_"+a];if(!b)try{b=eval("_"+a)}catch(c){}assert(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)");return b}var ha,ia;(function(){function a(a){a=a.toString().match(d).slice(1);return{arguments:a[0],body:a[1],returnValue:a[2]}}var b={stackSave:function(){n.na()},stackRestore:function(){n.X()},arrayToC:function(a){var b=n.W(a.length);ja(a,b);return b},stringToC:function(a){var b=0;null!==a&&void 0!==a&&0!==a&&(b=n.W((a.length<<2)+1),ka(a,b));return b}},c={string:b.stringToC,array:b.arrayToC};ia=function(a,b,d,f,h){a=ga(a);var q=[],y=0;if(f)for(var B=0;B<f.length;B++){var J=c[d[B]];J?(0===y&&(y=n.na()),q[B]=J(f[B])):q[B]=f[B]}d=a.apply(null,q);"string"===b&&(d=la(d));if(0!==y){if(h&&h.async){EmterpreterAsync.hd.push(function(){n.X(y)});return}n.X(y)}return d};var d=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=a(b[h]));ha=function(b,c,d){d=d||[];var h=ga(b);b=d.every(function(a){return"number"===a});var u="string"!==c;if(u&&b)return h;var q=d.map(function(a,b){return"$"+b});c="(function("+q.join(",")+") {";var y=d.length;if(!b){c+="var stack = "+f.stackSave.body+";";for(var B=0;B<y;B++){var J=q[B],ea=d[B];"number"!==ea&&(ea=f[ea+"ToC"],c+="var "+ea.arguments+" = "+J+";",c+=ea.body+";",c+=J+"="+ea.returnValue+";")}}d=a(function(){return h}).returnValue;c+="var ret = "+d+"("+q.join(",")+");";u||(d=a(function(){return la}).returnValue,c+="ret = "+d+"(ret);");b||(c+=f.stackRestore.body.replace("()","(stack)")+";");return eval(c+"return ret})")}})();e.ccall=ia;e.cwrap=ha;function ma(a,b,c){c=c||"i8";"*"===c.charAt(c.length-1)&&(c="i32");switch(c){case"i1":D[a>>0]=b;break;case"i8":D[a>>0]=b;break;case"i16":E[a>>1]=b;break;case"i32":F[a>>2]=b;break;case"i64":fa=[b>>>0,(da=b,1<=+na(da)?0<da?(oa(+pa(da/4294967296),4294967295)|0)>>>0:~~+qa((da-+(~~da>>>0))/4294967296)>>>0:0)];F[a>>2]=fa[0];F[a+4>>2]=fa[1];break;case"float":ra[a>>2]=b;break;case"double":sa[a>>3]=b;break;default:z("invalid type for setValue: "+c)}}e.setValue=ma;function ta(a,b){b=b||"i8";"*"===b.charAt(b.length-1)&&(b="i32");switch(b){case"i1":return D[a>>0];case"i8":return D[a>>0];case"i16":return E[a>>1];case"i32":return F[a>>2];case"i64":return F[a>>2];case"float":return ra[a>>2];case"double":return sa[a>>3];default:z("invalid type for setValue: "+b)}return null}e.getValue=ta;e.ALLOC_NORMAL=0;e.ALLOC_STACK=1;e.ALLOC_STATIC=2;e.ALLOC_DYNAMIC=3;e.ALLOC_NONE=4;function G(a,b,c,d){var f,h;"number"===typeof a?(f=!0,h=a):(f=!1,h=a.length);var g="string"===typeof b?b:null;c=4==c?d:[ua,n.W,n.Ia,n.P][void 0===c?2:c](Math.max(h,g?1:b.length));if(f){d=c;assert(0==(c&3));for(a=c+(h&-4);d<a;d+=4)F[d>>2]=0;for(a=c+h;d<a;)D[d++>>0]=0;return c}if("i8"===g)return a.subarray||a.slice?H.set(a,c):H.set(new Uint8Array(a),c),c;d=0;for(var k,t;d<h;){var r=a[d];"function"===typeof r&&(r=n.sd(r));f=g||b[d];0===f?d++:("i64"==f&&(f="i32"),ma(c+d,r,f),t!==f&&(k=n.Aa(f),t=f),d+=k)}return c}e.allocate=G;e.getMemory=function(a){return va?"undefined"!==typeof wa&&!wa.C||!xa?n.P(a):ua(a):n.Ia(a)};function la(a,b){if(0===b||!a)return"";for(var c=0,d,f=0;;){d=H[a+f>>0];c|=d;if(0==d&&!b)break;f++;if(b&&f==b)break}b||(b=f);d="";if(128>c){for(;0<b;)c=String.fromCharCode.apply(String,H.subarray(a,a+Math.min(b,1024))),d=d?d+c:c,a+=1024,b-=1024;return d}return e.UTF8ToString(a)}e.Pointer_stringify=la;e.AsciiToString=function(a){for(var b="";;){var c=D[a++>>0];if(!c)return b;b+=String.fromCharCode(c)}};e.stringToAscii=function(a,b){return ya(a,b,!1)};function za(a,b){for(var c,d,f,h,g,k,t="";;){c=a[b++];if(!c)return t;c&128?(d=a[b++]&63,192==(c&224)?t+=String.fromCharCode((c&31)<<6|d):(f=a[b++]&63,224==(c&240)?c=(c&15)<<12|d<<6|f:(h=a[b++]&63,240==(c&248)?c=(c&7)<<18|d<<12|f<<6|h:(g=a[b++]&63,248==(c&252)?c=(c&3)<<24|d<<18|f<<12|h<<6|g:(k=a[b++]&63,c=(c&1)<<30|d<<24|f<<18|h<<12|g<<6|k))),65536>c?t+=String.fromCharCode(c):(c-=65536,t+=String.fromCharCode(55296|c>>10,56320|c&1023)))):t+=String.fromCharCode(c)}}e.UTF8ArrayToString=za;e.UTF8ToString=function(a){return za(H,a)};function Aa(a,b,c,d){if(!(0<d))return 0;var f=c;d=c+d-1;for(var h=0;h<a.length;++h){var g=a.charCodeAt(h);55296<=g&&57343>=g&&(g=65536+((g&1023)<<10)|a.charCodeAt(++h)&1023);if(127>=g){if(c>=d)break;b[c++]=g}else{if(2047>=g){if(c+1>=d)break;b[c++]=192|g>>6}else{if(65535>=g){if(c+2>=d)break;b[c++]=224|g>>12}else{if(2097151>=g){if(c+3>=d)break;b[c++]=240|g>>18}else{if(67108863>=g){if(c+4>=d)break;b[c++]=248|g>>24}else{if(c+5>=d)break;b[c++]=252|g>>30;b[c++]=128|g>>24&63}b[c++]=128|g>>18&63}b[c++]=128|g>>12&63}b[c++]=128|g>>6&63}b[c++]=128|g&63}}b[c]=0;return c-f}e.stringToUTF8Array=Aa;e.stringToUTF8=function(a,b,c){return Aa(a,H,b,c)};function Ba(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);127>=d?++b:b=2047>=d?b+2:65535>=d?b+3:2097151>=d?b+4:67108863>=d?b+5:b+6}return b}e.lengthBytesUTF8=Ba;e.UTF16ToString=function(a){for(var b=0,c="";;){var d=E[a+2*b>>1];if(0==d)return c;++b;c+=String.fromCharCode(d)}};e.stringToUTF16=function(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var f=0;f<c;++f)E[b>>1]=a.charCodeAt(f),b+=2;E[b>>1]=0;return b-d};e.lengthBytesUTF16=function(a){return 2*a.length};e.UTF32ToString=function(a){for(var b=0,c="";;){var d=F[a+4*b>>2];if(0==d)return c;++b;65536<=d?(d=d-65536,c+=String.fromCharCode(55296|d>>10,56320|d&1023)):c+=String.fromCharCode(d)}};e.stringToUTF32=function(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var f=0;f<a.length;++f){var h=a.charCodeAt(f);if(55296<=h&&57343>=h)var g=a.charCodeAt(++f),h=65536+((h&1023)<<10)|g&1023;F[b>>2]=h;b+=4;if(b+4>c)break}F[b>>2]=0;return b-d};e.lengthBytesUTF32=function(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b};function Ca(a){function b(c,d,f){d=d||Infinity;var h="",g=[],q;if("N"===a[k]){k++;"K"===a[k]&&k++;for(q=[];"E"!==a[k];)if("S"===a[k]){k++;var x=a.indexOf("_",k);q.push(r[a.substring(k,x)||0]||"?");k=x+1}else if("C"===a[k])q.push(q[q.length-1]),k+=2;else{var x=parseInt(a.substr(k)),Q=x.toString().length;if(!x||!Q){k--;break}var Bb=a.substr(k+Q,x);q.push(Bb);r.push(Bb);k+=Q+x}k++;q=q.join("::");d--;if(0===d)return c?[q]:q}else(("K"===a[k]||u&&"L"===a[k])&&k++,x=parseInt(a.substr(k)))&&(Q=x.toString().length,q=a.substr(k+Q,x),k+=Q+x);u=!1;"I"===a[k]?(k++,x=b(!0),Q=b(!0,1,!0),h+=Q[0]+" "+q+"<"+x.join(", ")+">"):h=q;a:for(;k<a.length&&0<d--;)if(q=a[k++],q in t)g.push(t[q]);else switch(q){case"P":g.push(b(!0,1,!0)[0]+"*");break;case"R":g.push(b(!0,1,!0)[0]+"&");break;case"L":k++;x=a.indexOf("E",k)-k;g.push(a.substr(k,x));k+=x+2;break;case"A":x=parseInt(a.substr(k));k+=x.toString().length;if("_"!==a[k])throw"?";k++;g.push(b(!0,1,!0)[0]+" ["+x+"]");break;case"E":break a;default:h+="?"+q;break a}f||1!==g.length||"void"!==g[0]||(g=[]);return c?(h&&g.push(h+"?"),g):h+("("+g.join(", ")+")")}var c=!!e.___cxa_demangle;if(c)try{var d=ua(a.length);ka(a.substr(1),d);var f=ua(4),h=e.___cxa_demangle(d,0,0,f);if(0===ta(f,"i32")&&h)return la(h)}catch(g){}finally{d&&Da(d),f&&Da(f),h&&Da(h)}var k=3,t={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},r=[],u=!0,d=a;try{if("Object._main"==a||"_main"==a)return"main()";"number"===typeof a&&(a=la(a));if("_"!==a[0]||"_"!==a[1]||"Z"!==a[2])return a;switch(a[3]){case"n":return"operator new()";case"d":return"operator delete()"}d=b()}catch(q){d+="?"}0<=d.indexOf("?")&&!c&&n.M("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling");return d}function Ea(){return Fa().replace(/__Z[\w\d_]+/g,function(a){var b=Ca(a);return a===b?a:a+" ["+b+"]"})}function Fa(){var a=Error();if(!a.stack){try{throw Error(0)}catch(b){a=b}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}e.stackTrace=function(){return Ea()};function Ga(){var a=v;0<a%4096&&(a+=4096-a%4096);return a}for(var D,H,E,Ha,F,Ia,ra,sa,Ja=0,p=0,va=!1,Ka=0,m=0,La=0,Ma=0,v=0,Na=e.TOTAL_STACK||5242880,w=e.TOTAL_MEMORY||16777216,I=65536;I<w||I<2*Na;)I=16777216>I?2*I:I+16777216;I!==w&&(w=I);assert("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer;buffer=new ArrayBuffer(w);D=new Int8Array(buffer);E=new Int16Array(buffer);F=new Int32Array(buffer);H=new Uint8Array(buffer);Ha=new Uint16Array(buffer);Ia=new Uint32Array(buffer);ra=new Float32Array(buffer);sa=new Float64Array(buffer);F[0]=255;assert(255===H[0]&&0===H[3],"Typed arrays 2 must be run on a little-endian system");e.HEAP=void 0;e.buffer=buffer;e.HEAP8=D;e.HEAP16=E;e.HEAP32=F;e.HEAPU8=H;e.HEAPU16=Ha;e.HEAPU32=Ia;e.HEAPF32=ra;e.HEAPF64=sa;function Oa(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.Qa;"number"===typeof c?void 0===b.T?n.J("v",c):n.J("vi",c,[b.T]):c(void 0===b.T?null:b.T)}}}var Pa=[],Qa=[],Ra=[],K=[],Sa=[],xa=!1;function Ta(a){Pa.unshift(a)}e.addOnPreRun=Ta;e.addOnInit=function(a){Qa.unshift(a)};e.addOnPreMain=function(a){Ra.unshift(a)};e.addOnExit=function(a){K.unshift(a)};function Ua(a){Sa.unshift(a)}e.addOnPostRun=Ua;function Va(a,b,c){c=Array(0<c?c:Ba(a)+1);a=Aa(a,c,0,c.length);b&&(c.length=a);return c}e.intArrayFromString=Va;e.intArrayToString=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];255<d&&(d&=255);b.push(String.fromCharCode(d))}return b.join("")};function ka(a,b,c){a=Va(a,c);for(c=0;c<a.length;)D[b+c>>0]=a[c],c+=1}e.writeStringToMemory=ka;function ja(a,b){for(var c=0;c<a.length;c++)D[b++>>0]=a[c]}e.writeArrayToMemory=ja;function ya(a,b,c){for(var d=0;d<a.length;++d)D[b++>>0]=a.charCodeAt(d);c||(D[b>>0]=0)}e.writeAsciiToMemory=ya;Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16)|0});Math.td=Math.imul;Math.clz32||(Math.clz32=function(a){a=a>>>0;for(var b=0;32>b;b++)if(a&1<<31-b)return b;return 32});Math.kd=Math.clz32;var na=Math.abs,qa=Math.ceil,pa=Math.floor,oa=Math.min,L=0,Wa=null,Xa=null;function Ya(){L++,e.monitorRunDependencies&&e.monitorRunDependencies(L)}e.addRunDependency=Ya;function Za(){L--;e.monitorRunDependencies&&e.monitorRunDependencies(L);if(0==L&&(null!==Wa&&(clearInterval(Wa),Wa=null),Xa)){var a=Xa;Xa=null;a()}}e.removeRunDependency=Za;e.preloadedImages={};e.preloadedAudios={};Ja=8;p=Ja+1696;Qa.push();G([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,164,2,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",4,n.La);var $a=n.ea(G(12,"i8",2),8);assert(0==$a%8);e._bitshift64Ashr=ab;e._i64Subtract=bb;e._i64Add=cb;e._memset=db;function eb(a,b){K.push(function(){n.J("vi",a,[b])}),eb.level=K.length}e._bitshift64Lshr=fb;e._bitshift64Shl=gb;var M={G:1,B:2,Qc:3,Nb:4,F:5,sa:6,gb:7,kc:8,Z:9,ub:10,oa:11,$c:11,Ka:12,Y:13,Gb:14,wc:15,$:16,pa:17,ad:18,ba:19,qa:20,N:21,u:22,fc:23,Ja:24,O:25,Xc:26,Hb:27,sc:28,da:29,Nc:30,Zb:31,Gc:32,Db:33,Kc:34,oc:42,Kb:43,vb:44,Qb:45,Rb:46,Sb:47,Yb:48,Yc:49,ic:50,Pb:51,Ab:35,lc:37,mb:52,pb:53,bd:54,gc:55,qb:56,rb:57,Bb:35,sb:59,uc:60,jc:61,Uc:62,tc:63,pc:64,qc:65,Mc:66,mc:67,jb:68,Rc:69,wb:70,Hc:71,ac:72,Eb:73,ob:74,Bc:76,nb:77,Lc:78,Tb:79,Ub:80,Xb:81,Wb:82,Vb:83,vc:38,ra:39,bc:36,aa:40,Cc:95,Fc:96,zb:104,hc:105,kb:97,Jc:91,zc:88,rc:92,Oc:108,yb:111,hb:98,xb:103,ec:101,cc:100,Vc:110,Ib:112,Jb:113,Mb:115,lb:114,Cb:89,$b:90,Ic:93,Pc:94,ib:99,dc:102,Ob:106,xc:107,Wc:109,Zc:87,Fb:122,Sc:116,Ac:95,nc:123,Lb:84,Dc:75,tb:125,yc:131,Ec:130,Tc:86},hb={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"};function ib(a){e.___errno_location&&(F[e.___errno_location()>>2]=a);return a}function jb(a,b){for(var c=0,d=a.length-1;0<=d;d--){var f=a[d];"."===f?a.splice(d,1):".."===f?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function N(a){var b="/"===a.charAt(0),c="/"===a.substr(-1);(a=jb(a.split("/").filter(function(a){return!!a}),!b).join("/"))||b||(a=".");a&&c&&(a+="/");return(b?"/":"")+a}function kb(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);a=b[0];b=b[1];if(!a&&!b)return".";b&&(b=b.substr(0,b.length-1));return a+b}function lb(a){if("/"===a)return"/";var b=a.lastIndexOf("/");return-1===b?a:a.substr(b+1)}function mb(){for(var a="",b=!1,c=arguments.length-1;-1<=c&&!b;c--){b=0<=c?arguments[c]:"/";if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";a=b+"/"+a;b="/"===b.charAt(0)}a=jb(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."}var nb=[];function ob(a,b){nb[a]={input:[],output:[],L:b},pb(a,qb)}var qb={open:function(a){var b=nb[a.g.rdev];if(!b)throw new O(M.ba);a.tty=b;a.seekable=!1},close:function(a){a.tty.L.flush(a.tty)},flush:function(a){a.tty.L.flush(a.tty)},read:function(a,b,c,d){if(!a.tty||!a.tty.L.Ba)throw new O(M.sa);for(var f=0,h=0;h<d;h++){var g;try{g=a.tty.L.Ba(a.tty)}catch(k){throw new O(M.F)}if(void 0===g&&0===f)throw new O(M.oa);if(null===g||void 0===g)break;f++;b[c+h]=g}f&&(a.g.timestamp=Date.now());return f},write:function(a,b,c,d){if(!a.tty||!a.tty.L.ja)throw new O(M.sa);for(var f=0;f<d;f++)try{a.tty.L.ja(a.tty,b[c+f])}catch(h){throw new O(M.F)}d&&(a.g.timestamp=Date.now());return f}},rb={Ba:function(a){if(!a.input.length){var b=null;"undefined"!=typeof window&&"function"==typeof window.prompt?(b=window.prompt("Input: "),null!==b&&(b+="\n")):"function"==typeof readline&&(b=readline(),null!==b&&(b+="\n"));if(!b)return null;a.input=Va(b,!0)}return a.input.shift()},ja:function(a,b){null===b||10===b?(e.print(za(a.output,0)),a.output=[]):0!=b&&a.output.push(b)},flush:function(a){a.output&&0<a.output.length&&(e.print(za(a.output,0)),a.output=[])}},sb={ja:function(a,b){null===b||10===b?(e.printErr(za(a.output,0)),a.output=[]):0!=b&&a.output.push(b)},flush:function(a){a.output&&0<a.output.length&&(e.printErr(za(a.output,0)),a.output=[])}},P={q:null,A:function(){return P.createNode(null,"/",16895,0)},createNode:function(a,b,c,d){if(24576===(c&61440)||4096===(c&61440))throw new O(M.G);P.q||(P.q={dir:{g:{D:P.k.D,p:P.k.p,lookup:P.k.lookup,V:P.k.V,rename:P.k.rename,unlink:P.k.unlink,rmdir:P.k.rmdir,readdir:P.k.readdir,symlink:P.k.symlink},stream:{I:P.n.I}},file:{g:{D:P.k.D,p:P.k.p},stream:{I:P.n.I,read:P.n.read,write:P.n.write,ta:P.n.ta,Ea:P.n.Ea,Ga:P.n.Ga}},link:{g:{D:P.k.D,p:P.k.p,readlink:P.k.readlink},stream:{}},va:{g:{D:P.k.D,p:P.k.p},stream:tb}});c=ub(a,b,c,d);16384===(c.mode&61440)?(c.k=P.q.dir.g,c.n=P.q.dir.stream,c.e={}):32768===(c.mode&61440)?(c.k=P.q.file.g,c.n=P.q.file.stream,c.o=0,c.e=null):40960===(c.mode&61440)?(c.k=P.q.link.g,c.n=P.q.link.stream):8192===(c.mode&61440)&&(c.k=P.q.va.g,c.n=P.q.va.stream);c.timestamp=Date.now();a&&(a.e[b]=c);return c},Sa:function(a){if(a.e&&a.e.subarray){for(var b=[],c=0;c<a.o;++c)b.push(a.e[c]);return b}return a.e},qd:function(a){return a.e?a.e.subarray?a.e.subarray(0,a.o):new Uint8Array(a.e):new Uint8Array},ya:function(a,b){a.e&&a.e.subarray&&b>a.e.length&&(a.e=P.Sa(a),a.o=a.e.length);if(!a.e||a.e.subarray){var c=a.e?a.e.buffer.byteLength:0;c>=b||(b=Math.max(b,c*(1048576>c?2:1.125)|0),0!=c&&(b=Math.max(b,256)),c=a.e,a.e=new Uint8Array(b),0<a.o&&a.e.set(c.subarray(0,a.o),0))}else for(!a.e&&0<b&&(a.e=[]);a.e.length<b;)a.e.push(0)},ab:function(a,b){if(a.o!=b)if(0==b)a.e=null,a.o=0;else{if(!a.e||a.e.subarray){var c=a.e;a.e=new Uint8Array(new ArrayBuffer(b));c&&a.e.set(c.subarray(0,Math.min(b,a.o)))}else if(a.e||(a.e=[]),a.e.length>b)a.e.length=b;else for(;a.e.length<b;)a.e.push(0);a.o=b}},k:{D:function(a){var b={};b.dev=8192===(a.mode&61440)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;16384===(a.mode&61440)?b.size=4096:32768===(a.mode&61440)?b.size=a.o:40960===(a.mode&61440)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.Pa=4096;b.blocks=Math.ceil(b.size/b.Pa);return b},p:function(a,b){void 0!==b.mode&&(a.mode=b.mode),void 0!==b.timestamp&&(a.timestamp=b.timestamp),void 0!==b.size&&P.ab(a,b.size)},lookup:function(){throw vb[M.B]},V:function(a,b,c,d){return P.createNode(a,b,c,d)},rename:function(a,b,c){if(16384===(a.mode&61440)){var d;try{d=wb(b,c)}catch(f){}if(d)for(var h in d.e)throw new O(M.ra)}delete a.parent.e[a.name];a.name=c;b.e[c]=a;a.parent=b},unlink:function(a,b){delete a.e[b]},rmdir:function(a,b){var c=wb(a,b),d;for(d in c.e)throw new O(M.ra);delete a.e[b]},readdir:function(a){var b=[".",".."],c;for(c in a.e)a.e.hasOwnProperty(c)&&b.push(c);return b},symlink:function(a,b,c){a=P.createNode(a,b,41471,0);a.link=c;return a},readlink:function(a){if(40960!==(a.mode&61440))throw new O(M.u);return a.link}},n:{read:function(a,b,c,d,f){var h=a.g.e;if(f>=a.g.o)return 0;a=Math.min(a.g.o-f,d);assert(0<=a);if(8<a&&h.subarray)b.set(h.subarray(f,f+a),c);else for(d=0;d<a;d++)b[c+d]=h[f+d];return a},write:function(a,b,c,d,f,h){if(!d)return 0;a=a.g;a.timestamp=Date.now();if(b.subarray&&(!a.e||a.e.subarray)){if(h)return a.e=b.subarray(c,c+d),a.o=d;if(0===a.o&&0===f)return a.e=new Uint8Array(b.subarray(c,c+d)),a.o=d;if(f+d<=a.o)return a.e.set(b.subarray(c,c+d),f),d}P.ya(a,f+d);if(a.e.subarray&&b.subarray)a.e.set(b.subarray(c,c+d),f);else for(h=0;h<d;h++)a.e[f+h]=b[c+h];a.o=Math.max(a.o,f+d);return d},I:function(a,b,c){1===c?b+=a.position:2===c&&32768===(a.g.mode&61440)&&(b+=a.g.o);if(0>b)throw new O(M.u);return b},ta:function(a,b,c){P.ya(a.g,b+c),a.g.o=Math.max(a.g.o,b+c)},Ea:function(a,b,c,d,f,h,g){if(32768!==(a.g.mode&61440))throw new O(M.ba);c=a.g.e;if(g&2||c.buffer!==b&&c.buffer!==b.buffer){(0<f||f+d<a.g.o)&&(c.subarray?c=c.subarray(f,f+d):c=Array.prototype.slice.call(c,f,f+d));a=!0;d=ua(d);if(!d)throw new O(M.Ka);b.set(c,d)}else a=!1,d=c.byteOffset;return{Cd:d,gd:a}},Ga:function(a,b,c,d,f){if(32768!==(a.g.mode&61440))throw new O(M.ba);if(f&2)return 0;P.n.write(a,b,0,d,c,!1);return 0}}};G(1,"i32*",2);G(1,"i32*",2);G(1,"i32*",2);var xb=null,yb=[null],zb=[],Ab=1,R=null,Cb=!0,S={},O=null,vb={};function T(a,b){a=mb("/",a);b=b||{};if(!a)return{path:"",g:null};var c={za:!0,ka:0},d;for(d in c)void 0===b[d]&&(b[d]=c[d]);if(8<b.ka)throw new O(M.aa);var c=jb(a.split("/").filter(function(a){return!!a}),!1),f=xb;d="/";for(var h=0;h<c.length;h++){var g=h===c.length-1;if(g&&b.parent)break;f=wb(f,c[h]);d=N(d+"/"+c[h]);f.R&&(!g||g&&b.za)&&(f=f.R.root);if(!g||b.ga)for(g=0;40960===(f.mode&61440);)if(f=Db(d),d=mb(kb(d),f),f=T(d,{ka:b.ka}).g,40<g++)throw new O(M.aa)}return{path:d,g:f}}function U(a){for(var b;;){if(a===a.parent)return a=a.A.Fa,b?"/"!==a[a.length-1]?a+"/"+b:a+b:a;b=b?a.name+"/"+b:a.name;a=a.parent}}function Eb(a,b){for(var c=0,d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%R.length}function Fb(a){var b=Eb(a.parent.id,a.name);a.K=R[b];R[b]=a}function wb(a,b){var c;if(c=(c=Gb(a,"x"))?c:a.k.lookup?0:M.Y)throw new O(c,a);for(c=R[Eb(a.id,b)];c;c=c.K){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return a.k.lookup(a,b)}function ub(a,b,c,d){Hb||(Hb=function(a,b,c,d){a||(a=this),this.parent=a,this.A=a.A,this.R=null,this.id=Ab++,this.name=b,this.mode=c,this.k={},this.n={},this.rdev=d},Hb.prototype={},Object.defineProperties(Hb.prototype,{read:{get:function(){return 365===(this.mode&365)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(a){a?this.mode|=146:this.mode&=-147}},Xa:{get:function(){return 16384===(this.mode&61440)}},Ca:{get:function(){return 8192===(this.mode&61440)}}}));a=new Hb(a,b,c,d);Fb(a);return a}var Ib={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Gb(a,b){if(Cb)return 0;if(-1===b.indexOf("r")||a.mode&292){if(-1!==b.indexOf("w")&&!(a.mode&146)||-1!==b.indexOf("x")&&!(a.mode&73))return M.Y}else return M.Y;return 0}function Jb(a,b){try{return wb(a,b),M.pa}catch(c){}return Gb(a,"wx")}function Kb(){var a;a=4096;for(var b=0;b<=a;b++)if(!zb[b])return b;throw new O(M.Ja)}function Lb(a){Mb||(Mb=function(){},Mb.prototype={},Object.defineProperties(Mb.prototype,{object:{get:function(){return this.g},set:function(a){this.g=a}},vd:{get:function(){return 1!==(this.flags&2097155)}},wd:{get:function(){return 0!==(this.flags&2097155)}},ud:{get:function(){return this.flags&1024}}}));var b=new Mb,c;for(c in a)b[c]=a[c];a=b;b=Kb();a.fd=b;return zb[b]=a}var tb={open:function(a){a.n=yb[a.g.rdev].n,a.n.open&&a.n.open(a)},I:function(){throw new O(M.da)}};function pb(a,b){yb[a]={n:b}}function Nb(a,b){var c="/"===b,d=!b,f;if(c&&xb)throw new O(M.$);if(!c&&!d){f=T(b,{za:!1});b=f.path;f=f.g;if(f.R)throw new O(M.$);if(16384!==(f.mode&61440))throw new O(M.qa)}var d={type:a,Ad:{},Fa:b,Ya:[]},h=a.A(d);h.A=d;d.root=h;c?xb=h:f&&(f.R=d,f.A&&f.A.Ya.push(d))}function Ob(a,b,c){var d=T(a,{parent:!0}).g;a=lb(a);if(!a||"."===a||".."===a)throw new O(M.u);var f=Jb(d,a);if(f)throw new O(f);if(!d.k.V)throw new O(M.G);return d.k.V(d,a,b,c)}function Pb(a,b){b=(void 0!==b?b:438)&4095;b|=32768;return Ob(a,b,0)}function V(a,b){b=(void 0!==b?b:511)&1023;b|=16384;return Ob(a,b,0)}function Qb(a,b,c){"undefined"===typeof c&&(c=b,b=438);return Ob(a,b|8192,c)}function Rb(a,b){if(!mb(a))throw new O(M.B);var c=T(b,{parent:!0}).g;if(!c)throw new O(M.B);var d=lb(b),f=Jb(c,d);if(f)throw new O(f);if(!c.k.symlink)throw new O(M.G);return c.k.symlink(c,d,a)}function Db(a){a=T(a).g;if(!a)throw new O(M.B);if(!a.k.readlink)throw new O(M.u);return mb(U(a.parent),a.k.readlink(a))}function Sb(a,b){var c;"string"===typeof a?c=T(a,{ga:!0}).g:c=a;if(!c.k.p)throw new O(M.G);c.k.p(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})}function Tb(a,b){var c;if(""===a)throw new O(M.B);var d;if("string"===typeof b){if(d=Ib[b],"undefined"===typeof d)throw Error("Unknown file open mode: "+b)}else d=b;b=d;c=b&64?("undefined"===typeof c?438:c)&4095|32768:0;var f;if("object"===typeof a)f=a;else{a=N(a);try{f=T(a,{ga:!(b&131072)}).g}catch(h){}}d=!1;if(b&64)if(f){if(b&128)throw new O(M.pa)}else f=Ob(a,c,0),d=!0;if(!f)throw new O(M.B);8192===(f.mode&61440)&&(b&=-513);if(b&65536&&16384!==(f.mode&61440))throw new O(M.qa);if(!d&&(f?40960===(f.mode&61440)?c=M.aa:16384===(f.mode&61440)&&(0!==(b&2097155)||b&512)?c=M.N:(c=["r","w","rw"][b&3],b&512&&(c+="w"),c=Gb(f,c)):c=M.B,c))throw new O(c);if(b&512){c=f;var g;"string"===typeof c?g=T(c,{ga:!0}).g:g=c;if(!g.k.p)throw new O(M.G);if(16384===(g.mode&61440))throw new O(M.N);if(32768!==(g.mode&61440))throw new O(M.u);if(c=Gb(g,"w"))throw new O(c);g.k.p(g,{size:0,timestamp:Date.now()})}b&=-641;f=Lb({g:f,path:U(f),flags:b,seekable:!0,position:0,n:f.n,eb:[],error:!1});f.n.open&&f.n.open(f);!e.logReadFiles||b&1||(Ub||(Ub={}),a in Ub||(Ub[a]=1,e.printErr("read file: "+a)));try{S.onOpenFile&&(g=0,1!==(b&2097155)&&(g|=1),0!==(b&2097155)&&(g|=2),S.onOpenFile(a,g))}catch(k){}return f}function Vb(a){a.ia&&(a.ia=null);try{a.n.close&&a.n.close(a)}catch(b){throw b}finally{zb[a.fd]=null}}function Wb(a,b,c){if(!a.seekable||!a.n.I)throw new O(M.da);a.position=a.n.I(a,b,c);a.eb=[]}function Xb(a,b,c,d,f,h){if(0>d||0>f)throw new O(M.u);if(0===(a.flags&2097155))throw new O(M.Z);if(16384===(a.g.mode&61440))throw new O(M.N);if(!a.n.write)throw new O(M.u);a.flags&1024&&Wb(a,0,2);var g=!0;if("undefined"===typeof f)f=a.position,g=!1;else if(!a.seekable)throw new O(M.da);b=a.n.write(a,b,c,d,f,h);g||(a.position+=b);try{a.path&&S.onWriteToFile&&S.onWriteToFile(a.path)}catch(k){}return b}function Yb(){O||(O=function(a,b){this.g=b,this.bb=function(a){this.Q=a;for(var b in M)if(M[b]===a){this.code=b;break}},this.bb(a),this.message=hb[a]},O.prototype=Error(),O.prototype.constructor=O,[M.B].forEach(function(a){vb[a]=new O(a),vb[a].stack="<generic error, no stack>"}))}var Zb;function $b(a,b){var c=0;a&&(c|=365);b&&(c|=146);return c}function ac(a,b,c,d){a=N(("string"===typeof a?a:U(a))+"/"+b);return Pb(a,$b(c,d))}function bc(a,b,c,d,f,h){a=b?N(("string"===typeof a?a:U(a))+"/"+b):a;d=$b(d,f);f=Pb(a,d);if(c){if("string"===typeof c){a=Array(c.length);b=0;for(var g=c.length;b<g;++b)a[b]=c.charCodeAt(b);c=a}Sb(f,d|146);a=Tb(f,"w");Xb(a,c,0,c.length,0,h);Vb(a);Sb(f,d)}return f}function W(a,b,c,d){a=N(("string"===typeof a?a:U(a))+"/"+b);b=$b(!!c,!!d);W.Da||(W.Da=64);var f=W.Da++<<8|0;pb(f,{open:function(a){a.seekable=!1},close:function(){d&&d.buffer&&d.buffer.length&&d(10)},read:function(a,b,d,f){for(var r=0,u=0;u<f;u++){var q;try{q=c()}catch(y){throw new O(M.F)}if(void 0===q&&0===r)throw new O(M.oa);if(null===q||void 0===q)break;r++;b[d+u]=q}r&&(a.g.timestamp=Date.now());return r},write:function(a,b,c,f){for(var r=0;r<f;r++)try{d(b[c+r])}catch(u){throw new O(M.F)}f&&(a.g.timestamp=Date.now());return r}});return Qb(a,b,f)}function cc(a){if(a.Ca||a.Xa||a.link||a.e)return!0;var b=!0;if("undefined"!==typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(e.read)try{a.e=Va(e.read(a.url),!0),a.o=a.e.length}catch(c){b=!1}else throw Error("Cannot load without read() or XMLHttpRequest.");b||ib(M.F);return b}var dc={},Hb,Mb,Ub,ec=0;function X(){ec+=4;return F[ec-4>>2]}function fc(){var a;a=X();a=zb[a];if(!a)throw new O(M.Z);return a}function wa(a){wa.C||(v=Ga(),wa.C=!0,assert(n.P),wa.Ra=n.P,n.P=function(){z("cannot dynamically allocate, sbrk now has control")});var b=v;return 0==a||wa.Ra(a)?b:4294967295}e._memcpy=gc;function hc(a,b){ic=a;jc=b;if(!kc)return 1;if(0==a)Y=function(){setTimeout(lc,b)},mc="timeout";else if(1==a)Y=function(){nc(lc)},mc="rAF";else if(2==a){if(!window.setImmediate){var c=[];window.addEventListener("message",function(a){a.source===window&&"__emcc"===a.data&&(a.stopPropagation(),c.shift()())},!0);window.setImmediate=function(a){c.push(a),window.postMessage("__emcc","*")}}Y=function(){window.setImmediate(lc)};mc="immediate"}return 0}function oc(a,b,c,d,f){e.noExitRuntime=!0;assert(!kc,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.");kc=a;pc=d;var h=qc;lc=function(){if(!A)if(0<rc.length){var b=Date.now(),c=rc.shift();c.Qa(c.T);if(sc){var f=sc,r=0==f%1?f-1:Math.floor(f);sc=c.ld?r:(8*f+(r+.5))/9}tc();setTimeout(lc,0)}else h<qc||(uc=uc+1|0,1==ic&&1<jc&&0!=uc%jc?Y():("timeout"===mc&&e.fa&&(e.S("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),mc=""),vc(function(){"undefined"!==typeof d?n.J("vi",a,[d]):n.J("v",a)}),h<qc||("object"===typeof SDL&&SDL.audio&&SDL.audio.Za&&SDL.audio.Za(),Y())))};f||(b&&0<b?hc(0,1e3/b):hc(1,1),Y());if(c)throw"SimulateInfiniteLoop"}var Y=null,mc="",qc=0,kc=null,pc=0,ic=0,jc=0,uc=0,rc=[];function tc(){if(e.setStatus){var a=e.statusMessage||"Please wait...",b=sc,c=wc.nd;b?b<c?e.setStatus(a+" ("+(c-b)+"/"+c+")"):e.setStatus(a):e.setStatus("")}}function vc(a){if(!(A||e.preMainLoop&&!1===e.preMainLoop())){try{a()}catch(b){if(b instanceof xc)return;b&&"object"===typeof b&&b.stack&&e.S("exception thrown: "+[b,b.stack]);throw b}e.postMainLoop&&e.postMainLoop()}}var wc={},lc,sc,yc=!1,zc=!1,Ac=[];function Bc(){function a(){zc=document.pointerLockElement===c||document.mozPointerLockElement===c||document.webkitPointerLockElement===c||document.msPointerLockElement===c}e.preloadPlugins||(e.preloadPlugins=[]);if(!Cc){Cc=!0;try{Dc=!0}catch(b){Dc=!1,!1}Ec="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Dc?null:!1;Fc="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0;e.Ha||"undefined"!==typeof Fc||(!1,e.Ha=!0);e.preloadPlugins.push({canHandle:function(a){return!e.Ha&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},handle:function(a,b,c,g){var k=null;if(Dc)try{k=new Blob([a],{type:Gc(b)}),k.size!==a.length&&(k=new Blob([new Uint8Array(a).buffer],{type:Gc(b)}))}catch(t){n.M("Blob constructor present but fails: "+t+"; falling back to blob builder")}k||(k=new Ec,k.append(new Uint8Array(a).buffer),k=k.getBlob());var r=Fc.createObjectURL(k),u=new Image;u.onload=function(){assert(u.complete,"Image "+b+" could not be decoded");var g=document.createElement("canvas");g.width=u.width;g.height=u.height;g.getContext("2d").drawImage(u,0,0);e.preloadedImages[b]=g;Fc.revokeObjectURL(r);c&&c(a)};u.onerror=function(){g&&g()};u.src=r}});e.preloadPlugins.push({canHandle:function(a){return!e.zd&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(a,b,c,g){function k(g){r||(r=!0,e.preloadedAudios[b]=g,c&&c(a))}function t(){r||(r=!0,e.preloadedAudios[b]=new Audio,g&&g())}var r=!1;if(Dc){try{var u=new Blob([a],{type:Gc(b)})}catch(q){return t()}var u=Fc.createObjectURL(u),y=new Audio;y.addEventListener("canplaythrough",function(){k(y)},!1);y.onerror=function(){if(!r){for(var c="",h=0,g=0,q=0;q<a.length;q++)for(h=h<<8|a[q],g+=8;6<=g;)var t=h>>g-6&63,g=g-6,c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t];2==g?(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(h&3)<<4],c+="=="):4==g&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(h&15)<<2],c+="=");y.src="data:audio/x-"+b.substr(-3)+";base64,"+c;k(y)}};y.src=u;Hc(function(){k(y)})}else return t()}});var c=e.canvas;c&&(c.la=c.requestPointerLock||c.mozRequestPointerLock||c.webkitRequestPointerLock||c.msRequestPointerLock||function(){},c.wa=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},c.wa=c.wa.bind(document),document.addEventListener("pointerlockchange",a,!1),document.addEventListener("mozpointerlockchange",a,!1),document.addEventListener("webkitpointerlockchange",a,!1),document.addEventListener("mspointerlockchange",a,!1),e.elementPointerLock&&c.addEventListener("click",function(a){!zc&&c.la&&(c.la(),a.preventDefault())},!1))}}function Ic(a,b,c,d){if(b&&e.fa&&a==e.canvas)return e.fa;var f,h;if(b){h={antialias:!1,alpha:!1};if(d)for(var g in d)h[g]=d[g];(h=GL.createContext(a,h))&&(f=GL.getContext(h).cd);a.style.backgroundColor="black"}else f=a.getContext("2d");if(!f)return null;c&&(b||assert("undefined"===typeof GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.fa=f,b&&GL.yd(h),e.Dd=b,Ac.forEach(function(a){a()}),Bc());return f}var Jc=!1,Kc=void 0,Lc=void 0;function Mc(a,b,c){function d(){yc=!1;var a=f.parentNode;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===a?(f.ua=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.exitFullscreen||function(){},f.ua=f.ua.bind(document),Kc&&f.la(),yc=!0,Lc&&Nc()):(a.parentNode.insertBefore(f,a),a.parentNode.removeChild(a),Lc&&Oc());e.onFullScreen&&e.onFullScreen(yc);Pc(f)}Kc=a;Lc=b;Qc=c;"undefined"===typeof Kc&&(Kc=!0);"undefined"===typeof Lc&&(Lc=!1);"undefined"===typeof Qc&&(Qc=null);var f=e.canvas;Jc||(Jc=!0,document.addEventListener("fullscreenchange",d,!1),document.addEventListener("mozfullscreenchange",d,!1),document.addEventListener("webkitfullscreenchange",d,!1),document.addEventListener("MSFullscreenChange",d,!1));var h=document.createElement("div");f.parentNode.insertBefore(h,f);h.appendChild(f);h.C=h.requestFullScreen||h.mozRequestFullScreen||h.msRequestFullscreen||(h.webkitRequestFullScreen?function(){h.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null);c?h.C({Ed:c}):h.C()}var Rc=0;function Sc(a){var b=Date.now();if(0===Rc)Rc=b+1e3/60;else for(;b+2>=Rc;)Rc+=1e3/60;b=Math.max(Rc-b,0);setTimeout(a,b)}function nc(a){"undefined"===typeof window?Sc(a):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||Sc),window.requestAnimationFrame(a))}function Hc(a){e.noExitRuntime=!0,setTimeout(function(){A||a()},1e4)}function Gc(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]}function Tc(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){200==d.status||0==d.status&&d.response?b(d.response):c()};d.onerror=c;d.send(null)}function Uc(a,b,c){Tc(a,function(c){assert(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),b(new Uint8Array(c)),Za()},function(){if(c)c();else throw'Loading data file "'+a+'" failed.'}),Ya()}var Vc=[];function Wc(){var a=e.canvas;Vc.forEach(function(b){b(a.width,a.height)})}function Nc(){if("undefined"!=typeof SDL){var a=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=a|8388608}Wc()}function Oc(){if("undefined"!=typeof SDL){var a=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=a&-8388609}Wc()}function Pc(a,b,c){b&&c?(a.fb=b,a.Va=c):(b=a.fb,c=a.Va);var d=b,f=c;e.forcedAspectRatio&&0<e.forcedAspectRatio&&(d/f<e.forcedAspectRatio?d=Math.round(f*e.forcedAspectRatio):f=Math.round(d/e.forcedAspectRatio));if((document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===a.parentNode&&"undefined"!=typeof screen)var h=Math.min(screen.width/d,screen.height/f),d=Math.round(d*h),f=Math.round(f*h);Lc?(a.width!=d&&(a.width=d),a.height!=f&&(a.height=f),"undefined"!=typeof a.style&&(a.style.removeProperty("width"),a.style.removeProperty("height"))):(a.width!=b&&(a.width=b),a.height!=c&&(a.height=c),"undefined"!=typeof a.style&&(d!=b||f!=c?(a.style.setProperty("width",d+"px","important"),a.style.setProperty("height",f+"px","important")):(a.style.removeProperty("width"),a.style.removeProperty("height"))))}var Cc,Dc,Ec,Fc,Qc;Yb();R=Array(4096);Nb(P,"/");V("/tmp");V("/home");V("/home/web_user");(function(){V("/dev");pb(259,{read:function(){return 0},write:function(a,b,f,h){return h}});Qb("/dev/null",259);ob(1280,rb);ob(1536,sb);Qb("/dev/tty",1280);Qb("/dev/tty1",1536);var a;if("undefined"!==typeof crypto){var b=new Uint8Array(1);a=function(){crypto.getRandomValues(b);return b[0]}}else a=function(){return 256*Math.random()|0};W("/dev","random",a);W("/dev","urandom",a);V("/dev/shm");V("/dev/shm/tmp")})();V("/proc");V("/proc/self");V("/proc/self/fd");Nb({A:function(){var a=ub("/proc/self","fd",16895,73);a.k={lookup:function(a,c){var d=zb[+c];if(!d)throw new O(M.Z);var f={parent:null,A:{Fa:"fake"},k:{readlink:function(){return d.path}}};return f.parent=f}};return a}},"/proc/self/fd");Qa.unshift(function(){if(!e.noFSInit&&!Zb){assert(!Zb,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)");Zb=!0;Yb();e.stdin=e.stdin;e.stdout=e.stdout;e.stderr=e.stderr;e.stdin?W("/dev","stdin",e.stdin):Rb("/dev/tty","/dev/stdin");e.stdout?W("/dev","stdout",null,e.stdout):Rb("/dev/tty","/dev/stdout");e.stderr?W("/dev","stderr",null,e.stderr):Rb("/dev/tty1","/dev/stderr");var a=Tb("/dev/stdin","r");assert(0===a.fd,"invalid handle for stdin ("+a.fd+")");a=Tb("/dev/stdout","w");assert(1===a.fd,"invalid handle for stdout ("+a.fd+")");a=Tb("/dev/stderr","w");assert(2===a.fd,"invalid handle for stderr ("+a.fd+")")}});Ra.push(function(){Cb=!1});K.push(function(){Zb=!1;var a=e._fflush;a&&a(0);for(a=0;a<zb.length;a++){var b=zb[a];b&&Vb(b)}});e.FS_createFolder=function(a,b,c,d){a=N(("string"===typeof a?a:U(a))+"/"+b);return V(a,$b(c,d))};e.FS_createPath=function(a,b){a="string"===typeof a?a:U(a);for(var c=b.split("/").reverse();c.length;){var d=c.pop();if(d){var f=N(a+"/"+d);try{V(f)}catch(h){}a=f}}return f};e.FS_createDataFile=bc;e.FS_createPreloadedFile=function(a,b,c,d,f,h,g,k,t,r){function u(c){function u(c){r&&r(),k||bc(a,b,c,d,f,t),h&&h(),Za()}var J=!1;e.preloadPlugins.forEach(function(a){!J&&a.canHandle(q)&&(a.handle(c,q,u,function(){g&&g(),Za()}),J=!0)});J||u(c)}Bc();var q=b?mb(N(a+"/"+b)):a;Ya();"string"==typeof c?Uc(c,function(a){u(a)},g):u(c)};e.FS_createLazyFile=function(a,b,c,d,f){if("undefined"!==typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";c={Ca:!1,url:c};var h=ac(a,b,d,f);c.e?h.e=c.e:c.url&&(h.e=null,h.url=c.url);Object.defineProperty(h,"usedBytes",{get:function(){return this.e.length}});var g={};Object.keys(h.n).forEach(function(a){var b=h.n[a];g[a]=function(){if(!cc(h))throw new O(M.F);return b.apply(null,arguments)}});g.read=function(a,b,c,d,f){if(!cc(h))throw new O(M.F);a=a.g.e;if(f>=a.length)return 0;d=Math.min(a.length-f,d);assert(0<=d);if(a.slice)for(var g=0;g<d;g++)b[c+g]=a[f+g];else for(g=0;g<d;g++)b[c+g]=a.get(f+g);return d};h.n=g;return h};e.FS_createLink=function(a,b,c){a=N(("string"===typeof a?a:U(a))+"/"+b);return Rb(c,a)};e.FS_createDevice=W;e.FS_unlink=function(a){var b=T(a,{parent:!0}).g,c=lb(a),d=wb(b,c),f;a:{try{f=wb(b,c)}catch(h){f=h.Q;break a}var g=Gb(b,"wx");f=g?g:16384===(f.mode&61440)?M.N:0}if(f)throw f===M.N&&(f=M.G),new O(f);if(!b.k.unlink)throw new O(M.G);if(d.R)throw new O(M.$);try{S.willDeletePath&&S.willDeletePath(a)}catch(k){}b.k.unlink(b,c);b=Eb(d.parent.id,d.name);if(R[b]===d)R[b]=d.K;else for(b=R[b];b;){if(b.K===d){b.K=d.K;break}b=b.K}try{S.onDeletePath&&S.onDeletePath(a)}catch(t){}};Qa.unshift(function(){});K.push(function(){});e.requestFullScreen=function(a,b,c){Mc(a,b,c)};e.requestAnimationFrame=function(a){nc(a)};e.setCanvasSize=function(a,b,c){Pc(e.canvas,a,b),c||Wc()};e.pauseMainLoop=function(){Y=null,qc++};e.resumeMainLoop=function(){qc++;var a=ic,b=jc,c=kc;kc=null;oc(c,0,!1,pc,!0);hc(a,b);Y()};e.getUserMedia=function(){window.C||(window.C=navigator.getUserMedia||navigator.mozGetUserMedia),window.C(void 0)};e.createContext=function(a,b,c,d){return Ic(a,b,c,d)};Ka=m=n.ea(p);va=!0;La=Ka+Na;Ma=v=n.ea(La);assert(Ma<w,"TOTAL_MEMORY not big enough for stack");var Xc=G([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",3);e.Na={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:Infinity};e.Oa={abort:z,assert:assert,invoke_ii:function(a,b){try{return e.dynCall_ii(a,b)}catch(c){if("number"!==typeof c&&"longjmp"!==c)throw c;Z.setThrew(1,0)}},invoke_iiii:function(a,b,c,d){try{return e.dynCall_iiii(a,b,c,d)}catch(f){if("number"!==typeof f&&"longjmp"!==f)throw f;Z.setThrew(1,0)}},invoke_vi:function(a,b){try{e.dynCall_vi(a,b)}catch(c){if("number"!==typeof c&&"longjmp"!==c)throw c;Z.setThrew(1,0)}},_pthread_cleanup_pop:function(){assert(eb.level==K.length,"cannot pop if something else added meanwhile!"),K.pop(),eb.level=K.length},___lock:function(){},_emscripten_set_main_loop:oc,_pthread_self:function(){return 0},___syscall6:function(a,b){ec=b;try{var c=fc();Vb(c);return 0}catch(d){return"undefined"!==typeof dc&&d instanceof O||z(d),-d.Q}},_emscripten_set_main_loop_timing:hc,_abort:function(){e.abort()},_sbrk:wa,_time:function(a){var b=Date.now()/1e3|0;a&&(F[a>>2]=b);return b},___setErrNo:ib,_emscripten_memcpy_big:function(a,b,c){H.set(H.subarray(b,b+c),a);return a},___syscall54:function(a,b){ec=b;try{var c=fc(),d=X();switch(d){case 21505:return c.tty?0:-M.O;case 21506:return c.tty?0:-M.O;case 21519:if(!c.tty)return-M.O;var f=X();return F[f>>2]=0;case 21520:return c.tty?-M.u:-M.O;case 21531:f=X();if(!c.n.Wa)throw new O(M.O);return c.n.Wa(c,d,f);default:z("bad ioctl syscall "+d)}}catch(h){return"undefined"!==typeof dc&&h instanceof O||z(h),-h.Q}},___unlock:function(){},___syscall140:function(a,b){ec=b;try{var c=fc(),d=X(),f=X(),h=X(),g=X();assert(0===d);Wb(c,f,g);F[h>>2]=c.position;c.ia&&0===f&&0===g&&(c.ia=null);return 0}catch(k){return"undefined"!==typeof dc&&k instanceof O||z(k),-k.Q}},_pthread_cleanup_push:eb,_sysconf:function(a){switch(a){case 30:return 4096;case 85:return I/4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"===typeof navigator?navigator.hardwareConcurrency||1:1}ib(M.u);return-1},___syscall146:function(a,b){ec=b;try{var c=fc(),d=X(),f;a:{for(var h=X(),g=0,k=0;k<h;k++){var t=Xb(c,D,F[d+8*k>>2],F[d+(8*k+4)>>2],void 0);if(0>t){f=-1;break a}g+=t}f=g}return f}catch(r){return"undefined"!==typeof dc&&r instanceof O||z(r),-r.Q}},STACKTOP:m,STACK_MAX:La,tempDoublePtr:$a,ABORT:A,cttz_i8:Xc};var Z=function(global,env,buffer){var a=new global.Int8Array(buffer),b=new global.Int16Array(buffer),c=new global.Int32Array(buffer),d=new global.Uint8Array(buffer),e=new global.Uint16Array(buffer),f=new global.Uint32Array(buffer),g=new global.Float32Array(buffer),h=new global.Float64Array(buffer),i=env.STACKTOP|0,j=env.STACK_MAX|0,k=env.tempDoublePtr|0,l=env.ABORT|0,m=env.cttz_i8|0,n=0,o=0,p=0,q=0,r=global.NaN,s=global.Infinity,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=global.Math.floor,N=global.Math.abs,O=global.Math.sqrt,P=global.Math.pow,Q=global.Math.cos,R=global.Math.sin,S=global.Math.tan,T=global.Math.acos,U=global.Math.asin,V=global.Math.atan,W=global.Math.atan2,X=global.Math.exp,Y=global.Math.log,Z=global.Math.ceil,_=global.Math.imul,$=global.Math.min,aa=global.Math.clz32,ba=env.abort,ca=env.assert,da=env.invoke_ii,ea=env.invoke_iiii,fa=env.invoke_vi,ga=env._pthread_cleanup_pop,ha=env.___lock,ia=env._emscripten_set_main_loop,ja=env._pthread_self,ka=env.___syscall6,la=env._emscripten_set_main_loop_timing,ma=env._abort,na=env._sbrk,oa=env._time,pa=env.___setErrNo,qa=env._emscripten_memcpy_big,ra=env.___syscall54,sa=env.___unlock,ta=env.___syscall140,ua=env._pthread_cleanup_push,va=env._sysconf,wa=env.___syscall146,xa=0;function Ba(a){a=a|0;var b=0;b=i;i=i+a|0;i=i+15&-16;return b|0}function Ca(){return i|0}function Da(a){a=a|0,i=a}function Ea(a,b){a=a|0,b=b|0,i=a,j=b}function Fa(a,b){a=a|0,b=b|0,n||(n=a,o=b)}function Ga(b){b=b|0,a[k>>0]=a[b>>0],a[k+1>>0]=a[b+1>>0],a[k+2>>0]=a[b+2>>0],a[k+3>>0]=a[b+3>>0]}function Ha(b){b=b|0,a[k>>0]=a[b>>0],a[k+1>>0]=a[b+1>>0],a[k+2>>0]=a[b+2>>0],a[k+3>>0]=a[b+3>>0],a[k+4>>0]=a[b+4>>0],a[k+5>>0]=a[b+5>>0],a[k+6>>0]=a[b+6>>0],a[k+7>>0]=a[b+7>>0]}function Ia(a){a=a|0,C=a}function Ja(){return C|0}function Ka(b,e,f){b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,Oa=0,Pa=0,Qa=0,Ra=0,Sa=0,Ta=0,Ua=0,Va=0,Wa=0,Xa=0,Ya=0,Za=0,_a=0,$a=0,gb=0,hb=0,ib=0,jb=0,kb=0,mb=0,nb=0,ob=0,pb=0,qb=0,rb=0,sb=0,tb=0,ub=0,vb=0,wb=0,xb=0,yb=0,zb=0,Ab=0,Bb=0,Cb=0,Db=0,Eb=0,Fb=0,Gb=0,Hb=0,Ib=0,Jb=0,Kb=0,Lb=0,Mb=0,Nb=0,Ob=0,Pb=0,Qb=0,Rb=0,Sb=0,Tb=0,Ub=0,Vb=0,Wb=0,Xb=0,Yb=0,Zb=0,_b=0,$b=0,ac=0,bc=0,cc=0,dc=0,ec=0,fc=0,gc=0,hc=0,ic=0,jc=0,kc=0,lc=0,mc=0,nc=0,oc=0,pc=0,qc=0,rc=0,sc=0,tc=0,uc=0,vc=0,wc=0,xc=0,yc=0,zc=0,Ac=0,Bc=0,Cc=0,Dc=0,Ec=0,Fc=0,Gc=0,Hc=0;g=i;i=i+2640|0;h=g+2456|0;j=g+2304|0;k=g+2152|0;l=g+2e3|0;m=g+1848|0;n=g+1696|0;o=g+1544|0;p=g+1392|0;q=g+1240|0;r=g+1088|0;s=g+936|0;t=g+784|0;u=g+632|0;v=g+480|0;w=g+328|0;x=g+248|0;y=g+168|0;z=g+80|0;A=g;B=g+2608|0;D=B;E=e;e=D+32|0;do a[D>>0]=a[E>>0]|0,D=D+1|0,E=E+1|0;while((D|0)<(e|0));a[B>>0]=(d[B>>0]|0)&248;F=B+31|0;a[F>>0]=(d[F>>0]|0)&63|64;F=d[f>>0]|0;G=fb(d[f+1>>0]|0|0,0,8)|0;H=C;I=fb(d[f+2>>0]|0|0,0,16)|0;J=H|C;H=d[f+3>>0]|0;K=fb(H|0,0,24)|0;L=x;c[L>>2]=G|F|I|K&50331648;c[L+4>>2]=J;J=fb(d[f+4>>0]|0|0,0,8)|0;L=C;K=fb(d[f+5>>0]|0|0,0,16)|0;I=L|C;L=d[f+6>>0]|0;F=fb(L|0,0,24)|0;G=eb(J|H|K|F|0,I|C|0,2)|0;I=x+8|0;c[I>>2]=G&33554431;c[I+4>>2]=0;I=fb(d[f+7>>0]|0|0,0,8)|0;G=C;F=fb(d[f+8>>0]|0|0,0,16)|0;K=G|C;G=d[f+9>>0]|0;H=fb(G|0,0,24)|0;J=eb(I|L|F|H|0,K|C|0,3)|0;K=x+16|0;c[K>>2]=J&67108863;c[K+4>>2]=0;K=fb(d[f+10>>0]|0|0,0,8)|0;J=C;H=fb(d[f+11>>0]|0|0,0,16)|0;F=J|C;J=d[f+12>>0]|0;L=fb(J|0,0,24)|0;I=eb(K|G|H|L|0,F|C|0,5)|0;F=x+24|0;c[F>>2]=I&33554431;c[F+4>>2]=0;F=fb(d[f+13>>0]|0|0,0,8)|0;I=C;L=fb(d[f+14>>0]|0|0,0,16)|0;H=I|C;I=fb(d[f+15>>0]|0|0,0,24)|0;G=eb(F|J|L|I|0,H|C|0,6)|0;H=x+32|0;c[H>>2]=G&67108863;c[H+4>>2]=0;H=d[f+16>>0]|0;G=fb(d[f+17>>0]|0|0,0,8)|0;I=C;L=fb(d[f+18>>0]|0|0,0,16)|0;J=I|C;I=d[f+19>>0]|0;F=fb(I|0,0,24)|0;K=x+40|0;c[K>>2]=G|H|L|F&16777216;c[K+4>>2]=J;J=fb(d[f+20>>0]|0|0,0,8)|0;K=C;F=fb(d[f+21>>0]|0|0,0,16)|0;L=K|C;K=d[f+22>>0]|0;H=fb(K|0,0,24)|0;G=eb(J|I|F|H|0,L|C|0,1)|0;L=x+48|0;c[L>>2]=G&67108863;c[L+4>>2]=0;L=fb(d[f+23>>0]|0|0,0,8)|0;G=C;H=fb(d[f+24>>0]|0|0,0,16)|0;F=G|C;G=d[f+25>>0]|0;I=fb(G|0,0,24)|0;J=eb(L|K|H|I|0,F|C|0,3)|0;F=x+56|0;c[F>>2]=J&33554431;c[F+4>>2]=0;F=fb(d[f+26>>0]|0|0,0,8)|0;J=C;I=fb(d[f+27>>0]|0|0,0,16)|0;H=J|C;J=d[f+28>>0]|0;K=fb(J|0,0,24)|0;L=eb(F|G|I|K|0,H|C|0,4)|0;H=x+64|0;c[H>>2]=L&67108863;c[H+4>>2]=0;H=fb(d[f+29>>0]|0|0,0,8)|0;L=C;K=fb(d[f+30>>0]|0|0,0,16)|0;I=L|C;L=fb(d[f+31>>0]|0|0,0,24)|0;f=eb(H|J|K|L|0,I|C|0,6)|0;I=x+72|0;c[I>>2]=f&33554431;c[I+4>>2]=0;db(q|0,0,152)|0;I=q;c[I>>2]=1;c[I+4>>2]=0;db(r|0,0,152)|0;I=r;c[I>>2]=1;c[I+4>>2]=0;db(s|0,0,152)|0;db(t|0,0,152)|0;db(u|0,0,152)|0;I=u;c[I>>2]=1;c[I+4>>2]=0;db(v|0,0,152)|0;db(w|0,0,152)|0;I=w;c[I>>2]=1;c[I+4>>2]=0;D=p+80|0;e=D+72|0;do c[D>>2]=0,D=D+4|0;while((D|0)<(e|0));D=p;E=x;e=D+80|0;do c[D>>2]=c[E>>2],D=D+4|0,E=E+4|0;while((D|0)<(e|0));I=l+144|0;f=l+64|0;L=l+136|0;K=l+56|0;J=l+128|0;H=l+48|0;G=l+120|0;F=l+40|0;M=l+112|0;N=l+32|0;O=l+104|0;P=l+24|0;Q=l+96|0;R=l+16|0;S=l+88|0;T=l+8|0;U=l+80|0;V=m+144|0;W=m+64|0;X=m+136|0;Y=m+56|0;Z=m+128|0;$=m+48|0;aa=m+120|0;ba=m+40|0;ca=m+112|0;da=m+32|0;ea=m+104|0;fa=m+24|0;ga=m+96|0;ha=m+16|0;ia=m+88|0;ja=m+8|0;ka=m+80|0;la=l+72|0;ma=m+72|0;na=j+8|0;oa=k+8|0;pa=j+16|0;qa=k+16|0;ra=j+24|0;sa=k+24|0;ta=j+32|0;ua=k+32|0;va=j+40|0;wa=k+40|0;xa=j+48|0;ya=k+48|0;za=j+56|0;Aa=k+56|0;Ba=j+64|0;Ca=k+64|0;Da=j+72|0;Ea=k+72|0;Fa=h+80|0;Ga=h+8|0;Ha=h+16|0;Ia=h+24|0;Ja=h+32|0;Ka=h+40|0;Oa=h+48|0;Pa=h+56|0;Qa=h+64|0;Ra=h+72|0;Sa=0;Ta=p;Ua=t;t=q;Va=u;u=r;Wa=v;v=s;s=w;while(1){w=a[B+(31-Sa)>>0]|0;Xa=0;Ya=Ta;Za=Ua;_a=t;$a=Va;gb=u;hb=Wa;ib=v;jb=s;while(1){kb=w&255;mb=bb(0,0,kb>>>7|0,0)|0;nb=C;ob=0;do pb=gb+(ob<<3)|0,qb=pb,rb=c[qb>>2]|0,sb=c[qb+4>>2]|0,qb=Ya+(ob<<3)|0,tb=qb,ub=c[tb>>2]|0,vb=c[tb+4>>2]|0,tb=(ub^rb)&mb,wb=(vb^sb)&nb,sb=ab(0,tb^rb|0,32)|0,rb=pb,c[rb>>2]=sb,c[rb+4>>2]=C,rb=ab(0,tb^ub|0,32)|0,ub=qb,c[ub>>2]=rb,c[ub+4>>2]=C,ob=ob+1|0;while((ob|0)!=10);xb=0;do ob=ib+(xb<<3)|0,ub=ob,rb=c[ub>>2]|0,qb=c[ub+4>>2]|0,ub=_a+(xb<<3)|0,tb=ub,sb=c[tb>>2]|0,pb=c[tb+4>>2]|0,tb=(sb^rb)&mb,vb=(pb^qb)&nb,qb=ab(0,tb^rb|0,32)|0,rb=ob,c[rb>>2]=qb,c[rb+4>>2]=C,rb=ab(0,tb^sb|0,32)|0,sb=ub,c[sb>>2]=rb,c[sb+4>>2]=C,xb=xb+1|0;while((xb|0)!=10);sb=gb;rb=c[sb>>2]|0;ub=c[sb+4>>2]|0;sb=gb+8|0;tb=sb;qb=c[tb>>2]|0;ob=c[tb+4>>2]|0;tb=gb+16|0;pb=tb;vb=c[pb>>2]|0;wb=c[pb+4>>2]|0;pb=gb+24|0;yb=pb;zb=c[yb>>2]|0;Ab=c[yb+4>>2]|0;yb=gb+32|0;Bb=yb;Cb=c[Bb>>2]|0;Db=c[Bb+4>>2]|0;Bb=gb+40|0;Eb=Bb;Fb=c[Eb>>2]|0;Gb=c[Eb+4>>2]|0;Eb=gb+48|0;Hb=Eb;Ib=c[Hb>>2]|0;Jb=c[Hb+4>>2]|0;Hb=gb+56|0;Kb=Hb;Lb=c[Kb>>2]|0;Mb=c[Kb+4>>2]|0;Kb=gb+64|0;Nb=Kb;Ob=c[Nb>>2]|0;Pb=c[Nb+4>>2]|0;Nb=gb+72|0;Qb=Nb;Rb=c[Qb>>2]|0;Sb=c[Qb+4>>2]|0;Qb=ib;Tb=c[Qb>>2]|0;Ub=c[Qb+4>>2]|0;Qb=cb(Tb|0,Ub|0,rb|0,ub|0)|0;Vb=gb;c[Vb>>2]=Qb;c[Vb+4>>2]=C;Vb=ib+8|0;Qb=Vb;Wb=c[Qb>>2]|0;Xb=c[Qb+4>>2]|0;Qb=cb(Wb|0,Xb|0,qb|0,ob|0)|0;Yb=sb;c[Yb>>2]=Qb;c[Yb+4>>2]=C;Yb=ib+16|0;Qb=Yb;sb=c[Qb>>2]|0;Zb=c[Qb+4>>2]|0;Qb=cb(sb|0,Zb|0,vb|0,wb|0)|0;_b=tb;c[_b>>2]=Qb;c[_b+4>>2]=C;_b=ib+24|0;Qb=_b;tb=c[Qb>>2]|0;$b=c[Qb+4>>2]|0;Qb=cb(tb|0,$b|0,zb|0,Ab|0)|0;ac=pb;c[ac>>2]=Qb;c[ac+4>>2]=C;ac=ib+32|0;Qb=ac;pb=c[Qb>>2]|0;bc=c[Qb+4>>2]|0;Qb=cb(pb|0,bc|0,Cb|0,Db|0)|0;cc=yb;c[cc>>2]=Qb;c[cc+4>>2]=C;cc=ib+40|0;Qb=cc;yb=c[Qb>>2]|0;dc=c[Qb+4>>2]|0;Qb=cb(yb|0,dc|0,Fb|0,Gb|0)|0;ec=Bb;c[ec>>2]=Qb;c[ec+4>>2]=C;ec=ib+48|0;Qb=ec;Bb=c[Qb>>2]|0;fc=c[Qb+4>>2]|0;Qb=cb(Bb|0,fc|0,Ib|0,Jb|0)|0;gc=Eb;c[gc>>2]=Qb;c[gc+4>>2]=C;gc=ib+56|0;Qb=gc;Eb=c[Qb>>2]|0;hc=c[Qb+4>>2]|0;Qb=cb(Eb|0,hc|0,Lb|0,Mb|0)|0;ic=Hb;c[ic>>2]=Qb;c[ic+4>>2]=C;ic=ib+64|0;Qb=ic;Hb=c[Qb>>2]|0;jc=c[Qb+4>>2]|0;Qb=cb(Hb|0,jc|0,Ob|0,Pb|0)|0;kc=Kb;c[kc>>2]=Qb;c[kc+4>>2]=C;kc=ib+72|0;Qb=kc;Kb=c[Qb>>2]|0;lc=c[Qb+4>>2]|0;Qb=cb(Kb|0,lc|0,Rb|0,Sb|0)|0;mc=Nb;c[mc>>2]=Qb;c[mc+4>>2]=C;mc=bb(rb|0,ub|0,Tb|0,Ub|0)|0;Ub=ib;c[Ub>>2]=mc;c[Ub+4>>2]=C;Ub=bb(qb|0,ob|0,Wb|0,Xb|0)|0;Xb=Vb;c[Xb>>2]=Ub;c[Xb+4>>2]=C;Xb=bb(vb|0,wb|0,sb|0,Zb|0)|0;Zb=Yb;c[Zb>>2]=Xb;c[Zb+4>>2]=C;Zb=bb(zb|0,Ab|0,tb|0,$b|0)|0;$b=_b;c[$b>>2]=Zb;c[$b+4>>2]=C;$b=bb(Cb|0,Db|0,pb|0,bc|0)|0;bc=ac;c[bc>>2]=$b;c[bc+4>>2]=C;bc=bb(Fb|0,Gb|0,yb|0,dc|0)|0;dc=cc;c[dc>>2]=bc;c[dc+4>>2]=C;dc=bb(Ib|0,Jb|0,Bb|0,fc|0)|0;fc=ec;c[fc>>2]=dc;c[fc+4>>2]=C;fc=bb(Lb|0,Mb|0,Eb|0,hc|0)|0;hc=gc;c[hc>>2]=fc;c[hc+4>>2]=C;hc=bb(Ob|0,Pb|0,Hb|0,jc|0)|0;jc=ic;c[jc>>2]=hc;c[jc+4>>2]=C;jc=bb(Rb|0,Sb|0,Kb|0,lc|0)|0;lc=kc;c[lc>>2]=jc;c[lc+4>>2]=C;lc=Ya;jc=c[lc>>2]|0;kc=c[lc+4>>2]|0;lc=Ya+8|0;Kb=lc;Sb=c[Kb>>2]|0;Rb=c[Kb+4>>2]|0;Kb=Ya+16|0;hc=Kb;ic=c[hc>>2]|0;Hb=c[hc+4>>2]|0;hc=Ya+24|0;Pb=hc;Ob=c[Pb>>2]|0;fc=c[Pb+4>>2]|0;Pb=Ya+32|0;gc=Pb;Eb=c[gc>>2]|0;Mb=c[gc+4>>2]|0;gc=Ya+40|0;Lb=gc;dc=c[Lb>>2]|0;ec=c[Lb+4>>2]|0;Lb=Ya+48|0;Bb=Lb;Jb=c[Bb>>2]|0;Ib=c[Bb+4>>2]|0;Bb=Ya+56|0;bc=Bb;cc=c[bc>>2]|0;yb=c[bc+4>>2]|0;bc=Ya+64|0;Gb=bc;Fb=c[Gb>>2]|0;$b=c[Gb+4>>2]|0;Gb=Ya+72|0;ac=Gb;pb=c[ac>>2]|0;Db=c[ac+4>>2]|0;ac=_a;Cb=c[ac>>2]|0;Zb=c[ac+4>>2]|0;ac=cb(Cb|0,Zb|0,jc|0,kc|0)|0;_b=Ya;c[_b>>2]=ac;c[_b+4>>2]=C;_b=_a+8|0;ac=_b;tb=c[ac>>2]|0;Ab=c[ac+4>>2]|0;ac=cb(tb|0,Ab|0,Sb|0,Rb|0)|0;zb=lc;c[zb>>2]=ac;c[zb+4>>2]=C;zb=_a+16|0;ac=zb;lc=c[ac>>2]|0;Xb=c[ac+4>>2]|0;ac=cb(lc|0,Xb|0,ic|0,Hb|0)|0;Yb=Kb;c[Yb>>2]=ac;c[Yb+4>>2]=C;Yb=_a+24|0;ac=Yb;Kb=c[ac>>2]|0;sb=c[ac+4>>2]|0;ac=cb(Kb|0,sb|0,Ob|0,fc|0)|0;wb=hc;c[wb>>2]=ac;c[wb+4>>2]=C;wb=_a+32|0;ac=wb;hc=c[ac>>2]|0;vb=c[ac+4>>2]|0;ac=cb(hc|0,vb|0,Eb|0,Mb|0)|0;Ub=Pb;c[Ub>>2]=ac;c[Ub+4>>2]=C;Ub=_a+40|0;ac=Ub;Pb=c[ac>>2]|0;Vb=c[ac+4>>2]|0;ac=cb(Pb|0,Vb|0,dc|0,ec|0)|0;Wb=gc;c[Wb>>2]=ac;c[Wb+4>>2]=C;Wb=_a+48|0;ac=Wb;gc=c[ac>>2]|0;ob=c[ac+4>>2]|0;ac=cb(gc|0,ob|0,Jb|0,Ib|0)|0;qb=Lb;c[qb>>2]=ac;c[qb+4>>2]=C;qb=_a+56|0;ac=qb;Lb=c[ac>>2]|0;mc=c[ac+4>>2]|0;ac=cb(Lb|0,mc|0,cc|0,yb|0)|0;Tb=Bb;c[Tb>>2]=ac;c[Tb+4>>2]=C;Tb=_a+64|0;ac=Tb;Bb=c[ac>>2]|0;ub=c[ac+4>>2]|0;ac=cb(Bb|0,ub|0,Fb|0,$b|0)|0;rb=bc;c[rb>>2]=ac;c[rb+4>>2]=C;rb=_a+72|0;ac=rb;bc=c[ac>>2]|0;Qb=c[ac+4>>2]|0;ac=cb(bc|0,Qb|0,pb|0,Db|0)|0;Nb=Gb;c[Nb>>2]=ac;c[Nb+4>>2]=C;Nb=bb(jc|0,kc|0,Cb|0,Zb|0)|0;Zb=_a;c[Zb>>2]=Nb;c[Zb+4>>2]=C;Zb=bb(Sb|0,Rb|0,tb|0,Ab|0)|0;Ab=_b;c[Ab>>2]=Zb;c[Ab+4>>2]=C;Ab=bb(ic|0,Hb|0,lc|0,Xb|0)|0;Xb=zb;c[Xb>>2]=Ab;c[Xb+4>>2]=C;Xb=bb(Ob|0,fc|0,Kb|0,sb|0)|0;sb=Yb;c[sb>>2]=Xb;c[sb+4>>2]=C;sb=bb(Eb|0,Mb|0,hc|0,vb|0)|0;vb=wb;c[vb>>2]=sb;c[vb+4>>2]=C;vb=bb(dc|0,ec|0,Pb|0,Vb|0)|0;Vb=Ub;c[Vb>>2]=vb;c[Vb+4>>2]=C;Vb=bb(Jb|0,Ib|0,gc|0,ob|0)|0;ob=Wb;c[ob>>2]=Vb;c[ob+4>>2]=C;ob=bb(cc|0,yb|0,Lb|0,mc|0)|0;mc=qb;c[mc>>2]=ob;c[mc+4>>2]=C;mc=bb(Fb|0,$b|0,Bb|0,ub|0)|0;ub=Tb;c[ub>>2]=mc;c[ub+4>>2]=C;ub=bb(pb|0,Db|0,bc|0,Qb|0)|0;Qb=rb;c[Qb>>2]=ub;c[Qb+4>>2]=C;Ma(l,Ya,ib);Ma(m,gb,_a);Qb=I;ub=c[Qb>>2]|0;rb=c[Qb+4>>2]|0;Qb=f;bc=c[Qb>>2]|0;Db=c[Qb+4>>2]|0;Qb=lb(ub|0,rb|0,18,0)|0;pb=C;mc=cb(bc|0,Db|0,ub|0,rb|0)|0;rb=cb(mc|0,C|0,Qb|0,pb|0)|0;pb=f;c[pb>>2]=rb;c[pb+4>>2]=C;pb=L;rb=c[pb>>2]|0;Qb=c[pb+4>>2]|0;pb=K;mc=c[pb>>2]|0;ub=c[pb+4>>2]|0;pb=lb(rb|0,Qb|0,18,0)|0;Db=C;bc=cb(mc|0,ub|0,rb|0,Qb|0)|0;Qb=cb(bc|0,C|0,pb|0,Db|0)|0;Db=K;c[Db>>2]=Qb;c[Db+4>>2]=C;Db=J;Qb=c[Db>>2]|0;pb=c[Db+4>>2]|0;Db=H;bc=c[Db>>2]|0;rb=c[Db+4>>2]|0;Db=lb(Qb|0,pb|0,18,0)|0;ub=C;mc=cb(bc|0,rb|0,Qb|0,pb|0)|0;pb=cb(mc|0,C|0,Db|0,ub|0)|0;ub=H;c[ub>>2]=pb;c[ub+4>>2]=C;ub=G;pb=c[ub>>2]|0;Db=c[ub+4>>2]|0;ub=F;mc=c[ub>>2]|0;Qb=c[ub+4>>2]|0;ub=lb(pb|0,Db|0,18,0)|0;rb=C;bc=cb(mc|0,Qb|0,pb|0,Db|0)|0;Db=cb(bc|0,C|0,ub|0,rb|0)|0;rb=F;c[rb>>2]=Db;c[rb+4>>2]=C;rb=M;Db=c[rb>>2]|0;ub=c[rb+4>>2]|0;rb=N;bc=c[rb>>2]|0;pb=c[rb+4>>2]|0;rb=lb(Db|0,ub|0,18,0)|0;Qb=C;mc=cb(bc|0,pb|0,Db|0,ub|0)|0;ub=cb(mc|0,C|0,rb|0,Qb|0)|0;Qb=N;c[Qb>>2]=ub;c[Qb+4>>2]=C;Qb=O;ub=c[Qb>>2]|0;rb=c[Qb+4>>2]|0;Qb=P;mc=c[Qb>>2]|0;Db=c[Qb+4>>2]|0;Qb=lb(ub|0,rb|0,18,0)|0;pb=C;bc=cb(mc|0,Db|0,ub|0,rb|0)|0;rb=cb(bc|0,C|0,Qb|0,pb|0)|0;pb=P;c[pb>>2]=rb;c[pb+4>>2]=C;pb=Q;rb=c[pb>>2]|0;Qb=c[pb+4>>2]|0;pb=R;bc=c[pb>>2]|0;ub=c[pb+4>>2]|0;pb=lb(rb|0,Qb|0,18,0)|0;Db=C;mc=cb(bc|0,ub|0,rb|0,Qb|0)|0;Qb=cb(mc|0,C|0,pb|0,Db|0)|0;Db=R;c[Db>>2]=Qb;c[Db+4>>2]=C;Db=S;Qb=c[Db>>2]|0;pb=c[Db+4>>2]|0;Db=T;mc=c[Db>>2]|0;rb=c[Db+4>>2]|0;Db=lb(Qb|0,pb|0,18,0)|0;ub=C;bc=cb(mc|0,rb|0,Qb|0,pb|0)|0;pb=cb(bc|0,C|0,Db|0,ub|0)|0;ub=T;c[ub>>2]=pb;c[ub+4>>2]=C;ub=U;pb=c[ub>>2]|0;Db=c[ub+4>>2]|0;ub=l;bc=c[ub>>2]|0;Qb=c[ub+4>>2]|0;ub=lb(pb|0,Db|0,18,0)|0;rb=C;mc=cb(bc|0,Qb|0,pb|0,Db|0)|0;Db=cb(mc|0,C|0,ub|0,rb|0)|0;rb=C;ub=l;c[ub>>2]=Db;c[ub+4>>2]=rb;ub=U;c[ub>>2]=0;c[ub+4>>2]=0;ub=rb;rb=Db;Db=0;do mc=cb(ub>>31>>>6|0,0,rb|0,ub|0)|0,pb=ab(mc|0,C|0,26)|0,mc=C,Qb=fb(pb|0,mc|0,26)|0,bc=bb(rb|0,ub|0,Qb|0,C|0)|0,Qb=l+(Db<<3)|0,c[Qb>>2]=bc,c[Qb+4>>2]=C,Qb=l+((Db|1)<<3)|0,bc=Qb,Tb=cb(pb|0,mc|0,c[bc>>2]|0,c[bc+4>>2]|0)|0,bc=C,mc=cb(bc>>31>>>7|0,0,Tb|0,bc|0)|0,pb=ab(mc|0,C|0,25)|0,mc=C,Bb=fb(pb|0,mc|0,25)|0,$b=bb(Tb|0,bc|0,Bb|0,C|0)|0,Bb=Qb,c[Bb>>2]=$b,c[Bb+4>>2]=C,Db=Db+2|0,Bb=l+(Db<<3)|0,$b=Bb,rb=cb(pb|0,mc|0,c[$b>>2]|0,c[$b+4>>2]|0)|0,ub=C,$b=Bb,c[$b>>2]=rb,c[$b+4>>2]=ub;while(Db>>>0<10);Db=U;ub=c[Db>>2]|0;rb=c[Db+4>>2]|0;Db=l;$b=c[Db>>2]|0;Bb=c[Db+4>>2]|0;Db=lb(ub|0,rb|0,18,0)|0;mc=C;pb=cb($b|0,Bb|0,ub|0,rb|0)|0;rb=cb(pb|0,C|0,Db|0,mc|0)|0;mc=C;Db=U;c[Db>>2]=0;c[Db+4>>2]=0;Db=cb(mc>>31>>>6|0,0,rb|0,mc|0)|0;pb=ab(Db|0,C|0,26)|0;Db=C;ub=fb(pb|0,Db|0,26)|0;Bb=bb(rb|0,mc|0,ub|0,C|0)|0;ub=C;mc=l;c[mc>>2]=Bb;c[mc+4>>2]=ub;mc=T;rb=cb(pb|0,Db|0,c[mc>>2]|0,c[mc+4>>2]|0)|0;mc=C;Db=T;c[Db>>2]=rb;c[Db+4>>2]=mc;Db=V;pb=c[Db>>2]|0;$b=c[Db+4>>2]|0;Db=W;Qb=c[Db>>2]|0;bc=c[Db+4>>2]|0;Db=lb(pb|0,$b|0,18,0)|0;Tb=C;Fb=cb(Qb|0,bc|0,pb|0,$b|0)|0;$b=cb(Fb|0,C|0,Db|0,Tb|0)|0;Tb=W;c[Tb>>2]=$b;c[Tb+4>>2]=C;Tb=X;$b=c[Tb>>2]|0;Db=c[Tb+4>>2]|0;Tb=Y;Fb=c[Tb>>2]|0;pb=c[Tb+4>>2]|0;Tb=lb($b|0,Db|0,18,0)|0;bc=C;Qb=cb(Fb|0,pb|0,$b|0,Db|0)|0;Db=cb(Qb|0,C|0,Tb|0,bc|0)|0;bc=Y;c[bc>>2]=Db;c[bc+4>>2]=C;bc=Z;Db=c[bc>>2]|0;Tb=c[bc+4>>2]|0;bc=$;Qb=c[bc>>2]|0;$b=c[bc+4>>2]|0;bc=lb(Db|0,Tb|0,18,0)|0;pb=C;Fb=cb(Qb|0,$b|0,Db|0,Tb|0)|0;Tb=cb(Fb|0,C|0,bc|0,pb|0)|0;pb=$;c[pb>>2]=Tb;c[pb+4>>2]=C;pb=aa;Tb=c[pb>>2]|0;bc=c[pb+4>>2]|0;pb=ba;Fb=c[pb>>2]|0;Db=c[pb+4>>2]|0;pb=lb(Tb|0,bc|0,18,0)|0;$b=C;Qb=cb(Fb|0,Db|0,Tb|0,bc|0)|0;bc=cb(Qb|0,C|0,pb|0,$b|0)|0;$b=ba;c[$b>>2]=bc;c[$b+4>>2]=C;$b=ca;bc=c[$b>>2]|0;pb=c[$b+4>>2]|0;$b=da;Qb=c[$b>>2]|0;Tb=c[$b+4>>2]|0;$b=lb(bc|0,pb|0,18,0)|0;Db=C;Fb=cb(Qb|0,Tb|0,bc|0,pb|0)|0;pb=cb(Fb|0,C|0,$b|0,Db|0)|0;Db=da;c[Db>>2]=pb;c[Db+4>>2]=C;Db=ea;pb=c[Db>>2]|0;$b=c[Db+4>>2]|0;Db=fa;Fb=c[Db>>2]|0;bc=c[Db+4>>2]|0;Db=lb(pb|0,$b|0,18,0)|0;Tb=C;Qb=cb(Fb|0,bc|0,pb|0,$b|0)|0;$b=cb(Qb|0,C|0,Db|0,Tb|0)|0;Tb=fa;c[Tb>>2]=$b;c[Tb+4>>2]=C;Tb=ga;$b=c[Tb>>2]|0;Db=c[Tb+4>>2]|0;Tb=ha;Qb=c[Tb>>2]|0;pb=c[Tb+4>>2]|0;Tb=lb($b|0,Db|0,18,0)|0;bc=C;Fb=cb(Qb|0,pb|0,$b|0,Db|0)|0;Db=cb(Fb|0,C|0,Tb|0,bc|0)|0;bc=ha;c[bc>>2]=Db;c[bc+4>>2]=C;bc=ia;Db=c[bc>>2]|0;Tb=c[bc+4>>2]|0;bc=ja;Fb=c[bc>>2]|0;$b=c[bc+4>>2]|0;bc=lb(Db|0,Tb|0,18,0)|0;pb=C;Qb=cb(Fb|0,$b|0,Db|0,Tb|0)|0;Tb=cb(Qb|0,C|0,bc|0,pb|0)|0;pb=ja;c[pb>>2]=Tb;c[pb+4>>2]=C;pb=ka;Tb=c[pb>>2]|0;bc=c[pb+4>>2]|0;pb=m;Qb=c[pb>>2]|0;Db=c[pb+4>>2]|0;pb=lb(Tb|0,bc|0,18,0)|0;$b=C;Fb=cb(Qb|0,Db|0,Tb|0,bc|0)|0;bc=cb(Fb|0,C|0,pb|0,$b|0)|0;$b=C;pb=m;c[pb>>2]=bc;c[pb+4>>2]=$b;pb=ka;c[pb>>2]=0;c[pb+4>>2]=0;pb=$b;$b=bc;bc=0;do Fb=cb(pb>>31>>>6|0,0,$b|0,pb|0)|0,Tb=ab(Fb|0,C|0,26)|0,Fb=C,Db=fb(Tb|0,Fb|0,26)|0,Qb=bb($b|0,pb|0,Db|0,C|0)|0,Db=m+(bc<<3)|0,c[Db>>2]=Qb,c[Db+4>>2]=C,Db=m+((bc|1)<<3)|0,Qb=Db,ob=cb(Tb|0,Fb|0,c[Qb>>2]|0,c[Qb+4>>2]|0)|0,Qb=C,Fb=cb(Qb>>31>>>7|0,0,ob|0,Qb|0)|0,Tb=ab(Fb|0,C|0,25)|0,Fb=C,qb=fb(Tb|0,Fb|0,25)|0,Lb=bb(ob|0,Qb|0,qb|0,C|0)|0,qb=Db,c[qb>>2]=Lb,c[qb+4>>2]=C,bc=bc+2|0,qb=m+(bc<<3)|0,Lb=qb,$b=cb(Tb|0,Fb|0,c[Lb>>2]|0,c[Lb+4>>2]|0)|0,pb=C,Lb=qb,c[Lb>>2]=$b,c[Lb+4>>2]=pb;while(bc>>>0<10);bc=ka;pb=c[bc>>2]|0;$b=c[bc+4>>2]|0;bc=m;Lb=c[bc>>2]|0;qb=c[bc+4>>2]|0;bc=lb(pb|0,$b|0,18,0)|0;Fb=C;Tb=cb(Lb|0,qb|0,pb|0,$b|0)|0;$b=cb(Tb|0,C|0,bc|0,Fb|0)|0;Fb=C;bc=ka;c[bc>>2]=0;c[bc+4>>2]=0;bc=cb(Fb>>31>>>6|0,0,$b|0,Fb|0)|0;Tb=ab(bc|0,C|0,26)|0;bc=C;pb=fb(Tb|0,bc|0,26)|0;qb=bb($b|0,Fb|0,pb|0,C|0)|0;pb=C;Fb=ja;$b=cb(Tb|0,bc|0,c[Fb>>2]|0,c[Fb+4>>2]|0)|0;Fb=C;bc=R;Tb=c[bc>>2]|0;Lb=c[bc+4>>2]|0;bc=P;Db=c[bc>>2]|0;Qb=c[bc+4>>2]|0;bc=N;ob=c[bc>>2]|0;yb=c[bc+4>>2]|0;bc=F;cc=c[bc>>2]|0;Vb=c[bc+4>>2]|0;bc=H;Wb=c[bc>>2]|0;gc=c[bc+4>>2]|0;bc=K;Ib=c[bc>>2]|0;Jb=c[bc+4>>2]|0;bc=f;vb=c[bc>>2]|0;Ub=c[bc+4>>2]|0;bc=la;Pb=c[bc>>2]|0;ec=c[bc+4>>2]|0;bc=cb(qb|0,pb|0,Bb|0,ub|0)|0;dc=l;c[dc>>2]=bc;c[dc+4>>2]=C;dc=cb($b|0,Fb|0,rb|0,mc|0)|0;bc=T;c[bc>>2]=dc;c[bc+4>>2]=C;bc=ha;dc=c[bc>>2]|0;sb=c[bc+4>>2]|0;bc=cb(dc|0,sb|0,Tb|0,Lb|0)|0;wb=R;c[wb>>2]=bc;c[wb+4>>2]=C;wb=fa;bc=c[wb>>2]|0;hc=c[wb+4>>2]|0;wb=cb(bc|0,hc|0,Db|0,Qb|0)|0;Mb=P;c[Mb>>2]=wb;c[Mb+4>>2]=C;Mb=da;wb=c[Mb>>2]|0;Eb=c[Mb+4>>2]|0;Mb=cb(wb|0,Eb|0,ob|0,yb|0)|0;Xb=N;c[Xb>>2]=Mb;c[Xb+4>>2]=C;Xb=ba;Mb=c[Xb>>2]|0;Yb=c[Xb+4>>2]|0;Xb=cb(Mb|0,Yb|0,cc|0,Vb|0)|0;Kb=F;c[Kb>>2]=Xb;c[Kb+4>>2]=C;Kb=$;Xb=c[Kb>>2]|0;fc=c[Kb+4>>2]|0;Kb=cb(Xb|0,fc|0,Wb|0,gc|0)|0;Ob=H;c[Ob>>2]=Kb;c[Ob+4>>2]=C;Ob=Y;Kb=c[Ob>>2]|0;Ab=c[Ob+4>>2]|0;Ob=cb(Kb|0,Ab|0,Ib|0,Jb|0)|0;zb=K;c[zb>>2]=Ob;c[zb+4>>2]=C;zb=W;Ob=c[zb>>2]|0;lc=c[zb+4>>2]|0;zb=cb(Ob|0,lc|0,vb|0,Ub|0)|0;Hb=f;c[Hb>>2]=zb;c[Hb+4>>2]=C;Hb=ma;zb=c[Hb>>2]|0;ic=c[Hb+4>>2]|0;Hb=cb(zb|0,ic|0,Pb|0,ec|0)|0;Zb=la;c[Zb>>2]=Hb;c[Zb+4>>2]=C;Zb=bb(Bb|0,ub|0,qb|0,pb|0)|0;pb=m;c[pb>>2]=Zb;c[pb+4>>2]=C;pb=bb(rb|0,mc|0,$b|0,Fb|0)|0;Fb=ja;c[Fb>>2]=pb;c[Fb+4>>2]=C;Fb=bb(Tb|0,Lb|0,dc|0,sb|0)|0;sb=ha;c[sb>>2]=Fb;c[sb+4>>2]=C;sb=bb(Db|0,Qb|0,bc|0,hc|0)|0;hc=fa;c[hc>>2]=sb;c[hc+4>>2]=C;hc=bb(ob|0,yb|0,wb|0,Eb|0)|0;Eb=da;c[Eb>>2]=hc;c[Eb+4>>2]=C;Eb=bb(cc|0,Vb|0,Mb|0,Yb|0)|0;Yb=ba;c[Yb>>2]=Eb;c[Yb+4>>2]=C;Yb=bb(Wb|0,gc|0,Xb|0,fc|0)|0;fc=$;c[fc>>2]=Yb;c[fc+4>>2]=C;fc=bb(Ib|0,Jb|0,Kb|0,Ab|0)|0;Ab=Y;c[Ab>>2]=fc;c[Ab+4>>2]=C;Ab=bb(vb|0,Ub|0,Ob|0,lc|0)|0;lc=W;c[lc>>2]=Ab;c[lc+4>>2]=C;lc=bb(Pb|0,ec|0,zb|0,ic|0)|0;ic=ma;c[ic>>2]=lc;c[ic+4>>2]=C;Na(o,l);Na(n,m);Ma(m,n,x);ic=V;lc=c[ic>>2]|0;zb=c[ic+4>>2]|0;ic=W;ec=c[ic>>2]|0;Pb=c[ic+4>>2]|0;ic=lb(lc|0,zb|0,18,0)|0;Ab=C;Ob=cb(ec|0,Pb|0,lc|0,zb|0)|0;zb=cb(Ob|0,C|0,ic|0,Ab|0)|0;Ab=W;c[Ab>>2]=zb;c[Ab+4>>2]=C;Ab=X;zb=c[Ab>>2]|0;ic=c[Ab+4>>2]|0;Ab=Y;Ob=c[Ab>>2]|0;lc=c[Ab+4>>2]|0;Ab=lb(zb|0,ic|0,18,0)|0;Pb=C;ec=cb(Ob|0,lc|0,zb|0,ic|0)|0;ic=cb(ec|0,C|0,Ab|0,Pb|0)|0;Pb=Y;c[Pb>>2]=ic;c[Pb+4>>2]=C;Pb=Z;ic=c[Pb>>2]|0;Ab=c[Pb+4>>2]|0;Pb=$;ec=c[Pb>>2]|0;zb=c[Pb+4>>2]|0;Pb=lb(ic|0,Ab|0,18,0)|0;lc=C;Ob=cb(ec|0,zb|0,ic|0,Ab|0)|0;Ab=cb(Ob|0,C|0,Pb|0,lc|0)|0;lc=$;c[lc>>2]=Ab;c[lc+4>>2]=C;lc=aa;Ab=c[lc>>2]|0;Pb=c[lc+4>>2]|0;lc=ba;Ob=c[lc>>2]|0;ic=c[lc+4>>2]|0;lc=lb(Ab|0,Pb|0,18,0)|0;zb=C;ec=cb(Ob|0,ic|0,Ab|0,Pb|0)|0;Pb=cb(ec|0,C|0,lc|0,zb|0)|0;zb=ba;c[zb>>2]=Pb;c[zb+4>>2]=C;zb=ca;Pb=c[zb>>2]|0;lc=c[zb+4>>2]|0;zb=da;ec=c[zb>>2]|0;Ab=c[zb+4>>2]|0;zb=lb(Pb|0,lc|0,18,0)|0;ic=C;Ob=cb(ec|0,Ab|0,Pb|0,lc|0)|0;lc=cb(Ob|0,C|0,zb|0,ic|0)|0;ic=da;c[ic>>2]=lc;c[ic+4>>2]=C;ic=ea;lc=c[ic>>2]|0;zb=c[ic+4>>2]|0;ic=fa;Ob=c[ic>>2]|0;Pb=c[ic+4>>2]|0;ic=lb(lc|0,zb|0,18,0)|0;Ab=C;ec=cb(Ob|0,Pb|0,lc|0,zb|0)|0;zb=cb(ec|0,C|0,ic|0,Ab|0)|0;Ab=fa;c[Ab>>2]=zb;c[Ab+4>>2]=C;Ab=ga;zb=c[Ab>>2]|0;ic=c[Ab+4>>2]|0;Ab=ha;ec=c[Ab>>2]|0;lc=c[Ab+4>>2]|0;Ab=lb(zb|0,ic|0,18,0)|0;Pb=C;Ob=cb(ec|0,lc|0,zb|0,ic|0)|0;ic=cb(Ob|0,C|0,Ab|0,Pb|0)|0;Pb=ha;c[Pb>>2]=ic;c[Pb+4>>2]=C;Pb=ia;ic=c[Pb>>2]|0;Ab=c[Pb+4>>2]|0;Pb=ja;Ob=c[Pb>>2]|0;zb=c[Pb+4>>2]|0;Pb=lb(ic|0,Ab|0,18,0)|0;lc=C;ec=cb(Ob|0,zb|0,ic|0,Ab|0)|0;Ab=cb(ec|0,C|0,Pb|0,lc|0)|0;lc=ja;c[lc>>2]=Ab;c[lc+4>>2]=C;lc=ka;Ab=c[lc>>2]|0;Pb=c[lc+4>>2]|0;lc=m;ec=c[lc>>2]|0;ic=c[lc+4>>2]|0;lc=lb(Ab|0,Pb|0,18,0)|0;zb=C;Ob=cb(ec|0,ic|0,Ab|0,Pb|0)|0;Pb=cb(Ob|0,C|0,lc|0,zb|0)|0;zb=C;lc=m;c[lc>>2]=Pb;c[lc+4>>2]=zb;lc=ka;c[lc>>2]=0;c[lc+4>>2]=0;lc=zb;zb=Pb;Pb=0;do Ob=cb(lc>>31>>>6|0,0,zb|0,lc|0)|0,Ab=ab(Ob|0,C|0,26)|0,Ob=C,ic=fb(Ab|0,Ob|0,26)|0,ec=bb(zb|0,lc|0,ic|0,C|0)|0,ic=m+(Pb<<3)|0,c[ic>>2]=ec,c[ic+4>>2]=C,ic=m+((Pb|1)<<3)|0,ec=ic,Ub=cb(Ab|0,Ob|0,c[ec>>2]|0,c[ec+4>>2]|0)|0,ec=C,Ob=cb(ec>>31>>>7|0,0,Ub|0,ec|0)|0,Ab=ab(Ob|0,C|0,25)|0,Ob=C,vb=fb(Ab|0,Ob|0,25)|0,fc=bb(Ub|0,ec|0,vb|0,C|0)|0,vb=ic,c[vb>>2]=fc,c[vb+4>>2]=C,Pb=Pb+2|0,vb=m+(Pb<<3)|0,fc=vb,zb=cb(Ab|0,Ob|0,c[fc>>2]|0,c[fc+4>>2]|0)|0,lc=C,fc=vb,c[fc>>2]=zb,c[fc+4>>2]=lc;while(Pb>>>0<10);Pb=ka;lc=c[Pb>>2]|0;zb=c[Pb+4>>2]|0;Pb=m;mc=c[Pb>>2]|0;rb=c[Pb+4>>2]|0;Pb=lb(lc|0,zb|0,18,0)|0;ub=C;Bb=cb(mc|0,rb|0,lc|0,zb|0)|0;zb=cb(Bb|0,C|0,Pb|0,ub|0)|0;ub=C;Pb=ka;c[Pb>>2]=0;c[Pb+4>>2]=0;Pb=cb(ub>>31>>>6|0,0,zb|0,ub|0)|0;Bb=ab(Pb|0,C|0,26)|0;Pb=C;lc=fb(Bb|0,Pb|0,26)|0;rb=bb(zb|0,ub|0,lc|0,C|0)|0;lc=m;c[lc>>2]=rb;c[lc+4>>2]=C;lc=ja;rb=cb(Bb|0,Pb|0,c[lc>>2]|0,c[lc+4>>2]|0)|0;lc=ja;c[lc>>2]=rb;c[lc+4>>2]=C;D=Za;E=o;e=D+80|0;do c[D>>2]=c[E>>2],D=D+4|0,E=E+4|0;while((D|0)<(e|0));D=$a;E=m;e=D+80|0;do c[D>>2]=c[E>>2],D=D+4|0,E=E+4|0;while((D|0)<(e|0));Na(j,gb);Na(k,ib);Ma(hb,j,k);lc=hb+144|0;rb=c[lc>>2]|0;Pb=c[lc+4>>2]|0;lc=hb+64|0;Bb=lc;ub=c[Bb>>2]|0;zb=c[Bb+4>>2]|0;Bb=lb(rb|0,Pb|0,18,0)|0;mc=C;fc=cb(ub|0,zb|0,rb|0,Pb|0)|0;Pb=cb(fc|0,C|0,Bb|0,mc|0)|0;mc=lc;c[mc>>2]=Pb;c[mc+4>>2]=C;mc=hb+136|0;Pb=c[mc>>2]|0;lc=c[mc+4>>2]|0;mc=hb+56|0;Bb=mc;fc=c[Bb>>2]|0;rb=c[Bb+4>>2]|0;Bb=lb(Pb|0,lc|0,18,0)|0;zb=C;ub=cb(fc|0,rb|0,Pb|0,lc|0)|0;lc=cb(ub|0,C|0,Bb|0,zb|0)|0;zb=mc;c[zb>>2]=lc;c[zb+4>>2]=C;zb=hb+128|0;lc=c[zb>>2]|0;mc=c[zb+4>>2]|0;zb=hb+48|0;Bb=zb;ub=c[Bb>>2]|0;Pb=c[Bb+4>>2]|0;Bb=lb(lc|0,mc|0,18,0)|0;rb=C;fc=cb(ub|0,Pb|0,lc|0,mc|0)|0;mc=cb(fc|0,C|0,Bb|0,rb|0)|0;rb=zb;c[rb>>2]=mc;c[rb+4>>2]=C;rb=hb+120|0;mc=c[rb>>2]|0;zb=c[rb+4>>2]|0;rb=hb+40|0;Bb=rb;fc=c[Bb>>2]|0;lc=c[Bb+4>>2]|0;Bb=lb(mc|0,zb|0,18,0)|0;Pb=C;ub=cb(fc|0,lc|0,mc|0,zb|0)|0;zb=cb(ub|0,C|0,Bb|0,Pb|0)|0;Pb=rb;c[Pb>>2]=zb;c[Pb+4>>2]=C;Pb=hb+112|0;zb=c[Pb>>2]|0;rb=c[Pb+4>>2]|0;Pb=hb+32|0;Bb=Pb;ub=c[Bb>>2]|0;mc=c[Bb+4>>2]|0;Bb=lb(zb|0,rb|0,18,0)|0;lc=C;fc=cb(ub|0,mc|0,zb|0,rb|0)|0;rb=cb(fc|0,C|0,Bb|0,lc|0)|0;lc=Pb;c[lc>>2]=rb;c[lc+4>>2]=C;lc=hb+104|0;rb=c[lc>>2]|0;Pb=c[lc+4>>2]|0;lc=hb+24|0;Bb=lc;fc=c[Bb>>2]|0;zb=c[Bb+4>>2]|0;Bb=lb(rb|0,Pb|0,18,0)|0;mc=C;ub=cb(fc|0,zb|0,rb|0,Pb|0)|0;Pb=cb(ub|0,C|0,Bb|0,mc|0)|0;mc=lc;c[mc>>2]=Pb;c[mc+4>>2]=C;mc=hb+96|0;Pb=c[mc>>2]|0;lc=c[mc+4>>2]|0;mc=hb+16|0;Bb=mc;ub=c[Bb>>2]|0;rb=c[Bb+4>>2]|0;Bb=lb(Pb|0,lc|0,18,0)|0;zb=C;fc=cb(ub|0,rb|0,Pb|0,lc|0)|0;lc=cb(fc|0,C|0,Bb|0,zb|0)|0;zb=mc;c[zb>>2]=lc;c[zb+4>>2]=C;zb=hb+88|0;lc=c[zb>>2]|0;mc=c[zb+4>>2]|0;zb=hb+8|0;Bb=zb;fc=c[Bb>>2]|0;Pb=c[Bb+4>>2]|0;Bb=lb(lc|0,mc|0,18,0)|0;rb=C;ub=cb(fc|0,Pb|0,lc|0,mc|0)|0;mc=cb(ub|0,C|0,Bb|0,rb|0)|0;rb=zb;c[rb>>2]=mc;c[rb+4>>2]=C;rb=hb+80|0;mc=rb;Bb=c[mc>>2]|0;ub=c[mc+4>>2]|0;mc=hb;lc=c[mc>>2]|0;Pb=c[mc+4>>2]|0;mc=lb(Bb|0,ub|0,18,0)|0;fc=C;vb=cb(lc|0,Pb|0,Bb|0,ub|0)|0;ub=cb(vb|0,C|0,mc|0,fc|0)|0;fc=C;mc=hb;c[mc>>2]=ub;c[mc+4>>2]=fc;mc=rb;c[mc>>2]=0;c[mc+4>>2]=0;mc=fc;fc=ub;ub=0;do vb=cb(mc>>31>>>6|0,0,fc|0,mc|0)|0,Bb=ab(vb|0,C|0,26)|0,vb=C,Pb=fb(Bb|0,vb|0,26)|0,lc=bb(fc|0,mc|0,Pb|0,C|0)|0,Pb=hb+(ub<<3)|0,c[Pb>>2]=lc,c[Pb+4>>2]=C,Pb=hb+((ub|1)<<3)|0,lc=Pb,Ob=cb(Bb|0,vb|0,c[lc>>2]|0,c[lc+4>>2]|0)|0,lc=C,vb=cb(lc>>31>>>7|0,0,Ob|0,lc|0)|0,Bb=ab(vb|0,C|0,25)|0,vb=C,Ab=fb(Bb|0,vb|0,25)|0,ic=bb(Ob|0,lc|0,Ab|0,C|0)|0,Ab=Pb,c[Ab>>2]=ic,c[Ab+4>>2]=C,ub=ub+2|0,Ab=hb+(ub<<3)|0,ic=Ab,fc=cb(Bb|0,vb|0,c[ic>>2]|0,c[ic+4>>2]|0)|0,mc=C,ic=Ab,c[ic>>2]=fc,c[ic+4>>2]=mc;while(ub>>>0<10);ub=rb;mc=c[ub>>2]|0;fc=c[ub+4>>2]|0;ub=hb;ic=c[ub>>2]|0;Ab=c[ub+4>>2]|0;ub=lb(mc|0,fc|0,18,0)|0;vb=C;Bb=cb(ic|0,Ab|0,mc|0,fc|0)|0;fc=cb(Bb|0,C|0,ub|0,vb|0)|0;vb=C;ub=rb;c[ub>>2]=0;c[ub+4>>2]=0;ub=cb(vb>>31>>>6|0,0,fc|0,vb|0)|0;Bb=ab(ub|0,C|0,26)|0;ub=C;mc=fb(Bb|0,ub|0,26)|0;Ab=bb(fc|0,vb|0,mc|0,C|0)|0;mc=hb;c[mc>>2]=Ab;c[mc+4>>2]=C;mc=zb;Ab=cb(Bb|0,ub|0,c[mc>>2]|0,c[mc+4>>2]|0)|0;mc=zb;c[mc>>2]=Ab;c[mc+4>>2]=C;mc=j;Ab=c[mc>>2]|0;ub=c[mc+4>>2]|0;mc=k;Bb=bb(Ab|0,ub|0,c[mc>>2]|0,c[mc+4>>2]|0)|0;mc=C;vb=k;c[vb>>2]=Bb;c[vb+4>>2]=mc;vb=na;fc=c[vb>>2]|0;ic=c[vb+4>>2]|0;vb=oa;Pb=bb(fc|0,ic|0,c[vb>>2]|0,c[vb+4>>2]|0)|0;vb=C;lc=oa;c[lc>>2]=Pb;c[lc+4>>2]=vb;lc=pa;Ob=c[lc>>2]|0;ec=c[lc+4>>2]|0;lc=qa;Ub=bb(Ob|0,ec|0,c[lc>>2]|0,c[lc+4>>2]|0)|0;lc=C;Kb=qa;c[Kb>>2]=Ub;c[Kb+4>>2]=lc;Kb=ra;Jb=c[Kb>>2]|0;Ib=c[Kb+4>>2]|0;Kb=sa;Yb=bb(Jb|0,Ib|0,c[Kb>>2]|0,c[Kb+4>>2]|0)|0;Kb=C;Xb=sa;c[Xb>>2]=Yb;c[Xb+4>>2]=Kb;Xb=ta;gc=c[Xb>>2]|0;Wb=c[Xb+4>>2]|0;Xb=ua;Eb=bb(gc|0,Wb|0,c[Xb>>2]|0,c[Xb+4>>2]|0)|0;Xb=C;Mb=ua;c[Mb>>2]=Eb;c[Mb+4>>2]=Xb;Mb=va;Vb=c[Mb>>2]|0;cc=c[Mb+4>>2]|0;Mb=wa;hc=bb(Vb|0,cc|0,c[Mb>>2]|0,c[Mb+4>>2]|0)|0;Mb=C;wb=wa;c[wb>>2]=hc;c[wb+4>>2]=Mb;wb=xa;yb=c[wb>>2]|0;ob=c[wb+4>>2]|0;wb=ya;sb=bb(yb|0,ob|0,c[wb>>2]|0,c[wb+4>>2]|0)|0;wb=C;bc=ya;c[bc>>2]=sb;c[bc+4>>2]=wb;bc=za;Qb=c[bc>>2]|0;Db=c[bc+4>>2]|0;bc=Aa;Fb=bb(Qb|0,Db|0,c[bc>>2]|0,c[bc+4>>2]|0)|0;bc=C;dc=Aa;c[dc>>2]=Fb;c[dc+4>>2]=bc;dc=Ba;Lb=c[dc>>2]|0;Tb=c[dc+4>>2]|0;dc=Ca;pb=bb(Lb|0,Tb|0,c[dc>>2]|0,c[dc+4>>2]|0)|0;dc=C;$b=Ca;c[$b>>2]=pb;c[$b+4>>2]=dc;$b=Da;Zb=c[$b>>2]|0;qb=c[$b+4>>2]|0;$b=Ea;Hb=bb(Zb|0,qb|0,c[$b>>2]|0,c[$b+4>>2]|0)|0;$b=C;_b=Ea;c[_b>>2]=Hb;c[_b+4>>2]=$b;D=Fa;e=D+72|0;do c[D>>2]=0,D=D+4|0;while((D|0)<(e|0));zb=lb(Bb|0,mc|0,121665,0)|0;rb=C;_b=h;c[_b>>2]=zb;c[_b+4>>2]=rb;_b=lb(Pb|0,vb|0,121665,0)|0;tb=Ga;c[tb>>2]=_b;c[tb+4>>2]=C;tb=lb(Ub|0,lc|0,121665,0)|0;_b=Ha;c[_b>>2]=tb;c[_b+4>>2]=C;_b=lb(Yb|0,Kb|0,121665,0)|0;tb=Ia;c[tb>>2]=_b;c[tb+4>>2]=C;tb=lb(Eb|0,Xb|0,121665,0)|0;_b=Ja;c[_b>>2]=tb;c[_b+4>>2]=C;_b=lb(hc|0,Mb|0,121665,0)|0;tb=Ka;c[tb>>2]=_b;c[tb+4>>2]=C;tb=lb(sb|0,wb|0,121665,0)|0;_b=Oa;c[_b>>2]=tb;c[_b+4>>2]=C;_b=lb(Fb|0,bc|0,121665,0)|0;tb=Pa;c[tb>>2]=_b;c[tb+4>>2]=C;tb=lb(pb|0,dc|0,121665,0)|0;_b=Qa;c[_b>>2]=tb;c[_b+4>>2]=C;_b=lb(Hb|0,$b|0,121665,0)|0;tb=Ra;c[tb>>2]=_b;c[tb+4>>2]=C;tb=Fa;c[tb>>2]=0;c[tb+4>>2]=0;tb=rb;rb=zb;zb=0;do _b=cb(tb>>31>>>6|0,0,rb|0,tb|0)|0,Rb=ab(_b|0,C|0,26)|0,_b=C,Sb=fb(Rb|0,_b|0,26)|0,Nb=bb(rb|0,tb|0,Sb|0,C|0)|0,Sb=h+(zb<<3)|0,c[Sb>>2]=Nb,c[Sb+4>>2]=C,Sb=h+((zb|1)<<3)|0,Nb=Sb,Cb=cb(Rb|0,_b|0,c[Nb>>2]|0,c[Nb+4>>2]|0)|0,Nb=C,_b=cb(Nb>>31>>>7|0,0,Cb|0,Nb|0)|0,Rb=ab(_b|0,C|0,25)|0,_b=C,kc=fb(Rb|0,_b|0,25)|0,jc=bb(Cb|0,Nb|0,kc|0,C|0)|0,kc=Sb,c[kc>>2]=jc,c[kc+4>>2]=C,zb=zb+2|0,kc=h+(zb<<3)|0,jc=kc,rb=cb(Rb|0,_b|0,c[jc>>2]|0,c[jc+4>>2]|0)|0,tb=C,jc=kc,c[jc>>2]=rb,c[jc+4>>2]=tb;while(zb>>>0<10);zb=Fa;tb=c[zb>>2]|0;rb=c[zb+4>>2]|0;zb=h;$b=c[zb>>2]|0;Hb=c[zb+4>>2]|0;zb=lb(tb|0,rb|0,18,0)|0;dc=C;pb=cb($b|0,Hb|0,tb|0,rb|0)|0;rb=cb(pb|0,C|0,zb|0,dc|0)|0;dc=C;zb=Fa;c[zb>>2]=0;c[zb+4>>2]=0;zb=cb(dc>>31>>>6|0,0,rb|0,dc|0)|0;pb=ab(zb|0,C|0,26)|0;zb=C;tb=fb(pb|0,zb|0,26)|0;Hb=C;$b=Ga;bc=c[$b>>2]|0;Fb=c[$b+4>>2]|0;$b=cb(rb|0,dc|0,Ab|0,ub|0)|0;dc=bb($b|0,C|0,tb|0,Hb|0)|0;Hb=h;c[Hb>>2]=dc;c[Hb+4>>2]=C;Hb=cb(bc|0,Fb|0,fc|0,ic|0)|0;Fb=cb(Hb|0,C|0,pb|0,zb|0)|0;zb=Ga;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Ha;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Ob|0,ec|0)|0;zb=Ha;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Ia;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Jb|0,Ib|0)|0;zb=Ia;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Ja;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,gc|0,Wb|0)|0;zb=Ja;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Ka;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Vb|0,cc|0)|0;zb=Ka;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Oa;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,yb|0,ob|0)|0;zb=Oa;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Pa;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Qb|0,Db|0)|0;zb=Pa;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Qa;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Lb|0,Tb|0)|0;zb=Qa;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=Ra;Fb=cb(c[zb>>2]|0,c[zb+4>>2]|0,Zb|0,qb|0)|0;zb=Ra;c[zb>>2]=Fb;c[zb+4>>2]=C;Ma(jb,k,h);zb=jb+144|0;Fb=c[zb>>2]|0;pb=c[zb+4>>2]|0;zb=jb+64|0;Hb=zb;bc=c[Hb>>2]|0;dc=c[Hb+4>>2]|0;Hb=lb(Fb|0,pb|0,18,0)|0;tb=C;$b=cb(bc|0,dc|0,Fb|0,pb|0)|0;pb=cb($b|0,C|0,Hb|0,tb|0)|0;tb=zb;c[tb>>2]=pb;c[tb+4>>2]=C;tb=jb+136|0;pb=c[tb>>2]|0;zb=c[tb+4>>2]|0;tb=jb+56|0;Hb=tb;$b=c[Hb>>2]|0;Fb=c[Hb+4>>2]|0;Hb=lb(pb|0,zb|0,18,0)|0;dc=C;bc=cb($b|0,Fb|0,pb|0,zb|0)|0;zb=cb(bc|0,C|0,Hb|0,dc|0)|0;dc=tb;c[dc>>2]=zb;c[dc+4>>2]=C;dc=jb+128|0;zb=c[dc>>2]|0;tb=c[dc+4>>2]|0;dc=jb+48|0;Hb=dc;bc=c[Hb>>2]|0;pb=c[Hb+4>>2]|0;Hb=lb(zb|0,tb|0,18,0)|0;Fb=C;$b=cb(bc|0,pb|0,zb|0,tb|0)|0;tb=cb($b|0,C|0,Hb|0,Fb|0)|0;Fb=dc;c[Fb>>2]=tb;c[Fb+4>>2]=C;Fb=jb+120|0;tb=c[Fb>>2]|0;dc=c[Fb+4>>2]|0;Fb=jb+40|0;Hb=Fb;$b=c[Hb>>2]|0;zb=c[Hb+4>>2]|0;Hb=lb(tb|0,dc|0,18,0)|0;pb=C;bc=cb($b|0,zb|0,tb|0,dc|0)|0;dc=cb(bc|0,C|0,Hb|0,pb|0)|0;pb=Fb;c[pb>>2]=dc;c[pb+4>>2]=C;pb=jb+112|0;dc=c[pb>>2]|0;Fb=c[pb+4>>2]|0;pb=jb+32|0;Hb=pb;bc=c[Hb>>2]|0;tb=c[Hb+4>>2]|0;Hb=lb(dc|0,Fb|0,18,0)|0;zb=C;$b=cb(bc|0,tb|0,dc|0,Fb|0)|0;Fb=cb($b|0,C|0,Hb|0,zb|0)|0;zb=pb;c[zb>>2]=Fb;c[zb+4>>2]=C;zb=jb+104|0;Fb=c[zb>>2]|0;pb=c[zb+4>>2]|0;zb=jb+24|0;Hb=zb;$b=c[Hb>>2]|0;dc=c[Hb+4>>2]|0;Hb=lb(Fb|0,pb|0,18,0)|0;tb=C;bc=cb($b|0,dc|0,Fb|0,pb|0)|0;pb=cb(bc|0,C|0,Hb|0,tb|0)|0;tb=zb;c[tb>>2]=pb;c[tb+4>>2]=C;tb=jb+96|0;pb=c[tb>>2]|0;zb=c[tb+4>>2]|0;tb=jb+16|0;Hb=tb;bc=c[Hb>>2]|0;Fb=c[Hb+4>>2]|0;Hb=lb(pb|0,zb|0,18,0)|0;dc=C;$b=cb(bc|0,Fb|0,pb|0,zb|0)|0;zb=cb($b|0,C|0,Hb|0,dc|0)|0;dc=tb;c[dc>>2]=zb;c[dc+4>>2]=C;dc=jb+88|0;zb=c[dc>>2]|0;tb=c[dc+4>>2]|0;dc=jb+8|0;Hb=dc;$b=c[Hb>>2]|0;pb=c[Hb+4>>2]|0;Hb=lb(zb|0,tb|0,18,0)|0;Fb=C;bc=cb($b|0,pb|0,zb|0,tb|0)|0;tb=cb(bc|0,C|0,Hb|0,Fb|0)|0;Fb=dc;c[Fb>>2]=tb;c[Fb+4>>2]=C;Fb=jb+80|0;tb=Fb;Hb=c[tb>>2]|0;bc=c[tb+4>>2]|0;tb=jb;zb=c[tb>>2]|0;pb=c[tb+4>>2]|0;tb=lb(Hb|0,bc|0,18,0)|0;$b=C;rb=cb(zb|0,pb|0,Hb|0,bc|0)|0;bc=cb(rb|0,C|0,tb|0,$b|0)|0;$b=C;tb=jb;c[tb>>2]=bc;c[tb+4>>2]=$b;tb=Fb;c[tb>>2]=0;c[tb+4>>2]=0;tb=$b;$b=bc;bc=0;do rb=cb(tb>>31>>>6|0,0,$b|0,tb|0)|0,Hb=ab(rb|0,C|0,26)|0,rb=C,pb=fb(Hb|0,rb|0,26)|0,zb=bb($b|0,tb|0,pb|0,C|0)|0,pb=jb+(bc<<3)|0,c[pb>>2]=zb,c[pb+4>>2]=C,pb=jb+((bc|1)<<3)|0,zb=pb,wb=cb(Hb|0,rb|0,c[zb>>2]|0,c[zb+4>>2]|0)|0,zb=C,rb=cb(zb>>31>>>7|0,0,wb|0,zb|0)|0,Hb=ab(rb|0,C|0,25)|0,rb=C,sb=fb(Hb|0,rb|0,25)|0,Mb=bb(wb|0,zb|0,sb|0,C|0)|0,sb=pb,c[sb>>2]=Mb,c[sb+4>>2]=C,bc=bc+2|0,sb=jb+(bc<<3)|0,Mb=sb,$b=cb(Hb|0,rb|0,c[Mb>>2]|0,c[Mb+4>>2]|0)|0,tb=C,Mb=sb,c[Mb>>2]=$b,c[Mb+4>>2]=tb;while(bc>>>0<10);bc=Fb;tb=c[bc>>2]|0;$b=c[bc+4>>2]|0;bc=jb;qb=c[bc>>2]|0;Zb=c[bc+4>>2]|0;bc=lb(tb|0,$b|0,18,0)|0;Tb=C;Lb=cb(qb|0,Zb|0,tb|0,$b|0)|0;$b=cb(Lb|0,C|0,bc|0,Tb|0)|0;Tb=C;bc=Fb;c[bc>>2]=0;c[bc+4>>2]=0;bc=cb(Tb>>31>>>6|0,0,$b|0,Tb|0)|0;Lb=ab(bc|0,C|0,26)|0;bc=C;tb=fb(Lb|0,bc|0,26)|0;Zb=bb($b|0,Tb|0,tb|0,C|0)|0;tb=jb;c[tb>>2]=Zb;c[tb+4>>2]=C;tb=dc;Zb=cb(Lb|0,bc|0,c[tb>>2]|0,c[tb+4>>2]|0)|0;tb=dc;c[tb>>2]=Zb;c[tb+4>>2]=C;tb=0;do Zb=hb+(tb<<3)|0,bc=Zb,Lb=c[bc>>2]|0,Tb=c[bc+4>>2]|0,bc=Za+(tb<<3)|0,$b=bc,qb=c[$b>>2]|0,Db=c[$b+4>>2]|0,$b=(qb^Lb)&mb,Qb=(Db^Tb)&nb,Tb=ab(0,$b^Lb|0,32)|0,Lb=Zb,c[Lb>>2]=Tb,c[Lb+4>>2]=C,Lb=ab(0,$b^qb|0,32)|0,qb=bc,c[qb>>2]=Lb,c[qb+4>>2]=C,tb=tb+1|0;while((tb|0)!=10);nc=0;do tb=jb+(nc<<3)|0,dc=tb,Fb=c[dc>>2]|0,qb=c[dc+4>>2]|0,dc=$a+(nc<<3)|0,Lb=dc,bc=c[Lb>>2]|0,$b=c[Lb+4>>2]|0,Lb=(bc^Fb)&mb,Tb=($b^qb)&nb,qb=ab(0,Lb^Fb|0,32)|0,Fb=tb,c[Fb>>2]=qb,c[Fb+4>>2]=C,Fb=ab(0,Lb^bc|0,32)|0,bc=dc,c[bc>>2]=Fb,c[bc+4>>2]=C,nc=nc+1|0;while((nc|0)!=10);Xa=Xa+1|0;if((Xa|0)==8){oc=Ya;pc=Za;qc=_a;rc=$a;sc=gb;tc=hb;uc=ib;vc=jb;break}else nb=jb,mb=hb,bc=$a,Fb=Za,w=kb<<1&255,jb=ib,ib=nb,hb=gb,gb=mb,$a=_a,_a=bc,Za=Ya,Ya=Fb}Ya=Sa+1|0;if((Ya|0)==32){wc=tc;xc=vc;break}else Sa=Ya,Ta=pc,Ua=oc,t=rc,Va=qc,u=tc,Wa=sc,v=vc,s=uc}D=y;E=wc;e=D+80|0;do c[D>>2]=c[E>>2],D=D+4|0,E=E+4|0;while((D|0)<(e|0));D=z;E=xc;e=D+80|0;do c[D>>2]=c[E>>2],D=D+4|0,E=E+4|0;while((D|0)<(e|0));Na(h,z);Na(r,h);Na(q,r);La(j,q,z);La(k,j,h);Na(q,k);La(l,q,j);Na(q,l);Na(r,q);Na(q,r);Na(r,q);Na(q,r);La(m,q,l);Na(q,m);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);La(n,r,m);Na(q,n);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);La(q,r,n);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);Na(q,r);La(o,q,m);Na(q,o);Na(r,q);m=2;do Na(q,r),Na(r,q),m=m+2|0;while((m|0)<50);La(p,r,o);Na(r,p);Na(q,r);m=2;do Na(r,q),Na(q,r),m=m+2|0;while((m|0)<100);La(r,q,p);Na(q,r);Na(r,q);p=2;do Na(q,r),Na(r,q),p=p+2|0;while((p|0)<50);La(q,r,o);Na(r,q);Na(q,r);Na(r,q);Na(q,r);Na(r,q);La(A,r,k);La(z,y,A);A=c[z>>2]|0;c[h>>2]=A;y=h+4|0;c[y>>2]=c[z+8>>2];k=h+8|0;c[k>>2]=c[z+16>>2];r=h+12|0;c[r>>2]=c[z+24>>2];q=h+16|0;c[q>>2]=c[z+32>>2];o=h+20|0;c[o>>2]=c[z+40>>2];p=h+24|0;c[p>>2]=c[z+48>>2];m=h+28|0;c[m>>2]=c[z+56>>2];n=h+32|0;c[n>>2]=c[z+64>>2];l=h+36|0;c[l>>2]=c[z+72>>2];z=A;A=0;while(1){j=h+(A<<2)|0;E=z>>31&z;!(A&1)?(D=E>>26,c[j>>2]=(_(D,-67108864)|0)+z,e=A+1|0,xc=h+(e<<2)|0,wc=(c[xc>>2]|0)+D|0,c[xc>>2]=wc,yc=wc,zc=e):(e=E>>25,c[j>>2]=(_(e,-33554432)|0)+z,j=A+1|0,E=h+(j<<2)|0,wc=(c[E>>2]|0)+e|0,c[E>>2]=wc,yc=wc,zc=j);if((zc|0)==9)break;else z=yc,A=zc}zc=c[l>>2]|0;A=(zc>>31&zc)>>25;c[l>>2]=(_(A,-33554432)|0)+zc;zc=(A*19|0)+(c[h>>2]|0)|0;c[h>>2]=zc;A=zc;zc=0;while(1){yc=h+(zc<<2)|0;z=A>>31&A;!(zc&1)?(j=z>>26,c[yc>>2]=(_(j,-67108864)|0)+A,wc=zc+1|0,E=h+(wc<<2)|0,e=(c[E>>2]|0)+j|0,c[E>>2]=e,Ac=wc,Bc=e):(e=z>>25,c[yc>>2]=(_(e,-33554432)|0)+A,yc=zc+1|0,z=h+(yc<<2)|0,wc=(c[z>>2]|0)+e|0,c[z>>2]=wc,Ac=yc,Bc=wc);if((Ac|0)==9)break;else A=Bc,zc=Ac}Ac=c[l>>2]|0;zc=(Ac>>31&Ac)>>25;c[l>>2]=(_(zc,-33554432)|0)+Ac;Ac=(zc*19|0)+(c[h>>2]|0)|0;zc=(Ac>>31&Ac)>>26;Bc=(_(zc,-67108864)|0)+Ac|0;c[h>>2]=Bc;c[y>>2]=zc+(c[y>>2]|0);zc=Bc;Bc=0;while(1){Ac=h+(Bc<<2)|0;!(Bc&1)?(c[Ac>>2]=zc&67108863,A=Bc+1|0,wc=h+(A<<2)|0,yc=(c[wc>>2]|0)+(zc>>26)|0,c[wc>>2]=yc,Cc=A,Dc=yc):(c[Ac>>2]=zc&33554431,Ac=Bc+1|0,yc=h+(Ac<<2)|0,A=(c[yc>>2]|0)+(zc>>25)|0,c[yc>>2]=A,Cc=Ac,Dc=A);if((Cc|0)==9)break;else zc=Dc,Bc=Cc}Cc=c[l>>2]|0;c[l>>2]=Cc&33554431;Bc=((Cc>>25)*19|0)+(c[h>>2]|0)|0;c[h>>2]=Bc;Cc=Bc;Bc=0;while(1){Dc=h+(Bc<<2)|0;!(Bc&1)?(c[Dc>>2]=Cc&67108863,zc=Bc+1|0,A=h+(zc<<2)|0,Ac=(c[A>>2]|0)+(Cc>>26)|0,c[A>>2]=Ac,Ec=zc,Fc=Ac):(c[Dc>>2]=Cc&33554431,Dc=Bc+1|0,Ac=h+(Dc<<2)|0,zc=(c[Ac>>2]|0)+(Cc>>25)|0,c[Ac>>2]=zc,Ec=Dc,Fc=zc);if((Ec|0)==9)break;else Cc=Fc,Bc=Ec}Ec=c[l>>2]|0;Bc=Ec&33554431;c[l>>2]=Bc;Fc=((Ec>>25)*19|0)+(c[h>>2]|0)|0;c[h>>2]=Fc;Ec=1;Cc=~(Fc+-67108845>>31);while(1){zc=c[h+(Ec<<2)>>2]|0;!(Ec&1)?(Dc=zc<<16&(zc^-67108864),Ac=Dc<<8&Dc,Dc=Ac<<4&Ac,Ac=Dc<<2&Dc,Gc=Ac<<1&Ac):(Ac=zc<<16&(zc^-33554432),zc=Ac<<8&Ac,Ac=zc<<4&zc,zc=Ac<<2&Ac,Gc=zc<<1&zc);zc=Gc>>31&Cc;Ec=Ec+1|0;if((Ec|0)==10){Hc=zc;break}else Cc=zc}Cc=Fc-(Hc&67108845)|0;c[h>>2]=Cc;h=Hc&67108863;Fc=Hc&33554431;Ec=(c[y>>2]|0)-Fc|0;Gc=Ec<<2;zc=(c[k>>2]|0)-h|0;Ac=zc<<3;Dc=(c[r>>2]|0)-Fc|0;A=Dc<<5;yc=(c[q>>2]|0)-Hc|0;Hc=yc<<6;wc=(c[o>>2]|0)-Fc|0;c[o>>2]=wc;o=(c[p>>2]|0)-h|0;z=o<<1;e=(c[m>>2]|0)-Fc|0;E=e<<3;j=(c[n>>2]|0)-h<<4;c[y>>2]=Gc;c[k>>2]=Ac;c[r>>2]=A;c[q>>2]=Hc;c[p>>2]=z;c[m>>2]=E;c[n>>2]=j;c[l>>2]=Bc-Fc<<6;a[b>>0]=Cc;a[b+1>>0]=Cc>>>8;a[b+2>>0]=Cc>>>16;a[b+3>>0]=Gc|Cc>>>24;a[b+4>>0]=Ec>>>6;a[b+5>>0]=Ec>>>14;a[b+6>>0]=Ac|Ec>>>22;a[b+7>>0]=zc>>>5;a[b+8>>0]=zc>>>13;a[b+9>>0]=A|zc>>>21;a[b+10>>0]=Dc>>>3;a[b+11>>0]=Dc>>>11;a[b+12>>0]=Hc|Dc>>>19;a[b+13>>0]=yc>>>2;a[b+14>>0]=yc>>>10;a[b+15>>0]=yc>>>18;a[b+16>>0]=wc;a[b+17>>0]=wc>>>8;a[b+18>>0]=wc>>>16;a[b+19>>0]=wc>>>24|z;a[b+20>>0]=o>>>7;a[b+21>>0]=o>>>15;a[b+22>>0]=o>>>23|E;a[b+23>>0]=e>>>5;a[b+24>>0]=e>>>13;E=c[n>>2]|0;a[b+25>>0]=e>>>21|E;a[b+26>>0]=E>>>8;a[b+27>>0]=E>>>16;e=c[l>>2]|0;a[b+28>>0]=E>>>24|e;a[b+29>>0]=e>>>8;a[b+30>>0]=e>>>16;a[b+31>>0]=e>>>24;i=g;return 0}function La(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;e=i;i=i+160|0;f=e;Ma(f,b,d);d=f+144|0;b=c[d>>2]|0;g=c[d+4>>2]|0;d=f+64|0;h=d;j=c[h>>2]|0;k=c[h+4>>2]|0;h=lb(b|0,g|0,18,0)|0;l=C;m=cb(j|0,k|0,b|0,g|0)|0;g=cb(m|0,C|0,h|0,l|0)|0;l=d;c[l>>2]=g;c[l+4>>2]=C;l=f+136|0;g=c[l>>2]|0;d=c[l+4>>2]|0;l=f+56|0;h=l;m=c[h>>2]|0;b=c[h+4>>2]|0;h=lb(g|0,d|0,18,0)|0;k=C;j=cb(m|0,b|0,g|0,d|0)|0;d=cb(j|0,C|0,h|0,k|0)|0;k=l;c[k>>2]=d;c[k+4>>2]=C;k=f+128|0;d=c[k>>2]|0;l=c[k+4>>2]|0;k=f+48|0;h=k;j=c[h>>2]|0;g=c[h+4>>2]|0;h=lb(d|0,l|0,18,0)|0;b=C;m=cb(j|0,g|0,d|0,l|0)|0;l=cb(m|0,C|0,h|0,b|0)|0;b=k;c[b>>2]=l;c[b+4>>2]=C;b=f+120|0;l=c[b>>2]|0;k=c[b+4>>2]|0;b=f+40|0;h=b;m=c[h>>2]|0;d=c[h+4>>2]|0;h=lb(l|0,k|0,18,0)|0;g=C;j=cb(m|0,d|0,l|0,k|0)|0;k=cb(j|0,C|0,h|0,g|0)|0;g=b;c[g>>2]=k;c[g+4>>2]=C;g=f+112|0;k=c[g>>2]|0;b=c[g+4>>2]|0;g=f+32|0;h=g;j=c[h>>2]|0;l=c[h+4>>2]|0;h=lb(k|0,b|0,18,0)|0;d=C;m=cb(j|0,l|0,k|0,b|0)|0;b=cb(m|0,C|0,h|0,d|0)|0;d=g;c[d>>2]=b;c[d+4>>2]=C;d=f+104|0;b=c[d>>2]|0;g=c[d+4>>2]|0;d=f+24|0;h=d;m=c[h>>2]|0;k=c[h+4>>2]|0;h=lb(b|0,g|0,18,0)|0;l=C;j=cb(m|0,k|0,b|0,g|0)|0;g=cb(j|0,C|0,h|0,l|0)|0;l=d;c[l>>2]=g;c[l+4>>2]=C;l=f+96|0;g=c[l>>2]|0;d=c[l+4>>2]|0;l=f+16|0;h=l;j=c[h>>2]|0;b=c[h+4>>2]|0;h=lb(g|0,d|0,18,0)|0;k=C;m=cb(j|0,b|0,g|0,d|0)|0;d=cb(m|0,C|0,h|0,k|0)|0;k=l;c[k>>2]=d;c[k+4>>2]=C;k=f+88|0;d=c[k>>2]|0;l=c[k+4>>2]|0;k=f+8|0;h=k;m=c[h>>2]|0;g=c[h+4>>2]|0;h=lb(d|0,l|0,18,0)|0;b=C;j=cb(m|0,g|0,d|0,l|0)|0;l=cb(j|0,C|0,h|0,b|0)|0;b=k;c[b>>2]=l;c[b+4>>2]=C;b=f+80|0;l=b;h=c[l>>2]|0;j=c[l+4>>2]|0;l=f;d=c[l>>2]|0;g=c[l+4>>2]|0;l=lb(h|0,j|0,18,0)|0;m=C;n=cb(d|0,g|0,h|0,j|0)|0;j=cb(n|0,C|0,l|0,m|0)|0;m=C;l=f;c[l>>2]=j;c[l+4>>2]=m;l=b;c[l>>2]=0;c[l+4>>2]=0;l=m;m=j;j=0;do n=cb(l>>31>>>6|0,0,m|0,l|0)|0,h=ab(n|0,C|0,26)|0,n=C,g=fb(h|0,n|0,26)|0,d=bb(m|0,l|0,g|0,C|0)|0,g=f+(j<<3)|0,c[g>>2]=d,c[g+4>>2]=C,g=f+((j|1)<<3)|0,d=g,o=cb(h|0,n|0,c[d>>2]|0,c[d+4>>2]|0)|0,d=C,n=cb(d>>31>>>7|0,0,o|0,d|0)|0,h=ab(n|0,C|0,25)|0,n=C,p=fb(h|0,n|0,25)|0,q=bb(o|0,d|0,p|0,C|0)|0,p=g,c[p>>2]=q,c[p+4>>2]=C,j=j+2|0,p=f+(j<<3)|0,q=p,m=cb(h|0,n|0,c[q>>2]|0,c[q+4>>2]|0)|0,l=C,q=p,c[q>>2]=m,c[q+4>>2]=l;while(j>>>0<10);j=b;l=c[j>>2]|0;m=c[j+4>>2]|0;j=f;q=c[j>>2]|0;p=c[j+4>>2]|0;j=lb(l|0,m|0,18,0)|0;n=C;h=cb(q|0,p|0,l|0,m|0)|0;m=cb(h|0,C|0,j|0,n|0)|0;n=C;j=b;c[j>>2]=0;c[j+4>>2]=0;j=cb(n>>31>>>6|0,0,m|0,n|0)|0;b=ab(j|0,C|0,26)|0;j=C;h=fb(b|0,j|0,26)|0;l=bb(m|0,n|0,h|0,C|0)|0;h=f;c[h>>2]=l;c[h+4>>2]=C;h=k;l=cb(b|0,j|0,c[h>>2]|0,c[h+4>>2]|0)|0;h=k;c[h>>2]=l;c[h+4>>2]=C;h=a;a=f;f=h+80|0;do c[h>>2]=c[a>>2],h=h+4|0,a=a+4|0;while((h|0)<(f|0));i=e;return}function Ma(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;e=ab(0,c[b>>2]|0,32)|0;f=C;g=ab(0,c[d>>2]|0,32)|0;h=lb(g|0,C|0,e|0,f|0)|0;f=a;c[f>>2]=h;c[f+4>>2]=C;f=ab(0,c[b>>2]|0,32)|0;h=C;e=d+8|0;g=ab(0,c[e>>2]|0,32)|0;i=lb(g|0,C|0,f|0,h|0)|0;h=C;f=b+8|0;g=ab(0,c[f>>2]|0,32)|0;j=C;k=ab(0,c[d>>2]|0,32)|0;l=lb(k|0,C|0,g|0,j|0)|0;j=cb(l|0,C|0,i|0,h|0)|0;h=a+8|0;c[h>>2]=j;c[h+4>>2]=C;h=ab(0,c[f>>2]|0,31)|0;j=C;i=ab(0,c[e>>2]|0,32)|0;l=lb(i|0,C|0,h|0,j|0)|0;j=C;h=ab(0,c[b>>2]|0,32)|0;i=C;g=d+16|0;k=ab(0,c[g>>2]|0,32)|0;m=lb(k|0,C|0,h|0,i|0)|0;i=cb(m|0,C|0,l|0,j|0)|0;j=C;l=b+16|0;m=ab(0,c[l>>2]|0,32)|0;h=C;k=ab(0,c[d>>2]|0,32)|0;n=lb(k|0,C|0,m|0,h|0)|0;h=cb(i|0,j|0,n|0,C|0)|0;n=a+16|0;c[n>>2]=h;c[n+4>>2]=C;n=ab(0,c[f>>2]|0,32)|0;h=C;j=ab(0,c[g>>2]|0,32)|0;i=lb(j|0,C|0,n|0,h|0)|0;h=C;n=ab(0,c[l>>2]|0,32)|0;j=C;m=ab(0,c[e>>2]|0,32)|0;k=lb(m|0,C|0,n|0,j|0)|0;j=cb(k|0,C|0,i|0,h|0)|0;h=C;i=ab(0,c[b>>2]|0,32)|0;k=C;n=d+24|0;m=ab(0,c[n>>2]|0,32)|0;o=lb(m|0,C|0,i|0,k|0)|0;k=cb(j|0,h|0,o|0,C|0)|0;o=C;h=b+24|0;j=ab(0,c[h>>2]|0,32)|0;i=C;m=ab(0,c[d>>2]|0,32)|0;p=lb(m|0,C|0,j|0,i|0)|0;i=cb(k|0,o|0,p|0,C|0)|0;p=a+24|0;c[p>>2]=i;c[p+4>>2]=C;p=ab(0,c[l>>2]|0,32)|0;i=C;o=ab(0,c[g>>2]|0,32)|0;k=lb(o|0,C|0,p|0,i|0)|0;i=C;p=ab(0,c[f>>2]|0,32)|0;o=C;j=ab(0,c[n>>2]|0,32)|0;m=lb(j|0,C|0,p|0,o|0)|0;o=C;p=ab(0,c[h>>2]|0,32)|0;j=C;q=ab(0,c[e>>2]|0,32)|0;r=lb(q|0,C|0,p|0,j|0)|0;j=cb(r|0,C|0,m|0,o|0)|0;o=fb(j|0,C|0,1)|0;j=cb(o|0,C|0,k|0,i|0)|0;i=C;k=ab(0,c[b>>2]|0,32)|0;o=C;m=d+32|0;r=ab(0,c[m>>2]|0,32)|0;p=lb(r|0,C|0,k|0,o|0)|0;o=cb(j|0,i|0,p|0,C|0)|0;p=C;i=b+32|0;j=ab(0,c[i>>2]|0,32)|0;k=C;r=ab(0,c[d>>2]|0,32)|0;q=lb(r|0,C|0,j|0,k|0)|0;k=cb(o|0,p|0,q|0,C|0)|0;q=a+32|0;c[q>>2]=k;c[q+4>>2]=C;q=ab(0,c[l>>2]|0,32)|0;k=C;p=ab(0,c[n>>2]|0,32)|0;o=lb(p|0,C|0,q|0,k|0)|0;k=C;q=ab(0,c[h>>2]|0,32)|0;p=C;j=ab(0,c[g>>2]|0,32)|0;r=lb(j|0,C|0,q|0,p|0)|0;p=cb(r|0,C|0,o|0,k|0)|0;k=C;o=ab(0,c[f>>2]|0,32)|0;r=C;q=ab(0,c[m>>2]|0,32)|0;j=lb(q|0,C|0,o|0,r|0)|0;r=cb(p|0,k|0,j|0,C|0)|0;j=C;k=ab(0,c[i>>2]|0,32)|0;p=C;o=ab(0,c[e>>2]|0,32)|0;q=lb(o|0,C|0,k|0,p|0)|0;p=cb(r|0,j|0,q|0,C|0)|0;q=C;j=ab(0,c[b>>2]|0,32)|0;r=C;k=d+40|0;o=ab(0,c[k>>2]|0,32)|0;s=lb(o|0,C|0,j|0,r|0)|0;r=cb(p|0,q|0,s|0,C|0)|0;s=C;q=b+40|0;p=ab(0,c[q>>2]|0,32)|0;j=C;o=ab(0,c[d>>2]|0,32)|0;t=lb(o|0,C|0,p|0,j|0)|0;j=cb(r|0,s|0,t|0,C|0)|0;t=a+40|0;c[t>>2]=j;c[t+4>>2]=C;t=ab(0,c[h>>2]|0,32)|0;j=C;s=ab(0,c[n>>2]|0,32)|0;r=lb(s|0,C|0,t|0,j|0)|0;j=C;t=ab(0,c[f>>2]|0,32)|0;s=C;p=ab(0,c[k>>2]|0,32)|0;o=lb(p|0,C|0,t|0,s|0)|0;s=cb(o|0,C|0,r|0,j|0)|0;j=C;r=ab(0,c[q>>2]|0,32)|0;o=C;t=ab(0,c[e>>2]|0,32)|0;p=lb(t|0,C|0,r|0,o|0)|0;o=cb(s|0,j|0,p|0,C|0)|0;p=fb(o|0,C|0,1)|0;o=C;j=ab(0,c[l>>2]|0,32)|0;s=C;r=ab(0,c[m>>2]|0,32)|0;t=lb(r|0,C|0,j|0,s|0)|0;s=cb(p|0,o|0,t|0,C|0)|0;t=C;o=ab(0,c[i>>2]|0,32)|0;p=C;j=ab(0,c[g>>2]|0,32)|0;r=lb(j|0,C|0,o|0,p|0)|0;p=cb(s|0,t|0,r|0,C|0)|0;r=C;t=ab(0,c[b>>2]|0,32)|0;s=C;o=d+48|0;j=ab(0,c[o>>2]|0,32)|0;u=lb(j|0,C|0,t|0,s|0)|0;s=cb(p|0,r|0,u|0,C|0)|0;u=C;r=b+48|0;p=ab(0,c[r>>2]|0,32)|0;t=C;j=ab(0,c[d>>2]|0,32)|0;v=lb(j|0,C|0,p|0,t|0)|0;t=cb(s|0,u|0,v|0,C|0)|0;v=a+48|0;c[v>>2]=t;c[v+4>>2]=C;v=ab(0,c[h>>2]|0,32)|0;t=C;u=ab(0,c[m>>2]|0,32)|0;s=lb(u|0,C|0,v|0,t|0)|0;t=C;v=ab(0,c[i>>2]|0,32)|0;u=C;p=ab(0,c[n>>2]|0,32)|0;j=lb(p|0,C|0,v|0,u|0)|0;u=cb(j|0,C|0,s|0,t|0)|0;t=C;s=ab(0,c[l>>2]|0,32)|0;j=C;v=ab(0,c[k>>2]|0,32)|0;p=lb(v|0,C|0,s|0,j|0)|0;j=cb(u|0,t|0,p|0,C|0)|0;p=C;t=ab(0,c[q>>2]|0,32)|0;u=C;s=ab(0,c[g>>2]|0,32)|0;v=lb(s|0,C|0,t|0,u|0)|0;u=cb(j|0,p|0,v|0,C|0)|0;v=C;p=ab(0,c[f>>2]|0,32)|0;j=C;t=ab(0,c[o>>2]|0,32)|0;s=lb(t|0,C|0,p|0,j|0)|0;j=cb(u|0,v|0,s|0,C|0)|0;s=C;v=ab(0,c[r>>2]|0,32)|0;u=C;p=ab(0,c[e>>2]|0,32)|0;t=lb(p|0,C|0,v|0,u|0)|0;u=cb(j|0,s|0,t|0,C|0)|0;t=C;s=ab(0,c[b>>2]|0,32)|0;j=C;v=d+56|0;p=ab(0,c[v>>2]|0,32)|0;w=lb(p|0,C|0,s|0,j|0)|0;j=cb(u|0,t|0,w|0,C|0)|0;w=C;t=b+56|0;u=ab(0,c[t>>2]|0,32)|0;s=C;p=ab(0,c[d>>2]|0,32)|0;x=lb(p|0,C|0,u|0,s|0)|0;s=cb(j|0,w|0,x|0,C|0)|0;x=a+56|0;c[x>>2]=s;c[x+4>>2]=C;x=ab(0,c[i>>2]|0,32)|0;s=C;w=ab(0,c[m>>2]|0,32)|0;j=lb(w|0,C|0,x|0,s|0)|0;s=C;x=ab(0,c[h>>2]|0,32)|0;w=C;u=ab(0,c[k>>2]|0,32)|0;p=lb(u|0,C|0,x|0,w|0)|0;w=C;x=ab(0,c[q>>2]|0,32)|0;u=C;y=ab(0,c[n>>2]|0,32)|0;z=lb(y|0,C|0,x|0,u|0)|0;u=cb(z|0,C|0,p|0,w|0)|0;w=C;p=ab(0,c[f>>2]|0,32)|0;z=C;x=ab(0,c[v>>2]|0,32)|0;y=lb(x|0,C|0,p|0,z|0)|0;z=cb(u|0,w|0,y|0,C|0)|0;y=C;w=ab(0,c[t>>2]|0,32)|0;u=C;p=ab(0,c[e>>2]|0,32)|0;x=lb(p|0,C|0,w|0,u|0)|0;u=cb(z|0,y|0,x|0,C|0)|0;x=fb(u|0,C|0,1)|0;u=cb(x|0,C|0,j|0,s|0)|0;s=C;j=ab(0,c[l>>2]|0,32)|0;x=C;y=ab(0,c[o>>2]|0,32)|0;z=lb(y|0,C|0,j|0,x|0)|0;x=cb(u|0,s|0,z|0,C|0)|0;z=C;s=ab(0,c[r>>2]|0,32)|0;u=C;j=ab(0,c[g>>2]|0,32)|0;y=lb(j|0,C|0,s|0,u|0)|0;u=cb(x|0,z|0,y|0,C|0)|0;y=C;z=ab(0,c[b>>2]|0,32)|0;x=C;s=d+64|0;j=ab(0,c[s>>2]|0,32)|0;w=lb(j|0,C|0,z|0,x|0)|0;x=cb(u|0,y|0,w|0,C|0)|0;w=C;y=b+64|0;u=ab(0,c[y>>2]|0,32)|0;z=C;j=ab(0,c[d>>2]|0,32)|0;p=lb(j|0,C|0,u|0,z|0)|0;z=cb(x|0,w|0,p|0,C|0)|0;p=a+64|0;c[p>>2]=z;c[p+4>>2]=C;p=ab(0,c[i>>2]|0,32)|0;z=C;w=ab(0,c[k>>2]|0,32)|0;x=lb(w|0,C|0,p|0,z|0)|0;z=C;p=ab(0,c[q>>2]|0,32)|0;w=C;u=ab(0,c[m>>2]|0,32)|0;j=lb(u|0,C|0,p|0,w|0)|0;w=cb(j|0,C|0,x|0,z|0)|0;z=C;x=ab(0,c[h>>2]|0,32)|0;j=C;p=ab(0,c[o>>2]|0,32)|0;u=lb(p|0,C|0,x|0,j|0)|0;j=cb(w|0,z|0,u|0,C|0)|0;u=C;z=ab(0,c[r>>2]|0,32)|0;w=C;x=ab(0,c[n>>2]|0,32)|0;p=lb(x|0,C|0,z|0,w|0)|0;w=cb(j|0,u|0,p|0,C|0)|0;p=C;u=ab(0,c[l>>2]|0,32)|0;j=C;z=ab(0,c[v>>2]|0,32)|0;x=lb(z|0,C|0,u|0,j|0)|0;j=cb(w|0,p|0,x|0,C|0)|0;x=C;p=ab(0,c[t>>2]|0,32)|0;w=C;u=ab(0,c[g>>2]|0,32)|0;z=lb(u|0,C|0,p|0,w|0)|0;w=cb(j|0,x|0,z|0,C|0)|0;z=C;x=ab(0,c[f>>2]|0,32)|0;j=C;p=ab(0,c[s>>2]|0,32)|0;u=lb(p|0,C|0,x|0,j|0)|0;j=cb(w|0,z|0,u|0,C|0)|0;u=C;z=ab(0,c[y>>2]|0,32)|0;w=C;x=ab(0,c[e>>2]|0,32)|0;p=lb(x|0,C|0,z|0,w|0)|0;w=cb(j|0,u|0,p|0,C|0)|0;p=C;u=ab(0,c[b>>2]|0,32)|0;j=C;z=d+72|0;x=ab(0,c[z>>2]|0,32)|0;A=lb(x|0,C|0,u|0,j|0)|0;j=cb(w|0,p|0,A|0,C|0)|0;A=C;p=b+72|0;b=ab(0,c[p>>2]|0,32)|0;w=C;u=ab(0,c[d>>2]|0,32)|0;d=lb(u|0,C|0,b|0,w|0)|0;w=cb(j|0,A|0,d|0,C|0)|0;d=a+72|0;c[d>>2]=w;c[d+4>>2]=C;d=ab(0,c[q>>2]|0,32)|0;w=C;A=ab(0,c[k>>2]|0,32)|0;j=lb(A|0,C|0,d|0,w|0)|0;w=C;d=ab(0,c[h>>2]|0,32)|0;A=C;b=ab(0,c[v>>2]|0,32)|0;u=lb(b|0,C|0,d|0,A|0)|0;A=cb(u|0,C|0,j|0,w|0)|0;w=C;j=ab(0,c[t>>2]|0,32)|0;u=C;d=ab(0,c[n>>2]|0,32)|0;b=lb(d|0,C|0,j|0,u|0)|0;u=cb(A|0,w|0,b|0,C|0)|0;b=C;w=ab(0,c[f>>2]|0,32)|0;f=C;A=ab(0,c[z>>2]|0,32)|0;j=lb(A|0,C|0,w|0,f|0)|0;f=cb(u|0,b|0,j|0,C|0)|0;j=C;b=ab(0,c[p>>2]|0,32)|0;u=C;w=ab(0,c[e>>2]|0,32)|0;e=lb(w|0,C|0,b|0,u|0)|0;u=cb(f|0,j|0,e|0,C|0)|0;e=fb(u|0,C|0,1)|0;u=C;j=ab(0,c[i>>2]|0,32)|0;f=C;b=ab(0,c[o>>2]|0,32)|0;w=lb(b|0,C|0,j|0,f|0)|0;f=cb(e|0,u|0,w|0,C|0)|0;w=C;u=ab(0,c[r>>2]|0,32)|0;e=C;j=ab(0,c[m>>2]|0,32)|0;b=lb(j|0,C|0,u|0,e|0)|0;e=cb(f|0,w|0,b|0,C|0)|0;b=C;w=ab(0,c[l>>2]|0,32)|0;f=C;u=ab(0,c[s>>2]|0,32)|0;j=lb(u|0,C|0,w|0,f|0)|0;f=cb(e|0,b|0,j|0,C|0)|0;j=C;b=ab(0,c[y>>2]|0,32)|0;e=C;w=ab(0,c[g>>2]|0,32)|0;u=lb(w|0,C|0,b|0,e|0)|0;e=cb(f|0,j|0,u|0,C|0)|0;u=a+80|0;c[u>>2]=e;c[u+4>>2]=C;u=ab(0,c[q>>2]|0,32)|0;e=C;j=ab(0,c[o>>2]|0,32)|0;f=lb(j|0,C|0,u|0,e|0)|0;e=C;u=ab(0,c[r>>2]|0,32)|0;j=C;b=ab(0,c[k>>2]|0,32)|0;w=lb(b|0,C|0,u|0,j|0)|0;j=cb(w|0,C|0,f|0,e|0)|0;e=C;f=ab(0,c[i>>2]|0,32)|0;w=C;u=ab(0,c[v>>2]|0,32)|0;b=lb(u|0,C|0,f|0,w|0)|0;w=cb(j|0,e|0,b|0,C|0)|0;b=C;e=ab(0,c[t>>2]|0,32)|0;j=C;f=ab(0,c[m>>2]|0,32)|0;u=lb(f|0,C|0,e|0,j|0)|0;j=cb(w|0,b|0,u|0,C|0)|0;u=C;b=ab(0,c[h>>2]|0,32)|0;w=C;e=ab(0,c[s>>2]|0,32)|0;f=lb(e|0,C|0,b|0,w|0)|0;w=cb(j|0,u|0,f|0,C|0)|0;f=C;u=ab(0,c[y>>2]|0,32)|0;j=C;b=ab(0,c[n>>2]|0,32)|0;e=lb(b|0,C|0,u|0,j|0)|0;j=cb(w|0,f|0,e|0,C|0)|0;e=C;f=ab(0,c[l>>2]|0,32)|0;l=C;w=ab(0,c[z>>2]|0,32)|0;u=lb(w|0,C|0,f|0,l|0)|0;l=cb(j|0,e|0,u|0,C|0)|0;u=C;e=ab(0,c[p>>2]|0,32)|0;j=C;f=ab(0,c[g>>2]|0,32)|0;g=lb(f|0,C|0,e|0,j|0)|0;j=cb(l|0,u|0,g|0,C|0)|0;g=a+88|0;c[g>>2]=j;c[g+4>>2]=C;g=ab(0,c[r>>2]|0,32)|0;j=C;u=ab(0,c[o>>2]|0,32)|0;l=lb(u|0,C|0,g|0,j|0)|0;j=C;g=ab(0,c[q>>2]|0,32)|0;u=C;e=ab(0,c[v>>2]|0,32)|0;f=lb(e|0,C|0,g|0,u|0)|0;u=C;g=ab(0,c[t>>2]|0,32)|0;e=C;w=ab(0,c[k>>2]|0,32)|0;b=lb(w|0,C|0,g|0,e|0)|0;e=cb(b|0,C|0,f|0,u|0)|0;u=C;f=ab(0,c[h>>2]|0,32)|0;h=C;b=ab(0,c[z>>2]|0,32)|0;g=lb(b|0,C|0,f|0,h|0)|0;h=cb(e|0,u|0,g|0,C|0)|0;g=C;u=ab(0,c[p>>2]|0,32)|0;e=C;f=ab(0,c[n>>2]|0,32)|0;n=lb(f|0,C|0,u|0,e|0)|0;e=cb(h|0,g|0,n|0,C|0)|0;n=fb(e|0,C|0,1)|0;e=cb(n|0,C|0,l|0,j|0)|0;j=C;l=ab(0,c[i>>2]|0,32)|0;n=C;g=ab(0,c[s>>2]|0,32)|0;h=lb(g|0,C|0,l|0,n|0)|0;n=cb(e|0,j|0,h|0,C|0)|0;h=C;j=ab(0,c[y>>2]|0,32)|0;e=C;l=ab(0,c[m>>2]|0,32)|0;g=lb(l|0,C|0,j|0,e|0)|0;e=cb(n|0,h|0,g|0,C|0)|0;g=a+96|0;c[g>>2]=e;c[g+4>>2]=C;g=ab(0,c[r>>2]|0,32)|0;e=C;h=ab(0,c[v>>2]|0,32)|0;n=lb(h|0,C|0,g|0,e|0)|0;e=C;g=ab(0,c[t>>2]|0,32)|0;h=C;j=ab(0,c[o>>2]|0,32)|0;l=lb(j|0,C|0,g|0,h|0)|0;h=cb(l|0,C|0,n|0,e|0)|0;e=C;n=ab(0,c[q>>2]|0,32)|0;l=C;g=ab(0,c[s>>2]|0,32)|0;j=lb(g|0,C|0,n|0,l|0)|0;l=cb(h|0,e|0,j|0,C|0)|0;j=C;e=ab(0,c[y>>2]|0,32)|0;h=C;n=ab(0,c[k>>2]|0,32)|0;g=lb(n|0,C|0,e|0,h|0)|0;h=cb(l|0,j|0,g|0,C|0)|0;g=C;j=ab(0,c[i>>2]|0,32)|0;i=C;l=ab(0,c[z>>2]|0,32)|0;e=lb(l|0,C|0,j|0,i|0)|0;i=cb(h|0,g|0,e|0,C|0)|0;e=C;g=ab(0,c[p>>2]|0,32)|0;h=C;j=ab(0,c[m>>2]|0,32)|0;m=lb(j|0,C|0,g|0,h|0)|0;h=cb(i|0,e|0,m|0,C|0)|0;m=a+104|0;c[m>>2]=h;c[m+4>>2]=C;m=ab(0,c[t>>2]|0,32)|0;h=C;e=ab(0,c[v>>2]|0,32)|0;i=lb(e|0,C|0,m|0,h|0)|0;h=C;m=ab(0,c[q>>2]|0,32)|0;q=C;e=ab(0,c[z>>2]|0,32)|0;g=lb(e|0,C|0,m|0,q|0)|0;q=cb(g|0,C|0,i|0,h|0)|0;h=C;i=ab(0,c[p>>2]|0,32)|0;g=C;m=ab(0,c[k>>2]|0,32)|0;k=lb(m|0,C|0,i|0,g|0)|0;g=cb(q|0,h|0,k|0,C|0)|0;k=fb(g|0,C|0,1)|0;g=C;h=ab(0,c[r>>2]|0,32)|0;q=C;i=ab(0,c[s>>2]|0,32)|0;m=lb(i|0,C|0,h|0,q|0)|0;q=cb(k|0,g|0,m|0,C|0)|0;m=C;g=ab(0,c[y>>2]|0,32)|0;k=C;h=ab(0,c[o>>2]|0,32)|0;i=lb(h|0,C|0,g|0,k|0)|0;k=cb(q|0,m|0,i|0,C|0)|0;i=a+112|0;c[i>>2]=k;c[i+4>>2]=C;i=ab(0,c[t>>2]|0,32)|0;k=C;m=ab(0,c[s>>2]|0,32)|0;q=lb(m|0,C|0,i|0,k|0)|0;k=C;i=ab(0,c[y>>2]|0,32)|0;m=C;g=ab(0,c[v>>2]|0,32)|0;h=lb(g|0,C|0,i|0,m|0)|0;m=cb(h|0,C|0,q|0,k|0)|0;k=C;q=ab(0,c[r>>2]|0,32)|0;r=C;h=ab(0,c[z>>2]|0,32)|0;i=lb(h|0,C|0,q|0,r|0)|0;r=cb(m|0,k|0,i|0,C|0)|0;i=C;k=ab(0,c[p>>2]|0,32)|0;m=C;q=ab(0,c[o>>2]|0,32)|0;o=lb(q|0,C|0,k|0,m|0)|0;m=cb(r|0,i|0,o|0,C|0)|0;o=a+120|0;c[o>>2]=m;c[o+4>>2]=C;o=ab(0,c[y>>2]|0,32)|0;m=C;i=ab(0,c[s>>2]|0,32)|0;r=lb(i|0,C|0,o|0,m|0)|0;m=C;o=ab(0,c[t>>2]|0,32)|0;t=C;i=ab(0,c[z>>2]|0,32)|0;k=lb(i|0,C|0,o|0,t|0)|0;t=C;o=ab(0,c[p>>2]|0,32)|0;i=C;q=ab(0,c[v>>2]|0,32)|0;v=lb(q|0,C|0,o|0,i|0)|0;i=cb(v|0,C|0,k|0,t|0)|0;t=fb(i|0,C|0,1)|0;i=cb(t|0,C|0,r|0,m|0)|0;m=a+128|0;c[m>>2]=i;c[m+4>>2]=C;m=ab(0,c[y>>2]|0,32)|0;y=C;i=ab(0,c[z>>2]|0,32)|0;r=lb(i|0,C|0,m|0,y|0)|0;y=C;m=ab(0,c[p>>2]|0,32)|0;i=C;t=ab(0,c[s>>2]|0,32)|0;s=lb(t|0,C|0,m|0,i|0)|0;i=cb(s|0,C|0,r|0,y|0)|0;y=a+136|0;c[y>>2]=i;c[y+4>>2]=C;y=ab(0,c[p>>2]|0,31)|0;p=C;i=ab(0,c[z>>2]|0,32)|0;z=lb(i|0,C|0,y|0,p|0)|0;p=a+144|0;c[p>>2]=z;c[p+4>>2]=C;return}function Na(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0;d=i;i=i+160|0;e=d;f=c[b>>2]|0;g=ab(0,f|0,32)|0;h=C;j=lb(g|0,h|0,g|0,h|0)|0;k=e;c[k>>2]=j;c[k+4>>2]=C;k=ab(0,f|0,31)|0;f=C;j=b+8|0;l=c[j>>2]|0;m=ab(0,l|0,32)|0;n=C;o=lb(m|0,n|0,k|0,f|0)|0;p=e+8|0;q=p;c[q>>2]=o;c[q+4>>2]=C;q=lb(m|0,n|0,m|0,n|0)|0;o=C;r=b+16|0;s=ab(0,c[r>>2]|0,32)|0;t=C;u=lb(s|0,t|0,g|0,h|0)|0;v=cb(u|0,C|0,q|0,o|0)|0;o=fb(v|0,C|0,1)|0;v=e+16|0;q=v;c[q>>2]=o;c[q+4>>2]=C;q=lb(s|0,t|0,m|0,n|0)|0;o=C;u=b+24|0;w=ab(0,c[u>>2]|0,32)|0;x=C;y=lb(w|0,x|0,g|0,h|0)|0;z=cb(y|0,C|0,q|0,o|0)|0;o=fb(z|0,C|0,1)|0;z=e+24|0;q=z;c[q>>2]=o;c[q+4>>2]=C;q=lb(s|0,t|0,s|0,t|0)|0;o=C;y=ab(0,l|0,30)|0;A=lb(w|0,x|0,y|0,C|0)|0;y=cb(A|0,C|0,q|0,o|0)|0;o=C;q=b+32|0;A=ab(0,c[q>>2]|0,32)|0;B=C;D=lb(A|0,B|0,k|0,f|0)|0;f=cb(y|0,o|0,D|0,C|0)|0;D=e+32|0;o=D;c[o>>2]=f;c[o+4>>2]=C;o=lb(w|0,x|0,s|0,t|0)|0;f=C;y=lb(A|0,B|0,m|0,n|0)|0;k=cb(y|0,C|0,o|0,f|0)|0;f=C;o=b+40|0;y=ab(0,c[o>>2]|0,32)|0;E=C;F=lb(y|0,E|0,g|0,h|0)|0;G=cb(k|0,f|0,F|0,C|0)|0;F=fb(G|0,C|0,1)|0;G=e+40|0;f=G;c[f>>2]=F;c[f+4>>2]=C;f=lb(w|0,x|0,w|0,x|0)|0;F=C;k=lb(A|0,B|0,s|0,t|0)|0;H=cb(k|0,C|0,f|0,F|0)|0;F=C;f=b+48|0;k=ab(0,c[f>>2]|0,32)|0;I=C;J=lb(k|0,I|0,g|0,h|0)|0;K=cb(H|0,F|0,J|0,C|0)|0;J=C;F=ab(0,l|0,31)|0;l=lb(y|0,E|0,F|0,C|0)|0;F=cb(K|0,J|0,l|0,C|0)|0;l=fb(F|0,C|0,1)|0;F=e+48|0;J=F;c[J>>2]=l;c[J+4>>2]=C;J=lb(A|0,B|0,w|0,x|0)|0;l=C;K=lb(y|0,E|0,s|0,t|0)|0;H=cb(K|0,C|0,J|0,l|0)|0;l=C;J=lb(k|0,I|0,m|0,n|0)|0;K=cb(H|0,l|0,J|0,C|0)|0;J=C;l=b+56|0;H=ab(0,c[l>>2]|0,32)|0;L=C;M=lb(H|0,L|0,g|0,h|0)|0;N=cb(K|0,J|0,M|0,C|0)|0;M=fb(N|0,C|0,1)|0;N=e+56|0;J=N;c[J>>2]=M;c[J+4>>2]=C;J=lb(A|0,B|0,A|0,B|0)|0;M=C;K=lb(k|0,I|0,s|0,t|0)|0;O=C;P=b+64|0;Q=ab(0,c[P>>2]|0,32)|0;R=C;S=lb(Q|0,R|0,g|0,h|0)|0;h=cb(S|0,C|0,K|0,O|0)|0;O=C;K=lb(H|0,L|0,m|0,n|0)|0;n=C;m=lb(y|0,E|0,w|0,x|0)|0;S=cb(m|0,C|0,K|0,n|0)|0;n=fb(S|0,C|0,1)|0;S=cb(h|0,O|0,n|0,C|0)|0;n=fb(S|0,C|0,1)|0;S=cb(n|0,C|0,J|0,M|0)|0;M=e+64|0;J=M;c[J>>2]=S;c[J+4>>2]=C;J=lb(y|0,E|0,A|0,B|0)|0;S=C;n=lb(k|0,I|0,w|0,x|0)|0;x=cb(n|0,C|0,J|0,S|0)|0;S=C;J=lb(H|0,L|0,s|0,t|0)|0;t=cb(x|0,S|0,J|0,C|0)|0;J=C;S=ab(0,c[j>>2]|0,32)|0;j=C;x=lb(Q|0,R|0,S|0,j|0)|0;s=cb(t|0,J|0,x|0,C|0)|0;x=C;J=ab(0,c[b>>2]|0,32)|0;t=C;n=c[b+72>>2]|0;b=ab(0,n|0,32)|0;w=C;O=lb(b|0,w|0,J|0,t|0)|0;t=cb(s|0,x|0,O|0,C|0)|0;O=fb(t|0,C|0,1)|0;t=e+72|0;c[t>>2]=O;c[t+4>>2]=C;t=lb(y|0,E|0,y|0,E|0)|0;O=C;x=lb(k|0,I|0,A|0,B|0)|0;B=cb(x|0,C|0,t|0,O|0)|0;O=C;t=ab(0,c[r>>2]|0,32)|0;r=C;x=lb(Q|0,R|0,t|0,r|0)|0;A=cb(B|0,O|0,x|0,C|0)|0;x=C;O=ab(0,c[u>>2]|0,32)|0;u=C;B=lb(H|0,L|0,O|0,u|0)|0;s=C;J=lb(b|0,w|0,S|0,j|0)|0;j=cb(J|0,C|0,B|0,s|0)|0;s=fb(j|0,C|0,1)|0;j=cb(A|0,x|0,s|0,C|0)|0;s=fb(j|0,C|0,1)|0;j=e+80|0;x=j;c[x>>2]=s;c[x+4>>2]=C;x=lb(k|0,I|0,y|0,E|0)|0;E=C;y=ab(0,c[q>>2]|0,32)|0;q=C;s=lb(H|0,L|0,y|0,q|0)|0;A=cb(s|0,C|0,x|0,E|0)|0;E=C;x=lb(Q|0,R|0,O|0,u|0)|0;s=cb(A|0,E|0,x|0,C|0)|0;x=C;E=lb(b|0,w|0,t|0,r|0)|0;r=cb(s|0,x|0,E|0,C|0)|0;E=C;x=fb(r|0,E|0,1)|0;s=C;t=e+88|0;c[t>>2]=x;c[t+4>>2]=s;t=lb(k|0,I|0,k|0,I|0)|0;I=C;k=lb(Q|0,R|0,y|0,q|0)|0;A=C;B=c[o>>2]|0;o=ab(0,B|0,32)|0;J=C;S=lb(H|0,L|0,o|0,J|0)|0;h=C;K=lb(b|0,w|0,O|0,u|0)|0;u=cb(K|0,C|0,S|0,h|0)|0;h=fb(u|0,C|0,1)|0;u=cb(h|0,C|0,k|0,A|0)|0;A=fb(u|0,C|0,1)|0;u=cb(A|0,C|0,t|0,I|0)|0;I=C;t=e+96|0;c[t>>2]=u;c[t+4>>2]=I;t=ab(0,c[f>>2]|0,32)|0;f=C;A=lb(H|0,L|0,t|0,f|0)|0;L=C;H=lb(Q|0,R|0,o|0,J|0)|0;J=cb(H|0,C|0,A|0,L|0)|0;L=C;A=lb(b|0,w|0,y|0,q|0)|0;q=cb(J|0,L|0,A|0,C|0)|0;A=C;L=fb(q|0,A|0,1)|0;J=C;y=e+104|0;c[y>>2]=L;c[y+4>>2]=J;y=c[l>>2]|0;l=ab(0,y|0,32)|0;H=C;o=lb(l|0,H|0,l|0,H|0)|0;k=C;h=lb(Q|0,R|0,t|0,f|0)|0;R=cb(h|0,C|0,o|0,k|0)|0;k=C;o=ab(0,B|0,31)|0;B=lb(b|0,w|0,o|0,C|0)|0;o=cb(R|0,k|0,B|0,C|0)|0;B=C;k=fb(o|0,B|0,1)|0;R=C;h=e+112|0;c[h>>2]=k;c[h+4>>2]=R;h=c[P>>2]|0;P=ab(0,h|0,32)|0;Q=C;S=lb(P|0,Q|0,l|0,H|0)|0;H=C;l=lb(b|0,w|0,t|0,f|0)|0;f=cb(l|0,C|0,S|0,H|0)|0;H=C;S=fb(f|0,H|0,1)|0;l=C;t=e+120|0;c[t>>2]=S;c[t+4>>2]=l;t=lb(P|0,Q|0,P|0,Q|0)|0;Q=C;P=ab(0,y|0,30)|0;y=lb(b|0,w|0,P|0,C|0)|0;P=cb(y|0,C|0,t|0,Q|0)|0;Q=C;t=e+128|0;c[t>>2]=P;c[t+4>>2]=Q;t=ab(0,h|0,31)|0;h=lb(b|0,w|0,t|0,C|0)|0;t=C;y=e+136|0;c[y>>2]=h;c[y+4>>2]=t;y=ab(0,n|0,31)|0;n=lb(y|0,C|0,b|0,w|0)|0;w=C;b=e+144|0;c[b>>2]=n;c[b+4>>2]=w;b=M;y=c[b>>2]|0;K=c[b+4>>2]|0;b=lb(n|0,w|0,18,0)|0;O=C;m=cb(n|0,w|0,y|0,K|0)|0;K=cb(m|0,C|0,b|0,O|0)|0;O=M;c[O>>2]=K;c[O+4>>2]=C;O=N;K=c[O>>2]|0;M=c[O+4>>2]|0;O=lb(h|0,t|0,18,0)|0;b=C;m=cb(K|0,M|0,h|0,t|0)|0;t=cb(m|0,C|0,O|0,b|0)|0;b=N;c[b>>2]=t;c[b+4>>2]=C;b=F;t=c[b>>2]|0;N=c[b+4>>2]|0;b=lb(P|0,Q|0,18,0)|0;O=C;m=cb(t|0,N|0,P|0,Q|0)|0;Q=cb(m|0,C|0,b|0,O|0)|0;O=F;c[O>>2]=Q;c[O+4>>2]=C;O=G;Q=c[O>>2]|0;F=c[O+4>>2]|0;O=lb(f|0,H|0,36,0)|0;H=C;f=cb(Q|0,F|0,S|0,l|0)|0;l=cb(f|0,C|0,O|0,H|0)|0;H=G;c[H>>2]=l;c[H+4>>2]=C;H=D;l=c[H>>2]|0;G=c[H+4>>2]|0;H=lb(o|0,B|0,36,0)|0;B=C;o=cb(l|0,G|0,k|0,R|0)|0;R=cb(o|0,C|0,H|0,B|0)|0;B=D;c[B>>2]=R;c[B+4>>2]=C;B=z;R=c[B>>2]|0;D=c[B+4>>2]|0;B=lb(q|0,A|0,36,0)|0;A=C;q=cb(R|0,D|0,L|0,J|0)|0;J=cb(q|0,C|0,B|0,A|0)|0;A=z;c[A>>2]=J;c[A+4>>2]=C;A=v;J=c[A>>2]|0;z=c[A+4>>2]|0;A=lb(u|0,I|0,18,0)|0;B=C;q=cb(J|0,z|0,u|0,I|0)|0;I=cb(q|0,C|0,A|0,B|0)|0;B=v;c[B>>2]=I;c[B+4>>2]=C;B=p;I=c[B>>2]|0;v=c[B+4>>2]|0;B=lb(r|0,E|0,36,0)|0;E=C;r=cb(I|0,v|0,x|0,s|0)|0;s=cb(r|0,C|0,B|0,E|0)|0;E=p;c[E>>2]=s;c[E+4>>2]=C;E=j;s=c[E>>2]|0;B=c[E+4>>2]|0;E=e;r=c[E>>2]|0;x=c[E+4>>2]|0;E=lb(s|0,B|0,18,0)|0;v=C;I=cb(r|0,x|0,s|0,B|0)|0;B=cb(I|0,C|0,E|0,v|0)|0;v=C;E=e;c[E>>2]=B;c[E+4>>2]=v;E=j;c[E>>2]=0;c[E+4>>2]=0;E=v;v=B;B=0;do I=cb(E>>31>>>6|0,0,v|0,E|0)|0,s=ab(I|0,C|0,26)|0,I=C,x=fb(s|0,I|0,26)|0,r=bb(v|0,E|0,x|0,C|0)|0,x=e+(B<<3)|0,c[x>>2]=r,c[x+4>>2]=C,x=e+((B|1)<<3)|0,r=x,A=cb(s|0,I|0,c[r>>2]|0,c[r+4>>2]|0)|0,r=C,I=cb(r>>31>>>7|0,0,A|0,r|0)|0,s=ab(I|0,C|0,25)|0,I=C,q=fb(s|0,I|0,25)|0,u=bb(A|0,r|0,q|0,C|0)|0,q=x,c[q>>2]=u,c[q+4>>2]=C,B=B+2|0,q=e+(B<<3)|0,u=q,v=cb(s|0,I|0,c[u>>2]|0,c[u+4>>2]|0)|0,E=C,u=q,c[u>>2]=v,c[u+4>>2]=E;while(B>>>0<10);B=j;E=c[B>>2]|0;v=c[B+4>>2]|0;B=e;u=c[B>>2]|0;q=c[B+4>>2]|0;B=lb(E|0,v|0,18,0)|0;I=C;s=cb(u|0,q|0,E|0,v|0)|0;v=cb(s|0,C|0,B|0,I|0)|0;I=C;B=j;c[B>>2]=0;c[B+4>>2]=0;B=cb(I>>31>>>6|0,0,v|0,I|0)|0;j=ab(B|0,C|0,26)|0;B=C;s=fb(j|0,B|0,26)|0;E=bb(v|0,I|0,s|0,C|0)|0;s=e;c[s>>2]=E;c[s+4>>2]=C;s=p;E=cb(j|0,B|0,c[s>>2]|0,c[s+4>>2]|0)|0;s=p;c[s>>2]=E;c[s+4>>2]=C;s=a;a=e;e=s+80|0;do c[s>>2]=c[a>>2],s=s+4|0,a=a+4|0;while((s|0)<(e|0));i=d;return}function Oa(){var a=0;!(c[2]|0)?a=56:a=c[(ja()|0)+60>>2]|0;return a|0}function Pa(a){a=a|0;var b=0;a>>>0>4294963200?(c[(Oa()|0)>>2]=0-a,b=-1):b=a;return b|0}function Qa(a){a=a|0;return 0}function Ra(a){a=a|0;return}function Sa(a){a=a|0;var b=0,d=0;b=i;i=i+16|0;d=b;c[d>>2]=c[a+60>>2];a=Pa(ka(6,d|0)|0)|0;i=b;return a|0}function Ta(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=i;i=i+32|0;f=e;g=e+20|0;c[f>>2]=c[a+60>>2];c[f+4>>2]=0;c[f+8>>2]=b;c[f+12>>2]=g;c[f+16>>2]=d;(Pa(ta(140,f|0)|0)|0)<0?(c[g>>2]=-1,h=-1):h=c[g>>2]|0;i=e;return h|0}function Ua(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0;e=i;i=i+48|0;f=e+16|0;g=e;h=e+32|0;j=a+28|0;k=c[j>>2]|0;c[h>>2]=k;l=a+20|0;m=(c[l>>2]|0)-k|0;c[h+4>>2]=m;c[h+8>>2]=b;c[h+12>>2]=d;b=a+60|0;k=a+44|0;n=h;h=2;o=m+d|0;while(1){!(c[2]|0)?(c[f>>2]=c[b>>2],c[f+4>>2]=n,c[f+8>>2]=h,p=Pa(wa(146,f|0)|0)|0):(ua(1,a|0),c[g>>2]=c[b>>2],c[g+4>>2]=n,c[g+8>>2]=h,m=Pa(wa(146,g|0)|0)|0,ga(0),p=m);if((o|0)==(p|0)){q=6;break}if((p|0)<0){r=n;s=h;q=8;break}m=o-p|0;t=c[n+4>>2]|0;p>>>0<=t>>>0?(h|0)==2?(c[j>>2]=(c[j>>2]|0)+p,u=t,v=p,w=n,x=2):(u=t,v=p,w=n,x=h):(y=c[k>>2]|0,c[j>>2]=y,c[l>>2]=y,u=c[n+12>>2]|0,v=p-t|0,w=n+8|0,x=h+-1|0);c[w>>2]=(c[w>>2]|0)+v;c[w+4>>2]=u-v;n=w;h=x;o=m}(q|0)==6?(o=c[k>>2]|0,c[a+16>>2]=o+(c[a+48>>2]|0),k=o,c[j>>2]=k,c[l>>2]=k,z=d):(q|0)==8&&(c[a+16>>2]=0,c[j>>2]=0,c[l>>2]=0,c[a>>2]=c[a>>2]|32,(s|0)==2?z=0:z=d-(c[r+4>>2]|0)|0);i=e;return z|0}function Va(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0;f=i;i=i+80|0;g=f;c[b+36>>2]=3;((c[b>>2]&64|0)==0?(c[g>>2]=c[b+60>>2],c[g+4>>2]=21505,c[g+8>>2]=f+12,(ra(54,g|0)|0)!=0):0)&&(a[b+75>>0]=-1);g=Ua(b,d,e)|0;i=f;return g|0}function Wa(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0;do if(a){if((c[a+76>>2]|0)<=-1){b=Ya(a)|0;break}d=(Qa(a)|0)==0;e=Ya(a)|0;d?b=e:(Ra(a),b=e)}else{!(c[13]|0)?f=0:f=Wa(c[13]|0)|0;ha(36);e=c[8]|0;if(!e)g=f;else{d=e;e=f;while(1){(c[d+76>>2]|0)>-1?h=Qa(d)|0:h=0;(c[d+20>>2]|0)>>>0>(c[d+28>>2]|0)>>>0?i=Ya(d)|0|e:i=e;h&&Ra(d);d=c[d+56>>2]|0;if(!d){g=i;break}else e=i}}sa(36);b=g}while(0);return b|0}function Xa(a){a=a|0;c[a+68>>2]|0||Ra(a);return}function Ya(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0;b=a+20|0;d=a+28|0;((c[b>>2]|0)>>>0>(c[d>>2]|0)>>>0?(za[c[a+36>>2]&3](a,0,0)|0,(c[b>>2]|0)==0):0)?e=-1:(f=a+4|0,g=c[f>>2]|0,h=a+8|0,i=c[h>>2]|0,g>>>0<i>>>0&&za[c[a+40>>2]&3](a,g-i|0,1)|0,c[a+16>>2]=0,c[d>>2]=0,c[b>>2]=0,c[h>>2]=0,c[f>>2]=0,e=0);return e|0}function Za(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,La=0,Ma=0,Na=0,Pa=0,Qa=0,Ra=0;do if(a>>>0<245){b=a>>>0<11?16:a+11&-8;d=b>>>3;e=c[43]|0;f=e>>>d;if(f&3){g=(f&1^1)+d|0;h=212+(g<<1<<2)|0;i=h+8|0;j=c[i>>2]|0;k=j+8|0;l=c[k>>2]|0;do if((h|0)!=(l|0)){l>>>0<(c[47]|0)>>>0&&ma();m=l+12|0;if((c[m>>2]|0)==(j|0)){c[m>>2]=h;c[i>>2]=l;break}else ma()}else c[43]=e&~(1<<g);while(0);l=g<<3;c[j+4>>2]=l|3;i=j+l+4|0;c[i>>2]=c[i>>2]|1;n=k;return n|0}i=c[45]|0;if(b>>>0>i>>>0){if(f){l=2<<d;h=f<<d&(l|0-l);l=(h&0-h)+-1|0;h=l>>>12&16;m=l>>>h;l=m>>>5&8;o=m>>>l;m=o>>>2&4;p=o>>>m;o=p>>>1&2;q=p>>>o;p=q>>>1&1;r=(l|h|m|o|p)+(q>>>p)|0;p=212+(r<<1<<2)|0;q=p+8|0;o=c[q>>2]|0;m=o+8|0;h=c[m>>2]|0;do if((p|0)!=(h|0)){h>>>0<(c[47]|0)>>>0&&ma();l=h+12|0;if((c[l>>2]|0)==(o|0)){c[l>>2]=p;c[q>>2]=h;s=c[45]|0;break}else ma()}else c[43]=e&~(1<<r),s=i;while(0);i=(r<<3)-b|0;c[o+4>>2]=b|3;e=o+b|0;c[e+4>>2]=i|1;c[e+i>>2]=i;s&&(h=c[48]|0,q=s>>>3,p=212+(q<<1<<2)|0,d=c[43]|0,f=1<<q,d&f?(q=p+8|0,k=c[q>>2]|0,k>>>0<(c[47]|0)>>>0?ma():(t=q,u=k)):(c[43]=d|f,t=p+8|0,u=p),c[t>>2]=h,c[u+12>>2]=h,c[h+8>>2]=u,c[h+12>>2]=p);c[45]=i;c[48]=e;n=m;return n|0}e=c[44]|0;if(e){i=(e&0-e)+-1|0;e=i>>>12&16;p=i>>>e;i=p>>>5&8;h=p>>>i;p=h>>>2&4;f=h>>>p;h=f>>>1&2;d=f>>>h;f=d>>>1&1;k=c[476+((i|e|p|h|f)+(d>>>f)<<2)>>2]|0;f=(c[k+4>>2]&-8)-b|0;d=k;h=k;while(1){k=c[d+16>>2]|0;if(!k){p=c[d+20>>2]|0;if(!p){v=f;w=h;break}else x=p}else x=k;k=(c[x+4>>2]&-8)-b|0;p=k>>>0<f>>>0;f=p?k:f;d=x;h=p?x:h}h=c[47]|0;w>>>0<h>>>0&&ma();d=w+b|0;w>>>0>=d>>>0&&ma();f=c[w+24>>2]|0;m=c[w+12>>2]|0;do if((m|0)==(w|0)){o=w+20|0;r=c[o>>2]|0;if(!r){p=w+16|0;k=c[p>>2]|0;if(!k){y=0;break}else z=k,A=p}else z=r,A=o;while(1){o=z+20|0;r=c[o>>2]|0;if(r){z=r;A=o;continue}o=z+16|0;r=c[o>>2]|0;if(!r){B=z;C=A;break}else z=r,A=o}if(C>>>0<h>>>0)ma();else{c[C>>2]=0;y=B;break}}else{o=c[w+8>>2]|0;o>>>0<h>>>0&&ma();r=o+12|0;(c[r>>2]|0)!=(w|0)&&ma();p=m+8|0;if((c[p>>2]|0)==(w|0)){c[r>>2]=m;c[p>>2]=o;y=m;break}else ma()}while(0);do if(f){m=c[w+28>>2]|0;h=476+(m<<2)|0;if((w|0)==(c[h>>2]|0)){c[h>>2]=y;if(!y){c[44]=c[44]&~(1<<m);break}}else{f>>>0<(c[47]|0)>>>0&&ma();m=f+16|0;(c[m>>2]|0)==(w|0)?c[m>>2]=y:c[f+20>>2]=y;if(!y)break}m=c[47]|0;y>>>0<m>>>0&&ma();c[y+24>>2]=f;h=c[w+16>>2]|0;do if(h)if(h>>>0<m>>>0)ma();else{c[y+16>>2]=h;c[h+24>>2]=y;break}while(0);h=c[w+20>>2]|0;if(h)if(h>>>0<(c[47]|0)>>>0)ma();else{c[y+20>>2]=h;c[h+24>>2]=y;break}}while(0);v>>>0<16?(f=v+b|0,c[w+4>>2]=f|3,h=w+f+4|0,c[h>>2]=c[h>>2]|1):(c[w+4>>2]=b|3,c[d+4>>2]=v|1,c[d+v>>2]=v,h=c[45]|0,h&&(f=c[48]|0,m=h>>>3,h=212+(m<<1<<2)|0,o=c[43]|0,p=1<<m,o&p?(m=h+8|0,r=c[m>>2]|0,r>>>0<(c[47]|0)>>>0?ma():(D=m,E=r)):(c[43]=o|p,D=h+8|0,E=h),c[D>>2]=f,c[E+12>>2]=f,c[f+8>>2]=E,c[f+12>>2]=h),c[45]=v,c[48]=d);n=w+8|0;return n|0}else F=b}else F=b}else if(a>>>0<=4294967231){h=a+11|0;f=h&-8;p=c[44]|0;if(p){o=0-f|0;r=h>>>8;r?f>>>0>16777215?G=31:(h=(r+1048320|0)>>>16&8,m=r<<h,r=(m+520192|0)>>>16&4,k=m<<r,m=(k+245760|0)>>>16&2,e=14-(r|h|m)+(k<<m>>>15)|0,G=f>>>(e+7|0)&1|e<<1):G=0;e=c[476+(G<<2)>>2]|0;a:do if(!e)H=o,I=0,J=0,K=86;else{m=o;k=0;h=f<<((G|0)==31?0:25-(G>>>1)|0);r=e;i=0;while(1){q=c[r+4>>2]&-8;j=q-f|0;if(j>>>0<m>>>0)if((q|0)==(f|0)){L=j;M=r;N=r;K=90;break a}else O=j,P=r;else O=m,P=i;j=c[r+20>>2]|0;r=c[r+16+(h>>>31<<2)>>2]|0;q=(j|0)==0|(j|0)==(r|0)?k:j;j=(r|0)==0;if(j){H=O;I=q;J=P;K=86;break}else m=O,k=q,h=h<<(j&1^1),i=P}}while(0);if((K|0)==86){if((I|0)==0&(J|0)==0){e=2<<G;o=p&(e|0-e);if(!o){F=f;break}e=(o&0-o)+-1|0;o=e>>>12&16;b=e>>>o;e=b>>>5&8;d=b>>>e;b=d>>>2&4;i=d>>>b;d=i>>>1&2;h=i>>>d;i=h>>>1&1;Q=c[476+((e|o|b|d|i)+(h>>>i)<<2)>>2]|0}else Q=I;!Q?(R=H,S=J):(L=H,M=Q,N=J,K=90)}if((K|0)==90)while(1){K=0;i=(c[M+4>>2]&-8)-f|0;h=i>>>0<L>>>0;d=h?i:L;i=h?M:N;h=c[M+16>>2]|0;if(h){L=d;M=h;N=i;K=90;continue}M=c[M+20>>2]|0;if(!M){R=d;S=i;break}else L=d,N=i,K=90}if((S|0)!=0?R>>>0<((c[45]|0)-f|0)>>>0:0){p=c[47]|0;S>>>0<p>>>0&&ma();i=S+f|0;S>>>0>=i>>>0&&ma();d=c[S+24>>2]|0;h=c[S+12>>2]|0;do if((h|0)==(S|0)){b=S+20|0;o=c[b>>2]|0;if(!o){e=S+16|0;k=c[e>>2]|0;if(!k){T=0;break}else U=k,V=e}else U=o,V=b;while(1){b=U+20|0;o=c[b>>2]|0;if(o){U=o;V=b;continue}b=U+16|0;o=c[b>>2]|0;if(!o){W=U;X=V;break}else U=o,V=b}if(X>>>0<p>>>0)ma();else{c[X>>2]=0;T=W;break}}else{b=c[S+8>>2]|0;b>>>0<p>>>0&&ma();o=b+12|0;(c[o>>2]|0)!=(S|0)&&ma();e=h+8|0;if((c[e>>2]|0)==(S|0)){c[o>>2]=h;c[e>>2]=b;T=h;break}else ma()}while(0);do if(d){h=c[S+28>>2]|0;p=476+(h<<2)|0;if((S|0)==(c[p>>2]|0)){c[p>>2]=T;if(!T){c[44]=c[44]&~(1<<h);break}}else{d>>>0<(c[47]|0)>>>0&&ma();h=d+16|0;(c[h>>2]|0)==(S|0)?c[h>>2]=T:c[d+20>>2]=T;if(!T)break}h=c[47]|0;T>>>0<h>>>0&&ma();c[T+24>>2]=d;p=c[S+16>>2]|0;do if(p)if(p>>>0<h>>>0)ma();else{c[T+16>>2]=p;c[p+24>>2]=T;break}while(0);p=c[S+20>>2]|0;if(p)if(p>>>0<(c[47]|0)>>>0)ma();else{c[T+20>>2]=p;c[p+24>>2]=T;break}}while(0);do if(R>>>0>=16){c[S+4>>2]=f|3;c[i+4>>2]=R|1;c[i+R>>2]=R;d=R>>>3;if(R>>>0<256){p=212+(d<<1<<2)|0;h=c[43]|0;b=1<<d;h&b?(d=p+8|0,e=c[d>>2]|0,e>>>0<(c[47]|0)>>>0?ma():(Y=d,Z=e)):(c[43]=h|b,Y=p+8|0,Z=p);c[Y>>2]=i;c[Z+12>>2]=i;c[i+8>>2]=Z;c[i+12>>2]=p;break}p=R>>>8;p?R>>>0>16777215?_=31:(b=(p+1048320|0)>>>16&8,h=p<<b,p=(h+520192|0)>>>16&4,e=h<<p,h=(e+245760|0)>>>16&2,d=14-(p|b|h)+(e<<h>>>15)|0,_=R>>>(d+7|0)&1|d<<1):_=0;d=476+(_<<2)|0;c[i+28>>2]=_;h=i+16|0;c[h+4>>2]=0;c[h>>2]=0;h=c[44]|0;e=1<<_;if(!(h&e)){c[44]=h|e;c[d>>2]=i;c[i+24>>2]=d;c[i+12>>2]=i;c[i+8>>2]=i;break}e=R<<((_|0)==31?0:25-(_>>>1)|0);h=c[d>>2]|0;while(1){if((c[h+4>>2]&-8|0)==(R|0)){$=h;K=148;break}d=h+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b){aa=d;ba=h;K=145;break}else e=e<<1,h=b}if((K|0)==145)if(aa>>>0<(c[47]|0)>>>0)ma();else{c[aa>>2]=i;c[i+24>>2]=ba;c[i+12>>2]=i;c[i+8>>2]=i;break}else if((K|0)==148){h=$+8|0;e=c[h>>2]|0;b=c[47]|0;if(e>>>0>=b>>>0&$>>>0>=b>>>0){c[e+12>>2]=i;c[h>>2]=i;c[i+8>>2]=e;c[i+12>>2]=$;c[i+24>>2]=0;break}else ma()}}else e=R+f|0,c[S+4>>2]=e|3,h=S+e+4|0,c[h>>2]=c[h>>2]|1;while(0);n=S+8|0;return n|0}else F=f}else F=f}else F=-1;while(0);S=c[45]|0;if(S>>>0>=F>>>0){R=S-F|0;$=c[48]|0;R>>>0>15?(ba=$+F|0,c[48]=ba,c[45]=R,c[ba+4>>2]=R|1,c[ba+R>>2]=R,c[$+4>>2]=F|3):(c[45]=0,c[48]=0,c[$+4>>2]=S|3,R=$+S+4|0,c[R>>2]=c[R>>2]|1);n=$+8|0;return n|0}$=c[46]|0;if($>>>0>F>>>0){R=$-F|0;c[46]=R;$=c[49]|0;S=$+F|0;c[49]=S;c[S+4>>2]=R|1;c[$+4>>2]=F|3;n=$+8|0;return n|0}do if(!(c[161]|0)){$=va(30)|0;if(!($+-1&$)){c[163]=$;c[162]=$;c[164]=-1;c[165]=-1;c[166]=0;c[154]=0;c[161]=(oa(0)|0)&-16^1431655768;break}else ma()}while(0);$=F+48|0;R=c[163]|0;S=F+47|0;ba=R+S|0;aa=0-R|0;R=ba&aa;if(R>>>0<=F>>>0){n=0;return n|0}_=c[153]|0;if((_|0)!=0?(Z=c[151]|0,Y=Z+R|0,Y>>>0<=Z>>>0|Y>>>0>_>>>0):0){n=0;return n|0}b:do if(!(c[154]&4)){_=c[49]|0;c:do if(_){Y=620;while(1){Z=c[Y>>2]|0;if(Z>>>0<=_>>>0?(T=Y+4|0,(Z+(c[T>>2]|0)|0)>>>0>_>>>0):0){ca=Y;da=T;break}Y=c[Y+8>>2]|0;if(!Y){K=173;break c}}Y=ba-(c[46]|0)&aa;if(Y>>>0<2147483647){T=na(Y|0)|0;if((T|0)==((c[ca>>2]|0)+(c[da>>2]|0)|0)){if((T|0)!=(-1|0)){ea=T;fa=Y;K=193;break b}}else ga=T,ha=Y,K=183}}else K=173;while(0);do if((K|0)==173?(_=na(0)|0,(_|0)!=(-1|0)):0){f=_;Y=c[162]|0;T=Y+-1|0;!(T&f)?ia=R:ia=R-f+(T+f&0-Y)|0;Y=c[151]|0;f=Y+ia|0;if(ia>>>0>F>>>0&ia>>>0<2147483647){T=c[153]|0;if((T|0)!=0?f>>>0<=Y>>>0|f>>>0>T>>>0:0)break;T=na(ia|0)|0;if((T|0)==(_|0)){ea=_;fa=ia;K=193;break b}else ga=T,ha=ia,K=183}}while(0);d:do if((K|0)==183){T=0-ha|0;do if($>>>0>ha>>>0&(ha>>>0<2147483647&(ga|0)!=(-1|0))?(_=c[163]|0,f=S-ha+_&0-_,f>>>0<2147483647):0)if((na(f|0)|0)==(-1|0)){na(T|0)|0;break d}else{ja=f+ha|0;break}else ja=ha;while(0);if((ga|0)!=(-1|0)){ea=ga;fa=ja;K=193;break b}}while(0);c[154]=c[154]|4;K=190}else K=190;while(0);((((K|0)==190?R>>>0<2147483647:0)?(ja=na(R|0)|0,R=na(0)|0,ja>>>0<R>>>0&((ja|0)!=(-1|0)&(R|0)!=(-1|0))):0)?(ga=R-ja|0,ga>>>0>(F+40|0)>>>0):0)&&(ea=ja,fa=ga,K=193);if((K|0)==193){ga=(c[151]|0)+fa|0;c[151]=ga;ga>>>0>(c[152]|0)>>>0&&(c[152]=ga);ga=c[49]|0;do if(ga){ja=620;do{R=c[ja>>2]|0;ha=ja+4|0;S=c[ha>>2]|0;if((ea|0)==(R+S|0)){ka=R;la=ha;pa=S;qa=ja;K=203;break}ja=c[ja+8>>2]|0}while((ja|0)!=0);if(((K|0)==203?(c[qa+12>>2]&8|0)==0:0)?ga>>>0<ea>>>0&ga>>>0>=ka>>>0:0){c[la>>2]=pa+fa;ja=ga+8|0;S=(ja&7|0)==0?0:0-ja&7;ja=ga+S|0;ha=fa-S+(c[46]|0)|0;c[49]=ja;c[46]=ha;c[ja+4>>2]=ha|1;c[ja+ha+4>>2]=40;c[50]=c[165];break}ha=c[47]|0;ea>>>0<ha>>>0?(c[47]=ea,ra=ea):ra=ha;ha=ea+fa|0;ja=620;while(1){if((c[ja>>2]|0)==(ha|0)){sa=ja;ta=ja;K=211;break}ja=c[ja+8>>2]|0;if(!ja){ua=620;break}}if((K|0)==211)if(!(c[ta+12>>2]&8)){c[sa>>2]=ea;ja=ta+4|0;c[ja>>2]=(c[ja>>2]|0)+fa;ja=ea+8|0;S=ea+((ja&7|0)==0?0:0-ja&7)|0;ja=ha+8|0;R=ha+((ja&7|0)==0?0:0-ja&7)|0;ja=S+F|0;$=R-S-F|0;c[S+4>>2]=F|3;do if((R|0)!=(ga|0)){if((R|0)==(c[48]|0)){ia=(c[45]|0)+$|0;c[45]=ia;c[48]=ja;c[ja+4>>2]=ia|1;c[ja+ia>>2]=ia;break}ia=c[R+4>>2]|0;if((ia&3|0)==1){da=ia&-8;ca=ia>>>3;e:do if(ia>>>0>=256){aa=c[R+24>>2]|0;ba=c[R+12>>2]|0;do if((ba|0)==(R|0)){T=R+16|0;f=T+4|0;_=c[f>>2]|0;if(!_){Y=c[T>>2]|0;if(!Y){wa=0;break}else xa=Y,ya=T}else xa=_,ya=f;while(1){f=xa+20|0;_=c[f>>2]|0;if(_){xa=_;ya=f;continue}f=xa+16|0;_=c[f>>2]|0;if(!_){za=xa;Aa=ya;break}else xa=_,ya=f}if(Aa>>>0<ra>>>0)ma();else{c[Aa>>2]=0;wa=za;break}}else{f=c[R+8>>2]|0;f>>>0<ra>>>0&&ma();_=f+12|0;(c[_>>2]|0)!=(R|0)&&ma();T=ba+8|0;if((c[T>>2]|0)==(R|0)){c[_>>2]=ba;c[T>>2]=f;wa=ba;break}else ma()}while(0);if(!aa)break;ba=c[R+28>>2]|0;f=476+(ba<<2)|0;do if((R|0)!=(c[f>>2]|0)){aa>>>0<(c[47]|0)>>>0&&ma();T=aa+16|0;(c[T>>2]|0)==(R|0)?c[T>>2]=wa:c[aa+20>>2]=wa;if(!wa)break e}else{c[f>>2]=wa;if(wa)break;c[44]=c[44]&~(1<<ba);break e}while(0);ba=c[47]|0;wa>>>0<ba>>>0&&ma();c[wa+24>>2]=aa;f=R+16|0;T=c[f>>2]|0;do if(T)if(T>>>0<ba>>>0)ma();else{c[wa+16>>2]=T;c[T+24>>2]=wa;break}while(0);T=c[f+4>>2]|0;if(!T)break;if(T>>>0<(c[47]|0)>>>0)ma();else{c[wa+20>>2]=T;c[T+24>>2]=wa;break}}else{T=c[R+8>>2]|0;ba=c[R+12>>2]|0;aa=212+(ca<<1<<2)|0;do if((T|0)!=(aa|0)){T>>>0<ra>>>0&&ma();if((c[T+12>>2]|0)==(R|0))break;ma()}while(0);if((ba|0)==(T|0)){c[43]=c[43]&~(1<<ca);break}do if((ba|0)==(aa|0))Ba=ba+8|0;else{ba>>>0<ra>>>0&&ma();f=ba+8|0;if((c[f>>2]|0)==(R|0)){Ba=f;break}ma()}while(0);c[T+12>>2]=ba;c[Ba>>2]=T}while(0);Ca=R+da|0;Da=da+$|0}else Ca=R,Da=$;ca=Ca+4|0;c[ca>>2]=c[ca>>2]&-2;c[ja+4>>2]=Da|1;c[ja+Da>>2]=Da;ca=Da>>>3;if(Da>>>0<256){ia=212+(ca<<1<<2)|0;aa=c[43]|0;f=1<<ca;do if(!(aa&f))c[43]=aa|f,Ea=ia+8|0,Fa=ia;else{ca=ia+8|0;_=c[ca>>2]|0;if(_>>>0>=(c[47]|0)>>>0){Ea=ca;Fa=_;break}ma()}while(0);c[Ea>>2]=ja;c[Fa+12>>2]=ja;c[ja+8>>2]=Fa;c[ja+12>>2]=ia;break}f=Da>>>8;do if(!f)Ga=0;else{if(Da>>>0>16777215){Ga=31;break}aa=(f+1048320|0)>>>16&8;da=f<<aa;_=(da+520192|0)>>>16&4;ca=da<<_;da=(ca+245760|0)>>>16&2;Y=14-(_|aa|da)+(ca<<da>>>15)|0;Ga=Da>>>(Y+7|0)&1|Y<<1}while(0);f=476+(Ga<<2)|0;c[ja+28>>2]=Ga;ia=ja+16|0;c[ia+4>>2]=0;c[ia>>2]=0;ia=c[44]|0;Y=1<<Ga;if(!(ia&Y)){c[44]=ia|Y;c[f>>2]=ja;c[ja+24>>2]=f;c[ja+12>>2]=ja;c[ja+8>>2]=ja;break}Y=Da<<((Ga|0)==31?0:25-(Ga>>>1)|0);ia=c[f>>2]|0;while(1){if((c[ia+4>>2]&-8|0)==(Da|0)){Ha=ia;K=281;break}f=ia+16+(Y>>>31<<2)|0;da=c[f>>2]|0;if(!da){Ia=f;Ja=ia;K=278;break}else Y=Y<<1,ia=da}if((K|0)==278)if(Ia>>>0<(c[47]|0)>>>0)ma();else{c[Ia>>2]=ja;c[ja+24>>2]=Ja;c[ja+12>>2]=ja;c[ja+8>>2]=ja;break}else if((K|0)==281){ia=Ha+8|0;Y=c[ia>>2]|0;da=c[47]|0;if(Y>>>0>=da>>>0&Ha>>>0>=da>>>0){c[Y+12>>2]=ja;c[ia>>2]=ja;c[ja+8>>2]=Y;c[ja+12>>2]=Ha;c[ja+24>>2]=0;break}else ma()}}else Y=(c[46]|0)+$|0,c[46]=Y,c[49]=ja,c[ja+4>>2]=Y|1;while(0);n=S+8|0;return n|0}else ua=620;while(1){ja=c[ua>>2]|0;if(ja>>>0<=ga>>>0?($=ja+(c[ua+4>>2]|0)|0,$>>>0>ga>>>0):0){Ka=$;break}ua=c[ua+8>>2]|0}S=Ka+-47|0;$=S+8|0;ja=S+(($&7|0)==0?0:0-$&7)|0;$=ga+16|0;S=ja>>>0<$>>>0?ga:ja;ja=S+8|0;R=ea+8|0;ha=(R&7|0)==0?0:0-R&7;R=ea+ha|0;Y=fa+-40-ha|0;c[49]=R;c[46]=Y;c[R+4>>2]=Y|1;c[R+Y+4>>2]=40;c[50]=c[165];Y=S+4|0;c[Y>>2]=27;c[ja>>2]=c[155];c[ja+4>>2]=c[156];c[ja+8>>2]=c[157];c[ja+12>>2]=c[158];c[155]=ea;c[156]=fa;c[158]=0;c[157]=ja;ja=S+24|0;do ja=ja+4|0,c[ja>>2]=7;while((ja+4|0)>>>0<Ka>>>0);if((S|0)!=(ga|0)){ja=S-ga|0;c[Y>>2]=c[Y>>2]&-2;c[ga+4>>2]=ja|1;c[S>>2]=ja;R=ja>>>3;if(ja>>>0<256){ha=212+(R<<1<<2)|0;ia=c[43]|0;da=1<<R;ia&da?(R=ha+8|0,f=c[R>>2]|0,f>>>0<(c[47]|0)>>>0?ma():(La=R,Ma=f)):(c[43]=ia|da,La=ha+8|0,Ma=ha);c[La>>2]=ga;c[Ma+12>>2]=ga;c[ga+8>>2]=Ma;c[ga+12>>2]=ha;break}ha=ja>>>8;ha?ja>>>0>16777215?Na=31:(da=(ha+1048320|0)>>>16&8,ia=ha<<da,ha=(ia+520192|0)>>>16&4,f=ia<<ha,ia=(f+245760|0)>>>16&2,R=14-(ha|da|ia)+(f<<ia>>>15)|0,Na=ja>>>(R+7|0)&1|R<<1):Na=0;R=476+(Na<<2)|0;c[ga+28>>2]=Na;c[ga+20>>2]=0;c[$>>2]=0;ia=c[44]|0;f=1<<Na;if(!(ia&f)){c[44]=ia|f;c[R>>2]=ga;c[ga+24>>2]=R;c[ga+12>>2]=ga;c[ga+8>>2]=ga;break}f=ja<<((Na|0)==31?0:25-(Na>>>1)|0);ia=c[R>>2]|0;while(1){if((c[ia+4>>2]&-8|0)==(ja|0)){Pa=ia;K=307;break}R=ia+16+(f>>>31<<2)|0;da=c[R>>2]|0;if(!da){Qa=R;Ra=ia;K=304;break}else f=f<<1,ia=da}if((K|0)==304)if(Qa>>>0<(c[47]|0)>>>0)ma();else{c[Qa>>2]=ga;c[ga+24>>2]=Ra;c[ga+12>>2]=ga;c[ga+8>>2]=ga;break}else if((K|0)==307){ia=Pa+8|0;f=c[ia>>2]|0;ja=c[47]|0;if(f>>>0>=ja>>>0&Pa>>>0>=ja>>>0){c[f+12>>2]=ga;c[ia>>2]=ga;c[ga+8>>2]=f;c[ga+12>>2]=Pa;c[ga+24>>2]=0;break}else ma()}}}else{f=c[47]|0;(f|0)==0|ea>>>0<f>>>0&&(c[47]=ea);c[155]=ea;c[156]=fa;c[158]=0;c[52]=c[161];c[51]=-1;f=0;do ia=212+(f<<1<<2)|0,c[ia+12>>2]=ia,c[ia+8>>2]=ia,f=f+1|0;while((f|0)!=32);f=ea+8|0;ia=(f&7|0)==0?0:0-f&7;f=ea+ia|0;ja=fa+-40-ia|0;c[49]=f;c[46]=ja;c[f+4>>2]=ja|1;c[f+ja+4>>2]=40;c[50]=c[165]}while(0);fa=c[46]|0;if(fa>>>0>F>>>0){ea=fa-F|0;c[46]=ea;fa=c[49]|0;ga=fa+F|0;c[49]=ga;c[ga+4>>2]=ea|1;c[fa+4>>2]=F|3;n=fa+8|0;return n|0}}c[(Oa()|0)>>2]=12;n=0;return n|0}function _a(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0;if(!a)return;b=a+-8|0;d=c[47]|0;b>>>0<d>>>0&&ma();e=c[a+-4>>2]|0;a=e&3;(a|0)==1&&ma();f=e&-8;g=b+f|0;do if(!(e&1)){h=c[b>>2]|0;if(!a)return;i=b+(0-h)|0;j=h+f|0;i>>>0<d>>>0&&ma();if((i|0)==(c[48]|0)){k=g+4|0;l=c[k>>2]|0;if((l&3|0)!=3){m=i;n=j;break}c[45]=j;c[k>>2]=l&-2;c[i+4>>2]=j|1;c[i+j>>2]=j;return}l=h>>>3;if(h>>>0<256){h=c[i+8>>2]|0;k=c[i+12>>2]|0;o=212+(l<<1<<2)|0;(h|0)!=(o|0)&&(h>>>0<d>>>0&&ma(),(c[h+12>>2]|0)!=(i|0)&&ma());if((k|0)==(h|0)){c[43]=c[43]&~(1<<l);m=i;n=j;break}(k|0)!=(o|0)?(k>>>0<d>>>0&&ma(),o=k+8|0,(c[o>>2]|0)==(i|0)?p=o:ma()):p=k+8|0;c[h+12>>2]=k;c[p>>2]=h;m=i;n=j;break}h=c[i+24>>2]|0;k=c[i+12>>2]|0;do if((k|0)==(i|0)){o=i+16|0;l=o+4|0;q=c[l>>2]|0;if(!q){r=c[o>>2]|0;if(!r){s=0;break}else t=r,u=o}else t=q,u=l;while(1){l=t+20|0;q=c[l>>2]|0;if(q){t=q;u=l;continue}l=t+16|0;q=c[l>>2]|0;if(!q){v=t;w=u;break}else t=q,u=l}if(w>>>0<d>>>0)ma();else{c[w>>2]=0;s=v;break}}else{l=c[i+8>>2]|0;l>>>0<d>>>0&&ma();q=l+12|0;(c[q>>2]|0)!=(i|0)&&ma();o=k+8|0;if((c[o>>2]|0)==(i|0)){c[q>>2]=k;c[o>>2]=l;s=k;break}else ma()}while(0);if(h){k=c[i+28>>2]|0;l=476+(k<<2)|0;if((i|0)==(c[l>>2]|0)){c[l>>2]=s;if(!s){c[44]=c[44]&~(1<<k);m=i;n=j;break}}else{h>>>0<(c[47]|0)>>>0&&ma();k=h+16|0;(c[k>>2]|0)==(i|0)?c[k>>2]=s:c[h+20>>2]=s;if(!s){m=i;n=j;break}}k=c[47]|0;s>>>0<k>>>0&&ma();c[s+24>>2]=h;l=i+16|0;o=c[l>>2]|0;do if(o)if(o>>>0<k>>>0)ma();else{c[s+16>>2]=o;c[o+24>>2]=s;break}while(0);o=c[l+4>>2]|0;if(o)if(o>>>0<(c[47]|0)>>>0)ma();else{c[s+20>>2]=o;c[o+24>>2]=s;m=i;n=j;break}else m=i,n=j}else m=i,n=j}else m=b,n=f;while(0);m>>>0>=g>>>0&&ma();f=g+4|0;b=c[f>>2]|0;b&1||ma();if(!(b&2)){if((g|0)==(c[49]|0)){s=(c[46]|0)+n|0;c[46]=s;c[49]=m;c[m+4>>2]=s|1;if((m|0)!=(c[48]|0))return;c[48]=0;c[45]=0;return}if((g|0)==(c[48]|0)){s=(c[45]|0)+n|0;c[45]=s;c[48]=m;c[m+4>>2]=s|1;c[m+s>>2]=s;return}s=(b&-8)+n|0;d=b>>>3;do if(b>>>0>=256){v=c[g+24>>2]|0;w=c[g+12>>2]|0;do if((w|0)==(g|0)){u=g+16|0;t=u+4|0;p=c[t>>2]|0;if(!p){a=c[u>>2]|0;if(!a){x=0;break}else y=a,z=u}else y=p,z=t;while(1){t=y+20|0;p=c[t>>2]|0;if(p){y=p;z=t;continue}t=y+16|0;p=c[t>>2]|0;if(!p){A=y;B=z;break}else y=p,z=t}if(B>>>0<(c[47]|0)>>>0)ma();else{c[B>>2]=0;x=A;break}}else{t=c[g+8>>2]|0;t>>>0<(c[47]|0)>>>0&&ma();p=t+12|0;(c[p>>2]|0)!=(g|0)&&ma();u=w+8|0;if((c[u>>2]|0)==(g|0)){c[p>>2]=w;c[u>>2]=t;x=w;break}else ma()}while(0);if(v){w=c[g+28>>2]|0;j=476+(w<<2)|0;if((g|0)==(c[j>>2]|0)){c[j>>2]=x;if(!x){c[44]=c[44]&~(1<<w);break}}else{v>>>0<(c[47]|0)>>>0&&ma();w=v+16|0;(c[w>>2]|0)==(g|0)?c[w>>2]=x:c[v+20>>2]=x;if(!x)break}w=c[47]|0;x>>>0<w>>>0&&ma();c[x+24>>2]=v;j=g+16|0;i=c[j>>2]|0;do if(i)if(i>>>0<w>>>0)ma();else{c[x+16>>2]=i;c[i+24>>2]=x;break}while(0);i=c[j+4>>2]|0;if(i)if(i>>>0<(c[47]|0)>>>0)ma();else{c[x+20>>2]=i;c[i+24>>2]=x;break}}}else{i=c[g+8>>2]|0;w=c[g+12>>2]|0;v=212+(d<<1<<2)|0;(i|0)!=(v|0)&&(i>>>0<(c[47]|0)>>>0&&ma(),(c[i+12>>2]|0)!=(g|0)&&ma());if((w|0)==(i|0)){c[43]=c[43]&~(1<<d);break}(w|0)!=(v|0)?(w>>>0<(c[47]|0)>>>0&&ma(),v=w+8|0,(c[v>>2]|0)==(g|0)?C=v:ma()):C=w+8|0;c[i+12>>2]=w;c[C>>2]=i}while(0);c[m+4>>2]=s|1;c[m+s>>2]=s;if((m|0)==(c[48]|0)){c[45]=s;return}else D=s}else c[f>>2]=b&-2,c[m+4>>2]=n|1,c[m+n>>2]=n,D=n;n=D>>>3;if(D>>>0<256){b=212+(n<<1<<2)|0;f=c[43]|0;s=1<<n;f&s?(n=b+8|0,C=c[n>>2]|0,C>>>0<(c[47]|0)>>>0?ma():(E=n,F=C)):(c[43]=f|s,E=b+8|0,F=b);c[E>>2]=m;c[F+12>>2]=m;c[m+8>>2]=F;c[m+12>>2]=b;return}b=D>>>8;b?D>>>0>16777215?G=31:(F=(b+1048320|0)>>>16&8,E=b<<F,b=(E+520192|0)>>>16&4,s=E<<b,E=(s+245760|0)>>>16&2,f=14-(b|F|E)+(s<<E>>>15)|0,G=D>>>(f+7|0)&1|f<<1):G=0;f=476+(G<<2)|0;c[m+28>>2]=G;c[m+20>>2]=0;c[m+16>>2]=0;E=c[44]|0;s=1<<G;do if(E&s){F=D<<((G|0)==31?0:25-(G>>>1)|0);b=c[f>>2]|0;while(1){if((c[b+4>>2]&-8|0)==(D|0)){H=b;I=130;break}C=b+16+(F>>>31<<2)|0;n=c[C>>2]|0;if(!n){J=C;K=b;I=127;break}else F=F<<1,b=n}if((I|0)==127)if(J>>>0<(c[47]|0)>>>0)ma();else{c[J>>2]=m;c[m+24>>2]=K;c[m+12>>2]=m;c[m+8>>2]=m;break}else if((I|0)==130){b=H+8|0;F=c[b>>2]|0;j=c[47]|0;if(F>>>0>=j>>>0&H>>>0>=j>>>0){c[F+12>>2]=m;c[b>>2]=m;c[m+8>>2]=F;c[m+12>>2]=H;c[m+24>>2]=0;break}else ma()}}else c[44]=E|s,c[f>>2]=m,c[m+24>>2]=f,c[m+12>>2]=m,c[m+8>>2]=m;while(0);m=(c[51]|0)+-1|0;c[51]=m;if(!m)L=628;else return;while(1){m=c[L>>2]|0;if(!m)break;else L=m+8|0}c[51]=-1;return}function $a(){}function ab(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){C=b>>c;return a>>>c|(b&(1<<c)-1)<<32-c}C=(b|0)<0?-1:0;return b>>c-32|0}function bb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=b-d>>>0;e=b-d-(c>>>0>a>>>0|0)>>>0;return(C=e,a-c>>>0|0)|0}function cb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=a+c>>>0;return(C=b+d+(e>>>0<a>>>0|0)>>>0,e|0)|0}function db(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=b+e|0;if((e|0)>=20){d=d&255;g=b&3;h=d|d<<8|d<<16|d<<24;i=f&-4;if(g){g=b+4-g|0;while((b|0)<(g|0))a[b>>0]=d,b=b+1|0}while((b|0)<(i|0))c[b>>2]=h,b=b+4|0}while((b|0)<(f|0))a[b>>0]=d,b=b+1|0;return b-e|0}function eb(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){C=b>>>c;return a>>>c|(b&(1<<c)-1)<<32-c}C=0;return b>>>c-32|0}function fb(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){C=b<<c|(a&(1<<c)-1<<32-c)>>>32-c;return a<<c}C=a<<c-32;return 0}function gb(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;if((e|0)>=4096)return qa(b|0,d|0,e|0)|0;f=b|0;if((b&3)==(d&3)){while(b&3){if(!e)return f|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}while((e|0)>=4)c[b>>2]=c[d>>2],b=b+4|0,d=d+4|0,e=e-4|0}while((e|0)>0)a[b>>0]=a[d>>0]|0,b=b+1|0,d=d+1|0,e=e-1|0;return f|0}function hb(b){b=b|0;var c=0;c=a[m+(b&255)>>0]|0;if((c|0)<8)return c|0;c=a[m+(b>>8&255)>>0]|0;if((c|0)<8)return c+8|0;c=a[m+(b>>16&255)>>0]|0;return(c|0)<8?c+16|0:(a[m+(b>>>24)>>0]|0)+24|0}function ib(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0;c=a&65535;d=b&65535;e=_(d,c)|0;f=a>>>16;a=(e>>>16)+(_(d,f)|0)|0;d=b>>>16;b=_(d,c)|0;return(C=(a>>>16)+(_(d,f)|0)+(((a&65535)+b|0)>>>16)|0,a+b<<16|e&65535|0)|0}function jb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0,g=0,h=0,i=0;e=b>>31|((b|0)<0?-1:0)<<1;f=((b|0)<0?-1:0)>>31|((b|0)<0?-1:0)<<1;g=d>>31|((d|0)<0?-1:0)<<1;h=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1;i=bb(e^a,f^b,e,f)|0;b=C;a=g^e;e=h^f;return bb((ob(i,b,bb(g^c,h^d,g,h)|0,C,0)|0)^a,C^e,a,e)|0}function kb(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0;f=i;i=i+16|0;g=f|0;h=b>>31|((b|0)<0?-1:0)<<1;j=((b|0)<0?-1:0)>>31|((b|0)<0?-1:0)<<1;k=e>>31|((e|0)<0?-1:0)<<1;l=((e|0)<0?-1:0)>>31|((e|0)<0?-1:0)<<1;m=bb(h^a,j^b,h,j)|0;b=C;ob(m,b,bb(k^d,l^e,k,l)|0,C,g)|0;l=bb(c[g>>2]^h,c[g+4>>2]^j,h,j)|0;j=C;i=f;return(C=j,l)|0}function lb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0;e=a;a=c;c=ib(e,a)|0;f=C;return(C=(_(b,a)|0)+(_(d,e)|0)+f|f&0,c|0|0)|0}function mb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return ob(a,b,c,d,0)|0}function nb(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0;f=i;i=i+16|0;g=f|0;ob(a,b,d,e,g)|0;i=f;return(C=c[g+4>>2]|0,c[g>>2]|0)|0}function ob(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,D=0,E=0,F=0,G=0,H=0;g=a;h=b;i=h;j=d;k=e;l=k;if(!i){m=(f|0)!=0;if(!l){m&&(c[f>>2]=(g>>>0)%(j>>>0),c[f+4>>2]=0);n=0;o=(g>>>0)/(j>>>0)>>>0;return(C=n,o)|0}else{if(!m){n=0;o=0;return(C=n,o)|0}c[f>>2]=a|0;c[f+4>>2]=b&0;n=0;o=0;return(C=n,o)|0}}m=(l|0)==0;do if(j){if(!m){p=(aa(l|0)|0)-(aa(i|0)|0)|0;if(p>>>0<=31){q=p+1|0;r=31-p|0;s=p-31>>31;t=q;u=g>>>(q>>>0)&s|i<<r;v=i>>>(q>>>0)&s;w=0;x=g<<r;break}if(!f){n=0;o=0;return(C=n,o)|0}c[f>>2]=a|0;c[f+4>>2]=h|b&0;n=0;o=0;return(C=n,o)|0}r=j-1|0;if(r&j){s=(aa(j|0)|0)+33-(aa(i|0)|0)|0;q=64-s|0;p=32-s|0;y=p>>31;z=s-32|0;A=z>>31;t=s;u=p-1>>31&i>>>(z>>>0)|(i<<p|g>>>(s>>>0))&A;v=A&i>>>(s>>>0);w=g<<q&y;x=(i<<q|g>>>(z>>>0))&y|g<<p&s-33>>31;break}f&&(c[f>>2]=r&g,c[f+4>>2]=0);if((j|0)==1){n=h|b&0;o=a|0|0;return(C=n,o)|0}else{r=hb(j|0)|0;n=i>>>(r>>>0)|0;o=i<<32-r|g>>>(r>>>0)|0;return(C=n,o)|0}}else{if(m){f&&(c[f>>2]=(i>>>0)%(j>>>0),c[f+4>>2]=0);n=0;o=(i>>>0)/(j>>>0)>>>0;return(C=n,o)|0}if(!g){f&&(c[f>>2]=0,c[f+4>>2]=(i>>>0)%(l>>>0));n=0;o=(i>>>0)/(l>>>0)>>>0;return(C=n,o)|0}r=l-1|0;if(!(r&l)){f&&(c[f>>2]=a|0,c[f+4>>2]=r&i|b&0);n=0;o=i>>>((hb(l|0)|0)>>>0);return(C=n,o)|0}r=(aa(l|0)|0)-(aa(i|0)|0)|0;if(r>>>0<=30){s=r+1|0;p=31-r|0;t=s;u=i<<p|g>>>(s>>>0);v=i>>>(s>>>0);w=0;x=g<<p;break}if(!f){n=0;o=0;return(C=n,o)|0}c[f>>2]=a|0;c[f+4>>2]=h|b&0;n=0;o=0;return(C=n,o)|0}while(0);if(!t)B=x,D=w,E=v,F=u,G=0,H=0;else{b=d|0|0;d=k|e&0;e=cb(b|0,d|0,-1,-1)|0;k=C;h=x;x=w;w=v;v=u;u=t;t=0;do a=h,h=x>>>31|h<<1,x=t|x<<1,g=v<<1|a>>>31|0,a=v>>>31|w<<1|0,bb(e,k,g,a)|0,i=C,l=i>>31|((i|0)<0?-1:0)<<1,t=l&1,v=bb(g,a,l&b,(((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1)&d)|0,w=C,u=u-1|0;while((u|0)!=0);B=h;D=x;E=w;F=v;G=0;H=t}t=D;D=0;f&&(c[f>>2]=F,c[f+4>>2]=E);n=(t|0)>>>31|(B|D)<<1|(D<<1|t>>>31)&0|G;o=(t<<1|0>>>31)&-2|H;return(C=n,o)|0}function pb(a,b){a=a|0;b=b|0;return ya[a&1](b|0)|0}function qb(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return za[a&3](b|0,c|0,d|0)|0}function rb(a,b){a=a|0,b=b|0,Aa[a&1](b|0)}function sb(a){a=a|0;ba(0);return 0}function tb(a,b,c){a=a|0;b=b|0;c=c|0;ba(1);return 0}function ub(a){a=a|0,ba(2)}var ya=[sb,Sa],za=[tb,Va,Ta,Ua],Aa=[ub,Xa];return{_curve25519_donna:Ka,_free:_a,_i64Add:cb,_bitshift64Ashr:ab,_i64Subtract:bb,_memset:db,_malloc:Za,_memcpy:gb,_bitshift64Lshr:eb,_fflush:Wa,___errno_location:Oa,_bitshift64Shl:fb,runPostSets:$a,stackAlloc:Ba,stackSave:Ca,stackRestore:Da,establishStackSpace:Ea,setThrew:Fa,setTempRet0:Ia,getTempRet0:Ja,dynCall_ii:pb,dynCall_iiii:qb,dynCall_vi:rb}}(e.Na,e.Oa,buffer);e._curve25519_donna=Z._curve25519_donna;var Da=e._free=Z._free;e.runPostSets=Z.runPostSets;var cb=e._i64Add=Z._i64Add,ab=e._bitshift64Ashr=Z._bitshift64Ashr,bb=e._i64Subtract=Z._i64Subtract,db=e._memset=Z._memset,ua=e._malloc=Z._malloc,gc=e._memcpy=Z._memcpy,fb=e._bitshift64Lshr=Z._bitshift64Lshr;e._fflush=Z._fflush;e.___errno_location=Z.___errno_location;var gb=e._bitshift64Shl=Z._bitshift64Shl;e.dynCall_ii=Z.dynCall_ii;e.dynCall_iiii=Z.dynCall_iiii;e.dynCall_vi=Z.dynCall_vi;n.W=Z.stackAlloc;n.na=Z.stackSave;n.X=Z.stackRestore;n.md=Z.establishStackSpace;n.cb=Z.setTempRet0;n.Ua=Z.getTempRet0;function xc(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}xc.prototype=Error();xc.prototype.constructor=xc;var Yc=null,Xa=function Zc(){e.calledRun||$c(),e.calledRun||(Xa=Zc)};e.callMain=e.jd=function(a){function b(){for(var a=0;3>a;a++)d.push(0)}assert(0==L,"cannot call main when async dependencies remain! (listen on __ATMAIN__)");assert(0==Pa.length,"cannot call main when preRun functions remain to be called");a=a||[];xa||(xa=!0,Oa(Qa));var c=a.length+1,d=[G(Va(e.thisProgram),"i8",0)];b();for(var f=0;f<c-1;f+=1)d.push(G(Va(a[f]),"i8",0)),b();d.push(0);d=G(d,"i32",0);try{var h=e._main(c,d,0);ad(h,!0)}catch(g){if(!(g instanceof xc))if("SimulateInfiniteLoop"==g)e.noExitRuntime=!0;else throw g&&"object"===typeof g&&g.stack&&e.S("exception thrown: "+[g,g.stack]),g}finally{}};function $c(a){function b(){if(!e.calledRun&&(e.calledRun=!0,!A)){xa||(xa=!0,Oa(Qa));Oa(Ra);e.onRuntimeInitialized&&e.onRuntimeInitialized();e._main&&bd&&e.callMain(a);if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)Ua(e.postRun.shift());Oa(Sa)}}a=a||e.arguments;null===Yc&&(Yc=Date.now());if(!(0<L)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)Ta(e.preRun.shift());Oa(Pa);0<L||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),b()},1)):b())}}e.run=e.run=$c;function ad(a,b){if(!b||!e.noExitRuntime){!e.noExitRuntime&&(A=!0,m=void 0,Oa(K),e.onExit)&&e.onExit(a);throw new xc(a)}}e.exit=e.exit=ad;var cd=[];function z(a){void 0!==a?(e.print(a),e.S(a),a=JSON.stringify(a)):a="";A=!0;var b="abort("+a+") at "+Ea()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";cd&&cd.forEach(function(c){b=c(b,a)});throw b}e.abort=e.abort=z;if(e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();var bd=!0;e.noInitialRun&&(bd=!1);$c();module.exports=e}),null);
__d("WAWebCryptoCurve25519",["Promise","WAWeb-curve25519-donna","WAWebCryptoLibraryUtilsApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i;function j(){i||(i=b("WAWeb-curve25519-donna"))}var k=new Uint8Array(32);k[0]=9;function a(a){var b;a===void 0?(b=new Uint8Array(32),self.crypto.getRandomValues(b)):b=new Uint8Array(a);b[0]&=248;b[31]&=127;b[31]|=64;return s({pubKey:32,privKey:b,basepoint:k},function(a){var d=i._curve25519_donna(a.pubKey,a.privKey,a.basepoint);if(d)throw c("err")("Curve25519:keyPair Error Code "+d);return{pubKey:r(a.pubKey,32),privKey:b.buffer}})}function d(a,d){return(h||(h=b("Promise"))).resolve().then(function(){return s({sharedKey:32,pubKey:a,privKey:d},function(a){var b=i._curve25519_donna(a.sharedKey,a.privKey,a.pubKey);if(b)throw c("err")("Curve25519:sharedSecret Error Code "+b);return r(a.sharedKey,32)})})}var l=5;function m(a){return a.pubKey.byteLength===33&&a.privKey.byteLength===32}function e(a){if(m(a))return a;if(a.pubKey.byteLength!==32||a.privKey.byteLength!==32)throw c("err")("Invalid key pair type");var b=n(a.pubKey),d=new Uint8Array(32);d.set(new Uint8Array(a.privKey));return{pubKey:b,privKey:d.buffer}}function n(a){if(a.byteLength!==32)throw c("err")("Invalid key type");var b=new Uint8Array(33);b[0]=l;b.set(new Uint8Array(a),1);return b.buffer}function o(a){return a.privKey.byteLength===32&&a.pubKey.byteLength===32}function f(a){if(o(a))return a;if(a.pubKey.byteLength!==33||a.privKey.byteLength!==32)throw c("err")("Invalid key pair type");var b=new Uint8Array(32),d=new Uint8Array(32);b.set(new Uint8Array(a.pubKey).subarray(1));d.set(new Uint8Array(a.privKey));return{pubKey:b.buffer,privKey:d.buffer}}function p(a){if(a.byteLength!==33)throw c("err")("Invalid key type");var b=new Uint8Array(32);b.set(new Uint8Array(a).subarray(1));return b.buffer}function q(a){if(typeof a==="number")return i._malloc(a);a=new Uint8Array(a.buffer||a);var b=i._malloc(a.length);i.HEAPU8.set(a,b);return b}function r(a,b){var c=new Uint8Array(b);c.set(i.HEAPU8.subarray(a,a+b));return c.buffer}function s(a,b){j();var c={};try{for(var d in a)c[d]=q(a[d]);return b(c)}finally{for(d in c)i._free(c[d])}}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield c("WAWebCryptoLibraryUtilsApi").signMsg(a.pubKey,a.privKey,b));return a});return u.apply(this,arguments)}function v(a,b,d){if(a.byteLength!==32)throw c("err")("Invalid public key length: "+a.byteLength);var e=new Uint8Array(33);e[0]=l;e.set(a,1);return c("WAWebCryptoLibraryUtilsApi").verifySignature(e,b,d)}g.keyPair=a;g.sharedSecret=d;g.toSignalCurveKeyPair=e;g.toSignalCurvePubKey=n;g.toCurveKeyPair=f;g.toCurveKeyPubKey=p;g.calculateSignature=t;g.verifySignature=v}),98);
__d("WAWebBotGating",["WAWebABProps","WAWebBotGenTypingIndicatorMsg","WAWebL10N","WAWebMobilePlatforms","WAWebMsgGetters"],(function(a,b,c,d,e,f,g){function h(){if(d("WAWebMobilePlatforms").isSMB())return!1;return!w()?!1:j()}function i(){return d("WAWebABProps").getABPropConfigValue("bonsai_receiver_enabled")===!0}function j(){return d("WAWebABProps").getABPropConfigValue("bonsai_enabled")===!0}function k(){return d("WAWebABProps").getABPropConfigValue("bonsai_entry_point_enabled")===!0}function a(){return h()||i()}function b(){return h()&&d("WAWebABProps").getABPropConfigValue("bonsai_ptt_enabled")===!0}function e(a){return!h()?!1:Boolean(d("WAWebMsgGetters").getIsMetaBotResponse(a))||a.subtype===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE}function f(){return d("WAWebABProps").getABPropConfigValue("wabai_message_rendering_enabled")}function l(){return d("WAWebABProps").getABPropConfigValue("wabai_message_feedback_enabled")}function m(){return d("WAWebABProps").getABPropConfigValue("bot_3p_status")!==0}function n(){return d("WAWebABProps").getABPropConfigValue("bot_3p_status")===2}function o(){return i()&&d("WAWebABProps").getABPropConfigValue("bonsai_carousel_enabled")}function p(){return h()&&k()&&d("WAWebABProps").getABPropConfigValue("bonsai_chat_list_entry_point_enabled")}function q(){return h()&&k()&&!p()}function r(){return d("WAWebABProps").getABPropConfigValue("wabai_consent_cooldown")}function s(){return d("WAWebABProps").getABPropConfigValue("wabai_consent_required")}function t(){return h()&&d("WAWebABProps").getABPropConfigValue("bot_commands_1p_enabled")}var u,v;function w(){var a;a=(a=d("WAWebABProps").getABPropConfigValue("bonsai_supported_languages"))!=null?a:"en";if(v!==a||u==null){var b=a.toLowerCase().split(",").map(function(a){return a.trim()});v=a;u=b.includes(c("WAWebL10N").getLanguage())}return u}function x(){return d("WAWebABProps").getABPropConfigValue("bonsai_fp_ugc_sender")}g.isBotEnabled=h;g.isBotReceiveEnabled=i;g.isBotMsgParseEnabledForFutureproofOrFullRecv=a;g.isBotPttEnabled=b;g.shouldAnimateAsBotStream=e;g.isBizBot1pEnabled=f;g.isBizBot1pFeedbackEnabled=l;g.isBizBot3pEnabled=m;g.isBizBot3pAvailable=n;g.isBotCarouselEnabled=o;g.isBotShortcutEntryPointEnabled=p;g.isBotNewChatEntryPointEnabled=q;g.bizBotConsentDismissalCooldown=r;g.isBizBotConsentRequired=s;g.isMetaBotCommandsEnabled=t;g.isFbidBotEnabled=x}),98);
__d("WAWebBotGenTypingIndicatorMsg",["WAWebABProps","WAWebBackendApi","WAWebBotGating","WAWebMsgKey","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){f="bot_typing_placeholder";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBotGating").isBotEnabled())return;var b=a.id;if(b instanceof c("WAWebWid")&&!b.isBot()&&!((a=a.contact.businessProfile)==null?void 0:a.isBizBot3p))return;a=new(c("WAWebMsgKey"))({fromMe:!1,remote:b,id:c("WAWebMsgKey").newId_DEPRECATED()});d("WAWebBackendApi").frontendFireAndForget("addInitialBotTypingIndicatorToChat",{chatId:b,msgKey:a})});return h.apply(this,arguments)}function e(){var a=d("WAWebABProps").getABPropConfigValue("bonsai_ti_timeout_duration_ms");return a}g.BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE=f;g.genBotTypingIndicatorMessage=a;g.getBotTypingIndicatorTimeout=e}),98);
__d("WAWebWamEnumBizCatalogType",[],(function(a,b,c,d,e,f){a=Object.freeze({SHOPS:0,NATIVE:1});f.BIZ_CATALOG_TYPE=a}),66);
__d("WAWebWamEnumBlockReason",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,NO_LONGER_NEEDED:1,NO_SIGN_UP:2,SPAM:3,OFFENSIVE_MESSAGES:4,OTP_DID_NOT_REQUEST:5});f.BLOCK_REASON=a}),66);
__d("WAWebWamEnumChatMutedType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_MUTED:1,MUTED_NO_NOTIFICATIONS:2,MUTED_SILENT_NOTIFICATIONS:3});f.CHAT_MUTED_TYPE=a}),66);
__d("WAWebWamEnumChatOriginsType",[],(function(a,b,c,d,e,f){a=Object.freeze({LID_USERNAME:1,LID_CTWA:2,OTHERS:3});f.CHAT_ORIGINS_TYPE=a}),66);
__d("WAWebWamEnumChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:1,SMB:2,ENT:3,INTEROP:4});f.CHAT_TYPE=a}),66);
__d("WAWebWamEnumGaStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NEW:0,RETAINED:1,RESURRECTED:2});f.GA_STATUS=a}),66);
__d("WAWebWamEnumGroupInfoSettingType",[],(function(a,b,c,d,e,f){a=Object.freeze({ADMINS_ONLY:1,ALL_PARTICIPANTS:2});f.GROUP_INFO_SETTING_TYPE=a}),66);
__d("WAWebWamEnumOppositeVisibleIdentificationType",[],(function(a,b,c,d,e,f){a=Object.freeze({PHONE_NUMBER:1,SAVED_CONTACT_NAME:2,USERNAME:3,MASKED_PHONE_NUMBER:4,VERIFIED_BUSINESS_NAME:5,PLACEHOLDER:6,PUSHNAME:7});f.OPPOSITE_VISIBLE_IDENTIFICATION_TYPE=a}),66);
__d("WAWebChatMessageCountsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizCatalogType","WAWebWamEnumBlockReason","WAWebWamEnumChatMutedType","WAWebWamEnumChatOriginsType","WAWebWamEnumChatType","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumGaStatus","WAWebWamEnumGroupInfoSettingType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChatMessageCounts:[1644,{aiDiscoveryTab:[195,a.TYPES.STRING],aptTestId:[212,a.TYPES.STRING],audioMessagesReceived:[149,a.TYPES.INTEGER],audioMessagesSent:[150,a.TYPES.INTEGER],autoReplyFromIcebreakerSent:[190,a.TYPES.INTEGER],awayMsgsSent:[56,a.TYPES.INTEGER],bizCatalogType:[60,d("WAWebWamEnumBizCatalogType").BIZ_CATALOG_TYPE],bizConversationDepth:[65,a.TYPES.INTEGER],blockReason:[33,d("WAWebWamEnumBlockReason").BLOCK_REASON],bottomSheetAnimatedSent:[206,a.TYPES.INTEGER],bottomSheetEditedAnimatedSent:[207,a.TYPES.INTEGER],bottomSheetEditedSent:[208,a.TYPES.INTEGER],bottomSheetForwardMessagesSent:[196,a.TYPES.INTEGER],bottomSheetImagesEdited:[209,a.TYPES.INTEGER],bottomSheetImagesGenerated:[197,a.TYPES.INTEGER],bottomSheetMessagesDownloaded:[198,a.TYPES.INTEGER],bottomSheetMessagesReceived:[199,a.TYPES.INTEGER],bottomSheetMessagesSent:[200,a.TYPES.INTEGER],bottomSheetPromptsInitiated:[201,a.TYPES.INTEGER],bottomSheetRegeneratedSent:[210,a.TYPES.INTEGER],broadcastMsgsReceived:[30,a.TYPES.INTEGER],broadcastMsgsSent:[29,a.TYPES.INTEGER],callOffersReceived:[27,a.TYPES.INTEGER],callOffersSent:[26,a.TYPES.INTEGER],callsResultBusy:[70,a.TYPES.INTEGER],callsResultCancelled:[71,a.TYPES.INTEGER],callsResultConnected:[72,a.TYPES.INTEGER],callsResultError:[78,a.TYPES.INTEGER],callsResultMissed:[73,a.TYPES.INTEGER],callsResultRejected:[74,a.TYPES.INTEGER],canEditDmSettings:[88,a.TYPES.BOOLEAN],cartViews:[86,a.TYPES.INTEGER],chatEphemeralityDuration:[15,a.TYPES.INTEGER],chatMuted:[8,d("WAWebWamEnumChatMutedType").CHAT_MUTED_TYPE],chatOrigins:[179,d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE],chatOverflowClicks:[79,a.TYPES.INTEGER],chatTypeInd:[2,d("WAWebWamEnumChatType").CHAT_TYPE],collectionInquiriesSent:[44,a.TYPES.INTEGER],commandSheetShow:[174,a.TYPES.INTEGER],commentsReceived:[126,a.TYPES.INTEGER],commerceMsgsReceived:[41,a.TYPES.INTEGER],commerceMsgsSent:[40,a.TYPES.INTEGER],disappearingChatInitiator:[59,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],documentMessagesReceived:[151,a.TYPES.INTEGER],documentMessagesSent:[152,a.TYPES.INTEGER],editedMsgsSent:[100,a.TYPES.INTEGER],emuFlashPlaybacks:[184,a.TYPES.INTEGER],emuFlashPreviewShow:[182,a.TYPES.INTEGER],emuFlashSent:[183,a.TYPES.INTEGER],entryPointConversionApp:[47,a.TYPES.STRING],entryPointConversionSource:[46,a.TYPES.STRING],ephemeralMessagesReceived:[14,a.TYPES.INTEGER],ephemeralMessagesSent:[13,a.TYPES.INTEGER],ephemeralMessagesUnreadExpired:[69,a.TYPES.INTEGER],ephemeralityInitiator:[109,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[110,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],eventCreationMessagesReceived:[142,a.TYPES.INTEGER],eventCreationMessagesSent:[143,a.TYPES.INTEGER],eventResponseMessagesReceived:[144,a.TYPES.INTEGER],eventResponseMessagesSent:[145,a.TYPES.INTEGER],fbCtaInquiriesSent:[45,a.TYPES.INTEGER],firstResponseTime:[25,a.TYPES.INTEGER],forwardAudioMessagesReceived:[153,a.TYPES.INTEGER],forwardAudioMessagesSent:[154,a.TYPES.INTEGER],forwardDocumentMessagesReceived:[155,a.TYPES.INTEGER],forwardDocumentMessagesSent:[156,a.TYPES.INTEGER],forwardGifMessagesReceived:[157,a.TYPES.INTEGER],forwardGifMessagesSent:[158,a.TYPES.INTEGER],forwardMessagesReceived:[89,a.TYPES.INTEGER],forwardMessagesSent:[90,a.TYPES.INTEGER],forwardPhotoMessagesReceived:[128,a.TYPES.INTEGER],forwardPhotoMessagesSent:[129,a.TYPES.INTEGER],forwardPtvMessagesReceived:[159,a.TYPES.INTEGER],forwardPtvMessagesSent:[160,a.TYPES.INTEGER],forwardStatusReplyMessagesReceived:[161,a.TYPES.INTEGER],forwardStatusReplyMessagesSent:[162,a.TYPES.INTEGER],forwardStickerMessagesReceived:[163,a.TYPES.INTEGER],forwardStickerMessagesSent:[164,a.TYPES.INTEGER],forwardTextMessagesReceived:[130,a.TYPES.INTEGER],forwardTextMessagesSent:[131,a.TYPES.INTEGER],forwardUrlMessagesReceived:[132,a.TYPES.INTEGER],forwardUrlMessagesSent:[133,a.TYPES.INTEGER],forwardVideoMessagesReceived:[165,a.TYPES.INTEGER],forwardVideoMessagesSent:[166,a.TYPES.INTEGER],gaStatus:[22,d("WAWebWamEnumGaStatus").GA_STATUS],gifMessagesReceived:[167,a.TYPES.INTEGER],gifMessagesSent:[168,a.TYPES.INTEGER],googleSearchClick:[214,a.TYPES.INTEGER],googleSearchShow:[215,a.TYPES.INTEGER],greetingMsgsSent:[57,a.TYPES.INTEGER],groupContainsBiz:[75,a.TYPES.BOOLEAN],groupInfoSetting:[87,d("WAWebWamEnumGroupInfoSettingType").GROUP_INFO_SETTING_TYPE],groupMembershipReplies:[51,a.TYPES.INTEGER],groupPrivateReplies:[52,a.TYPES.INTEGER],groupSize:[19,a.TYPES.INTEGER],hasUsername:[180,a.TYPES.BOOLEAN],imagineCommandClick:[175,a.TYPES.INTEGER],imagineMeMessagesSent:[202,a.TYPES.INTEGER],imagineMePromptsInitiatedCount:[203,a.TYPES.INTEGER],imagineMentionClick:[146,a.TYPES.INTEGER],imagineMentionShow:[176,a.TYPES.INTEGER],isAContact:[6,a.TYPES.BOOLEAN],isAContactAtThreadCreation:[213,a.TYPES.BOOLEAN],isAGroup:[5,a.TYPES.BOOLEAN],isArchived:[10,a.TYPES.BOOLEAN],isAutoMuted:[108,a.TYPES.BOOLEAN],isBlocked:[32,a.TYPES.BOOLEAN],isCartAddClicked:[36,a.TYPES.BOOLEAN],isCommerceViewed:[35,a.TYPES.BOOLEAN],isCtaOnPdpClicked:[37,a.TYPES.BOOLEAN],isDeleted:[185,a.TYPES.BOOLEAN],isInviteCreatedThread:[106,a.TYPES.BOOLEAN],isLabelled:[54,a.TYPES.BOOLEAN],isMessageYourself:[91,a.TYPES.BOOLEAN],isMetaAiAssistant:[211,a.TYPES.BOOLEAN],isOppositePartyInitiated:[62,a.TYPES.BOOLEAN],isPinned:[9,a.TYPES.BOOLEAN],isPnhEnabledChat:[92,a.TYPES.BOOLEAN],isReported:[186,a.TYPES.BOOLEAN],isUser1pBizBotChat:[141,a.TYPES.BOOLEAN],isUser3pBotChat:[140,a.TYPES.BOOLEAN],isUserAgent:[111,a.TYPES.BOOLEAN],isUserCreatedAgent:[123,a.TYPES.BOOLEAN],isWaPayRegistered:[81,a.TYPES.BOOLEAN],labelledMsgs:[55,a.TYPES.INTEGER],locationsSent:[96,a.TYPES.INTEGER],markedReadCnt:[193,a.TYPES.INTEGER],markedReadMessageCnt:[194,a.TYPES.INTEGER],messagesRead:[127,a.TYPES.INTEGER],messagesReceived:[4,a.TYPES.INTEGER],messagesSent:[3,a.TYPES.INTEGER],messagesStarred:[12,a.TYPES.INTEGER],messagesUnread:[11,a.TYPES.INTEGER],metaAiMentionClick:[147,a.TYPES.INTEGER],metaAiMentionShow:[148,a.TYPES.INTEGER],newThread:[68,a.TYPES.BOOLEAN],odReceived:[82,a.TYPES.INTEGER],oppositePartyHasBusinessIntent:[204,a.TYPES.BOOLEAN],oppositeVisibleIdentification:[181,d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],ordersSent:[38,a.TYPES.INTEGER],p2mOdNnpTransactionsSent:[83,a.TYPES.INTEGER],p2mOdNpTransactionsSent:[84,a.TYPES.INTEGER],paymentsSent:[39,a.TYPES.INTEGER],pdpInquiriesSent:[42,a.TYPES.INTEGER],pdpViews:[61,a.TYPES.INTEGER],photoMessagesReceived:[134,a.TYPES.INTEGER],photoMessagesSent:[135,a.TYPES.INTEGER],pollCreationMessagesReceived:[115,a.TYPES.INTEGER],pollCreationMessagesSent:[116,a.TYPES.INTEGER],pollUpdateMessagesReceived:[117,a.TYPES.INTEGER],pollUpdateMessagesSent:[118,a.TYPES.INTEGER],profileReplies:[64,a.TYPES.INTEGER],profileViews:[63,a.TYPES.INTEGER],pttMessagesReceived:[119,a.TYPES.INTEGER],pttMessagesSent:[120,a.TYPES.INTEGER],ptvMessagesReceived:[121,a.TYPES.INTEGER],ptvMessagesSent:[122,a.TYPES.INTEGER],quickRepliesSent:[58,a.TYPES.INTEGER],reactionsReceived:[97,a.TYPES.INTEGER],reactionsSent:[98,a.TYPES.INTEGER],receiverDefaultDisappearingDuration:[21,a.TYPES.INTEGER],repliesSent:[80,a.TYPES.INTEGER],requestedPhoneNumber:[93,a.TYPES.BOOLEAN],seenMaskedPhoneNumber:[94,a.TYPES.BOOLEAN],senderDefaultDisappearingDuration:[20,a.TYPES.INTEGER],sharedPhoneNumber:[99,a.TYPES.BOOLEAN],smbMarketingMessagesReactionsSent:[101,a.TYPES.INTEGER],smbMarketingMessagesRepliesSent:[102,a.TYPES.INTEGER],smbMarketingMessagesSpamReports:[103,a.TYPES.INTEGER],smbMarketingMsgsReceived:[104,a.TYPES.INTEGER],smbMarketingMsgsSent:[105,a.TYPES.INTEGER],spamReports:[31,a.TYPES.INTEGER],startTime:[7,a.TYPES.INTEGER],statusReactionsReceived:[191,a.TYPES.INTEGER],statusReactionsSent:[192,a.TYPES.INTEGER],statusReplies:[50,a.TYPES.INTEGER],statusReplyMessagesReceived:[169,a.TYPES.INTEGER],statusViews:[49,a.TYPES.INTEGER],stickerMessagesReceived:[170,a.TYPES.INTEGER],stickerMessagesSent:[171,a.TYPES.INTEGER],storefrontInquiriesSent:[43,a.TYPES.INTEGER],suggestionPromptsClick:[177,a.TYPES.INTEGER],suggestionPromptsShow:[178,a.TYPES.INTEGER],textMessagesReceived:[136,a.TYPES.INTEGER],textMessagesSent:[137,a.TYPES.INTEGER],textMessagesToUserCreatedAgentCnt:[124,a.TYPES.INTEGER],threadCreationDate:[189,a.TYPES.STRING],threadDs:[66,a.TYPES.STRING],threadId:[67,a.TYPES.STRING],totalCallDuration:[28,a.TYPES.INTEGER],totalMessageEditsFromAgentCnt:[112,a.TYPES.INTEGER],totalMessageFromAgentCnt:[113,a.TYPES.INTEGER],totalMessageToAgentCnt:[114,a.TYPES.INTEGER],totalMessagesToUserCreatedAgentCnt:[125,a.TYPES.INTEGER],typeOfGroup:[85,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM],urlMessagesReceived:[138,a.TYPES.INTEGER],urlMessagesSent:[139,a.TYPES.INTEGER],userHasBusinessIntent:[205,a.TYPES.BOOLEAN],viaContactlessChats:[107,a.TYPES.BOOLEAN],videoCallsOffered:[76,a.TYPES.INTEGER],videoMessagesReceived:[172,a.TYPES.INTEGER],videoMessagesSent:[173,a.TYPES.INTEGER],viewOnceMessagesOpened:[18,a.TYPES.INTEGER],viewOnceMessagesReceived:[17,a.TYPES.INTEGER],viewOnceMessagesSent:[16,a.TYPES.INTEGER],voiceCallsOffered:[77,a.TYPES.INTEGER]},[1,1,1],"regular"]},{ChatMessageCounts:[]});g.ChatMessageCountsWamEvent=b}),98);
__d("WAWebChatThreadLoggingBoolFlagFields",[],(function(a,b,c,d,e,f){b={isCartAddClicked:!1,isCtaOnPdpClicked:!1,isCommerceViewed:!1,viaContactlessChats:!1};var g=Object.freeze(b);c=Object.freeze(Object.keys(b));function a(a){if(!Object.prototype.hasOwnProperty.call(g,a))return null;a=a;return a}f.FLAG_FIELDS=g;f.FLAG_FIELD_NAMES=c;f.toMaybeBoolFlagActionType=a}),66);
__d("WAWebChatThreadLoggingCountFields",[],(function(a,b,c,d,e,f){b={profileViews:0,statusViews:0,statusReplies:0,groupMembershipReplies:0,groupPrivateReplies:0,profileReplies:0,chatOverflowClicks:0,pdpViews:0,ordersSent:0,repliesSent:0,commentsReceived:0};var g=Object.freeze(b);c=Object.freeze(Object.keys(b));function a(a){if(!Object.prototype.hasOwnProperty.call(g,a))return null;a=a;return a}f.COUNT_FIELDS=g;f.COUNT_FIELD_NAMES=c;f.toMaybeCountActionType=a}),66);
__d("WAWebApi",[],(function(a,b,c,d,e,f){a={GROUP_INVITE:"GROUP_INVITE",MSG_SEND:"MSG_SEND",INVALID:"INVALID",CATALOG:"CATALOG",PRODUCT:"PRODUCT",PUSH_NOTIFICATION:"PUSH_NOTIFICATION",CREATE_COMMUNITY:"CREATE_COMMUNITY",NEWSLETTER:"NEWSLETTER",AVATAR_STICKERPACK:"AVATAR_STICKERPACK",ADVERTISE:"ADVERTISE",MANAGE_ADS:"MANAGE_ADS",MESSAGE_YOURSELF:"MESSAGE_YOURSELF",BROADCAST:"BROADCAST",STATUS_POST:"STATUS_POST",EDIT_PROFILE_PICTURE:"EDIT_PROFILE_PICTURE",CALL_USER:"CALL_USER",PAYMENT_LINK:"PAYMENT_LINK",FAVORITES:"FAVORITES"};f.APICmd=a}),66);
__d("WAWebApiParseUtils",["WAWebBuildConstants"],(function(a,b,c,d,e,f,g){b=function(a){return a.replace(/\/+$/,"")};c=b(d("WAWebBuildConstants").BUILD_URL).replace(/[\/\.]/g,"\\$&");e="((?:/\\w+)*)";f="(?:(?:/\\w+)*)";function a(a){a=a.hostname;return a==="whatsapp.com"||a==="www.whatsapp.com"||a==="wa.me"}g.ORIGIN=c;g.OPTIONAL_PATH_PART=e;g.OPTIONAL_NON_CAPTURING_PATH_PART=f;g.isWhatsappHost=a}),98);
__d("WAWebBroadcastApiParse",["$InternalEnum","WAWebABProps","WAWebApiParseUtils"],(function(a,b,c,d,e,f,g){var h="channel",i="channels",j="status",k="updates",l=new RegExp("^"+d("WAWebApiParseUtils").ORIGIN+d("WAWebApiParseUtils").OPTIONAL_PATH_PART+"/accept/?\\?channel_invite_code=(?:&.*)?$","i"),m=b("$InternalEnum").Mirrored(["Newsletter","Status"]);function n(a){return a.length===0||a.length===1&&a[0]===""}function a(a){try{var b=new URL(a),c=b.pathname;c=c.split("/");c[0];var e=c[1];c=c.slice(2);if(d("WAWebApiParseUtils").isWhatsappHost(b)){if(!n(c))return null;switch(e){case i:case h:return{feature:m.Newsletter,url:b.href};case j:return{feature:m.Status,url:b.href};case k:return!d("WAWebABProps").getABPropConfigValue("status_deeplink_enabled")?null:{feature:m.Status,url:b.href}}}c=a.match(l);if(c)return{feature:m.Newsletter,url:a}}catch(a){}return null}g.BroadcastFeatureType=m;g.parseBroadcastFeatureLink=a}),98);
__d("WAWebFaqUrl",["WAWebL10N"],(function(a,b,c,d,e,f,g){var h="https://faq.whatsapp.com",i="web";function j(a){return h+"/"+a+"?lang="+c("WAWebL10N").getNormalizedLocale()}function a(){return h+"/"+i+"?lang="+c("WAWebL10N").getNormalizedLocale()}function b(){return j(2138577903196467)}function d(){return j(6480469855345352)}function e(){return j(643460927283235)}function f(){return j(852892549070029)}function k(){return j(3398056720476987)}function l(){return j(835452491239734)}function m(){return j(1524220618005378)}function n(){return j(820124435853543)}function o(){return j(820124435853543)}function p(){return j(1148840052398648)}function q(){return j(1293093778117781)}function r(){return j(1053543185312573)}function s(){return j(1110600769849613)}function t(){return j(1317564962315842)}function u(){return j(677428350267326)}function v(){return j(819881299156447)}function w(){return j(531205362155587)}function x(){return j(2322556321235831)}function y(){return j(1130443730921732)}function z(){return j(807378207138241)}function A(){return j(1370476507114859)}function B(){return j(393169153028916)}function C(){return j(806293963922749)}function D(){return j(794517045178057)}function E(){return j(3872729742954601)}function F(){return j(1074237659908080)}function G(){return j(673193694148537)}function H(){return j(728928448599090)}function I(){return j(1077018839582332)}function J(){return j(676672070766141)}function K(){return j(854037192262196)}function L(){return j(1184376605821468)}function M(){return j(570221114584995)}function N(){return j(366296225670044)}function O(){return j(625069579217642)}function P(){return j(812356880201038)}function Q(){return j(2234976186844686)}function R(){return j(1317564962315842)}function S(){return j(832060577920049)}function T(){return j(821275555582352)}function U(){return j(498814665492149)}function V(){return j(1874151452788882)}function W(){return j(2917597651792702)}function X(){return j(626403979060997)}function Y(){return j(831150864932965)}function Z(){return j(138730494968892)}function $(){return j(6614640168569481)}function aa(){return j(1549633222110625)}function ba(){return j(231869526393268)}function ca(){return j(671443411431514)}function da(){return j(1318001139066835)}function ea(){return j(245599461477281)}function fa(){return j(682987820062997)}function ga(){return j(1446688872845683)}function ha(){return j(652713330395407)}function ia(){return j(205306122327447)}function ja(){return j(919039336073667)}function ka(){return j(673193694148537)}function la(){return j(1313491802751163)}function ma(){return j(1183938229003432)}function na(){return j(1726618467788240)}function oa(){return j(653480766448040)}function pa(){return j(526463418847093)}function qa(){return j(1262764931172994)}function ra(){return"https://www.facebook.com/privacy/policy"}function sa(){return"https://www.facebook.com/policies/other-policies/ais-terms"}function ta(){return j(1111412106858632)}function ua(){return j(6485307734928964)}function va(){return j(1270536656989145)}function wa(){return j(332114409462050)}function xa(){return j(306908962283012)}function ya(){return j(785493319976156)}function za(){return j(704225315054890)}function Aa(){return j(835833917556304)}function Ba(){return j(434854355461483)}function Ca(){return j(1314318822729539)}function Da(){return j(1083092416402722)}function Ea(){return j(360977646301595)}function Fa(){return j(684323127185056)}function Ga(){return j(1520500555178162)}function Ha(){return j(414631957536067)}function Ia(){return j(445453537819972)}function Ja(){return j(764072925284841)}function Ka(){return j(515115256843064)}function La(){return j(1270784217226727)}function Ma(){return j(3379690015658337)}function Na(){return j(2127363544304650)}function Oa(){return j(1889908094810167)}g.FAQ_BASE_URL=h;g.PLATFORM=i;g.getFaqUrl=a;g.getDeleteAccountUrl=b;g.getNewsletterActivityInforUrl=d;g.getBusinessFaqUrl=e;g.getCannotConnectFaqUrl=f;g.getCiphertextFaqUrl=k;g.getFanoutPlaceholderFaqUrl=l;g.getCodeChangeFaqUrl=m;g.getMDCodeChangeFaqUrl=n;g.getE2EFaqUrl=o;g.getE2EEnterpriseFaqUrl=p;g.getWAChatFaqUrl=q;g.getFrequentlyForwardedFaqUrl=r;g.getMembershipApprovalModeFaqUrl=s;g.getLoginFaqUrl=t;g.getNonVerifiedTransitionFaqUrl=u;g.getNotificationChromeFaqUrl=v;g.getNotificationEdgeFaqUrl=w;g.getNotificationFirefoxFaqUrl=x;g.getNotificationOperaFaqUrl=y;g.getNotificationSafariFaqUrl=z;g.getRevokeFaqUrl=A;g.getSuspiciousLinkFaqUrl=B;g.getUnverifiedTransitionFaqUrl=C;g.getVerifiedHighFaqUrl=D;g.getBlueFaqUrl=E;g.getVerifiedLowUnknownFaqUrl=F;g.getEphemeralFaqUrl=G;g.getKICFaqUrl=H;g.getViewOnceFaqUrl=I;g.getSupportChatFaqUrl=J;g.getSupportChatSafetyFaqUrl=K;g.getCatalogCartOnOffFaqUrl=L;g.getCommunityHomeNuxUrl=M;g.getExitCommunityUrl=N;g.getCommunityCreatorPrivacyUrl=O;g.getCommunityMemberPrivacyUrl=P;g.getCommunityBecomingOwnerUrl=Q;g.getLinkDeviceFaqUrl=R;g.getJioMartPostcodeChangeLearnMoreLink=S;g.getDBErrorFaqUrl=T;g.getHowToExitAndDeleteGroupsFaq=U;g.getRemoveFromCommunityFaqUrl=V;g.getViewOnceScreenshotProtectionUrl=W;g.getPhoneNumberHidingFaqUrl=X;g.getCagPhoneNumberHidingFaqUrl=Y;g.getControlsWhenMessagingBusinessFaqUrl=Z;g.getMessageEditFaqUrl=$;g.getNewsletterUpdateEditFaqUrl=aa;g.getAboutCommunitiesFaqUrl=ba;g.getNewsletterPrivacyLegacyFaqUrl=ca;g.getNewsletterPrivacyMultiAdminFaqUrl=da;g.getNewsletterGuidelinesFaqUrl=ea;g.getNewsletterGeosuspendFaqUrl=fa;g.getNewsletterMetricsEstimatedFaqUrl=ga;g.getNewsletterMetricsUnavailableFaqUrl=ha;g.getMemberAddedGroupsUrl=ia;g.getReportToAdminFaqUrl=ja;g.getOrderEphemeralExemptionUrl=ka;g.getSafetyToolsFaqUrl=la;g.getSearchTheWebFaqUrl=ma;g.getScreenLockLearnMoreUrl=na;g.getMessageHistoryOnLinkedDevicesFAQUrl=oa;g.getRequestAccountInfoFAQUrl=pa;g.getIndiaEcommerceComplianceFaqUrl=qa;g.getBotPrivacyPolicyUrl=ra;g.getBotTermsUrl=sa;g.getBotLearnMoreUrl=ta;g.getBizBot1pLearnMoreUrl=ua;g.getBizBotTosLearnMoreUrl=va;g.getBizBot3pLearnMoreUrl=wa;g.getBizBot3pDataSharingUrl=xa;g.getConsumerTransparencyHCAUrl=ya;g.getAvatarFaqUrl=za;g.getWhatsAppBusinessPremiumFaqUrl=Aa;g.getSharingBusinessInfoForAdsFaqUrl=Ba;g.getFbShopsSunsetFaqUrl=Ca;g.getSagaFaqUrl=Da;g.getNewsletterAdminInviteFaqUrlV2=Ea;g.getReportUnlawfulContentWebFormUrl=Fa;g.getCoexHostedFaqUrl=Ga;g.getBlockingReportingFaqUrl=Ha;g.getDisableLinkPreviewsFaqUrl=Ia;g.getChatLockSecretCodeFaqUrl=Ja;g.getAccountTakeOverFaqUrl=Ka;g.getNativeContactLearnMoreFaqUrl=La;g.getAntiBrigadingFaqUrl=Ma;g.getEventsLearnMoreFaqUrl=Na;g.getCommunityGroupsVisibilityFaqUrl=Oa}),98);
__d("WAWebNewsletterApiParse",["$InternalEnum","WAWebApiParseUtils","WAWebChatEntryPoint"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["Handle","InviteCode","Id"]),i="channel",j="create",k="directory",l=new RegExp("^"+d("WAWebApiParseUtils").ORIGIN+d("WAWebApiParseUtils").OPTIONAL_PATH_PART+"/accept/?\\?channel_invite_code=(\\w+)(?:&.*)?$","i"),m=new RegExp("^whatsapp://("+i+")/(\\w+)/?(?:\\?.*)?$","i");function n(a){return a.length===0||a.length===1&&a[0]===""}function o(a){try{var b=new URL(a),c=b.pathname;c=c.split("/");c[0];var e=c[1],f=c[2];c=c.slice(3);if(e===i&&d("WAWebApiParseUtils").isWhatsappHost(b)){if(n(c))switch(f){case j:return{type:"create",url:b.href};case k:return{type:"directory",url:b.href};default:if(f!=null&&f!=="")return{identifier:f,url:b.href,identifierType:h.InviteCode,type:"view",chatEntryPoint:d("WAWebChatEntryPoint").ChatEntryPoint.Link}}if(f!==j&&f!==k&&(c.length===1||c.length===2&&c[1]==="")){e=parseInt(c[0],10);return babelHelpers["extends"]({identifier:f,url:b.href,identifierType:h.InviteCode,type:"view",chatEntryPoint:d("WAWebChatEntryPoint").ChatEntryPoint.Link},!Number.isNaN(e)&&{serverId:e})}}c=p(l,a);if(c!=null)return c;f=p(m,a);return f!=null?f:null}catch(a){return null}}function p(a,b){a=b.match(a);if(a){var c=a[2];if(c===j)return{type:"create",url:b};return c===k?{type:"directory",url:b}:{identifier:a[2],url:a[1]||"/",identifierType:h.InviteCode,type:"view",chatEntryPoint:d("WAWebChatEntryPoint").ChatEntryPoint.Deeplink}}return null}function a(a){if(a==null)return!1;return a.startsWith("http://")||a.startsWith("https://")?o(a)!=null:o("https://"+a)!=null}g.NewsletterIdentifierType=h;g.parseNewsletter=o;g.isNewsletterInviteCode=a}),98);
__d("WAWebStatusApiParse",["$InternalEnum","WAWebApiParseUtils","WAWebPonyfillsUrlSearchParams"],(function(a,b,c,d,e,f,g){"use strict";var h="status",i="text",j="photo",k=b("$InternalEnum").Mirrored(["Text","Media"]);function l(a){return a.length===0||a.length===1&&a[0]===""}function a(a){try{a=new URL(a);var b=a.pathname;if(!d("WAWebApiParseUtils").isWhatsappHost(a))return null;b=b.split("/");b[0];var e=b[1];b=b.slice(2);if(!l(b))return null;if(e!==h)return null;b=a.searchParams||new(c("WAWebPonyfillsUrlSearchParams"))(a.search);e=b.get(i);if(e!=null)return{postType:k.Text,url:a.href};e=b.get(j);if(e!=null)return{postType:k.Media,url:a.href}}catch(a){}return null}g.StatusPostType=k;g.parseStatusPostFeatureLink=a}),98);
__d("WAWebApiParse",["PaymentLink","WABinary","WAWebABProps","WAWebApi","WAWebApiParseUtils","WAWebBroadcastApiParse","WAWebFaqUrl","WAWebNewsletterApiParse","WAWebPonyfillsUrlSearchParams","WAWebStatusApiParse"],(function(a,b,c,d,e,f,g){var h=new RegExp("^"+(b=d("WAWebApiParseUtils")).ORIGIN+b.OPTIONAL_PATH_PART+"/accept/?\\?code=(\\w+)(?:&.*)?$","i"),i=/^https?:\/\/chat\.whatsapp\.com\/invite\/(\w+)(?:\?.*)?$/i,j=/^https?:\/\/chat\.whatsapp\.com\/(\w+)(?:\?.*)?$/i,k=/^whatsapp:\/\/chat\/?\?code=(\w+)(?:&.*)?$/i,l=function(a){var b=a.match(h);if(b)return{code:b[2],url:b[1]||"/"};b=a.match(i);if(b)return{code:b[1]};b=a.match(j);if(b)return{code:b[1]};b=a.match(k);if(b)return{code:b[1]}},m="utm_source",n="utm_campaign",o=["utm_source","utm_campaign","text","phone","data","source","context","icebreaker","source_url","type"];function p(a){return o.find(function(b){return b===a})}var q=32;function r(a){if(!a||typeof a!=="string")return;a=d("WABinary").Binary.build(a);if(a.size()>d("WAWebABProps").getABPropConfigValue("ctwa_data_max_length"))return;return a.readBuffer()}function s(a){var b={};new(c("WAWebPonyfillsUrlSearchParams"))(a).forEach(function(a,c){c=p(c.toLowerCase());if(c==null)return;switch(c){case"data":var e=r(a);if(!e)return;b.conversionTuple==null?b.conversionTuple={conversionData:e}:b.conversionTuple.conversionData=e;break;case"source":e=a;var f=d("WABinary").numUtf8Bytes(e);if(f>q)return;b.conversionTuple==null?b.conversionTuple={conversionSource:e}:b.conversionTuple.conversionSource=e;break;case"source_url":b.ctwaContextLinkData!=null?b.ctwaContextLinkData.sourceUrl=a:b.ctwaContextLinkData={sourceUrl:a};break;case"context":b.ctwaContextLinkData!=null?b.ctwaContextLinkData.context=a:b.ctwaContextLinkData={context:a};break;case"icebreaker":b.ctwaContextLinkData!=null?b.ctwaContextLinkData.icebreaker=a:b.ctwaContextLinkData={icebreaker:a};break;case"utm_campaign":b.utm!=null?b.utm.campaign=a:b.utm={campaign:a};break;case"utm_source":b.utm!=null?b.utm.source=a:b.utm={source:a};break;default:c,b[c]=a}});b.phone!=null&&b.phone!==""&&(b.phone=b.phone.replace(/\D/g,"")+"@c.us",b.ctwaContextLinkData&&(b.ctwaContextLinkData.phone=b.phone));if(b.phone!=null&&b.phone!==""||b.text!=null&&b.text!=="")return b}var t=new RegExp("^"+b.ORIGIN+b.OPTIONAL_PATH_PART+"/send/?\\?(.+)$","i"),u=/^https?:\/\/api\.whatsapp\.com\/send\/?\?(.+)$/i,v=/^whatsapp:\/\/send\/?\?(.*)$/i,w=/^https?:\/\/wa\.me\/?(?:([0-9.]{0,20})|([0-9a-z.]{5,35}))?\/?\??(.+)?$/i;e=/^https?:\/\/wa\.me\/p\/([0-9]{0,20})\/([0-9]{0,20})$/i;f=/^whatsapp:\/\/product\/([0-9]{0,20})\/([0-9]{0,20})$/i;var x=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/product/([0-9]{0,20})/([0-9]{0,20})$","i"),y=/^https?:\/\/wa\.me\/p\/([0-9]{0,20})\/([0-9]{0,20})(\/?\?.*)$/i,z=/^whatsapp:\/\/product\/([0-9]{0,20})\/([0-9]{0,20})(\/?\?.*)$/i,A=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/product/([0-9]{0,20})/([0-9]{0,20})(/?.*)$","i"),B=/^https?:\/\/wa\.me\/p\/([^\/]{0,200})\/([0-9]{0,20})$/i,C=/^whatsapp:\/\/product\/([^\/]{0,200})\/([0-9]{0,20})$/i,D=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/product/([^/]{0,200})/([0-9]{0,20})$","i"),E=/^https?:\/\/wa\.me\/p\/([^\/]{0,200})\/([0-9]{0,20})(\/?\?.*)$/i,F=/^whatsapp:\/\/product\/([^\/]{0,200})\/([0-9]{0,20})(\/?\?.*)$/i,G=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/product/([^/]{0,200})/([0-9]{0,20})(/?.*)$","i"),H=/^whatsapp-smb:\/\/advertise\/?(.+)$/i,I=/^whatsapp-smb:\/\/manage-ads\/?(?:\?.*)?$/,J=/^whatsapp:\/\/message_yourself\/?(?:\?.*)?$/i,K=/^https?:\/\/wa\.me\/message_yourself\/?(?:\?.*)?$/i,L=new RegExp("^"+b.ORIGIN+b.OPTIONAL_PATH_PART+"/calluser/?\\?(.+)$","i"),M=/^https?:\/\/wa\.me\/call\/?\\?(.+)$/i,N=[e,f,B,C],O=[x,D],P=[A,G],Q=[y,z,E,F],R=[].concat(N,O,P,Q);function S(a,b){for(var c=0;c<b.length;c++){var d=a.match(b[c]);if(d)return d}}e=function(a){return S(a,R)!=null};var T=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/push/","i"),U=/^https?:\/\/wa\.me\/c\/([0-9]{0,20})(?:\?.*)?$/i,V=/^whatsapp:\/\/catalog\/([0-9]{0,20})(?:\?.*)?$/i,W=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/catalog/([0-9]{0,20})?$","i"),X=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/catalog/([0-9]{0,20})(/?.*)?$","i");f=function(a){return[U,V,W,X].some(function(b){return a.match(b)})};var aa=/^https?:\/\/wa\.me\/favorites\/?(?:\\?.*)?$/i,ba=new RegExp("^"+b.ORIGIN+b.OPTIONAL_NON_CAPTURING_PATH_PART+"/favorites/?(?:\\?.*)?$","i");function ca(a){var b=a.match(t);if(b){var c=s(b[2]);if(c){c.url=b[1]||"/";return c}}b=a.match(u);if(b)return s(b[1]);b=a.match(v);if(b)return s(b[1]);b=a.match(w);if(b){var d;b[1]?d={phone:b[1]+"@c.us"}:b[2]&&(d={url:a,customURL:b[2]});if(b[3]){c=s(b[3]);c&&(d=babelHelpers["extends"]({},d,c))}return d}}var da=/^https?:\/\/wa\.me\/community\/create\/?(\?(.*))?$/i;function ea(a){a=a.match(da);if(a){a=new(c("WAWebPonyfillsUrlSearchParams"))(a[1]).get("entrypoint");return{url:"/",entrypointType:a}}}function Y(a){return{catalogOwnerJid:a[1]+"@s.whatsapp.net"}}function Z(a){a=new(c("WAWebPonyfillsUrlSearchParams"))(a);var b=a.get(m);a=a.get(n);if(a==null&&b==null)return null;var d={};b!=null&&(d.source=b);a!=null&&(d.campaign=a);return d}function fa(a){var b=a.match(U)||a.match(V);if(b)return Y(b);b=a.match(W);if(b)return babelHelpers["extends"]({},Y(b),{url:"/"});b=a.match(X);if(b){a=Z(b[2]);return babelHelpers["extends"]({},Y(b),a!=null&&{utm:a},{url:"/"})}}function $(a){return{productId:a[1],businessOwnerJid:a[2]+"@s.whatsapp.net"}}function ga(a){var b=S(a,N);if(b)return $(b);b=S(a,O);if(b)return babelHelpers["extends"]({},$(b),{url:"/"});b=S(a,P);if(b){var c=Z(b[3]);return babelHelpers["extends"]({},$(b),c!=null&&{utm:c},{url:"/"})}b=S(a,Q);if(b){c=Z(b[3]);return babelHelpers["extends"]({},$(b),c!=null&&{utm:c})}}function ha(a){a=a.match(T);if(a)return{url:"/"}}function ia(a){a=new(c("WAWebPonyfillsUrlSearchParams"))(a);var b=a.get("wa_campaign_id");if(b==null||b==="")return;a=a.get("wa_campaign_type");return a==null||a===""?null:{campaignId:b,campaignType:a}}function ja(a){a=a.match(H);if(a)return ia(a[1])}function ka(a){a=new(d("PaymentLink").PaymentLink)(a);return a.getPaymentLinkDefaultMetaData()}var la=/^https?:\/\/wa\.me\/stickerpack\/meta-avatar$/i,ma=/^https?:\/\/wa\.me\/edit-profile-picture$/i;function na(a){a=a.match(la);if(a)return{url:d("WAWebFaqUrl").getAvatarFaqUrl()}}function a(a){if(typeof a!=="string")return{resultType:d("WAWebApi").APICmd.INVALID};var b=l(a);if(b)return{resultType:d("WAWebApi").APICmd.GROUP_INVITE,data:b};b=fa(a);if(b)return{resultType:d("WAWebApi").APICmd.CATALOG,data:b};b=ga(a);if(b)return{resultType:d("WAWebApi").APICmd.PRODUCT,data:b};b=ea(a);if(b)return{resultType:d("WAWebApi").APICmd.CREATE_COMMUNITY,data:b};b=na(a);if(b)return{resultType:d("WAWebApi").APICmd.AVATAR_STICKERPACK,data:b};b=d("WAWebStatusApiParse").parseStatusPostFeatureLink(a);if(b)return{resultType:d("WAWebApi").APICmd.STATUS_POST,data:b};b=d("WAWebBroadcastApiParse").parseBroadcastFeatureLink(a);if(b)return{resultType:d("WAWebApi").APICmd.BROADCAST,data:b};b=d("WAWebNewsletterApiParse").parseNewsletter(a);if(b)return{resultType:d("WAWebApi").APICmd.NEWSLETTER,data:b};if([J,K].some(function(b){return a.match(b)}))return{resultType:d("WAWebApi").APICmd.MESSAGE_YOURSELF};if([aa,ba].some(function(b){return a.match(b)}))return{resultType:d("WAWebApi").APICmd.FAVORITES,data:{url:"/"}};b=ca(a);if(b)return{resultType:d("WAWebApi").APICmd.MSG_SEND,data:b};b=ha(a);if(b)return{resultType:d("WAWebApi").APICmd.PUSH_NOTIFICATION,data:b};b=ja(a);if(b!=null)return{resultType:d("WAWebApi").APICmd.ADVERTISE,data:b};if(a.match(I))return{resultType:d("WAWebApi").APICmd.MANAGE_ADS,trigger:"chatListBanner"};if(a.match(ma))return{resultType:d("WAWebApi").APICmd.EDIT_PROFILE_PICTURE};if(d("WAWebABProps").getABPropConfigValue("wa_web_calling_deep_link_error")&&[L,M].some(function(b){return a.match(b)}))return{resultType:d("WAWebApi").APICmd.CALL_USER,data:{url:"/"}};b=ka(a);return b!=null?{resultType:d("WAWebApi").APICmd.PAYMENT_LINK,data:b}:{resultType:d("WAWebApi").APICmd.INVALID}}g.parseConversionData=r;g.matchProductUrl=e;g.matchCatalogUrl=f;g.parseAPICmd=a}),98);
__d("WAWebInteractiveMessageType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NATIVE_FLOW:"native_flow",SHOPS_STOREFRONT:"shops_storefront",CAROUSEL:"carousel"});c=a;f["default"]=c}),66);
__d("WAWebWamEnumAgentEngagementEnumType",[],(function(a,b,c,d,e,f){a=Object.freeze({DIRECT_CHAT:0,INVOKED:1,MEMBER:2});f.AGENT_ENGAGEMENT_ENUM_TYPE=a}),66);
__d("WAWebWamEnumBotType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,METABOT:1,BOT_1P_BIZ:2,BOT_3P_BIZ:3,UGC:4,META_CHARACTER:5});f.BOT_TYPE=a}),66);
__d("WAWebWamEnumE2eDeviceType",[],(function(a,b,c,d,e,f){a=Object.freeze({MY_PRIMARY:1,OTHER_PRIMARY:2,MY_COMPANION:3,OTHER_COMPANION:4,MY_HOSTED_COMPANION:5,OTHER_HOSTED_COMPANION:6});f.E2E_DEVICE_TYPE=a}),66);
__d("WAWebWamEnumInvisibleMessageCategoryType",[],(function(a,b,c,d,e,f){a=Object.freeze({PEER:1,INVISIBLE_KEY_DISTRIBUTION:2,OTHER:3,MEDIA_EXPRESS_NOTIFY:4,EPHEMERAL_SYNC_RESPONSE:5});f.INVISIBLE_MESSAGE_CATEGORY_TYPE=a}),66);
__d("WAWebWamEnumMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:1,GROUP:2,BROADCAST:3,STATUS:4,CHANNEL:5,INTEROP:6});f.MESSAGE_TYPE=a}),66);
__d("WAWebWamMsgUtils",["WAWebApiParse","WAWebBotTypes","WAWebHandleMsgCommon","WAWebInteractiveMessageType","WAWebMsgGetters","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumE2eDeviceType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWid"],(function(a,b,c,d,e,f,g){function a(a){if(d("WAWebMsgGetters").getIsStatus(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS;else if(d("WAWebMsgGetters").getIsGroupMsg(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP;else if(c("WAWebWid").isBroadcast(a.id.remote))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.BROADCAST;else if(c("WAWebWid").isNewsletter(a.id.remote))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL;return d("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL}function b(a){switch(a){case"chat":return d("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL;case"group":return d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP;case"peer_broadcast":case"other_broadcast":return d("WAWebWamEnumMessageType").MESSAGE_TYPE.BROADCAST;case"direct_peer_status":case"other_status":return d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS}}function e(a){if(a.isDynamicReplyButtonsMsg===!0)return d("WAWebWamEnumMediaType").MEDIA_TYPE.BUTTON_MESSAGE;switch(a.type){case"image":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PHOTO;case"video":return a.isGif===!0?d("WAWebWamEnumMediaType").MEDIA_TYPE.GIF:d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO;case"ptv":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PUSH_TO_VIDEO;case"audio":return d("WAWebWamEnumMediaType").MEDIA_TYPE.AUDIO;case"ptt":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PTT;case"document":return d("WAWebWamEnumMediaType").MEDIA_TYPE.DOCUMENT;case"unknown":return d("WAWebWamEnumMediaType").MEDIA_TYPE.FUTURE;case"location":return a.isLive===!0?d("WAWebWamEnumMediaType").MEDIA_TYPE.LIVE_LOCATION:d("WAWebWamEnumMediaType").MEDIA_TYPE.LOCATION;case"vcard":return d("WAWebWamEnumMediaType").MEDIA_TYPE.CONTACT;case"multi_vcard":return d("WAWebWamEnumMediaType").MEDIA_TYPE.CONTACT_ARRAY;case"chat":if(a.matchedText!=null){if(d("WAWebApiParse").matchCatalogUrl(a.matchedText))return d("WAWebWamEnumMediaType").MEDIA_TYPE.CATALOG_LINK;else if(d("WAWebApiParse").matchProductUrl(a.matchedText))return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_LINK;return d("WAWebWamEnumMediaType").MEDIA_TYPE.URL}return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"sticker":return d("WAWebWamEnumMediaType").MEDIA_TYPE.STICKER;case"product":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_IMAGE;case"list":var b;b=(b=(b=a.list)==null?void 0:b.listType)!=null?b:d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.UNKNOWN;switch(b){case d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.SINGLE_SELECT:return d("WAWebWamEnumMediaType").MEDIA_TYPE.LIST;case d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_LIST;default:return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE}case"list_response":return d("WAWebWamEnumMediaType").MEDIA_TYPE.LIST_REPLY;case"buttons_response":return d("WAWebWamEnumMediaType").MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case"order":return d("WAWebWamEnumMediaType").MEDIA_TYPE.ORDER;case"interactive":return h(a.interactiveType);case"reaction":case"reaction_enc":return d("WAWebWamEnumMediaType").MEDIA_TYPE.REACTION;case"poll_creation":return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_CREATE;case"poll_update":return a.subtype==="poll_vote"?d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_VOTE:d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"keep_in_chat":return a.keepType===d("WAWebProtobufsE2E.pb").KeepType.KEEP_FOR_ALL?d("WAWebWamEnumMediaType").MEDIA_TYPE.KEEP:d("WAWebWamEnumMediaType").MEDIA_TYPE.UNKEEP;case"pin_message":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PIN_IN_CHAT;case"protocol":return a.subtype==="ephemeral_sync_response"?d("WAWebWamEnumMediaType").MEDIA_TYPE.EPHEMERAL_SYNC_RESPONSE:d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"event_creation":return d("WAWebWamEnumMediaType").MEDIA_TYPE.EVENT_CREATE;case"event_response":return d("WAWebWamEnumMediaType").MEDIA_TYPE.EVENT_RESPOND;case"album":return d("WAWebWamEnumMediaType").MEDIA_TYPE.MEDIA_ALBUM;case"biz-cover-photo":case"broadcast_notification":case"call_log":case"ciphertext":case"debug_placeholder":case"debug":case"e2e_notification":case"gp2":case"groups_v4_invite":case"hsm":case"interactive_response":case"native_flow":case"newsletter_notification":case"notification":case"notification_template":case"oversized":case"payment":case"pinned_message":case"request_phone_number":case"revoked":case"status":case"template_button_reply":case"comment":case"history_bundle":case"newsletter_admin_invite":case"biz_content_placeholder":case"event_edit_encrypted":case"sticker_pack":return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;default:a.type;return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE}}function h(a){if(a==null)return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;switch(a){case c("WAWebInteractiveMessageType").SHOPS_STOREFRONT:return d("WAWebWamEnumMediaType").MEDIA_TYPE.SHOP_STOREFRONT;case c("WAWebInteractiveMessageType").NATIVE_FLOW:return d("WAWebWamEnumMediaType").MEDIA_TYPE.INTERACTIVE_NFM;case c("WAWebInteractiveMessageType").CAROUSEL:return d("WAWebWamEnumMediaType").MEDIA_TYPE.INTERACTIVE_CAROUSEL}}function f(a){if(!(a instanceof c("WAWebWid")))return null;return d("WAWebUserPrefsMeUser").isMeAccount(a)?a.isCompanion()?d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE.MY_COMPANION:d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE.MY_PRIMARY:a.isCompanion()?d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE.OTHER_COMPANION:d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE.OTHER_PRIMARY}function i(a){if(a.id.remote.isBot())return d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT;var b=d("WAWebMsgGetters").getIsBotQuery(a);a=d("WAWebMsgGetters").getIsMetaBotResponse(a);return b||a?d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED:null}function j(a,b,c){if(a==null?void 0:a.isBot())return d("WAWebWamEnumBotType").BOT_TYPE.METABOT;if(b){if(b===d("WAWebBotTypes").BizBotType.BIZ_1P)return d("WAWebWamEnumBotType").BOT_TYPE.BOT_1P_BIZ;if(b===d("WAWebBotTypes").BizBotType.BIZ_3P)return d("WAWebWamEnumBotType").BOT_TYPE.BOT_3P_BIZ}if(c){if(c===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P)return d("WAWebWamEnumBotType").BOT_TYPE.BOT_1P_BIZ;if(c===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P)return d("WAWebWamEnumBotType").BOT_TYPE.BOT_3P_BIZ}return d("WAWebWamEnumBotType").BOT_TYPE.UNKNOWN}function k(a){if(a==null||a==="")return null;switch(a){case d("WAWebHandleMsgCommon").CATEGORY_PEER:return d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE.PEER;default:return null}}g.getWamMessageType=a;g.getMessageTypeFromMsgInfoType=b;g.getWamMediaType=e;g.getInteractiveWamType=h;g.getWamE2eSenderType=f;g.getWamAgentEngagementType=i;g.getWamBotType=j;g.getWamInvisibleMessageCatgoryType=k}),98);
__d("PaymentLink",["PaymentLinkWamLogger","WAWebABProps","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.url=a,this.logger=new(d("PaymentLinkWamLogger").PaymentLinkWamLogger)(this)}var b=a.prototype;b.isValid=function(){return this.getPSP()!=null};b.shouldDetectInComposer=function(){return d("WAWebMobilePlatforms").isSMB()};b.getPSP=function(){var a=JSON.parse(d("WAWebABProps").getABPropConfigValue("smb_payment_links_url_regex_list"));for(var b in a)if(this.url.match(b))return a[b];return null};b.getPaymentLinkDefaultMetaData=function(){var a=JSON.parse(d("WAWebABProps").getABPropConfigValue("smb_payment_links_url_regex_list"));for(var b in a)if(this.url.match(b))return{psp:a[b],shouldDetectInComposer:this.shouldDetectInComposer()};return null};return a}();g.PaymentLink=a}),98);
__d("WASyncdKeyTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);
__d("WASyncdCryptoUtils",["WACryptoUtils","WAErr","WASyncdKeyTypes","WATextEncoding"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.length===0)throw c("WAErr")("buffers length is zero");if(a.length===1)return a[0];var b=a.map(function(a){return a.byteLength});b=b.reduce(function(a,b){return a+b});b=new Uint8Array(b);var d=0,e;for(e=0;e<a.length;e++)b.set(new Uint8Array(a[e]),d),d+=a[e].byteLength;return b.buffer}function b(a,b,d){if(b<0||d<0)throw c("WAErr")("buffers length is zero");var e=new Array(3);a=new Uint8Array(a);e[0]=a.slice(0,b).buffer;e[1]=a.slice(b,b+d).buffer;e[2]=a.slice(b+d).buffer;return e}function e(a){return Uint8Array.from(a.split(" ").map(function(a){return parseInt(a,16)}))}function f(a){return Array.from(new Uint8Array(d("WASyncdKeyTypes").fromSyncKeyId(a))).map(function(a){return a.toString(16)}).toString().replace(/,/g," ")}function h(a){return Array.from(new Uint8Array(a)).map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function i(a){var b=new ArrayBuffer(8);new DataView(b).setUint32(4,a,!1);return b}var j=d("WATextEncoding").newTextEncoder();function k(a){return j.encode(a)}function l(a,b){return d("WACryptoUtils").arrayBuffersEqual(d("WASyncdKeyTypes").fromSyncKeyId(a),d("WASyncdKeyTypes").fromSyncKeyId(b))}g.combine=a;g.split=b;g.hexToUint8Array=e;g.syncKeyIdToHex=f;g.arrayBufferToHexPadded=h;g.to64BitNetworkOrder=i;g.toUtf8=k;g.syncKeyIdsEqual=l}),98);
__d("WATopLevelDomains",[],(function(a,b,c,d,e,f){a=new Set(["aaa","abb","abbott","abogado","abudhabi","ac","academy","accountant","accountants","ad","adult","ae","aero","af","afl","africa","ag","agency","ai","aig","airforce","al","alsace","am","amazon","amex","amsterdam","android","ao","apartments","app","apple","ar","arab","archi","army","arpa","art","as","asia","associates","at","au","auction","audi","audio","auspost","auto","autos","aw","aws","ax","az","ba","baby","band","bank","bar","barcelona","barclaycard","barclays","bargains","basketball","bauhaus","bayern","bb","bbva","bd","be","beauty","beer","berlin","best","bet","bf","bg","bh","bi","bible","bid","bike","bingo","bio","biz","bj","black","blackfriday","blog","blue","bm","bmw","bn","bnpparibas","bo","boats","bond","boo","boston","bot","boutique","box","br","bradesco","broker","brother","brussels","bs","bt","build","builders","business","buzz","bw","by","bz","bzh","ca","cab","cafe","cam","camera","camp","canon","capetown","capital","car","cards","care","career","careers","cars","casa","cash","casino","cat","catering","cba","cc","cd","center","ceo","cern","cf","cfd","cg","ch","charity","chase","chat","cheap","christmas","chrome","church","ci","citic","city","ck","cl","claims","cleaning","click","clinic","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","community","company","computer","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupons","courses","cpa","cr","credit","cricket","crs","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","date","dating","day","de","dealer","deals","delivery","deloitte","democrat","dental","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","diy","dj","dk","dm","do","doctor","dog","domains","download","durban","dvag","dz","earth","ec","eco","edeka","edu","education","ee","eg","email","energy","engineer","engineering","enterprises","epson","equipment","es","esq","estate","et","eu","eus","events","exchange","expert","exposed","express","extraspace","fail","faith","family","fan","fans","farm","fashion","feedback","fi","film","finance","financial","fish","fishing","fit","fitness","fj","fk","flights","flir","florist","flowers","fm","fo","foo","food","football","forex","forsale","forum","foundation","fox","fr","frl","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","game","games","garden","gay","gd","gdn","ge","gent","gf","gg","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmbh","gn","godaddy","gold","golf","goog","google","gop","gov","gp","gq","gr","graphics","gratis","green","group","gs","gt","guide","guru","gw","gy","hair","hamburg","haus","health","healthcare","help","hermes","hiphop","hk","hm","hn","hockey","holdings","holiday","homes","honda","horse","host","hosting","house","how","hr","ht","hu","ice","icu","id","ie","ikano","il","im","immo","immobilien","in","inc","industries","info","ing","ink","institute","insurance","insure","int","international","investments","io","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","java","jcb","je","jetzt","jewelry","jio","jm","jnj","jo","jobs","joburg","jp","kaufen","ke","kg","kh","ki","kids","kim","kitchen","kiwi","kn","koeln","komatsu","kp","kpmg","kr","krd","kred","kw","ky","kyoto","kz","la","land","landrover","lat","law","lawyer","lb","lc","leclerc","legal","lgbt","li","lidl","life","lighting","lilly","limited","limo","link","live","lk","llc","loan","loans","local","lol","london","love","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","makeup","man","management","mango","market","marketing","markets","mba","mc","md","me","media","meet","melbourne","meme","memorial","men","menu","mg","mh","miami","microsoft","mil","mk","ml","mm","mn","mo","mobi","moda","moe","mom","monash","money","monster","mortgage","moscow","motorcycles","mov","movie","mp","mq","mr","ms","mt","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nc","ne","net","network","neustar","new","news","next","nexus","nf","ng","ngo","ni","nico","nike","ninja","nl","no","np","nr","nrw","ntt","nu","nyc","nz","observer","okinawa","om","one","ong","onion","onl","online","ooo","orange","org","organic","ovh","pa","page","panasonic","paris","partners","parts","party","pe","pet","pf","pg","ph","pharmacy","phd","photo","photography","photos","pics","pictet","pictures","pink","pioneer","pizza","pk","pl","place","plumbing","plus","pm","pn","poker","politie","porn","post","pr","press","pro","productions","prof","promo","properties","property","ps","pt","pub","pw","py","qa","qpon","quebec","quest","racing","radio","re","realestate","realtor","recipes","red","rehab","reisen","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rio","rip","ro","rocks","rodeo","rs","rsvp","ru","rugby","ruhr","run","rw","ryukyu","sa","saarland","sale","salon","sandvik","sanofi","sap","sarl","saxo","sb","sbi","sbs","sc","scb","schmidt","school","schule","schwarz","science","scot","sd","se","seat","security","select","sener","services","sex","sexy","sg","sh","sharp","shell","shiksha","shoes","shop","shopping","show","si","singles","site","sk","ski","skin","sky","sl","sm","sn","sncf","so","soccer","social","software","solar","solutions","sony","soy","space","sport","sr","srl","ss","st","statebank","statefarm","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swiss","sx","sy","sydney","systems","sz","taipei","tatamotors","tatar","tattoo","tax","taxi","tc","td","team","tech","technology","tel","tennis","teva","tf","tg","th","theater","tickets","tienda","tips","tirol","tj","tk","tl","tm","tn","to","today","tokyo","tools","top","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","tt","tube","tui","tv","tw","tz","ua","ug","uk","university","uno","uol","us","uy","uz","va","vacations","vanguard","vc","ve","vegas","ventures","vet","vg","vi","video","vin","vip","vision","vivo","vlaanderen","vn","vodka","vote","voto","voyage","vu","wales","wang","watch","webcam","weber","website","wedding","weir","wf","wien","wiki","williamhill","win","wine","woodside","work","works","world","ws","wtf","xin","xyz","yachts","yandex","ye","yoga","yokohama","youtube","yt","za","zappos","zara","zip","zm","zone","zw","\u0431\u0435\u043b","\u0434\u0435\u0442\u0438","\u043c\u043e\u0441\u043a\u0432\u0430","\u043e\u043d\u043b\u0430\u0439\u043d","\u0440\u0443\u0441","\u0440\u0444","\u0443\u043a\u0440","\u092d\u093e\u0930\u0924","\u09ad\u09be\u09f0\u09a4","\u0aad\u0abe\u0ab0\u0aa4","\u0b2d\u0b3e\u0b30\u0b24","\u30bb\u30fc\u30eb","\u4e2d\u56fd","\u516c\u53f8","\u6211\u7231\u4f60","\u79fb\u52a8","\u7f51\u5740","\u7f51\u7ad9","\u7f51\u7edc","\ub2f7\ub137","\ub2f7\ucef4","\ud55c\uad6d"]);f.TLD=a}),66);
/**
 * License: https://www.facebook.com/legal/license/NKF0mBOyBt2/
 */
__d("punycode-2.1.1",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=2147483647,b=36,c=1,d=26,e=38,f=700,h=72,i=128,j="-",k=/^xn--/,l=/[^\0-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},o=b-c,p=Math.floor,q=String.fromCharCode;function r(a){throw new RangeError(n[a])}function s(a,b){var c=[],d=a.length;while(d--)c[d]=b(a[d]);return c}function t(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]);a=a.replace(m,".");c=a.split(".");a=s(c,b).join(".");return d+a}function u(a){var b=[],c=0,d=a.length;while(c<d){var e=a.charCodeAt(c++);if(e>=55296&&e<=56319&&c<d){var f=a.charCodeAt(c++);(f&64512)==56320?b.push(((e&1023)<<10)+(f&1023)+65536):(b.push(e),c--)}else b.push(e)}return b}var v=function(a){return String.fromCodePoint.apply(String,a)},w=function(a){if(a-48<10)return a-22;if(a-65<26)return a-65;return a-97<26?a-97:b},x=function(a,b){return a+22+75*(a<26)-((b!=0)<<5)},y=function(a,c,g){var h=0;a=g?p(a/f):a>>1;a+=p(a/c);for(;a>o*d>>1;h+=b)a=p(a/o);return p(h+(o+1)*a/(a+e))},z=function(e){var f=[],g=e.length,k=0,l=i,m=h,n=e.lastIndexOf(j);n<0&&(n=0);for(var o=0;o<n;++o)e.charCodeAt(o)>=128&&r("not-basic"),f.push(e.charCodeAt(o));for(o=n>0?n+1:0;o<g;){n=k;for(var q=1,s=b;;s+=b){o>=g&&r("invalid-input");var t=w(e.charCodeAt(o++));(t>=b||t>p((a-k)/q))&&r("overflow");k+=t*q;var u=s<=m?c:s>=m+d?d:s-m;if(t<u)break;t=b-u;q>p(a/t)&&r("overflow");q*=t}u=f.length+1;m=y(k-n,u,n==0);p(k/u)>a-l&&r("overflow");l+=p(k/u);k%=u;f.splice(k++,0,l)}return String.fromCodePoint.apply(String,f)},A=function(e){var f=[];e=u(e);var g=e.length,k=i,l=0,m=h;for(var n=e,o=Array.isArray(n),s=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(o){if(s>=n.length)break;t=n[s++]}else{s=n.next();if(s.done)break;t=s.value}t=t;t<128&&f.push(q(t))}t=f.length;s=t;t&&f.push(j);while(s<g){o=a;for(var n=e,v=Array.isArray(n),w=0,n=v?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(v){if(w>=n.length)break;z=n[w++]}else{w=n.next();if(w.done)break;z=w.value}z=z;z>=k&&z<o&&(o=z)}z=s+1;o-k>p((a-l)/z)&&r("overflow");l+=(o-k)*z;k=o;for(w=e,v=Array.isArray(w),n=0,w=v?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(v){if(n>=w.length)break;o=w[n++]}else{n=w.next();if(n.done)break;o=n.value}o=o;o<k&&++l>a&&r("overflow");if(o==k){o=l;for(var A=b;;A+=b){var B=A<=m?c:A>=m+d?d:A-m;if(o<B)break;var C=o-B,D=b-B;f.push(q(x(B+C%D,0)));o=p(C/D)}f.push(q(x(o,0)));m=y(l,z,s==t);l=0;++s}}++l;++k}return f.join("")},B=function(a){return t(a,function(a){return k.test(a)?z(a.slice(4).toLowerCase()):a})},C=function(a){return t(a,function(a){return l.test(a)?"xn--"+A(a):a})};v={version:"2.1.0",ucs2:{decode:u,encode:v},decode:z,encode:A,toASCII:C,toUnicode:B};g.exports=v}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("punycode",["punycode-2.1.1"],(function(a,b,c,d,e,f){e.exports=b("punycode-2.1.1")()}),null);
__d("WALinkify",["WALogger","WATopLevelDomains","punycode"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["text size: ",", error: ",""]);h=function(){return a};return a}e=Array.from(d("WATopLevelDomains").TLD).join("|");f="(?:http|https)://|mailto:";var i=/^https?:\/\/$/gi,j="\\w|[^\\s\0-\x7f\xab\xbb\u2018\u2019\u201c\u201d]|%[0-9a-f][0-9a-f]";e=e+"|xn--(?:"+j+")+";var k="(?:"+j+")|(?:"+j+")(?:"+j+"|-)*(?:"+j+")",l="(?!_)(?:(?:"+k+")\\.)+("+e+")(?!\\."+k+")",m=":\\d{1,5}",n="@!.?,(\\[{<\xab\u2018\u201c:";j="(?:"+j+"|[^\\s%])";var o="/"+j+"*?";n="["+n+"]*(?!"+j+"|#)";var p="\\?(?!"+n+")"+j+"*?";j="#"+j+"*?";var q="0-9a-z!#$%&'*+/=?^_`{|}~\\-";q="\\b\\w["+q+"]*(?:\\.["+q+"]+)*";var r="^|\\W\\.|[^/\\w.]|_";r="("+r+")("+f+")?("+q+"@)?("+l+")(?:(?!"+k+")|(?=_))(?:(?=[^:/?#])|("+m+")?("+o+")?("+p+")?("+j+")?(?="+n+"))";var s=1,t=2,u=3,v=4,w=5,x=6,y=7,z=8,A=9,B=new Map([[34,34],[41,40],[62,60],[93,91],[125,123],[187,171],[8217,8216],[8221,8220]]),C=new Map([[34,34],[40,41],[60,62],[91,93],[123,125],[171,187],[8216,8217],[8220,8221]]),D=new RegExp(""+r,"ig"),E=new RegExp("\\.(?:"+e+")","i");function F(a){try{return D.exec(a)}catch(b){d("WALogger").ERROR(h(),a.length,String(b)).devConsole(b).sendLogs("linkify-regex-error");return null}}function a(a,b){b===void 0&&(b=!1);if(!E.test(a))return[];D.lastIndex=0;var c=[],d;while(d=F(a)){d=H(d,b);d&&c.push(d)}return c}function G(a,b){b===void 0&&(b=!1);if(!E.test(a))return null;D.lastIndex=0;return H(F(a),b)}function H(a,b){b===void 0&&(b=!1);if(!a)return null;var e=a[s].length,f=a[0],g=a.index+e,h=a.index,j=a[s]==="_";if(j&&h-1&&/\S/.test(a.input[h-1]))return null;j=a[w];if(j&&j.startsWith("xn--")&&!d("WATopLevelDomains").TLD.has(c("punycode").toUnicode(j)))return null;if(a[x]){h=parseInt(a[x].slice(1),10);if(a[x][1]==="0"||!(0<h&&h<1<<16))return null}j=[A,z,y].find(function(b){return a&&a[b]})||0;if(j){h=[];var k=a[j];k.slice(-1)==="_"&&f[g-1]==="_"&&(f=f.slice(0,-1),a[j]=k=k.slice(0,-1));var l=0,m=0;for(var n=0;n<k.length;n++){var o=k.charCodeAt(n);o===m?(m=h.pop()||0,m===0&&(l=n)):C.has(o)?(m!==0&&h.push(m),m=C.get(o)):B.has(o)||m===0&&(l=n)}if(l!==k.length-1){o=a.slice(t,j);o.splice(w-t,1);f=o.filter(function(a){return a}).join("")+k.slice(0,l+1);D.lastIndex=g+f.length}else f=f.slice(e)}else f=f.slice(e);n=f;h=a[t];m=Boolean(h&&h.match(i));if(b&&!m)return null;h?h=h.toLowerCase():(n.toLowerCase().indexOf("irc.")===0?h="irc://":n.toLowerCase().indexOf("ftp.")===0?h="ftp://":a[u]?h="mailto:":h="http://",n=h+n);j=a[v];return{href:n,url:f,index:g,input:a.input,scheme:h,username:a[u],domain:j,port:a[x],path:a[y],params:a[z],anchor:a[A],isHttp:m}}function b(a){var b=G(a);return b&&b.url===a&&b.scheme==="mailto:"&&b.username!=null&&b.username!==""&&(b.params==null||b.params==="")&&(b.anchor==null||b.anchor==="")?b:null}g.findLinks=a;g.findLink=G;g.validateEmail=b}),98);
__d("WALanguagesAndRegions",[],(function(a,b,c,d,e,f){"use strict";a={fub:["237","235","234"],af:["237","27"],agq:["237"],yay:["234"],bss:["237"],agg:["675"],ast:["34"],avu:["243","211"],az:["994"],bkc:["237","241"],ksf:["237"],bfd:["237"],bjt:["221"],bcn:["234"],bas:["237"],bsq:["231"],bkv:["234"],bom:["234"],btt:["234"],bin:["234"],bmq:["226","223"],bs:["387","385","383","382","381"],fue:["229","228"],br:["33"],bys:["234"],bwr:["234"],cky:["234"],ca:["376","33","39","34"],tzm:["212"],fuq:["234"],ckl:["234"],asg:["234"],co:["33","39"],crh:["7"],hr:["387","385","383","382","381"],mfn:["234"],cs:["420","421"],dbq:["237","234"],dnj:["225","231"],dzg:["235","227"],ddn:["229"],dgh:["234"],dow:["237"],dua:["229"],nl:["297","32","599","31","1","597"],igb:["234"],etr:["675"],enn:["234"],kgy:["675"],et:["372"],ich:["234"],ee:["229","233","228"],ewo:["237"],fo:["298"],fmp:["237"],fi:["358","46"],fr:["32","229","226","257","237","1","236","242","243","235","269","253","240","33","241","509","225","352","261","223","377","227","250","221","248","41","228","678"],fur:["39"],ff:["237","224","222","221"],gaj:["675"],gl:["34"],gby:["234"],gba:["236"],gmm:["237"],de:["43","32","49","423","352","41"],tof:["675"],god:["225"],ank:["234"],gkn:["234"],gux:["229","226","227","228"],gde:["237","234"],gkp:["224"],kl:["299"],jgk:["234"],ha:["229","237","235","233","225","227","234","249","228"],haw:["1"],hbb:["234"],hu:["36"],dud:["234"],jab:["234"],iby:["234"],is:["354"],idu:["234"],ig:["240"],ige:["234"],ikx:["256"],ikk:["234"],ikq:["234"],smn:["358"],ga:["353","44"],atg:["234"],izi:["234"],dyo:["220","221"],jbu:["237","234"],kab:["213"],kea:["238"],tbd:["675"],hig:["234"],kai:["234"],kkj:["237","236","242"],kzr:["237","235"],naq:["264"],geb:["675"],okr:["234"],ksh:["49"],ses:["223"],khq:["223"],kun:["291","251"],kup:["675"],kub:["237","234"],kpe:["224","231"],nmg:["237","240"],ku:["963","90"],lkt:["1"],hia:["234"],lag:["255"],lv:["371"],lmp:["237"],ln:["242","243"],liv:[],lt:["370"],yaz:["234"],nds:["55","49","31"],dsb:["49"],lu:["243"],lb:["32","33","49","352"],mda:["234"],mb:["261"],mt:["356"],mi:["64"],arn:["56"],mas:["254","255"],ffm:["223"],mql:["229","228"],mbo:["237"],mbu:["234"],mif:["237"],mzm:["234"],mua:["237","235"],sur:["234"],nv:["1"],anc:["234"],nnh:["237"],jgo:["237"],fuv:["237","234"],nin:["234"],dgi:["226"],se:["358","46","47"],nso:["27"],ann:["234"],oc:["33","39","377","34"],pbi:["237"],pip:["234"],pl:["48"],pt:["244","55","238","240","245","853","258","351","239","670"],prg:[],fuf:["224","223","221","232"],qu:["54","591","57","593","51"],ro:["373","40"],cla:["234"],sav:["221"],sg:["236","235","243"],gd:["44"],seh:["258"],sr:["387","385","383","382","381"],sh:["387","385","383","382","381"],srr:["220","221"],sch:["39"],sld:["226"],sms:["358"],sk:["420","421"],sl:["386"],sok:["235"],es:["54","501","591","56","57","506","53","593","503","240","502","504","52","505","507","595","51","34","1","598","58"],srn:["597"],gsw:["43","33","49","423","41"],shi:["212"],tal:["234"],tmh:["223"],taq:["226","223"],tan:["234"],twq:["227"],blt:["856","84"],yer:["234"],tuq:["235","218","227","234"],ttr:["234"],tik:["237"],to:["676"],dts:["223"],kdl:["234"],tsw:["234"],tr:["90"],tk:["993"],hsb:["49"],vai:["231","232"],vi:["855","84"],vo:[],vut:["237","234"],wja:["234"],wa:["32"],wae:["43","39","423","41"],wji:["234"],cy:["44"],fy:["31"],fuh:["229","226","227"],yba:["234"],yav:["237"],yle:["675"],yll:["675"],yo:["229","234"],dje:["227"],gnd:["237"]};f.LANGUAGE_TO_REGIONS=a}),66);
__d("WAStringz",[],(function(a,b,c,d,e,f){"use strict";var g=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;function a(a){a=a.match(g);return a?a.length:0}function b(a,b,c){b===void 0&&(b=0);a=a.match(g);return!a?"":a.slice(Math.max(0,b),Math.max(0,c)).join("")}function c(a){return a.match(g)||[]}f.astralRange=g;f.length=a;f.substring=b;f.toArray=c}),66);
__d("WAIdn",["WALanguagesAndRegions","WAStringz"],(function(a,b,c,d,e,f,g){"use strict";var h={í:["ast","ksf","bas","ca","cs","dua","nl","ee","ewo","fo","fr","gl","kl","hu","is","ga","dyo","kea","kkj","nmg","lkt","lag","ln","lu","mas","nnh","jgo","pt","qu","seh","sk","es","to","vai","vi","wae","cy","fy","yav","yo"],î:["af","agq","bss","bfd","bas","bkv","btt","nl","igb","ewo","fr","fur","gaj","gby","kl","jab","atg","jbu","kkj","naq","ksh","ku","nmb","lmp","ln","mda","mg","mas","mzm","jgo","nin","ann","ro","sg","scn","srn","yer","tr","wa","cy","yav","yle"],ü:["agg","ast","az","br","ca","co","cs","nl","etr","et","fr","gl","de","tof","god","hu","tbd","geb","ksh","kup","nds","lb","arn","oc","sg","sk","es","gsw","dts","tr","tk","vo","wa","wae","fy","yll"],ċ:["mt"],ī:["agq","bss","bfd","bas","bkv","btt","ddn","igb","kjy","ich","gux","haw","jab","iby","idu","jbu","kub","nmg","lv","mda","mi","mas","mql","nin","prg","gd","to","yba","yav"],ı:["az","crh","tr"],ļ:["lv"],ł:["dsb","nv","pl","hsb"],š:["bs","hr","cs","dzg","et","fi","smn","geb","khq","ses","kun","lkt","lv","lt","dsb","se","nso","prg","sr","sh","sms","sk","sl","taq","twq","tuq","hsb","wqe","dje"],ƙ:["ckl","ank","ha","ikx","kai","hia","mbu","anc","nin","pip","tal","tan","wja","wji"],ǀ:["naq"],ǁ:["naq"],ȯ:["liv"],ɑ:["fmp","dud","tmh"],ɓ:["fub","yay","bkc","bjt","bcn","bas","bsq","bmq","fue","bys","bwr","cky","fuq","ckl","asg","dbq","dnj","dgh","dow","dua","enn","ff","gby","gba","gmm","ank","gde","gkp","jgk","ha","hbb","ikx","kkj","hig","kzr","kai","kpe","nmg","hia","ffm","mbo","mbu","mif","mzm","mua","sur","anc","fuv","nin","dgi","pbi","pip","fuf","cla","sav","srr","sld","sok","tal","tan","yer","ttr","tik","kdl","tsw","vai","vut","wja","wji","fuh","gnd"],ḍ:["tzm","kab","okr","shi","tmh","taq"],ṛ:["tzm","kab","shi"],ṭ:["tzm","kab","shi","tmh","taq"],ẉ:[],ạ:["izi","yaz","blt","vi"],ẹ:["yay","bom","bin","mfn","dzg","igb","enn","gkn","iby","ikk","ikw","izi","okr","yaz","blt","tan","tuq","vi","yo"],ị:["avu","mfn","igb","enn","iby","ig","ige","ikk","ikw","izi","okr","blt","tan","vi"]},i=new Set(["abq","ab","ady","av","az","ba","be","bs","bg","bua","ce","ckt","cu","cv","crh","dar","dng","myv","evn","gag","inh","kbd","xal","krc","kaa","kk","kjh","kca","ky","kv","koi","kpy","kum","lbe","lez","mk","mns","chm","mdf","mn","ttt","gld","yrk","nog","os","ru","rue","sr","sh","cjs","alt","tab","tg","tt","tkr","tk","tyv","ude","udm","uk","uz","mrj","sah"]),j=new Set(["374","994","375","387","359","995","7","383","996","389","373","976","382","381","992","993","380","998"]),k="\u0430\u0432\u0433\u0435\u043a\u043c\u043d\u043e\u0440\u0441\u0442\u0443\u0445\u0448\u0449\u044c\u0455\u0456\u0458\u0461\u0475\u04af\u04bb\u04cf\u0501\u051b\u051d\u0527\ua699";function l(a){return i.has(a)}function m(a){return j.has(a)}function n(a){return k.includes(a)}var o=new RegExp("^[a-z0-9-]+$"),p=2;function a(a,b,c,e){a=a.split(".");var f,g=!1;a.forEach(function(a){g=!a.match(o);if(g)if(!f)f=a;else return null});if(f==null||g)return null;a=[];var i=!0,j=d("WAStringz").toArray(f);for(var k=0;k<j.length;k++){var q=j[k];i=i&&n(q);if(i)continue;if(h[q])if(a.length>=p)return null;else a.push(q)}if(i){if(m(c)||m(b))return null;return e.some(function(a){return l(a)})?null:new Set(j)}if(!a.length)return null;q=a.filter(function(a){var f=h[a];if(f==null)return!1;if(e.some(function(a){return f.includes(a)}))return!1;a=new Set();for(var g=0;g<f.length;g++){var i=d("WALanguagesAndRegions").LANGUAGE_TO_REGIONS[f[g]];if(i==null)continue;for(var j=0;j<i.length;j++)a.add(i[j])}return a.has(c)||a.has(b)?!1:!0});return q.length?new Set(q):null}g.findSuspiciousCharacters=a}),98);
__d("WASuspiciousLinks",["WAIdn","WAJids","WAPhoneFindCC"],(function(a,b,c,d,e,f,g){"use strict";var h=/^(?:https?:\/\/)?([^/?#]+)(?:[/?#]|$)/i,i="ZZ";function a(a,b,c,e){a=a.match(h);a=a&&a[1];if(a==null)return null;c=d("WAPhoneFindCC").phoneCC(c);var f;if(b==="whatsapp")f="";else{var g=d("WAJids").interpretAndValidateJid(b.toString());f=g.jidType!=="lidUser"?d("WAPhoneFindCC").phoneCC(d("WAJids").toPhoneUserJid(b)):i}g=e.map(function(a){return a.toLowerCase()});return d("WAIdn").findSuspiciousCharacters(a,f,c,g)}g.findSuspiciousCharacters=a}),98);
__d("WAWebLinkify",["WAJids","WALinkify","WASuspiciousLinks","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a,b,c){b===void 0&&(b=!1);a=d("WALinkify").findLinks(a,b);return a.map(function(a){return i(a,c)})}function h(a,b,c){b===void 0&&(b=!1);a=d("WALinkify").findLink(a,b);if(a==null)return;return i(a,c)}function b(a){return a.body!=null&&h(a.body,!0)!=null}function i(a,b){var c=d("WAWebUserPrefsMeUser").getMaybeMeUser(),e=null;if(b&&c){b=b.isLid()?d("WAJids").toLidUserJid(b.user):d("WAJids").toPhoneUserJid(b.user);e=d("WASuspiciousLinks").findSuspiciousCharacters(a.domain,b,d("WAJids").toPhoneUserJid(c.user),[])}return babelHelpers["extends"]({},a,{suspiciousCharacters:(b=e)!=null?b:void 0})}g.findLinks=a;g.findLink=h;g.hasHttpLink=b}),98);
__d("WAWebWamEnumBizPlatform",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1,SMB:2,ENT:3,CLOUDAPI:4});f.BIZ_PLATFORM=a}),66);
__d("WAWebMerchantCommerceEventWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MerchantCommerceEvent:[4688,{acceptedPaymentMethods:[1,a.TYPES.STRING],adId:[2,a.TYPES.STRING],appSessionId:[3,a.TYPES.STRING],bizPlatform:[4,d("WAWebWamEnumBizPlatform").BIZ_PLATFORM],commerceExperience:[6,a.TYPES.STRING],commerceFlowId:[20,a.TYPES.STRING],commerceInteractionAction:[7,a.TYPES.STRING],commerceInteractionActionType:[21,a.TYPES.STRING],commerceOrderStatus:[22,a.TYPES.STRING],commercePaymentStatus:[8,a.TYPES.STRING],commerceSessionId:[9,a.TYPES.STRING],commerceSurface:[10,a.TYPES.STRING],extraAttributes:[11,a.TYPES.STRING],isCtwaOriginated:[12,a.TYPES.BOOLEAN],isEligibleForAdSignal:[13,a.TYPES.BOOLEAN],merchantHasCatalog:[14,a.TYPES.BOOLEAN],merchantIsDiscoverable:[15,a.TYPES.BOOLEAN],p2mFlow:[17,a.TYPES.STRING],referral:[18,a.TYPES.STRING],sequenceId:[19,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MerchantCommerceEvent:[]});g.MerchantCommerceEventWamEvent=b}),98);
__d("WAWebWamEnumInteractionType",[],(function(a,b,c,d,e,f){a=Object.freeze({USER_START:0,USER_CANCEL:1,FLOW_SUCCESS:2,FLOW_ERROR:3,USER_VIEW:4,USER_PAY_NOW:5,USER_VIEW_BASKET:6,CLICK_PAYMENT_DETAILS:7,CLICK_MESSAGE_BUSINESS:8,MODIFY_PAYMENT_METHOD:9,CONFIRM_PAYMENT_METHOD:10,USER_VIEW_SUMMARY:11,USER_PAY_NOW_QUICK_BUY:12,USER_SEND_PAYMENT:13,USER_SEND_PAYMENT_QUICK_BUY:14,CLICK_HELP:15,CLICK_ORDER_SUMMARY:16,USER_CONFIRM:17,CLICK_REPORT_THIS_TRANSACTION:18,USER_COMPLETED_PAYMENT_INTENT:19,USER_SHARE_MENU_OPEN:20,USER_OPEN_BROWSER:21,USER_COPY_LINK:22,USER_SHARE_LINK:23,USER_SHARE_MENU_CANCEL:24,USER_REFRESH:25,USER_FORWARD:26,USER_BACK:27,VIEW_EVENT_SHARING_TOS_ALERT:28,DISMISS_EVENT_SHARING_TOS_ALERT:29,CLICK_EVENT_SHARING_TOS:30,ACCEPT_EVENT_SHARING_TOS:31,REJECT_EVENT_SHARING_TOS:32,CLICK_TO_VIEW_EVENT_SHARING_TOS_ALERT:33,START_CHAT_FROM_CTWA:34,CLICK_CONFIRM_PENDING_PAYMENT:35,COPY_PIX_CODE:36,COPY_PIX_KEY:37,USER_VIEW_PAYMENT_COMPLETE:38});f.INTERACTION_TYPE=a}),66);
__d("WAWebWamEnumStructuredMessageClass",[],(function(a,b,c,d,e,f){a=Object.freeze({HSM:0,BUTTON:1,LIST:2,PRODUCT_LIST:3,BUTTON_NFM:4,PRODUCT_ITEM:5,SHOP_STOREFRONT:6});f.STRUCTURED_MESSAGE_CLASS=a}),66);
__d("WAWebPsStructuredMessageInteractionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform","WAWebWamEnumInteractionType","WAWebWamEnumMediaType","WAWebWamEnumStructuredMessageClass"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PsStructuredMessageInteraction:[3052,{bizPlatform:[1,d("WAWebWamEnumBizPlatform").BIZ_PLATFORM],businessOwnerJid:[7,a.TYPES.STRING],messageClass:[3,d("WAWebWamEnumStructuredMessageClass").STRUCTURED_MESSAGE_CLASS],messageClassAttributes:[5,a.TYPES.STRING],messageInteraction:[4,d("WAWebWamEnumInteractionType").INTERACTION_TYPE],messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],templateId:[8,a.TYPES.STRING],threadIdHmac:[9,a.TYPES.STRING]},[1,1,1],"private",0]},{PsStructuredMessageInteraction:[]});g.PsStructuredMessageInteractionWamEvent=b}),98);
__d("WAWebWamEnumEntryPointConversationInitiated",[],(function(a,b,c,d,e,f){a=Object.freeze({BUSINESS_INITIATED:0,CONSUMER_INITIATED:1,NO_MESSAGES_LAST_24H:2});f.ENTRY_POINT_CONVERSATION_INITIATED=a}),66);
__d("WAWebWamEnumLastMessageDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({OPPOSITE_PARTY_INITIATED:0,SELF_INITIATED:1});f.LAST_MESSAGE_DIRECTION=a}),66);
__d("WAWebStructuredMessageReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform","WAWebWamEnumEntryPointConversationInitiated","WAWebWamEnumLastMessageDirection","WAWebWamEnumMediaType","WAWebWamEnumStructuredMessageClass"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({StructuredMessageReceive:[3222,{bizPlatform:[1,d("WAWebWamEnumBizPlatform").BIZ_PLATFORM],businessOwnerJid:[2,a.TYPES.STRING],entryPointConversationInitiated:[7,d("WAWebWamEnumEntryPointConversationInitiated").ENTRY_POINT_CONVERSATION_INITIATED],entryPointConversionApp:[8,a.TYPES.STRING],entryPointConversionSource:[9,a.TYPES.STRING],lastMessageDirection:[10,d("WAWebWamEnumLastMessageDirection").LAST_MESSAGE_DIRECTION],messageClass:[3,d("WAWebWamEnumStructuredMessageClass").STRUCTURED_MESSAGE_CLASS],messageClassAttributes:[4,a.TYPES.STRING],messageDepth:[11,a.TYPES.INTEGER],messageMediaType:[5,d("WAWebWamEnumMediaType").MEDIA_TYPE],templateId:[6,a.TYPES.STRING],threadIdHmac:[12,a.TYPES.STRING]},[1,1,1],"private",0]},{StructuredMessageReceive:[]});g.StructuredMessageReceiveWamEvent=b}),98);
__d("PaymentLinkWamLogger",["$InternalEnum","PaymentLink","WABase64","WACryptoHmac","WASyncdCryptoUtils","WAWebABProps","WAWebLinkify","WAWebMerchantCommerceEventWamEvent","WAWebMobilePlatforms","WAWebMsgGetters","WAWebProtobufsE2E.pb","WAWebPsStructuredMessageInteractionWamEvent","WAWebStructuredMessageReceiveWamEvent","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamEnumBizPlatform","WAWebWamEnumInteractionType","WAWebWamEnumStructuredMessageClass","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={PAYMENT_PROVIDER:"payment_provider",CTA:"cta",P2M_FLOW:"p2m_flow",FUNNEL_ID:"funnel_id"},i={CTA:"payment_link",P2M_FLOW:"PAYMENT_LINK"},j={INTERACTION_ACTION:"send_payment_link",INTERACTION_SURFACE:"chat",REFERRAL:"composer",COMMERCE_EXPERIENCE:"non_native",P2M_FLOW:"payment_link",ACCEPTED_PAYMENT_METHOD:"payment_link"};a=b("$InternalEnum")({NOT_STARTED:"not_started",STARTED:"started",COMPLETED:"completed"});c=function(){function a(a){this.paymentLink=a}var c=a.prototype;c.shouldLogReceiverEvent=function(a){if(d("WAWebMsgGetters").getIsSentByMe(a))return!1;return d("WAWebMsgGetters").getRichPreviewType(a)!==d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.PAYMENT_LINKS?!1:d("WAWebABProps").getABPropConfigValue("smb_payment_links_logging_enabled")};a.$2=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){var e;return{bizPlatform:d("WAWebWamEnumBizPlatform").BIZ_PLATFORM.SMB,messageClass:d("WAWebWamEnumStructuredMessageClass").STRUCTURED_MESSAGE_CLASS.HSM,messageClassAttributes:JSON.stringify((e={},e[h.FUNNEL_ID]=(yield a.getHashOfMessageId(b)),e[h.PAYMENT_PROVIDER]=c,e[h.CTA]=i.CTA,e[h.P2M_FLOW]=i.P2M_FLOW,e)),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(b)}});function e(a,b){return c.apply(this,arguments)}return e}();a.getHashOfMessageId=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){return d("WABase64").encodeB64(yield d("WACryptoHmac").hmacSha256(d("WASyncdCryptoUtils").toUtf8(a.$1),d("WASyncdCryptoUtils").toUtf8(b.id.id)))});function e(a){return c.apply(this,arguments)}return e}();c.logPaymentLinkPreviewClick=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){c=(yield a.$2(b,c));b=new(d("WAWebPsStructuredMessageInteractionWamEvent").PsStructuredMessageInteractionWamEvent)(babelHelpers["extends"]({},c,{businessOwnerJid:(c=b.senderObj)==null?void 0:c.id.toJid(),messageInteraction:d("WAWebWamEnumInteractionType").INTERACTION_TYPE.USER_PAY_NOW}));b.commit()});function e(a,b){return c.apply(this,arguments)}return e}();c.logPaymentLinkMessageReceived=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c;c=(yield a.$2(b,(c=this.paymentLink.getPSP())!=null?c:""));b=new(d("WAWebStructuredMessageReceiveWamEvent").StructuredMessageReceiveWamEvent)(babelHelpers["extends"]({},c,{businessOwnerJid:(c=d("WAWebMsgGetters").getSender(b))==null?void 0:c.toJid()}));b.commit()});function e(a){return c.apply(this,arguments)}return e}();a.$3=function(a,b){a=new(d("WAWebMerchantCommerceEventWamEvent").MerchantCommerceEventWamEvent)({bizPlatform:d("WAWebWamEnumBizPlatform").BIZ_PLATFORM.SMB,commerceInteractionAction:j.INTERACTION_ACTION,commerceSurface:j.INTERACTION_SURFACE,referral:j.REFERRAL,commerceExperience:j.COMMERCE_EXPERIENCE,p2mFlow:j.P2M_FLOW,acceptedPaymentMethods:j.ACCEPTED_PAYMENT_METHOD,isEligibleForAdSignal:!1,merchantHasCatalog:a,extraAttributes:JSON.stringify(b)});a.commit()};a.shouldLogPaymentLinkSendEvent=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_payment_links_seller_logging_enabled")};a.genLogSendEventIfPaymentLink=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g){b=d("WAWebLinkify").findLinks(b,!1,d("WAWebUserPrefsMeUser").assertGetMe());b=a.$4(b,c,e,f);b&&a.$3(g,b)});function e(a,b,d,e,f){return c.apply(this,arguments)}return e}();a.$4=function(b,c,e,f){var g=b.map(function(a){a=new(d("PaymentLink").PaymentLink)(a.url);return a.getPSP()}).filter(function(a){return a!=null});if(g.length>0){var h=Array.from(new Set(g)),i=d("WAWebUserPrefsGeneral").getUserPrivacySettings();i=i.disableLinkPreviews;return{url_preview_cancelled:c,url_preview_enabled:!i,url_preview_loaded:e!=null||c,payment_provider:h.toString(),rich_preview_type:(c=e==null?void 0:(i=e.data)==null?void 0:i.richPreviewType)!=null?c:d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.NONE,does_preview_have_thumbnail:!a.$5(e==null?void 0:(h=e.data)==null?void 0:h.thumbnail)||!a.$5(e==null?void 0:(i=e.data)==null?void 0:i.thumbnailHQ),number_of_payment_links:g.length,link_preview_status:f,is_first_http_url_a_payment_link:a.$6(b)}}return null};a.$5=function(a){return a==null||a.trim().length===0};a.$6=function(a){for(a of a)if(a&&a.isHttp){var b=new(d("PaymentLink").PaymentLink)(a.url);return b.isValid()}return!1};return a}();c.$1="receiver_log_key";g.LinkPreviewStatus=a;g.PaymentLinkWamLogger=c}),98);
__d("WAWebBusinessProfileTypes",["$InternalEnum"],(function(a,b,c,d,e,f){var g={UNKNOWN:0,LOW:1,HIGH:2};function a(a){if(a==null)return;switch(a){case"unknown":return g.UNKNOWN;case"low":return g.LOW;case"high":return g.HIGH;default:return g.UNKNOWN}}d=["sun","mon","tue","wed","thu","fri","sat"];e={OPEN_24H:"open_24h",SPECIFIC_HOURS:"specific_hours",APPOINTMENT_ONLY:"appointment_only"};b=b("$InternalEnum")({CATALOG:"catalog",NONE:"none",SHOP:"shop",META_CATALOG:"smb_meta_catalog"});function c(a){return a==="sun"||a==="mon"||a==="tue"||a==="wed"||a==="thu"||a==="fri"||a==="sat"}var h={limitedLiabilityPartnership:"Limited liability partnership",soleProprietorship:"Sole proprietorship",partnership:"Partnership",publicCompany:"Public Company",privateCompany:"Private Company",other:"Other"},i={WEBSITE:256,DESCRIPTION:512,EMAIL:128,ADDRESS:256};f.VERIFIED_LEVEL=g;f.convertLevel=a;f.DAYS_OF_WEEK=d;f.BUSINESS_HOUR_MODES=e;f.CommerceExperienceTypes=b;f.isBusinessHoursDayName=c;f.businessTypeOptions=h;f.BUSINESS_PROFILE_FIELDS_LENGTH=i}),66);
__d("WAWebInteractiveMessagesNativeFlowName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ORDER_DETAILS:"order_details",ORDER_STATUS:"order_status",PAYMENT_STATUS:"payment_status",PAYMENT_METHOD:"payment_method",MESSAGE_WITH_LINK:"message_with_link",MESSAGE_WITH_LINK_STATUS:"message_with_link_status",QUICK_REPLY:"quick_reply",CTA_CALL:"cta_call",CTA_URL:"cta_url",CTA_CATALOG:"cta_catalog",PAYMENT_INFO:"payment_info"});c=a;f["default"]=c}),66);
__d("WAWebCTWAConstants",[],(function(a,b,c,d,e,f){a="11478";b="11525";c="11522";d="12015";e=new Map([[a,"WHATSAPP_FOR_SMB_WEB_WHATSAPP_SMB_WEB_CHATLIST_BANNER_QP"],[b,"WHATSAPP_FOR_WEB_GROUPSBANNER_QP"],[c,"WHATSAPP_FOR_WEB_PROFILEBANNER_QP"],[d,"WHATSAPP_FOR_SMB_WEB_BUSINESS_HOME_CARD_QP"]]);var g=20*1e3,h=20*1e3,i=20*1e3,j=20*1e3,k=Object.freeze({NEW_ORDER:2,PENDING_PAYMENT:3,PAID:4,ORDER_COMPLETE:5}),l=new Set(Object.keys(k).map(function(a){return k[a]})),m=1,n=7,o=8;f.QP_SURFACE_ID_CHAT_LIST_TOP=a;f.QP_SURFACE_ID_EXITED_GROUP=b;f.QP_SURFACE_ID_PROFILE=c;f.QP_SURFACE_BUSINESS_HOME_TOP_CARD=d;f.KNOWN_QP_SURFACES=e;f.QP_FETCH_TIMEOUT_MS=g;f.QP_ACTION_MUTATION_TIMEOUT_MS=h;f.MANAGE_ADS_FETCH_TIMEOUT_MS=i;f.AD_ENTRY_POINTS_FETCH_TIMEOUT_MS=j;f.ALLOWED_PREDEFINED_LABEL_IDS=k;f.ALLOWED_PREDEFINED_LABEL_IDS_SET=l;f.NEW_CUSTOMER_LABEL_ID=m;f.FOLLOW_UP_LABEL_ID=n;f.LEAD_LABEL_ID=o}),66);
__d("WAWebClientFeatureFlags",["gkx"],(function(a,b,c,d,e,f,g){d=!1;var h={a11y_block:!1,lid_debug:!1,media_existence_check:!c("gkx")("26258"),web_voip_voice_call:!1,web_voip_video_call:!1,youtube_video_preview_without_blur:!c("gkx")("26258"),message_add_ons:!1,reactions_filter_problematic_flags:!0,skip_compliance_phone_check:!1,debug_commands:d};function a(a){return h[a]}function i(a){h[a]=!0}function j(a){h[a]=!1}function b(){if(!c("gkx")("26258")){var a;a=new URLSearchParams(((a=window.location.search)!=null?a:"").toLowerCase());k(a,"feature_enable",i);k(a,"feature_disable",j)}}function k(a,b,c){a=a.get(b);if(a==null)return;b=a.split(",");b.forEach(function(a){a in h&&c(a)})}g.isFeatureEnabled=a;g.debugEnableFeatureFlag=i;g.debugDisableFeatureFlag=j;g.overwriteDebugFeatures=b}),98);
__d("WAWebComplianceConstants",[],(function(a,b,c,d,e,f){a={INDIA:"IN"};b={ENTITY_NAME:1024,ENTITY_TYPE_CUSTOM:1024,EMAIL:256,GRIEVANCE_OFFICER_NAME:256,LANDLINE_NUMBER:20,MOBILE_NUMBER:20,IMPORTER_NAME:1024,STREET1:1024,STREET2:1024,CITY:1024,REGION:1024,POSTAL_CODE:12};f.COMPLIANCE_INFO_CODES=a;f.COMPLIANCE_INFO_LENGTH=b}),66);
__d("WAWebL10NCountryCodes",[],(function(a,b,c,d,e,f){var g={1:{2:{0:{4:{c:"CA"}},2:{6:{c:"CA"}},3:{6:{c:"CA"}},4:{2:{c:"BS"},9:{c:"CA"}},5:{0:{c:"CA"}},6:{4:{c:"AI"},8:{c:"AG"}},8:{4:{c:"VG"},9:{c:"CA"}}},3:{0:{6:{c:"CA"}},4:{0:{c:"VI"},3:{c:"CA"},5:{c:"KY"}},6:{5:{c:"CA"},7:{c:"CA"}}},4:{0:{3:{c:"CA"}},1:{6:{c:"CA"},8:{c:"CA"}},3:{1:{c:"CA"},7:{c:"CA"},8:{c:"CA"}},4:{1:{c:"BM"}},5:{0:{c:"CA"}},7:{3:{c:"GD"}}},5:{0:{6:{c:"CA"}},1:{4:{c:"CA"},9:{c:"CA"}},4:{8:{c:"CA"}},7:{9:{c:"CA"}},8:{1:{c:"CA"},7:{c:"CA"}}},6:{0:{4:{c:"CA"}},1:{3:{c:"CA"}},3:{9:{c:"CA"}},4:{7:{c:"CA"},9:{c:"TC"}},5:{8:{c:"JM"}},6:{4:{c:"MS"}},7:{0:{c:"MP"},1:{c:"GU"},2:{c:"CA"}},8:{4:{c:"AS"}}},7:{0:{5:{c:"CA"},9:{c:"CA"}},2:{1:{c:"MF"}},5:{8:{c:"LC"}},6:{7:{c:"DM"}},7:{8:{c:"CA"}},8:{0:{c:"CA"},2:{c:"CA"},4:{c:"VC"},7:{c:"PR"}}},8:{0:{7:{c:"CA"},9:{c:"DO"}},1:{9:{c:"CA"}},2:{5:{c:"CA"},9:{c:"DO"}},4:{9:{c:"DO"}},6:{7:{c:"CA"},8:{c:"TT"},9:{c:"KN"}},7:{3:{c:"CA"},6:{c:"JM"}}},9:{0:{2:{c:"CA"},5:{c:"CA"}},3:{9:{c:"PR"}}}},2:{0:{c:"EG"},1:{1:{c:"SS"},2:{c:"MA"},3:{c:"DZ"},6:{c:"TN"},8:{c:"LY"}},2:{0:{c:"GM"},1:{c:"SN"},2:{c:"MR"},3:{c:"ML"},4:{c:"GN"},5:{c:"CI"},6:{c:"BF"},7:{c:"NE"},8:{c:"TG"},9:{c:"BJ"}},3:{0:{c:"MU"},1:{c:"LR"},2:{c:"SL"},3:{c:"GH"},4:{c:"NG"},5:{c:"TD"},6:{c:"CF"},7:{c:"CM"},8:{c:"CV"},9:{c:"ST"}},4:{0:{c:"GQ"},1:{c:"GA"},2:{c:"CG"},3:{c:"CD"},4:{c:"AO"},5:{c:"GW"},6:{c:"IO"},7:{c:"AC"},8:{c:"SC"},9:{c:"SD"}},5:{0:{c:"RW"},1:{c:"ET"},2:{c:"SO"},3:{c:"DJ"},4:{c:"KE"},5:{c:"TZ"},6:{c:"UG"},7:{c:"BI"},8:{c:"MZ"}},6:{0:{c:"ZM"},1:{c:"MG"},2:{c:"RE"},3:{c:"ZW"},4:{c:"NA"},5:{c:"MW"},6:{c:"LS"},7:{c:"BW"},8:{c:"SZ"},9:{c:"KM"}},7:{c:"ZA"},9:{0:{c:"SH"},1:{c:"ER"},7:{c:"AW"},8:{c:"FO"},9:{c:"GL"}}},3:{0:{c:"GR"},1:{c:"NL"},2:{c:"BE"},3:{c:"FR"},4:{c:"ES"},5:{0:{c:"GI"},1:{c:"PT"},2:{c:"LU"},3:{c:"IE"},4:{c:"IS"},5:{c:"AL"},6:{c:"MT"},7:{c:"CY"},8:{c:"FI"},9:{c:"BG"}},6:{c:"HU"},7:{0:{c:"LT"},1:{c:"LV"},2:{c:"EE"},3:{c:"MD"},4:{c:"AM"},5:{c:"BY"},6:{c:"AD"},7:{c:"MC"},8:{c:"SM"}},8:{0:{c:"UA"},1:{c:"RS"},2:{c:"ME"},3:{c:"XK"},5:{c:"HR"},6:{c:"SI"},7:{c:"BA"},9:{c:"MK"}},9:{c:"IT"}},4:{0:{c:"RO"},1:{c:"CH"},2:{0:{c:"CZ"},1:{c:"SK"},3:{c:"LI"}},3:{c:"AT"},4:{c:"GB"},5:{c:"DK"},6:{c:"SE"},7:{c:"NO"},8:{c:"PL"},9:{c:"DE"}},5:{0:{0:{c:"FK"},1:{c:"BZ"},2:{c:"GT"},3:{c:"SV"},4:{c:"HN"},5:{c:"NI"},6:{c:"CR"},7:{c:"PA"},8:{c:"PM"},9:{c:"HT"}},1:{c:"PE"},2:{c:"MX"},3:{c:"CU"},4:{c:"AR"},5:{c:"BR"},6:{c:"CL"},7:{c:"CO"},8:{c:"VE"},9:{0:{c:"GP"},1:{c:"BO"},2:{c:"GY"},3:{c:"EC"},4:{c:"GF"},5:{c:"PY"},6:{c:"MQ"},7:{c:"SR"},8:{c:"UY"},9:{c:"CW"}}},6:{0:{c:"MY"},1:{c:"AU"},2:{c:"ID"},3:{c:"PH"},4:{c:"NZ"},5:{c:"SG"},6:{c:"TH"},7:{0:{c:"TL"},2:{c:"NF"},3:{c:"BN"},4:{c:"NR"},5:{c:"PG"},6:{c:"TO"},7:{c:"SB"},8:{c:"VU"},9:{c:"FJ"}},8:{0:{c:"PW"},1:{c:"WF"},2:{c:"CK"},3:{c:"NU"},5:{c:"WS"},6:{c:"KI"},7:{c:"NC"},8:{c:"TV"},9:{c:"PF"}},9:{0:{c:"TK"},1:{c:"FM"},2:{c:"MH"}}},7:{c:"RU"},8:{1:{c:"JP"},2:{c:"KR"},4:{c:"VN"},5:{0:{c:"KP"},2:{c:"HK"},3:{c:"MO"},5:{c:"KH"},6:{c:"LA"}},6:{c:"CN"},8:{0:{c:"BD"},6:{c:"TW"}}},9:{0:{c:"TR"},1:{c:"IN"},2:{c:"PK"},3:{c:"AF"},4:{c:"LK"},5:{c:"MM"},6:{0:{c:"MV"},1:{c:"LB"},2:{c:"JO"},3:{c:"SY"},4:{c:"IQ"},5:{c:"KW"},6:{c:"SA"},7:{c:"YE"},8:{c:"OM"}},7:{0:{c:"PS"},1:{c:"AE"},2:{c:"IL"},3:{c:"BH"},4:{c:"QA"},5:{c:"BT"},6:{c:"MN"},7:{c:"NP"}},8:{c:"IR"},9:{2:{c:"TJ"},3:{c:"TM"},4:{c:"AZ"},5:{c:"GE"},6:{c:"KG"},8:{c:"UZ"}}}};function h(a,b){if(a!=null&&a.length>0&&b!=null){b=b[a[0]];a=a;while(a.length>0&&b){if(b.c)return b.c;a=a.substr(1,a.length-1);b=b[a[0]]}}return""}function a(a){if(a==null||a.length===0)return"";var b=h(a,g);if(b===""&&a[0]==="1")return"US";return b==="RU"&&["6","7"].includes(a[1])?"KZ":b}f.getCountryShortcodeByPhone=a}),66);
__d("WAWebBizGatingUtils",["$InternalEnum","WALogger","WAWebABProps","WAWebApiContact","WAWebBusinessProfileTypes","WAWebCTWAConstants","WAWebClientFeatureFlags","WAWebComplianceConstants","WAWebInteractiveMessagesNativeFlowName","WAWebL10NCountryCodes","WAWebMobilePlatforms","WAWebMsgGetters","WAWebPrimaryFeatures","WAWebServerPropsModel","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["qpSurfaceIdsUsingGraphQL: unknown surface ID ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["isOrderDetailsQuickPayEnabled failed to parse config json: error ",""]);i=function(){return a};return a}function a(){return d("WAWebMobilePlatforms").isSMB()}function e(){return d("WAWebMobilePlatforms").isSMB()}function j(){return d("WAWebMobilePlatforms").isSMB()}function f(a){return!a.isNewsletter&&j()&&!((a=a.contact.businessProfile)==null?void 0:a.isBizBot3p)}function k(){return d("WAWebABProps").getABPropConfigValue("business_profile_refresh_m1_enabled")}function l(){return d("WAWebABProps").getABPropConfigValue("smb_collections_enabled")}function m(){return d("WAWebABProps").getABPropConfigValue("smb_collections_appeal_flow_enabled")}function n(){return d("WAWebABProps").getABPropConfigValue("nfm_rendering_enabled")}function o(){return!d("WAWebABProps").getABPropConfigValue("interactive_message_native_flow_killswitch")}function p(){return!d("WAWebABProps").getABPropConfigValue("interactive_response_message_killswitch")}function q(){return!d("WAWebABProps").getABPropConfigValue("interactive_response_message_native_flow_killswitch")}function r(a){var b;if(a!=null){var c;b=a.isLid()?(c=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)))==null?void 0:c.user:a.user;if(a.isLid()&&b==null)return!0}return v(b)}function s(a){return z(a,function(){return d("WAWebABProps").getABPropConfigValue("smb_ecommerce_compliance_india_m4")},function(){return d("WAWebServerPropsModel").ServerProps.smbEcommerceComplianceIndiaM4})}function t(a){return z(a,function(){return d("WAWebABProps").getABPropConfigValue("smb_ecommerce_compliance_india_m4_5")},function(){return d("WAWebServerPropsModel").ServerProps.smbEcommerceComplianceIndiaM4_5})}function u(a){var b=z(a==null?void 0:a.id,function(){return d("WAWebABProps").getABPropConfigValue("web_abprop_block_catalog_creation_ecommerce_compliance_india")},function(){return d("WAWebServerPropsModel").ServerProps.blockCatalogCreationEcommerceComplianceIndia});return b&&(a==null?void 0:(b=a.profileOptions)==null?void 0:b.commerceExperience)===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.NONE}function v(a){a=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(a||"");var b=d("WAWebComplianceConstants").COMPLIANCE_INFO_CODES.INDIA;return a===b||d("WAWebClientFeatureFlags").isFeatureEnabled("skip_compliance_phone_check")}function w(a){a=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(a||"");return a==="BR"}function x(a){var b;if(!a)return!1;b=a.isLid()?(b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)))==null?void 0:b.user:a.user;return b==null?!1:v(b)||w(b)}function y(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("web_business_tools_drawer_enabled")}function z(a,b,c){b===void 0&&(b=function(){return!1});c===void 0&&(function(){return!1});var e;if(a!=null){e=a.isLid()?(c=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a)))==null?void 0:c.user:a.user;if(a.isLid()&&e==null)return!0}return!v(e)?!1:b()}function A(){return!d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("tos_3_client_gating_enabled"):!1}function B(){return d("WAWebABProps").getABPropConfigValue("tos_client_state_fetch_iteration")}function C(){return!d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("tos_client_state_fetch_enabled"):!1}function D(){return d("WAWebABProps").getABPropConfigValue("web_shop_storefront_message")}function E(){return d("WAWebABProps").getABPropConfigValue("banned_shops_ux_enabled")}function F(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("smb_click_to_chat_logging_enabled"):!1}function G(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("smb_biz_profile_logging_enabled"):!1}function H(){return d("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_linked_accounts_killswitch")}function I(){return d("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_linked_account_enabled")}function J(){return d("WAWebABProps").getABPropConfigValue("commerce_sanctioned")}function K(){return d("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_edit_cover_photo_enabled")}function L(){return d("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_cover_photo_view_enabled")}function M(){return d("WAWebABProps").getABPropConfigValue("message_quick_reply")}function N(){return d("WAWebABProps").getABPropConfigValue("catalog_categories_enabled")}var O=b("$InternalEnum")({DIGITAL_GOODS:"digital-goods",PHYSICAL_GOODS:"physical-goods",ANY:"any",NONE:"none"});function aa(a){a===void 0&&(a=O.NONE);try{var b=JSON.parse(d("WAWebABProps").getABPropConfigValue("order_details_quick_pay"));b=b.allowed_product_type;if(b&&b!==O.NONE)return b===O.ANY||b===a}catch(a){d("WALogger").WARN(i(),a)}return!1}function ba(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_billing_enabled")}function ca(){return d("WAWebABProps").getABPropConfigValue("web_enable_biz_catalog_view_ps_logging")}function da(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smart_filters_enabled")||!d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smart_filters_enabled_consumer")}function P(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_multi_device_message_attribution_enabled")}b=function(){return d("WAWebABProps").getABPropConfigValue("order_messages_ephemeral_exception_enabled")};function ea(){return P()&&d("WAWebABProps").getABPropConfigValue("smb_multi_device_agents_logging_V2_enabled")}function fa(){return!d("WAWebMobilePlatforms").isSMB()?!1:d("WAWebABProps").getABPropConfigValue("smb_orange_enabled")}function ga(){return!d("WAWebMobilePlatforms").isSMB()?!1:Q()||R()}function Q(){return!d("WAWebMobilePlatforms").isSMB()?!1:d("WAWebABProps").getABPropConfigValue("premium_blue_enabled")}function R(){return!d("WAWebMobilePlatforms").isSMB()?!1:d("WAWebABProps").getABPropConfigValue("smb_billing_enabled")||d("WAWebABProps").getABPropConfigValue("smb_ctwa_billing_enabled")}function ha(){return d("WAWebABProps").getABPropConfigValue("native_commerce_threads_logging_enabled")}function ia(){return d("WAWebABProps").getABPropConfigValue("smb_biz_profile_custom_url")}function ja(){return d("WAWebABProps").getABPropConfigValue("web_quantity_controls_enabled")}function ka(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("companion_biz_quick_reply_sync_support")&&d("WAWebABProps").getABPropConfigValue("web_quick_reply_authoring")}function la(){return d("WAWebABProps").getABPropConfigValue("smb_catalog_collections_reordering_enabled")}function ma(){return d("WAWebABProps").getABPropConfigValue("smb_temp_cover_photo_privacy_messaging")}function S(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_enabled")}function na(){return S()&&d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_system_messages_enabled")}function oa(){return!S()?0:d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_nux_impressions")}function pa(){return d("WAWebABProps").getABPropConfigValue("smb_hide_unsupported_currency_price")}function qa(){return d("WAWebABProps").getABPropConfigValue("graphql_privacy_imp_m1")}function ra(){return d("WAWebABProps").getABPropConfigValue("graphql_privacy_imp_m2")}function sa(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_create_product_catalog")}function ta(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product_catalog")}function ua(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_add_product")}function va(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_edit_product")}function wa(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product")}function xa(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_report_product")}function ya(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_appeal_product")}function za(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_create_collection")}function Aa(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_update_collection")}function Ba(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_update_collection_list")}function Ca(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_delete_collection")}function Da(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_appeal_collection")}function Ea(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_collection")}function Fa(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_single_collection")}function Ga(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product_list")}function Ha(){return!d("WAWebMobilePlatforms").isSMB()?"{}":d("WAWebABProps").getABPropConfigValue("smb_billing_premium_access_config")}function Ia(){return d("WAWebABProps").getABPropConfigValue("country_client_gating_enabled")}function Ja(){return d("WAWebABProps").getABPropConfigValue("order_details_custom_item_enabled")}function Ka(){return d("WAWebABProps").getABPropConfigValue("order_details_from_catalog_enabled")}function La(){return d("WAWebABProps").getABPropConfigValue("order_details_from_cart_enabled")}function Ma(){return d("WAWebABProps").getABPropConfigValue("order_details_total_order_minimum_value")}function Na(a){return Kb(a)?5e3:d("WAWebABProps").getABPropConfigValue("order_details_total_maximum_value")}function Oa(){return d("WAWebABProps").getABPropConfigValue("order_management_enabled")}function Pa(){return d("WAWebABProps").getABPropConfigValue("btm_threads_logging_enabled")}function Qa(a){return a?d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_chats_reorder_on_chat_unassignment_enabled"):d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_chats_reorder_on_chat_assignment_enabled")}function Ra(){return d("WAWebABProps").getABPropConfigValue("utm_tracking_expiration_hours")}function Sa(){return d("WAWebABProps").getABPropConfigValue("utm_tracking_enabled")}function Ta(){return!d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_thread_ad_attribution_enabled")||d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_web_parse_always_show_ad_attribution")}function Ua(){return d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_hide_ad_context_if_soft_dismissed_in_primary")}function Va(){return d("WAWebABProps").getABPropConfigValue("ctwa_consumer_data_sharing_consent")}function Wa(){return d("WAWebABProps").getABPropConfigValue("ctwa_mm_biz_ai_disclosure_update_enabled")&&!d("WAWebABProps").getABPropConfigValue("ctwa_mm_biz_ai_tos_filtering_enabled")}function Xa(){return d("WAWebABProps").getABPropConfigValue("ctwa_mm_biz_ai_disclosure_update_enabled")&&d("WAWebABProps").getABPropConfigValue("ctwa_mm_biz_ai_tos_filtering_enabled")}function Ya(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_consent")}function Za(){return d("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_opt_in_cool_off_period")}function $a(){return d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_notifications_enabled")}function ab(){return d("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_chat_list_new_label_enabled")}function T(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_ads_action_banner_enabled_web")}function bb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_action_banner_logging_enabled_web")}function cb(){return T()&&d("WAWebABProps").getABPropConfigValue("in_app_comms_manage_ads_web_banner_campaign_enabled")}function db(){return d("WAWebMobilePlatforms").isSMB()||d("WAWebABProps").getABPropConfigValue("quick_promotion_banner_client_consumer_enabled")}function eb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("qp_campaign_client_enabled")}function fb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_enabled")}function gb(){return d("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_frequency_mins")}function hb(){var a=d("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_surface_ids"),b=new Map(Array.from(d("WAWebCTWAConstants").KNOWN_QP_SURFACES.values(),function(a){return[a,a]})),c=new Set();a.split(",").forEach(function(a){var e=b.get(a);e!=null?c.add(e):d("WALogger").ERROR(h(),a)});return c}var ib=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_home_header_enabled")},jb=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_home_header_dropdown_enabled")},kb=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_ad_creation_entry_point_catalog_web")},lb=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_ad_creation_entry_point_catalog_product_web")};function U(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("kill_switch_ctwa_ml_entry_point_config")===!1}function mb(){return d("WAWebABProps").getABPropConfigValue("ctwa_entry_point_config_fetch_threshhold")}function nb(){return U()&&d("WAWebABProps").getABPropConfigValue("ctwa_long_term_holdout_content_enabled")}function ob(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_long_term_holdout_client_side_check")}var pb=function(a){return d("WAWebMobilePlatforms").isSMB()&&(a==null?void 0:a.hasCreatedAd)===!0&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_manage_ads_home_header_dropdown_enabled")},qb=function(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_ctwa_web_fetch_linked_accounts_enabled")};function V(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web")}function rb(){return V()&&d("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_ad_actions_menu")}function sb(){return V()&&d("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_ad_metrics")}function W(){return V()&&d("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_recovery_flow")}function tb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web")===!1}function ub(){return d("WAWebABProps").getABPropConfigValue("ctwa_ad_account_nonce_push_wait_timeout_web")}function vb(){return d("WAWebABProps").getABPropConfigValue("ctwa_ad_account_nonce_retries_max_web")}function wb(){return W()&&d("WAWebABProps").getABPropConfigValue("smb_graphql_token_recovery_during_account_recovery_enabled")}function xb(){return d("WAWebABProps").getABPropConfigValue("smb_premium_messages_spam_report_enabled")}function yb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("business_tool_enhanced_logging")}function zb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_labels_ctwa_data_sharing")}function Ab(){return d("WAWebMobilePlatforms").isSMB()&&X()}function X(){return d("WAWebABProps").getABPropConfigValue("payments_br_content_optimization_variant")!==0}function Bb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_settings_killswitch")===!1}function Cb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_message_labels_ctwa_data_sharing")}function Db(){return d("WAWebABProps").getABPropConfigValue("payments_link_to_lite_consumer_enabled")}function Eb(a,b,e){if(d("WAWebMsgGetters").isBizSourceFromMarketingMessage(e))return d("WAWebABProps").getABPropConfigValue("web_premium_messages_interactivity_rendering_enabled");else if(e==="quoted_carousel_card"&&a===c("WAWebInteractiveMessagesNativeFlowName").QUICK_REPLY)return $();else if(Y(a))return!0;return b===!0?d("WAWebABProps").getABPropConfigValue("web_premium_messages_interactivity_rendering_enabled"):!1}function Y(a){return a===c("WAWebInteractiveMessagesNativeFlowName").CTA_URL}function Fb(){return d("WAWebABProps").getABPropConfigValue("smb_premium_messages_click_logging_enabled")}function Z(){return d("WAWebABProps").getABPropConfigValue("row_buyer_order_revamp_m0_enabled")}function Gb(){return d("WAWebABProps").getABPropConfigValue("seller_orders_management_revamp")}function Hb(){return Z()&&d("WAWebABProps").getABPropConfigValue("buyer_initiated_order_request_variant_enabled")}function Ib(){return d("WAWebABProps").getABPropConfigValue("order_statuses_revamp_m1_enabled")}function Jb(){return d("WAWebABProps").getABPropConfigValue("smb_premium_messages_url_cta_alert_dialog_enabled")}function Kb(a){var b=d("WAWebUserPrefsMeUser").getMeUser();b=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(b.user);a=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(a.contact.id.user);return b==="BR"&&a==="BR"}function $(){return d("WAWebABProps").getABPropConfigValue("carousel_message_client_enabled")}function Lb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("companion_biz_label_sync_support")&&d("WAWebABProps").getABPropConfigValue("web_labels_editing_enabled")}function Mb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_label_improvements_reordering")}function Nb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_label_improvements_reordering")&&d("WAWebABProps").getABPropConfigValue("web_smb_label_reordering_m2_two_way")}function Ob(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_new_customer_label_signals")}function Pb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("ctwa_lead_labels_send_signals")}function Qb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smba_premium_messages_leaving_wa_content")}function Rb(){return d("WAWebABProps").getABPropConfigValue("smba_premium_messages_insights_v2_trackable_link_domain")}function Sb(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("smb_notes_v1_enabled")}function Tb(){return d("WAWebABProps").getABPropConfigValue("smb_notes_privacy_string")}function Ub(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("wa_web_business_tools_top_card_enabled")}function Vb(){return d("WAWebABProps").getABPropConfigValue("smb_meta_verified_context_card")}function Wb(){return d("WAWebPrimaryFeatures").primaryFeatureEnabled("profile_edit_for_mv_users_enabled")}function Xb(){return d("WAWebABProps").getABPropConfigValue("web_catalog_video_view_fallback_enabled")}function Yb(){return d("WAWebABProps").getABPropConfigValue("web_catalog_video_view_enabled")}function Zb(){return d("WAWebABProps").getABPropConfigValue("smb_get_subscriptions_graphql_migration_enabled")}function $b(){return d("WAWebABProps").getABPropConfigValue("smb_custom_url_get_user_graphql_migration_enabled")}g.canDisplayLabel=a;g.canEditLabelAssociation=e;g.canSendQuickReply=j;g.canSendQuickReplyInChat=f;g.canSeeBizProfileV3=k;g.canManageCollections=l;g.canAppealCollections=m;g.nativeFlowMessagesEnabled=n;g.interactiveNativeFlowMessagesEnabled=o;g.interactiveResponseMessagesEnabled=p;g.interactiveNativeFlowResponseMessagesEnabled=q;g.canSeeECommerceComplianceIndiaSoftEnforcement=r;g.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney=s;g.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney=t;g.blockCatalogCreationECommerceComplianceIndia=u;g.isWidInPaymentsCountry=x;g.isBizToolsDrawerEnabled=y;g.tos3GatingEnabled=A;g.tosFetchIteration=B;g.tosFetchEnabled=C;g.shopsInteractiveMessageEnabled=D;g.bannedShopsEnabled=E;g.smbClickToChatLoggingEnabled=F;g.smbBizProfileLoggingEnabled=G;g.bizLinkedAccountsEnabled=H;g.canViewBizLinkedAccounts=I;g.commerceFeaturesDisabledBySanctions=J;g.isBizCoverPhotoEditEnabled=K;g.isBizCoverPhotoViewEnabled=L;g.messageQuickReplyEnabled=M;g.catalogCategoriesEnabled=N;g.QuickPayProductTypeGating=O;g.isOrderDetailsQuickPayEnabled=aa;g.billingEnabled=ba;g.isPSForCatalogViewEnabled=ca;g.smartFiltersEnabled=da;g.isMultiDeviceMessageAttributionEnabled=P;g.inOrderMessagesEphemeralExceptionEnabled=b;g.isMultiDeviceAgentsLoggingEnabled=ea;g.isSmbOrangeEnabled=fa;g.subscriptionFetchEnabled=ga;g.isMetaVerifiedEnabled=Q;g.isPremiumBillingEnabled=R;g.commerceThreadsLoggingEnabled=ha;g.isCustomURLViaBizProfileEnabled=ia;g.isQuantityControlsFeatureEnabled=ja;g.quickRepliesManagementEnabled=ka;g.isCollectionReorderingEnabled=la;g.coverPhotoPrivacyMessagingEnabled=ma;g.chatAssignmentEnabled=S;g.chatAssignmentSystemMessagesEnabled=na;g.chatAssignmentMaxNuxImpressions=oa;g.hideUnsupportedCurrency=pa;g.graphQLForCatalogM1Enabled=qa;g.graphQLForCollectionM2Enabled=ra;g.graphQLForCreateProductCatalogEnabled=sa;g.graphQLForGetProductCatalogEnabled=ta;g.graphQLForAddProductEnabled=ua;g.graphQLForEditProductEnabled=va;g.graphQLForGetProductEnabled=wa;g.graphQLForReportProductEnabled=xa;g.graphQLForAppealProductEnabled=ya;g.graphQLForCreateCollectionEnabled=za;g.graphQLForUpdateCollectionEnabled=Aa;g.graphQLForUpdateCollectionListEnabled=Ba;g.graphQLForDeleteCollectionEnabled=Ca;g.graphQLForAppealCollectionEnabled=Da;g.graphQLForGetCollectionsEnabled=Ea;g.graphQLForGetSingleCollectionEnabled=Fa;g.graphQLForGetProductListEnabled=Ga;g.getBillingPremiumAccessConfig=Ha;g.countryGatingEnabled=Ia;g.orderDetailsCustomItemEnabled=Ja;g.orderDetailsFromCatalogEnabled=Ka;g.orderDetailsFromCartEnabled=La;g.orderDetailsTotalOrderMinimumValue=Ma;g.orderDetailsTotalMaxValue=Na;g.orderManagementEnabled=Oa;g.btmThreadsLoggingEnabled=Pa;g.shouldReorderChatOnAssignment=Qa;g.utmTrackingExpirationInHours=Ra;g.isUtmTrackingEnabled=Sa;g.isAdsAttributionEnabled=Ta;g.isHideAdContextIfSoftDismissed=Ua;g.isConsumerTransparencyEnabled=Va;g.isUpdatedConsumerDisclosureUiRowEnabled=Wa;g.isUpdatedConsumerDisclosureUiIndiaEnabled=Xa;g.smbDataSharingConsentEnabled=Ya;g.smbDataSharingOptInCoolOffSeconds=Za;g.chatAssignmentNotificationsEnabled=$a;g.chatAssignmentNewChatlistLabelEnabled=ab;g.adsActionBannersEnabled=T;g.adsActionBannersLoggingEnabled=bb;g.adsActionBannersEnabledOnStartup=d("WAWebMobilePlatforms").isSMB;g.adsActionManageAdsBannerEnabled=cb;g.qpSDKProcessingEnabled=db;g.qpCampaignsEnabled=eb;g.qpGraphQLEnabled=fb;g.qpGraphQLFetchIntervalMinutes=gb;g.qpSurfaceIdsUsingGraphQL=hb;g.shouldShowAdCreationIcon=ib;g.shouldShowAdCreationDropdown=jb;g.adCreationEntryPointCatalogEnabled=kb;g.adCreationEntryPointCatalogProductEnabled=lb;g.adEntryPointsConfigurationFetchEnabled=U;g.adEntryPointsConfigurationFetchThreshold=mb;g.adEntryPointsConfigurationFetchM1Enabled=nb;g.isInLongTermHoldoutFallbackWhenAdEntryPointsConfigurationMissing=ob;g.shouldShowManageAdsDropdown=pb;g.shouldFetchLinkedAccounts=qb;g.adManagementEnabled=V;g.adManagementActionsDisplayingEnabled=rb;g.adManagementMetricsDisplayingEnabled=sb;g.adManagementRecoveryFlowEnabled=W;g.adAccountTokenStoringEnabled=tb;g.adAccountTokenNoncePushWaitTimeoutSeconds=ub;g.adAccountTokenNonceMaxRetries=vb;g.grapQLRecoveryDuringAdAccountRecoveryEnabled=wb;g.isSMBMMSpamReportEnabled=xb;g.isSMBEnhancedLoggingEnabled=yb;g.isSMBLabelsDataSharingEnabledForChats=zb;g.isSMBDataSharingOrderCopyOptimizationEnabled=Ab;g.isOrderContentOptimizationEnabled=X;g.shouldShowSMBDataSharingSettings=Bb;g.isSMBLabelsDataSharingEnabledForMessages=Cb;g.isMessageWithLinkNfmEnabled=Db;g.isInteractiveCtaMessageEnabled=Eb;g.isValidCAPIFormat=Y;g.isPremiumMessagesClickLoggingEnabled=Fb;g.isBuyerOrderRevampEnabled=Z;g.isSellerOrderRevampEnabled=Gb;g.isBuyerOrderRequestVariantEnabled=Hb;g.isOrderStatusM1Enabled=Ib;g.isPremiumMessagesUrlCtaDialogEnabled=Jb;g.carouselsEnabled=$;g.labelsEditingEnabled=Lb;g.isLabelReorderingSyncFromPrimaryEnabled=Mb;g.isLabelReorderingInWebEnabled=Nb;g.is3pdSignalNewCustomerEnabled=Ob;g.is3pdLeadOptimisationLabelSignalsEnabled=Pb;g.isPremiumMessagesNewLeavingWAContentEnabled=Qb;g.getTrackableLinkDomain=Rb;g.smbNotesV1Enabled=Sb;g.smbNotesPrivacyStringABProp=Tb;g.isBizToolsTopCardEnabled=Ub;g.isMetaVerifiedContextCardEnabled=Vb;g.isMetaVerifiedLockedProfileEditingV1Enabled=Wb;g.isCatalogVideoViewFallbackEnabled=Xb;g.isCatalogVideoViewEnabled=Yb;g.isGetSubscriptionsGraphqlMigrationEnabled=Zb;g.isGetCustomUrlUserGraphqlMigrationEnabled=$b}),98);
__d("WAWebBusinessProfileVersioningBridge",["WAWebBizGatingUtils","WAWebServerPropsModel"],(function(a,b,c,d,e,f,g){var h=3,i=4,j=16,k=32,l=64,m=128,n=256;function a(){return o(d("WAWebServerPropsModel").ServerProps.webBizProfileOptions)}function o(a){var b=h|i|j|l|m|k;d("WAWebBizGatingUtils").bizLinkedAccountsEnabled()&&(b|=n);return a&b}g.DIRECT_CONNECTION_FLAG=m;g.getBusinessProfileQueryVersion=a;g.getBusinessProfileQueryVersionWithCustomBizProfileOptions=o}),98);
__d("WAWapDeprecatedSmaxID",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SupportContactForm:3,CtwaGetContext:4,QueryOrder:5,CreateOrder:10,RefreshCart:11,CatalogGetProductList:21,SetCatalogVisibility:23,CommerceSettingsSet:25,CatalogGetSingleCollection:30,CatalogGetCollections:35,CatalogCreateCollection:36,CatalogUpdateCollection:40,CatalogDeleteCollections:43,CatalogAppealCollection:48,BizGetPublicKey:52,MerchantGetComplianceInfo:53,MerchantSetComplianceInfo:54,CatalogVerifyPostcode:70,BtmCustomUrlGet:78,BtmCustomUrlGetUser:79,QuerySubscription:90,UpdateCollectionList:92});c=a;f["default"]=c}),66);
__d("WAWebCommsWapMd",["WALogger","WAWapJid","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebWid","WAWebWidValidator","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["USER_JID: invalid PSA jid"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["DEVICE_JID: invalid PSA jid"]);i=function(){return a};return a}function j(a){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())if(a.server==="hosted")return d("WAWapJid").DomainType.HOSTED;else if(a.server==="hosted.lid")return d("WAWapJid").DomainType.HOSTED_LID;return a.server==="lid"?d("WAWapJid").DomainType.LID:d("WAWapJid").DomainType.WHATSAPP}function a(a){if(!(a instanceof c("WAWebWid"))||!a.isUser())throw c("err")("DEVICE_JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));if(a.isPSA()){d("WALogger").ERROR(i()).sendLogs("invalid-psa-user-jid");throw c("err")("USER_JID: invalid PSA jid")}return a.isFbidBot()&&d("WAWebBotGating").isFbidBotEnabled()?d("WAWapJid").WapJid.create(a.user,a.getJidServer()):d("WAWapJid").WapJid.createJidU(a.user,j(a),a.device)}function b(a){if(!(a instanceof c("WAWebWid"))||!a.isUser())throw c("err")("USER_JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));if(a.isPSA()){d("WALogger").ERROR(h()).sendLogs("invalid-psa-user-jid");throw c("err")("USER_JID: invalid PSA jid")}return d("WAWapJid").WapJid.create(a.user,a.getJidServer())}function e(a){if(!(a instanceof c("WAWebWid"))||!a.isUser()&&!a.isGroup()&&!a.isBroadcast()&&!a.isNewsletter())throw c("err")("CHAT_JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));return d("WAWapJid").WapJid.create(a.user,a.getJidServer())}function f(a){if(!(a instanceof c("WAWebWid"))||!a.isGroup())throw c("err")("GROUP_JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));return d("WAWapJid").WapJid.create(a.user,d("WAWebWidValidator").Domains.G_US)}function k(a){if(!(a instanceof c("WAWebWid"))||!a.isGroupCall())throw c("err")("GROUP_CALL_JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));return d("WAWapJid").WapJid.create(a.user,d("WAWebWidValidator").Domains.CALL)}function l(a){if(!(a instanceof c("WAWebWid")))throw c("err")("JID: invalid jid type: "+(a instanceof c("WAWebWid")?a.toString():"Not an instance of WID"));var b=a.device==null||a.device===0;return!b?d("WAWapJid").WapJid.createJidU(a.user,j(a),a.device):d("WAWapJid").WapJid.create(a.user,a.getJidServer())}var m=function(a){function b(a){var c=[];c.push(a.tag);c.push(a.attrs||{});Array.isArray(a.content)&&a.content.filter(function(a){return!Array.isArray(a)})===0?c.push(a.content):Array.isArray(a.content)?c.push(a.content.map(function(a){return b(a)})):a.content!=null?a.content instanceof Uint8Array?c.push(Array.from(a.content)):c.push(a.content):c.push(null);return c}return b(a)};g.DEVICE_JID=a;g.USER_JID=b;g.CHAT_JID=e;g.GROUP_JID=f;g.GROUP_CALL_JID=k;g.JID=l;g.wapNodeToVoipXml=m}),98);
__d("WAWebMerchantComplianceJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebCommsWapMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(a){var b;return{email:(a==null?void 0:(b=a.maybeChild("email"))==null?void 0:b.contentString())||"",landline_number:(a==null?void 0:(b=a.maybeChild("landline_number"))==null?void 0:b.contentString())||"",mobile_number:(a==null?void 0:(b=a.maybeChild("mobile_number"))==null?void 0:b.contentString())||""}},i=new(c("WADeprecatedWapParser"))("merchantComplianceResponse",function(a){a.assertTag("iq");a.assertFromServer();var b=[];a.forEachChildWithTag("merchant_info",function(a){var c,d,e,f;c=((c=a.maybeChild("entity_name"))==null?void 0:c.contentString())||"";d=((d=a.maybeChild("entity_type"))==null?void 0:d.contentString())||"";e=(e=a.maybeChild("entity_type_custom"))==null?void 0:e.contentString();var g=a.attrString("is_registered")==="true",i=a.maybeChild("customer_care_details");a=a.maybeChild("grievance_officer_details");i=babelHelpers["extends"]({},h(i));f=babelHelpers["extends"]({name:(a==null?void 0:(f=a.maybeChild("name"))==null?void 0:f.contentString())||""},h(a));b.push({entity_name:c,entity_type:d,is_registered:g,entity_type_custom:e,customer_care_details:i,grievance_officer_details:f})});return b});function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,xmlns:"w:biz:merchant_info",id:b.generateId(),type:"get",smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").MerchantGetComplianceInfo)},a.map(function(a){return d("WAWap").wap("merchant_info",{jid:d("WAWebCommsWapMd").USER_JID(a.wid)})}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,i));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode);else return a.result});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a===void 0?{}:a;var b=a.entityName,e=a.entityType,f=a.isRegistered;f=f===void 0?!1:f;var g=a.entityTypeCustom,h=a.customerCareDetails;a=a.grievanceOfficerDetails;f=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"w:biz:merchant_info",id:d("WAWap").generateId(),type:"set",smax_id:d("WAWap").SMAX_ID(c("WAWapDeprecatedSmaxID").MerchantSetComplianceInfo)},d("WAWap").wap("merchant_info",{is_registered:f?"true":"false"},b!==void 0?d("WAWap").wap("entity_name",null,b):null,e!==void 0?d("WAWap").wap("entity_type",null,e):null,g!==void 0?d("WAWap").wap("entity_type_custom",null,g):null,h?d("WAWap").wap("customer_care_details",null,h.email!==void 0?d("WAWap").wap("email",null,h.email):null,h.landlineNumber!==void 0?d("WAWap").wap("landline_number",null,h.landlineNumber):null,h.mobileNumber!==void 0?d("WAWap").wap("mobile_number",null,h.mobileNumber):null):null,a?d("WAWap").wap("grievance_officer_details",null,a.name!==void 0?d("WAWap").wap("name",null,a.name):null,a.email!==void 0?d("WAWap").wap("email",null,a.email):null,a.landlineNumber!==void 0?d("WAWap").wap("landline_number",null,a.landlineNumber):null,a.mobileNumber!==void 0?d("WAWap").wap("mobile_number",null,a.mobileNumber):null):null));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(f,i));if(!b.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode);else return b.result});return k.apply(this,arguments)}g.getMerchantCompliance=a;g.setMerchantCompliance=e}),98);
__d("WAWebCommonParsersParseBusinessProfile",["WAWebBizGatingUtils","WAWebBotTypes","WAWebBusinessProfileTypes","cr:5664","gkx","lodash"],(function(a,b,c,d,e,f,g){function a(a){var e=a.maybeChild("address");e=e?e.contentString():void 0;var f,g=a.maybeChild("description");g&&(f=g.contentString());g=a.maybeChild("email");g=g?g.contentString():void 0;var j=a.maybeChild("latitude");j=j?parseFloat(j.contentString()):void 0;var k=a.maybeChild("longitude");k=k?parseFloat(k.contentString()):void 0;var l=[];a.forEachChildWithTag("website",function(a){l.push(a.contentString())});var m=[],n=a.maybeChild("categories");n&&n.forEachChildWithTag("category",function(a){var b=a.attrString("id");m.push({id:b,localized_display_name:a.contentString()})});var o;n=a.maybeChild("business_hours");if(n){var p=n.maybeAttrString("timezone"),q=[];n.forEachChildWithTag("business_hours_config",function(a){q.push({day_of_week:a.attrString("day_of_week"),mode:a.attrString("mode"),open_time:a.hasAttr("open_time")?parseInt(a.attrString("open_time"),10):0,close_time:a.hasAttr("close_time")?parseInt(a.attrString("close_time"),10):0})});o={config:q};p!=null&&(o.timezone=p)}var r;n=a.maybeChild("profile_options");if(n){r={};p=n.maybeChild("commerce_experience");if(p){r.commerce_experience=(p=d("WAWebBusinessProfileTypes").CommerceExperienceTypes.cast(p.contentString()))!=null?p:d("WAWebBusinessProfileTypes").CommerceExperienceTypes.NONE}p=n.maybeChild("cart_enabled");p&&(r.cart_enabled=p.contentString()==="true");p=n.maybeChild("shop_url");p&&(r.shop_url=p.contentString());p=n.maybeChild("commerce_manager_url");p&&(r.commerce_manager_url=p.contentString());p=n.maybeChild("is_banned");p&&(r.is_banned=p.contentString()==="true");p=n.maybeChild("direct_connection");p&&(r.direct_connection=p.contentString()==="true");p=n.maybeChild("is_profile_edit_disabled");p&&(r.is_profile_edit_disabled=p.contentString()==="true")}n=a.maybeChild("direct_connection");var s;if(n){p=n.maybeChild("default_postcode");s={enabled:n.maybeAttrString("enabled")==="true",defaultPostcode:p?{code:p.attrString("code"),locationName:p.attrString("location_name")}:void 0}}n=a.maybeChild("catalog_status");p=n?n.attrString("status"):void 0;n={};var t={},u=!1,v,w=a.maybeChild("linked_accounts");if(w){u=!0;var x=w.maybeChild("fb_page");if(x){var y=x.maybeChild("display_name"),z=x.maybeChild("likes");n.display_name=y==null?void 0:y.contentString();n.likes=z==null?void 0:z.contentInt();y=x.maybeAttrString("id");y!=null&&(n.id=y)}z=w.maybeChild("ig_professional");if(z){x=z.maybeChild("ig_handle");y=z.maybeChild("followers");t={ig_handle:x==null?void 0:x.contentString(),followers:y==null?void 0:y.contentInt()}}}w=a.maybeChild("cover_photo");z=w?{id:w.attrString("id"),url:new URL(w.contentString())}:void 0;if(d("WAWebBizGatingUtils").isCustomURLViaBizProfileEnabled()){x=a.maybeChild("custom_url");x&&(v=x==null?void 0:x.contentString())}w=d("WAWebBotTypes").BizBotAutomatedType.cast((y=a.maybeChild("automated_type"))==null?void 0:y.contentString());y=d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.cast((x=a.maybeChild("welcome_message_protocol_mode"))==null?void 0:x.contentString());var A;x=a.maybeChild("prompts");x&&(A=h(x));x=(x=a.maybeChild("commands"))==null?void 0:(x=x.maybeChild("description"))==null?void 0:x.contentString();var B;a=a.maybeChild("commands");a&&(B=i(a));!c("gkx")("26258")&&b("cr:5664")&&(b("cr:5664").debugBotConfigs.injectBizBotFields===!0&&(y=d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.BASIC,f="Hello! I'm Midjourney, your personal assistant. I'm here to assist you with anything you might need, from travel information to workout plans, and even caring for your plants. I can even sketch your imagination!",A=[{emoji:"\u2728",text:"Create an alien world!"},{emoji:"\ud83d\udd25",text:"Show a future city!"},{emoji:"\u2728",text:"Fantasy landscape? Generate now!"},{emoji:"\ud83d\udd25",text:"Describe a mythical world filled with magical creatures and let the bot generate an image that brings it to life!"},{emoji:"\u2728",text:"Picture an enchanted forest with towering trees, sparkling fairies, and vibrant flora, and let the bot create an image that captures its magic!"},{emoji:"\ud83d\udd25",text:"Imagine yourself as a time traveler who has just stepped into an ancient civilization. You find yourself surrounded by towering structures and exotic landscapes that are unfamiliar to you. Take a moment to observe the surroundings, notice the intricate details on the buildings and the unique attire worn by the people. Now, let the bot generate an image that captures the essence of this unexplored world, bringing forth a visual representation that transcends time and space!"}],x="Try these commands to get started",B=[{description:"Create images with Midjourney",name:"imagine"},{description:"View and adjust your personal settings",name:"settings"},{description:"Blend images together seamlessly",name:"blend"},{description:"View information about your profile",name:"info"},{description:"Subscribe to the profile for updates",name:"subscribe"}],l.length===0&&(l=["https://meta.com"])));a={address:e,description:f,email:g,latitude:j,longitude:k,website:l,categories:m,business_hours:o,catalog_status:p,profile_options:r,fb_page:n,ig_professional:t,profile_is_linked:u,directConnection:s,cover_photo:z,custom_url:v,prompts:A,commands:B,commands_description:x,automated_type:w,welcome_message_protocol_mode:y};return c("lodash").omitBy(a,function(a){return a==null})}function h(a){var b=[];a.forEachChildWithTag("prompt",function(a){var c=a.maybeChild("emoji");c=(c=c==null?void 0:c.contentString())!=null?c:"";a=a.maybeChild("text");a=(a=a==null?void 0:a.contentString())!=null?a:"";b.push({emoji:c,text:a})});return b}function i(a){var b=[];a.forEachChildWithTag("command",function(a){var c=a.maybeChild("name");c=(c=c==null?void 0:c.contentString())!=null?c:"";a=a.maybeChild("description");a=(a=a==null?void 0:a.contentString())!=null?a:"";b.push({name:c,description:a})});return b}g["default"]=a}),98);
__d("WAWebJidToWid",["WAJids","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebWidFactory").createUserWid(a)}function b(a){return d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(a))}function c(a){return d("WAWebWidFactory").createDeviceWid(a)}function e(a){return d("WAWebWidFactory").toChatWid(d("WAWebWidFactory").createWid(a))}function f(a){return d("WAWebWidFactory").createWid(a)}function h(a){a=d("WAJids").extractJidFromJidWithType(a);return d("WAWebWidFactory").createWid(a)}function i(a){return d("WAWebWidFactory").createWid(a)}g.userJidToUserWid=a;g.deviceJidToUserWid=b;g.deviceJidToDeviceWid=c;g.chatJidToChatWid=e;g.groupJidToWid=f;g.jidWithTypeToWid=h;g.newsletterJidToWid=i}),98);
__d("WAWebQueryBusinessProfileJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebCommonParsersParseBusinessProfile","WAWebCommsWapMd","WAWebJidToWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("businessProfileResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("business_profile");var b=[];a.forEachChildWithTag("profile",function(a){var e=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("jid")),f=a.attrString("tag");a=c("WAWebCommonParsersParseBusinessProfile")(a);Object.keys(a).length?b.push({wid:e,tag:f,profile:a}):b.push({wid:e,tag:f})});return b});function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=d("WAWap")).wap("iq",{to:c.S_WHATSAPP_NET,xmlns:"w:biz",id:c.generateId(),type:"get"},c.wap("business_profile",{v:c.INT(b)},a.map(function(a){return d("WAWap").wap("profile",{jid:d("WAWebCommsWapMd").USER_JID(a.wid),tag:a.tag!=null?d("WAWap").INT(a.tag):d("WAWap").DROP_ATTR})})));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(c,h));if(!b.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode);else return b.result});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebQueryBusinessProfile",["Promise","WAWebBackendErrors","WAWebBusinessProfileVersioningBridge","WAWebMerchantComplianceJob","WAWebQueryBusinessProfileJob"],(function(a,b,c,d,e,f,g){var h;function a(a,e){var f=d("WAWebBusinessProfileVersioningBridge").getBusinessProfileQueryVersion();e?e=(h||(h=b("Promise"))).all([c("WAWebQueryBusinessProfileJob")(a,f),d("WAWebMerchantComplianceJob").getMerchantCompliance(a)]).then(i):e=c("WAWebQueryBusinessProfileJob")(a,f);return d("WAWebBackendErrors").attachErrorLogger(e,"Query business profile failed")}function i(a){var b=a[0],c=a[1];return b.map(function(a,b){return babelHelpers["extends"]({},a,{profile:babelHelpers["extends"]({},a.profile,{legal_entity_details:c[b]})})})}g.queryBusinessProfile=a}),98);
__d("WAWebChatThreadLoggingUtils",["WABase64","WACryptoHmac","WAJids","WALogger","WATimeUtils","WAWebApiContact","WAWebApiParse","WAWebBusinessProfileTypes","WAWebEphemeralityTypes","WAWebInteractiveMessagesNativeFlowName","WAWebLidAwareContactsDB","WAWebModelStorageUtils","WAWebMsgType","WAWebQueryBusinessProfile","WAWebUserPrefsMeUser","WAWebWamEnumChatOriginsType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getChatOriginType: could not find chat with id ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getOppositeVisibleIdentificationType: could not find contact with id ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMeHasUsername: could not find contact with id ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMeHasUsername: wid is not a valid user ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['Thread Logging: Failed to query business profile to set "biz_catalog_type"']);l=function(){return a};return a}var m=new TextEncoder(),n=function(a){return m.encode(a).buffer};function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WACryptoHmac").hmacSha256(a,b));return d("WABase64").encodeB64(a)});return p.apply(this,arguments)}function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=n(b+c);return o(a,b)});return q.apply(this,arguments)}function e(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=n(b);return o(a,b)});return r.apply(this,arguments)}function f(a){return d("WATimeUtils").toDate(d("WATimeUtils").castToUnixTime(a-8*d("WATimeUtils").HOUR_SECONDS)).toISOString().split("T")[0].replace(/-/g,"/")}function s(a,b){var c=b%d("WATimeUtils").DAY_SECONDS;b=b-c;return c>=a?b+a:b-d("WATimeUtils").DAY_SECONDS+a}function t(a,b,c){return s(a,b)>c}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;try{b=(yield d("WAWebQueryBusinessProfile").queryBusinessProfile([{wid:a}]))}catch(a){d("WALogger").ERROR(l()).verbose().devConsole(a).sendLogs("query-business-profile-fail");return null}a=b[0];if(!a)return null;a=(a=a.profile)==null?void 0:(a=a.profile_options)==null?void 0:a.commerce_experience;if(a===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.CATALOG)return"native";else if(a===d("WAWebBusinessProfileTypes").CommerceExperienceTypes.SHOP)return"shop";return null});return v.apply(this,arguments)}function w(a){return[d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT].includes(a.type)?!1:!0}function x(a){var b=new Set([d("WAWebMsgType").MSG_TYPE.PRODUCT,d("WAWebMsgType").MSG_TYPE.ORDER,d("WAWebMsgType").MSG_TYPE.LIST]);return b.has(a.type)||b.has((b=a.quotedMsg)==null?void 0:b.type)||!!(a.matchedText!=null&&a.matchedText!==""&&y(a.matchedText))||a.type===d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW&&(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS||a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS)}function y(a){return d("WAWebApiParse").matchCatalogUrl(a)||d("WAWebApiParse").matchProductUrl(a)}function z(a){if(a==null)return null;switch(a){case d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.ACCOUNT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.CHAT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.BULK_CHANGE;default:return null}}function A(a){if(a==null)return null;switch(a){case d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.ACCOUNT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.CHAT_SETTINGS;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange:return d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE.BULK_CHANGE;default:return null}}function B(a){if(a==null)return null;return a?d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_ME:d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_OTHER}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMeUser").getMeUser();if(!a.isUser()){d("WALogger").ERROR(k(),a);return!1}var b=!1,e=(yield c("WAWebLidAwareContactsDB").get(a.toJid().toString()));(e==null?void 0:e.username)!=null&&e.username!==""&&(b=!0);if(!a.isLid()){e=d("WAWebApiContact").getCurrentLid(a);if(e){e=(yield c("WAWebLidAwareContactsDB").get(e.toString()));(e==null?void 0:e.username)!=null&&e.username!==""&&(b=!0)}return b}d("WALogger").ERROR(j(),a);return b});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return J(a)?null:d("WAWebModelStorageUtils").getStorage().lock(["contact"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,e;if(a.isLid()){var f=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a));f==null?(b=a.toString(),e="lid"):(b=d("WAJids").toPhoneUserJid(f.user.toString()),e="pn")}else b=d("WAJids").toPhoneUserJid(a.user.toString()),e="pn";f=(yield c("WAWebLidAwareContactsDB").get(b));if(f==null){d("WALogger").ERROR(i(),a);return null}return G(f,e)}))});return F.apply(this,arguments)}function G(a,b){if(a==null)return d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PLACEHOLDER;var c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.MASKED_PHONE_NUMBER;a==null?c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PLACEHOLDER:a.isAddressBookContact?c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME:a.verifiedName?c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME:b==="pn"?c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER:a.username!=null&&a.username!==""&&(c=d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.USERNAME);return c}function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return J(a)?null:d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=a.toString();b=(yield b.get(c));if(b==null){d("WALogger").ERROR(h(),c);return}switch(b.lidOriginType){case"ctwa":return d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA;case"username":return d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_USERNAME;default:return d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS}});return function(a){return c.apply(this,arguments)}}())});return I.apply(this,arguments)}function J(a){return!a.isUser()||a.isPSA()||a.isBot()}g.generateThreadID=a;g.generateThreadIDHMAC=e;g.getThreadDs=f;g.computeStartTs=s;g.shouldUpdateChatEvent=t;g.getBizCatalogType=u;g.shouldIncrementMsgSendAndReceive=w;g.isCommerceMessage=x;g.getWamDisappearingModeTrigger=z;g.getWamDisappearingModeTriggerGroups=A;g.getWamDisappearingModeInitiatedByMe=B;g.getMeHasUsername=C;g.getOppositeVisibleIdentification=E;g.getOppositeVisibleIdentificationType=G;g.getChatOriginType=H}),98);
__d("WAWebChatThreadLoggingEventUploader",["Promise","WALogger","WANullthrows","WATimeUtils","WAWebABProps","WAWebBotGating","WAWebBotTypes","WAWebChatMessageCountsWamEvent","WAWebChatThreadLoggingBoolFlagFields","WAWebChatThreadLoggingCountFields","WAWebChatThreadLoggingUtils","WAWebGroupType","WAWebWamEnumChatMutedType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadEvents: uploaded "," events but only deleted "," (they should be the same!)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: error uploading events: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatThreadLoggingBatchEventUploader: secret not in store!"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatThreadLoggingBatchEventUploader: offset not in store!"]);l=function(){return a};return a}a=function(){function a(a,b){this.eventStore=b,this.metadataStore=a}var e=a.prototype;e.uploadEvents=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=this;e=(e=a==null?void 0:a.purgeAfter)!=null?e:!0;var g=(yield this.metadataStore.getOffset());if(g==null){d("WALogger").WARN(l());return-1}a=(a=a==null?void 0:a.lastStartTs)!=null?a:d("WAWebChatThreadLoggingUtils").computeStartTs(g,d("WATimeUtils").unixTime()-d("WATimeUtils").DAY_SECONDS);if(this.secret==null){g=(yield this.metadataStore.getSecret());if(g==null){d("WALogger").WARN(k());return-1}this.secret=g}g=(yield this.eventStore.getBeforeInclusive(a));try{yield (h||(h=b("Promise"))).all(g.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebChatThreadLoggingUtils").getThreadDs(a.startTs),e=a.contactInfo,g=new(d("WAWebChatMessageCountsWamEvent").ChatMessageCountsWamEvent)({messagesSent:a.msgsSent,messagesReceived:a.msgsReceived,commentsReceived:a.commentsReceived,viewOnceMessagesSent:a.viewOnceMsgsSent,viewOnceMessagesReceived:a.viewOnceMsgsReceived,viewOnceMessagesOpened:a.viewOnceMessagesOpened,threadDs:b,threadId:yield d("WAWebChatThreadLoggingUtils").generateThreadID(c("WANullthrows")(f.secret),a.chatId,b),isAGroup:a.contactInfo.isAGroup,groupSize:e.isAGroup?e.groupSize:void 0,isAContact:e.isAGroup?void 0:e.isAContact,isArchived:a.isArchived,isPinned:a.isPinned,messagesStarred:a.messagesStarred,messagesRead:a.msgsRead,messagesUnread:a.messagesUnread,chatMuted:a.isMuted?d("WAWebWamEnumChatMutedType").CHAT_MUTED_TYPE.MUTED_NO_NOTIFICATIONS:d("WAWebWamEnumChatMutedType").CHAT_MUTED_TYPE.NOT_MUTED,callOffersSent:a.callOffersSent,callOffersReceived:a.callOffersReceived,totalCallDuration:a.totalCallDuration,typeOfGroup:a.contactInfo.groupType!=null?d("WAWebGroupType").groupTypeToWamEnum(a.contactInfo.groupType):void 0,isPnhEnabledChat:a.isPnhEnabledChat,reactionsSent:a.reactionsSent,reactionsReceived:a.reactionsReceived,isMessageYourself:a.isMessageYourself,forwardMessagesSent:a.forwardMessagesSent,forwardMessagesReceived:a.forwardMessagesReceived,editedMsgsSent:a.editedMsgsSent,totalMessageToAgentCnt:a.botMessagesSent,totalMessageFromAgentCnt:a.botMessagesReceived,totalMessageEditsFromAgentCnt:a.botMessagesEdited,isUserAgent:a.isUserAgent,hasUsername:a.hasUsername,oppositeVisibleIdentification:a.oppositeVisibleIdentification!=null?a.oppositeVisibleIdentification:void 0,chatOrigins:a.chatOrigins!=null?a.chatOrigins:void 0,eventCreationMessagesReceived:a.eventCreationMessagesReceived,eventCreationMessagesSent:a.eventCreationMessagesSent,eventResponseMessagesReceived:a.eventResponseMessagesReceived,eventResponseMessagesSent:a.eventResponseMessagesSent});d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")&&(a.ephemeralityTriggerAction!=null&&(g.ephemeralityTriggerAction=a.ephemeralityTriggerAction),a.ephemeralityInitiator!=null&&(g.ephemeralityInitiator=a.ephemeralityInitiator));d("WAWebChatThreadLoggingCountFields").COUNT_FIELD_NAMES.forEach(function(b){g[b]=a[b]});d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELD_NAMES.forEach(function(b){g[b]=a[b]});e.isAGroup||(d("WAWebBotGating").isBizBot3pEnabled()&&(g.isUser3pBotChat=e.automatedType===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P),d("WAWebBotGating").isBizBot1pEnabled()&&(g.isUser1pBizBotChat=e.automatedType===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P));g.commit()});return function(b){return a.apply(this,arguments)}}()))}catch(a){d("WALogger").ERROR(j(),a.toString()).sendLogs("thread-logging-upload-failure")}if(e){e=(yield this.eventStore.deleteBeforeInclusive(a));e!==g.length&&d("WALogger").ERROR(i(),g.length,e)}yield this.metadataStore.setLastUploadedStartTs(a);return g.length});function e(b){return a.apply(this,arguments)}return e}();return a}();g.ChatThreadLoggingEventUploaderImpl=a}),98);
__d("WAWebChatThreadLoggingLocalstorageMetadataHandler",["Promise","WABase64","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(){}var c=a.prototype;c.setOffset=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsMultiDevice").setChatThreadLoggingOffset(a);return!0});function c(b){return a.apply(this,arguments)}return c}();c.getOffset=function(){return(h||(h=b("Promise"))).resolve(d("WAWebUserPrefsMultiDevice").getChatThreadLoggingOffset())};c.setSecret=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsMultiDevice").setChatThreadLoggingSecretB64(d("WABase64").encodeB64(a));return!0});function c(b){return a.apply(this,arguments)}return c}();c.getSecret=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsMultiDevice").getChatThreadLoggingSecretB64());return a==null?null:d("WABase64").decodeB64(a)});function c(){return a.apply(this,arguments)}return c}();c.setLastUploadedStartTs=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsMultiDevice").setChatThreadLoggingLastUploadedStartTs(a);return!0});function c(b){return a.apply(this,arguments)}return c}();c.getLastUploadedStartTs=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsMultiDevice").getChatThreadLoggingLastUploadedStartTs());return(a=a)!=null?a:0});function c(){return a.apply(this,arguments)}return c}();return a}();g.ChatThreadLoggingMetadataLocalStorage=a}),98);
__d("WAWebChatThreadLogging",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebChatThreadLoggingEventStore","WAWebChatThreadLoggingEventUploader","WAWebChatThreadLoggingLocalstorageMetadataHandler","WAWebChatThreadLoggingUtils","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa] labels: cannot generate getChatThreadIDHMAC because secret is unset"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: cannot generate getChatThreadID because secret is unset."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: cannot get user secret from the thread logging metadata store"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: uploaded "," events"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: attempting to upload but secret is unset."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: attempting to upload but offset is unset."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: uploading events"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: setting offset"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat thread logging initialized"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: will upload in "," seconds."]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: error handling activities"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: handling "," message(s)"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat_thread_logging: setting thread_id_user_secret"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["getChatThreadLoggingState: init incomplete!"]);v=function(){return a};return a}var w=null;function x(){w==null&&d("WALogger").ERROR(v());return w}function a(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!0);a=a&&d("WAWebABProps").getABPropConfigValue("message_count_logging_md_enabled");(yield d("WAWebUserPrefsMultiDevice").getChatThreadLoggingLastUploadedStartTs())==null&&(yield d("WAWebUserPrefsMultiDevice").setChatThreadLoggingLastUploadedStartTs(0));var c=new(d("WAWebChatThreadLoggingLocalstorageMetadataHandler").ChatThreadLoggingMetadataLocalStorage)(),e=a?new(d("WAWebChatThreadLoggingEventStore").ChatThreadLoggingEventStoreImpl)(c):{handleMessages:function(){return(h||(h=b("Promise"))).resolve()},getEvent:function(){return(h||(h=b("Promise"))).resolve()},getBeforeInclusive:function(){return(h||(h=b("Promise"))).resolve([])},deleteBeforeInclusive:function(){return(h||(h=b("Promise"))).resolve(0)}};a=a?new(d("WAWebChatThreadLoggingEventUploader").ChatThreadLoggingEventUploaderImpl)(c,e):{uploadEvents:function(){return(h||(h=b("Promise"))).resolve(0)}};var f=(yield c.getOffset());f!=null&&D(f);w={metadataStore:c,eventStore:e,eventUploader:a};d("WALogger").LOG(q())});return y.apply(this,arguments)}function e(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;d("WALogger").LOG(p());b=(b=(yield (b=x())==null?void 0:b.metadataStore.setOffset(a)))!=null?b:!1;b&&D(a);return b});return z.apply(this,arguments)}function f(a){var c;d("WALogger").LOG(u());return(c=(c=x())==null?void 0:c.metadataStore.setSecret(a))!=null?c:(h||(h=b("Promise"))).resolve(!1)}function A(a){var b;d("WALogger").LOG(t(),a.length).devConsole({activities:a});(b=x())==null?void 0:b.eventStore.handleMessages(a)["catch"](function(a){d("WALogger").ERROR(s())})}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;d("WALogger").DEV(o());b=(yield (b=x())==null?void 0:b.metadataStore.getOffset());if(b==null){d("WALogger").ERROR(n());return}b=(yield (b=x())==null?void 0:b.metadataStore.getSecret());if(b==null){d("WALogger").ERROR(m());return}b=(yield (b=x())==null?void 0:b.eventUploader.uploadEvents(a));d("WALogger").DEV(l(),b)});return C.apply(this,arguments)}function D(a){var c=d("WATimeUtils").unixTime(),e=c-c%86400;e=e+a;e=e-c;e<0&&(e+=d("WATimeUtils").DAY_SECONDS);d("WALogger").DEV(r(),e);self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b;yield (b=x())==null?void 0:b.eventUploader.uploadEvents();D(a)}),e*1e3)}function E(){if(!c("gkx")("26258"))return x()}function F(){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield x());a=(yield a==null?void 0:a.metadataStore.getSecret());if(a==null){d("WALogger").WARN(k()).sendLogs("ctl-secret-unset");return null}return a});return G.apply(this,arguments)}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield F());if(c==null){d("WALogger").WARN(j());return void 0}b=d("WAWebChatThreadLoggingUtils").getThreadDs((b=b)!=null?b:d("WATimeUtils").unixTime());return d("WAWebChatThreadLoggingUtils").generateThreadID(c,a,b)});return I.apply(this,arguments)}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield F());if(b==null){d("WALogger").WARN(i()).sendLogs("ctwa-labels-thread-id-hmac-error");return null}return d("WAWebChatThreadLoggingUtils").generateThreadIDHMAC(b,a)});return K.apply(this,arguments)}g.initChatThreadLogging=a;g.setThreadDsTimeframeOffset=e;g.setThreadIdUserSecret=f;g.handleActivitiesForChatThreadLogging=A;g.uploadChatThreadLoggingEvents=B;g.getChatThreadLoggingStateDebug=E;g.getChatThreadID=H;g.getChatThreadIDHMAC=J}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("WAWebPromiseQueue",["Promise","WALogger","WAPromiseQueue","WAWebABProps","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseQueue: wait called more than 10 times"]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var e=c.prototype;e.wait=function(){return!d("WAWebABProps").getABPropConfigValue("web_promise_queue_wait_mutation_bug_fix")?a.prototype.wait.call(this):this.waitUntilResolved()};e.waitUntilResolved=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=this;c===void 0&&(c=0);if(c>9){d("WALogger").ERROR(i()).sendLogs("promise_queue_long_wait_time");return}var f=a.prototype.wait.call(this);return new(h||(h=b("Promise")))(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,d){try{yield f,f!==a.prototype.wait.call(e)&&(yield e.waitUntilResolved(c+1)),b()}catch(a){d(a)}});return function(a,b){return d.apply(this,arguments)}}())});function e(a){return c.apply(this,arguments)}return e}();return c}(d("WAPromiseQueue").PromiseQueue);g.PromiseQueue=a}),98);
__d("WAWebSchemaChatThreadLoggingPendingEvents",["WAWebChatThreadLoggingBoolFlagFields","WAWebChatThreadLoggingCountFields","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="chat-thread-logging-pending-events";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add(h).version(d("WAWebModelStorageVersions").addChatThreadLoggingTable(),[e(["chatId","startTs"]),b("chatId"),b("startTs"),c("msgsSent"),c("msgsReceived"),c("msgsRead"),c("viewOnceMsgsSent"),c("viewOnceMsgsReceived"),c("viewOnceMessagesOpened"),c("callOffersSent"),c("callOffersReceived"),c("totalCallDuration"),c("commerceMsgsSent"),c("commerceMsgsReceived"),c("pdpInquiriesSent"),c("reactionsSent"),c("reactionsReceived"),c("forwardMessagesSent"),c("forwardMessagesReceived"),c("editedMsgsSent"),c("botMessagesSent"),c("botMessagesReceived"),c("botMessagesEdited"),c("eventCreationMessagesSent"),c("eventCreationMessagesReceived"),c("eventResponseMessagesSent"),c("eventResponseMessagesReceived")].concat([].concat(d("WAWebChatThreadLoggingCountFields").COUNT_FIELD_NAMES,d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELD_NAMES).map(function(a){return c(a)}))).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getChatThreadLoggingPendingEventsTable=b}),98);
__d("WAWebApiChatThreadLoggingPendingEvents",["WAWebChatThreadLoggingBoolFlagFields","WAWebChatThreadLoggingCountFields","WAWebPromiseQueue","WAWebSchemaChatThreadLoggingPendingEvents","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=Object.freeze({msgsSent:0,msgsReceived:0,msgsRead:0,viewOnceMsgsSent:0,viewOnceMsgsReceived:0,viewOnceMessagesOpened:0,callOffersSent:0,callOffersReceived:0,totalCallDuration:0,commerceMsgsSent:0,commerceMsgsReceived:0,pdpInquiriesSent:0,reactionsSent:0,reactionsReceived:0,forwardMessagesSent:0,forwardMessagesReceived:0,editedMsgsSent:0,botMessagesSent:0,botMessagesReceived:0,botMessagesEdited:0,eventCreationMessagesSent:0,eventCreationMessagesReceived:0,eventResponseMessagesSent:0,eventResponseMessagesReceived:0}),i=Object.freeze(babelHelpers["extends"]({},d("WAWebChatThreadLoggingCountFields").COUNT_FIELDS,d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELDS,h)),j=new(d("WAWebPromiseQueue").PromiseQueue)();function a(a){return j.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebSchemaChatThreadLoggingPendingEvents").getChatThreadLoggingPendingEventsTable().bulkGet(a.map(function(a){var b=a.chatId;a=a.startTs;return[b,a]})));b=b.map(function(b,c){var e=a[c],f=k(e.chatId,e.startTs,b);d("WAWebChatThreadLoggingCountFields").COUNT_FIELD_NAMES.forEach(function(a){f[a]+=e[a]});d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELD_NAMES.forEach(function(a){f[a]=e[a]});f.msgsSent+=e.addMsgsSent;f.msgsReceived+=e.addMsgsReceived;f.msgsRead+=e.addMsgsRead;f.viewOnceMsgsSent+=e.addViewOnceMsgsSent;f.viewOnceMsgsReceived+=e.addViewOnceMsgsReceived;f.viewOnceMessagesOpened+=e.addViewOnceMsgsOpened;f.callOffersSent+=e.addCallOffersSent;f.callOffersReceived+=e.addCallOffersReceived;f.totalCallDuration+=e.addTotalCallDuration;f.commerceMsgsSent+=e.addCommerceMsgsSent;f.commerceMsgsReceived+=e.addCommerceMsgsReceived;f.pdpInquiriesSent+=e.addPdpInquiriesSent;f.reactionsSent+=e.addReactionsSent;f.reactionsReceived+=e.addReactionsReceived;f.forwardMessagesSent+=e.addForwardMessagesSent;f.forwardMessagesReceived+=e.addForwardMessagesReceived;f.editedMsgsSent+=e.addEditedMsgsSent;f.botMessagesSent+=e.addBotMessagesSent;f.botMessagesReceived+=e.addBotMessagesReceived;f.botMessagesEdited+=e.addBotMessagesEdited;f.eventCreationMessagesSent+=e.addEventCreationMessagesSent;f.eventCreationMessagesReceived+=e.addEventCreationMessagesReceived;f.eventResponseMessagesSent+=e.addEventResponseMessagesSent;f.eventResponseMessagesReceived+=e.addEventResponseMessagesReceived;return f});return d("WAWebSchemaChatThreadLoggingPendingEvents").getChatThreadLoggingPendingEventsTable().bulkCreateOrReplace(b)}))}function k(a,b,c){if(c==null)return babelHelpers["extends"]({chatId:a,startTs:b},i);d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELD_NAMES.forEach(function(a){c[a]==null&&(c[a]=i[a])});d("WAWebChatThreadLoggingCountFields").COUNT_FIELD_NAMES.forEach(function(a){c[a]==null&&(c[a]=i[a])});Object.keys(h).forEach(function(a){c[a]==null&&(c[a]=i[a])});return c}function c(a,b){return d("WAWebSchemaChatThreadLoggingPendingEvents").getChatThreadLoggingPendingEventsTable().get([a,b])}function e(a){return d("WAWebSchemaChatThreadLoggingPendingEvents").getChatThreadLoggingPendingEventsTable().lessThan(["startTs"],a,{inclusive:!0})}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaChatThreadLoggingPendingEvents").getChatThreadLoggingPendingEventsTable().bulkDeleteRange(["startTs"],0,a+1));return a});return l.apply(this,arguments)}g.createOrUpdateChatEvents=a;g.getChatEvent=c;g.getBeforeInclusive=e;g.deleteBeforeInclusive=f}),98);
__d("WAWebSchemaVerifiedBusinessName",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.removeColumn;a.add("verified-business-name").version(d("WAWebModelStorageVersions").verifiedBusinessNameCreateTable(),[e("id"),c("serial"),c("name"),c("isApi"),c("level"),c("actualActors"),c("hostStorage"),c("privacyModeTs")]).version(d("WAWebModelStorageVersions").verifiedBusinessNameAddPrivacyMode(),[c("privacyMode"),b("actualActors"),b("hostStorage"),b("privacyModeTs")]).version(d("WAWebModelStorageVersions").verifiedBusinessNameAddSmbColumn(),[c("isSmb")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("verified-business-name")}g.addTable=a;g.getVerifiedBusinessNameTable=b}),98);
__d("WAWebDBBulkGetIsContactABusiness",["WAWebSchemaVerifiedBusinessName"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable().bulkGet(a.map(function(a){return(a=a==null?void 0:a.user)!=null?a:""})).then(function(a){return a.map(function(a){return a!=null})})}g.bulkGetIsContactABusiness=a}),98);
__d("WAWebDBGetStarredMessagesForChat",["Promise","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebSchemaMessage"],(function(a,b,c,d,e,f,g){var h;function a(a,c,e){return(h||(h=b("Promise"))).resolve().then(function(){if(e!=null)return d("WAWebSchemaMessage").getMessageTable().get(e.toString())}).then(function(b){b=b==null?[d("WAWebDBMessageUtils").endOfChat(a),Infinity]:[b.internalId,b.isStarred];var e=[d("WAWebDBMessageUtils").beginningOfChat(a),0];return d("WAWebSchemaMessage").getMessageTable().between(["internalId","isStarred"],e,b,{lowerInclusive:!1,upperInclusive:!1,reverse:!0,limit:c}).then(function(a){return a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)})})})}g.getStarredMessagesForChat=a}),98);
__d("WAWebSchemaGroupMetadata",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({ADMIN_ADD:"admin_add",ALL_MEMBER_ADD:"all_member_add"});function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("group-metadata",function(a,b){var c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeColumn;return a.version((a=d("WAWebModelStorageVersions")).groupMetadataCreateTable(),[e("id"),c("subject"),c("subjectTime"),c("creation"),c("owner"),c("desc"),c("descId"),c("descTime"),c("descOwner"),c("restrict"),c("announce"),c("a_v_id"),c("noFrequentlyForwarded"),c("ephemeralDuration"),c("membershipApprovalMode"),c("size"),c("support"),c("suspended"),c("terminated"),c("notAddedByContact"),c("addedBy"),c("parentGroup"),c("subgroups"),c("isParentGroup"),c("isParentGroupClosed"),c("defaultSubgroup"),c("generalSubgroup"),c("growthLockExpiration"),c("growthLockType"),c("lastActivityTimestamp"),c("lastSeenActivityTimestamp"),c("isLidAddressingMode"),c("reportToAdminMode"),c("lastReportToAdminTimestamp"),c("allowNonAdminSubGroupCreation"),c("memberAddMode"),c("generalChatAutoAddDisabled"),c("unreadMentionMapDB"),c("pendingUnreadMentionCountDB"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("hasCapi"),c("hiddenSubgroup"),c("lastCommunityPollTimestamp")]).version(a.migrateSubgroupsArray(),[b("subgroups"),c("unjoinedSubgroups")]).version(a.removeUnjoinedSubgroups(),[b("unjoinedSubgroups")]).version(a.removeSpamColumnsInGroupMetadata(),[b("notAddedByContact"),b("addedBy")]).version(a.addCommunityAdminPromotionColumns(),[c("displayCadminPromotion")]).version(a.renameCommunityAdminPromotionColumns(),[b("displayCadminPromotion"),c("acknowledgedCadminPromotion")]).version(a.removeCommunityAdminPromotionColumns(),[b("acknowledgedCadminPromotion")]).version(a.addIncognitoGroupMetadataColumn(),[c("incognito")]).version(a.groupMetadataAddParentIndex(),[f("parentGroup")]).version(a.addUnreadMentionMetadataColumn(),[c("unreadMentionMetadata")]).version(a.removeUnreadMentionMetadataColumn(),[b("unreadMentionMetadata")]).version(a.addEphemeralityIndexToGroupMetadataTable(),[f("ephemeralDuration")]).view(function(a){return a}).commit()})}function c(){return d("WAWebModelStorageUtils").getStorage().table("group-metadata")}g.MemberAddMode=e;g.addTable=a;g.getGroupMetadataTable=c}),98);
__d("WAWebDBGroupsGroupMetadata",["Promise","WABatcher","WALogger","WAWebABProps","WAWebModelStorageUtils","WAWebSchemaGroupMetadata","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["persistGroupMetadataBatched: persisting "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["persistGroupMetadataBatched: aggregating "," changes"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.groupInfos;yield d("WAWebModelStorageUtils").getStorage().lock(["group-metadata"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=(yield b.bulkGet(c.map(function(a){return a.id.toString()})));a=c.map(function(a,b){var c;b=e[b];var f={subject:a.subject,subjectTime:a.subjectTime||0},g={announce:a.announce,a_v_id:a.a_v_id||0};c={desc:a.desc,descId:a.descId,descOwner:(c=a.descOwner)==null?void 0:c.toString(),descTime:a.descTime||0};if(b){var h=b.subjectTime||0,i=b.a_v_id||0,j=b.descTime||0;h>f.subjectTime&&(f={subject:b.subject,subjectTime:h});i>g.a_v_id&&(g={announce:b.announce,a_v_id:i});j>c.descTime&&(c={desc:b.desc,descId:b.descId,descOwner:b.descOwner,descTime:j})}d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")?h={ephemeralDuration:a.ephemeralDuration||0,disappearingModeTrigger:a.disappearingModeTrigger,disappearingModeInitiatedByMe:a.disappearingModeInitiatedByMe}:h={ephemeralDuration:a.ephemeralDuration||0};return babelHelpers["extends"]({id:a.id.toString(),creation:a.creation,owner:(i=a.owner)==null?void 0:i.toString(),restrict:a.restrict,noFrequentlyForwarded:a.noFrequentlyForwarded,membershipApprovalMode:a.membershipApprovalMode,memberAddMode:a.memberAddMode,growthLockExpiration:a.growthLockExpiration,growthLockType:a.growthLockType,size:a.size||0,support:(j=a.support)!=null?j:!1,suspended:(i=a.suspended)!=null?i:!1,terminated:(j=a.terminated)!=null?j:!1,parentGroup:(i=a.parentGroup)==null?void 0:i.toString(),isParentGroup:a.isParentGroup,isParentGroupClosed:a.isParentGroupClosed,defaultSubgroup:a.defaultSubgroup,generalSubgroup:a.generalSubgroup,lastActivityTimestamp:(j=b==null?void 0:b.lastActivityTimestamp)!=null?j:0,lastSeenActivityTimestamp:(i=b==null?void 0:b.lastSeenActivityTimestamp)!=null?i:0,incognito:a.incognito,isLidAddressingMode:a.isLidAddressingMode,reportToAdminMode:(j=a.reportToAdminMode)!=null?j:!1,lastReportToAdminTimestamp:b==null?void 0:b.lastReportToAdminTimestamp,allowNonAdminSubGroupCreation:a.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:a.generalChatAutoAddDisabled,hasCapi:a.hasCapi===!0,hiddenSubgroup:a.hiddenSubgroup,lastCommunityPollTimestamp:b==null?void 0:b.lastCommunityPollTimestamp},f,c,g,h)});return b.bulkCreateOrMerge(a)});return function(a){return e.apply(this,arguments)}}())});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.groupWid;var b=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(String(a)));return!b?null:{id:a,owner:b.owner==null?null:d("WAWebWidFactory").createWid(b.owner),creation:b.creation,desc:(a=b.desc)!=null?a:void 0,descId:(a=b.descId)!=null?a:void 0,descOwner:b.descOwner==null?null:d("WAWebWidFactory").createWid(b.descOwner),descTime:(a=b.descTime)!=null?a:void 0,restrict:b.restrict||!1,announce:b.announce||!1,noFrequentlyForwarded:b.noFrequentlyForwarded||!1,ephemeralDuration:b.ephemeralDuration||0,membershipApprovalMode:(a=b.membershipApprovalMode)!=null?a:!1,memberAddMode:b.memberAddMode,subject:b.subject,support:b.support===!0,lastActivityTimestamp:(a=b.lastActivityTimestamp)!=null?a:0,lastSeenActivityTimestamp:(a=b.lastSeenActivityTimestamp)!=null?a:0,lastReportToAdminTimestamp:(a=b.lastReportToAdminTimestamp)!=null?a:null,incognito:b.incognito,isLidAddressingMode:b.isLidAddressingMode,allowNonAdminSubGroupCreation:(a=b.allowNonAdminSubGroupCreation)!=null?a:!1,generalChatAutoAddDisabled:(a=b.generalChatAutoAddDisabled)!=null?a:!1,hasCapi:b.hasCapi===!0,lastCommunityPollTimestamp:(a=b.lastCommunityPollTimestamp)!=null?a:0}});return l.apply(this,arguments)}var m=function(){var a=3e3;return d("WABatcher").batch({delayMs:a},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(j(),a.length);b=b();d("WALogger").DEV(i(),b.length);yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkCreateOrMerge(b);return a.map(function(a){return void 0});function b(){return Array.from(a.reduce(function(a,b){var c;a.set(b.id,babelHelpers["extends"]({},(c=a.get(b.id))!=null?c:{},b));return a},new Map()).values())}});return function(b){return a.apply(this,arguments)}}())}();function e(a,b,c){c===void 0&&(c=!1);return c?m(babelHelpers["extends"]({id:a.toString()},b)):d("WAWebSchemaGroupMetadata").getGroupMetadataTable().createOrMerge(a.toString(),babelHelpers["extends"]({id:a.toString()},b))}function f(a){return d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(a.toString())}function n(a){return a.length===0?(h||(h=b("Promise"))).resolve([]):d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkGet(a.map(function(a){return a==null?"":a.toString()}))}g.updateGroupMetadataTable=a;g.getGroupMetadataUNSAFE=c;g.persistGroupMetadata=e;g.getGroupMetadata=f;g.bulkGetGroupMetadata=n}),98);
__d("WAWebSchemaBusinessProfile",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("business-profile").version(d("WAWebModelStorageVersions").businessProfileCreateTable(),[b("id"),c("commandsDescription"),c("commands"),c("prompts"),c("automatedType"),c("welcomeMsgProtocolMode")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("business-profile")}g.addTable=a;g.getBusinessProfileTable=b}),98);
__d("WAWebChatThreadLoggingEventStore",["Promise","WAJids","WALogger","WAShiftTimer","WAWebABProps","WAWebApiChat","WAWebApiChatThreadLoggingPendingEvents","WAWebApiContact","WAWebBotTypes","WAWebChatThreadLoggingBoolFlagFields","WAWebChatThreadLoggingCountFields","WAWebChatThreadLoggingUtils","WAWebDBBulkGetIsContactABusiness","WAWebDBGetStarredMessagesForChat","WAWebDBGroupsGroupMetadata","WAWebGroupType","WAWebLidAwareContactsDB","WAWebSchemaBusinessProfile","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebUsernameTypes","WAWebWamEnumChatOriginsType","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatThreadLoggingEventStoreImpl: flushing cache with "," updates"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Passed event store info type not valid: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatThreadLoggingEventStoreImpl: lastUploadedStartTs=",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatThreadLoggingEventStoreImpl: handleMessages: offset unset."]);l=function(){return a};return a}var m=5;a=function(){function a(a,b){var c=this;this.metadataStore=a;this.$1=new Map();this.$2=(a=b)!=null?a:m;this.$3=new(d("WAShiftTimer").ShiftTimer)(function(){c.$4()})}var e=a.prototype;e.handleMessages=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=(yield this.metadataStore.getOffset());if(c==null){d("WALogger").LOG(l());return}var e=(yield this.metadataStore.getLastUploadedStartTs());d("WALogger").LOG(k(),e);a.forEach(function(a){var f;if(!d("WAWebChatThreadLoggingUtils").shouldUpdateChatEvent(c,a.ts,e))return;var g=d("WAWebChatThreadLoggingUtils").computeStartTs(c,a.ts),h=a.chatId.toString({legacy:!0}),i=h+"_"+String(g),k=b.$1.get(i);f=(f=k)!=null?f:babelHelpers["extends"]({},d("WAWebChatThreadLoggingCountFields").COUNT_FIELDS,d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELDS,{startTs:g,chatId:h,addMsgsSent:0,addMsgsReceived:0,addMsgsRead:0,addViewOnceMsgsSent:0,addViewOnceMsgsReceived:0,addViewOnceMsgsOpened:0,addCallOffersSent:0,addCallOffersReceived:0,addTotalCallDuration:0,addCommerceMsgsSent:0,addCommerceMsgsReceived:0,addPdpInquiriesSent:0,addReactionsSent:0,addReactionsReceived:0,addForwardMessagesSent:0,addForwardMessagesReceived:0,addEditedMsgsSent:0,addBotMessagesSent:0,addBotMessagesReceived:0,addBotMessagesEdited:0,addEventCreationMessagesSent:0,addEventCreationMessagesReceived:0,addEventResponseMessagesSent:0,addEventResponseMessagesReceived:0});k==null&&b.$1.set(i,f);g=d("WAWebChatThreadLoggingCountFields").toMaybeCountActionType(a.activityType);h=d("WAWebChatThreadLoggingBoolFlagFields").toMaybeBoolFlagActionType(a.activityType);if(g!=null)f[g]+=1;else if(h!=null)f[h]=a.boolValue===void 0?!0:a.boolValue;else switch(a.activityType){case"msgSend":f.addMsgsSent+=1;a.isViewOnce&&(f.addViewOnceMsgsSent+=1);a.isCommerceMessage===!0&&(f.addCommerceMsgsSent+=1);a.isPdpInquiry===!0&&(f.addPdpInquiriesSent+=1);a.isReply&&(f.repliesSent+=1);a.isReaction&&(f.addReactionsSent+=1);a.isForwarded&&(f.addForwardMessagesSent+=1);a.isEdit&&(f.addEditedMsgsSent+=1);a.isBot&&(f.addBotMessagesSent+=1);a.isEventCreation&&(f.addEventCreationMessagesSent+=1);a.isEventResponse&&(f.addEventResponseMessagesSent+=1);break;case"msgReceive":f.addMsgsReceived+=1;a.isViewOnce&&(f.addViewOnceMsgsReceived+=1);a.isCommerceMessage===!0&&(f.addCommerceMsgsReceived+=1);a.isReaction&&(f.addReactionsReceived+=1);a.isForwarded&&(f.addForwardMessagesReceived+=1);a.isBot&&(a.isEdit?f.addBotMessagesEdited+=1:f.addBotMessagesReceived+=1);a.isEventCreation&&(f.addEventCreationMessagesReceived+=1);a.isEventResponse&&(f.addEventResponseMessagesReceived+=1);break;case"msgRead":f.addMsgsRead+=a.readCount;break;case"viewOnceOpen":f.addViewOnceMsgsOpened+=1;break;case"voipCall":a.outgoing?f.addCallOffersSent+=1:f.addCallOffersReceived+=1;f.addTotalCallDuration+=a.durationInSeconds;break;default:d("WALogger").WARN(j(),a.activityType)}});yield this.$5()});function c(b){return a.apply(this,arguments)}return c}();e.$5=function(){this.$3.onOrBefore(this.$2*1e3)};e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Array.from(this.$1.values());d("WALogger").DEV(i(),a.length).devConsole({updates:a});this.$1.clear();yield d("WAWebApiChatThreadLoggingPendingEvents").createOrUpdateChatEvents(a)});function c(){return a.apply(this,arguments)}return c}();e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=d("WAWebApiChat").bulkGetChats(a.map(function(a){return d("WAWebWidFactory").createWid(a.chatId)})),f=e.then(function(a){return t(a)}),g=e.then(function(a){return u(a)}),i=e.then(function(a){return v(a)}),j=e.then(function(a){return x(a)}),k=e.then(function(a){return y(a)});w=e.then(w);e=(yield (h||(h=b("Promise"))).all([e,f,g,i,w,j,k]));var l=e[0],m=e[1],n=e[2],o=e[3],p=e[4],q=e[5],r=e[6],s=d("WAWebUserPrefsMeUser").getMeUser()!=null?yield d("WAWebChatThreadLoggingUtils").getMeHasUsername():!1;return h.all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e,f,g,h,i,j=l[b],k=c("WAWebWid").isGroup(a.chatId),t=o[b];e=d("WAWebBotTypes").BizBotAutomatedType.cast((e=q[b])==null?void 0:e.automatedType);f=k?{isAGroup:k,groupSize:(f=(f=p[b])==null?void 0:(f=f.participants)==null?void 0:f.length)!=null?f:1,groupType:t==null?d("WAWebGroupType").GroupType.DEFAULT:d("WAWebGroupType").getGroupTypeFromGroupMetadata(t)}:{isAGroup:k,isAContact:yield d("WAWebApiContact").isAddressBookContact(a.chatId),automatedType:e};k=d("WAWebWidFactory").createWid(a.chatId);e=((e=j==null?void 0:j.pin)!=null?e:0)>0;g=(g=j==null?void 0:j.archive)!=null?g:!1;var u=m[b];h=(h=j==null?void 0:j.unreadCount)!=null?h:0;i=((i=j==null?void 0:j.muteExpiration)!=null?i:0)!==0;var v=n[b]?yield d("WAWebChatThreadLoggingUtils").getBizCatalogType(k):null,w=c("WAWebWid").isLid(a.chatId)||(t==null?void 0:t.defaultSubgroup)===!0,x=d("WAWebUserPrefsMeUser").isMeAccount(k),y=k.isBot(),z=d("WAWebChatThreadLoggingUtils").getWamDisappearingModeInitiatedByMe(j==null?void 0:j.disappearingModeInitiatedByMe),A=d("WAWebChatThreadLoggingUtils").getWamDisappearingModeTrigger(j==null?void 0:j.disappearingModeTrigger);d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")&&c("WAWebWid").isGroup(j==null?void 0:j.id)&&(z=d("WAWebChatThreadLoggingUtils").getWamDisappearingModeInitiatedByMe(t==null?void 0:t.disappearingModeInitiatedByMe),A=d("WAWebChatThreadLoggingUtils").getWamDisappearingModeTriggerGroups(t==null?void 0:t.disappearingModeTrigger));t=s;var B=null;b=r[b];if(b!=null){var C=d("WAWebWidFactory").createWid(b.id).isLid()?"lid":"pn";B=d("WAWebChatThreadLoggingUtils").getOppositeVisibleIdentificationType(b,C)}b=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;k.isLid()&&(b=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA);if(j==null?void 0:j.lidOriginType)switch(j==null?void 0:j.lidOriginType){case d("WAWebUsernameTypes").LidOriginType.CTWA:b=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA;break;case d("WAWebUsernameTypes").LidOriginType.USERNAME:b=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_USERNAME;break;case d("WAWebUsernameTypes").LidOriginType.GENERAL:b=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;break}return babelHelpers["extends"]({},a,{isPinned:e,isArchived:g,contactInfo:f,messagesStarred:u,messagesUnread:h,isMuted:i,bizCatalogType:v,isPnhEnabledChat:w,isMessageYourself:x,isUserAgent:y,ephemeralityInitiator:z,ephemeralityTriggerAction:A,hasUsername:t,oppositeVisibleIdentification:B,chatOrigins:b})});return function(b,c){return a.apply(this,arguments)}}()));function t(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return a==null?0:(yield d("WAWebDBGetStarredMessagesForChat").getStarredMessagesForChat(d("WAWebWidFactory").createWid(a.id),Number.MAX_SAFE_INTEGER)).length});return function(b){return a.apply(this,arguments)}}()))}function u(a){return d("WAWebDBBulkGetIsContactABusiness").bulkGetIsContactABusiness(a.map(function(a){return a==null?null:d("WAWebWidFactory").createWid(a.id)}))}function v(a){return d("WAWebDBGroupsGroupMetadata").bulkGetGroupMetadata(a.map(function(a){return a==null?null:d("WAWebWidFactory").createWid(a.id)}))}function w(a){return d("WAWebSchemaParticipant").getParticipantTable().bulkGet(a.map(function(a){return a==null?"":d("WAWebWidFactory").createWid(a.id).toString()}))}function x(a){return d("WAWebSchemaBusinessProfile").getBusinessProfileTable().bulkGet(a.map(function(a){return a==null?"":d("WAWebWidFactory").createWid(a.id).toString()}))}function y(a){return c("WAWebLidAwareContactsDB").bulkGet(a.map(function(a){if(a==null)return null;a=d("WAWebWidFactory").createWid(a.id);if(!a.isUserNotPSA())return null;if(a.isLid()){var b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a));if(b==null)return a.toString()}return d("WAJids").toPhoneUserJid(a.user.toString())}).filter(Boolean))}});function e(b){return a.apply(this,arguments)}return e}();e.getEvent=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){this.$1.size>0&&(yield this.$4());a=(yield d("WAWebApiChatThreadLoggingPendingEvents").getChatEvent(a,b));return a==null?null:(yield this.$6([a]))[0]});function c(b,c){return a.apply(this,arguments)}return c}();e.getBeforeInclusive=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.$1.size>0&&(yield this.$4());return this.$6(yield d("WAWebApiChatThreadLoggingPendingEvents").getBeforeInclusive(a))});function c(b){return a.apply(this,arguments)}return c}();e.deleteBeforeInclusive=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){this.$1.size>0&&(yield this.$4());return d("WAWebApiChatThreadLoggingPendingEvents").deleteBeforeInclusive(a)});function c(b){return a.apply(this,arguments)}return c}();return a}();g.ChatThreadLoggingEventStoreImpl=a}),98);
__d("WAWebDBMarkAsReadForTable",["WAWebModelStorageUtils","WAWebMsgKey","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,e){return d("WAWebModelStorageUtils").getStorage().lock([a],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.anyOf(["msgKey"],e));b.length!==0&&(yield a.bulkCreateOrReplace(b.map(function(a){return babelHelpers["extends"]({},a,{read:!0})})));return b.map(function(a){a=a.msgKey;return c("WAWebMsgKey").from(a)})});return function(b){return a.apply(this,arguments)}}())}g.markAsReadForTable=a}),98);
__d("WAWebDBUpdateAddOnAcksForTable",["WANullthrows","WAWebModelStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,e,f){return d("WAWebModelStorageUtils").getStorage().lock([a],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=[],d=new Map();for(var g of e){var h=g.msgKey.toString();b.push(h);d.set(g.msgKey.toString(),g)}h=(yield a.anyOf(["msgKey"],b,{shouldDecrypt:!1}));g=[];b=[];for(h of h){var i=c("WANullthrows")(d.get(h.msgKey));if(!f(h,i))continue;var j=babelHelpers["extends"]({},h,{ack:i.ack});g.push(j);b.push(i)}yield a.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(g);return b});return function(b){return a.apply(this,arguments)}}())}g.updateAddOnAcksForTable=a}),98);
__d("WAWebMessageAddOnType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Reaction:"reaction",ReactionEnc:"reaction_enc",PollVote:"poll_vote",KeepInChat:"keep_in_chat",MessageEdit:"message_edit",PinMessage:"pin_message",Comment:"comment",Unknown:"unknown"});f.MessageAddOnType=a}),66);
__d("WAWebDBCommentAddOnProvider",["Promise","WAWebDBMarkAsReadForTable","WAWebDBUpdateAddOnAcksForTable","WAWebMessageAddOnType","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a={type:d("WAWebMessageAddOnType").MessageAddOnType.Comment,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.COMMENT},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.COMMENT},canRenderInUi:function(){return!0},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){return(h||(h=b("Promise"))).resolve()});function c(b,c){return a.apply(this,arguments)}return c}(),updateAcks:function(a,b){return d("WAWebDBUpdateAddOnAcksForTable").updateAddOnAcksForTable("comments",a,b)},markAsRead:function(a){return d("WAWebDBMarkAsReadForTable").markAsReadForTable("comments",a.map(String))}};g.commentsAddOnProvider=a}),98);
__d("WAWebEphemeralKeepInChatUtils",["WAWebBackendApi","WAWebEphemeralConstants","WAWebMsgGetters","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){if(a!=null&&a===d("WAWebProtobufsE2E.pb").KeepType.KEEP_FOR_ALL)return d("WAWebEphemeralConstants").KeepInChatState.KEPT;else if(a!=null&&a===d("WAWebProtobufsE2E.pb").KeepType.UNDO_KEEP_FOR_ALL)return d("WAWebEphemeralConstants").KeepInChatState.UNKEPT;return null}function b(a){return a===d("WAWebEphemeralConstants").KeepInChatState.KEPT}function h(a){return a===d("WAWebEphemeralConstants").KeepInChatState.UNKEPT}function e(a){var b,c;a.forEach(function(a){(!b||i(a,b)===1)&&(c=b,b=a)});c!=null&&d("WAWebBackendApi").frontendFireAndForget("logTieBreakIgnoredKicWam",{keepInChatMessage:c});return b}function i(a,b){if(a.senderTimestampMs==null)return-1;if(b.senderTimestampMs==null)return 1;if(a.senderTimestampMs>b.senderTimestampMs)return 1;else if(a.senderTimestampMs===b.senderTimestampMs&&a.id.id>b.id.id)return 1;return-1}function j(a){if(a.kicKey!=null){var b,c=d("WAWebMsgGetters").getIsGroupMsg(a);if(((b=a.kicKey)==null?void 0:b.fromMe)===!0)return d("WAWebUserPrefsMeUser").getMaybeMeUser();else if(c&&((b=a.kicKey)==null?void 0:b.participant)!=null)return d("WAWebWidFactory").toUserWid(a.kicKey.participant);else if(!c&&((b=a.kicKey)==null?void 0:b.remote)!=null)return d("WAWebWidFactory").toUserWid(a.kicKey.remote)}}function f(a){return h(a.kicState)&&c("WAWebWid").equals(j(a),d("WAWebMsgGetters").getSender(a))}g.parseKeepTypeToKicState=a;g.isKept=b;g.runKeepInChatTieBreaker=e;g.compareKeepInChatMessages=i;g.kicSenderSuperPowerActive=f}),98);
__d("WAWebMsgDataFromModel",[],(function(a,b,c,d,e,f){function g(a){a=a.toJSON();return babelHelpers["extends"]({},a,{paymentNoteMsg:a.paymentNoteMsg?g(a.paymentNoteMsg):void 0})}f.msgDataFromMsgModel=g}),66);
__d("WAWebDBKeepInChatAddOnProvider",["WALogger","WAWebBackendApi","WAWebEphemeralKeepInChatUtils","WAWebMessageAddOnType","WAWebMsgDataFromModel","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["keepInChatAddOnProvider: found orphan"]);h=function(){return a};return a}a={type:d("WAWebMessageAddOnType").MessageAddOnType.KeepInChat,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT},canRenderInUi:function(){return!0},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.map(function(a){return a.parsedMsgPayload});b=d("WAWebEphemeralKeepInChatUtils").runKeepInChatTieBreaker(a);d("WALogger").LOG(h()).devConsole({winningOrphanMsg:b});if(b!=null){a=d("WAWebMsgDataFromModel").msgDataFromMsgModel(b);yield d("WAWebBackendApi").frontendSendAndReceive("processKeepInChatMessage",{keepInChatMessage:a,allowNotification:!1})}});function c(b,c){return a.apply(this,arguments)}return c}()};g.keepInChatAddOnProvider=a}),98);
__d("WAWebDBReactionsAddOnProvider",["WAWebDBMarkAsReadForTable","WAWebDBUpdateAddOnAcksForTable","WAWebMessageAddOnType","WAWebMsgType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a={type:d("WAWebMessageAddOnType").MessageAddOnType.Reaction,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.REACTION},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.REACTION},canRenderInUi:function(){return!0},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw c("err")("Reactions not yet integrated into orphan framework")});function d(){return a.apply(this,arguments)}return d}(),updateAcks:function(a,b){return d("WAWebDBUpdateAddOnAcksForTable").updateAddOnAcksForTable("reactions",a,b)},markAsRead:function(a){return d("WAWebDBMarkAsReadForTable").markAsReadForTable("reactions",a.map(String))}};g.reactionsAddOnProvider=a}),98);
__d("WAWebDBReactionsEncAddOnProvider",["WAWebMessageAddOnType","WAWebMsgType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a={type:d("WAWebMessageAddOnType").MessageAddOnType.ReactionEnc,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.REACTION_ENC},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.type===d("WAWebMsgType").MSG_TYPE.REACTION_ENC},canRenderInUi:function(){return!0},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){throw c("err")("Reactions provider is deprecated")});function d(){return a.apply(this,arguments)}return d}()};g.reactionsEncAddOnProvider=a}),98);
__d("WAWebDBAddOnProviders",["WAWebDBCommentAddOnProvider","WAWebDBKeepInChatAddOnProvider","WAWebDBMessageEditAddOnProvider","WAWebDBPinInChatAddOnProvider","WAWebDBPollVotesAddOnProvider","WAWebDBReactionsAddOnProvider","WAWebDBReactionsEncAddOnProvider"],(function(a,b,c,d,e,f,g){var h=[d("WAWebDBPollVotesAddOnProvider").pollVotesAddOnProvider,d("WAWebDBKeepInChatAddOnProvider").keepInChatAddOnProvider,d("WAWebDBReactionsAddOnProvider").reactionsAddOnProvider,d("WAWebDBReactionsEncAddOnProvider").reactionsEncAddOnProvider,d("WAWebDBMessageEditAddOnProvider").messageEditAddOnProvider,d("WAWebDBPinInChatAddOnProvider").pinInChatAddOnProvider,d("WAWebDBCommentAddOnProvider").commentsAddOnProvider];function a(a){var b;return(b=h.find(function(b){return b.type===a}))!=null?b:null}function b(a){return h.find(function(b){return b.matches(a)})}function c(a){return h.find(function(b){return b.matchesFutureproof(a)})}g.addOnProviders=h;g.getProviderForAddOnType=a;g.getAddOnProviderForMsg=b;g.getAddOnProviderForFutureproofMsg=c}),98);
__d("WAWebDBMapOrphansToProviders",["WAWebDBAddOnProviders"],(function(a,b,c,d,e,f,g){function a(a){var b=new Map();for(var c=0;c<a.length;c++){var e,f=a[c],g=d("WAWebDBAddOnProviders").getProviderForAddOnType(f.type);if(!g)continue;e=(e=b.get(g))!=null?e:[];e.push(f);b.set(g,e)}return b}g.mapOrphansToProviders=a}),98);
__d("WAWebMessageEditGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("message_edit_receive")||h()}function h(){return d("WAWebABProps").getABPropConfigValue("message_edit_send")}function b(){return d("WAWebABProps").getABPropConfigValue("caption_edit_receive")||i()}function i(){return d("WAWebABProps").getABPropConfigValue("caption_edit_send")}function c(){return d("WAWebABProps").getABPropConfigValue("web_message_edit_processing_reply_messages")}function e(){return d("WAWebABProps").getABPropConfigValue("cag_message_edit_send")}function f(){return d("WAWebABProps").getABPropConfigValue("cag_message_edit_receive")}g.receiveTextEditEnabled=a;g.sendTextEditEnabled=h;g.receiveCaptionEditEnabled=b;g.sendCaptionEditEnabled=i;g.processReplyMessagesEnabled=c;g.sendCagMsgEditEnabled=e;g.receiveCagMsgEditEnabled=f}),98);
__d("WAWebMessageEditUtils",["$InternalEnum","WATimeUtils","WAWebABProps","WAWebMsgType","WAWebWid"],(function(a,b,c,d,e,f,g){var h=30*24*60*60;function i(a){if(a)return h;a=d("WAWebABProps").getABPropConfigValue("message_edit_window_duration_seconds");return a==null||a<=0?20*60:a}function j(a){if(a)return h;a=d("WAWebABProps").getABPropConfigValue("message_edit_client_entry_point_limit_seconds");return a==null||a<=0?15*60:a}var k=b("$InternalEnum").Mirrored(["TextEdit","CaptionEdit","EventEdit"]);function a(a){switch(a){case d("WAWebMsgType").MSG_TYPE.CHAT:return k.TextEdit;case d("WAWebMsgType").MSG_TYPE.IMAGE:case d("WAWebMsgType").MSG_TYPE.VIDEO:case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return k.CaptionEdit;case d("WAWebMsgType").MSG_TYPE.EVENT_CREATION:return k.EventEdit;default:return null}}var l=[(b=d("WAWebMsgType")).MSG_TYPE.CHAT,b.MSG_TYPE.IMAGE,b.MSG_TYPE.VIDEO,b.MSG_TYPE.DOCUMENT,b.MSG_TYPE.EVENT_CREATION];function e(a){return l.includes(a)?!0:!1}function f(a){var b=a.parentTsInSeconds,e=a.editTsInSeconds;a=a.msgKey;a=c("WAWebWid").isNewsletter(a.remote);return e!=null?e<b+i(a):d("WATimeUtils").unixTime()<b+i(a)}function m(a){var b=a.parentTsInSeconds;a=a.msgKey;return d("WATimeUtils").unixTime()<b+j(c("WAWebWid").isNewsletter(a.remote))}g.getMessageEditProcessingWindowDurationSeconds=i;g.MsgEditType=k;g.getMsgEditType=a;g.msgTypeSupportsEditing=e;g.isParentWithinEditProcessingWindow=f;g.isParentWithinEditUIWindow=m}),98);
__d("WAWebDBMessageEditAddOnProvider",["WAWebDBProcessEditProtocolMsgs","WAWebMessageAddOnType","WAWebMessageEditGatingUtils","WAWebMessageEditUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a={type:d("WAWebMessageAddOnType").MessageAddOnType.MessageEdit,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.subtype==="message_edit"},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.futureproofSubtype==="message_edit"},canRenderInUi:function(a){a=a.editMsgType?d("WAWebMessageEditUtils").getMsgEditType(a.editMsgType):d("WAWebMessageEditUtils").MsgEditType.TextEdit;if(!a)return!1;switch(a){case d("WAWebMessageEditUtils").MsgEditType.TextEdit:return d("WAWebMessageEditGatingUtils").receiveTextEditEnabled();case d("WAWebMessageEditUtils").MsgEditType.CaptionEdit:return d("WAWebMessageEditGatingUtils").receiveCaptionEditEnabled();case d("WAWebMessageEditUtils").MsgEditType.EventEdit:return!1}},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs(b.map(function(a){return a.parsedMsgPayload})));b=(b=b.find(function(b){return b.parentMsg.id.equals(a.id)}))==null?void 0:b.editedMsgData;b&&Object.assign(a,b)});function c(b,c){return a.apply(this,arguments)}return c}()};g.messageEditAddOnProvider=a}),98);
__d("WAWebPinMsgGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("pinned_messages_m1_receiver")}function b(){return d("WAWebABProps").getABPropConfigValue("pinned_messages_m1_sender")}function h(){return d("WAWebABProps").getABPropConfigValue("pinned_messages_m2")}function c(){return h()?d("WAWebABProps").getABPropConfigValue("pinned_messages_m2_pin_max"):1}g.isPinnedMessagesM1ReceiverEnabled=a;g.isPinnedMessagesM1SenderEnabled=b;g.isPinnedMessagesM2Enabled=h;g.getMaxPins=c}),98);
__d("WAWebDBPinInChatAddOnProvider",["WAWebDBUpdateAddOnAcksForTable","WAWebMessageAddOnType","WAWebMsgType","WAWebPinMessageProcessor","WAWebPinMsgGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a={type:d("WAWebMessageAddOnType").MessageAddOnType.PinMessage,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE},canRenderInUi:function(){return d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled()},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.map(function(a){return a.parsedMsgPayload});yield d("WAWebPinMessageProcessor").processPinMessages(a.id.remote,b)});function c(b,c){return a.apply(this,arguments)}return c}(),updateAcks:function(a,b){return d("WAWebDBUpdateAddOnAcksForTable").updateAddOnAcksForTable("pinned-messages",a,b)}};g.pinInChatAddOnProvider=a}),98);
__d("WAWebDBPollVotesAddOnProvider",["WAWebDBMarkAsReadForTable","WAWebDBProcessPollUpdateMsgs","WAWebDBUpdateAddOnAcksForTable","WAWebMessageAddOnType","WAWebMsgType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a={type:d("WAWebMessageAddOnType").MessageAddOnType.PollVote,matches:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&a.subtype==="poll_vote"},matchesFutureproof:function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE},canRenderInUi:function(){return!0},processOrphansForNewMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=new Map();for(a of b)e.set(a.msgKey,a);a=(yield d("WAWebDBProcessPollUpdateMsgs").processPollUpdateMsgs(b.map(function(a){a=a.parsedMsgPayload;if(a.type===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&a.addonEncrypted)return a;throw c("err")("Invalid poll vote orphan type")})));return a.map(function(a){var b;b=a.read||((b=(b=e.get(a.msgKey.toString()))==null?void 0:b.read)!=null?b:!1);return a.read===b?a:babelHelpers["extends"]({},a,{read:b})})});function e(b,c){return a.apply(this,arguments)}return e}(),updateAcks:function(a,b){return d("WAWebDBUpdateAddOnAcksForTable").updateAddOnAcksForTable("poll-votes",a,b)},markAsRead:function(a){return d("WAWebDBMarkAsReadForTable").markAsReadForTable("poll-votes",a.map(String))}};g.pollVotesAddOnProvider=a}),98);
__d("WAWebDBOrphanDbSerialization",["WAWebDBMessageSerialization","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{sender:a.sender==null?null:d("WAWebWidFactory").createUserWid(a.sender),parsedMsgPayload:d("WAWebDBMessageSerialization").messageFromDbRow(a.parsedMsgPayload)})}g.orphanFromDbRow=a}),98);
__d("WAWebSchemaMessageOrphans",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeIndex;a.add("message-orphans").version(d("WAWebModelStorageVersions").messageOrphansCreateTable(),[e("msgKey"),c("parentMsgKey"),f("parentMsgKey"),c("sender"),c("parsedMsgPayload"),c("senderTimestampMs"),f("senderTimestampMs")]).version(d("WAWebModelStorageVersions").messageOrphansAddColumns(),[c("t"),f("t"),c("type"),b("senderTimestampMs"),c("read")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-orphans")}g.addTable=a;g.getMessageOrphanTable=b}),98);
__d("WAWebDBGetByParentMsgKey",["WAWebDBOrphanDbSerialization","WAWebSchemaMessageOrphans"],(function(a,b,c,d,e,f,g){function a(a){return h([a])}function h(a){return d("WAWebSchemaMessageOrphans").getMessageOrphanTable().anyOf(["parentMsgKey"],a.map(String)).then(function(a){return a.filter(Boolean).map(d("WAWebDBOrphanDbSerialization").orphanFromDbRow)})}g.getMessageOrphansByParentMsgKey=a;g.bulkGetMessageOrphansByParentMsgKey=h}),98);
__d("WAWebDBProcessOrphansForNewMsg",["Promise","WALogger","WAWebABProps","WAWebAddonProcessMsgsUtils","WAWebDBGetByParentMsgKey","WAWebDBMapOrphansToProviders","WAWebDBProcessReactionsMsgs","WAWebLidMigrationUtils","WAWebSchemaMessageOrphans","WAWebStoreMsgs","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processOrphansForNewMsg: found orphans"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=d("WAWebLidMigrationUtils").getAlternateMsgKey(a.id);d("WAWebABProps").getABPropConfigValue("should_use_lid_orphan_alternate_reaction_d61074491")?e=(yield d("WAWebDBGetByParentMsgKey").bulkGetMessageOrphansByParentMsgKey([a.id,e].filter(Boolean))):e=(yield d("WAWebDBGetByParentMsgKey").getMessageOrphansByParentMsgKey(a.id));e.length&&d("WALogger").LOG(i()).devConsole({orphans:e});e=d("WAWebAddonProcessMsgsUtils").sortAddonOrphans(e);var f=e.unifiedAddons,g=e.otherOrphans;e=e.legacyReactionAddons;g=(yield d("WAWebDBMapOrphansToProviders").mapOrphansToProviders(g));var j=[d("WAWebStoreMsgs").storeMsgs(f),d("WAWebDBProcessReactionsMsgs").processReactionMsgs(e)];for(var k of g.entries()){var l=k[0],m=k[1];j.push(l.processOrphansForNewMsg(a,m))}yield (h||(h=b("Promise"))).all(j);l=c("lodash").flatten(Array.from(g.values())).map(function(a){return a.msgKey});l=l.concat(f.map(function(a){return a.id.toString()}));e.length&&(l=l.concat(e.map(function(a){return a.id.toString()})));yield d("WAWebSchemaMessageOrphans").getMessageOrphanTable().bulkRemove(l)});return j.apply(this,arguments)}g.processOrphansForNewMsg=a}),98);
__d("WAWebDBUpdateLastAddOnPreviewChat",["WAWebApiChat"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebApiChat").bulkUpdateChatLastAddOnPreview(a)}g.updateDatabaseForLastAddOnPreview=a}),98);
__d("WAWebDBCreateLidPnMappings",["Promise","WALogger","WATimeUtils","WAWebApiContact","WAWebBackendApi","WAWebContactsDbLidMigrationUtils","WAWebIdentityChangeApi","WAWebSchemaContact_DEPRECATED","WAWebSingleSignalSession","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPnRowData failed! ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["createLidPnMappings: "," identity change notifications generated"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["lidPnCacheDirtySet: "," flushed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["flush lidPnCacheDirtySet: get dirty updates for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["flushLidPnMappingsToDb failed!"]);m=function(){return a};return a}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.mappings,e=a.flushImmediately;a=a.identityChangeHandlingEnabled;var f=(a=a)!=null?a:!0;d("WAWebBackendApi").frontendFireAndForget("bulkUpdatePhoneNumberJids",{lidPhoneNumberMappings:c.map(function(a){var b=a.lid;a=a.pn;return{lid:b.toString(),phoneNumber:a.toString()}})});var g=[],i=new Map(c.map(function(a){return[a.pn,a.lid]})),m=d("WATimeUtils").unixTime(),n=[];c.forEach(function(a){var b=a.lid,c=d("WAWebApiContact").lidPnCache.getPhoneNumber(b),h=c!=null?d("WAWebApiContact").lidPnCache.getCurrentLid(c):null;if(c==null||h!=null&&!h.equals(a.lid)){c=i.get(a.pn)===b?m:d("WATimeUtils").castToUnixTime(0);d("WAWebApiContact").lidPnCache.getCurrentLid(a.pn)!=null&&d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()&&f&&n.push(d("WAWebIdentityChangeApi").handleNewIdentity(a.pn,!e));d("WAWebApiContact").lidPnCache.add(b,{lid:b,phoneNumber:a.pn,phoneNumberCreatedAt:c});e?g.push(babelHelpers["extends"]({},a,{phoneNumberCreatedAt:c})):d("WAWebApiContact").lidPnCacheDirtySet.add(b.toString())}});if(e&&d("WAWebApiContact").lidPnCacheDirtySet.size>0){d("WALogger").LOG(l(),Array.from((a=d("WAWebApiContact")).lidPnCacheDirtySet).join(","));a.lidPnCacheDirtySet.forEach(function(a){a=d("WAWebWidFactory").createUserWid(a);var b=d("WAWebApiContact").lidPnCache.getLidEntry(a);b!=null&&g.push({lid:a,pn:d("WAWebWidFactory").toUserWid(b.phoneNumber),phoneNumberCreatedAt:d("WATimeUtils").castToUnixTime(b.phoneNumberCreatedAt)})});d("WALogger").LOG(k(),a.lidPnCacheDirtySet.size);a.lidPnCacheDirtySet.clear()}c=(h||(h=b("Promise"))).all(n).then(function(a){var b=0;for(a of a){var c;b+=(c=a==null?void 0:(c=a.notifications)==null?void 0:c.length)!=null?c:0}d("WALogger").LOG(j(),b)});if(g.length===0)return c;var o=(yield p(g.map(function(a){a=a.pn;return a.toJid()})));a=g.map(function(a){var b=a.lid,c=a.pn;a=a.phoneNumberCreatedAt;var e=o.get(c.toJid());return babelHelpers["extends"]({id:b.toString(),phoneNumber:c.toString(),phoneNumberCreatedAt:a},e?d("WAWebContactsDbLidMigrationUtils").createContactLidRowFromPnRow(b.toString(),e):null)});return h.all([c,d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkCreateOrMerge(a)])});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebSchemaContact_DEPRECATED").getContactTable().bulkGet(a));return new Map(a==null?void 0:a.map(function(a){return[(a==null?void 0:a.id)||"",a]}))}catch(a){d("WALogger").ERROR(i(),a.stack)}return new Map()});return q.apply(this,arguments)}function a(){return n({mappings:[],flushImmediately:!0})["catch"](function(a){d("WALogger").ERROR(m()).devConsole(a).sendLogs("Failed to flushLidPnMappingsToDb")})}g.createLidPnMappings=n;g.flushLidPnMappingsToDb=a}),98);
__d("WAWebDBCommunityTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SubGroupLink","SiblingGroupLink","SubGroupUnlink","SiblingGroupUnlink"]);f.CommunityLinkOperation=a}),66);
__d("WAWebSchemaUnjoinedSubgroupMetadata",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("unjoined-subgroup-metadata").version(d("WAWebModelStorageVersions").unjoinedSubgroupMetadataCreateTable(),[e("id"),c("subject"),c("subjectTime"),c("defaultSubgroup"),c("generalSubgroup"),c("parentGroup"),c("membershipApprovalMode"),c("membershipApprovalRequest"),c("hiddenSubgroup"),c("size")]).version(d("WAWebModelStorageVersions").unjoinedSubgroupParentGroupIndex(),[b("parentGroup")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("unjoined-subgroup-metadata")}g.addTable=a;g.getUnjoinedSubgroupMetadataTable=b}),98);
__d("WAWebDBCommunity",["Promise","WABatcher","WALogger","WAWebDBCommunityTypes","WAWebGroupsParticipantsApi","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebSchemaUnjoinedSubgroupMetadata","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistCommunityLink"]);i=function(){return a};return a}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i()).devConsole(a);var c=new Map(),e=new Map();a.forEach(function(a){a.subgroups.forEach(function(a){e.set(String(a.id),null)});switch(a.action){case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupLink:case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupUnlink:c.set(String(a.chatId),null);break;default:return}});(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkGet(Array.from(c.keys()))).forEach(function(a){a&&a.parentGroup!=null&&c.set(a.id,String(a.parentGroup))});(yield d("WAWebSchemaChat").getChatTable().bulkGet(Array.from(e.keys()))).forEach(function(a){a&&e.set(a.id,a)});var f=new Map(),g=new Map(),j=new Set(),k=function(a,b,c){b.forEach(function(b){var d=String(b.id),h=e.get(d);if(h!=null&&!h.isReadOnly)f.set(d,{id:d,parentGroup:c?a:void 0});else if(c){j["delete"](d);b={id:d,subject:b.subject,subjectTime:(h=b.subjectTime)!=null?h:0,parentGroup:a};h=g.get(d);h&&h.subjectTime>b.subjectTime&&(b.subject=h.subject,b.subjectTime=h.subjectTime);g.set(d,b)}else g["delete"](d),j.add(d)})};a.forEach(function(a){var b=null,e=!1;switch(a.action){case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupLink:b=c.get(String(a.chatId));e=!0;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupUnlink:b=c.get(String(a.chatId));e=!1;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupLink:b=String(a.chatId);e=!0;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupUnlink:b=String(a.chatId),e=!1}b!=null&&k(b,a.subgroups,e)});yield (h||(h=b("Promise"))).all([d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkCreateOrMerge(Array.from(f.values())),d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemove(Array.from(j)),d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(Array.from(g.keys())).then(function(a){a.forEach(function(a){if(!a)return;var b=g.get(a.id);if(!b)return;a.subjectTime!=null&&a.subjectTime>b.subjectTime&&(b.subjectTime=a.subjectTime,b.subject=a.subject)});return d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(Array.from(g.values()).map(function(a){return babelHelpers["extends"]({},a)}))})])});return k.apply(this,arguments)}var l=function(){var a=5e3;return d("WABatcher").batch({delayMs:a},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield j(a);return(h||(h=b("Promise"))).resolve(a.map(function(a){return void 0}))});return function(b){return a.apply(this,arguments)}}())}();function a(a,b,c,d){d===void 0&&(d=!1);a={chatId:a,subgroups:b,action:c};return d?l(a):j([a])}function m(a){return d("WAWebSchemaGroupMetadata").getGroupMetadataTable().equals(["parentGroup"],a.toString())}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield m(a)).find(function(a){return a.defaultSubgroup===!0})});return o.apply(this,arguments)}function c(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield n(a));return a==null?null:d("WAWebWidFactory").createWid(a.id)});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield m(a));a=(yield d("WAWebGroupsParticipantsApi").bulkCheckMyMembership(b.map(function(a){a=a.id;return d("WAWebWidFactory").createWid(a)}))).map(function(a,c){return[b[c],a]});return a.filter(function(a){a=a[1];return a}).map(function(a){a=a[0];return a})});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield q(a)).map(function(a){a=a.id;return d("WAWebWidFactory").createWid(a)})});return t.apply(this,arguments)}function e(a){return d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().equals(["parentGroup"],a.toString())}function f(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.parentGroup;if(b==null)return!1;a=d("WAWebWidFactory").createWid(a.id);b=(yield s(d("WAWebWidFactory").createWid(b)));return b.length===1&&b[0].equals(a)});return u.apply(this,arguments)}g.persistCommunityLink=a;g.getDefaultSubgroup=c;g.getJoinedSubgroupsMetadata=q;g.getJoinedSubgroups=s;g.getUnjoinedSubgroupsMetadata=e;g.isLastJoinedSubgroup=f}),98);
__d("WAWebSchemaGroupInviteV4",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addCompositeIndex;a.add("group-invite-v4").version(d("WAWebModelStorageVersions").groupInviteV4CreateTable(),[e("id"),c("from"),c("to"),c("groupId"),c("expiration"),c("expired"),b(["from","to","groupId"])]).version(d("WAWebModelStorageVersions").addGroupFromKeyToGroupInviteV4(),[b(["from","groupId"])]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("group-invite-v4")}g.addTable=a;g.getGroupInviteV4Table=b}),98);
__d("WAWebApiGroupInviteV4Store",["WATimeUtils","WAWebSchemaGroupInviteV4","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return d("WAWebSchemaGroupInviteV4").getGroupInviteV4Table().createOrMerge(a,b)}function c(a){return d("WAWebSchemaGroupInviteV4").getGroupInviteV4Table().bulkCreateOrMerge(a)}function e(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield d("WAWebSchemaGroupInviteV4").getGroupInviteV4Table().equals(["from","to","groupId"],[a,b,c]).then(function(a){return a.filter(function(a){return!a.expired&&a.expiration<=e})}));d("WAWebSchemaGroupInviteV4").getGroupInviteV4Table().bulkCreateOrReplace(a.map(function(a){return babelHelpers["extends"]({},a,{expired:!0})}));return a});return h.apply(this,arguments)}function f(a){var b;b=(b=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:b.toString();return d("WAWebSchemaGroupInviteV4").getGroupInviteV4Table().equals(["from","groupId"],[b,a.toString()]).then(function(a){return a.filter(function(a){return!a.expired&&d("WATimeUtils").unixTime()<=a.expiration})}).then(function(a){return a.map(function(a){return a.to})})}g.persistGroupInviteV4Msg=a;g.persistGroupInviteV4Msgs=c;g.revokeGroupInvites=e;g.getPendingParticipants=f}),98);
__d("WAWebDBRevokeInviteV4",["WAWebApiGroupInviteV4Store","WAWebBackendApi","WAWebDBMsgUtils","WAWebDBProcessMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield d("WAWebApiGroupInviteV4Store").revokeGroupInvites(a,b,c,e));b=(a==null?void 0:a.map(function(a){return a.id}))||[];c=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(b,function(a){a.inviteCodeExp="0"}));for(e of c)d("WAWebBackendApi").frontendFireAndForget("expireGroupInviteV4",{inviteMsgId:e.id}),d("WAWebDBProcessMessage").updateExistingMessages([e],e.id.remote)});return h.apply(this,arguments)}g.revokeGroupInviteV4=a}),98);
__d("WAWebDBStoreMessageOrphans",["WALogger","WAWebDBAddOnProviders","WAWebDBMessageSerialization","WAWebMessageAddOnType","WAWebMsgGetters","WAWebSchemaMessageOrphans","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessageOrphans:"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(h()).devConsole({msgs:a});a=a.map(function(a){var c;return{msgKey:a.id.toString(),parentMsgKey:b(a).toString(),sender:d("WAWebMsgGetters").getSender(a).toString(),parsedMsgPayload:d("WAWebDBMessageSerialization").dbRowFromMessage(babelHelpers["extends"]({},a)),type:(c=(c=d("WAWebDBAddOnProviders").addOnProviders.find(function(b){return b.matches(a)}))==null?void 0:c.type)!=null?c:d("WAWebMessageAddOnType").MessageAddOnType.Unknown,senderTimestampMs:a.senderTimestampMs,t:a.t}});yield d("WAWebSchemaMessageOrphans").getMessageOrphanTable().bulkCreateOrReplace(a)});return i.apply(this,arguments)}g.storeMessageOrphans=a}),98);
__d("WAWebPnhGatingUtils",[],(function(a,b,c,d,e,f){function a(){return!1}f.isMatFullyEnabled=a}),66);
__d("WAWebDBBulkGetRootMsgs",["WALogger","WAWebApiChat","WAWebMsgKey","WAWebPnhGatingUtils","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkGetRootMsgs: missing original idx for msgkey"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield l(a));yield j(a,b);return b});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=new Map();for(var f=0;f<b.length;f++)b[f]==null&&e.set(a[f],f);if(e.size===0||!d("WAWebPnhGatingUtils").isMatFullyEnabled())return;f=Array.from(e.keys()).map(function(a){return c("WAWebMsgKey").from(a)});var g=(yield d("WAWebApiChat").getMatChatBulk_DEPRECATED(f.map(function(a){return a.remote})));a=f.map(function(a){var b=g.get(a.remote);return b==null||!a.remote.isUser()||a.remote.equals(b)?null:[a.toString(),new(c("WAWebMsgKey"))({fromMe:a.fromMe,remote:b,id:a.id})]}).filter(Boolean);if(a.length===0)return;f=(yield l(a.map(function(a){a=a[1];return a.toString()})));for(var i=0;i<f.length;i++)if(f[i]!=null){var j=a[i][0];j=e.get(j);j!=null?b[j]=f[i]:d("WALogger").DEV(h())}});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a)),c=new Map();for(var e=0;e<a.length;e++)(b[e]==null||b[e].subtype==="message_edit")&&(c.set(a[e],e),b[e]=null);e=(yield d("WAWebSchemaMessage").getMessageTable().anyOf(["latestEditMsgKey"],Array.from(c.keys())));for(a of e){if(a.latestEditMsgKey==null||a.subtype==="message_edit")continue;e=c.get(a.latestEditMsgKey);if(e==null)continue;b[e]=a}return b});return m.apply(this,arguments)}g.bulkGetRootMsgs=a}),98);
__d("WAWebDBBulkUpdateViewMode",["WAWebDBMsgUtils","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=Array.from(a.keys());b=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(b));b=b.map(function(b){return{id:b.id.toString(),viewMode:a.get(b.id.toString())}});yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(b);return b.map(function(a){return a.id})});return h.apply(this,arguments)}g.bulkUpdateViewMode=a}),98);
__d("WAWebDBEphemeralMessage",["WALogger","WATimeUtils","WAWebDBMessageDelete","WAWebEphemeralKeepInChatUtils","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["pruneExpiredMessages completed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["pruneExpiredMessages started"]);i=function(){return a};return a}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(i()).tags("ephemeral-messages");var a=(yield d("WAWebSchemaMessage").getMessageTable().lessThan(["expiredTimestamp"],d("WATimeUtils").unixTime(),{shouldDecrypt:!1}));a=a.filter(function(a){return!d("WAWebEphemeralKeepInChatUtils").isKept(a.kicState)});yield d("WAWebDBMessageDelete").removeMessagesFromHistory(a.map(function(a){return a.id.toString()}));d("WALogger").LOG(h()).tags("ephemeral-messages");return a});return j.apply(this,arguments)}function c(a){return d("WAWebDBMessageDelete").removeMessagesFromHistory(a.map(function(a){return a.id.toString()}))}g.pruneExpiredMessages=a;g.removeExpiredMessagesFromHistory=c}),98);
__d("WAAsyncSleep",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c===void 0&&(c=200);d===void 0&&(d=200);if(!(a>0&&a%c===0)){e.next=5;break}e.next=5;return b("regeneratorRuntime").awrap(h(d));case 5:case"end":return e.stop()}},null,this)}function h(a){return new(g||(g=b("Promise")))(function(b){return setTimeout(b,a)})}f.asyncSleepAfterGivenLoopIteration=a;f.asyncSleep=h}),66);
__d("WAWebDBEncryptMultipleMsgs",["Promise","WAAsyncSleep","WALogger","WAWebBrokerGlobalAppState","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebDbEncryptionKey","WAWebLinkify","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAndEncryptSingleMsgRow without throttle failed with error: ",", message: ",", stack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAndEncryptSingleMsgRow failed for msg: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAndEncryptSingleMsgRow with throttle failed with error: ",", message: ",", stack: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAndEncryptSingleMsgRow failed for msg: ",""]);l=function(){return a};return a}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DroppingMsgRowDueToLogout",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!1);yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey();yield new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,0)});if(c){c=[];for(var e=0;e<a.length;e++)try{var f=a[e];f=(yield o(f,e));c.push(f)}catch(b){if(b instanceof m)throw b;d("WALogger").DEV(l(),a[e].id.remote).tags("message-store");d("WALogger").ERROR(k(),b.name,b.message,b.stack).tags("message-store").devConsole(b)}}else{f=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield o(a)["catch"](function(b){if(b instanceof m)throw b;d("WALogger").DEV(j(),a.id.remote).tags("message-store");d("WALogger").ERROR(i(),b.name,b.message,b.stack).tags("message-store").devConsole(b)})["finally"](function(){return void 0}));return b});return function(b){return a.apply(this,arguments)}}())));c=f.filter(Boolean)}return c});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).reject(new m());e!=null&&(yield d("WAAsyncSleep").asyncSleepAfterGivenLoopIteration(e,35,100));e=d("WAWebSchemaMessage").getMessageTable();var f=d("WAWebDBMessageUtils").getVcardWids(a),g=d("WAWebDBMessageSerialization").dbRowFromMessage(a);e=(yield e.preflightEncryptSingleRecord(babelHelpers["extends"]({},g)));return[babelHelpers["extends"]({},g,e,{vcardWAids:f}),d("WAWebLinkify").hasHttpLink(a)]});return p.apply(this,arguments)}g.DroppingMsgRowDueToLogout=m;g.encryptMultipleDBMsgs=a;g.processAndEncryptSingleMsgRow=o}),98);
__d("WAWebDBMessageBulkHelper",["Promise","WAJids","WALogger","WAWebApiContact","WAWebDBEncryptMultipleMsgs","WAWebDBStoreEncryptedMsgs","WAWebDBStoreNewsletterEncryptedMsgs","WAWebModelStorageUtils","WAWebMsgGetters","WAWebPnhGatingUtils","WAWebSchemaChat","WAWebUpdateDuplicatedLidThread","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][msg-cache]: storing chat updates: ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{yield k(a,b,c)}catch(e){if(d("WAWebDBStoreEncryptedMsgs").isEligibleForFallback(a.length+b.length,e))yield k(a,b,c,!0);else throw e}});return j.apply(this,arguments)}function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){f===void 0&&(f=!1);a=(yield (h||(h=b("Promise"))).all([n(a),d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(a,!1)]));var g=a[0],i=a[1];a=(yield h.all([n(c),d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(c,!1)]));var j=a[0],k=a[1];yield d("WAWebModelStorageUtils").getStorage().lock(["chat","fts-indexing-queue","message","message-association"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a[1];a[2];a[3];yield b.bulkCreateOrMerge(g.concat(j));yield d("WAWebDBStoreEncryptedMsgs").storeEncryptedDBMessages(i,k,e,!1,f)});return function(b){return a.apply(this,arguments)}}())});return l.apply(this,arguments)}function c(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all([n(a),d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(a,!1)]));var c=a[0],e=a[1];return d("WAWebModelStorageUtils").getStorage().lock(["chat","message"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];yield a.bulkCreateOrMerge(c);yield d("WAWebDBStoreNewsletterEncryptedMsgs").storeEncryptedNewsletterMessages(e)});return function(b){return a.apply(this,arguments)}}())});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();a.forEach(function(a){var c=a.id,e=c.remote.toString();if(e!==d("WAJids").STATUS_JID&&d("WAWebMsgGetters").getIsUnreadType(a)){var f=b.get(e)||{unread:0,t:0,unreadMentionsOfMe:[]};if(!c.fromMe){f.unread+=1;if(d("WAWebMsgGetters").getIsImportantMessage(a)){c={id:a.id.toString(),timestamp:a.t};f.unreadMentionsOfMe?f.unreadMentionsOfMe.push(c):f.unreadMentionsOfMe=[c]}}a.t!=null&&a.t>f.t&&(f.t=Math.max(a.t,f.t));b.set(e,f)}});var c=Array.from(b.keys()),e,f;if(d("WAWebPnhGatingUtils").isMatFullyEnabled()){f=d("WAWebApiContact").getAlternateWidBulkForLids_DEPRECATED(c);a=[];for(var g of f.values())a.push.apply(a,g);e=(yield d("WAWebSchemaChat").getChatTable().bulkGet(a))}g=(yield d("WAWebSchemaChat").getChatTable().bulkGet(c));a=g.map(function(a,g){var h,i;g=c[g];var j=b.get(g),k=(j==null?void 0:j.unread)||0,l=Math.max(0,a?a.unreadCount:0),m=(j==null?void 0:j.t)||void 0;a&&a.t!=null&&((m==null||a.t>m)&&(m=a.t));var n=[];h=(h=a==null?void 0:a.archiveAtMentionViewedInDrawer)!=null?h:!1;j=(j=j==null?void 0:j.unreadMentionsOfMe)!=null?j:[];i=(i=a==null?void 0:a.unreadMentionsOfMe)!=null?i:[];j.length>0&&(h=!1);n=j.concat(i);j=a==null?void 0:a.isDeprecated;if(j!==!0&&d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a!=null){a=d("WAWebUpdateDuplicatedLidThread").shouldDeprecateLidThread(a,(i=f.get(a.id.toString()))!=null?i:[],e);a&&(j=!0)}i={id:g,unreadCount:l+k,t:m,unreadMentionsOfMe:n,archiveAtMentionViewedInDrawer:h,isDeprecated:j};return i});d("WALogger").LOG(i(),JSON.stringify(a));return a});return o.apply(this,arguments)}g.persistNewMessagesInBulk=a;g.persistNewNewsletterMessagesInBulk=c}),98);
__d("WAWebSchemaLabelAssociation",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({Jid:"jid",Message:"message"});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addCompositePrimaryKey,e=b.addIndex;b=b.addCompositeIndex;a.add("label-association").version(d("WAWebModelStorageVersions").labelAssociationCreateTable(),[c(["labelId","associationId","type"]),e("labelId"),b(["associationId","type"])]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("label-association")}g.LabelAssociationType=e;g.addTable=a;g.getLabelAssociationTable=c}),98);
__d("WAWebDBQueryAndRemoveLocalLabelAssociation",["WAWebSchemaLabelAssociation","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return d("WAWebSchemaLabelAssociation").getLabelAssociationTable().anyOf(["associationId","type"],a.map(function(a){var b=a.associationId;a=a.type;return[b,a]}))}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a));yield d("WAWebSchemaLabelAssociation").getLabelAssociationTable().bulkRemove(a.map(function(a){var b=a.labelId,c=a.associationId;a=a.type;return[b,c,a]}))});return i.apply(this,arguments)}g.queryLocalLabelAssociation=h;g.queryAndRemoveLocalLabelAssociation=a}),98);
__d("WAWebLocalSchemaVersions",["Promise","WALogger","WAWeb-dexie","WAWebSchemaVersions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] error while getting db local version: ",""]);i=function(){return a};return a}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=new(c("WAWeb-dexie"))(a);var b=(yield a.open()).verno;yield a.close();return b-1}catch(a){a.name==="NoSuchDatabaseError"||d("WALogger").ERROR(i(),a);return null}});return k.apply(this,arguments)}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=b("Promise"))).all(Array.from(d("WAWebSchemaVersions").DatabaseNames.members()).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));return b!=null?[a,b]:null});return function(b){return a.apply(this,arguments)}}())));a=a.filter(Boolean);return new Map(a)});return l.apply(this,arguments)}g.getLocalVersion=j;g.getLocalSchemaVersions=a}),98);
__d("WAWebWamEnumWebDbVersionSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({KNOB:1,LOCAL:2,STATIC:3,KNOB_WITH_LOCAL_OVERRIDE:4});f.WEB_DB_VERSION_SOURCE_TYPE=a}),66);
__d("WAWebWamEnumWebSchemaInitiatorType",[],(function(a,b,c,d,e,f){a=Object.freeze({MAIN:1,WEB_WORKER:2,SERVICE_WORKER:3});f.WEB_SCHEMA_INITIATOR_TYPE=a}),66);
__d("WAWebWebDbVersionsSourceWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebDbVersionSourceType","WAWebWamEnumWebSchemaInitiatorType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDbVersionsSource:[4784,{webDbVersionSource:[1,d("WAWebWamEnumWebDbVersionSourceType").WEB_DB_VERSION_SOURCE_TYPE],webSchemaInitiator:[2,d("WAWebWamEnumWebSchemaInitiatorType").WEB_SCHEMA_INITIATOR_TYPE]},[1,1,1],"regular"]},{WebDbVersionsSource:[]});g.WebDbVersionsSourceWamEvent=a}),98);
__d("WAWebDbRolloutUtil",["WALogger","WAWebLocalSchemaVersions","WAWebRuntimeEnvironmentUtils","WAWebSchemaVersions","WAWebWamEnumWebDbVersionSourceType","WAWebWebDbVersionsSourceWamEvent","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] overriding ks version "," with localVersion "," for db ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] found "," local versions"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] database allowed versions: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] start load schema versions"]);k=function(){return a};return a}var l=-1;function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebRuntimeEnvironmentUtils").isWorker()&&!d("WAWebRuntimeEnvironmentUtils").isServiceWorker())return;if(d("WAWebSchemaVersions").hasSchemaVersions())return;if(c("justknobx")._("1854")===!0){d("WAWebSchemaVersions").setSchemaVersions(new Map());return}d("WALogger").LOG(k());var a=new Map();Array.from(d("WAWebSchemaVersions").DatabaseNames.members()).map(function(b){var e=null;switch(b){case d("WAWebSchemaVersions").DatabaseNames.ModelStorage:e=c("justknobx")._("1617");break;case d("WAWebSchemaVersions").DatabaseNames.FtsStorage:e=c("justknobx")._("1618");break;case d("WAWebSchemaVersions").DatabaseNames.JobsStorage:e=c("justknobx")._("1619");break;case d("WAWebSchemaVersions").DatabaseNames.LruMediaStorage:e=c("justknobx")._("1620");break;case d("WAWebSchemaVersions").DatabaseNames.OffdStorage:e=c("justknobx")._("1621");break;case d("WAWebSchemaVersions").DatabaseNames.QplStorage:e=c("justknobx")._("1622");break;case d("WAWebSchemaVersions").DatabaseNames.SignalStorage:e=c("justknobx")._("1623");break;case d("WAWebSchemaVersions").DatabaseNames.WorkerStorage:e=c("justknobx")._("1624");break;case d("WAWebSchemaVersions").DatabaseNames.SW:e=c("justknobx")._("1662");break;case d("WAWebSchemaVersions").DatabaseNames.WAWC:e=c("justknobx")._("1663");break;case d("WAWebSchemaVersions").DatabaseNames.WAWCDBEnc:e=c("justknobx")._("1664");break}e!=null&&e!==l&&a.set(b,e)});d("WALogger").LOG(j(),Array.from(a));var b=(yield d("WAWebLocalSchemaVersions").getLocalSchemaVersions());d("WALogger").LOG(i(),b.size);b.forEach(function(b,c){var e=a==null?void 0:a.get(c);e!=null&&b>e&&(d("WALogger").ERROR(h(),e,b,c).sendLogs("[storage] overriding ks version with local version"),a==null?void 0:a.set(c,b))});new(d("WAWebWebDbVersionsSourceWamEvent").WebDbVersionsSourceWamEvent)({webDbVersionSource:d("WAWebWamEnumWebDbVersionSourceType").WEB_DB_VERSION_SOURCE_TYPE.KNOB,webSchemaInitiator:d("WAWebSchemaVersions").getLoaderType()}).commit();d("WAWebSchemaVersions").hasSchemaVersions()||d("WAWebSchemaVersions").setSchemaVersions(a)});return m.apply(this,arguments)}g.AnyDbVersion=l;g.loadSchemaVersions=a}),98);
__d("WAWebFtsStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="fts-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56265);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[fts-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebFtsStorageVersions",["WAWebFtsStorageUtils"],(function(a,b,c,d,e,f,g){var h=8;function a(){return d("WAWebFtsStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebFtsStorageUtils").getStorage().versions.version(1)}function c(){return d("WAWebFtsStorageUtils").getStorage().versions.version(2)}function e(){return d("WAWebFtsStorageUtils").getStorage().versions.version(3)}function f(){return d("WAWebFtsStorageUtils").getStorage().versions.version(4)}function i(){return d("WAWebFtsStorageUtils").getStorage().versions.version(5)}function j(){return d("WAWebFtsStorageUtils").getStorage().versions.version(6)}function k(){return d("WAWebFtsStorageUtils").getStorage().versions.version(7)}function l(){return d("WAWebFtsStorageUtils").getStorage().versions.version(8)}g.versionToRollout=h;g.ftsV1IndexCreateTable=a;g.manifestCreateTable=b;g.purgeRangeQueueCreateTable=c;g.ftsV2IndexCreateTable=e;g.ftsV2TokenToPrefixesCreateTable=f;g.ftsV3IndexCreateTable=i;g.ftsV1DeleteAndDeprecate=j;g.ftsV2Delete=k;g.ftsV2DeleteTokenPrefixes=l}),98);
__d("WAWebSchemaFtsPurgeRangeQueue",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addCompositePrimaryKey,j="fts-purge-range-queue";function a(){d("WAWebFtsStorageUtils").getStorage().add(j).version(d("WAWebFtsStorageVersions").purgeRangeQueueCreateTable(),[i(["chatId","tsOfLastMessage","startRowId","endRowId"]),h("offset")]).view(function(a){return a})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(j)}g.TABLE_NAME=j;g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaFtsV1Index",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b=d("WAWebStorageMutationBuilder").columnBuilder();var h=b.addColumn,i=b.addUserDefinedPrimaryKey,j=b.addArrayIndex,k="fts-v1-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(k).version(d("WAWebFtsStorageVersions").ftsV1IndexCreateTable(),[i("token"),h("ids"),j("ids"),h("prefixes"),j("prefixes")])["delete"](d("WAWebFtsStorageVersions").ftsV1DeleteAndDeprecate())}g.deprecateTable=a}),98);
__d("WAWebSchemaFtsV2Index",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b=d("WAWebStorageMutationBuilder").columnBuilder();var h=b.addColumn,i=b.addCompositePrimaryKey,j=b.addIndex,k=b.addCompositeIndex,l="fts-v2-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(l).version(d("WAWebFtsStorageVersions").ftsV2IndexCreateTable(),[i(["id","chatId","token"]),j("id"),j("chatId"),j("token"),k(["chatId","token"]),h("timestamp"),k(["id","token"])])["delete"](d("WAWebFtsStorageVersions").ftsV2Delete())}g.addTable=a}),98);
__d("WAWebSchemaFtsV2TokenPrefixes",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="fts-v2-token-prefixes";b=d("WAWebStorageMutationBuilder").columnBuilder();var i=b.addColumn,j=b.addUserDefinedPrimaryKey,k=b.addArrayIndex;function a(){d("WAWebFtsStorageUtils").getStorage().add(h).version(d("WAWebFtsStorageVersions").ftsV2TokenToPrefixesCreateTable(),[j("token"),i("prefixes"),k("prefixes")])["delete"](d("WAWebFtsStorageVersions").ftsV2DeleteTokenPrefixes())}g.addTable=a}),98);
__d("WAFtsV3IndexEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){return{id:a,chatId:b,timestamp:c,prefixes:d}}function b(a,b,c,d,e){return{ftsRowId:a,id:b,chatId:c,timestamp:d,prefixes:e}}f.buildEntry=a;f.buildDBEntry=b}),66);
__d("WAWebSchemaFtsV3Index",["WAFtsV3IndexEntry","WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey,j=c.addIndex,k=c.addArrayIndex,l="fts-v3-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(l).version(d("WAWebFtsStorageVersions").ftsV3IndexCreateTable(),[i("ftsRowId"),h("id"),j("id"),h("chatId"),j("chatId"),h("timestamp"),h("prefixes"),k("prefixes")]).view(function(a){return a?d("WAFtsV3IndexEntry").buildDBEntry(a.ftsRowId,a.id,a.chatId,a.timestamp,a.prefixes):null})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(l)}g.TABLE_NAME=l;g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaManifest",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="manifest";c=Object.freeze({PREV_VERSION:"prev.version",CURR_VERSION:"curr.version",NEXT_VERSION:"next.version"});e=d("WAWebStorageMutationBuilder").columnBuilder();var i=e.addColumn,j=e.addUserDefinedPrimaryKey;function a(){d("WAWebFtsStorageUtils").getStorage().add(h).version(d("WAWebFtsStorageVersions").manifestCreateTable(),[j("key"),i("tokenizerVersion"),i("schemaVersion"),i("isCurrent"),i("lastMsgKeyViaFullIndexer"),i("isFullIndexingComplete")]).view(function(a){return a||null})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(h)}g.TABLE_NAME=h;g.ManifestKeys=c;g.addTable=a;g.getTable=b}),98);
__d("WAWebFtsStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebFtsStorageUtils","WAWebSchemaFtsPurgeRangeQueue","WAWebSchemaFtsV1Index","WAWebSchemaFtsV2Index","WAWebSchemaFtsV2TokenPrefixes","WAWebSchemaFtsV3Index","WAWebSchemaManifest","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebFtsStorageUtils").createStorage(),d("WAWebSchemaManifest").addTable(),d("WAWebSchemaFtsV1Index").deprecateTable(),d("WAWebSchemaFtsV2Index").addTable(),d("WAWebSchemaFtsV2TokenPrefixes").addTable(),d("WAWebSchemaFtsPurgeRangeQueue").addTable(),d("WAWebSchemaFtsV3Index").addTable(),i=d("WAWebFtsStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize fts storage",{sendLogsType:d("WALogger").SendLogsType.EXTREMELY_BAD_USER_EXPERIENCE_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebFtsStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebFtsStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null;return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))("fts-storage-dogfooding")["delete"]())})}function f(){i=null}g.getManifestTable=d("WAWebSchemaManifest").getTable;g.getPurgeRangeQueueTable=d("WAWebSchemaFtsPurgeRangeQueue").getTable;g.getIndexV3Table=d("WAWebSchemaFtsV3Index").getTable;g.initialize=a;g.destroy=e;g.clearInitializePromise=f}),98);
__d("WAWebSchemaFtsIndexingQueue",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("fts-indexing-queue").version(d("WAWebModelStorageVersions").ftsIndexingQueueCreateTable(),[b("id")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("fts-indexing-queue")}g.addTable=a;g.getFtsIndexingQueueTable=b}),98);
__d("WAWebWorkerSafeBackendApi",["WAWebBackendApi"],(function(a,b,c,d,e,f,g){function a(a,b){d("WAWebBackendApi").fireAndForgetInternalDoNotUse("workerSafeEvent",a,b)}function b(a,b){return d("WAWebBackendApi").sendAndReceiveInternalDoNotUse("workerSafeEvent",a,b)}g.workerSafeFireAndForget=a;g.workerSafeSendAndReceive=b}),98);
__d("WAWebFtsLightClient",["Promise","WAWebFtsStorage","WAWebRuntimeEnvironmentUtils","WAWebSchemaFtsIndexingQueue","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=null;function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(i!=null)return i;i=(yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getFtsClientInstance"));return i});return k.apply(this,arguments)}function a(a){return d("WAWebSchemaFtsIndexingQueue").getFtsIndexingQueueTable().bulkCreateOrReplace(a.map(function(a){return{id:a}}))}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebFtsStorage").getIndexV3Table().bulkRemoveByIndex(["id"],a);b=(b=i)!=null?b:yield j();yield b.purge(a)});return l.apply(this,arguments)}function e(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;if(d("WAWebRuntimeEnvironmentUtils").isWorker())return(h||(h=b("Promise"))).resolve();a=(a=i)!=null?a:yield j();yield a.index()});return m.apply(this,arguments)}f={purge:c,index:e,addToIndexingTable:a};g.ftsLightClient=f}),98);
__d("WAWebPremiumMessageSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebModelStorageUtils").getStorage().add("premium-message").version(d("WAWebModelStorageVersions").premiumMessageCreateTable(),[i("id"),h("name"),h("type"),h("message"),h("isDeleted"),h("mediaId"),h("sentMessageIds")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("premium-message")}g.addTable=a;g.getPremiumMessageTable=b}),98);
__d("WAWebSchemaAbPropConfig",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("abpropConfigs").version(d("WAWebModelStorageVersions").abpropsConfigCreateTable(),[b("configCode"),c("configValue"),c("configExpoKey"),c("overriddenConfigValue")]).version(d("WAWebModelStorageVersions").addHasAccessedToAbpropsConfigTable(),[c("hasAccessed")]).view(function(a){return{configCode:a.configCode,configValue:a.configValue,configExpoKey:a.configExpoKey,hasAccessed:a.hasAccessed,overriddenConfigValue:a.overriddenConfigValue}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("abpropConfigs")}g.addTable=a;g.getAbpropConfigsTable=b}),98);
__d("WAWebSchemaAbPropEventSamplingConfig",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("abprop-event-sampling-configs").version(d("WAWebModelStorageVersions").abpropEventSamplingConfigCreateTable(),[b("eventCode"),c("samplingWeight")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("abprop-event-sampling-configs")}g.addTable=a;g.getAbpropEventSamplingConfigsTable=b}),98);
__d("WAWebSchemaActiveMessageRanges",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=Object.freeze({Unknown:"unknown",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChatKeepStarredKeepMedia:"clearChat_0_0",ClearChatKeepStarredDeleteMedia:"clearChat_0_1",ClearChatDeleteStarredKeepMedia:"clearChat_1_0",ClearChatDeleteStarredDeleteMedia:"clearChat_1_1",DeleteChatDeleteMedia:"deleteChat_1",DeleteChatKeepMedia:"deleteChat_0"});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("active-message-ranges").version(d("WAWebModelStorageVersions").activeMessageRangesCreateTable(),[e(["chatId","action"]),b("chatId"),c("actionValue"),c("remainingMessages")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("active-message-ranges")}g.ActiveRangeAction=c;g.addTable=a;g.getActiveMessageRangesTable=b}),98);
__d("WAWebSchemaAgent",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("agent").version(d("WAWebModelStorageVersions").agentCreateTable(),[b("id"),c("deviceId"),c("name"),c("isDeleted")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("agent")}g.addTable=a;g.getAgentTable=b}),98);
__d("WAWebSchemaBlocklist",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("blocklist").version(d("WAWebModelStorageVersions").blocklistCreateTable(),[b("id")]).view(function(a){return{id:a.id}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("blocklist")}g.addTable=a;g.getBlocklistTable=b}),98);
__d("WAWebSchemaBotProfile",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("bot-profile").version(d("WAWebModelStorageVersions").botProfileCreateTable(),[b("id"),c("name"),c("attrs"),c("description"),c("category"),c("isDefault"),c("prompts"),c("personaId"),c("commands"),c("commandsDescription")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("bot-profile")}g.addTable=a;g.getBotProfileTable=b}),98);
__d("WAWebSchemaCTWASuggestion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("ctwa-suggestion").version(d("WAWebModelStorageVersions").ctwaSuggestionsCreateTable(),[e("id"),c("type"),c("expiresAt"),b("expiresAt"),c("heading"),c("body"),c("highlight"),c("actionLink"),c("display"),c("ts")]).version(d("WAWebModelStorageVersions").ctwaSuggestionsAddTrackingData(),[c("nuxData"),c("coolOffData")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("ctwa-suggestion")}g.addTable=a;g.getCTWASuggestionTable=b}),98);
__d("WAWebSchemaCart",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("cart").version(d("WAWebModelStorageVersions").cartCreateTable(),[b("id"),c("products"),c("message"),c("total"),c("currency"),c("itemCount")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("cart")}g.addTable=a;g.getCartTable=b}),98);
__d("WAWebSchemaChatAssignment",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="chat-assignment";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add(h).version(d("WAWebModelStorageVersions").chatAssignmentCreateTable(),[b("id"),c("chatId"),c("agentId"),c("chatOpenedByAgent")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getChatAssignmentTable=b}),98);
__d("WAWebSchemaCollectionVersion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("collection-version").version(d("WAWebModelStorageVersions").collectionVersionCreateTable(),[b("collection"),c("version"),c("state"),c("finiteFailureStartTime"),c("ltHash"),c("isCollectionInMacMismatchFatal"),c("isCollectionLthashInconsistent"),c("lastSuccessfulSyncEndTime"),c("lastSyncAttemptStartTimes"),c("didLastPatchFailPostValidation"),c("lastPatchNewLtHashFromPatchDebugData"),c("isLastPatchAnIncomingPatch"),c("isLastPatchSenderAPrimaryDevice"),c("lastPatchSenderDeviceId"),c("didBootstrapFromSnapshot")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("collection-version")}g.addTable=a;g.getCollectionVersionTable=b}),98);
__d("WAWebSchemaDeviceList",["WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("device-list",function(a,b){var c=b.addColumn;b=b.addUserDefinedPrimaryKey;return a.version(d("WAWebModelStorageVersions").deviceListCreateTable(),[b("id"),c("devices"),c("rawId"),c("timestamp"),c("validIndexes"),c("currentIndex")]).version(d("WAWebModelStorageVersions").deviceListAddDelete(),[c("deleted"),c("deletedChangedToHost")]).version(d("WAWebModelStorageVersions").deviceListAddV2Fields(),[c("expectedTs"),c("expectedTsLastDeviceJobTs"),c("expectedTsUpdateTs"),c("advAccountType")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("device-list")}g.addTable=a;g.getDeviceListTable=b}),98);
__d("WAWebSchemaDirectConnectionKeys",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("direct-connection-keys").version(d("WAWebModelStorageVersions").directConnectionKeysCreateTable(),[b("id"),c("certificateChain"),c("cypher"),c("cypherExpirationTimestamp")]).version(d("WAWebModelStorageVersions").directConnectionKeysAddPostcodeColumns(),[c("cypherType"),c("postcode"),c("postcodeSetByUser"),c("postcodeLocationName")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("direct-connection-keys")}g.addTable=a;g.getDirectConnectionKeysTable=b}),98);
__d("WAWebSchemaEncryptedMutations",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addAutoIncrementingPrimaryKey;a.add("encrypted-mutations").version(d("WAWebModelStorageVersions").encryptedMutationsCreateTable(),[b("id"),c("collectionName"),c("keyId"),c("indexMac"),c("operation"),c("indexAndValueCipherText")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaFavorite",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("favorite").version(d("WAWebModelStorageVersions").favoriteCreateTable(),[b("id")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("favorite")}g.addTable=a;g.getFavoriteTable=b}),98);
__d("WAWebSchemaFavoriteStickers",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("favorite-stickers").version(d("WAWebModelStorageVersions").favoriteStickersCreateTable(),[b("id"),c("timestamp"),c("sticker"),c("stickerHashWithoutMeta"),c("isFavorite"),c("deviceId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("favorite-stickers")}g.addTable=a;g.getFavoriteStickersTable=b}),98);
__d("WAWebSchemaHistorySyncNotification",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("history-sync-notification",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey,g=b.addIndex;b=b.addCompositeIndex;return a.version((a=d("WAWebModelStorageVersions")).historySyncNotificationsCreateTable(),[f("msgKey"),c("downloadOptions"),c("syncType"),e("chunkEncryptionKey",(f=d("WAWebStorageSchema")).ENCRYPTED_VALUE_TYPE.STRING),c("chunkOrder"),c("processed"),g("syncType"),g("chunkOrder"),g("processed"),c("isReupload"),c("historySyncStepStartedTs"),c("historySyncPayloadSize"),c("reuploadPending"),c("downloadedHistorySyncPayload")]).version(a.encryptHistorySyncDirectPath(),[e("directPath",f.ENCRYPTED_VALUE_TYPE.STRING)]).version(a.encryptHistorySyncFilehash(),[e("filehash",f.ENCRYPTED_VALUE_TYPE.STRING),e("encFilehash",f.ENCRYPTED_VALUE_TYPE.STRING)]).version(a.addInitialHistBootstrapInlinePayloadColumn(),[e("initialHistBootstrapInlinePayload",f.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version(a.addPeerDataRequestSessionIdColumn(),[c("peerDataRequestSessionId")]).version(a.addPeerDataRequestChatIdColumn(),[c("peerDataRequestChatId")]).version(a.addProgressColumn(),[c("progress")]).version(a.addProcessedAndSyncTypeCompositeIndex(),[b(["processed","syncType"])]).view(function(a){return a}).useDbMsgEncKeyForEncryptedCol(!0).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("history-sync-notification")}g.addTable=a;g.getHistorySyncNotificationTable=b}),98);
__d("WAWebSchemaInAppBanner",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("in-app-banner").version(d("WAWebModelStorageVersions").inAppBannerCreateTable(),[b("id"),c("type"),c("surfaceId"),c("title"),c("text"),c("actionText"),c("actionLink"),c("iconDescription"),c("iconLight"),c("iconDark"),c("backgroundColor"),c("highlightColor"),c("pacing"),c("ts")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaInactiveReceipt",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("inactive-receipt").version(d("WAWebModelStorageVersions").inactiveReceiptCreateTable(),[b("msgId"),c("chatId"),c("participantId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("inactive-receipt")}g.addTable=a;g.getInactiveReceiptTable=b}),98);
__d("WAWebSchemaLabel",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("label").version(d("WAWebModelStorageVersions").labelCreateTable(),[b("id"),c("name"),c("colorIndex"),c("predefinedId"),c("orderIndex")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("label")}g.addTable=a;g.getLabelTable=b}),98);
__d("WAWebSchemaLidChatState",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("lid-chat-state").version(d("WAWebModelStorageVersions").lidChatStateCreateTable(),[b("id"),c("shareOwnPn"),c("requestedPnTimestamp")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaLidDisplayNameMapping",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("lid-display-name-mapping").version(d("WAWebModelStorageVersions").lidDisplayNameMappingCreateTable(),[b("id"),c("displayName")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaLidPnMapping",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeColumn;a.add("lid-pn-mapping").version(d("WAWebModelStorageVersions").lidPnMappingCreateTable(),[e("id"),c("phoneNumber"),f("phoneNumber"),c("createdAtTimestamp"),c("displayName")]).version(d("WAWebModelStorageVersions").lidPnMappingRemoveDisplayName(),[b("displayName")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaMessageAssociation",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("message-association").version(d("WAWebModelStorageVersions").messageAssociationCreateTable(),[e(["msgKey","associationType"]),c("parentMsgKey"),c("msgKeyInternalId"),b("parentMsgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-association")}g.addTable=a;g.getMessageAssociationTable=b}),98);
__d("WAWebSchemaMessageHistory",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("message-history").version(d("WAWebModelStorageVersions").messageHistoryCreateTable(),[e("msgKey"),c("parentMsgKey"),b("parentMsgKey")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaMessageInfo",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("message-info").version(d("WAWebModelStorageVersions").messageInfoCreateTable(),[e(["msgKey","receiverUserJid"]),c("delivery"),c("read"),c("played"),c("deviceDelivered"),c("deviceNotDelivered"),b("msgKey")]).version(d("WAWebModelStorageVersions").messageInfoAddDeliveryPrivacyMode(),[c("deliveryPrivacyMode")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-info")}g.addTable=a;g.getMessageInfoTable=b}),98);
__d("WAWebSchemaMissingKeys",["WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(a){var b=a.keyHex,c=a.keyId,e=a.timestamp;a=a.deviceResponses;return{keyHex:b,keyId:d("WASyncdKeyTypes").toSyncKeyId(c),timestamp:e,deviceResponses:a}}function b(a){var b=a.keyHex,c=a.keyId,e=a.timestamp;a=a.deviceResponses;return{keyHex:b,keyId:d("WASyncdKeyTypes").fromSyncKeyId(c),timestamp:e,deviceResponses:a}}function c(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("missing-keys").version(d("WAWebModelStorageVersions").missingKeysCreateTable(),[b("keyHex"),c("keyId"),c("timestamp"),c("deviceResponses")]).view(function(a){return a})}function e(){return d("WAWebModelStorageUtils").getStorage().table("missing-keys")}g.convertToMissingKeyFromRow=a;g.convertFromMissingKeyToRow=b;g.addTable=c;g.getMissingKeysTable=e}),98);
__d("WAWebCountriesNativeCountryNames",[],(function(a,b,c,d,e,f){a={AC:"Ascension Island",AD:"Andorra",AE:"\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629",AF:"\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646",AG:"Antigua & Barbuda",AI:"Anguilla",AL:"Shqip\xebri",AM:"\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576",AO:"Angola",AR:"Argentina",AS:"American Samoa",AT:"\xd6sterreich",AU:"Australia",AW:"Aruba",AX:"\xc5land",AZ:"Az\u0259rbaycan",BA:"Bosna i Hercegovina",BB:"Barbados",BD:"\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6",BE:"Belgi\xeb",BF:"Burkina Faso",BG:"\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f",BH:"\u0627\u0644\u0628\u062d\u0631\u064a\u0646",BI:"Burundi",BJ:"B\xe9nin",BL:"Saint-Barth\xe9lemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BQ:"Caribisch Nederland",BR:"Brasil",BS:"Bahamas",BT:"\u0f60\u0f56\u0fb2\u0f74\u0f42",BW:"Botswana",BY:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c",BZ:"Belize",CA:"Canada",CC:"Kepulauan Cocos (Keeling)",CD:"Congo-Kinshasa",CF:"R\xe9publique centrafricaine",CG:"Congo-Brazzaville",CH:"Schweiz",CI:"C\xf4te d\u2019Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"\u4e2d\u56fd",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Cura\xe7ao",CX:"Christmas Island",CY:"\u039a\u03cd\u03c0\u03c1\u03bf\u03c2",CZ:"\u010cesko",DE:"Deutschland",DJ:"Djibouti",DK:"Danmark",DM:"Dominica",DO:"Rep\xfablica Dominicana",DZ:"\u0627\u0644\u062c\u0632\u0627\u0626\u0631",EC:"Ecuador",EE:"Eesti",EG:"\u0645\u0635\u0631",ER:"\u0625\u0631\u064a\u062a\u0631\u064a\u0627",ES:"Espa\xf1a",ET:"\u12a2\u1275\u12ee\u1335\u12eb",FI:"Suomi",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"F\xf8royar",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd",GF:"Guyane fran\xe7aise",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Kalaallit Nunaat",GM:"Gambia",GN:"Guin\xe9e",GP:"Guadeloupe",GQ:"Guinea Ecuatorial",GR:"\u0395\u03bb\u03bb\u03ac\u03b4\u03b1",GT:"Guatemala",GU:"Guam",GW:"Guin\xe9-Bissau",GY:"Guyana",HK:"\u4e2d\u570b\u9999\u6e2f\u7279\u5225\u884c\u653f\u5340",HN:"Honduras",HR:"Hrvatska",HT:"Ha\xefti",HU:"Magyarorsz\xe1g",ID:"Indonesia",IE:"Ireland",IL:"\u05d9\u05e9\u05e8\u05d0\u05dc",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"\u0627\u0644\u0639\u0631\u0627\u0642",IR:"\u0627\u06cc\u0631\u0627\u0646",IS:"\xcdsland",IT:"Italia",JE:"Jersey",JM:"Jamaica",JO:"\u0627\u0644\u0623\u0631\u062f\u0646",JP:"\u65e5\u672c",KE:"Kenya",KG:"\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d",KH:"\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6",KI:"Kiribati",KM:"\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631",KN:"St. Kitts & Nevis",KP:"\uc870\uc120\ubbfc\uc8fc\uc8fc\uc758\uc778\ubbfc\uacf5\ud654\uad6d",KR:"\ub300\ud55c\ubbfc\uad6d",KW:"\u0627\u0644\u0643\u0648\u064a\u062a",KY:"Cayman Islands",KZ:"\u049a\u0430\u0437\u0430\u049b\u0441\u0442\u0430\u043d",LA:"\u0ea5\u0eb2\u0ea7",LB:"\u0644\u0628\u0646\u0627\u0646",LC:"St. Lucia",LI:"Liechtenstein",LK:"\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0",LR:"Liberia",LS:"Lesotho",LT:"Lietuva",LU:"L\xebtzebuerg",LV:"Latvija",LY:"\u0644\u064a\u0628\u064a\u0627",MA:"\u0627\u0644\u0645\u063a\u0631\u0628",MC:"Monaco",MD:"Republica Moldova",ME:"\u0426\u0440\u043d\u0430 \u0413\u043e\u0440\u0430",MF:"Saint-Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"\u0421\u0435\u0432\u0435\u0440\u043d\u0430 \u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430",ML:"Mali",MM:"\u1019\u103c\u1014\u103a\u1019\u102c",MN:"\u041c\u043e\u043d\u0433\u043e\u043b",MO:"\u4e2d\u570b\u6fb3\u9580\u7279\u5225\u884c\u653f\u5340",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"M\xe9xico",MY:"Malaysia",MZ:"Mo\xe7ambique",NA:"Namibia",NC:"Nouvelle-Cal\xe9donie",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Nederland",NO:"Norge",NP:"\u0928\u0947\u092a\u093e\u0932",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"\u0639\u064f\u0645\u0627\u0646",PA:"Panam\xe1",PE:"Per\xfa",PF:"Polyn\xe9sie fran\xe7aise",PG:"Papua New Guinea",PH:"Philippines",PK:"\u067e\u0627\u06a9\u0633\u062a\u0627\u0646",PL:"Polska",PM:"Saint-Pierre-et-Miquelon",PR:"Puerto Rico",PS:"\u0627\u0644\u0623\u0631\u0627\u0636\u064a \u0627\u0644\u0641\u0644\u0633\u0637\u064a\u0646\u064a\u0629",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"\u0642\u0637\u0631",RE:"La R\xe9union",RO:"Rom\xe2nia",RS:"\u0421\u0440\u0431\u0438\u0458\u0430",RU:"\u0420\u043e\u0441\u0441\u0438\u044f",RW:"U Rwanda",SA:"\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",SB:"Solomon Islands",SC:"Seychelles",SD:"\u0627\u0644\u0633\u0648\u062f\u0627\u0646",SE:"Sverige",SG:"Singapore",SH:"St. Helena",SI:"Slovenija",SJ:"\u0428\u043f\u0438\u0446\u0431\u0435\u0440\u0433\u0435\u043d \u0438 \u042f\u043d-\u041c\u0430\u0439\u0435\u043d",SK:"Slovensko",SL:"Sierra Leone",SM:"San Marino",SN:"S\xe9n\xe9gal",SO:"Soomaaliya",SR:"Suriname",SS:"South Sudan",ST:"S\xe3o Tom\xe9 e Pr\xedncipe",SV:"El Salvador",SX:"Sint-Maarten",SY:"\u0633\u0648\u0631\u064a\u0627",SZ:"Eswatini",TC:"Turks & Caicos Islands",TD:"Tchad",TG:"Togo",TH:"\u0e44\u0e17\u0e22",TJ:"\u0422\u043e\u04b7\u0438\u043a\u0438\u0441\u0442\u043e\u043d",TK:"Tokelau",TL:"Timor-Leste",TM:"T\xfcrkmenistan",TN:"\u062a\u0648\u0646\u0633",TO:"Tonga",TR:"T\xfcrkiye",TT:"Trinidad & Tobago",TV:"Tuvalu",TW:"\u53f0\u7063",TZ:"Tanzania",UA:"\u0423\u043a\u0440\u0430\u0457\u043d\u0430",UG:"Uganda",US:"United States",UY:"Uruguay",UZ:"O\u02bbzbekiston",VA:"Citt\xe0 del Vaticano",VC:"St. Vincent & Grenadines",VE:"Venezuela",VG:"British Virgin Islands",VI:"U.S. Virgin Islands",VN:"Vi\u1ec7t Nam",VU:"Vanuatu",WF:"Wallis-et-Futuna",WS:"Samoa",XK:"Kosov\xeb",YE:"\u0627\u0644\u064a\u0645\u0646",YT:"Mayotte",ZA:"iNingizimu Afrika",ZM:"Zambia",ZW:"Zimbabwe"};f["default"]=a}),66);
__d("WAWebSchemaNewsletterMetadata",["WAWebCountriesNativeCountryNames","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-metadata").version(d("WAWebModelStorageVersions").newsletterMetadataCreateTable(),[b("id"),c("creationTime"),c("name"),c("nameUpdateTime"),c("description"),c("descriptionUpdateTime"),c("handle"),c("inviteCode"),c("size"),c("verified"),c("membershipType"),c("privacy"),c("website"),c("reactionCodesSetting"),c("suspended"),c("geosuspended"),c("terminated"),c("adminCount"),c("capabilities"),c("messageDeliveryUpdates"),c("geosuspendedCountries"),c("hasProfilePictureDeletionAlerts")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-metadata")}function e(a){if(a in c("WAWebCountriesNativeCountryNames"))return a}g.addTable=a;g.getNewsletterMetadataTable=b;g.asISOCountryCode=e}),98);
__d("WAWebSchemaNewsletterMyVotes",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addCompositePrimaryKey;a.add("newsletter-my-votes").version(d("WAWebModelStorageVersions").newsletterMyVotesCreateTable(),[b(["chatJid","msgServerId"]),c("serverTimestampMs"),c("votes"),c("ack"),c("t"),c("read"),c("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-my-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNewsletterPollsVotes",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-polls-votes").version(d("WAWebModelStorageVersions").newsletterPollsVotesCreateTable(),[b("parentMsgKey"),c("serverTimestamp"),c("votesMap")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-polls-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNewsletterReactions",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-reactions").version(d("WAWebModelStorageVersions").newsletterReactionsCreateTable(),[b("parentMsgKey"),c("emojiCountMap"),c("serverTimestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-reactions")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNonMessageDataRequest",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum").Mirrored(["SEND_REQUEST","MEDIA_UPLOAD"]);function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("non-message-data-request").version(d("WAWebModelStorageVersions").nonMessageDataRequestCreateTable(),[b("id"),c("fileKey"),c("requestType"),c("operationType"),c("lastRequestTimeStampSec"),c("requestRetryCount"),c("responseError"),c("lastMediaUploadTimeStampSec"),c("lastMediaUploadSuccess"),c("mediaUploadFailureCount")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("non-message-data-request")}g.DataRequestUploadOperationType=e;g.addTable=a;g.getNonMessageDataRequestTable=c}),98);
__d("WAWebSchemaNote",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("note").version(d("WAWebModelStorageVersions").noteCreateTable(),[e("id"),c("type"),b("type"),c("chatJid"),b("chatJid"),c("content"),c("createdAt"),c("modifiedAt")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("note")}g.addTable=a;g.getNoteTable=b}),98);
__d("WAWebSchemaOrphanPaymentNotification",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-payment-notification").version(d("WAWebModelStorageVersions").orphanPaymentNotificationCreateTable(),[b("msgKey"),c("receiver"),c("currency"),c("amount1000"),c("type"),c("status"),c("ts")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-payment-notification")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaOrphanReceipt",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-receipt").version(d("WAWebModelStorageVersions").orphanReceiptCreateTable(),[b("msgKey"),c("delivery"),c("read"),c("played")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-receipt")}g.addTable=a;g.getOrphanReceiptTable=b}),98);
__d("WAWebSchemaOrphanRevoke",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-revoke").version(d("WAWebModelStorageVersions").orphanRevokeCreateTable(),[b("msgKey"),c("sender"),c("timestamp"),c("subtype")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-revoke")}g.addTable=a;g.getOrphanRevokeTable=b}),98);
__d("WAWebSchemaOrphanTcToken",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addEncryptedColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-tc-token").version(d("WAWebModelStorageVersions").orphanTcTokenCreateTable(),[b("chatId"),e("tcToken",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("tcTokenTimestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-tc-token")}g.addTable=a;g.getOrphanTcTokenTable=b}),98);
__d("WAWebSchemaPaymentBackgrounds",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("payment-backgrounds").version(d("WAWebModelStorageVersions").paymentBackgroundsCreateTable(),[b("id"),c("imageBuffer")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("payment-backgrounds")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaPeerMessage",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("peer-message").version(d("WAWebModelStorageVersions").peerMessageCreateTable(),[b("id"),c("to"),c("type"),c("subtype"),c("appStateSyncKeyShare"),c("appStateSyncKeyRequest"),c("appStateFatalExceptionNotification"),c("peerDataOperationRequestMessage"),c("peerDataOperationRequestResponseMessage")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("peer-message")}g.addTable=a;g.getPeerMessageTable=b}),98);
__d("WAWebSchemaPendingMutations",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(a){var b=a.id,c=a.collection,d=a.index,e=a.binarySyncAction,f=a.version,g=a.operation,h=a.timestamp;a=a.action;return{id:b,collection:c,index:d,binarySyncAction:e,version:f,operation:g,timestamp:h,action:a}}function b(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addAutoIncrementingPrimaryKey;b=b.addIndex;a.add("pending-mutations").version(d("WAWebModelStorageVersions").pendingMutationsCreateTable(),[e("id"),c("collection"),c("index"),b("index"),c("timestamp"),b("collection"),c("version"),c("operation"),c("binarySyncAction")]).version(d("WAWebModelStorageVersions").addActionToPendingMutations(),[c("action"),b("action")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("pending-mutations")}g.convertToPendingMutationFromRow=a;g.addTable=b;g.getPendingMutationsTable=c}),98);
__d("WAWebSchemaPrivacyDisallowedList",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({About:"status",GroupAdd:"groupadd",LastSeen:"last",ProfilePicture:"profile"});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("privacy-disallowed-list").version(d("WAWebModelStorageVersions").privacyDisallowedListCreateTable(),[b("id"),c("disallowedList")]).version(d("WAWebModelStorageVersions").privacyDisallowedListAddDhashField(),[c("dhash")]).view(function(a){return{id:a.id,disallowedList:a.disallowedList,dhash:a.dhash}})}function c(){return d("WAWebModelStorageUtils").getStorage().table("privacy-disallowed-list")}g.PrivacyDisallowedListType=e;g.addTable=a;g.getPrivacyDisallowedListTable=c}),98);
__d("WAWebSchemaProfilePicThumb",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("profile-pic-thumb").version(d("WAWebModelStorageVersions").profilePicThumbCreateTable(),[b("id"),c("tag"),c("eurl"),c("previewEurl"),c("timestamp"),c("previewDirectPath"),c("fullDirectPath"),c("filehash")]).view(function(a){return{id:a.id,tag:a.tag,eurl:a.eurl,previewEurl:a.previewEurl,timestamp:a.timestamp,previewDirectPath:a.previewDirectPath,fullDirectPath:a.fullDirectPath,filehash:a.filehash}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("profile-pic-thumb")}g.addTable=a;g.getProfilePicThumbTable=b}),98);
__d("WAWebSchemaQuickPromotions",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("quick-promotions").version(d("WAWebModelStorageVersions").quickPromotionsCreateTable(),[e("id"),c("surfaceId"),b("surfaceId"),c("ts"),c("data"),c("tracking"),c("locale")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("quick-promotions")}g.addTable=a;g.getQuickPromotionsTable=b}),98);
__d("WAWebSchemaQuickReply",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("quick-reply").version(d("WAWebModelStorageVersions").quickReplyCreateTable(),[b("id"),c("shortcut"),c("message"),c("count"),c("keywords")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("quick-reply")}g.addTable=a;g.getQuickReplyTable=b}),98);
__d("WAWebSchemaRecentStickers",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("recent-stickers").version(d("WAWebModelStorageVersions").recentStickersCreateTable(),[b("id"),c("timestamp"),c("sticker"),c("msgId"),c("weight"),c("isNewSticker")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("recent-stickers")}g.addTable=a;g.getRecentStickersTable=b}),98);
__d("WAWebSchemaReportingInfo",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositeIndex,f=b.addIndex,g=b.addAutoIncrementingPrimaryKey;b=b.addEncryptedColumn;a.add("reporting-info").version(d("WAWebModelStorageVersions").reportingInfoTable(),[g("id"),c("msgKey"),c("stanzaId"),c("reportingTag"),c("reportingToken"),b("reportingTokenContentOpaqueData",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("version"),c("msgTs"),c("receivedTs"),e(["msgKey","msgTs"]),f("receivedTs")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("reporting-info")}g.addTable=a;g.getReportingInfoTable=b}),98);
__d("WAWebSchemaReportingToken",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addIndex;b=b.addUserDefinedPrimaryKey;a.add("reporting-token").version(d("WAWebModelStorageVersions").reportingTokenTable(),[b("id"),c("reportingTag"),c("reportingTokenContent"),c("version")]).version(d("WAWebModelStorageVersions").reportingTokenTableTsIndex(),[c("ts"),e("ts")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("reporting-token")}g.addTable=a;g.getReportingTokenTable=b}),98);
__d("WAWebSchemaStickerDownload",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("sticker-download").version(d("WAWebModelStorageVersions").stickerDownloadCreateTable(),[b("id"),c("timestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("sticker-download")}g.addTable=a;g.getStickerDownloadTable=b}),98);
__d("WAWebSchemaSubgroupSuggestion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("subgroup-suggestion").version(d("WAWebModelStorageVersions").subgroupSuggestionCreateTable(),[e("id"),c("parentGroupId"),b("parentGroupId"),c("subject"),c("desc"),c("owner"),c("t")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaSubgroupSuggestionV2",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("subgroup-suggestion-v2").version(d("WAWebModelStorageVersions").subgroupSuggestionV2CreateTable(),[e(["parentGroupId","id","owner"]),b("parentGroupId"),c("subject"),c("desc"),c("t"),c("isExistingGroup"),c("participantCount"),c("hiddenSubgroup")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("subgroup-suggestion-v2")}g.addTable=a;g.getSubgroupSuggestionTable=b}),98);
__d("WAWebSchemaSubscription",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("subscription").version(d("WAWebModelStorageVersions").subscriptionCreateTable(),[b("id"),c("isDeactivated"),c("isAutoRenewing"),c("expirationDate")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("subscription")}g.addTable=a;g.getSubscriptionTable=b}),98);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({SET:0,REMOVE:1});c={};e={};f={};b={};var h={},i={},j={},k={},l={},m={},n={};c.internalSpec={version:[1,(d=d("WAProtoConst")).TYPES.UINT64]};e.internalSpec={code:[1,d.TYPES.UINT64],text:[2,d.TYPES.STRING]};f.internalSpec={blob:[1,d.TYPES.BYTES]};b.internalSpec={blob:[1,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.BYTES]};i.internalSpec={index:[1,d.TYPES.MESSAGE,f],value:[2,d.TYPES.MESSAGE,b],keyId:[3,d.TYPES.MESSAGE,h]};j.internalSpec={mediaKey:[1,d.TYPES.BYTES],directPath:[2,d.TYPES.STRING],handle:[3,d.TYPES.STRING],fileSizeBytes:[4,d.TYPES.UINT64],fileSha256:[5,d.TYPES.BYTES],fileEncSha256:[6,d.TYPES.BYTES]};k.internalSpec={version:[1,d.TYPES.MESSAGE,c],records:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],mac:[3,d.TYPES.BYTES],keyId:[4,d.TYPES.MESSAGE,h]};l.internalSpec={mutations:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};m.internalSpec={operation:[1,d.TYPES.ENUM,a],record:[2,d.TYPES.MESSAGE,i]};n.internalSpec={version:[1,d.TYPES.MESSAGE,c],mutations:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m],externalMutations:[3,d.TYPES.MESSAGE,j],snapshotMac:[4,d.TYPES.BYTES],patchMac:[5,d.TYPES.BYTES],keyId:[6,d.TYPES.MESSAGE,h],exitCode:[7,d.TYPES.MESSAGE,e],deviceIndex:[8,d.TYPES.UINT32],clientDebugData:[9,d.TYPES.BYTES]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);
__d("WAProtobufsUserPassword.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,PBKDF2_HMAC_SHA512:1,PBKDF2_HMAC_SHA384:2});c=b("$InternalEnum")({UTF8:0,UTF8_BROKEN:1});e={};f={};b={};e.internalSpec={encoding:[1,(d=d("WAProtoConst")).TYPES.ENUM,c],transformer:[2,d.TYPES.ENUM,a],transformerArg:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],transformedData:[4,d.TYPES.BYTES]};f.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,b]};b.internalSpec={asBlob:[1,d.TYPES.BYTES],asUnsignedInteger:[2,d.TYPES.UINT32],__oneofs__:{value:["asBlob","asUnsignedInteger"]}};g.UserPassword$Transformer=a;g.UserPassword$Encoding=c;g.UserPasswordSpec=e;g.UserPassword$TransformerArgSpec=f;g.UserPassword$TransformerArg$ValueSpec=b}),98);
__d("WAProtobufsChatLockSettings.pb",["WAProtoConst","WAProtobufsUserPassword.pb"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={hideLockedChats:[1,d("WAProtoConst").TYPES.BOOL],secretCode:[2,d("WAProtoConst").TYPES.MESSAGE,d("WAProtobufsUserPassword.pb").UserPasswordSpec]};g.ChatLockSettingsSpec=a}),98);
__d("WAProtobufsDeviceCapabilities.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,MINIMAL:1,FULL:2});c={};c.internalSpec={chatLockSupportLevel:[1,d("WAProtoConst").TYPES.ENUM,a]};g.DeviceCapabilities$ChatLockSupportLevel=a;g.DeviceCapabilitiesSpec=c}),98);
__d("WAProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={remoteJid:[1,(b=d("WAProtoConst")).TYPES.STRING],fromMe:[2,b.TYPES.BOOL],id:[3,b.TYPES.STRING],participant:[4,b.TYPES.STRING]};g.MessageKeySpec=a}),98);
__d("WASyncAction.pb",["$InternalEnum","WAProtoConst","WAProtobufsChatLockSettings.pb","WAProtobufsDeviceCapabilities.pb","WAProtocol.pb"],(function(a,b,c,d,e,f,g){var h;c=(a=b("$InternalEnum"))({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});e=a({NONE:0,SCHEDULED:1,PRIVACY:2,LIGHTWEIGHT:3});f=a({CONNECTED:0,REJECTED:1,CANCELLED:2,ACCEPTEDELSEWHERE:3,MISSED:4,INVALID:5,UNAVAILABLE:6,UPCOMING:7,FAILED:8,ABANDONED:9,ONGOING:10});b=a({ACTIVE:0});var aa=a({ACTIVE:0,INACTIVE:1}),ba=a({UNSTRUCTURED:1,STRUCTURED:2}),ca=a({ALLOW_LIST:0,DENY_LIST:1,CONTACTS:2}),da=a({PERSONALIZED:0});a=a({ANDROID:0,SMBA:1,IPHONE:2,SMBI:3,WEB:4,UWP:5,DARWIN:6});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={},R={},S={},T={},U={},V={},W={},X={},Y={},Z={},$={},ea={},fa={},ga={},ha={},ia={},ja={},ka={},la={},ma={},na={},oa={},pa={},qa={},ra={},sa={};i.internalSpec={emoji:[1,(h=d("WAProtoConst")).TYPES.STRING],weight:[2,h.TYPES.FLOAT]};j.internalSpec={callResult:[1,h.TYPES.ENUM,f],isDndMode:[2,h.TYPES.BOOL],silenceReason:[3,h.TYPES.ENUM,e],duration:[4,h.TYPES.INT64],startTime:[5,h.TYPES.INT64],isIncoming:[6,h.TYPES.BOOL],isVideo:[7,h.TYPES.BOOL],isCallLink:[8,h.TYPES.BOOL],callLinkToken:[9,h.TYPES.STRING],scheduledCallId:[10,h.TYPES.STRING],callId:[11,h.TYPES.STRING],callCreatorJid:[12,h.TYPES.STRING],groupJid:[13,h.TYPES.STRING],participants:[14,h.FLAGS.REPEATED|h.TYPES.MESSAGE,k],callType:[15,h.TYPES.ENUM,c]};k.internalSpec={userJid:[1,h.TYPES.STRING],callResult:[2,h.TYPES.ENUM,f]};l.internalSpec={timestamp:[1,h.TYPES.INT64],starAction:[2,h.TYPES.MESSAGE,qa],contactAction:[3,h.TYPES.MESSAGE,pa],muteAction:[4,h.TYPES.MESSAGE,oa],pinAction:[5,h.TYPES.MESSAGE,na],securityNotificationSetting:[6,h.TYPES.MESSAGE,ma],pushNameSetting:[7,h.TYPES.MESSAGE,la],quickReplyAction:[8,h.TYPES.MESSAGE,ja],recentEmojiWeightsAction:[11,h.TYPES.MESSAGE,ga],labelEditAction:[14,h.TYPES.MESSAGE,ha],labelAssociationAction:[15,h.TYPES.MESSAGE,ia],localeSetting:[16,h.TYPES.MESSAGE,ka],archiveChatAction:[17,h.TYPES.MESSAGE,fa],deleteMessageForMeAction:[18,h.TYPES.MESSAGE,ea],keyExpiration:[19,h.TYPES.MESSAGE,U],markChatAsReadAction:[20,h.TYPES.MESSAGE,$],clearChatAction:[21,h.TYPES.MESSAGE,Z],deleteChatAction:[22,h.TYPES.MESSAGE,Y],unarchiveChatsSetting:[23,h.TYPES.MESSAGE,X],primaryFeature:[24,h.TYPES.MESSAGE,T],androidUnsupportedActions:[26,h.TYPES.MESSAGE,S],agentAction:[27,h.TYPES.MESSAGE,R],subscriptionAction:[28,h.TYPES.MESSAGE,Q],userStatusMuteAction:[29,h.TYPES.MESSAGE,P],timeFormatAction:[30,h.TYPES.MESSAGE,O],nuxAction:[31,h.TYPES.MESSAGE,N],primaryVersionAction:[32,h.TYPES.MESSAGE,M],stickerAction:[33,h.TYPES.MESSAGE,K],removeRecentStickerAction:[34,h.TYPES.MESSAGE,L],chatAssignment:[35,h.TYPES.MESSAGE,J],chatAssignmentOpenedStatus:[36,h.TYPES.MESSAGE,I],pnForLidChatAction:[37,h.TYPES.MESSAGE,H],marketingMessageAction:[38,h.TYPES.MESSAGE,G],marketingMessageBroadcastAction:[39,h.TYPES.MESSAGE,F],externalWebBetaAction:[40,h.TYPES.MESSAGE,E],privacySettingRelayAllCalls:[41,h.TYPES.MESSAGE,D],callLogAction:[42,h.TYPES.MESSAGE,C],statusPrivacy:[44,h.TYPES.MESSAGE,B],botWelcomeRequestAction:[45,h.TYPES.MESSAGE,A],deleteIndividualCallLog:[46,h.TYPES.MESSAGE,z],labelReorderingAction:[47,h.TYPES.MESSAGE,y],paymentInfoAction:[48,h.TYPES.MESSAGE,x],customPaymentMethodsAction:[49,h.TYPES.MESSAGE,u],lockChatAction:[50,h.TYPES.MESSAGE,t],chatLockSettings:[51,h.TYPES.MESSAGE,d("WAProtobufsChatLockSettings.pb").ChatLockSettingsSpec],wamoUserIdentifierAction:[52,h.TYPES.MESSAGE,s],privacySettingDisableLinkPreviewsAction:[53,h.TYPES.MESSAGE,r],deviceCapabilities:[54,h.TYPES.MESSAGE,d("WAProtobufsDeviceCapabilities.pb").DeviceCapabilitiesSpec],noteEditAction:[55,h.TYPES.MESSAGE,q],favoritesAction:[56,h.TYPES.MESSAGE,o],merchantPaymentPartnerAction:[57,h.TYPES.MESSAGE,n],waffleAccountLinkStateAction:[58,h.TYPES.MESSAGE,m]};m.internalSpec={linkState:[2,h.TYPES.ENUM,b]};n.internalSpec={status:[1,h.FLAGS.REQUIRED|h.TYPES.ENUM,aa],country:[2,h.FLAGS.REQUIRED|h.TYPES.STRING],gatewayName:[3,h.TYPES.STRING],credentialId:[4,h.TYPES.STRING]};o.internalSpec={favorites:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,p]};p.internalSpec={id:[1,h.TYPES.STRING]};q.internalSpec={type:[1,h.TYPES.ENUM,ba],chatJid:[2,h.TYPES.STRING],createdAt:[3,h.TYPES.INT64],deleted:[4,h.TYPES.BOOL],unstructuredContent:[5,h.TYPES.STRING]};r.internalSpec={isPreviewsDisabled:[1,h.TYPES.BOOL]};s.internalSpec={identifier:[1,h.TYPES.STRING]};t.internalSpec={locked:[1,h.TYPES.BOOL]};u.internalSpec={customPaymentMethods:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.internalSpec={credentialId:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],country:[2,h.FLAGS.REQUIRED|h.TYPES.STRING],type:[3,h.FLAGS.REQUIRED|h.TYPES.STRING],metadata:[4,h.FLAGS.REPEATED|h.TYPES.MESSAGE,w]};w.internalSpec={key:[1,h.FLAGS.REQUIRED|h.TYPES.STRING],value:[2,h.FLAGS.REQUIRED|h.TYPES.STRING]};x.internalSpec={cpi:[1,h.TYPES.STRING]};y.internalSpec={sortedLabelIds:[1,h.FLAGS.REPEATED|h.TYPES.INT32]};z.internalSpec={peerJid:[1,h.TYPES.STRING],isIncoming:[2,h.TYPES.BOOL]};A.internalSpec={isSent:[1,h.TYPES.BOOL]};B.internalSpec={mode:[1,h.TYPES.ENUM,ca],userJid:[2,h.FLAGS.REPEATED|h.TYPES.STRING]};C.internalSpec={callLogRecord:[1,h.TYPES.MESSAGE,j]};D.internalSpec={isEnabled:[1,h.TYPES.BOOL]};E.internalSpec={isOptIn:[1,h.TYPES.BOOL]};F.internalSpec={repliedCount:[1,h.TYPES.INT32]};G.internalSpec={name:[1,h.TYPES.STRING],message:[2,h.TYPES.STRING],type:[3,h.TYPES.ENUM,da],createdAt:[4,h.TYPES.INT64],lastSentAt:[5,h.TYPES.INT64],isDeleted:[6,h.TYPES.BOOL],mediaId:[7,h.TYPES.STRING]};H.internalSpec={pnJid:[1,h.TYPES.STRING]};I.internalSpec={chatOpened:[1,h.TYPES.BOOL]};J.internalSpec={deviceAgentID:[1,h.TYPES.STRING]};K.internalSpec={url:[1,h.TYPES.STRING],fileEncSha256:[2,h.TYPES.BYTES],mediaKey:[3,h.TYPES.BYTES],mimetype:[4,h.TYPES.STRING],height:[5,h.TYPES.UINT32],width:[6,h.TYPES.UINT32],directPath:[7,h.TYPES.STRING],fileLength:[8,h.TYPES.UINT64],isFavorite:[9,h.TYPES.BOOL],deviceIdHint:[10,h.TYPES.UINT32],isLottie:[11,h.TYPES.BOOL]};L.internalSpec={lastStickerSentTs:[1,h.TYPES.INT64]};M.internalSpec={version:[1,h.TYPES.STRING]};N.internalSpec={acknowledged:[1,h.TYPES.BOOL]};O.internalSpec={isTwentyFourHourFormatEnabled:[1,h.TYPES.BOOL]};P.internalSpec={muted:[1,h.TYPES.BOOL]};Q.internalSpec={isDeactivated:[1,h.TYPES.BOOL],isAutoRenewing:[2,h.TYPES.BOOL],expirationDate:[3,h.TYPES.INT64]};R.internalSpec={name:[1,h.TYPES.STRING],deviceID:[2,h.TYPES.INT32],isDeleted:[3,h.TYPES.BOOL]};S.internalSpec={allowed:[1,h.TYPES.BOOL]};T.internalSpec={flags:[1,h.FLAGS.REPEATED|h.TYPES.STRING]};U.internalSpec={expiredKeyEpoch:[1,h.TYPES.INT32]};V.internalSpec={key:[1,h.TYPES.MESSAGE,d("WAProtocol.pb").MessageKeySpec],timestamp:[2,h.TYPES.INT64]};W.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,V]};X.internalSpec={unarchiveChats:[1,h.TYPES.BOOL]};Y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,W]};Z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,W]};$.internalSpec={read:[1,h.TYPES.BOOL],messageRange:[2,h.TYPES.MESSAGE,W]};ea.internalSpec={deleteMedia:[1,h.TYPES.BOOL],messageTimestamp:[2,h.TYPES.INT64]};fa.internalSpec={archived:[1,h.TYPES.BOOL],messageRange:[2,h.TYPES.MESSAGE,W]};ga.internalSpec={weights:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i]};ha.internalSpec={name:[1,h.TYPES.STRING],color:[2,h.TYPES.INT32],predefinedId:[3,h.TYPES.INT32],deleted:[4,h.TYPES.BOOL],orderIndex:[5,h.TYPES.INT32]};ia.internalSpec={labeled:[1,h.TYPES.BOOL]};ja.internalSpec={shortcut:[1,h.TYPES.STRING],message:[2,h.TYPES.STRING],keywords:[3,h.FLAGS.REPEATED|h.TYPES.STRING],count:[4,h.TYPES.INT32],deleted:[5,h.TYPES.BOOL]};ka.internalSpec={locale:[1,h.TYPES.STRING]};la.internalSpec={name:[1,h.TYPES.STRING]};ma.internalSpec={showNotification:[1,h.TYPES.BOOL]};na.internalSpec={pinned:[1,h.TYPES.BOOL]};oa.internalSpec={muted:[1,h.TYPES.BOOL],muteEndTimestamp:[2,h.TYPES.INT64],autoMuted:[3,h.TYPES.BOOL]};pa.internalSpec={fullName:[1,h.TYPES.STRING],firstName:[2,h.TYPES.STRING],lidJid:[3,h.TYPES.STRING],saveOnPrimaryAddressbook:[4,h.TYPES.BOOL]};qa.internalSpec={starred:[1,h.TYPES.BOOL]};ra.internalSpec={index:[1,h.TYPES.BYTES],value:[2,h.TYPES.MESSAGE,l],padding:[3,h.TYPES.BYTES],version:[4,h.TYPES.INT32]};sa.internalSpec={currentLthash:[1,h.TYPES.BYTES],newLthash:[2,h.TYPES.BYTES],patchVersion:[3,h.TYPES.BYTES],collectionName:[4,h.TYPES.BYTES],firstFourBytesFromAHashOfSnapshotMacKey:[5,h.TYPES.BYTES],newLthashSubtract:[6,h.TYPES.BYTES],numberAdd:[7,h.TYPES.INT32],numberRemove:[8,h.TYPES.INT32],numberOverride:[9,h.TYPES.INT32],senderPlatform:[10,h.TYPES.ENUM,a],isSenderPrimary:[11,h.TYPES.BOOL]};g.CallLogRecord$CallType=c;g.CallLogRecord$SilenceReason=e;g.CallLogRecord$CallResult=f;g.SyncActionValue$WaffleAccountLinkStateAction$AccountLinkState=b;g.SyncActionValue$MerchantPaymentPartnerAction$Status=aa;g.SyncActionValue$NoteEditAction$NoteType=ba;g.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=ca;g.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=da;g.PatchDebugData$Platform=a;g.RecentEmojiWeightSpec=i;g.CallLogRecordSpec=j;g.CallLogRecord$ParticipantInfoSpec=k;g.SyncActionValueSpec=l;g.SyncActionValue$WaffleAccountLinkStateActionSpec=m;g.SyncActionValue$MerchantPaymentPartnerActionSpec=n;g.SyncActionValue$FavoritesActionSpec=o;g.SyncActionValue$FavoritesAction$FavoriteSpec=p;g.SyncActionValue$NoteEditActionSpec=q;g.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=r;g.SyncActionValue$WamoUserIdentifierActionSpec=s;g.SyncActionValue$LockChatActionSpec=t;g.SyncActionValue$CustomPaymentMethodsActionSpec=u;g.SyncActionValue$CustomPaymentMethodSpec=v;g.SyncActionValue$CustomPaymentMethodMetadataSpec=w;g.SyncActionValue$PaymentInfoActionSpec=x;g.SyncActionValue$LabelReorderingActionSpec=y;g.SyncActionValue$DeleteIndividualCallLogActionSpec=z;g.SyncActionValue$BotWelcomeRequestActionSpec=A;g.SyncActionValue$StatusPrivacyActionSpec=B;g.SyncActionValue$CallLogActionSpec=C;g.SyncActionValue$PrivacySettingRelayAllCallsSpec=D;g.SyncActionValue$ExternalWebBetaActionSpec=E;g.SyncActionValue$MarketingMessageBroadcastActionSpec=F;g.SyncActionValue$MarketingMessageActionSpec=G;g.SyncActionValue$PnForLidChatActionSpec=H;g.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=I;g.SyncActionValue$ChatAssignmentActionSpec=J;g.SyncActionValue$StickerActionSpec=K;g.SyncActionValue$RemoveRecentStickerActionSpec=L;g.SyncActionValue$PrimaryVersionActionSpec=M;g.SyncActionValue$NuxActionSpec=N;g.SyncActionValue$TimeFormatActionSpec=O;g.SyncActionValue$UserStatusMuteActionSpec=P;g.SyncActionValue$SubscriptionActionSpec=Q;g.SyncActionValue$AgentActionSpec=R;g.SyncActionValue$AndroidUnsupportedActionsSpec=S;g.SyncActionValue$PrimaryFeatureSpec=T;g.SyncActionValue$KeyExpirationSpec=U;g.SyncActionValue$SyncActionMessageSpec=V;g.SyncActionValue$SyncActionMessageRangeSpec=W;g.SyncActionValue$UnarchiveChatsSettingSpec=X;g.SyncActionValue$DeleteChatActionSpec=Y;g.SyncActionValue$ClearChatActionSpec=Z;g.SyncActionValue$MarkChatAsReadActionSpec=$;g.SyncActionValue$DeleteMessageForMeActionSpec=ea;g.SyncActionValue$ArchiveChatActionSpec=fa;g.SyncActionValue$RecentEmojiWeightsActionSpec=ga;g.SyncActionValue$LabelEditActionSpec=ha;g.SyncActionValue$LabelAssociationActionSpec=ia;g.SyncActionValue$QuickReplyActionSpec=ja;g.SyncActionValue$LocaleSettingSpec=ka;g.SyncActionValue$PushNameSettingSpec=la;g.SyncActionValue$SecurityNotificationSettingSpec=ma;g.SyncActionValue$PinActionSpec=na;g.SyncActionValue$MuteActionSpec=oa;g.SyncActionValue$ContactActionSpec=pa;g.SyncActionValue$StarActionSpec=qa;g.SyncActionDataSpec=ra;g.PatchDebugDataSpec=sa}),98);
__d("WASyncdCollectionHandlerTypesConverter",["WAServerSync.pb","WASyncAction.pb","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a);return d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,{value:a}).readBuffer()}function a(a,b){return a.map(function(a){var c=h(a.binarySyncAction);return{index:a.index,action:a.action,binarySyncData:c,actionState:b,version:a.version,keyId:a.keyId,indexMac:a.indexMac,valueMac:a.valueMac,collection:a.collection,timestamp:a.timestamp,isOutgoing:!0,isIndividualMutation:!1}})}function b(a,b,c,d,e){return{index:a.index,binarySyncData:a.binarySyncData,version:a.version,keyId:a.keyId,indexMac:a.indexMac,valueMac:a.valueMac,collection:a.collection,timestamp:a.timestamp,action:c,actionState:b,modelId:d,modelType:e!=null?e:void 0,isOutgoing:!1,isIndividualMutation:!1}}function c(a){return a.map(function(a){return{collection:a.collection,index:a.index,action:a.action,indexMac:a.indexMac,keyId:a.keyId,operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,binarySyncData:a.binarySyncData,valueMac:a.valueMac,version:a.version}})}g.syncActionToSyncData=h;g.encryptedUploadMutationsToSyncActions=a;g.setMutationToSyncAction=b;g.syncActionsToDecryptedMutation=c}),98);
__d("WAWebSchemaSyncActions",["WALogger","WASyncdCollectionHandlerTypesConverter","WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: binarySyncAction should not be null when binarySyncData is null"]);h=function(){return a};return a}function i(a){var b=a.index,e=a.binarySyncAction,f=a.actionState,g=a.version,i=a.keyId,j=a.modelId,k=a.modelType,l=a.indexMac,m=a.valueMac,n=a.collection,o=a.timestamp,p=a.action,q=a.isOutgoing,r=a.isIndividualMutation;a=a.binarySyncData;if(a==null){if(e==null){d("WALogger").ERROR(h()).tags("syncd").sendLogs("syncd: syncd binarySyncAction should not be null when binarySyncData is null");throw c("err")("syncd: binarySyncAction should not be null when binarySyncData is null")}a=d("WASyncdCollectionHandlerTypesConverter").syncActionToSyncData(e)}return{index:b,binarySyncData:a,actionState:f,version:g,keyId:i,modelId:j,modelType:k,indexMac:l,valueMac:m,collection:n,timestamp:o,action:p,isOutgoing:q,isIndividualMutation:r}}function a(a){var b=a.keyId;return babelHelpers["extends"]({},a,{keyId:d("WASyncdKeyTypes").toSyncKeyId(b)})}function b(a){a=babelHelpers["extends"]({},a);a.keyId!=null&&(a.keyId=d("WASyncdKeyTypes").fromSyncKeyId(a.keyId));return a}function e(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.addCompositeIndex;a.add("sync-actions").version(d("WAWebModelStorageVersions").syncActionsCreateTable(),[e("index"),c("keyId"),c("version"),c("actionState"),f("actionState"),c("modelId"),c("modelType"),b(["modelId","modelType","actionState"]),c("valueMac"),c("indexMac"),f("indexMac"),c("collection"),f("collection"),c("timestamp"),c("action"),f("action"),c("binarySyncAction"),c("binarySyncData"),c("isOutgoing"),c("isIndividualMutation")]).view(i)}function f(){return d("WAWebModelStorageUtils").getStorage().table("sync-actions")}g.convertToSyncActionFromRow=a;g.convertFromSyncActionToRow=b;g.addTable=e;g.getSyncActionsTable=f}),98);
__d("WAWebSchemaSyncKeys",["WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(a){var b=a.keyId,c=a.keyData;return babelHelpers["extends"]({},a,{keyId:d("WASyncdKeyTypes").toSyncKeyId(b.buffer),keyData:d("WASyncdKeyTypes").toSyncKeyData(c)})}function b(a){var b=a.keyId,c=a.keyData;return babelHelpers["extends"]({},a,{keyId:new Uint8Array(d("WASyncdKeyTypes").fromSyncKeyId(b)),keyData:d("WASyncdKeyTypes").fromSyncKeyData(c)})}function c(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("sync-keys").version(d("WAWebModelStorageVersions").syncKeysCreateTable(),[f("keyId"),c("timestamp"),c("fingerprint"),e("keyData",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),c("keyEpoch"),b("keyEpoch")]).view(function(a){return a})}function e(){return d("WAWebModelStorageUtils").getStorage().table("sync-keys")}g.convertToSyncKeyFromRow=a;g.convertFromSyncKeyToRow=b;g.addTable=c;g.getSyncKeysTable=e}),98);
__d("WAWebSchemaSyncdLogs",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey,j=c.addIndex;function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add("syncd-logs").version(d("WAWebModelStorageVersions").syncdLogsCreateTable(),[i("id"),h("ts"),h("collection"),j("collection"),h("log")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("syncd-logs")}g.addTable=a;g.getSyncdLogsTable=b}),98);
__d("WAWebSchemaTasksScheduledTime",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("tasks-scheduled-time").version(d("WAWebModelStorageVersions").tasksScheduledTimeCreateTable(),[b("taskName"),c("time")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("tasks-scheduled-time")}g.addTable=a;g.getTasksScheduledTimeTable=b}),98);
__d("WAWebUserPrefsDBSettings",["WAWebUserPrefsCacheStorage","WAWebUserPrefsKeys","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a!=null?yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.setItemToCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED,a):yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.removeItemFromCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED)});return h.apply(this,arguments)}function c(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.getItemFromCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED));return a});return i.apply(this,arguments)}g.setColumnPackingValueToStorage=a;g.getColumnPackingValueFromStorage=c}),98);
__d("WAWebStorageGatingUtils",["WALogger","WAWebModelStorageUtils","WAWebUserPrefsDBSettings","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[column-serialization] enabled from url request"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebModelStorageUtils").storageExists());if(b){b=(yield d("WAWebUserPrefsDBSettings").getColumnPackingValueFromStorage());if(b==null){yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(!1);return!1}return b}if(!c("gkx")("26258")&&URLSearchParams){b=new URLSearchParams(window.location.search);b=b.get("pack");if(b!=null){d("WALogger").LOG(h());yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(b==="true"||b==="1");return!0}}yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(a);return a});return i.apply(this,arguments)}g.columnPackingEnabled=a}),98);
__d("WAWebModelStorageInitialize",["WALogger","WAWeb-dexie","WAWebCommentSchema","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebEventResponsesSchema","WAWebModelStorageUtils","WAWebPinInChatSchema","WAWebPollsVotesSchema","WAWebPremiumMessageSchema","WAWebSchemaAbPropConfig","WAWebSchemaAbPropEventSamplingConfig","WAWebSchemaActiveMessageRanges","WAWebSchemaAgent","WAWebSchemaBlocklist","WAWebSchemaBotProfile","WAWebSchemaBusinessProfile","WAWebSchemaCTWASuggestion","WAWebSchemaCart","WAWebSchemaChat","WAWebSchemaChatAssignment","WAWebSchemaChatThreadLoggingPendingEvents","WAWebSchemaCollectionVersion","WAWebSchemaContact_DEPRECATED","WAWebSchemaDeviceList","WAWebSchemaDirectConnectionKeys","WAWebSchemaEncryptedMutations","WAWebSchemaFavorite","WAWebSchemaFavoriteStickers","WAWebSchemaFtsIndexingQueue","WAWebSchemaGroupInviteV4","WAWebSchemaGroupMetadata","WAWebSchemaHistorySyncNotification","WAWebSchemaInAppBanner","WAWebSchemaInactiveReceipt","WAWebSchemaLabel","WAWebSchemaLabelAssociation","WAWebSchemaLidChatState","WAWebSchemaLidDisplayNameMapping","WAWebSchemaLidPnMapping","WAWebSchemaMembershipApprovalRequest","WAWebSchemaMessage","WAWebSchemaMessageAssociation","WAWebSchemaMessageHistory","WAWebSchemaMessageInfo","WAWebSchemaMessageOrphans","WAWebSchemaMissingKeys","WAWebSchemaNewsletterMetadata","WAWebSchemaNewsletterMyVotes","WAWebSchemaNewsletterPollsVotes","WAWebSchemaNewsletterReactions","WAWebSchemaNonMessageDataRequest","WAWebSchemaNote","WAWebSchemaOrphanPaymentNotification","WAWebSchemaOrphanReceipt","WAWebSchemaOrphanRevoke","WAWebSchemaOrphanTcToken","WAWebSchemaParticipant","WAWebSchemaPaymentBackgrounds","WAWebSchemaPeerMessage","WAWebSchemaPendingMutations","WAWebSchemaPrivacyDisallowedList","WAWebSchemaProfilePicThumb","WAWebSchemaQuickPromotions","WAWebSchemaQuickReply","WAWebSchemaReactions","WAWebSchemaRecentStickers","WAWebSchemaReportingInfo","WAWebSchemaReportingToken","WAWebSchemaSelfAddonMessageTypeTable","WAWebSchemaStickerDownload","WAWebSchemaSubgroupSuggestion","WAWebSchemaSubgroupSuggestionV2","WAWebSchemaSubscription","WAWebSchemaSyncActions","WAWebSchemaSyncKeys","WAWebSchemaSyncdLogs","WAWebSchemaTasksScheduledTime","WAWebSchemaUnifiedAddons","WAWebSchemaUnjoinedSubgroupMetadata","WAWebSchemaUserPrefs","WAWebSchemaVerifiedBusinessName","WAWebStorageGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(i==null){yield d("WAWebDbRolloutUtil").loadSchemaVersions();a=(yield d("WAWebStorageGatingUtils").columnPackingEnabled(!!(a==null?void 0:a.canPackColumns)));d("WAWebModelStorageUtils").createStorage({packColumns:a});d("WAWebSchemaAbPropConfig").addTable();d("WAWebSchemaAbPropEventSamplingConfig").addTable();d("WAWebSchemaActiveMessageRanges").addTable();d("WAWebSchemaAgent").addTable();d("WAWebSchemaBlocklist").addTable();d("WAWebSchemaBotProfile").addTable();d("WAWebSchemaCart").addTable();d("WAWebSchemaChat").addTable();d("WAWebSchemaChatAssignment").addTable();d("WAWebSchemaChatThreadLoggingPendingEvents").addTable();d("WAWebSchemaCollectionVersion").addTable();d("WAWebSchemaContact_DEPRECATED").addTable();d("WAWebSchemaDeviceList").addTable();d("WAWebSchemaDirectConnectionKeys").addTable();d("WAWebSchemaEncryptedMutations").addTable();d("WAWebSchemaFavorite").addTable();d("WAWebSchemaFavoriteStickers").addTable();d("WAWebSchemaFtsIndexingQueue").addTable();d("WAWebSchemaGroupInviteV4").addTable();d("WAWebSchemaGroupMetadata").addTable();d("WAWebSchemaHistorySyncNotification").addTable();d("WAWebSchemaInactiveReceipt").addTable();d("WAWebSchemaLabelAssociation").addTable();d("WAWebSchemaLabel").addTable();d("WAWebSchemaLidDisplayNameMapping").addTable();d("WAWebSchemaLidPnMapping").addTable();d("WAWebSchemaLidChatState").addTable();d("WAWebSchemaMessage").addTable();d("WAWebSchemaMessageHistory").addTable();d("WAWebSchemaMissingKeys").addTable();d("WAWebSchemaMessageInfo").addTable();d("WAWebSchemaOrphanPaymentNotification").addTable();d("WAWebSchemaOrphanReceipt").addTable();d("WAWebSchemaOrphanRevoke").addTable();d("WAWebSchemaOrphanTcToken").addTable();d("WAWebSchemaParticipant").addTable();d("WAWebSchemaPaymentBackgrounds").addTable();d("WAWebSchemaPeerMessage").addTable();d("WAWebSchemaPendingMutations").addTable();d("WAWebPollsVotesSchema").addTable();d("WAWebSchemaPrivacyDisallowedList").addTable();d("WAWebSchemaProfilePicThumb").addTable();d("WAWebSchemaQuickReply").addTable();d("WAWebSchemaReactions").addTable();d("WAWebSchemaRecentStickers").addTable();d("WAWebSchemaSubscription").addTable();d("WAWebSchemaSyncActions").addTable();d("WAWebSchemaSyncKeys").addTable();d("WAWebSchemaTasksScheduledTime").addTable();d("WAWebSchemaUnjoinedSubgroupMetadata").addTable();d("WAWebSchemaUserPrefs").addTable();d("WAWebSchemaVerifiedBusinessName").addTable();d("WAWebSchemaMessageOrphans").addTable();d("WAWebSchemaMembershipApprovalRequest").addTable();d("WAWebSchemaNonMessageDataRequest").addTable();d("WAWebSchemaCTWASuggestion").addTable();d("WAWebPinInChatSchema").addTable();d("WAWebSchemaInAppBanner").addTable();d("WAWebSchemaNewsletterMetadata").addTable();d("WAWebPremiumMessageSchema").addTable();d("WAWebSchemaQuickPromotions").addTable();d("WAWebSchemaSubgroupSuggestion").addTable();d("WAWebSchemaNewsletterReactions").addTable();d("WAWebSchemaSelfAddonMessageTypeTable").addTable();d("WAWebSchemaSubgroupSuggestionV2").addTable();d("WAWebSchemaSyncdLogs").addTable();d("WAWebCommentSchema").addTable();d("WAWebSchemaBusinessProfile").addTable();d("WAWebSchemaNewsletterMyVotes").addTable();d("WAWebSchemaNewsletterPollsVotes").addTable();d("WAWebSchemaReportingToken").addTable();d("WAWebEventResponsesSchema").addTable();d("WAWebSchemaNote").addTable();d("WAWebSchemaUnifiedAddons").addTable();d("WAWebSchemaReportingInfo").addTable();d("WAWebSchemaMessageAssociation").addTable();d("WAWebSchemaStickerDownload").addTable();i=d("WAWebModelStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize model storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a})}return i});return j.apply(this,arguments)}function e(){return d("WAWebModelStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebModelStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}function f(){i=null}g.initializeWithoutGKs=a;g.destroy=e;g.clearInitializePromise=f}),98);
__d("WAWebDBMessageDelete",["Promise","WALogger","WAWebBotGating","WAWebDBQueryAndRemoveLocalLabelAssociation","WAWebDBReportingTokenUtils","WAWebDBStoreRevokeMsgs","WAWebFtsLightClient","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaLabelAssociation","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeMessagesFromHistory: error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeMessagesFromHistory: delete "," messages"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] findAndDeleteAssociatedPluginMsg failed with error: ",", stack: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] Removing bot plugin msgs after delete for self"]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var c=[],e=[];return d("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){if(a.length>0)return d("WAWebSchemaMessage").getMessageTable().bulkGet(a,!1).then(function(a){a.forEach(function(a){(a==null?void 0:a.rowId)!=null&&c.push(String(a.rowId));var b=a==null?void 0:a.botResponseTargetId,d=a==null?void 0:a.internalId;(a==null?void 0:a.botPluginSearchProvider)!=null&&(a==null?void 0:a.botPluginSearchUrl)!=null&&b!=null&&d!=null&&e.push({internalId:d,targetId:b})})})}).then(function(){return d("WAWebModelStorageUtils").getStorage().lock(["message","label-association"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){c=d("WAWebDBQueryAndRemoveLocalLabelAssociation").queryAndRemoveLocalLabelAssociation(a.map(function(a){return{associationId:a,type:d("WAWebSchemaLabelAssociation").LabelAssociationType.Message}}));try{d("WAWebBotGating").isBotReceiveEnabled()&&(e.length>0&&(d("WALogger").LOG(l()),yield d("WAWebDBStoreRevokeMsgs").findAndDeleteAssociatedPluginMsg(e)))}catch(a){d("WALogger").ERROR(k(),a.name,a.stack).devConsole(a).sendLogs("Plugin carousel delete failed")}return(h||(h=b("Promise"))).all([d("WAWebSchemaMessage").getMessageTable().bulkRemove(a),c])});return function(a){return c.apply(this,arguments)}}())}).then(function(){c.length>0&&d("WAWebFtsLightClient").ftsLightClient.purge(c)["catch"](function(){})}).then(function(){d("WALogger").DEV(j(),String(a.length))}).then(function(){void d("WAWebDBReportingTokenUtils").handleDeleteReportingInfos(a,{removeWholeRow:!0})})["catch"](function(a){d("WALogger").ERROR(i(),a);throw a})});return m.apply(this,arguments)}function c(a){a=a.filter(function(a){return a.includes("status@broadcast")});return a.length>0?d("WAWebSchemaMessage").getMessageTable().bulkRemove(a):(h||(h=b("Promise"))).resolve()}g.removeMessagesFromHistory=a;g.removeStatusMessage=c}),98);
__d("WAWebDBMsgUtils",["$InternalEnum","WANullthrows","WAWebApiChat","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebE2EProtoUtils","WAWebLid1X1MigrationGating","WAWebMsgKey","WAWebSchemaMessage","WAWebWid","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({Message:1,MessageEdit:2});function a(a,b){return d("WAWebSchemaMessage").getMessageTable().bulkGet(a).then(function(a){return a.filter(Boolean).map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a,b)})})}function e(a,b){var e=[];a.forEach(function(a){var d=new(c("WAWebMsgKey"))({fromMe:!0,remote:b,id:a});e.push(d.toString());d=new(c("WAWebMsgKey"))({fromMe:!1,remote:b,id:a});e.push(d.toString())});return d("WAWebSchemaMessage").getMessageTable().startsWithAnyOf(["id"],e)}function i(a,b){var e;a instanceof c("WAWebMsgKey")?e=a.toString():e=a;return d("WAWebSchemaMessage").getMessageTable().get(e).then(function(a){return!a?null:d("WAWebDBMessageSerialization").messageFromDbRow(a,b)})}function f(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield i(a,b));if(e)return e;e=a instanceof c("WAWebMsgKey")?a:c("WAWebMsgKey").from(a);if(e.remote.isUser()){a=(yield d("WAWebApiChat").getMatChat_DEPRECATED(e.remote));e=new(c("WAWebMsgKey"))({fromMe:e.fromMe,remote:a,id:e.id});d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("incrementPnhCtwaDailyCount",{chatId:a});return i(e,b)}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.length===0)return b;var e=b;d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isAccountLidFieldMigrated()&&c("WAWebWid").isUser(a)&&!c("WAWebWid").isLid(a)&&(e=b.map(function(b){var c=b.timestamp;b=b.key;var d={};c!=null&&(d.timestamp=c);b!=null&&(d.key=babelHelpers["extends"]({},b,{remoteJid:a}));return d}));e=e.map(function(a){return d("WAWebE2EProtoUtils").protobufToMsgKey(c("WANullthrows")(a.key)).toString()});var f=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(e,!1));return b.filter(function(a,b){return f[b]!=null})});return l.apply(this,arguments)}function m(a){return d("WAWebSchemaMessage").getMessageTable().bulkGet(a,!1).then(function(a){return a.map(Boolean)})}function n(a){return d("WAWebSchemaMessage").getMessageTable().between(["internalId"],d("WAWebDBMessageUtils").beginningOfChat(a),d("WAWebDBMessageUtils").endOfChat(a))}g.PendingReadReceiptType=h;g.getMsgsByMsgKey=a;g.getMsgsByMsgIdsAndChatId=e;g.getMsgByMsgKey=i;g.getMsgByMsgKeyMat=f;g.filterReceivedMessagesInRange=k;g.getMsgsExistByMsgKey=m;g.getMsgsByChatId=n}),98);
__d("WAAckLevel",[],(function(a,b,c,d,e,f){"use strict";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);
__d("WAWebDBMarkFutureproofMessagesReparsed",["WALogger","WAWebMsgType","WAWebSchemaMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["markFutureproofMessagesReparsed: error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["markFutureproofMessagesReparsed: update "," messages"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.length===0)return;a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a));a=a.filter(Boolean).filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN});if(a.length===0)return;d("WALogger").DEV(i(),String(a.length));a=a.map(function(a){return{id:a.id.toString(),futureproofReparsed:!0}});yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(a)}catch(a){d("WALogger").ERROR(h(),a);throw a}});return j.apply(this,arguments)}g.markFutureproofMessagesReparsed=a}),98);
__d("WAWebDBProcessEditProtocolMsgs",["$InternalEnum","Promise","WAAckLevel","WALogger","WANullthrows","WATimeUtils","WAWeb-dexie","WAWebAddonQueryUtils","WAWebApiChat","WAWebBackendApi","WAWebBotGating","WAWebDBMarkFutureproofMessagesReparsed","WAWebDBMessageSerialization","WAWebDBMsgUtils","WAWebDBStoreMessageOrphans","WAWebFtsLightClient","WAWebLidMigrationUtils","WAWebMessageEditGatingUtils","WAWebMessageEditUtils","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] add unread mention."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] remove unread mention."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] updating unread chats"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] updating message rows"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] message has been updated by a newer edit. Will skip updating the message row."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] storing orphan edit protocol messages"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] processing edit protocol messages"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] protocol msg does not have a valid sender timestamp"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] sender is not the parent msg sender"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] protocol msg exceeds edit window, will be dropped"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] original message cannot be a forwarded message"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] original message msgId::"," type is "," which cannot be edited"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] protocol msg is missing original msg key"]);u=function(){return a};return a}var v=b("$InternalEnum").Mirrored(["Added","Removed"]);function a(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(a.length===0)return[];d("WALogger").DEV(o()).devConsole({protocolMsgs:a});var e=(yield d("WAWebAddonQueryUtils").getParentMsgsByMsgKey(a.map(function(a){return a.protocolMessageKey}).filter(Boolean))),f=z(a,e),g=[],h=[];f.sort(function(a,b){return c("WANullthrows")(b.latestEditSenderTimestampMs)-c("WANullthrows")(a.latestEditSenderTimestampMs)});for(f of f){var i=f.protocolMessageKey&&e.get(f.protocolMessageKey.toString());!i||i.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT?g.push(f):h.push(I(i,f))}yield A(g);i=h.filter(function(a){return a.isLatest});yield x(h,i);b&&(yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a.map(function(a){return a.id.toString()})));return i});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a.length&&(yield C(a),E(a.filter(function(a){return a.isLatest&&!d("WAWebMsgGetters").getIsNewsletterMsg(a.parentMsg)}).map(function(a){return a.parentMsg})),yield J(a)),b.length&&d("WAWebBackendApi").frontendFireAndForget("updateEditedMessagesAction",{messageEdits:b})});return y.apply(this,arguments)}function z(a,b){return a.filter(function(a){var e=a.protocolMessageKey;if(!e){d("WALogger").ERROR(u()).devConsole(a).sendLogs("message-edit-missing-original-msg-key");return!1}e=b.get(e.toString());if(e){var f=d("WAWebMessageEditUtils").msgTypeSupportsEditing(e.type)||e.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT;if(!f){d("WALogger").ERROR(t(),e.id,e.type).devConsole({parentMsg:e,protocolMsg:a}).sendLogs("message-edit-unsupported-msg-type");return!1}if(e.isForwarded===!0){d("WALogger").ERROR(s()).devConsole({parentMsg:e,protocolMsg:a}).sendLogs("message-edit-forwarded-message");return!1}f=c("WANullthrows")(e.t);var g=c("WANullthrows")(a.t);if(!d("WAWebMessageEditUtils").isParentWithinEditProcessingWindow({parentTsInSeconds:f,editTsInSeconds:g,msgKey:e.id})){d("WALogger").WARN(r()).devConsole({protocolMsg:a,parentTsInSeconds:f,editTsInSeconds:g});return!1}f=d("WAWebMsgGetters").getSender(e);g=d("WAWebMsgGetters").getSender(a);if(!d("WAWebMsgGetters").getIsNewsletterMsg(e)&&(!f||!g||!c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").toCommonAddressingMode(f,g)))){d("WALogger").ERROR(q()).devConsole({protocolMsg:a,parentMsgSender:f,protocolMsgSender:g}).sendLogs("message-edit-sender-mismatch");return!1}}if(a.latestEditSenderTimestampMs==null){d("WALogger").ERROR(p()).devConsole({protocolMsg:a}).sendLogs("message-edit-missing-timestamp");return!1}return!0})}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.length)return;d("WALogger").DEV(n()).devConsole({protocolMsgs:a});yield d("WAWebDBStoreMessageOrphans").storeMessageOrphans(a,function(a){return a.protocolMessageKey})});return B.apply(this,arguments)}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.length)return;yield d("WAWebModelStorageUtils").getStorage().lock(["message","chat"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c[0];c=c[1];var f=[],g=new Set();a.forEach(function(a){var b=a.parentMsg,c=a.editedMsgData,e=a.isLatest,h=a.protocolMsg;if(!e){d("WALogger").DEV(m()).devConsole({messageEdit:a});return}f.push(babelHelpers["extends"]({},b,c));if(!d("WAWebMsgGetters").getIsSentByMe(h)){e=h.id.remote.toString();g.add(e)}});var i=[];f.length&&(d("WALogger").DEV(l()).devConsole({editedMsgs:f}),i.push(e.bulkCreateOrMerge(f.map(d("WAWebDBMessageSerialization").dbRowFromMessage))));if(g.size){e=Array.from(g).map(function(a){return{id:a,unreadEditTimestampMs:d("WATimeUtils").unixTimeMs()}});d("WALogger").DEV(k()).devConsole({unreadChatUpdates:e});i.push(c.bulkCreateOrMerge(e))}yield (h||(h=b("Promise"))).all(i)});return function(a){return c.apply(this,arguments)}}())});return D.apply(this,arguments)}function E(a){if(!a.length)return;var e=c("lodash").uniq(a.map(function(a){return String(c("WANullthrows")(a.rowId))}));d("WAWebFtsLightClient").ftsLightClient.purge(e)["catch"](function(){});c("WAWeb-dexie").ignoreTransaction(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebFtsLightClient").ftsLightClient.addToIndexingTable(e),d("WAWebFtsLightClient").ftsLightClient.index()["catch"](function(){})}))}function F(a,b){return d("WAWebMsgGetters").getIsNewsletterMsg(a)&&!d("WAWebUserPrefsMeUser").isMeAccount(b.from)||a.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION}function G(a,b){if(d("WAWebMsgGetters").getIsSentByMe(a)){if(a.local===!0)return F(a,b)?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.CLOCK;return d("WAWebMsgKeyUtils").isNoteToSelf(a.id)?d("WAAckLevel").ACK.READ:d("WAAckLevel").ACK.SENT}return void 0}var H=new Map();function I(a,b){var e=Boolean(b.matchedText)||Boolean(b.description)||Boolean(b.title),f={latestEditMsgKey:b.latestEditMsgKey,latestEditSenderTimestampMs:b.latestEditSenderTimestampMs,errorCode:b.errorCode,ack:G(a,b),pendingReadReceipt:d("WAWebMsgGetters").getIsSentByMe(a)?void 0:d("WAWebDBMsgUtils").PendingReadReceiptType.MessageEdit},g=c("WANullthrows")(d("WAWebMessageEditUtils").getMsgEditType(a.type),"Unsupported message type for edits"),h,i,j;switch(g){case d("WAWebMessageEditUtils").MsgEditType.TextEdit:h=babelHelpers["extends"]({},f,{subtype:e?"url":void 0,body:b.body,mentionedJidList:b.mentionedJidList,groupMentions:b.groupMentions,title:b.title,description:b.description,matchedText:b.matchedText,inviteGrpType:b.inviteGrpType,thumbnail:b.thumbnail,richPreviewType:b.richPreviewType,doNotPlayInline:b.doNotPlayInline,thumbnailDirectPath:(e=b.thumbnailDirectPath)!=null?e:void 0,thumbnailSha256:(e=b.thumbnailSha256)!=null?e:void 0,thumbnailEncSha256:(e=b.thumbnailEncSha256)!=null?e:void 0,thumbnailHeight:(e=b.thumbnailHeight)!=null?e:void 0,thumbnailWidth:(e=b.thumbnailWidth)!=null?e:void 0,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp,botPluginSearchUrl:b.botPluginSearchUrl,botPluginSearchProvider:b.botPluginSearchProvider,botPluginReferenceIndex:b.botPluginReferenceIndex,botPluginType:b.botPluginType,botPluginMaybeParent:b.botPluginMaybeParent,botReelPluginThumbnailCdnUrl:b.botReelPluginThumbnailCdnUrl,botPluginSearchQuery:b.botPluginSearchQuery});break;case d("WAWebMessageEditUtils").MsgEditType.CaptionEdit:i=babelHelpers["extends"]({},f,{caption:b.caption,mentionedJidList:b.mentionedJidList,groupMentions:b.groupMentions,isCaptionByUser:!0});break;case d("WAWebMessageEditUtils").MsgEditType.EventEdit:j=babelHelpers["extends"]({},f,{eventName:b.eventName,eventDescription:b.eventDescription,eventLocation:b.eventLocation,eventStartTime:b.eventStartTime,eventEndTime:b.eventEndTime,eventJoinLink:b.eventJoinLink,isEventCanceled:b.isEventCanceled});break}e=c("WANullthrows")((f=(e=h)!=null?e:i)!=null?f:j);d("WAWebMsgGetters").getIsSentByMe(a)&&(b.count!=null&&(e.count=b.count));f=(f=(f=H.get(a.id.toString()))!=null?f:a.latestEditSenderTimestampMs)!=null?f:0;var k=c("WANullthrows")(b.latestEditSenderTimestampMs);f=k>=f;if(g===d("WAWebMessageEditUtils").MsgEditType.EventEdit){var l=Boolean(a.isEventCanceled),m=Boolean(b.isEventCanceled);!l&&m?f=!0:l&&!m&&(f=!1)}f&&H.set(a.id.toString(),k);var n;if(g!==d("WAWebMessageEditUtils").MsgEditType.EventEdit&&!d("WAWebMsgGetters").getIsSentByMe(a)){l=d("WAWebMsgGetters").getHasMentionOfMe(a);m=d("WAWebMsgGetters").getHasMentionOfMe(babelHelpers["extends"]({},a,e));l&&!m?n=v.Removed:!l&&m&&(n=v.Added)}d("WAWebBotGating").isBotReceiveEnabled()&&(d("WAWebMsgGetters").getIsMetaBotResponse(a)||a.botEditType!=null)&&(e.botEditType=b.botEditType,e.botEditTargetId=b.botEditTargetId);return{parentMsg:a,protocolMsg:b,editedMsgData:e,isLatest:f,mentionOfMe:n}}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMessageEditGatingUtils").receiveCaptionEditEnabled())return;var b=new Map(),c=new Map();for(a of a){var e=a.parentMsg,f=a.mentionOfMe,g=e.id.remote.toString();if(!f)continue;switch(f){case v.Removed:f=e.id.toString();var h=b.get(g);h||(h=[],b.set(g,h));h.push(f);break;case v.Added:h=c.get(g);h||(h=[],c.set(g,h));f={id:e.id.toString(),timestamp:e.t};h.push(f)}}b.size&&(d("WALogger").DEV(j()).devConsole(b),yield d("WAWebApiChat").removeUnreadMentionChat(b));c.size&&(d("WALogger").DEV(i()).devConsole(c),yield d("WAWebApiChat").addUnreadMentionChat(c))});return K.apply(this,arguments)}g.EditedMentionOfMe=v;g.processEditProtocolMsgs=a;g.updateMessageEditsLocally=x;g.generateMessageEdit=I}),98);
__d("WAWebHandlePlaceholderMsgKeyHashUtils",["WABase64","WACryptoHmac","WAWebABProps","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=null,i=new TextEncoder(),j=function(a){return i.encode(a).buffer};function k(){h||(h=d("WAWebUserPrefsMultiDevice").getChatThreadLoggingSecretB64().then(function(a){return a==null?null:d("WABase64").decodeB64(a)}));return h}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=(yield k());if(!c)return null;b=j(String(a.id.id+(a.id.fromMe?"1":"0")+((b=(b=a.id.remote)==null?void 0:b.toString({legacy:!0}))!=null?b:"")+((a=(b=a.id.participant)==null?void 0:b.toString({legacy:!0}))!=null?a:"")));a=(yield d("WACryptoHmac").hmacSha256(c,b));return d("WABase64").encodeB64(a)});return l.apply(this,arguments)}function c(){return d("WAWebABProps").getABPropConfigValue("placeholder_message_key_hash_logging")}g.getMessageKeyHash=a;g.messageKeyHashEnabled=c}),98);
__d("WAWebWamEnumPlaceholderAction",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,ADD:1,VIEW:2,POPULATE:3});f.PLACEHOLDER_ACTION=a}),66);
__d("WAWebWamEnumPlaceholderChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4,CHANNEL:5,INTEROP:6});f.PLACEHOLDER_CHAT_TYPE=a}),66);
__d("WAWebWamEnumPlaceholderPopulationType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,RETRY:1,PEER_MESSAGE:2,RESEND:3});f.PLACEHOLDER_POPULATION_TYPE=a}),66);
__d("WAWebWamEnumPlaceholderReasonType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,SIGNAL_NO_SESSION:1,DEVICE_VERIFICATION_FAILURE:2,UNKNOWN_SELF_DEVICE:3,SIGNAL_INVALID_KEY:4,SIGNAL_INVALID_KEY_ID:5,SIGNAL_INVALID_MESSAGE:6,DEVICE_VERIFICATION_FAILURE_SELF_PEER:7,UNKNOWN_COMPANION_NO_PREKEY:8,BAD_EPHEMERAL_SETTING:9,SIGNAL_FUTURE_MESSAGE:10,SIGNAL_INVALID_SIGNATURE:11,SIGNAL_BAD_MAC:12,SIGNAL_INVALID_SESSION:13});f.PLACEHOLDER_REASON_TYPE=a}),66);
__d("WAWebWamEnumPlaceholderType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,CIPHERTEXT:1,FANOUT:2,DOWNGRADE:3,FIXED_CONTENT:4,TEMPORARY:5,DROP:6});f.PLACEHOLDER_TYPE=a}),66);
__d("WAWebPlaceholderActivityWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumE2eDeviceType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumPlaceholderAction","WAWebWamEnumPlaceholderChatType","WAWebWamEnumPlaceholderPopulationType","WAWebWamEnumPlaceholderReasonType","WAWebWamEnumPlaceholderType","WAWebWamEnumSizeBucket","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PlaceholderActivity:[1980,{deviceCount:[9,a.TYPES.INTEGER],deviceSizeBucket:[8,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],e2eSenderType:[16,d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],isHostedChat:[19,a.TYPES.BOOLEAN],isLid:[12,a.TYPES.BOOLEAN],localAddressingMode:[20,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageBeforeReg:[15,a.TYPES.BOOLEAN],messageIsRevoke:[7,a.TYPES.BOOLEAN],messageKeyHash:[14,a.TYPES.STRING],messageMediaType:[6,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[5,d("WAWebWamEnumMessageType").MESSAGE_TYPE],participantCount:[10,a.TYPES.INTEGER],placeholderActionInd:[2,d("WAWebWamEnumPlaceholderAction").PLACEHOLDER_ACTION],placeholderAddReason:[11,d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE],placeholderChatTypeInd:[3,d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE],placeholderPopulationType:[17,d("WAWebWamEnumPlaceholderPopulationType").PLACEHOLDER_POPULATION_TYPE],placeholderTimePeriod:[4,a.TYPES.INTEGER],placeholderTypeInd:[1,d("WAWebWamEnumPlaceholderType").PLACEHOLDER_TYPE],typeOfGroup:[13,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{PlaceholderActivity:[]});g.PlaceholderActivityWamEvent=b}),98);
__d("WAWebWamGroupMetadataMetricUtils",["WAWebDBGroupsGroupMetadata","WAWebGroupType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a!=null&&a.isGroup()){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(a!=null)return d("WAWebGroupType").groupTypeToWamEnum(d("WAWebGroupType").getGroupTypeFromGroupMetadata(a))}});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return a==null?null:j(a)});return i.apply(this,arguments)}function j(a){return d("WAWebGroupType").getGroupTypeFromGroupMetadata(a)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP}g.getGroupTypeFromChatWid=a;g.isCagFromChatWid=c;g.isCagFromGroupMetadata=j}),98);
__d("WAWebHandlePlaceholderWam",["Promise","WATimeUtils","WAWebDBGroupsGroupMetadata","WAWebDBMessageSerialization","WAWebGroupType","WAWebHandlePlaceholderMsgKeyHashUtils","WAWebMsgGetters","WAWebPlaceholderActivityWamEvent","WAWebWamEnumPlaceholderAction","WAWebWamEnumPlaceholderChatType","WAWebWamEnumPlaceholderType","WAWebWamGroupMetadataMetricUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield n(a));a.forEach(function(a){a.placeholderActionInd=d("WAWebWamEnumPlaceholderAction").PLACEHOLDER_ACTION.ADD,a.commit()})});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)});a=(yield n(a));a.forEach(function(a){a.placeholderActionInd=d("WAWebWamEnumPlaceholderAction").PLACEHOLDER_ACTION.VIEW,a.commit()})});return j.apply(this,arguments)}function f(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield n(a,!0));a.forEach(function(a){a.placeholderActionInd=d("WAWebWamEnumPlaceholderAction").PLACEHOLDER_ACTION.POPULATE,a.commit()})});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f,g=a.id.remote;f=new(d("WAWebPlaceholderActivityWamEvent").PlaceholderActivityWamEvent)({placeholderChatTypeInd:t(g),placeholderTimePeriod:Math.max(d("WATimeUtils").unixTime()-((f=a.t)!=null?f:0),0),placeholderTypeInd:a.subtype==="fanout"?d("WAWebWamEnumPlaceholderType").PLACEHOLDER_TYPE.FANOUT:d("WAWebWamEnumPlaceholderType").PLACEHOLDER_TYPE.CIPHERTEXT,messageIsRevoke:d("WAWebMsgGetters").getIsRevoke(a),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(a),messageType:d("WAWebWamMsgUtils").getWamMessageType(a)});a.placeholderAddReason!=null&&(f.placeholderAddReason=a.placeholderAddReason);e&&a.placeholderPopulationType!=null&&(f.placeholderPopulationType=a.placeholderPopulationType);a.e2eSenderType!=null&&(f.e2eSenderType=a.e2eSenderType);c("WAWebWid").isGroup(g)?yield p(f,a,b):c("WAWebWid").isUser(g)&&(f.isLid=g.isLid());yield r(f,a);return f});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!1);var e=[],f=[];for(a of a)d("WAWebMsgGetters").getIsGroupMsg(a)?f.push(a):e.push(a);a=(yield d("WAWebDBGroupsGroupMetadata").bulkGetGroupMetadata(f.map(function(a){return a.id.remote}))).map(function(a,b){return[f[b],a]});return(h||(h=b("Promise"))).all([].concat(e.map(function(a){return l(a,null,c)}),a.map(function(a){var b=a[0];a=a[1];return l(b,a,c)})))});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebWamGroupMetricCache").getGroupMetrics(b.id.remote));e!=null&&(e.participantCount!=null&&(a.participantCount=e.participantCount),e.deviceCount!=null&&(a.deviceCount=e.deviceCount),e.deviceSizeBucket!=null&&(a.deviceSizeBucket=e.deviceSizeBucket));if(c){e=d("WAWebWamGroupMetadataMetricUtils").isCagFromGroupMetadata(c);a.isLid=e&&d("WAWebMsgGetters").getIsReaction(b);a.typeOfGroup=d("WAWebGroupType").groupTypeToWamEnum(d("WAWebGroupType").getGroupTypeFromGroupMetadata(c))}});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebHandlePlaceholderMsgKeyHashUtils").messageKeyHashEnabled()){b=(yield d("WAWebHandlePlaceholderMsgKeyHashUtils").getMessageKeyHash(b));b!=null&&(a.messageKeyHash=b)}});return s.apply(this,arguments)}function t(a){if(c("WAWebWid").isGroup(a))return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.GROUP;else if(c("WAWebWid").isStatus(a))return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.STATUS;else if(c("WAWebWid").isBroadcast(a))return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.BROADCAST;else if(c("WAWebWid").isUser(a))return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.INDIVIDUAL;else if(c("WAWebWid").isNewsletter(a))return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.CHANNEL;return d("WAWebWamEnumPlaceholderChatType").PLACEHOLDER_CHAT_TYPE.OTHER}g.addPlaceholderWam=a;g.viewPlaceholderWam=e;g.populatePlaceholderWam=f}),98);
__d("WAWebPrimaryFeaturesModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.features=d("WAWebBaseModel").prop(),c.ddmSettings=d("WAWebBaseModel").prop(!1),c.clearAndDeleteChatSync=d("WAWebBaseModel").prop(!1),c.viewOnceSpReceiver=d("WAWebBaseModel").prop(!1),c.recentSticker=d("WAWebBaseModel").prop(!1),c.favoriteSticker=d("WAWebBaseModel").prop(!1),c.linkPreview=d("WAWebBaseModel").prop(!1),c.hqLinkPreview=d("WAWebBaseModel").prop(!1),c.pollCreationInCags=d("WAWebBaseModel").prop(!1),c.newsletter=d("WAWebBaseModel").prop(!1),c.externalWebBetaOptIn=d("WAWebBaseModel").prop(!1),c.historySyncOnDemand=d("WAWebBaseModel").prop(!1),c.webLinkPreviewNseSupport=d("WAWebBaseModel").prop(!1),c.messagePlaceholderResendNseSupport=d("WAWebBaseModel").prop(!1),c.isPrimaryBetaBuild=d("WAWebBaseModel").prop(!1),c.primaryCampaignIdInHistorySyncSupport=d("WAWebBaseModel").prop(!1),c.contactManagement=d("WAWebBaseModel").prop(!1),c.paymentInfoSyncSupport=d("WAWebBaseModel").prop(!1),c.customPaymentMethodsSyncSupport=d("WAWebBaseModel").prop(!1),c.merchantPaymentPartnerSyncSupport=d("WAWebBaseModel").prop(!1),c.isContactsBackupOn=d("WAWebBaseModel").prop(!1),c.primaryHasAddressbookPermission=d("WAWebBaseModel").prop(!1),c.primaryHasAgreedToNativeContactsNux=d("WAWebBaseModel").prop(!1),c.isAccountIntegrityStatePending=d("WAWebBaseModel").prop(!1),c.isAccountIntegrityStateTimelock=d("WAWebBaseModel").prop(!1),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.setPrimaryFeatures=function(a){this.features=a;a=new Set(a);this.ddmSettings=a.has("ddm_settings");this.clearAndDeleteChatSync=a.has("clear_and_delete_chat_sync");this.viewOnceSpReceiver=a.has("vo_sp_receiver");this.recentSticker=a.has("recent_sticker");this.favoriteSticker=a.has("favorite_sticker");this.linkPreview=a.has("link_preview");this.hqLinkPreview=a.has("link_preview_hq_thumbnail");this.pollCreationInCags=a.has("poll_creation_cag");this.newsletter=a.has("newsletter");this.externalWebBetaOptIn=a.has("external_web_beta_opt_in");this.historySyncOnDemand=a.has("history_sync_on_demand");this.webLinkPreviewNseSupport=a.has("web_link_preview_nse_support");this.messagePlaceholderResendNseSupport=a.has("message_placeholder_resend_nse_support");this.isPrimaryBetaBuild=a.has("is_primary_beta_build");this.primaryCampaignIdInHistorySyncSupport=a.has("primary_campaign_id_in_history_sync_support");this.contactManagement=a.has("contact_management");this.paymentInfoSyncSupport=a.has("payment_info_sync_support");this.customPaymentMethodsSyncSupport=a.has("custom_payment_methods_sync_support");this.isContactsBackupOn=a.has("is_contacts_backup_on");this.primaryHasAddressbookPermission=a.has("primary_has_addressbook_permission");this.primaryHasAgreedToNativeContactsNux=a.has("primary_has_agreed_to_native_contacts_nux");this.isAccountIntegrityStatePending=a.has("is_account_integrity_state_pending");this.isAccountIntegrityStateTimelock=a.has("is_account_integrity_state_timelock");this.merchantPaymentPartnerSyncSupport=a.has("merchant_payment_partner_sync_support")};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="primaryFeatures";b=d("WAWebBaseModel").defineModel(a);c=new b({id:"1"});g.PrimaryFeatures=c}),98);
__d("WAWebSyncGatingUtils",["WALogger","WAWebABProps","WAWebMobilePlatforms","WAWebPrimaryFeaturesModel","WAWebUserPrefsHistorySync"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[rdu] History sync on demand feature is disabled as initial sync is incomplete or initial sync boundary is not available"]);h=function(){return a};return a}function a(){if(!d("WAWebPrimaryFeaturesModel").PrimaryFeatures.historySyncOnDemand)return!1;var a=d("WAWebUserPrefsHistorySync").getInitialHistorySyncCompleteLocalStorage(),b=d("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary();if(a&&(b==null||Object.keys(b).length===0)){d("WALogger").LOG(h());return!1}a=d("WAWebMobilePlatforms").getMobilePlatform()===d("WAWebMobilePlatforms").PLATFORMS.ANDROID||d("WAWebMobilePlatforms").getMobilePlatform()===d("WAWebMobilePlatforms").PLATFORMS.SMBA;return a&&d("WAWebPrimaryFeaturesModel").PrimaryFeatures.isPrimaryBetaBuild&&d("WAWebABProps").getABPropConfigValue("history_sync_on_demand_with_android_beta")?!0:d("WAWebABProps").getABPropConfigValue("history_sync_on_demand")}function b(){return d("WAWebPrimaryFeaturesModel").PrimaryFeatures.historySyncOnDemand}function c(){return d("WAWebABProps").getABPropConfigValue("placeholder_message_resend")}function e(){return d("WAWebPrimaryFeaturesModel").PrimaryFeatures.webLinkPreviewNseSupport}function f(){return d("WAWebPrimaryFeaturesModel").PrimaryFeatures.messagePlaceholderResendNseSupport}function i(){return d("WAWebABProps").getABPropConfigValue("web_noncritical_history_sync_message_processing_break_iteration")}function j(){return d("WAWebABProps").getABPropConfigValue("web_recent_sync_handling_loop_restart_v2_enabled")}function k(){return d("WAWebABProps").getABPropConfigValue("web_recent_sync_chunk_download_optimization")}function l(){return d("WAWebABProps").getABPropConfigValue("web_recent_sync_worker_compatible_handling")}function m(){return d("WAWebABProps").getABPropConfigValue("web_recent_sync_next_chunk_fetch_optimization")}function n(){return d("WAWebABProps").getABPropConfigValue("web_recent_sync_chunk_data_handling_worker")}g.isHistorySyncOnDemandEnabled=a;g.shouldPopulateStarMessageWithTimestamp=b;g.isPlaceholderMessageResendEnabled=c;g.isWebLinkPreviewNseSupportEnabled=e;g.isMessagePlaceholderResendNseSupportEnabled=f;g.getRecentSyncMessageProcessingBreakIteration=i;g.isHistorySyncHandlingRestartV2Enabled=j;g.isRecentSyncDownloadOptimizationEnabled=k;g.isRecentSyncWorkerComaptibleHandlingEnabled=l;g.isRecentSyncNextChunkFetchOptimizationEnabled=m;g.isRecentSyncChunkDataHandlingInWorkerEnabled=n}),98);
__d("WAWebDBProcessMessage",["Promise","WALogger","WATimeUtils","WAWeb-dexie","WAWebApiGroupInviteV4Store","WAWebCommonMsgUtils","WAWebDBMessageSerialization","WAWebDBStoreMessage","WAWebDbEncryptionKey","WAWebFtsLightClient","WAWebHandlePlaceholderWam","WAWebLinkify","WAWebModelStorageUtils","WAWebSchemaMessage","WAWebSyncGatingUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["additional information ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error storing messages"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessages: store ",", for chat ",", isHistorySync: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMessage: msgId::",", Previous row in message table is not a placeholder or futureproof"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["additional information ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error storing messages"]);n=function(){return a};return a}var o=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DuplicateMessageError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),p=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="PreviousMsgNotUpdatableError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!1);d("WALogger").DEV(k(),a.length,e,f);d("WAWebCommonMsgUtils").logUndefinedMessage(a);yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey();return(h||(h=b("Promise"))).resolve(d("WAWebDBStoreMessage").storeMessageInTransaction(a,e,f)).then(function(){d("WAWebFtsLightClient").ftsLightClient.index()["catch"](function(){})})["catch"](function(b){if(b instanceof c("WAWeb-dexie").BulkError||b instanceof c("WAWeb-dexie").ConstraintError)throw new o();else{d("WALogger").WARN(j()).devConsole(b);d("WALogger").DEV(i(),a.map(function(a){return a.id.toString()})).devConsole(b);throw b}})});return q.apply(this,arguments)}function e(a,c){var e,f=c==null?(e=a[0])==null?void 0:e.id.remote:c;if(f){e=a.map(function(a){var b=d("WAWebDBMessageSerialization").dbRowFromMessage(a);return d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:b,chatId:f.toString(),hasLink:d("WAWebLinkify").hasHttpLink(a),pendingReadReceipt:!1})});return(h||(h=b("Promise"))).resolve(d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(e)).then(function(){d("WAWebFtsLightClient").ftsLightClient.index()["catch"](function(){})})["catch"](function(b){d("WALogger").WARN(n()).devConsole(b);d("WALogger").DEV(m(),a.map(function(a){return a.id.toString()})).devConsole(b);throw b})}return(h||(h=b("Promise"))).resolve()}function f(a){return d("WAWebCommonMsgUtils").isPlaceholderMsg(a.type)?(h||(h=b("Promise"))).resolve(a):d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=(yield b.get(a.id.toString()));if(!e)throw c("err")("[messaging] updateMessage: msgId::"+a.id.toString()+", Failed to find previous message row in message table");if(!d("WAWebCommonMsgUtils").isPlaceholderMsg(e.type)&&!d("WAWebCommonMsgUtils").isFutureproofMsg(e.type)){d("WALogger").LOG(l(),a.id.toString()).tags("messaging");throw new p()}var f=a.from,g=babelHelpers["extends"]({},a);e.t!=null&&(g.t=e.t);e.ack>a.ack&&(g.ack=e.ack);f=d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:d("WAWebDBMessageSerialization").dbRowFromMessage(g),chatId:f.toString(),hasLink:d("WAWebLinkify").hasHttpLink(g),rowId:void 0,inChatMsgId:void 0,pendingReadReceipt:e.pendingReadReceipt});f.rowId=e.rowId;f.internalId=e.internalId;if(f.rowId==null||f.internalId==null)throw c("err")("[messaging] updateMessage: msgId::"+a.id.toString()+", missing rowId or internalId");yield b.createOrReplace(f);d("WAWebCommonMsgUtils").isPlaceholderMsg(e.type)&&void d("WAWebHandlePlaceholderWam").populatePlaceholderWam([d("WAWebDBMessageSerialization").messageFromDbRow(e)]);d("WAWebFtsLightClient").ftsLightClient.index()["catch"](function(){});return g});return function(a){return e.apply(this,arguments)}}())}function r(a){return d("WAWebSchemaMessage").getMessageTable().bulkGet(a).then(function(a){a=a.filter(Boolean).map(function(a){return{id:a.id,isStarred:d("WAWebSyncGatingUtils").shouldPopulateStarMessageWithTimestamp()?a.t:a.rowId}});return d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(a)})}function s(a){return d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(a.map(function(a){return{id:a,isStarred:void 0}}))}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msg(a.id.toString(),{id:a.id.toString(),from:a.from.toString(),to:a.to.toString(),groupId:a.inviteGrp,expiration:parseInt(a.inviteCodeExp,10),expired:d("WATimeUtils").unixTime()>=parseInt(a.inviteCodeExp,10)})}));return h.resolve()});return u.apply(this,arguments)}g.DuplicateMessageError=o;g.PreviousMsgNotUpdatableError=p;g.storeMessages=a;g.updateExistingMessages=e;g.updateMessage=f;g.starMessages=r;g.unstarMessages=s;g.processGroupInviteMessages=t}),98);
__d("WAWebLastAddOnDBSerialization",["WANullthrows"],(function(a,b,c,d,e,f,g){function a(a){switch(a.type){case"reaction":return{type:"reaction",msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,reactionText:a.reactionText,sender:a.sender,timestamp:a.timestamp};case"poll_vote":return{type:"poll_vote",msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.sender,timestamp:a.timestamp};case"comment":return{type:"comment",msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.sender,timestamp:a.timestamp};case"event_response":return{type:"event_response",msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.sender,timestamp:a.timestamp,eventResponse:a.eventResponse}}}function b(a){return{msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.senderUserJid,reactionText:a.reactionText,timestamp:a.timestamp,isOrphan:a.orphan===1,type:"reaction"}}function d(a,b){return{msgKey:a.msgKey.toString(),isOrphan:b,selectedOptionsCount:a.selectedOptionLocalIds.length,parentMsgKey:a.parentMsgKey.toString(),sender:a.sender.toString(),timestamp:a.senderTimestampMs,type:"poll_vote"}}function e(a){return{msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.sender,timestamp:a.t*1e3,isOrphan:!1,type:"comment"}}function f(a){return{msgKey:a.msgKey,parentMsgKey:a.parentMsgKey,sender:a.senderUserJid,timestamp:a.timestamp,reactionText:c("WANullthrows")(a.reactionText),type:"reaction"}}g.lastAddOnPreviewFromCandidate=a;g.lastAddOnPreviewCandidateFromReactionRowType=b;g.lastAddOnPreviewCandidateFromVoteData=d;g.lastAddOnPreviewCandidateFromCommentRowType=e;g.lastAddOnPreviewFromDeprecatedLastReactionPreview=f}),98);
__d("WAWebPollsCreateOptionLocalIdMap",["Promise","WAHex","WANullthrows","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a)),c=d("WAHex").toHex(new Uint8Array(b));return{hash:b,hexHash:c,localId:a.localId}});return function(b){return a.apply(this,arguments)}}())));var e=new Map(),f=new Map();for(a of a){var g=a.hash,i=a.hexHash,k=a.localId;e.set(i,k);f.set(k,g)}return{getLocalIdForHexHash:function(a){return c("WANullthrows")(e.get(a))},getLocalIdForHash:function(a){return c("WANullthrows")(e.get(d("WAHex").toHex(new Uint8Array(a))))},getHashForLocalId:function(a){return c("WANullthrows")(f.get(a))},includesHashes:function(a){return a.every(function(a){return e.has(d("WAHex").toHex(new Uint8Array(a)))})}}});return i.apply(this,arguments)}function j(a){return self.crypto.subtle.digest("SHA-256",new TextEncoder().encode(a.name))}g.createOptionLocalIdMap=a}),98);
__d("WAWebPollsProtobufConversion",["WALongInt","WANullthrows","WAWebPollsCreateOptionLocalIdMap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(b));a=a.selectedOptionLocalIds.map(b.getHashForLocalId);return{selectedOptions:a.length===0?null:a}});return h.apply(this,arguments)}function e(a){var b=a.voteProtobuf,e=a.pollVoteMsgKey,f=a.parentMsgKey,g=a.sender,h=a.senderTimestampMs,i=a.t,j=a.optionLocalIdMap,k=a.ack;a=a.read;return{msgKey:e,parentMsgKey:c("WANullthrows")(f),selectedOptionLocalIds:b.selectedOptions.map(j.getLocalIdForHash),senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(h),t:d("WALongInt").maybeNumberOrThrowIfTooLarge(i),sender:g,ack:k,read:a}}g.protobufFromVote=a;g.voteFromProtobuf=e}),98);
__d("WAWebPollsValidationError",["$InternalEnum","WACustomError","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({DUPLICATE_OPTIONS:"poll_creation_duplicate_options"});e=a({INVALID_MESSAGE_SECRET:"poll_creation_invalid_message_secret",INVALID_NAME:"poll_creation_invalid_name",INVALID_OPTIONS_COUNT:"poll_creation_invalid_options_count",INVALID_OPTION:"poll_creation_invalid_option",INVALID_SELECTABLE_OPTIONS_COUNT:"poll_creation_invalid_selectable_options_count",MISSING_MESSAGE_SECRET:"poll_creation_missing_message_secret",MISSING_NAME:"poll_creation_missing_name",MISSING_OPTIONS:"poll_creation_missing_options",MISSING_SELECTABLE_OPTIONS_COUNT:"poll_creation_missing_selectable_options_count"});f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="PollCreationValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);b=a({INVALID_VOTE_ENC_IV:"poll_update_invalid_vote_enc_iv",MISSING_POLL_MESSAGE_KEY:"poll_update_missing_poll_message_key",MISSING_SENDER_TIMESTAMP:"poll_update_missing_sender_timestamp",MISSING_UPDATE:"poll_update_missing_update",MISSING_VOTE_ENC_IV:"poll_update_missing_vote_enc_iv",MISSING_VOTE_ENC_PAYLOAD:"poll_update_missing_vote_enc_payload",MESSAGE_STANZA_INVALID:"poll_update_message_stanza_invalid"});var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="PollUpdateValidationError",a)||babelHelpers.assertThisInitialized(c)}return a}(d("WAWebHandleMsgError").MessageValidationError);a=a({INVALID_MESSAGE_SECRET:"poll_vote_invalid_message_secret",INVALID_OPTION:"poll_vote_invalid_option",INVALID_OPTIONS_COUNT:"poll_vote_invalid_options_count",OPTION_NOT_FOUND:"poll_vote_option_not_found"});d=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.code=b;return c}return b}(d("WACustomError").customError("PollVoteValidationError"));g.PollCreationValidationWarningCode=c;g.PollCreationValidationErrorCode=e;g.PollCreationValidationError=f;g.PollUpdateValidationErrorCode=b;g.PollUpdateValidationError=h;g.PollVoteValidationErrorCode=a;g.PollVoteValidationError=d}),98);
__d("WAWebPollsVoteEncryption",["WAWebAddonEncryption","WAWebApiContact","WAWebMsgType","WAWebPnhGatingUtils","WAWebProtobufsE2E.pb","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function a(a){return h(a)["catch"](function(b){if(d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.pollCreationOriginalSender.isUser()){var c=d("WAWebApiContact").getAlternateUserWid(a.pollCreationOriginalSender);if(c!=null)return h(babelHelpers["extends"]({},a,{pollCreationOriginalSender:d("WAWebWidFactory").toUserWid(c)}))}throw b})}function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={type:d("WAWebMsgType").MsgKind.PollVoteEncrypted,encryptedAddOn:a.encryptedVote};b=(yield d("WAWebAddonEncryption").decryptAddOn(b,{messageSecret:a.messageSecret,iv:a.iv,stanzaId:a.stanzaId,originalMessageSender:a.pollCreationOriginalSender,addOnSender:a.voteSender}));return d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").Message$PollVoteMessageSpec,b)});return i.apply(this,arguments)}g.decryptVote=a}),98);
__d("WAWebPollsExtractVotes",["Promise","WALogger","WANullthrows","WAWebAddonEncryptionError","WAWebMsgGetters","WAWebMsgType","WAWebPollsCreateOptionLocalIdMap","WAWebPollsProtobufConversion","WAWebPollsValidationError","WAWebPollsVoteEncryption","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Poll vote extraction failed: ","\n",""],["Poll vote extraction failed: ","\\n",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Poll vote extraction failed: ",""]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).allSettled(Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return l(b,a)})));return a.map(function(a){switch(a.status){case"fulfilled":return a.value;case"rejected":a=a.reason;if(a instanceof d("WAWebPollsValidationError").PollVoteValidationError){d("WALogger").ERROR(j(),a.code).sendLogs(a.code);return}d("WALogger").ERROR(i(),a.message,a.stack).sendLogs("poll-vote-extraction-unknown-error")}}).filter(Boolean)});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.PollVoteEncrypted,b),f=c("WANullthrows")(b.pollSelectableOptionsCount),g=c("WANullthrows")(b.pollOptions),h=c("WANullthrows")(a.encPollVote),i=d("WAWebWidFactory").toUserWid(d("WAWebMsgGetters").getSender(a));h=(yield d("WAWebPollsVoteEncryption").decryptVote({encryptedVote:h.encPayload,iv:h.encIv,messageSecret:e,stanzaId:b.id.id,pollCreationOriginalSender:d("WAWebMsgGetters").getOriginalSender(b),voteSender:i}));e=h.selectedOptions.length;if(e>g.length||f!==0&&e>f)throw new(d("WAWebPollsValidationError").PollVoteValidationError)(d("WAWebPollsValidationError").PollVoteValidationErrorCode.INVALID_OPTIONS_COUNT);if(h.selectedOptions.some(function(a){return a.byteLength!==32}))throw new(d("WAWebPollsValidationError").PollVoteValidationError)(d("WAWebPollsValidationError").PollVoteValidationErrorCode.INVALID_OPTION);b=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(g));if(!b.includesHashes(h.selectedOptions))throw new(d("WAWebPollsValidationError").PollVoteValidationError)(d("WAWebPollsValidationError").PollVoteValidationErrorCode.OPTION_NOT_FOUND);return d("WAWebPollsProtobufConversion").voteFromProtobuf({voteProtobuf:h,pollVoteMsgKey:a.id,parentMsgKey:a.pollUpdateParentKey,sender:i,senderTimestampMs:a.senderTimestampMs,t:c("WANullthrows")(a.t),optionLocalIdMap:b,ack:a.ack,read:d("WAWebUserPrefsMeUser").isMeAccount(i)})});return m.apply(this,arguments)}g.extractVotes=a;g.extractVote=l}),98);
__d("WAWebDBProcessPollUpdateMsgs",["Promise","WAWebBackendApi","WAWebDBMarkFutureproofMessagesReparsed","WAWebDBPollsGetParentMessages","WAWebDBPollsUpsertVotes","WAWebDBStoreMessageOrphans","WAWebDBUpdateLastAddOnPreviewChat","WAWebLastAddOnDBSerialization","WAWebPollsExtractVotes","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return[];a=(yield d("WAWebDBPollsGetParentMessages").getParentMessages(a));var c=a.pollUpdateMsgsToParentMsgs,e=a.orphans;for(a of c.entries()){var f=a[0],g=a[1];g.pollInvalidated&&c["delete"](f)}g=(yield (h||(h=b("Promise"))).all([b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e.length===0)return;yield d("WAWebDBStoreMessageOrphans").storeMessageOrphans(e,function(a){return a.pollUpdateParentKey});var a=e.map(function(a){return a.id.toString()});yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a)})(),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c.size===0)return;var a=(yield d("WAWebDBPollsUpsertVotes").upsertVotesDb(yield d("WAWebPollsExtractVotes").extractVotes(c)));yield d("WAWebBackendApi").frontendSendAndReceive("upsertVotesModelCollection",{votes:a,votesToRemove:null,restoredFromDb:!1});var b=a.map(function(a){return a.msgKey.toString()});yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(b);b=(yield d("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates(a.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromVoteData(a,!1)})));b.size>0&&(yield d("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(b),d("WAWebBackendApi").frontendFireAndForget("updateChatLastAddOnPreview",{chatMap:b}));return a})()]));f=g[1];return(a=f)!=null?a:[]});return i.apply(this,arguments)}g.processPollUpdateMsgs=a}),98);
__d("WAWebEventsGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("events_create")}function a(){return h()&&d("WAWebABProps").getABPropConfigValue("events_create_regular_groups_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("events_view")||h()}function c(){return d("WAWebABProps").getABPropConfigValue("event_name_length_limit")}function e(){return d("WAWebABProps").getABPropConfigValue("event_description_length_limit")}function i(){return d("WAWebABProps").getABPropConfigValue("events_edit_send")}function f(){return d("WAWebABProps").getABPropConfigValue("events_edit_receive")||i()}function j(){return d("WAWebABProps").getABPropConfigValue("events_edit_and_cancel_system_messages")}function k(){return d("WAWebABProps").getABPropConfigValue("events_m3_end_time_receive")}function l(){return d("WAWebABProps").getABPropConfigValue("events_m3_end_time_send")}function m(){return d("WAWebABProps").getABPropConfigValue("events_m3_maybe_respone_send")}function n(){return d("WAWebABProps").getABPropConfigValue("events_m3_maybe_response_receive")}function o(){return h()&&d("WAWebABProps").getABPropConfigValue("events_create_cag_enabled")}g.isEventsCreationEnabled=h;g.isEventsCreationEnabledForRegularGroups=a;g.isEventsReceivingEnabled=b;g.getEventsNameLengthLimit=c;g.getEventsDescriptionLengthLimit=e;g.isEventsEditSendingEnabled=i;g.isEventsEditReceivingEnabled=f;g.isEventEditAndCancelSytemMessageEnabled=j;g.isEventEndTimeReceiveEnabled=k;g.isEventEndTimeSendEnabled=l;g.isEventMaybeSendEnabled=m;g.isEventMaybeReceiveEnabled=n;g.isEventsCreationEnabledInCag=o}),98);
__d("WAWebDBProcessReplyMsgs",["WALogger","WANullthrows","WAWebDBMessageSerialization","WAWebDBMsgUtils","WAWebEventsGatingUtils","WAWebGroupType","WAWebMessageEditGatingUtils","WAWebMessageEditUtils","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKey","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reply-messages] updating reply messages with inconsistent quoted content"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reply-messages] validating reply messages with editable quoted messages"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reply-messages] found inconsistent quoted content"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMessageEditGatingUtils").processReplyMessagesEnabled()||!a.length)return;var e=(yield d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var e=new Set();a.forEach(function(a){e.add(l(a).toString())});var f=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(Array.from(e.values()))).filter(function(a){a=d("WAWebMessageEditUtils").getMsgEditType(a.type);if(!a)return!1;switch(a){case d("WAWebMessageEditUtils").MsgEditType.TextEdit:return d("WAWebMessageEditGatingUtils").receiveTextEditEnabled();case d("WAWebMessageEditUtils").MsgEditType.CaptionEdit:return d("WAWebMessageEditGatingUtils").receiveCaptionEditEnabled();case d("WAWebMessageEditUtils").MsgEditType.EventEdit:return d("WAWebEventsGatingUtils").isEventsEditReceivingEnabled()}}),g=new Map(f.map(function(a){return[a.id.toString(),a]}));f=a.filter(function(a){return g.has(l(a).toString())});if(!f.length)return;d("WALogger").DEV(i()).devConsole({replyMsgIds:f.map(function(a){return a.id.id}),quotedMsgIds:f.map(function(a){return a.quotedStanzaID})});var j=[];f.forEach(function(a){var b=c("WANullthrows")(g.get(l(a).toString()));a.quotedMsg==null?j.push(babelHelpers["extends"]({},a,{quotedMsg:b})):n(c("WANullthrows")(a.quotedMsg),b)&&j.push(babelHelpers["extends"]({},a,{quotedMsg:b}))});if(!j.length)return;d("WALogger").DEV(h()).devConsole({replyMsgIds:j.map(function(a){return a.id.id})});yield b.bulkCreateOrMerge(j.map(d("WAWebDBMessageSerialization").dbRowFromMessage));return j});return function(a){return e.apply(this,arguments)}}()));(e==null?void 0:e.length)&&e.forEach(function(b){var d=c("WANullthrows")(a.find(function(a){return a.id.equals(b.id)}));d.quotedMsg=b.quotedMsg})});return k.apply(this,arguments)}function l(a){var b,e;b=(b=a.quotedParticipant)!=null?b:void 0;e=(e=a.quotedRemoteJid)!=null?e:a.id.remote;return new(c("WAWebMsgKey"))({id:c("WANullthrows")(a.quotedStanzaID),fromMe:d("WAWebUserPrefsMeUser").isMeAccount(b),remote:e,participant:d("WAWebMsgGetters").getIsGroupMsg(a)||(b==null?void 0:b.isBot())?b:void 0})}var m={inviteGrpType:d("WAWebGroupType").GroupType.DEFAULT,thumbnail:"",body:"",caption:"",interactiveAnnotations:[],scanLengths:[],staticUrl:"",pageCount:0};function n(a,b){var e,f=(e=c("lodash")).pickBy(a,function(a){return a!=null}),g=e.pickBy(b,function(a,b){return Object.prototype.hasOwnProperty.call(f,b)});e.defaults(f,m);e.defaults(g,m);if(c("lodash").isEqual(f,g))return!1;d("WALogger").DEV(j()).devConsole({expected:g,received:f,quotedMsgContent:a,originalQuotedMsg:b});return!0}g.processReplyMsgs=a;g.createQuotedMsgKey=l}),98);
__d("WAWebHandleMessageTypes.flow",[],(function(a,b,c,d,e,f){a=Object.freeze({ReportingInfo:"reporting_info"});f.MsgAdditionalInfoType=a}),66);
__d("WAWebDBReportingTokenUtils",["Promise","WALogger","WATimeUtils","WAWebGetMessageCache","WAWebHandleMessageTypes.flow","WAWebMessagingGatingUtils","WAWebMsgKey","WAWebSchemaReportingInfo","WAWebSchemaReportingToken","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error deleting reporting infos"]);i=function(){return a};return a}var j=-1;function a(a){var b,e=a.reportingTokenInfo;if(e==null)return null;var f=e.reportingTag;e=e.version;var g=a.t;if(f==null||g==null)return null;b=(b=(b=a.protocolMessageKey)==null?void 0:b.toString())!=null?b:a.id.toString();a={msgKey:b,stanzaId:c("WAWebMsgKey").from(b).id,msgTs:g,receivedTs:d("WATimeUtils").unixTimeMs(),reportingTag:f};e!=null&&(a.version=e);return a}function e(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebSchemaReportingInfo").getReportingInfoTable().equals(["msgKey","msgTs"],[a,b]))[0];if(b!=null)return{reportingTag:b.reportingTag,reportingToken:b.reportingToken,version:b.version};b=(yield d("WAWebSchemaReportingToken").getReportingTokenTable().get(a));return b!=null?{reportingTag:b.reportingTag,version:b.version}:null});return k.apply(this,arguments)}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaReportingInfo").getReportingInfoTable().equals(["msgKey"],a)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null||a<=j)return;if(a===0){yield (h||(h=b("Promise"))).all([d("WAWebSchemaReportingToken").getReportingTokenTable().clear(),d("WAWebSchemaReportingInfo").getReportingInfoTable().clear()]);return}a=d("WATimeUtils").unixTimeMs()-a*d("WATimeUtils").DAY_MILLISECONDS;var c=(yield d("WAWebSchemaReportingToken").getReportingTokenTable().lessThan(["ts"],a));a=(yield d("WAWebSchemaReportingInfo").getReportingInfoTable().lessThan(["receivedTs"],a));yield (h||(h=b("Promise"))).all([d("WAWebSchemaReportingToken").getReportingTokenTable().bulkRemove(c.map(function(a){return a.id})),d("WAWebSchemaReportingInfo").getReportingInfoTable().bulkRemove(a.map(function(a){return a.id}))])});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a<=j)return;a=d("WATimeUtils").unixTimeMs()-a*d("WATimeUtils").DAY_MILLISECONDS;a=(yield d("WAWebSchemaReportingInfo").getReportingInfoTable().lessThan(["receivedTs"],a));a=a.map(function(a){return babelHelpers["extends"]({},a,{reportingToken:null,reportingTokenContentOpaqueData:null,version:null})});yield d("WAWebSchemaReportingInfo").getReportingInfoTable().bulkCreateOrReplace(a)});return p.apply(this,arguments)}function q(a){var b=a.msgKey,c=a.stanzaId,e=a.msgTs;a=a.incomingMsgReportingTokenInfo;if(!d("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return;if(a==null)return;a=a.reportingTag;if(a==null)return;d("WAWebGetMessageCache").getMessageCache().addAdditionalInfo({type:d("WAWebHandleMessageTypes.flow").MsgAdditionalInfoType.ReportingInfo,data:{msgKey:b.toString(),stanzaId:c,reportingTag:a,msgTs:e,receivedTs:d("WATimeUtils").unixTimeMs()}},!0)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.sort(function(a,b){return((a=a.ts)!=null?a:0)-((a=b.ts)!=null?a:0)});var b=a.map(function(a){return a.id}),c=(yield d("WAWebSchemaReportingToken").getReportingTokenTable().bulkGet(b)),e=new Map(),f=new Set();a.forEach(function(a,b){b=c[b];if((b==null||b.reportingTag==null)&&!f.has(a.id))e.set(a.id,a);else{a.reportingTag;b=babelHelpers.objectWithoutPropertiesLoose(a,["reportingTag"]);e.set(a.id,babelHelpers["extends"]({},e.get(a.id),b))}f.add(a.id)});yield d("WAWebSchemaReportingToken").getReportingTokenTable().bulkCreateOrMerge(Array.from(e.values()))});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaReportingInfo").getReportingInfoTable().bulkCreate(a)});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{if(a.length===0)return;if(b.removeWholeRow)return d("WAWebSchemaReportingInfo").getReportingInfoTable().bulkRemoveByIndex(["msgKey"],a);b=(yield d("WAWebSchemaReportingInfo").getReportingInfoTable().equals(["msgKey"],a));if(b.length===0)return;a=b.map(function(a){return babelHelpers["extends"]({},a,{reportingToken:null,reportingTokenContentOpaqueData:null,version:null})});yield d("WAWebSchemaReportingInfo").getReportingInfoTable().bulkCreateOrReplace(a)}catch(a){d("WALogger").LOG(i()).devConsole(a)}});return w.apply(this,arguments)}g.DEFAULT_RT_CLEANUP_OLDER_THAN_DAYS=j;g.msgToReportingInfoRow=a;g.getReportingInfoFromMsg=e;g.getReportingInfosFromMsg=f;g.cleanupReportingTable=m;g.cleanupReportingTokenAndContent=o;g.maybeStoreReportingTag=q;g.handleAddReportingTokenInfos=r;g.handleAddReportingInfos=t;g.handleDeleteReportingInfos=v}),98);
__d("WAPromiseMap",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve(a).then(function(a){return(g||(g=b("Promise"))).all(a.map(function(a,b){return c(a,b)}))})}f.promiseMap=a}),66);
__d("WAWebDBStoreMsgsUtils",[],(function(a,b,c,d,e,f){var g=1e9;function a(a,b){b===void 0&&(b=!1);return a.all({reverse:!b,limit:1,index:["rowId"],returnKeyType:"keys"}).then(function(a){return a.length===0?g:a[0]})}f.INLINE_MESSAGE_STARTING_INDEX=g;f.getLastRowId=a}),66);
__d("WAWebDBStoreEncryptedMsgs",["Promise","WALogger","WAPromiseMap","WAWeb-dexie","WAWebDBMessageUtils","WAWebDBMsgUtils","WAWebDBStoreMessage","WAWebDBStoreMsgsUtils","WAWebFtsLightClient","WAWebMessageAssociationGatingUtils","WAWebModelStorageUtils","WAWebMsgKey","WAWebPostIncomingMessageDropMetric","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: failed to log bad message properties: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: message prop '","' is a function and cannot be cloned: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: failed to post db error metrics: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: all "," message(s) are already in the DB"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: dropping "," out of "," message(s): ",", due to DB error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: BulkError in bulkCreate for history sync msgs, retrying with bulk create or replace"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storeEncryptedMessage][lastChatMsgId] lastInChatMsgIdMap with key "," is null or not a number with value "," before calculation"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeEncryptedDBMessages: perform fallback for "," out of original "," messages"]);p=function(){return a};return a}function a(a,e,f,g,i){g===void 0&&(g=!1);i===void 0&&(i=!1);return d("WAWebModelStorageUtils").getStorage().lock(["message","message-association"],function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var k=j[0];j=j[1];var l=a.concat(e);if(i){var m=(yield d("WAWebDBMsgUtils").getMsgsExistByMsgKey(a.map(function(a){a=a[0];return a.id.toString()})));l=a.filter(function(a,b){return!m[b]});d("WALogger").WARN(p(),l.length,a.length);if(l.length===0)return}var t=(yield d("WAWebDBStoreMsgsUtils").getLastRowId(k,g)),u=new Map();yield (h||(h=b("Promise"))).all(f.map(function(a){var b=d("WAWebWidFactory").createWid(a);a=d("WAWebDBMessageUtils").beginningOfChat(b);var c=d("WAWebDBMessageUtils").endOfChat(b);return k.between(["internalId"],a,c,{limit:1,reverse:!g,returnKeyType:"keys"}).then(function(a){a=a.length===0?d("WAWebDBStoreMsgsUtils").INLINE_MESSAGE_STARTING_INDEX:d("WAWebDBMessageUtils").getInChatMsgId(a[0]);u.set(b.toString(),a)})}));var v=g?-1:1;l=(yield d("WAPromiseMap").promiseMap(l,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a[0];a=a[1];g&&(e.isMdHistoryMsg=!0);var f=c("WAWebMsgKey").fromString(e.id),h=f.remote.toString();b=t+v*(b+1);var i=u.get(h);if(i==null||Number.isNaN(i)){d("WALogger").DEV(o(),h,i).sendLogs("history-sync-nanerror-check-lastinchatmsgidmap-lastChatMsgId");return}i=i+v*1;u.set(h,i);f=!g&&d("WAWebDBStoreMessage").isPendingUnreadReceipt(f,e);e=d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:e,chatId:h,hasLink:a,rowId:b,inChatMsgId:i,pendingReadReceipt:f});return e});return function(b,c){return a.apply(this,arguments)}}())).filter(Boolean);try{if(d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()&&e.length){var w=l.filter(function(a){return a.associationType!=null}).map(function(a){return{msgKey:a.id.toString(),parentMsgKey:a.parentMsgKey.toString(),associationType:a.associationType,msgKeyInternalId:a.internalId}});w.length&&(yield j.bulkCreate(w))}yield k.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(l)}catch(b){if(g&&b instanceof c("WAWeb-dexie").BulkError)d("WALogger").ERROR(n()),yield k.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(l);else{(i||!q(a.length,b))&&(r(l,b),s(l));throw b}}return l});return function(a){return j.apply(this,arguments)}}()).then(function(a){a&&a.length>0&&c("WAWeb-dexie").ignoreTransaction(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebFtsLightClient").ftsLightClient.addToIndexingTable(a.map(function(a){return a.rowId!=null?String(a.rowId):null}).filter(Boolean)),d("WAWebFtsLightClient").ftsLightClient.index()["catch"](function(){})}))})}function q(a,b){return a>1&&b instanceof c("WAWeb-dexie").BulkError}function r(a,e){c("WAWeb-dexie").ignoreTransaction(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a;if(e instanceof c("WAWeb-dexie").BulkError){var f=a.map(function(a){a=a.id;return a.toString()}),g=(yield d("WAWebDBMsgUtils").getMsgsExistByMsgKey(f));b=a.filter(function(a,b){return!g[b]})}b.length>0?(d("WALogger").WARN(m(),b.length,a.length,b.map(function(a){a=a.id;return a}),e),d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropDBOperationFailedForMsgRows(b)):d("WALogger").WARN(l(),a.length)}))["catch"](function(a){d("WALogger").ERROR(k(),a).sendLogs("failed-to-post-db-error-metrics")})}function s(a){if(c("gkx")("26258"))return;var b=function(a){var b=new Set(),c=function a(c,e){Object.entries(c).forEach(function(c){var f=c[0];c=c[1];if(typeof c==="function"){var g=[].concat(e,[f]).join(".");d("WALogger").WARN(j(),g,c)}else if(c!=null&&typeof c==="object"){if(b.has(c))return;b.add(c);a(c,[].concat(e,[f]))}})};c(a,[])};try{a.forEach(b)}catch(a){d("WALogger").WARN(i(),a)}}g.storeEncryptedDBMessages=a;g.isEligibleForFallback=q}),98);
__d("WAWebMsgDataUtils",["WANullthrows","WATimeUtils","WAWebAck","WAWebBizGatingUtils","WAWebBotTypes","WAWebCommonMsgUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var b=a.type,e=a.subtype,f;b===d("WAWebMsgType").MSG_TYPE.GP2?e==="subject"?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:e==="add"||e==="invite"||e==="invite_auto_add"||e==="linked_group_join"||e==="community_invite_auto_add_rich"?a.recipients&&d("WAWebUserPrefsMeUser").isMePrimary(a.recipients[0])?f=d("WAWebCommonMsgUtils").EventType.SIGNIFICANT:f=d("WAWebCommonMsgUtils").EventType.IGNORE:e==="community_owner_update"?a.recipients&&d("WAWebUserPrefsMeUser").isMePrimary(a.recipients[0])?f=d("WAWebCommonMsgUtils").EventType.DEFAULT:f=d("WAWebCommonMsgUtils").EventType.IGNORE:e==="linked_group_promote"||e==="linked_group_demote"?c("WAWebWid").isGroup(a.id.remote)&&a.recipients&&d("WAWebUserPrefsMeUser").isMePrimary(a.recipients[0])&&!d("WAWebUserPrefsMeUser").isMeAccount(a.author)?f=d("WAWebCommonMsgUtils").EventType.SIGNIFICANT:f=d("WAWebCommonMsgUtils").EventType.IGNORE:e==="remove"?a.recipients&&d("WAWebUserPrefsMeUser").isMePrimary(a.recipients[0])?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:f=d("WAWebCommonMsgUtils").EventType.IGNORE:e==="create"||e==="empty_subgroup_create"||e==="general_chat_add"?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:e==="created_subgroup_suggestion"?f=d("WAWebCommonMsgUtils").EventType.DEFAULT:e==="parent_group_link"||e==="auto_add"||e==="default_sub_group_admin_add"||e==="community_participant_add_rich"||e==="subgroup_admin_triggered_auto_add"||e==="subgroup_admin_triggered_invite_auto_add"||e==="sibling_group_link"||e==="community_invite_rich"||e==="sub_group_participant_add_rich"||e==="sub_group_invite_rich"||e==="community_link_parent_group_rich"?f=d("WAWebCommonMsgUtils").EventType.SIGNIFICANT:e==="membership_approval_request"||e==="created_membership_requests"?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:e==="sibling_group_unlink"?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.BROADCAST_NOTIFICATION||b===d("WAWebMsgType").MSG_TYPE.NOTIFICATION||b===d("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION?e==="create"?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE&&d("WAWebUserPrefsMeUser").isMePrimary(a.from)?f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.CALL_LOG?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:a.broadcast?c("WAWebWid").isBroadcast(a.id.remote)?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.REVOKED?f=d("WAWebCommonMsgUtils").EventType.IGNORE:c("WAWebWid").isPSA(a.id.remote)?f=a.ack===d("WAWebAck").ACK.RECEIVED?d("WAWebCommonMsgUtils").EventType.DEFAULT:d("WAWebCommonMsgUtils").EventType.AMBIENT:b===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT||b===d("WAWebMsgType").MSG_TYPE.OVERSIZED?f=d("WAWebCommonMsgUtils").EventType.AMBIENT:b===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE?e==="sender_invite"||(e==="chat_assignment"||e==="chat_assignment_unassign")&&d("WAWebBizGatingUtils").shouldReorderChatOnAssignment(e==="chat_assignment_unassign")?f=d("WAWebCommonMsgUtils").EventType.NOTEWORTHY:f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&e==="ephemeral_setting"?f=d("WAWebCommonMsgUtils").EventType.IGNORE:b===d("WAWebMsgType").MSG_TYPE.REACTION?f=d("WAWebCommonMsgUtils").EventType.IGNORE:f=d("WAWebCommonMsgUtils").EventType.DEFAULT;return f}function e(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.id,f=c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()),g=a.id.isLid()?f:d("WAWebUserPrefsMeUser").getMaybeMeUser(),h=void 0;if(a.isGroup){var i;g=((i=a.groupMetadata)==null?void 0:i.isLidAddressingMode)===!0?f:d("WAWebUserPrefsMeUser").getMaybeMeUser();h=d("WAWebWidFactory").toUserWid(g)}else a.id.isStatus()&&(h=d("WAWebUserPrefsMeUser").assertGetMeUser());i=new(c("WAWebMsgKey"))({from:g,to:e,id:yield c("WAWebMsgKey").newId(),participant:h,selfDir:"out"});h=(f=a.contact.businessProfile)==null?void 0:f.automatedType;var j;if(h)switch(h){case d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P:j=d("WAWebBotTypes").BizBotType.BIZ_1P;break;case d("WAWebBotTypes").BizBotAutomatedType.FULL_3P:j=d("WAWebBotTypes").BizBotType.BIZ_3P;break;case d("WAWebBotTypes").BizBotAutomatedType.UNKNOWN:j=null}return{id:i,from:c("WANullthrows")(g),to:e,type:b,t:d("WATimeUtils").unixTime(),isNewMsg:!0,local:!0,ack:d("WAWebAck").ACK.CLOCK,bizBotType:j}});return h.apply(this,arguments)}g.eventTypeFromMsgType=a;g.genOutgoingMsgData=e}),98);
__d("WAWebDBStoreMessage",["Promise","WAJids","WALogger","WAPromiseMap","WAWeb-dexie","WAWebCommonMsgUtils","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebDBMsgUtils","WAWebLinkify","WAWebModelStorageUtils","WAWebMsgDataUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebNewsletterDBUtils","WAWebSchemaFtsIndexingQueue","WAWebSyncGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": completed in ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": completed in ","ms"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": "," in ","ms"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": start"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[process-msg] craftMessageRangeIndex failed with error ",""]);m=function(){return a};return a}var n=1e9;function o(a){return a.some(function(a){return a.type!==d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE})}function a(a,e,f){f===void 0&&(f=!1);var g=e==null?a[0].id.remote:e,i=d("WAWebDBMessageUtils").beginningOfChat(g),j=d("WAWebDBMessageUtils").endOfChat(g),k=s("storeMessageInTransaction: "+a.length+" message(s), chat "+((g==null?void 0:g.toString())||"-"));return d("WAWebModelStorageUtils").getStorage().lock(["chat","message"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c[0];c=c[1];k.addStage("got table lock");var l=(yield e.get(g.toString()));k.addStage("got chat");if(!g.isStatus()&&(l!=null||o(a))){l=q(l,a,g);yield e.createOrMerge(g.toString(),l)}k.addStage("got messages meta");e=c.all({reverse:!f,limit:1,index:["rowId"],returnKeyType:"keys"}).then(function(a){k.addStage("got boundary row id");return a.length===0?n:a[0]});l=c.between(["internalId"],i,j,{limit:1,reverse:!f,returnKeyType:"keys"}).then(function(a){k.addStage("got chat msg boundary id");return a.length===0?n:d("WAWebDBMessageUtils").getInChatMsgId(a[0])});e=(yield (h||(h=b("Promise"))).all([e,l]));l=e[0];e=e[1];k.addStage("got boundaries");var m=f?l-a.length:l+1,s=f?e-a.length:e+1,t=(yield d("WAPromiseMap").promiseMap(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebDBMessageSerialization").dbRowFromMessage(a),e=!f&&p(a.id,a);return r({msg:c,chatId:g.toString(),hasLink:d("WAWebLinkify").hasHttpLink(a),rowId:m+b,inChatMsgId:d("WAWebMsgGetters").getIsNewsletterMsg(a)?(c=a.serverId)!=null?c:yield d("WAWebNewsletterDBUtils").getTemporaryServerId(g):s+b,pendingReadReceipt:e})});return function(b,c){return a.apply(this,arguments)}}()));k.addStage("messages ready for storing in db");return c.bulkCreate(t).then(function(){return t})});return function(a){return c.apply(this,arguments)}}()).then(function(a){k.done(),c("WAWeb-dexie").ignoreTransaction(function(){d("WAWebSchemaFtsIndexingQueue").getFtsIndexingQueueTable().bulkCreateOrReplace(a.map(function(a){return{id:String(a.rowId)}}))})})}function p(a,b){if(a.fromMe||a.remote.isStatus())return!1;a=d("WAWebMsgDataUtils").eventTypeFromMsgType(b);return a===d("WAWebCommonMsgUtils").EventType.AMBIENT||a===d("WAWebCommonMsgUtils").EventType.DEFAULT}function q(a,b,c){var e,f=void 0,g=Math.max(0,(e=a==null?void 0:a.unreadCount)!=null?e:0),h=(e=a==null?void 0:a.unreadMentionsOfMe)!=null?e:[];b.forEach(function(a){var b=d("WAWebMsgDataUtils").eventTypeFromMsgType(a);if(b===d("WAWebCommonMsgUtils").EventType.IGNORE)return;a&&a.t!=null&&((f==null||a.t>f)&&(f=a.t));(b===d("WAWebCommonMsgUtils").EventType.AMBIENT||b===d("WAWebCommonMsgUtils").EventType.DEFAULT)&&!a.id.fromMe&&(g+=1);b=p(a.id,a);if(b&&d("WAWebMsgGetters").getIsImportantMessage(a)){b={id:a.id.toString(),timestamp:a.t};h.push(b)}});a&&a.t!=null&&((f==null||a.t>f)&&(f=a.t));return{id:c.toString(),unreadCount:g,t:f,unreadMentionsOfMe:h}}function r(a){var b=a.msg,e=a.chatId,f=a.hasLink,g=a.rowId,h=a.inChatMsgId;a=a.pendingReadReceipt;var i=[d("WAWebMsgType").MSG_TYPE.IMAGE,d("WAWebMsgType").MSG_TYPE.VIDEO,d("WAWebMsgType").MSG_TYPE.AUDIO].includes(b.type),j=d("WAWebSyncGatingUtils").shouldPopulateStarMessageWithTimestamp()?b.t:g;f=babelHelpers["extends"]({},b,{vcardWAids:b.vcardWAids||d("WAWebDBMessageUtils").getVcardWids(b),id:b.id.toString(),isStarred:b.star?j:void 0,hasLink:b.type==="chat"&&f?g:void 0,isMediaMsg:i?g:void 0,isDocMsg:b.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT?g:void 0,isCarouselMsg:b.carouselCardsParsed!=null?g:void 0,isEventMsg:b.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION?g:void 0,expiredTimestamp:(j=d("WAWebMsgGetters").getEphemeralExpirationTimestamp(b))!=null?j:void 0});g!=null&&(f.rowId=g);h!=null&&(f.internalId=d("WAWebDBMessageUtils").craftInternalId(e,h));a&&e!==d("WAJids").STATUS_JID&&(f.pendingReadReceipt=d("WAWebDBMsgUtils").PendingReadReceiptType.Message);i=b.c2sTimestamp;if(b.id.fromMe){i=(j=b.c2sTimestamp)!=null?j:b.t}else i=b.t;try{b.type!==d("WAWebMsgType").MSG_TYPE.REACTION&&(f.messageRangeIndex=d("WAWebDBMessageUtils").craftMessageRangeIndex(e,!c("WAWebMsgKey").fromString(b.id).fromMe,d("WAWebMsgType").SYSTEM_MESSAGE_TYPES.includes(b.type),i))}catch(a){d("WALogger").ERROR(m(),a)}return f}function s(a){d("WALogger").DEV(l(),a);var b=5e3,c=Date.now(),e=[];return{addStage:function(a){e.push([a,Date.now()-c])},done:function(){if(Date.now()-c>b){for(var f of e){var g=f[0],h=f[1];d("WALogger").DEV(k(),a,g,h)}d("WALogger").WARN(j(),a,Date.now()-c)}else d("WALogger").DEV(i(),a,Date.now()-c)}}}g.storeMessageInTransaction=a;g.isPendingUnreadReceipt=p;g.addMsgMetadataToMsgRow=r}),98);
__d("WAWebApiOrphanRevoke",["WALogger","WANullthrows","WAWebLidMigrationUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebSchemaOrphanRevoke","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["applyOrphanRevokes: found orphan revoke for message ",""]);h=function(){return a};return a}var i=new Map(),j=!1,k={reset:function(){i=new Map(),j=!1},bulkRemoveOrphans:function(a){a.forEach(function(a){i["delete"](a.msgKey)});return d("WAWebSchemaOrphanRevoke").getOrphanRevokeTable().bulkRemove(a.map(function(a){return a.msgKey}))},bulkCreateOrReplaceOrphanRevokes:function(a){a.forEach(function(a){i.has(a.msgKey)&&i["delete"](a.msgKey),i.set(a.msgKey,a)});return d("WAWebSchemaOrphanRevoke").getOrphanRevokeTable().bulkCreateOrReplace(a)},getAllOrphanRevokes:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!j){var a=(yield d("WAWebSchemaOrphanRevoke").getOrphanRevokeTable().all());i=new Map(a.map(function(a){return[a.msgKey,a]}));j=!0}return i});function c(){return a.apply(this,arguments)}return c}()};function a(a){return k.bulkCreateOrReplaceOrphanRevokes(a)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield k.getAllOrphanRevokes()),f=[],g=[];a.forEach(function(a){var b=a.id.toString(),i=d("WAWebLidMigrationUtils").getAlternateMsgKey(a.id);if(e.has(b)||i&&e.has(i.toString())){b=c("WANullthrows")((b=e.get(b))!=null?b:i&&e.get(i.toString()));d("WALogger").LOG(h(),a.id.toString());if(!c("WAWebWid").isStatus(a.id.remote)){g.push({id:a.id,to:a.to,author:a.author,revokeSender:d("WAWebWidFactory").createWidFromWidLike((i=b.sender)!=null?i:d("WAWebMsgGetters").getSender(a)),type:d("WAWebMsgType").MSG_TYPE.REVOKED,kind:d("WAWebMsgType").MsgKind.RevokedMessage,subtype:b.subtype==="admin_revoke"?"admin":"sender",protocolMessageKey:a.id,from:a.from,t:a.t,broadcast:a.broadcast})}f.push(b)}else g.push(a)});k.bulkRemoveOrphans(f);return{newMsgs:g,newAssociatedMsgs:b}});return l.apply(this,arguments)}function f(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield k.getAllOrphanRevokes()),e=[],f=[];a.forEach(function(a){var g=a.id.toString();if(b.has(g)){g=c("WANullthrows")(b.get(g));f.push(babelHelpers["extends"]({},d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(a),{id:c("WAWebMsgKey").fromString(g.msgKey),type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.ProtocolRevoke,subtype:g.subtype==="admin_revoke"?"admin_revoke":"sender_revoke",protocolMessageKey:a.id,t:g.timestamp}));e.push(g)}});k.bulkRemoveOrphans(e);return f});return m.apply(this,arguments)}g.addOrphanRevokes=a;g.applyOrphanRevokes=e;g.applyAddonRevokes=f}),98);
__d("WAWebDBStoreRevokeMsgs",["Promise","WALogger","WAWebAddonProcessRevoke","WAWebApiChat","WAWebApiOrphanRevoke","WAWebBackendApi","WAWebBotGating","WAWebDBReportingTokenUtils","WAWebFtsLightClient","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebSchemaMessage","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsg: revoke is orphan or an addon ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store Revoked Msg: delete associated carousel revoke failed with error: ",", stack: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Store Revoked Msg: re-validate bot revoke failed with error: ",", stack: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: sending invalid revoke for secondary validation as bot invoker revoke"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: invalid revoke request ",", ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: admin revoke came for the different group than the original message was in"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: "," has not been revoked"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: admin revoke has to be sent to a group or newsletter chat"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRevokeMsgs: "," has not been revoked"]);q=function(){return a};return a}var r=20;function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[],f=[],g=[],r=new Map(),s=[],u=[],v=[],w=a.filter(function(a){var b=a.revokeMsgKey,e=a.newMsgKey,f=a.subtype,g=!0;f==="admin_revoke"?!c("WAWebWid").isGroup(b.remote)&&!c("WAWebWid").isNewsletter(b.remote)?(g=!1,d("WALogger").LOG(q(),String(b)),d("WALogger").WARN(p()).sendLogs("process-admin-revoke-message")):c("WAWebWid").equals(b.remote,e.remote)||(g=!1,d("WALogger").LOG(o(),String(b)),d("WALogger").WARN(n()).sendLogs("process-admin-revoke-message")):(g=c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").toCommonAddressingMode(b.remote,e.remote))&&c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").toCommonAddressingMode(b.participant,e.participant))&&b.fromMe===e.fromMe,g||(d("WALogger").LOG(m(),String(b),String(e)),d("WAWebBotGating").isBotReceiveEnabled()&&(d("WALogger").LOG(l()),s.push(a))));return g});if(d("WAWebBotGating").isBotReceiveEnabled()&&s.length>0)try{a=s.map(function(a){return a.revokeMsgKey.toString()});a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a,!1));a.forEach(function(a,b){var e=!1;b=s[b];var f=b.newMsgKey,g=b.subtype,h=b.sender;if((a==null?void 0:a.id)==null||b==null||g==="admin_revoke")return;g=c("WAWebMsgKey").from(a.id);g=g.remote;var i=a.botTargetSenderJid?d("WAWebWidFactory").createWidFromWidLike(a.botTargetSenderJid):null;if(i==null||g==null)return;var j=a.botPluginSearchUrl!=null&&a.botResponseTargetId!=null,k=!j&&a.botPluginMaybeParent===!0;g.isGroup()?c("WAWebWid").equals(i,f.participant)&&(e=!0):g.isBot()||c("WAWebWid").equals(i,h)&&(e=!0);if(e){u.push(b);f=a.internalId;g=a.botResponseTargetId;d("WAWebBotGating").isBotCarouselEnabled()&&(j||k)&&f!=null&&g!=null&&v.push({internalId:f,targetId:g})}});w.push.apply(w,u)}catch(a){d("WALogger").ERROR(k(),a.name,a.stack).devConsole(a).sendLogs("Re-validate revoke failed")}if(d("WAWebBotGating").isBotCarouselEnabled()&&v.length>0)try{yield t(v)}catch(a){d("WALogger").ERROR(j(),a.name,a.stack).devConsole(a).sendLogs("Plugin carousel delete revoke failed")}a=(yield (h||(h=b("Promise"))).all([d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){j=j[0];var k=(yield j.bulkGet([].concat(w.map(function(a){return a.revokeMsgKey.toString()}),w.map(function(a){return(a=(a=d("WAWebLidMigrationUtils").getAlternateMsgKey(a.revokeMsgKey))==null?void 0:a.toString())!=null?a:""}),w.map(function(a){return a.newMsgKey.toString()})),!1)),a=[],l=w.length,m=k.slice(0,l),n=k.slice(l,l*2),o=k.slice(l*2);w.forEach(function(b,h){var j;j=(j=m[h])!=null?j:n[h];h=o[h];if(j==null){d("WALogger").LOG(i(),b.revokeMsgKey);a.push(b);return}e.push(j.id);g.push(String(j.rowId));f.push({id:b.newMsgKey.toString(),to:j.to,author:j.author,type:d("WAWebMsgType").MSG_TYPE.REVOKED,subtype:b.subtype==="admin_revoke"?"admin":"sender",revokeSender:b.sender,protocolMessageKey:j.id,protocolMessageRowId:h==null?void 0:h.rowId,from:j.from,t:j.t,rowId:j.rowId,internalId:j.internalId,messageRangeIndex:j.messageRangeIndex,revokeTimestamp:b.revokeTimestamp,disappearingModeInitiator:b.disappearingModeInitiator,ephemeralDuration:b.ephemeralDuration,ephemeralSettingTimestamp:b.ephemeralSettingTimestamp,viewMode:b.viewMode});if(d("WAWebMsgGetters").getIsImportantMessage(j)){h=c("WAWebMsgKey").fromString(j.id);b=h.remote.toString();if(r.has(b)){h=(h=r.get(b))!=null?h:[];r.set(b,[].concat(h,[j.id]))}else r.set(b,[j.id])}});k=[];e.length>0&&k.push(j.bulkRemove(e));f.length>0&&k.push(j.bulkCreateOrReplace(f));yield (h||(h=b("Promise"))).all(k);return a});return function(b){return a.apply(this,arguments)}}()),d("WAWebAddonProcessRevoke").processRevokeMsgs(w)]));var x=a[0],y=a[1];if(x.length>0){a=x.filter(function(a){return y.has(a.revokeMsgKey)}).map(function(a){return{msgKey:a.revokeMsgKey.toString(),sender:a.sender,timestamp:a.timestamp,subtype:(a=a.subtype)!=null?a:"sender_revoke"}});a.length>0&&(yield d("WAWebApiOrphanRevoke").addOrphanRevokes(a))}d("WAWebFtsLightClient").ftsLightClient.purge(g)["catch"](function(){});void d("WAWebDBReportingTokenUtils").handleDeleteReportingInfos(e,{removeWholeRow:!1});r.size>0&&d("WAWebApiChat").removeUnreadMentionChat(r)});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[],e=[];a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield v(a));var b=a.pluginLinkMsgIds;a=a.pluginLinkMsgIdsRowIds;c=[].concat(c,b);e=[].concat(e,a);yield d("WAWebSchemaMessage").getMessageTable().bulkRemove(c)});return function(b){return a.apply(this,arguments)}}());yield (h||(h=b("Promise"))).all(a);d("WAWebFtsLightClient").ftsLightClient.purge(e)["catch"](function(){});d("WAWebBackendApi").frontendFireAndForget("deleteAssociatedBotCarouselMsgs",{msgKeys:c})});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],c=[],e=a.internalId,f=a.targetId;a=e.split("_")[0];yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],e,a+"_g",{reverse:!1,limit:r,shouldDecrypt:!1},function(a){if(a.botResponseTargetId===f)b.push(a.id),c.push(String(a.rowId));else return!0;return!1});return{pluginLinkMsgIds:b,pluginLinkMsgIdsRowIds:c}});return w.apply(this,arguments)}g.processRevokeMsgs=a;g.findAndDeleteAssociatedPluginMsg=t;g.findAssociatedPluginMsgs=v}),98);
__d("WABackoffUtils",["WAPromiseDelays"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d){d===void 0&&(d=.1);var e;a===0?e=c||0:e=Math.pow(2,a);Number.isFinite(b)&&e>b&&(e=b);typeof c==="number"&&Number.isFinite(c)&&e<c&&(e=c);d&&(e*=1+d*Math.random());return e}function a(a,b,c,e){e===void 0&&(e=.1);return d("WAPromiseDelays").delayMs(Math.floor(1e3*h(a,b,c,e)))}g.expBackoff=h;g.expDelaySec=a}),98);
__d("WAPromiseLoop",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=!1,d,e=function(a){c=!0,d=a},f=0;b=b;while(!c)b=(yield a(e,b,f)),f++;return d});return g.apply(this,arguments)}f.promiseLoop=a}),66);
__d("WAGetSyncAction",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(a){a=a.SyncActionStore;return a.count()})}function b(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.get(a)})}function c(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.getByCollections(a)})}function e(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.getByIndexMacs(a)})}function f(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.getByActionStates(a)})}function h(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.getByModelInfos(a)})}function i(){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(a){a=a.SyncActionStore;return a.getAll()})}function j(a){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(b){b=b.SyncActionStore;return b.bulkUpdate(a)})}g.countSyncActionsInTransaction=a;g.getSyncActionInTransaction=b;g.getSyncActionsByCollectionsInTransaction=c;g.getSyncActionsByIndexMacsInTransaction=e;g.getSyncActionsByActionStatesInTransaction=f;g.getSyncActionsByModelInfosInTransaction=h;g.getAllSyncActions=i;g.bulkUpdateSyncActionsInTransaction=j}),98);
__d("WACryptoLtHash",["Promise","WACryptoHkdf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=2,j=128;a=new ArrayBuffer(j);c=function(){function a(a){this.salt=a}var c=a.prototype;c.add=function(a,c){var d=this;return c.reduce(function(a,c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=d;e.next=3;return b("regeneratorRuntime").awrap(a);case 3:e.t1=e.sent;e.t2=c;return e.abrupt("return",e.t0.$1.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}},null,this)},(h||(h=b("Promise"))).resolve(a))};c.subtract=function(a,c){var d=this;return c.reduce(function(a,c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=d;e.next=3;return b("regeneratorRuntime").awrap(a);case 3:e.t1=e.sent;e.t2=c;return e.abrupt("return",e.t0.$2.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}},null,this)},(h||(h=b("Promise"))).resolve(a))};c.subtractThenAdd=function(a,c,d){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(this.subtract(a,d));case 2:e=g.sent;g.next=5;return b("regeneratorRuntime").awrap(this.add(e,c));case 5:f=g.sent;return g.abrupt("return",{ltHash:f,subtractResult:e});case 7:case"end":return g.stop()}},null,this)};c.$1=function(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("WACryptoHkdf").extractAndExpand(c,this.salt,j));case 2:e=f.sent;return f.abrupt("return",this.performPointwiseWithOverflow(a,e,function(a,b){return a+b}));case 4:case"end":return f.stop()}},null,this)};c.$2=function(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("WACryptoHkdf").extractAndExpand(c,this.salt,j));case 2:e=f.sent;return f.abrupt("return",this.performPointwiseWithOverflow(a,e,function(a,b){return a-b}));case 4:case"end":return f.stop()}},null,this)};c.performPointwiseWithOverflow=function(a,b,c){a=new DataView(a);b=new DataView(b);var d=new ArrayBuffer(a.byteLength),e=new DataView(d);for(var f=0;f<a.byteLength;f+=i)e.setUint16(f,c(a.getUint16(f,!0),b.getUint16(f,!0)),!0);return d};return a}();e=new c("WhatsApp Patch Integrity");g.KEY_LENGTH_BYTES=j;g.EMPTY_LT_HASH=a;g.LtHash16=c;g.LT_HASH_ANTI_TAMPERING=e}),98);
__d("WAGetCollectionVersion",["Promise","WABaseGlobals","WACryptoLtHash","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.get(a)})}function i(a,b){a=a.CollectionVersionStore;return a.get(b).then(function(a){return(a=a==null?void 0:a.ltHash)!=null?a:new ArrayBuffer(d("WACryptoLtHash").KEY_LENGTH_BYTES)})}function c(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return i({CollectionVersionStore:b},a)})}function e(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.bulkGet(a)})}function f(){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(a){a=a.CollectionVersionStore;return a.getAll()})}function j(a,b,c){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(d){d=d.CollectionVersionStore;return d.update(a,{version:b,ltHash:c})})}function k(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.bulkUpdate(a)})}function l(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.get(a).then(function(a){return a==null?void 0:a.isCollectionInMacMismatchFatal})})}function m(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.update(a,{isCollectionInMacMismatchFatal:!0})})}function n(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.get(a).then(function(a){return a==null?void 0:a.isCollectionLthashInconsistent})})}function o(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.update(a,{isCollectionLthashInconsistent:!0})})}function p(a){var c=function(b){return a.map(function(a){return b.update(a.collection,{lastSyncAttemptStartTimes:a.lastSyncAttemptStartTimes})})};return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=a.CollectionVersionStore;e.next=3;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(c(d)));case 3:case"end":return e.stop()}},null,this)})}function q(a){return d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(b){b=b.CollectionVersionStore;return b.update(a,{lastSuccessfulSyncEndTime:d("WATimeUtils").unixTimeMs()})})}g.getCollectionVersionInTransaction=a;g.getCollectionVersionLtHash=i;g.getCollectionVersionLtHashInTransaction=c;g.bulkGetCollectionVersionsInTransaction=e;g.getAllCollectionVersionsInTransaction=f;g.updateCollectionVersionAndLtHashInTransaction=j;g.bulkUpdateCollectionVersionInTransaction=k;g.getIsCollectionInMacMismatchFatalInTransaction=l;g.updateIsCollectionInMacMismatchFatalInTransaction=m;g.getIsCollectionLthashInconsistentInTransaction=n;g.updateIsCollectionLthashInconsistentInTransaction=o;g.bulkSetCollectionSyncAttemptStartTimesInTransaction=p;g.updateLastSuccessfulSyncEndTimeInTransaction=q}),98);
__d("WAGetMissingKey",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(a){a=a.MissingKeyStore;return a.getAll()})}function b(a){return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(b){b=b.MissingKeyStore;return b.bulkGet(a)})}function c(){return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(a){a=a.MissingKeyStore;return a.count()})}function e(a){return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(b){b=b.MissingKeyStore;return b.bulkUpdate(a)})}g.getAllMissingKeysInTransaction=a;g.bulkGetMissingKeysInTransaction=b;g.getMissingKeyCountTransaction=c;g.bulkUpdateMissingKeysInTransaction=e}),98);
__d("WAGetPendingMutation",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WABaseGlobals").runInTransaction({PendingMutationStore:!0},function(b){b=b.PendingMutationStore;return b.getByCollection(a)})}function b(){return d("WABaseGlobals").runInTransaction({PendingMutationStore:!0},function(a){a=a.PendingMutationStore;return a.getAll()})}function c(a){return d("WABaseGlobals").runInTransaction({PendingMutationStore:!0},function(b){b=b.PendingMutationStore;return b.bulkCreate(a)})}g.getSyncPendingMutationsByCollectionInTransaction=a;g.getAllSyncPendingMutationsInTransaction=b;g.bulkCreateSyncPendingMutationsInTransaction=c}),98);
__d("WAPromiseEach",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=[],e=0;case 2:if(!(e<a.length)){f.next=11;break}f.t0=d;f.next=6;return b("regeneratorRuntime").awrap(c(a[e]));case 6:f.t1=f.sent,f.t0.push.call(f.t0,f.t1);case 8:e++;f.next=2;break;case 11:return f.abrupt("return",d);case 12:case"end":return f.stop()}},null,this)};f.promiseEach=a}),66);
__d("WASyncdConst",["$InternalEnum","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=1e3;c=1e3*60*60;e=2;f=d("WATimeUtils").DAY_MILLISECONDS*2;d=100;var h=2e3,i=10,j=100,k=0,l=3,m=7,n=(b=b("$InternalEnum"))({Star:"star",Contact:"contact",Mute:"mute",PinDEPRECATED:"pin",Pin:"pin_v1",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat",DeleteMessageForMe:"deleteMessageForMe",Sentinel:"sentinel",UnarchiveChatsSetting:"setting_unarchiveChats",DeleteChat:"deleteChat",AndroidUnsupportedActions:"android_unsupported_actions",PrimaryFeature:"primary_feature",Subscription:"subscription",Nux:"nux",Agent:"deviceAgent",TimeFormat:"time_format",UserStatusMute:"userStatusMute",PrimaryVersion:"primary_version",RemoveRecentSticker:"removeRecentSticker",ChatAssignment:"agentChatAssignment",ChatAssignmentOpenedStatus:"agentChatAssignmentOpenedStatus",FavoriteSticker:"favoriteSticker",PnForLidChat:"pnForLidChat",ShareOwnPn:"shareOwnPn",ExternalWebBeta:"external_web_beta",MarketingMessage:"marketingMessage",MarketingMessageBroadcast:"marketingMessageBroadcast",StatusPrivacy:"status_privacy",BotWelcomeRequest:"bot_welcome_request",LabelReordering:"label_reordering",PaymentInfo:"payment_info",CustomPaymentMethods:"custom_payment_methods",LockChat:"lock",ChatLockSettings:"setting_chatLock",DeviceCapabilities:"device_capabilities",DisableLinkPreviews:"setting_disableLinkPreviews",NoteEdit:"note_edit",Favorites:"favorites",MerchantPaymentPartner:"merchant_payment_partner"}),o=b({Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"}),p=b.Mirrored(["Success","SuccessHasMore","Conflict","ConflictHasMore","ErrorRetry","ErrorFatal","Blocked"]),q=b.Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]),r=b.Mirrored(["Success","Malformed","Orphan","Unsupported","Skipped","Failed"]),s=b.Mirrored(["Msg","Chat","Agent","ChatAssignment","UserStatusMute","Account"]),t=b.Mirrored(["ApplyRemoteAndDropLocal","SkipRemote","SkipRemoteAndDropLocal"]);b=b.Mirrored(["Patch","Snapshot","Local"]);g.BACKOFF_MIN_TIMEOUT=a;g.BACKOFF_MAX_TIMEOUT=c;g.BACKOFF_BASE=e;g.FINITE_FAILURE_EXPIRY_DURATION=f;g.MIN_INLINE_MUTATIONS=d;g.MAX_INLINE_MUTATIONS=h;g.MIN_PATCH_SIZE=i;g.MAX_PATCH_SIZE=j;g.DEFAULT_COLLECTION_VERSION=k;g.LABEL_ASSOCIATION_SYNC_VERSION=l;g.CHAT_ASSIGNMENT_SYNC_VERSION=m;g.Actions=n;g.CollectionName=o;g.CollectionState=p;g.CollectionSyncState=q;g.SyncActionState=r;g.SyncModelType=s;g.ConflictResolutionState=t;g.SyncDataType=b}),98);
__d("WATypedArraysConcat",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){c===void 0&&(c=0);c=b.reduce(function(a,b){return a+b.length},c);var d=new a(c),e=0;b.forEach(function(a){d.set(a,e),e+=a.length});return d}f.concatTypedArrays=a}),66);
__d("WACryptoAesCbc",["Promise","WABinary","WACryptoDependencies","WAErr","WATypedArraysCast","WATypedArraysConcat","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=16,j=1024,k=16,l=1024*1024,m=i*l;l=function(){function a(a,b,c,e){this.$4=null;this.$6=!1;this.$1=a;this.$2=b;this.$3=c;var f={name:"AES-CBC",iv:e};this.$5=d("WACryptoDependencies").getCrypto().subtle.importKey("raw",c,"AES-CBC",!1,[b]).then(function(a){return{algo:f,key:a}})}var b=a.prototype;b.append=function(a){var b=this;this.$7("append");var c=this.$4;if(c){c.writeByteArray(a);if(c.size()>j){var e=c.size()%i;e=c.readByteArray(c.size()-e);c.size()||(this.$4=null)}else e=null}else if(a.length>j){c=a.length%i;!c?e=a:(this.$4=new(d("WABinary").Binary)(a),e=this.$4.readByteArray(a.length-c))}else this.$4=new(d("WABinary").Binary)(a),e=null;var f=e;f&&(this.$5=this.$5.then(function(a){var c=a.key;a=a.algo;if(b.$2==="encrypt")return d("WACryptoDependencies").getCrypto().subtle.encrypt(a,c,f).then(function(a){b.$1.writeByteArray(new Uint8Array(a,0,a.byteLength-i));return new Uint8Array(a,a.byteLength-2*i,i)});else{var e=f.slice(-i);return d("WACryptoDependencies").getCrypto().subtle.decrypt(a,c,f).then(function(a){b.$1.writeBuffer(a);return e})}}).then(function(a){var c={name:"AES-CBC",iv:a};return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",b.$3,"AES-CBC",!1,[b.$2]).then(function(a){return{algo:c,key:a}})}));return this.$5.then(function(){})};b.finalize=function(a){var b=this;this.$7("finalize");var c;if(this.$4){var e=this.$4;a&&e.writeByteArray(a);c=e.readByteArray();this.$4=null}else a&&(c=a);if(c){var f=c;return this.$5.then(function(a){var c=a.algo;a=a.key;if(b.$2==="encrypt")return d("WACryptoDependencies").getCrypto().subtle.encrypt(c,a,f);else return d("WACryptoDependencies").getCrypto().subtle.decrypt(c,a,f)}).then(function(a){b.$1.writeBuffer(a)})}else return this.$5.then(function(){})};b.$7=function(a){if(this.$6)throw c("WAErr")("AesCbcStream."+a+" called after finalize")};return a}();function n(a){return{name:"AES-CBC",iv:d("WATypedArraysCast").castTypedArrays(Uint8Array,a)}}function o(a){return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",d("WATypedArraysCast").castTypedArrays(Uint8Array,a),"AES-CBC",!1,["encrypt"])}function p(a){if(a)return d("WATypedArraysCast").castTypedArrays(Uint8Array,a);a=new Uint8Array(k);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a}function q(a){a=a.byteLength;var b=i-a%i;return Number.isNaN(b)?a:a+b}function r(a,c,e){var f=n(c);return(h||(h=b("Promise"))).resolve(d("WACryptoDependencies").getCrypto().subtle.importKey("raw",d("WATypedArraysCast").castTypedArrays(Uint8Array,a),"AES-CBC",!1,["decrypt"])).then(function(a){return d("WACryptoDependencies").getCrypto().subtle.decrypt(f,a,e)})}function a(a,c){return(h||(h=b("Promise"))).resolve().then(function(){var b=c.slice(0,k),d=c.slice(k);return r(a,b,d)})}function e(a,c,e){return(h||(h=b("Promise"))).resolve().then(function(){var f=p(e),g=n(f);return(h||(h=b("Promise"))).resolve(o(a)).then(function(a){return d("WACryptoDependencies").getCrypto().subtle.encrypt(g,a,c)}).then(function(a){return d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[f,new Uint8Array(a)]).buffer})})}function f(a,d,e,f){var g,h,j,k,l,n,r,t,u,v,w,x,y;return b("regeneratorRuntime").async(function(z){while(1)switch(z.prev=z.next){case 0:f===void 0&&(f=m);if(!(f%i!==0)){z.next=3;break}throw c("WAErr")("chunkSize must be a multiple of "+i+", "+f+" received");case 3:z.next=5;return b("regeneratorRuntime").awrap(o(a));case 5:g=z.sent,h=new Uint8Array(d),j=Math.ceil(h.byteLength/f),k=p(e),l=new Uint8Array(q(h)+k.byteLength),l.set(k),(n=0,r=k);case 12:if(!(n<j)){z.next=26;break}u=n===j-1;v=n*f;t=h.subarray(v,v+f);z.next=18;return b("regeneratorRuntime").awrap(s(u,t,r,g));case 18:w=z.sent,x=w.encryptedChunk,y=w.nextIv,l.set(x,k.byteLength+n*f),r=y;case 23:n++;z.next=12;break;case 26:return z.abrupt("return",l.buffer);case 27:case"end":return z.stop()}},null,this)}function s(a,c,e,f){var g,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().subtle.encrypt(n(e),f,c).then(function(b){return a?new Uint8Array(b):new Uint8Array(b).subarray(0,-i)}));case 2:g=j.sent;h=g.slice(-i);return j.abrupt("return",{encryptedChunk:g,nextIv:h});case 5:case"end":return j.stop()}},null,this)}g.AES_CBC_BLOCK_SIZE=i;g.AesCbcStream=l;g.importRawKey=o;g.getIv=p;g.aesCbcDecrypt=r;g.aesCbcDecryptSplit=a;g.aesCbcEncrypt=e;g.aesCbcEncryptWithChunking=f;g.aesCbcEncryptChunk=s}),98);
__d("WASyncdCryptoConst",[],(function(a,b,c,d,e,f){"use strict";a="WhatsApp Mutation Keys";b=160;c=32;d=32;e=32;var g=32,h=32,i=c,j=i+d,k=j+e,l=k+g,m=l+h,n="0x01",o="0x02",p=0,q=32,r=8,s=16,t=new ArrayBuffer(q);f.HKDF_INFO=a;f.DERIVED_KEY_LENGTH=b;f.INDEX_KEY_LENGTH=c;f.VALUE_ENCRYPTION_KEY_LENGTH=d;f.VALUE_MAC_KEY_LENGTH=e;f.SNAPSHOT_MAC_KEY_LENGTH=g;f.PATCH_MAC_KEY_LENGTH=h;f.INDEX_KEY_END=i;f.VALUE_ENCRYPTION_KEY_END=j;f.VALUE_MAC_KEY_END=k;f.SNAPSHOT_MAC_KEY_END=l;f.PATCH_MAC_KEY_END=m;f.OPERATION_SET_HEX=n;f.OPERATION_REMOVE_HEX=o;f.MAX_OF_MIN_DATA_LENGTH=p;f.MAC_LENGTH=q;f.OCTET_LENGTH=r;f.IV_LENGTH=s;f.EMPTY_MUTATION_MAC=t}),66);
__d("WASyncdCryptoHelper",["WACryptoHkdf","WASyncdCryptoConst","WASyncdKeyTypes","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(h(a));case 2:c=e.sent;return e.abrupt("return",{indexKey:c.slice(0,d("WASyncdCryptoConst").INDEX_KEY_END),valueEncryptionKey:c.slice(d("WASyncdCryptoConst").INDEX_KEY_END,d("WASyncdCryptoConst").VALUE_ENCRYPTION_KEY_END),valueMacKey:c.slice(d("WASyncdCryptoConst").VALUE_ENCRYPTION_KEY_END,d("WASyncdCryptoConst").VALUE_MAC_KEY_END),snapshotMacKey:c.slice(d("WASyncdCryptoConst").VALUE_MAC_KEY_END,d("WASyncdCryptoConst").SNAPSHOT_MAC_KEY_END),patchMacKey:c.slice(d("WASyncdCryptoConst").SNAPSHOT_MAC_KEY_END,d("WASyncdCryptoConst").PATCH_MAC_KEY_END)});case 4:case"end":return e.stop()}},null,this)}function h(a){return d("WACryptoHkdf").extractAndExpand(d("WASyncdKeyTypes").fromSyncKeyData(a),d("WASyncdCryptoConst").HKDF_INFO,d("WASyncdCryptoConst").DERIVED_KEY_LENGTH)}g.generateEncryptionKeysUnmemoized=a}),98);
__d("WASyncdCrypto",["WABase64","WACryptoAesCbc","WACryptoDependencies","WACryptoHmac","WAErr","WAMemoizeCache","WAServerSync.pb","WASyncdCryptoConst","WASyncdCryptoHelper","WASyncdCryptoUtils","WASyncdKeyTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAMemoizeCache").memoizeWithArgs(d("WASyncdCryptoHelper").generateEncryptionKeysUnmemoized,function(a){return d("WABase64").encodeB64(d("WASyncdKeyTypes").fromSyncKeyData(a))});function a(a,b){return d("WACryptoHmac").hmacSha256(new Uint8Array(a),new Uint8Array(b))}function b(a,b){b=d("WASyncdKeyTypes").fromSyncKeyId(b);var e;switch(a){case d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET:e=d("WASyncdCryptoConst").OPERATION_SET_HEX;break;case d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE:e=d("WASyncdCryptoConst").OPERATION_REMOVE_HEX;break}if(e){a=new Uint8Array([parseInt(e,16)]).buffer;var f=new Uint8Array(a.byteLength+b.byteLength);f.set(new Uint8Array(a));f.set(new Uint8Array(b),a.byteLength);return f.buffer}else throw c("WAErr")("invalid mutation operation value")}function e(a,b){a=Math.max(0,d("WASyncdCryptoConst").MAX_OF_MIN_DATA_LENGTH-a-b);b=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(b);return b.buffer}function f(a,b,c){return d("WACryptoAesCbc").aesCbcEncrypt(b,c,a)}function i(a,b,c){var e=new Uint8Array(d("WASyncdCryptoConst").OCTET_LENGTH);e.set([a.byteLength],e.byteLength-1);a=d("WASyncdCryptoUtils").combine([a,b,e.buffer]);return d("WACryptoHmac").hmacSha512(c,a,d("WASyncdCryptoConst").MAC_LENGTH)}function j(a,b,c){return d("WACryptoAesCbc").aesCbcDecrypt(b,a,c)}function k(a,b,c,e){return d("WACryptoHmac").hmacSha256(a,d("WASyncdCryptoUtils").combine([b,c,e]))}function l(a,b,c,e,f){return d("WACryptoHmac").hmacSha256(a,d("WASyncdCryptoUtils").combine([b].concat(c,[e,f])))}function m(a){var b=a.byteLength;return new Uint8Array(a).slice(b-d("WASyncdCryptoConst").MAC_LENGTH).buffer}g.generateEncryptionKeys=h;g.generateIndexMac=a;g.generateAssociatedData=b;g.generatePadding=e;g.generateCipherText=f;g.generateMac=i;g.decryptCipherText=j;g.generateSnapshotMac=k;g.generatePatchMac=l;g.valueMacFromIndexAndValueCipherText=m}),98);
__d("WASyncdError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="SyncdMissingKeyError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,b)||this;d.name="SyncdRetryableError";d.backoff=c;d.message=b;return d}return b}(babelHelpers.wrapNativeSuper(Error));c=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name="SyncdFatalError";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.SyncdMissingKeyError=a;f.SyncdRetryableError=b;f.SyncdFatalError=c}),66);
__d("WAGetSyncKey",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WABaseGlobals").runInTransaction({SyncKeyStore:!0},function(b){b=b.SyncKeyStore;return b.get(a)})}function b(){return d("WABaseGlobals").runInTransaction({SyncKeyStore:!0},function(a){a=a.SyncKeyStore;return a.getAll()})}function c(a){return d("WABaseGlobals").runInTransaction({SyncKeyStore:!0},function(b){b=b.SyncKeyStore;return b.set(a)})}function e(a){return d("WABaseGlobals").runInTransaction({SyncKeyStore:!0},function(b){b=b.SyncKeyStore;return b.expire(a)})}g.getSyncKeyInTransaction_DO_NOT_USE=a;g.getAllSyncKeysInTransaction=b;g.setSyncKeyInTransaction=c;g.expireSyncKeyInTransaction=e}),98);
__d("WASyncdKeyCache",["WABase64","WAGetSyncKey","WASyncdKeyTypes","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=d("WABase64").encodeB64(d("WASyncdKeyTypes").fromSyncKeyId(a));f=h.get(e);if(!f){g.next=4;break}return g.abrupt("return",f.keyData);case 4:g.next=6;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getSyncKeyInTransaction_DO_NOT_USE(a));case 6:f=g.sent;f&&h.set(e,f);return g.abrupt("return",(c=f)==null?void 0:c.keyData);case 9:case"end":return g.stop()}},null,this)}function c(){h=new Map()}g.getKeyData=a;g.clearSyncKeysCache=c}),98);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({DECRYPT_MESSAGE_FINAL:"decrypt_message_final",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",DELETE_THREAD:"delete_thread",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ICDC_ERROR:"icdc_error",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RETRY_RECEIPTS_SENT:"retry_receipts_sent",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",APP_STATE_SYNC_DAILY:"app_state_sync_daily",SYNCD:"syncd",SEND_MESSAGE:"send_message",RECEIVE_MESSAGE:"receive_message",SYNCD_KEY_ROTATION:"syncd_key_rotation",REMOVE_PARTICIPANTS:"remove_participants",CREATE_GROUP:"create_group",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_DISCONNECT:"wa_disconnect",WA_JOB_MANAGER:"wa_job_manager",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",ONE_QUEUE:"one_queue",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key",EB_RESTORE_WITH_HIM:"eb_restore_with_him",WORM:"worm",WORKER_SCHEDULER_STUCK:"worker_scheduler_stuck",WORKER_SCHEDULER:"worker_scheduler"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]);j=function(){return a};return a}c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(j()),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i()),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(h(),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE]);function b(a,b,c,d){var e;c==null&&k++;var f=(e=c)!=null?e:k,g="open";c==null?l({name:a,stage:"START",instanceKey:f,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:f,annotations:b});var h;function i(){if(h!=null){var a=h.deref();if(a!=null){var b;(b=n)==null?void 0:b.unregister(a)}}}e={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:f,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:f,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:f,annotations:b}),g="closed",i()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:f,annotations:b}),i()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:f,annotations:b}),g="closed",i()},getFlowDetails:function(){return{name:a,instanceKey:f}},isActive:function(){return g==="open"}};n&&!o.has(a)&&c==null&&(n.register(e,{event:a,eventFlow:{endCancel:e.endCancel,isActive:e.isActive}}),h=new WeakRef(e));return e}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WASyncdMetricFatalError",["$InternalEnum","WALogger","WAPREList","WAPREMetrics","WASyncdConst"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown error code: "," for syncd fatal error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing error code for syncd fatal error"]);i=function(){return a};return a}var j=b("$InternalEnum").Mirrored(["PATCH_PROTOBUF_SERIALIZATION_FAILED","MUTATIONS_PROTOBUF_SERIALIZATION_FAILED","ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED","ENCRYPTION_FAILED","MISSING_SNAPSHOT_VERSION","MISSING_SNAPSHOT_MAC","MISSING_SNAPSHOT_KEY_ID","MISSING_PATCH_VERSION","PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS","MISSING_PATCH_SNAPSHOT_MAC","MISSING_PATCH_MAC","MISSING_PATCH_KEY_ID","MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY","MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH","MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256","MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256","MISSING_MUTATION_OPERATION","MISSING_MUTATION_RECORD","MISSING_MUTATION_INDEX","MISSING_MUTATION_VALUE","MISSING_MUTATION_KEY_ID","EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED","SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED","PATCH_PROTOBUF_DESERIALIZATION_FAILED","MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED","ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED","MISSING_ACTION_INDEX","MISSING_ACTION_VERSION","SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT","SNAPSHOT_MAC_MISMATCH_IN_PATCH","MAC_MISMATCH_PATCH","DECRYPTION_FAILED","DUPLICATE_PATCH_VERSION_IN_COLLECTION","SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH","SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT","MISSING_ACTION_VALUE","MISSING_ACTION_TIMESTAMP","XMPP_BAD_REQUEST_FOR_COLLECTION","XMPP_NOT_FOUND_FOR_COLLECTION","CYCLIC_MUTATION_DEPENDENCY_IN_PATCH","SERVER_DID_NOT_SEND_ALL_PATCHES","TERMINAL_PATCH_MISSING_DATA","TERMINAL_PATCH_DESERIALIZATION_ERROR","TERMINAL_PATCH_UNKNOWN","INVALID_ACTION_INDEX","XMPP_BAD_REQUEST_GLOBAL_ERROR","XMPP_NOT_FOUND_GLOBAL_ERROR","XMPP_BAD_METHOD_GLOBAL_ERROR","XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR","TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D","TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY","MISSING_KEY_ON_ALL_CLIENTS"]);function a(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_FATAL_ERROR).endFail("syncd fatal error: "+a,k({type:a,collection:b,patchSnapshotMutationCount:c,patchVersion:e,isFatal:f,isLtHashConsistent:g,macFatalCollectionNameMismatch:h,macFatalCurrentLthashMismatch:i,macFatalNewLthashMismatch:j,macFatalPatchVersionMismatch:l,macFatalNewLthashSubtractMismatch:m,macFatalNumberHasOverrideMutation:n,macFatalNumberNumAddMutation:o,macFatalNumberNumRemoveMutation:p,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:q,isPatchSenderPrimary:r,macFatalDidUseMacFetchFallback:s,macFatalHasMissingRemove:t,macFatalNumberAddMismatch:u,macFatalNumberRemoveMismatch:v,macFatalDidPreviousPatchFailPostSaveValidation:w,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:x,isPreviousPatchAnIncomingPatch:y,isLastPatchSenderAPrimaryDevice:z,isSenderIndexSameAsPreviousSenderIndex:A,didBootstrapFromSnapshot:B,isThereAnotherSyncdCompanion:C}))}function k(a){var b=a.type,c=a.collection,d=a.patchSnapshotMutationCount,e=a.patchVersion,f=a.isFatal,g=a.isLtHashConsistent,h=a.macFatalCollectionNameMismatch,i=a.macFatalCurrentLthashMismatch,j=a.macFatalNewLthashMismatch,k=a.macFatalPatchVersionMismatch,l=a.macFatalNewLthashSubtractMismatch,m=a.macFatalNumberHasOverrideMutation,n=a.macFatalNumberNumAddMutation,o=a.macFatalNumberNumRemoveMutation,p=a.macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch,q=a.isPatchSenderPrimary,r=a.macFatalDidUseMacFetchFallback,s=a.macFatalHasMissingRemove,t=a.macFatalNumberAddMismatch,u=a.macFatalNumberRemoveMismatch,v=a.macFatalDidPreviousPatchFailPostSaveValidation,w=a.macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash,x=a.isPreviousPatchAnIncomingPatch,y=a.isLastPatchSenderAPrimaryDevice,z=a.isSenderIndexSameAsPreviousSenderIndex,A=a.didBootstrapFromSnapshot;a=a.isThereAnotherSyncdCompanion;return{string:{errorCode:b,collection:c==null?null:c},"int":{patchSnapshotMutationCount:d,patchVersion:e,macFatalNumberNumAddMutation:n,macFatalNumberNumRemoveMutation:o},bool:{isFatal:f,isLtHashConsistent:g,macFatalCollectionNameMismatch:h,macFatalCurrentLthashMismatch:i,macFatalNewLthashMismatch:j,macFatalPatchVersionMismatch:k,macFatalNewLthashSubtractMismatch:l,macFatalNumberHasOverrideMutation:m,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:p,isPatchSenderPrimary:q,macFatalDidUseMacFetchFallback:r,macFatalHasMissingRemove:s,macFatalNumberAddMismatch:t,macFatalNumberRemoveMismatch:u,macFatalDidPreviousPatchFailPostSaveValidation:v,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:w,isPreviousPatchAnIncomingPatch:x,isLastPatchSenderAPrimaryDevice:y,isSenderIndexSameAsPreviousSenderIndex:z,didBootstrapFromSnapshot:A,isThereAnotherSyncdCompanion:a}}}function c(a){var b;b=a==null?void 0:(b=a.string)==null?void 0:b.errorCode;if(b==null){d("WALogger").ERROR(i());return null}var c=j.cast(b);if(c==null){d("WALogger").ERROR(h(),b);return null}return{type:c,collection:d("WASyncdConst").CollectionName.cast(a==null?void 0:(b=a.string)==null?void 0:b.collection),patchSnapshotMutationCount:a==null?void 0:(c=a["int"])==null?void 0:c.patchSnapshotMutationCount,patchVersion:a==null?void 0:(b=a["int"])==null?void 0:b.patchVersion,isFatal:a==null?void 0:(c=a.bool)==null?void 0:c.isFatal,isLtHashConsistent:a==null?void 0:(b=a.bool)==null?void 0:b.isLtHashConsistent,macFatalCollectionNameMismatch:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalCollectionNameMismatch,macFatalCurrentLthashMismatch:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalCurrentLthashMismatch,macFatalNewLthashMismatch:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalNewLthashMismatch,macFatalPatchVersionMismatch:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalPatchVersionMismatch,macFatalNewLthashSubtractMismatch:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalNewLthashSubtractMismatch,macFatalNumberHasOverrideMutation:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalNumberHasOverrideMutation,macFatalNumberNumAddMutation:a==null?void 0:(c=a["int"])==null?void 0:c.macFatalNumberNumAddMutation,macFatalNumberNumRemoveMutation:a==null?void 0:(b=a["int"])==null?void 0:b.macFatalNumberNumRemoveMutation,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch,isPatchSenderPrimary:a==null?void 0:(b=a.bool)==null?void 0:b.isPatchSenderPrimary,macFatalDidUseMacFetchFallback:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalDidUseMacFetchFallback,macFatalHasMissingRemove:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalHasMissingRemove,macFatalNumberAddMismatch:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalNumberAddMismatch,macFatalNumberRemoveMismatch:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalNumberRemoveMismatch,macFatalDidPreviousPatchFailPostSaveValidation:a==null?void 0:(c=a.bool)==null?void 0:c.macFatalDidPreviousPatchFailPostSaveValidation,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:a==null?void 0:(b=a.bool)==null?void 0:b.macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash,isPreviousPatchAnIncomingPatch:a==null?void 0:(c=a.bool)==null?void 0:c.isPreviousPatchAnIncomingPatch,isLastPatchSenderAPrimaryDevice:a==null?void 0:(b=a.bool)==null?void 0:b.isLastPatchSenderAPrimaryDevice,isSenderIndexSameAsPreviousSenderIndex:a==null?void 0:(c=a.bool)==null?void 0:c.isSenderIndexSameAsPreviousSenderIndex,didBootstrapFromSnapshot:a==null?void 0:(b=a.bool)==null?void 0:b.didBootstrapFromSnapshot,isThereAnotherSyncdCompanion:a==null?void 0:(c=a.bool)==null?void 0:c.isThereAnotherSyncdCompanion}}g.SyncdFatalErrorType=j;g.reportSyncdFatalError=a;g.convertSyncdFatalErrorFromAnnotations=c}),98);
__d("WASyncdMetrics",["$InternalEnum","WALogger","WAPREList","WAPREMetrics","WASyncdConst"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown error code: "," for key rotation event"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing error code for key rotation event"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown error code: "," for critical event"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing error code for critical event"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown collection "," for bootstrap data applied event"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing durationMs for bootstrap data applied event"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing snapshotUsed for bootstrap data applied event"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing collection for bootstrap data applied event"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown collection "," for bootstrap app state download metric"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing isSuccess for bootstrap app state download metric"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing downloadStartTs for bootstrap app state download metric"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing collection for bootstrap app state download metric"]);s=function(){return a};return a}var t=b("$InternalEnum").Mirrored(["MISSING_MUTATION_TO_REMOVE"]),u=b("$InternalEnum").Mirrored(["SNAPSHOT_USED","SNAPSHOT_NOT_USED"]),v=b("$InternalEnum").Mirrored(["APP_STATE_SYNC_KEY_EXPIRY","DEVICE_DEREGISTERATION","NO_KEYS"]);function a(a){var b=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD);a.isSuccess!=="success"?b.endFail("syncd error: Error downloading snapshot or patches",w(a)):b.endSuccess(w(a))}function c(a,b,c){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_DATA_APPLIED).endSuccess(x({collection:a,snapshotUsed:b,durationMs:c}))}function e(a,b){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_EVENT).endFail("syncd critical event: "+a,y({type:a,collection:b}))}function f(a){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_KEY_ROTATION).endSuccess(z({type:a}))}function w(a){var b=a.collection,c=a.downloadSize,d=a.downloadStartTs;a=a.isSuccess;return{string:{collection:b},"int":{downloadSize:c,downloadStartTs:d},bool:{isSuccess:a==="success"}}}function x(a){return{string:{collection:a.collection},bool:{snapshot:a.snapshotUsed===u.SNAPSHOT_USED},"int":{durationMs:a.durationMs}}}function y(a){return{string:{criticalEventCode:a.type,collection:a.collection==null?null:a.collection}}}function z(a){return{string:{keyRotationEventCode:a.type}}}function A(a){var b,c,e;b=a==null?void 0:(b=a.string)==null?void 0:b.collection;c=a==null?void 0:(c=a["int"])==null?void 0:c.downloadSize;e=a==null?void 0:(e=a["int"])==null?void 0:e.downloadStartTs;a=a==null?void 0:(a=a.bool)==null?void 0:a.isSuccess;if(b==null){d("WALogger").ERROR(s());return null}if(e==null){d("WALogger").ERROR(r());return null}if(a==null){d("WALogger").ERROR(q());return null}var f=d("WASyncdConst").CollectionName.cast(b);if(f==null){d("WALogger").ERROR(p(),b);return null}b=a?"success":"failure";return{collection:f,downloadStartTs:e,downloadSize:c,isSuccess:b}}function B(a){var b,c;b=a==null?void 0:(b=a.string)==null?void 0:b.collection;c=a==null?void 0:(c=a.bool)==null?void 0:c.snapshot;a=a==null?void 0:(a=a["int"])==null?void 0:a.durationMs;if(b==null){d("WALogger").ERROR(o());return null}if(c==null){d("WALogger").ERROR(n());return null}if(a==null){d("WALogger").ERROR(m());return null}var e=d("WASyncdConst").CollectionName.cast(b);if(e==null){d("WALogger").ERROR(l(),b);return null}b=c?u.SNAPSHOT_USED:u.SNAPSHOT_NOT_USED;return{collection:e,snapshotUsed:b,durationMs:a}}function C(a){var b;b=a==null?void 0:(b=a.string)==null?void 0:b.criticalEventCode;if(b==null){d("WALogger").ERROR(k());return null}var c=t.cast(b);if(c==null){d("WALogger").ERROR(j(),b);return null}return{type:c,collection:d("WASyncdConst").CollectionName.cast(a==null?void 0:(b=a.string)==null?void 0:b.collection)}}function D(a){a=a==null?void 0:(a=a.string)==null?void 0:a.keyRotationEventCode;if(a==null){d("WALogger").ERROR(i());return null}var b=v.cast(a);if(b==null){d("WALogger").ERROR(h(),a);return null}return{type:b}}function E(a){var b={};Object.keys(a).forEach(function(c){typeof a[c]==="number"?(b["int"]==null&&(b["int"]={}),b["int"][c]=a[c]):typeof a[c]==="string"&&(b.string==null&&(b.string={}),b.string[c]=a[c])});return Object.keys(b).length>0?b:void 0}b=function(){function a(){this.event=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD)}var b=a.prototype;b.end=function(a){a===void 0&&(a=!1),a?this.event.endFail("syncd failed"):this.event.endSuccess()};b.mark=function(a,b){this.event.addPoint(a,E(b))};return a}();g.SyncdCriticalEventType=t;g.SyncdBootstrapDataAppliedSnapshotUsed=u;g.SyncdKeyRotationEventType=v;g.reportSyncdBootstrapAppStateDownloadMetric=a;g.reportSyncdBootstrapDataApplied=c;g.reportSyncdCriticalEvent=e;g.reportSyncdKeyRotationEvent=f;g.convertSyncdBootstrapAppStateDownloadFromAnnotations=A;g.convertSyncdBootstrapDataAppliedFromAnnotations=B;g.convertSyncdCriticalEventFromAnnotations=C;g.convertSyncdKeyRotationEventFromAnnotations=D;g.constructAnnotationsFromContext=E;g.SyncdEventFlow=b}),98);
__d("WASyncdAntiTampering",["$InternalEnum","Promise","WABaseGlobals","WACryptoLtHash","WACryptoUtils","WAGetCollectionVersion","WAGetSyncAction","WALogger","WAPromiseEach","WAServerSync.pb","WASyncdConst","WASyncdCrypto","WASyncdCryptoUtils","WASyncdError","WASyncdKeyCache","WASyncdKeyTypes","WASyncdMetricFatalError","WASyncdMetrics","WATextEncoding","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: lthash inconsistent for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["|",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: current snapshot "," v"," with "," mutations:"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: logMacs: ",": prepare"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: failed LtHash check for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing indexMAC in sync-actions table for REMOVE mutation in collection "," version "," direction "," for platform ",":\n        ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: had to use fallbackQueryForValueMac in collection "," for platform ",": ","\n        }"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: computing snapshot and patch macs for outgoing patch "," v",":\n  encoded version: ","\n  encoded collection: ","\n  snapshotMAC: ","\n  patchMAC: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd:\n      expected patchMAC: ","$\n      computed patchMAC: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unable to validate patch mac."]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: snapshot_mac_mismatch_in_patch due to cache mismatch"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: clientDebugData?.currentLthash: ",",\n        scratchLtHash: ",",\n        currentLtHash: ",",\n        macFatalDidPreviousPatchFailPostSaveValidation: ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: skip fatal after snapshot mac mismatch for collection ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd:\n      expected snapshotMAC: ","\n      computed snapshotMAC: ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unable to validate snapshot mac."]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection "," is already in snapshot mac mismatch so not checking again"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: empty local lthash found when processing "," patch v",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," received patch v"," !== latest local version (v",") + 1"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: error on incoming records:\n    \t",""],["syncd: error on incoming records:\n    \\t",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: validating snapshot and patch mac for "," v",":\n  expected snapshotMAC: ","\n  expected patchMAC: ","\n  encoded version: ","\n  encoded collection: ","\n  key ID: ","\n  "]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: shouldRecalculateLtHash: ",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: computeLtHashAndValidatePatch for ",""]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: validating snapshot mac for "," snapshot v",":\n  ltHash: ","\n  encoded version: ","\n  encoded collection: ","\n  expected snapshotMAC: ","\n  "]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd:\n  "," snapshot macsToAdd:\n      ",""]);H=function(){return a};return a}var I=b("$InternalEnum").Mirrored(["Incoming","Outgoing"]);function J(a,b,c){c===void 0&&(c=!0);a=typeof a==="string"?a:d("WASyncdCryptoUtils").arrayBufferToHexPadded(a);b=typeof b==="string"?b:d("WASyncdCryptoUtils").arrayBufferToHexPadded(b);c=c?-16:0;return a.slice(c)+":"+b.slice(c)}var K=d("WATextEncoding").newTextDecoder();function a(a,c){var e,f,g,h,i,j,k,l,m,n,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:e=c.mac,f=c.version,g=c.keyId,h=c.records;p.next=3;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(g.id));case 3:i=p.sent;if(i){p.next=6;break}throw new(d("WASyncdError").SyncdMissingKeyError)();case 6:j=new Map(h.map(function(a){return[d("WASyncdCryptoUtils").arrayBufferToHexPadded(a.index.blob),d("WASyncdCrypto").valueMacFromIndexAndValueCipherText(a.value.blob)]}));d("WALogger").LOG(H(),a,Array.from(j.entries()).map(function(a){var b=a[0];a=a[1];return J(b,a)}).join("\n\t"));p.next=10;return b("regeneratorRuntime").awrap(d("WACryptoLtHash").LT_HASH_ANTI_TAMPERING.add(d("WACryptoLtHash").EMPTY_LT_HASH,Array.from(j.values())));case 10:k=p.sent;p.next=13;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(i));case 13:l=p.sent;m=l.snapshotMacKey;n=d("WASyncdCryptoUtils").to64BitNetworkOrder(f.version);o=d("WASyncdCryptoUtils").toUtf8(a).buffer;d("WALogger").LOG(G(),a,f.version,d("WASyncdCryptoUtils").arrayBufferToHexPadded(k),d("WASyncdCryptoUtils").arrayBufferToHexPadded(n),d("WASyncdCryptoUtils").arrayBufferToHexPadded(o),d("WASyncdCryptoUtils").arrayBufferToHexPadded(e)).devConsole("\n  --- DEV ONLY ---\n  snapshotMacKey: "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(m));p.next=20;return b("regeneratorRuntime").awrap(M(a,e,m,k,n,o,!0,h.length,c.version.version,null,null,null,null));case 20:return p.abrupt("return",k);case 21:case"end":return p.stop()}},null,this)}function c(a,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return b("regeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:x=function(){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(S(a,!1));case 2:c=f.sent,e=new Map(c.map(function(a){var b=a.indexMac;a=a.valueMac;return[d("WASyncdCryptoUtils").arrayBufferToHexPadded(b),d("WASyncdCryptoUtils").arrayBufferToHexPadded(a)]})),d("WALogger").LOG(C(),p.map(function(a){var b=a.operation,c=a.indexMac;a=a.valueMac;return(b===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET?"set":"remove")+" | "+J(c,a,!1)+" | "+(e.has(d("WASyncdCryptoUtils").arrayBufferToHexPadded(c))?"found":"did not find")+" indexMAC in the above logged macs"}).join("\n\t"));case 5:case"end":return f.stop()}},null,this)};d("WALogger").LOG(F(),a);f=c.version,g=c.mutations,h=c.snapshotMac,i=c.patchMac,j=c.keyId;k=j.id;y.next=6;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(k));case 6:l=y.sent;if(l){y.next=9;break}throw new(d("WASyncdError").SyncdMissingKeyError)();case 9:y.next=11;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(l));case 11:m=y.sent;n=m.snapshotMacKey;o=m.patchMacKey;p=g.map(function(a){return{operation:a.operation,indexMac:a.record.index.blob,valueMac:d("WASyncdCrypto").valueMacFromIndexAndValueCipherText(a.record.value.blob)}});y.next=17;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0},function(d){var e,c;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=d.SyncActionStore;f.next=3;return b("regeneratorRuntime").awrap(e.getByCollections([a]));case 3:c=f.sent;return f.abrupt("return",c);case 5:case"end":return f.stop()}},null,this)}));case 17:q=y.sent;r=1e3;s=d("WABaseGlobals").getConfig().syncShouldCalculateLtHashFromScratch()&&q&&q.length<r;d("WALogger").LOG(E(),s);if(!s){y.next=27;break}y.next=24;return b("regeneratorRuntime").awrap(Q(q));case 24:y.t0=y.sent;y.next=30;break;case 27:y.next=29;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionLtHashInTransaction(a));case 29:y.t0=y.sent;case 30:t=y.t0;y.next=33;return b("regeneratorRuntime").awrap(O(a,p,e,c.version.version,I.Incoming,t));case 33:u=y.sent;v=d("WASyncdCryptoUtils").to64BitNetworkOrder(f.version);w=d("WASyncdCryptoUtils").toUtf8(a).buffer;d("WALogger").LOG(D(),a,f.version,d("WASyncdCryptoUtils").arrayBufferToHexPadded(h),d("WASyncdCryptoUtils").arrayBufferToHexPadded(i),d("WASyncdCryptoUtils").arrayBufferToHexPadded(v),d("WASyncdCryptoUtils").arrayBufferToHexPadded(w),d("WASyncdCryptoUtils").arrayBufferToHexPadded(d("WASyncdKeyTypes").fromSyncKeyId(k)));y.prev=37;y.next=40;return b("regeneratorRuntime").awrap(N(a,i,o,h,p.map(function(a){return a.valueMac}),v,w,g.length,f.version));case 40:y.next=42;return b("regeneratorRuntime").awrap(M(a,h,n,u.ltHash,v,w,!1,g.length,f.version,c.clientDebugData,t,u,c.deviceIndex));case 42:y.next=49;break;case 44:y.prev=44;y.t1=y["catch"](37);y.next=48;return b("regeneratorRuntime").awrap(x());case 48:throw y.t1;case 49:return y.abrupt("return",u.ltHash);case 50:case"end":return y.stop()}},null,this,[[37,44]])}function L(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionInTransaction(a).then(function(a){return(a=a==null?void 0:a.version)!=null?a:0}));case 2:e=h.sent;if(!(e!==c-1)){h.next=7;break}f=e>c-1?"greater-than-expected":"less-than-expected";d("WALogger").WARN(B(),a,c,e).sendLogs("syncd-version-check-error-local-version-"+f);throw new(d("WASyncdError").SyncdRetryableError)("syncd-version-check-error-local-version-"+f);case 7:h.next=9;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionLtHashInTransaction(a));case 9:g=h.sent;if(!(d("WACryptoUtils").arrayBuffersEqual(g,d("WACryptoLtHash").EMPTY_LT_HASH)&&c!==1)){h.next=13;break}d("WALogger").WARN(A(),a,c).sendLogs("syncd-empty-lthash-on-mac-mismatch");throw new(d("WASyncdError").SyncdRetryableError)("empty lthash");case 13:case"end":return h.stop()}},null,this)}function M(a,c,e,f,g,h,i,j,k,l,m,n,o){var p,q,r,s,t,A,B,C,D,E,F,G,H,I,J,K,M,N,O,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea;return b("regeneratorRuntime").async(function($){while(1)switch($.prev=$.next){case 0:q=d("WABaseGlobals").getConfig().syncdShouldNotFatalOnSnapshotMacMismatchInPatches()&&!i;$.next=3;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getIsCollectionInMacMismatchFatalInTransaction(a));case 3:$.t0=p=$.sent;if(!($.t0!=null)){$.next=8;break}$.t1=p;$.next=9;break;case 8:$.t1=!1;case 9:r=$.t1;if(!(q&&r)){$.next=13;break}d("WALogger").LOG(z(),a);return $.abrupt("return");case 13:$.next=15;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateSnapshotMac(e,f,g,h));case 15:s=$.sent;t=d("WACryptoUtils").arrayBuffersEqual(s,c);if(t){$.next=69;break}d("WALogger").WARN(y()).sendLogs("syncd: unable to validate snapshot mac.",{sampling:.01});d("WALogger").DEV(x(),d("WASyncdCryptoUtils").arrayBufferToHexPadded(c),d("WASyncdCryptoUtils").arrayBufferToHexPadded(s));if(i){$.next=23;break}$.next=23;return b("regeneratorRuntime").awrap(L(a,k));case 23:$.next=25;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"failed validate snapshot mac"));case 25:$.next=27;return b("regeneratorRuntime").awrap(P(a));case 27:A=$.sent;B=A.isLtHashConsistent;C=A.scratchLtHash;D=i?d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_PATCH;E=(l==null?void 0:l.collectionName)&&!d("WACryptoUtils").arrayBuffersEqual(h,l==null?void 0:l.collectionName);F=(l==null?void 0:l.newLthash)&&!d("WACryptoUtils").arrayBuffersEqual(f,l==null?void 0:l.newLthash);G=(l==null?void 0:l.patchVersion)&&!d("WACryptoUtils").arrayBuffersEqual(g,l==null?void 0:l.patchVersion);H=(l==null?void 0:l.currentLthash)&&m&&!d("WACryptoUtils").arrayBuffersEqual(m,l==null?void 0:l.currentLthash);I=(l==null?void 0:l.newLthashSubtract)&&(n==null?void 0:n.subtractResult)&&!d("WACryptoUtils").arrayBuffersEqual(n==null?void 0:n.subtractResult,l==null?void 0:l.newLthashSubtract);J=n==null?void 0:n.hasOverride;K=n==null?void 0:n.numAdd;M=n==null?void 0:n.numRemove;N=(l==null?void 0:l.currentLthash)&&C&&!d("WACryptoUtils").arrayBuffersEqual(C,l==null?void 0:l.currentLthash);O=o===0;Q=(l==null?void 0:l.numberAdd)!=null&&(n==null?void 0:n.numAdd)!=null&&(n==null?void 0:n.numAdd)!==(l==null?void 0:l.numberAdd);R=(l==null?void 0:l.numberRemove)!=null&&(n==null?void 0:n.numRemove)!=null&&(n==null?void 0:n.numRemove)!==(l==null?void 0:l.numberRemove);S=n==null?void 0:n.didUseFallback;T=n==null?void 0:n.hasMissingRemove;$.next=47;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionInTransaction(a));case 47:U=$.sent;V=U==null?void 0:U.didLastPatchFailPostValidation;W=(l==null?void 0:l.currentLthash)&&(U==null?void 0:U.lastPatchNewLtHashFromPatchDebugData)&&!d("WACryptoUtils").arrayBuffersEqual(U==null?void 0:U.lastPatchNewLtHashFromPatchDebugData,l==null?void 0:l.currentLthash);X=U==null?void 0:U.isLastPatchAnIncomingPatch;Y=U==null?void 0:U.isLastPatchSenderAPrimaryDevice;Z=U==null?void 0:U.didBootstrapFromSnapshot;aa=(U==null?void 0:U.lastPatchSenderDeviceId)!=null&&o!=null&&o===(U==null?void 0:U.lastPatchSenderDeviceId);$.next=56;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getConfig().getAreThereMoreCompanions());case 56:ba=$.sent;d("WASyncdMetricFatalError").reportSyncdFatalError(D,a,j,k,!q,B,E,H,F,G,I,J,K,M,N,O,S,T,Q,R,V,W,X,Y,aa,Z,ba);if(!q){$.next=68;break}$.next=61;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").updateIsCollectionInMacMismatchFatalInTransaction(a));case 61:d("WALogger").LOG(w(),a);if(!(N===!1&&H===!0)){$.next=67;break}d("WALogger").LOG(v(),d("WASyncdCryptoUtils").arrayBufferToHexPadded((ca=l==null?void 0:l.currentLthash)!=null?ca:new ArrayBuffer(0)).slice(-16),d("WASyncdCryptoUtils").arrayBufferToHexPadded((da=C)!=null?da:new ArrayBuffer(0)).slice(-16),d("WASyncdCryptoUtils").arrayBufferToHexPadded((ea=m)!=null?ea:new ArrayBuffer(0)).slice(-16),V);$.next=66;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().printSyncdLog());case 66:d("WALogger").ERROR(u()).sendLogs("syncd: snapshot_mac_mismatch_in_patch due to cache mismatch");case 67:return $.abrupt("return");case 68:throw new(d("WASyncdError").SyncdFatalError)("unable to validate snapshot mac");case 69:case"end":return $.stop()}},null,this)}function N(a,c,e,f,g,h,i,j,k){var l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generatePatchMac(e,f,g,h,i));case 2:l=n.sent;m=d("WACryptoUtils").arrayBuffersEqual(l,c);if(m){n.next=13;break}n.next=7;return b("regeneratorRuntime").awrap(L(a,k));case 7:n.next=9;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"failed validate patch mac"));case 9:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MAC_MISMATCH_PATCH,a,j,k);d("WALogger").WARN(t()).sendLogs("syncd: unable to validate patch mac.");d("WALogger").DEV(s(),c,l);throw new(d("WASyncdError").SyncdFatalError)("unable to validate patch mac");case 13:case"end":return n.stop()}},null,this)}function e(a,c,e,f){var g,h,i,j,k,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionInTransaction(a).then(function(a){return(a=a==null?void 0:a.version)!=null?a:d("WASyncdConst").DEFAULT_COLLECTION_VERSION}));case 2:o.t0=o.sent;g=o.t0+1;o.next=6;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(f));case 6:h=o.sent;i=h.patchMacKey;j=h.snapshotMacKey;k=d("WASyncdCryptoUtils").to64BitNetworkOrder(g);l=d("WASyncdCryptoUtils").toUtf8(a).buffer;o.next=13;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateSnapshotMac(j,c,k,l));case 13:m=o.sent;o.next=16;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generatePatchMac(i,m,e.map(function(a){return a.valueMac}),k,l));case 16:n=o.sent;d("WALogger").LOG(r(),a,g,d("WASyncdCryptoUtils").arrayBufferToHexPadded(k),d("WASyncdCryptoUtils").arrayBufferToHexPadded(l),d("WASyncdCryptoUtils").arrayBufferToHexPadded(m),d("WASyncdCryptoUtils").arrayBufferToHexPadded(n)).devConsole("\n  --- DEV ONLY ---\n  snapshotMacKey: "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(j)+"\n  patchMacKey: "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(i));return o.abrupt("return",{snapshotMac:m,patchMac:n});case 19:case"end":return o.stop()}},null,this)}function O(a,c,e,f,g,i){var j,k,l,m,r,s,t,u,v,w,x,y,z,A,B;return b("regeneratorRuntime").async(function(C){while(1)switch(C.prev=C.next){case 0:B=function(a){return e==null?(h||(h=b("Promise"))).resolve(null):e(a)};k=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();if(!((j=i)!=null)){C.next=6;break}C.t0=j;C.next=9;break;case 6:C.next=8;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionLtHashInTransaction(a));case 8:C.t0=C.sent;case 9:l=C.t0;C.next=12;return b("regeneratorRuntime").awrap(R(c.map(function(a){return a.indexMac})));case 12:m=C.sent;r=new Map();s=new Map();t=new Map();u=!1;v=!1;C.next=20;return b("regeneratorRuntime").awrap(d("WAPromiseEach").promiseEach(c,function(c){var e,h,i,j,k,l,n,o;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:e=c.indexMac,h=c.valueMac,i=c.operation;j=K.decode(e);k=m.get(j);if(!k){w.next=7;break}i===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE?s.set(d("WASyncdCryptoUtils").arrayBufferToHexPadded(e),k.valueMac):t.set(d("WASyncdCryptoUtils").arrayBufferToHexPadded(e),k.valueMac);w.next=12;break;case 7:if(!(i===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE)){w.next=12;break}w.next=10;return b("regeneratorRuntime").awrap(B(e));case 10:l=w.sent,l!=null?(s.set(d("WASyncdCryptoUtils").arrayBufferToHexPadded(e),l),v=!0,d("WALogger").WARN(q(),a,(n=d("WABaseGlobals").getConfig().primaryPlatform())!=null?n:"[empty]",d("WASyncdCryptoUtils").arrayBufferToHexPadded(e).slice(-16)).tags("non-sad").sendLogs("syncd: fallback query")):(u=!0,d("WASyncdMetrics").reportSyncdCriticalEvent(d("WASyncdMetrics").SyncdCriticalEventType.MISSING_MUTATION_TO_REMOVE,a),d("WALogger").ERROR(p(),a,f,g,(o=d("WABaseGlobals").getConfig().primaryPlatform())!=null?o:"[empty]",d("WASyncdCryptoUtils").arrayBufferToHexPadded(e).slice(-16)).sendLogs("syncd: missing indexMAC from REMOVE",{sampling:.01}));case 12:i===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET&&r.set(d("WASyncdCryptoUtils").arrayBufferToHexPadded(e),h);case 13:case"end":return w.stop()}},null,this)}));case 20:C.next=22;return b("regeneratorRuntime").awrap(d("WACryptoLtHash").LT_HASH_ANTI_TAMPERING.subtractThenAdd(l,Array.from(r.values()),Array.from(s.values()).concat(Array.from(t.values()))));case 22:w=C.sent;x=w.ltHash;y=w.subtractResult;z="syncd: computing ltHash for "+a+":\n  mutations length: "+c.length+"\n  currentLtHash: "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(l).slice(-16)+"\n  currentMacs length: "+m.size+"\n  macsToAdd:\n      "+Array.from(r.entries()).map(function(a){var b=a[0];a=a[1];return J(b,a)}).join("\n\t")+"\n  macsToRemove:\n      "+Array.from(s.entries()).map(function(a){var b=a[0];a=a[1];return J(b,a)}).join("\n\t")+"\n  macsToOverwrite (also remove):\n      "+Array.from(t.entries()).map(function(a){var b=a[0];a=a[1];return J(b,a)}).join("\n\t")+"\n  newLtHash: "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(x).slice(-16)+"\n  hasMissingRemove: "+u.toString()+"\n  didUseFallback: "+v.toString();d("WALogger").LOG(o(),z);if(!(k&&g===I.Outgoing)){C.next=34;break}A="\n      input mutations mac:\n      "+c.map(function(a){return(a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET?"SET ":"REMOVE ")+J(a.indexMac,a.valueMac)}).join("\n\t")+"\n      currentMacs: "+Array.from(m.values()).map(function(a){return J(a.indexMac,a.valueMac)}).join(", ")+"\n    ";d("WALogger").LOG(n(),A);C.next=32;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"generate lthash details 1: "+z));case 32:C.next=34;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"generate lthash details 2: "+A));case 34:return C.abrupt("return",{ltHash:x,numAdd:r.size,numRemove:s.size,hasOverride:t.size>0,subtractResult:y,hasMissingRemove:u,didUseFallback:v});case 35:case"end":return C.stop()}},null,this)}function P(a,c){var e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,CollectionVersionStore:!0},function(c){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d=c.SyncActionStore,e=c.CollectionVersionStore;if(!(a==null)){g.next=7;break}g.next=4;return b("regeneratorRuntime").awrap(e.getAll());case 4:g.t0=g.sent;g.next=11;break;case 7:g.next=9;return b("regeneratorRuntime").awrap(e.get(a));case 9:g.t1=g.sent,g.t0=[g.t1];case 11:f=g.t0;return g.abrupt("return",(h||(h=b("Promise"))).all(f.filter(Boolean).map(function(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=a.collection,e=a.ltHash;g.next=3;return b("regeneratorRuntime").awrap(d.getByCollections([c]));case 3:f=g.sent;return g.abrupt("return",{collection:c,ltHash:e,mutations:f});case 5:case"end":return g.stop()}},null,this)})));case 13:case"end":return g.stop()}},null,this)}));case 2:e=k.sent;f=0;e.map(function(a){a.collection;a.ltHash;a=a.mutations;f+=a.length});if(!(c!==void 0&&f>c)){k.next=7;break}return k.abrupt("return",{isLtHashConsistent:void 0,scratchLtHash:void 0,cachedLtHash:void 0});case 7:g=null;i=null;j=!0;k.next=12;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(e.map(function(a){var c,e,h,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:c=a.collection,e=a.ltHash,h=a.mutations;l.next=3;return b("regeneratorRuntime").awrap(Q(h));case 3:k=l.sent,g==null&&(g=k),i==null&&(i=e),d("WACryptoUtils").arrayBuffersEqual(e,k)||f>0&&(j=!1,d("WALogger").ERROR(m(),c).verbose().sendLogs("LtHash check failed",{sampling:.01}));case 7:case"end":return l.stop()}},null,this)})));case 12:return k.abrupt("return",{isLtHashConsistent:j,scratchLtHash:g,cachedLtHash:i});case 13:case"end":return k.stop()}},null,this)}function Q(a){a=new Map(a.map(function(a){return[d("WASyncdCryptoUtils").arrayBufferToHexPadded(a.indexMac),a.valueMac]}));return d("WACryptoLtHash").LT_HASH_ANTI_TAMPERING.add(d("WACryptoLtHash").EMPTY_LT_HASH,Array.from(a.values()))}function R(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByIndexMacsInTransaction(a));case 2:c=e.sent;return e.abrupt("return",new Map(c.map(function(a){return[K.decode(a.indexMac),{indexMac:a.indexMac,valueMac:a.valueMac}]})));case 4:case"end":return e.stop()}},null,this)}function S(a,c){var e,f,g,i,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:c===void 0&&(c=!0);e=c?20:1;d("WALogger").LOG(l(),a);n.next=5;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,CollectionVersionStore:!0},function(c){var d=c.SyncActionStore;c=c.CollectionVersionStore;return(h||(h=b("Promise"))).all([c.get(a).then(function(a){return a==null?void 0:a.version}),d.getByCollections([a])])}));case 5:f=n.sent;g=f[0];i=f[1];d("WALogger").LOG(k(),a,g,i.length);if(!(c&&i.length>100)){n.next=11;break}return n.abrupt("return",i);case 11:m=i.reduce(function(a,b,d){d%e===0&&a.push("");a[a.length-1]+=J(b.indexMac,b.valueMac,c)+" | ";return a},[]);m.forEach(function(a){return d("WALogger").LOG(j(),a)});return n.abrupt("return",i);case 14:case"end":return n.stop()}},null,this)}function f(a,c){var e,f,g,h,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.next=2;return b("regeneratorRuntime").awrap(P(a,400));case 2:e=m.sent;f=e.isLtHashConsistent;g=e.scratchLtHash;h=e.cachedLtHash;j=g==null?"":d("WASyncdCryptoUtils").arrayBufferToHexPadded(g).slice(-16);k=h==null?"":d("WASyncdCryptoUtils").arrayBufferToHexPadded(h).slice(-16);m.next=10;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getIsCollectionLthashInconsistentInTransaction(a));case 10:l=m.sent;if(!(l===!0)){m.next=15;break}m.next=14;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"lthash already inconsistent. scratchLtHash: "+j+", cachedLtHash: "+k+", context: "+c));case 14:return m.abrupt("return",!0);case 15:if(!(f===!1)){m.next=26;break}m.next=18;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"lthash first time inconsistent. scratchLtHash: "+j+", cachedLtHash: "+k+", context: "+c));case 18:m.next=20;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().printSyncdLog());case 20:m.next=22;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").updateIsCollectionLthashInconsistentInTransaction(a));case 22:d("WALogger").ERROR(i(),a).verbose().sendLogs("syncd: lthash inconsistent",{sampling:.01});return m.abrupt("return",!0);case 26:if(!(f===!0)){m.next=30;break}m.next=29;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"lthash consistent. scratchLtHash: "+j+", cachedLtHash: "+k+", context: "+c));case 29:return m.abrupt("return",!1);case 30:m.next=32;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"lthash unknown if consistent. scratchLtHash: "+j+", cachedLtHash: "+k+", context: "+c));case 32:return m.abrupt("return",void 0);case 33:case"end":return m.stop()}},null,this)}g.SyncdPatchDirection=I;g.indexAndValueMacToString=J;g.computeLtHashAndValidateSnapshot=a;g.computeLtHashAndValidatePatch=c;g.computeOutgoingSnapshotAndPatchMacs=e;g.computeLtHash=O;g.checkLtHash=P;g.logMacsInSnapshot=S;g.reportCollectionInconsistency=f}),98);
__d("WASyncdCollectionUtils",["WASyncdConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a==null}function b(a){switch(a){case d("WASyncdConst").CollectionName.CriticalBlock:return!0;case d("WASyncdConst").CollectionName.CriticalUnblockLow:return!0;case d("WASyncdConst").CollectionName.Regular:return!1;case d("WASyncdConst").CollectionName.RegularHigh:return!1;case d("WASyncdConst").CollectionName.RegularLow:return!1}}g.isBootstrap=a;g.isCriticalCollection=b}),98);
__d("WASyncdDecode",["WAServerSync.pb","WASyncAction.pb","WASyncdError","WASyncdMetricFatalError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return d("decodeProtobuf").decodeProtobuf(d("WAServerSync.pb").ExternalBlobReferenceSpec,b)}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("external blob reference protobuf deserialization failed")}}function b(a,b){try{return d("decodeProtobuf").decodeProtobuf(d("WAServerSync.pb").SyncdSnapshotSpec,b)}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("snapshot protobuf deserialization failed")}}function c(a,b){try{return d("decodeProtobuf").decodeProtobuf(d("WAServerSync.pb").SyncdPatchSpec,b)}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_PROTOBUF_DESERIALIZATION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("patch protobuf deserialization failed")}}function e(a,b){try{return d("decodeProtobuf").decodeProtobuf(d("WAServerSync.pb").SyncdMutationsSpec,b)}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("mutations protobuf deserialization failed")}}function f(a,b){try{return d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,b)}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("action data protobuf deserialization failed")}}g.decodeExternalBlobReference=a;g.decodeSyncdSnapshot=b;g.decodeSyncdPatch=c;g.decodeSyncdMutations=e;g.decodeSyncActionData=f}),98);
__d("WASyncdValidateSyncActionProtobuf",["WASyncdError","WASyncdMetricFatalError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.validateSyncActionDataProtobuf=function(a,b){var c=b.index,e=b.value,f=b.padding;b=b.version;if(!c){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_INDEX,a);throw new(d("WASyncdError").SyncdFatalError)("missing action index")}if(b==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_VERSION,a);throw new(d("WASyncdError").SyncdFatalError)("missing action version")}return{index:c,value:e,padding:f,version:b}};return a}();g["default"]=a}),98);
__d("WASyncdDecryptMutations",["Promise","WABaseGlobals","WACryptoUtils","WAServerSync.pb","WASyncdCrypto","WASyncdCryptoConst","WASyncdCryptoUtils","WASyncdDecode","WASyncdError","WASyncdKeyCache","WASyncdMetricFatalError","WASyncdValidateSyncActionProtobuf","WATextEncoding","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("WATextEncoding").newTextDecoder();function a(a,c){return(h||(h=b("Promise"))).all(c.records.map(function(b){return j(a,d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,b)}))}function e(a,c){return(h||(h=b("Promise"))).all(c.mutations.map(function(b){return j(a,b.operation,b.record)}))}function j(a,c,e){var f,g,h,j,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:f=e.keyId.id;q.next=3;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(f));case 3:g=q.sent;if(g){q.next=10;break}if(!(c===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE)){q.next=9;break}q.next=8;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"exception: no key data for remove mutations"));case 8:throw new(d("WASyncdError").SyncdFatalError)("no key data for remove mutations");case 9:throw new(d("WASyncdError").SyncdMissingKeyError)();case 10:q.next=12;return b("regeneratorRuntime").awrap(k(a,f,g,c,e));case 12:h=q.sent;j=h.syncAction;l=h.indexMac;m=h.valueMac;n=h.indexValueBinary;o=j.index,p=j.version;return q.abrupt("return",{index:i.decode(o),action:null,version:p,keyId:f,operation:c,indexMac:l,valueMac:m,collection:a,binarySyncData:n});case 19:case"end":return q.stop()}},null,this)}function k(a,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").async(function(A){while(1)switch(A.prev=A.next){case 0:i=h.index.blob;j=h.value.blob;k=d("WASyncdCrypto").valueMacFromIndexAndValueCipherText(j);l=d("WASyncdCryptoUtils").split(j,d("WASyncdCryptoConst").IV_LENGTH,j.byteLength-d("WASyncdCryptoConst").MAC_LENGTH-d("WASyncdCryptoConst").IV_LENGTH);m=l[0];n=l[1];o=l[2];A.next=9;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(f));case 9:p=A.sent;q=p.indexKey,r=p.valueEncryptionKey,s=p.valueMacKey;t=d("WASyncdCryptoUtils").combine([m,n]);u=d("WASyncdCrypto").generateAssociatedData(g,e);A.next=15;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateMac(u,t,s));case 15:v=A.sent;if(d("WACryptoUtils").arrayBuffersEqual(o,v)){A.next=19;break}d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.DECRYPTION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("decryption failure: valueMAC mismatch");case 19:A.next=21;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").decryptCipherText(new Uint8Array(m),r,n));case 21:w=A.sent;x=d("WASyncdDecode").decodeSyncActionData(a,w);y=c("WASyncdValidateSyncActionProtobuf").validateSyncActionDataProtobuf(a,x);A.next=26;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateIndexMac(q,y.index));case 26:z=A.sent;if(d("WACryptoUtils").arrayBuffersEqual(i,z)){A.next=30;break}d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.DECRYPTION_FAILED,a);throw new(d("WASyncdError").SyncdFatalError)("decryption failure: indexMAC mismatch");case 30:return A.abrupt("return",{syncAction:y,indexMac:i,valueMac:k,indexValueBinary:w});case 31:case"end":return A.stop()}},null,this)}g.tryDecryptSnapshot=a;g.tryDecryptPatch=e}),98);
__d("WASyncdGetActionHandler",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null;function a(a){h==null&&(h=new Map(d("WABaseGlobals").getConfig().syncdActionHandlers().map(function(a){return[a.getAction(),a]})));return h.get(a)}function b(){i==null&&(i=Math.max.apply(Math,d("WABaseGlobals").getConfig().syncdActionHandlers().map(function(a){return a.getVersion()})));return i}g.getActionHandler=a;g.maxSupportedVersion=b}),98);
__d("WASyncdStoreMissingKeys",["Promise","WAAsyncSleep","WABaseGlobals","WAGetMissingKey","WAGetSyncKey","WALogger","WASyncdCryptoUtils","WASyncdMetricFatalError","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: missing key on all clients"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: expired keys: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: actually missing keys: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing keys: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: all keys: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: check if has expired keys"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: timeout while waiting for missing key"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _timeoutWhileWaitingForMissingKey: no expired keys"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _timeoutWhileWaitingForMissingKey"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: earliest missing key: ",", timestamp=",", timeoutMs=",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _setMissingKeyTimeout: missing keys: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: updateMissingKeys: finish updating missing keys from device ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: updateMissingKeys: begin updating missing keys from device ","\n      \tmissingKeys: [","]"],["syncd: updateMissingKeys: begin updating missing keys from device ","\n      \\tmissingKeys: [","]"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: updateMissingKeys from device ","\n    \tkeys with keyData: ","\n    \tkeys without keyData: ",""],["syncd: updateMissingKeys from device ","\n    \\tkeys with keyData: ","\n    \\tkeys without keyData: ",""]);v=function(){return a};return a}var w;function a(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().getDeviceFingerprint());case 2:a=c.sent.deviceIndexes;return c.abrupt("return",d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=c.MissingKeyStore;f.next=3;return b("regeneratorRuntime").awrap(d.getAll());case 3:e=f.sent;if(!(e.length===0)){f.next=6;break}return f.abrupt("return",(h||(h=b("Promise"))).resolve());case 6:e.forEach(function(b){var c=b.deviceResponses;c.forEach(function(c,d){a.includes(d)||b.deviceResponses["delete"](d)})});f.next=9;return b("regeneratorRuntime").awrap(d.bulkUpdate(e));case 9:f.next=11;return b("regeneratorRuntime").awrap(B({MissingKeyStore:d}));case 11:case"end":return f.stop()}},null,this)}));case 4:case"end":return c.stop()}},null,this)}function c(a,c){var e=[],f=[];a.forEach(function(a){var b=a.keyData;a=d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId);b?e.push(a):f.push(a)});d("WALogger").LOG(v(),c,e,f);return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(a){var g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=a.MissingKeyStore;if(!(e.length>0)){i.next=6;break}i.next=4;return b("regeneratorRuntime").awrap(g.bulkRemove(e));case 4:i.next=6;return b("regeneratorRuntime").awrap(y({MissingKeyStore:g}));case 6:if(!(f.length>0)){i.next=18;break}i.next=9;return b("regeneratorRuntime").awrap(g.bulkGet(f));case 9:i.t0=Boolean;h=i.sent.filter(i.t0);h.forEach(function(a){return a.deviceResponses.set(c,!1)});d("WALogger").LOG(u(),c,f);i.next=15;return b("regeneratorRuntime").awrap(g.bulkUpdate(h));case 15:d("WALogger").LOG(t(),c);i.next=18;return b("regeneratorRuntime").awrap(B({MissingKeyStore:g}));case 18:case"end":return i.stop()}},null,this)})}function x(){return d("WABaseGlobals").runInTransaction({MissingKeyStore:!0},function(a){a=a.MissingKeyStore;return y({MissingKeyStore:a})})}function y(a){var c,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c=a.MissingKeyStore;clearTimeout(w);w=null;h.next=5;return b("regeneratorRuntime").awrap(c.getAll());case 5:e=h.sent;if(!(e.length===0)){h.next=8;break}return h.abrupt("return");case 8:d("WALogger").LOG(s(),e.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)})),f=e.reduce(function(a,b){return a.timestamp<b.timestamp?a:b}),g=d("WABaseGlobals").getConfig().syncdWaitForKeyTimeoutDays()*d("WATimeUtils").DAY_MILLISECONDS-(-f.timestamp+d("WATimeUtils").unixTimeMs()),d("WALogger").LOG(r(),d("WASyncdCryptoUtils").syncKeyIdToHex(f.keyId),f.timestamp,g),w=setTimeout(z,g);case 13:case"end":return h.stop()}},null,this)}function z(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:d("WALogger").LOG(q());a.next=3;return b("regeneratorRuntime").awrap(A());case 3:if(a.sent){a.next=6;break}d("WALogger").LOG(p());return a.abrupt("return");case 6:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY),d("WALogger").ERROR(o()).sendLogs("syncd fatal error: timeout while waiting for missing key"),d("WABaseGlobals").getDbImpls().handleSyncdFatal();case 9:case"end":return a.stop()}},null,this)}function A(){var a,c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d("WALogger").LOG(n());g.next=3;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getAllSyncKeysInTransaction());case 3:g.t0=function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)};a=g.sent.map(g.t0);d("WALogger").LOG(m(),a);g.next=8;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").getAllMissingKeysInTransaction());case 8:c=g.sent;d("WALogger").LOG(l(),c.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)}));e=c.filter(function(b){return!a.includes(b.keyHex)});d("WALogger").LOG(k(),c.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)}));f=e.filter(function(a){return d("WABaseGlobals").getConfig().syncdWaitForKeyTimeoutDays()*d("WATimeUtils").DAY_MILLISECONDS<d("WATimeUtils").unixTimeMs()-a.timestamp});d("WALogger").LOG(j(),f.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)}));return g.abrupt("return",f.length>0);case 15:case"end":return g.stop()}},null,this)}function B(a){var c,e,f,g,h,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:c=a.MissingKeyStore;r.next=3;return b("regeneratorRuntime").awrap(c.getAll());case 3:e=r.sent,(f=e,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!g){r.next=11;break}if(!(h>=f.length)){r.next=8;break}return r.abrupt("break",43);case 8:j=f[h++];r.next=15;break;case 11:h=f.next();if(!h.done){r.next=14;break}return r.abrupt("break",43);case 14:j=h.value;case 15:k=j,l=!0,(m=k.deviceResponses.values(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 18:if(!n){r.next=24;break}if(!(o>=m.length)){r.next=21;break}return r.abrupt("break",34);case 21:p=m[o++];r.next=28;break;case 24:o=m.next();if(!o.done){r.next=27;break}return r.abrupt("break",34);case 27:p=o.value;case 28:q=p;if(!(q==null)){r.next=32;break}l=!1;return r.abrupt("break",34);case 32:r.next=18;break;case 34:if(!l){r.next=41;break}d("WALogger").ERROR(i()).sendLogs("syncd: fatal error: missing key on all clients");d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_KEY_ON_ALL_CLIENTS);r.next=39;return b("regeneratorRuntime").awrap(d("WAAsyncSleep").asyncSleep(5e3));case 39:d("WABaseGlobals").getDbImpls().handleSyncdFatal();return r.abrupt("return");case 41:r.next=5;break;case 43:case"end":return r.stop()}},null,this)}function e(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=function(){var a=new Map();c.forEach(function(b){return a.set(b,null)});return a};f=a.map(function(a){return{keyHex:d("WASyncdCryptoUtils").syncKeyIdToHex(a),keyId:a,timestamp:d("WATimeUtils").unixTimeMs(),deviceResponses:e()}});g.next=4;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").bulkUpdateMissingKeysInTransaction(f));case 4:g.next=6;return b("regeneratorRuntime").awrap(x());case 6:case"end":return g.stop()}},null,this)}g.updateMissingKeyDevices=a;g.updateMissingKeys=c;g.setMissingKeyTimeoutInTransaction=x;g.hasExpiredKeys=A;g.addMissingKeys=e}),98);
__d("WASyncdHandleMissingKeys",["Promise","WABaseGlobals","WAGetMissingKey","WAGetSyncKey","WALogger","WASyncdCryptoUtils","WASyncdError","WASyncdKeyTypes","WASyncdStoreMissingKeys","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: requestAllMissingKeys: missing keys: [","]"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _handleMissingKeys: missing keys after filter: [","]"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _handleMissingKeys: missing keys [","]"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _handleMissingKeys: skipping due to resume from restart in progress"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection ","'s patches has missing keys ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: handleMissingKeysInPatches: missing key: keyId: ",", patch version: ",", patch device id: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection ","'s snapshot has missing keys ",""]);o=function(){return a};return a}var p=d("WASyncdKeyTypes").toSyncKeyId(new ArrayBuffer(0));function a(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=new Set();g.next=3;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getAllSyncKeysInTransaction());case 3:g.t0=function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)};f=g.sent.map(g.t0);c.records.forEach(function(a){a=a.keyId.id;if(d("WASyncdCryptoUtils").syncKeyIdsEqual(a,p))throw new(d("WASyncdError").SyncdFatalError)("snapshot has empty key");a=d("WASyncdCryptoUtils").syncKeyIdToHex(a);f.includes(a)||e.add(a)});d("WALogger").LOG(o(),a,Array.from(e));g.next=9;return b("regeneratorRuntime").awrap(q(e));case 9:case"end":return g.stop()}},null,this)}function c(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=new Set();g.next=3;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getAllSyncKeysInTransaction());case 3:g.t0=function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)};f=g.sent.map(g.t0);c.forEach(function(a){var b=a.keyId.id;if(d("WASyncdCryptoUtils").syncKeyIdsEqual(b,p))throw new(d("WASyncdError").SyncdFatalError)("syncd: patch has empty key. patch device id: ${p.deviceIndex}");b=d("WASyncdCryptoUtils").syncKeyIdToHex(b);f.includes(b)||(d("WALogger").LOG(n(),b,a.version.version,a.deviceIndex),e.add(b))});d("WALogger").LOG(m(),a,Array.from(e));g.next=9;return b("regeneratorRuntime").awrap(q(e));case 9:case"end":return g.stop()}},null,this)}function q(a){var c,e,f,g,i;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(!(d("WABaseGlobals").getConfig().offlineProcessingState()!=="idle")){m.next=3;break}d("WALogger").LOG(l());return m.abrupt("return");case 3:c=Array.from(a);d("WALogger").LOG(k(),c);m.t0=Set;m.next=8;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").bulkGetMissingKeysInTransaction(c));case 8:m.t1=Boolean;m.t2=function(a){return a.keyHex};m.t3=m.sent.filter(m.t1).map(m.t2);e=new m.t0(m.t3);f=c.filter(function(a){return!e.has(a)});d("WALogger").LOG(j(),f);if(!(f.length===0)){m.next=16;break}return m.abrupt("return",(h||(h=b("Promise"))).resolve());case 16:g=f.map(function(a){return d("WASyncdKeyTypes").toSyncKeyId(d("WASyncdCryptoUtils").hexToUint8Array(a).buffer)});m.next=19;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().sendSyncdKeyRequest(g));case 19:i=m.sent;m.next=22;return b("regeneratorRuntime").awrap(d("WASyncdStoreMissingKeys").addMissingKeys(g,i));case 22:case"end":return m.stop()}},null,this)}function e(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").getAllMissingKeysInTransaction());case 2:a=c.sent;d("WALogger").LOG(i(),a.map(function(a){return a.keyHex}));if(!(a.length===0)){c.next=6;break}return c.abrupt("return");case 6:c.next=8;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().sendSyncdKeyRequest(a.map(function(a){return a.keyId})));case 8:case"end":return c.stop()}},null,this)}g.handleMissingKeysInSnapshot=a;g.handleMissingKeysInPatches=c;g.requestAllMissingKeys=e}),98);
__d("WASyncdValidateServerSyncProtobuf",["WABaseGlobals","WALongInt","WASyncAction.pb","WASyncdError","WASyncdKeyTypes","WASyncdMetricFatalError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.validateSnapshotProtobuf=function(b,c){var e=c.version,f=c.records,g=c.mac;c=c.keyId;var h=e==null?void 0:e.version;if(!e||h==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_VERSION,b);throw new(d("WASyncdError").SyncdFatalError)("missing snapshot version")}e=f.map(function(c){return a.validateRecordProtobuf(b,c)});if(!g){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_MAC,b);throw new(d("WASyncdError").SyncdFatalError)("missing snapshot mac")}f=a.validateKeyIdProtobuf(b,c,d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_KEY_ID);return{version:{version:d("WALongInt").numberOrThrowIfTooLarge(h)},records:e,mac:g,keyId:f}};a.validatePatchProtobuf=function(b,c){var e=c.version,f=c.mutations,g=c.externalMutations,h=c.snapshotMac,i=c.patchMac,j=c.keyId,k=c.exitCode,l=c.deviceIndex;c=c.clientDebugData;var m=e==null?void 0:e.version;if(!e||m==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_VERSION,b);throw new(d("WASyncdError").SyncdFatalError)("missing patch version")}if(f&&f.length>0&&g){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS,b);throw new(d("WASyncdError").SyncdFatalError)("patch with both inline and external mutations")}if(!h){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_SNAPSHOT_MAC,b);throw new(d("WASyncdError").SyncdFatalError)("missing patch snapshot mac")}if(!i){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_MAC,b);throw new(d("WASyncdError").SyncdFatalError)("missing patch mac")}e=a.validateKeyIdProtobuf(b,j,d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_KEY_ID);j=void 0;var n=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();c!=null&&n&&(j=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").PatchDebugDataSpec,c));if(g){n=a.validateExternalBlobReference(b,g);return{version:{version:d("WALongInt").numberOrThrowIfTooLarge(m)},mutations:void 0,externalMutations:n,snapshotMac:h,patchMac:i,keyId:e,deviceIndex:l,clientDebugData:j}}c=f.map(function(c){return a.validateMutationProtobuf(b,c)});return{version:{version:d("WALongInt").numberOrThrowIfTooLarge(m)},mutations:c,externalMutations:void 0,exitCode:k,snapshotMac:h,patchMac:i,keyId:e,deviceIndex:l,clientDebugData:j}};a.validateExternalBlobReference=function(a,b){var c=b.mediaKey,e=b.directPath,f=b.handle,g=b.fileSizeBytes,h=b.fileSha256;b=b.fileEncSha256;if(!c){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY,a);throw new(d("WASyncdError").SyncdFatalError)("missing external blob reference media key")}if(e==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH,a);throw new(d("WASyncdError").SyncdFatalError)("missing external blob reference direct path")}if(!h){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256,a);throw new(d("WASyncdError").SyncdFatalError)("missing external blob reference file SHA256")}if(!b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256,a);throw new(d("WASyncdError").SyncdFatalError)("missing external blob reference file enc SHA256")}return{mediaKey:c,directPath:e,handle:f,fileSizeBytes:g,fileSha256:h,fileEncSha256:b}};a.validateMutationProtobuf=function(b,c){var e=c.operation;c=c.record;if(e==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_OPERATION,b);throw new(d("WASyncdError").SyncdFatalError)("missing mutation operation")}if(!c){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_RECORD,b);throw new(d("WASyncdError").SyncdFatalError)("missing mutation record")}b=a.validateRecordProtobuf(b,c);return{operation:e,record:b}};a.validateRecordProtobuf=function(b,c){var e=c.index,f=c.value;c=c.keyId;var g=e==null?void 0:e.blob,h=f==null?void 0:f.blob;if(!e||!g){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_INDEX,b);throw new(d("WASyncdError").SyncdFatalError)("missing mutation index")}if(!f||!h){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_VALUE,b);throw new(d("WASyncdError").SyncdFatalError)("missing mutation value")}e=a.validateKeyIdProtobuf(b,c,d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_KEY_ID);return{index:{blob:g},value:{blob:h},keyId:e}};a.validateKeyIdProtobuf=function(a,b,c){var e=b==null?void 0:b.id;if(!b||!e){d("WASyncdMetricFatalError").reportSyncdFatalError(c,a);throw new(d("WASyncdError").SyncdFatalError)("missing mutation key id")}return{id:d("WASyncdKeyTypes").toSyncKeyId(e)}};return a}();g["default"]=a}),98);
__d("WASyncdMMSDownload",["WABaseGlobals","WASyncdDecode","WASyncdValidateServerSyncProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().downloadSyncBlob(e,"snapshot",a));case 2:f=h.sent;g=d("WASyncdDecode").decodeSyncdSnapshot(a,f);return h.abrupt("return",c("WASyncdValidateServerSyncProtobuf").validateSnapshotProtobuf(a,g));case 5:case"end":return h.stop()}},null,this)}function e(a,e){var f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().downloadSyncBlob(e,"patch",a));case 2:f=h.sent;g=d("WASyncdDecode").decodeSyncdMutations(a,f).mutations;return h.abrupt("return",g.map(function(b){return c("WASyncdValidateServerSyncProtobuf").validateMutationProtobuf(a,b)}));case 5:case"end":return h.stop()}},null,this)}g.downloadSnapshot=a;g.downloadExternalPatch=e}),98);
__d("WASyncdMetricCriticalBootstrapStage",["$InternalEnum","WALogger","WAPREList","WAPREMetrics","WASyncAction.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown SyncdDecryptMutationsType for DecryptMutations"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing decryptedMutationMessageRangeCountArray for DecryptMutations"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing totalAdditionalMessagesCount for DecryptMutations"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing count for DecryptMutations"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing type for DecryptMutations"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown bootstrap stage: "," for critical bootstrap stage"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing bootstrap stage for critical bootstrap stage"]);n=function(){return a};return a}var o=b("$InternalEnum").Mirrored(["ABOUT_TO_APPLY_MUTATIONS","APPLIED_MUTATIONS","MUTATIONS_DECRYPTED","REQUEST_BUILT","RESPONSE_RECEIVED","RESPONSE_PARSED_VALID","ENTERED_RETRY_MODE","MISSING_KEYS_RECEIVED"]),p=b("$InternalEnum").Mirrored(["PATCH_MUTATIONS","SNAPSHOT_MUTATIONS"]);function q(a){d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_BOOTSTRAP_STAGE).endSuccess(r({type:a}))}function a(a,b){q(o.MUTATIONS_DECRYPTED),d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.SYNCD_DECRYPT_MUTATIONS).endSuccess(s({type:a,mutations:b}))}function r(a){return{string:{criticalBootstrapStage:a.type}}}function s(a){var b=a.type;a=a.mutations;var c,e=0,f=[];a.forEach(function(a){a=a.binarySyncData;a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a);a=a.value;if(a==null)return;a.archiveChatAction?c=a.archiveChatAction.messageRange:a.markChatAsReadAction?c=a.markChatAsReadAction.messageRange:a.clearChatAction?c=a.clearChatAction.messageRange:a.deleteChatAction&&(c=a.deleteChatAction.messageRange);c!=null&&(e+=c.messages.length,f.push(c.messages.length))});return{string:{mutationType:b},"int":{count:a.length,totalAdditionalMessagesCount:e},int_array:{messageRangeLengths:f}}}function c(a){a=a==null?void 0:(a=a.string)==null?void 0:a.criticalBootstrapStage;if(a==null){d("WALogger").ERROR(n());return null}var b=o.cast(a);if(b==null){d("WALogger").ERROR(m(),a);return null}return{type:b}}function e(a){var b,c,e;b=a==null?void 0:(b=a.string)==null?void 0:b.mutationType;c=a==null?void 0:(c=a["int"])==null?void 0:c.count;e=a==null?void 0:(e=a["int"])==null?void 0:e.totalAdditionalMessagesCount;a=a==null?void 0:(a=a.int_array)==null?void 0:a.messageRangeLengths;if(b==null){d("WALogger").ERROR(l());return null}if(c==null){d("WALogger").ERROR(k());return null}if(e==null){d("WALogger").ERROR(j());return null}if(a==null){d("WALogger").ERROR(i());return null}b=p.cast(b);if(b==null){d("WALogger").ERROR(h());return null}return{type:b,count:c,totalAdditionalMessagesCount:e,decryptedMutationMessageRangeCountArray:a}}g.SyncdCriticalBootstrapStageType=o;g.SyncdDecryptMutationsType=p;g.reportSyncdCriticalBootstrapStage=q;g.reportSyncdDecryptedMutations=a;g.convertSyncdCriticalBootstrapStageFromAnnotations=c;g.convertSyncdDecryptMutationsMetricsFromAnnotations=e}),98);
__d("WASyncdResolveConflict",["Promise","WAGetPendingMutation","WASyncdConst","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(a.map(function(a){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=c.get(a.index);if(!d){f.next=8;break}e=a.actionHandler;f.t0=a.index;f.next=6;return b("regeneratorRuntime").awrap(e.resolveConflicts(d,a));case 6:f.t1=f.sent;return f.abrupt("return",{remoteMutationIndex:f.t0,conflictResolutionState:f.t1});case 8:case"end":return f.stop()}},null,this)})));case 2:d=f.sent;e=new Map();d.forEach(function(a){a&&e.set(a.remoteMutationIndex,a.conflictResolutionState)});return f.abrupt("return",e);case 6:case"end":return f.stop()}},null,this)}function a(a,c){var e,f,g,h,j,k,l,m,n,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:e=[];f=[];p.next=4;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").getSyncPendingMutationsByCollectionInTransaction(a));case 4:g=p.sent;h=new Map(g.map(function(a){return[a.index,a]}));p.next=8;return b("regeneratorRuntime").awrap(i(c,h));case 8:j=p.sent,c.forEach(function(a){var b=j.get(a.index);if(b)switch(b){case d("WASyncdConst").ConflictResolutionState.SkipRemote:break;case d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal:e.push(a);f=f.concat(g.filter(function(b){return b.index===a.index}));break;case d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal:f=f.concat(g.filter(function(b){return b.index===a.index}));break}else e.push(a)}),k=[],l=0;case 12:if(!(l<e.length)){p.next=21;break}m=e[l].actionHandler;p.next=16;return b("regeneratorRuntime").awrap(m.dropMutationDueToCrossIndexConflict(e[l],h));case 16:n=p.sent,n||k.push(e[l]);case 18:l++;p.next=12;break;case 21:o=f.map(function(a){return a.id}).filter(Boolean);return p.abrupt("return",{remoteMutationsToApply:k,pendingSetMutationsToDrop:o});case 23:case"end":return p.stop()}},null,this)}g.resolveConflict=a}),98);
__d("WASyncdValidateMutations",["WACryptoUtils","WALogger","WALongInt","WAServerSync.pb","WASyncAction.pb","WASyncdConst","WASyncdError","WASyncdMetricFatalError","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: is using same timestamp? ","\n          is same key? ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: all duplicated actions:"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["validation not required for local mutations"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: duplicate "," mutation: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: duplicate "," mutation: [not specified]"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: duplicate "," mutation: ",""]);m=function(){return a};return a}function a(a,b){var c=new Set();b.forEach(function(b){b=b.version.version;if(c.has(b)){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.DUPLICATE_PATCH_VERSION_IN_COLLECTION,a);throw new(d("WASyncdError").SyncdFatalError)("duplicate patch version in collection")}c.add(b)})}function n(a){return a==null?!0:[d("WASyncdConst").Actions.Agent,d("WASyncdConst").Actions.AndroidUnsupportedActions,d("WASyncdConst").Actions.Archive,d("WASyncdConst").Actions.BotWelcomeRequest,d("WASyncdConst").Actions.ChatAssignment,d("WASyncdConst").Actions.ChatAssignmentOpenedStatus,d("WASyncdConst").Actions.ChatLockSettings,d("WASyncdConst").Actions.ClearChat,d("WASyncdConst").Actions.Contact,d("WASyncdConst").Actions.CustomPaymentMethods,d("WASyncdConst").Actions.DeleteChat,d("WASyncdConst").Actions.DeleteMessageForMe,d("WASyncdConst").Actions.DeviceCapabilities,d("WASyncdConst").Actions.DisableLinkPreviews,d("WASyncdConst").Actions.ExternalWebBeta,d("WASyncdConst").Actions.FavoriteSticker,d("WASyncdConst").Actions.LabelEdit,d("WASyncdConst").Actions.LabelJid,d("WASyncdConst").Actions.LabelMessage,d("WASyncdConst").Actions.LabelReordering,d("WASyncdConst").Actions.LocaleSetting,d("WASyncdConst").Actions.LockChat,d("WASyncdConst").Actions.MarkChatAsRead,d("WASyncdConst").Actions.MarketingMessage,d("WASyncdConst").Actions.MarketingMessageBroadcast,d("WASyncdConst").Actions.Mute,d("WASyncdConst").Actions.Nux,d("WASyncdConst").Actions.PaymentInfo,d("WASyncdConst").Actions.Pin,d("WASyncdConst").Actions.PinDEPRECATED,d("WASyncdConst").Actions.PnForLidChat,d("WASyncdConst").Actions.PrimaryFeature,d("WASyncdConst").Actions.PrimaryVersion,d("WASyncdConst").Actions.QuickReply,d("WASyncdConst").Actions.RemoveRecentSticker,d("WASyncdConst").Actions.Sentinel,d("WASyncdConst").Actions.SettingPushName,d("WASyncdConst").Actions.ShareOwnPn,d("WASyncdConst").Actions.Star,d("WASyncdConst").Actions.StatusPrivacy,d("WASyncdConst").Actions.Subscription,d("WASyncdConst").Actions.TimeFormat,d("WASyncdConst").Actions.UnarchiveChatsSetting,d("WASyncdConst").Actions.UserStatusMute].includes(a)}function o(a){var b=d("WASyncdConst").Actions.cast(JSON.parse(a.index)[0]),c=a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET?"SET":"REMOVE";n(b)?d("WALogger").LOG(m(),c,b):d("WALogger").LOG(l(),c);d("WALogger").DEV(k(),c,a.index)}function b(a,b,c){var e=new Set(),f=new Set();b.forEach(function(g){var h=!1;g.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET&&(e.has(g.index)?(o(g),h=!0):e.add(g.index));g.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE&&(f.has(g.index)?(o(g),h=!0):f.add(g.index));if(h)switch(c){case d("WASyncdConst").SyncDataType.Patch:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH,a);throw new(d("WASyncdError").SyncdFatalError)("same index for multiple mutations in patch");case d("WASyncdConst").SyncDataType.Snapshot:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT,a,void 0,void 0,!1);p(b);break;case d("WASyncdConst").SyncDataType.Local:d("WALogger").WARN(j())}})}function p(a){d("WALogger").LOG(i());var b=new Map();a.forEach(function(a){if(b.has(a.index)){o(a);var c=b.get(a.index);if(c==null)return;var e=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData).value,f=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,c.binarySyncData).value;d("WALogger").LOG(h(),(e==null?void 0:e.timestamp)===(f==null?void 0:f.timestamp),d("WACryptoUtils").arrayBuffersEqual(a.keyId,c==null?void 0:c.keyId))}b.set(a.index,a)})}function c(a,b){return b.map(function(b){var c=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,b.binarySyncData);c=c.value;if(!c){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_VALUE,a);throw new(d("WASyncdError").SyncdFatalError)("missing action value")}c=d("WALongInt").maybeNumberOrThrowIfTooLarge(c.timestamp);if(c==null){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_TIMESTAMP,a);throw new(d("WASyncdError").SyncdFatalError)("missing action timestamp")}return{index:b.index,version:b.version,keyId:b.keyId,indexMac:b.indexMac,valueMac:b.valueMac,collection:b.collection,binarySyncData:b.binarySyncData,timestamp:c}})}g.validateNoDuplicatePatchVersionInCollection=a;g.validateNoSameIndexForMultipleMutations=b;g.validateAndTypeSetMutations=c}),98);
__d("WASyncdWamAppState",["WAPREList","WAPREMetrics","WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";var h=k(),i=new(d("WAShiftTimer").ShiftTimer)(c),j=1e3*60*5;function a(){i.isScheduled()&&i.forceRunNow()}function k(){return{mutationCount:0,invalidActionCount:0,unsupportedActionCount:0,keyRotationRemoveCount:0,storedMutationCount:0,uploadConflictCount:0,unsetActionCount:0,missingKeyCount:0}}function l(){h=k()}function m(a){return{"int":babelHelpers["extends"]({},a)}}function b(a){var b;return{mutationCount:(a==null?void 0:(b=a["int"])==null?void 0:b.mutationCount)||0,invalidActionCount:(a==null?void 0:(b=a["int"])==null?void 0:b.invalidActionCount)||0,unsupportedActionCount:(a==null?void 0:(b=a["int"])==null?void 0:b.unsupportedActionCount)||0,keyRotationRemoveCount:(a==null?void 0:(b=a["int"])==null?void 0:b.keyRotationRemoveCount)||0,storedMutationCount:(a==null?void 0:(b=a["int"])==null?void 0:b.storedMutationCount)||0,uploadConflictCount:(a==null?void 0:(b=a["int"])==null?void 0:b.uploadConflictCount)||0,unsetActionCount:(a==null?void 0:(b=a["int"])==null?void 0:b.unsetActionCount)||0,missingKeyCount:(a==null?void 0:(b=a["int"])==null?void 0:b.missingKeyCount)||0}}function c(){var a=m(h);l();d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.APP_STATE_SYNC_DAILY).endSuccess(a)}function n(){i.onOrBefore(j)}function e(a){if(a===0)return;h.mutationCount+=a;n()}function f(a){h.invalidActionCount=a,n()}function o(a){h.unsupportedActionCount=a,n()}function p(a){if(a===0)return;h.keyRotationRemoveCount+=a;n()}function q(a){h.storedMutationCount=a,n()}function r(){h.uploadConflictCount++,n()}function s(a){if(a===0)return;h.unsetActionCount+=a;n()}function t(a){h.missingKeyCount=a,n()}g.forceCommitAppState=a;g.clear=l;g.convertAppStateSyncDailyFromAnnotations=b;g.addMutationCount=e;g.setInvalidActionCount=f;g.setUnsupportedActionCount=o;g.addKeyRotationRemoveCount=p;g.setStoredMutationCount=q;g.incConflict=r;g.addUnsetActionCount=s;g.setMissingKeyCount=t}),98);
__d("WASyncdCollectionHandler",["Promise","WAArrayBufferUtils","WABaseGlobals","WACryptoUtils","WAErr","WAGetCollectionVersion","WAGetMissingKey","WAGetPendingMutation","WAGetSyncAction","WALogger","WALongInt","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAntiTampering","WASyncdCollectionHandlerTypesConverter","WASyncdCollectionUtils","WASyncdConst","WASyncdCrypto","WASyncdCryptoUtils","WASyncdDecryptMutations","WASyncdError","WASyncdGetActionHandler","WASyncdHandleMissingKeys","WASyncdKeyCache","WASyncdMMSDownload","WASyncdMetricCriticalBootstrapStage","WASyncdMetricFatalError","WASyncdMetrics","WASyncdResolveConflict","WASyncdValidateMutations","WASyncdValidateServerSyncProtobuf","WASyncdWamAppState","WATimeUtils","decodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no handler for action ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: invalid action ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no handler for action ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: invalid action ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: after apply remove mutations for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: before apply remove mutations for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed apply set mutations for ","  ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: max timestamp from recent patch: "," days agp"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: after apply mutation batch for ","  ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: actionStates after apply ",": ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["synd: catching error during _applySetMutations: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: before apply mutation batch for ",". mutations count: ","  ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: applying mutations "," ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed final transaction in _applyPatch for "," v",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: processed "," mutations in patch version "," of collection ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed _applyRemoveMutations for "," v",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed computeLtHashAndValidatePatch for "," v",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: ",": empty patch found"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: applying patch "," v"," from device ","\n    SET count: ","\n    REMOVE count: ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no patches for collection ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: UI is unblocked, waited for ","ms"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: patches have "," mutations, wait for UI unblock"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed applying snapshot for ",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection ","'s snapshot v"," applied"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: processed "," mutations in snapshot of collection "," v",""]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection ","'s snapshot decrypted"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection ","'s snapshot validated"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start validate ","'s snapshot"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: ","'s external patch downloaded"]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: download patch for ",""]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: download snapshot for ",""]);M=function(){return a};return a}function N(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: uploaded inconsistent index mac"]);N=function(){return a};return a}function O(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);O=function(){return a};return a}function P(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end _uploadSuccessful for ",""]);P=function(){return a};return a}function Q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _uploadSuccessful: write to db for ",""]);Q=function(){return a};return a}function R(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: _uploadSuccessful: unexpected server version (",") after patch upload, expected ",""]);R=function(){return a};return a}function S(){var a=babelHelpers.taggedTemplateLiteralLoose(["",":\n      lastSuccessfulSyncEndTime = "," ("," days ago))\n      lastSyncAttemptStartTimes = ","\n      lastSyncAttemptStartTimes by days ago: ","\n    "]);S=function(){return a};return a}function T(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing patch info:"]);T=function(){return a};return a}function U(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: could not log max timestamp: ",""]);U=function(){return a};return a}function V(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: retryable error: "," throws ",""]);V=function(){return a};return a}function W(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: "," throws ",""]);W=function(){return a};return a}function X(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: key error: "," missing keys"]);X=function(){return a};return a}function Y(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: applyAppStateSyncResponse: finished applying "," in ","ms"]);Y=function(){return a};return a}function aa(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: sync "," but there are no updates"]);aa=function(){return a};return a}function ba(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," v"," uploaded successfully"]);ba=function(){return a};return a}function ca(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," patches applied successfully"]);ca=function(){return a};return a}function da(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: has missing patches. collection: ",""]);da=function(){return a};return a}function ea(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: has missing patches. collection: ",", localVersion: ",",\n           minPatch: ",""]);ea=function(){return a};return a}function fa(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing keys: [","]"]);fa=function(){return a};return a}function ga(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," snapshot and patches applied successfully"]);ga=function(){return a};return a}function ha(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start applying collection ",""]);ha=function(){return a};return a}function ia(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end applyIndividualMutations"]);ia=function(){return a};return a}function ja(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end update db after apply individual mutations for collection ",""]);ja=function(){return a};return a}function ka(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end apply individual mutations for collection ",""]);ka=function(){return a};return a}function la(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: could not find original individual mutation"]);la=function(){return a};return a}function ma(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: apply individual mutations for collection ",""]);ma=function(){return a};return a}function na(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start applyIndividualMutations"]);na=function(){return a};return a}var oa=0,pa=new ArrayBuffer(128);function a(a){var c,e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(a.length===0)){i.next=2;break}return i.abrupt("return",(h||(h=b("Promise"))).resolve());case 2:c=a.sort(function(a,b){return a.timestamp-b.timestamp});d("WALogger").LOG(na());e=d("WASyncdCollectionHandlerTypesConverter").syncActionsToDecryptedMutation(c);f=e.reduce(function(a,b){var c;c=(c=a.get(b.collection))!=null?c:[];c.push(b);a.set(b.collection,c);return a},new Map());g=Array.from(f.keys()).map(function(c){var e,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:d("WALogger").LOG(ma(),c);e=f.get(c);if(!(e===void 0)){l.next=4;break}return l.abrupt("return");case 4:l.next=6;return b("regeneratorRuntime").awrap(Z(c,e,d("WASyncdConst").SyncDataType.Local,null));case 6:g=l.sent;h=g.setMutationsToPersist;i=g.pendingSetMutationsToDrop;j=h.map(function(a){return{actionState:a.actionState,index:a.index,modelId:a.modelId,modelType:a.modelType,isIndividualMutation:!0}});k=j;d("WABaseGlobals").getConfig().syncShouldPersistOnlyUpdatedIndividualMutation()&&(k=j.filter(function(b){var c=a.find(function(a){return a.index===b.index});if(c==null){d("WALogger").ERROR(la()).sendLogs("syncd: could not find original individual mutation");return!0}return b.actionState!==c.actionState||b.modelId!==c.modelId||b.modelType!==c.modelType}));d("WALogger").LOG(ka(),c);l.next=15;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,PendingMutationStore:!0},function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=a.SyncActionStore,d=a.PendingMutationStore;if(!(k.length>0)){e.next=4;break}e.next=4;return b("regeneratorRuntime").awrap(c.bulkUpdate(k));case 4:if(!(i.length>0)){e.next=7;break}e.next=7;return b("regeneratorRuntime").awrap(d.bulkRemove(i));case 7:case"end":return e.stop()}},null,this)}));case 15:d("WALogger").LOG(ja(),c);case 16:case"end":return l.stop()}},null,this)});i.next=9;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(g));case 9:d("WALogger").LOG(ia());case 10:case"end":return i.stop()}},null,this)}function e(a,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return b("regeneratorRuntime").async(function(B){while(1)switch(B.prev=B.next){case 0:f=a.name,g=a.version,h=a.patches,i=a.snapshot,j=a.syncedPendingMutationsId,k=a.syncedEncryptedMutations;d("WALogger").LOG(ha(),f);B.prev=2;e==null?void 0:e.mark("external_mutations_download_start",{patchCount:(l=a.patches)==null?void 0:l.length,snapshotSizeBytes:(m=a.snapshot)==null?void 0:m.fileSizeBytes});B.next=6;return b("regeneratorRuntime").awrap(ua(f,h,i,c));case 6:n=B.sent;o=n[0];p=n[1];e==null?void 0:e.mark("external_mutations_download_end",{patchesWithMutationsCount:p==null?void 0:p.length,snapshotRecordsCount:o==null?void 0:o.records.length});q=performance.now();if(!(o!=null)){B.next=17;break}B.next=14;return b("regeneratorRuntime").awrap(xa(f,o,p,e));case 14:d("WALogger").LOG(ga(),f);B.next=60;break;case 17:if(!(p!=null)){B.next=43;break}r=Math.min.apply(Math,p.map(function(a){return a.version.version}));s=c!=null&&r>c+1&&p.length>0;if(!s){B.next=38;break}B.next=23;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(f,"has missing patches"));case 23:B.next=25;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").getAllMissingKeysInTransaction());case 25:t=B.sent;d("WALogger").LOG(fa(),t.map(function(a){return a.keyHex+":"+a.timestamp}));d("WALogger").LOG(ea(),f,c,r);B.next=30;return b("regeneratorRuntime").awrap(qa(f,p[0]));case 30:B.next=32;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().printSyncdLog());case 32:B.next=34;return b("regeneratorRuntime").awrap(ra());case 34:d("WALogger").ERROR(da(),f).sendLogs("syncd: has missing patches");if(!d("WABaseGlobals").getConfig().syncdShouldFatalOnMissingPatch()){B.next=38;break}d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.SERVER_DID_NOT_SEND_ALL_PATCHES,f,void 0,(u=c)!=null?u:0);throw new(d("WASyncdError").SyncdFatalError)("syncd: has missing patches");case 38:B.next=40;return b("regeneratorRuntime").awrap(za(f,p,e));case 40:d("WALogger").LOG(ca(),f);B.next=60;break;case 43:if(!(g!=null)){B.next=56;break}v=k.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}).length;w=k.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE}).length;x=Array.from(new Set(k.map(function(a){return a.index}))).length;B.next=49;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(f,"start upload patch. version: "+g+". mutation count: "+k.length+",\n        numSet: "+v+", numRemove: "+w+", numUniqueIndex: "+x));case 49:B.next=51;return b("regeneratorRuntime").awrap(sa(f,g,j,k));case 51:B.next=53;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(f,"end upload patches"));case 53:d("WALogger").LOG(ba(),f,g);B.next=60;break;case 56:if(!d("WASyncdCollectionUtils").isBootstrap(c)){B.next=59;break}B.next=59;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").updateCollectionVersionAndLtHashInTransaction(f,oa,pa));case 59:d("WALogger").LOG(aa(),f);case 60:y=Math.floor(performance.now()-q);d("WALogger").LOG(Y(),f,y);(p||o)&&(d("WASyncdCollectionUtils").isBootstrap(c)&&!d("WASyncdCollectionUtils").isCriticalCollection(f)&&(z=o!=null,d("WASyncdMetrics").reportSyncdBootstrapDataApplied(f,z?d("WASyncdMetrics").SyncdBootstrapDataAppliedSnapshotUsed.SNAPSHOT_USED:d("WASyncdMetrics").SyncdBootstrapDataAppliedSnapshotUsed.SNAPSHOT_NOT_USED,y)));B.next=65;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").logMacsInSnapshot(a.name));case 65:return B.abrupt("return",a);case 68:B.prev=68;B.t0=B["catch"](2);A=B.t0.message;B.next=73;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(f,"error (maybe retryable): "+B.t0));case 73:if(!(B.t0 instanceof d("WASyncdError").SyncdMissingKeyError)){B.next=76;break}d("WALogger").WARN(X(),f);return B.abrupt("return",{name:f,state:d("WASyncdConst").CollectionState.Blocked});case 76:if(!(B.t0 instanceof d("WASyncdError").SyncdFatalError)){B.next=79;break}d("WALogger").ERROR(W(),f,A).sendLogs("syncd: fatal error: "+String(f)+" throws "+A);return B.abrupt("return",{name:f,state:d("WASyncdConst").CollectionState.ErrorFatal});case 79:d("WALogger").WARN(V(),f,A).sendLogs("syncd: retryable error: "+String(f)+" throws "+A);return B.abrupt("return",{name:f,state:d("WASyncdConst").CollectionState.ErrorRetry});case 81:case"end":return B.stop()}},null,this,[[2,68]])}function qa(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.prev=0;k.next=3;return b("regeneratorRuntime").awrap(d("WASyncdDecryptMutations").tryDecryptPatch(a,c));case 3:f=k.sent;g=f.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET});h=d("WASyncdValidateMutations").validateAndTypeSetMutations(a,g);i=h.length>0?h[0].timestamp:null;j=i==null?null:d("WATimeUtils").daysDiff(d("WATimeUtils").unixTimeMs(),i);k.next=10;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"max timestamp in first patch: "+((e=j)!=null?e:"n/a")+" days ago"));case 10:k.next=15;break;case 12:k.prev=12,k.t0=k["catch"](0),d("WALogger").WARN(U(),k.t0);case 15:case"end":return k.stop()}},null,this,[[0,12]])}function ra(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:d("WALogger").LOG(T());c.next=3;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getAllCollectionVersionsInTransaction());case 3:a=c.sent,a.forEach(function(a){var b;b=((b=a.lastSyncAttemptStartTimes)!=null?b:[]).map(function(a){return d("WATimeUtils").daysDiff(d("WATimeUtils").unixTimeMs(),a)});var c=a.lastSuccessfulSyncEndTime;c=c==null?null:d("WATimeUtils").daysDiff(d("WATimeUtils").unixTimeMs(),c);d("WALogger").LOG(S(),a.collection,a.lastSuccessfulSyncEndTime,c,a.lastSyncAttemptStartTimes,b)});case 5:case"end":return c.stop()}},null,this)}function sa(a,c,e,f){var g,i,j,k,l,m,n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:i=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();s.next=3;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").logMacsInSnapshot(a));case 3:j=f.map(function(a){return{indexMac:a.indexMac,valueMac:a.valueMac,operation:a.operation}});if(!i){s.next=11;break}s.next=7;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(f.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE}).map(function(a){return d("WAGetSyncAction").getSyncActionInTransaction(a.index)})));case 7:s.t0=Boolean;k=s.sent.filter(s.t0);s.next=11;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"patch uploaded with mutations mac:\n\n      SET: "+j.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}).map(function(a){return d("WASyncdAntiTampering").indexAndValueMacToString(a.indexMac,a.valueMac)}).join("\n\t")+"\n      REMOVE: "+j.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE}).map(function(a){return d("WASyncdAntiTampering").indexAndValueMacToString(a.indexMac,a.valueMac)}).join("\n\t")+"\n\n      REMOVE fetch by index: "+k.map(function(a){return d("WASyncdAntiTampering").indexAndValueMacToString(a.indexMac,a.valueMac)}).join("\n\t")+"\n      "));case 11:s.next=13;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").computeLtHash(a,j,null,c,d("WASyncdAntiTampering").SyncdPatchDirection.Outgoing));case 13:l=s.sent;m=l.ltHash;n=d("WASyncdCollectionHandlerTypesConverter").encryptedUploadMutationsToSyncActions(f.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}),d("WASyncdConst").SyncActionState.Success);o=new Set(n.map(function(a){return a.index}));p=f.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE&&!o.has(a.index)}).map(function(a){return a.index});s.next=20;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionInTransaction(a).then(function(a){return a==null?void 0:a.version}));case 20:s.t1=g=s.sent;if(!(s.t1!=null)){s.next=25;break}s.t2=g;s.next=26;break;case 25:s.t2=0;case 26:q=s.t2;c!==q+1&&d("WALogger").ERROR(R(),c,q+1).sendLogs("syncd: unexpected server version after patch upload");d("WALogger").LOG(Q(),a);if(!i){s.next=32;break}s.next=32;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").reportCollectionInconsistency(a,"pre-processing outgoing patch "+c+"."));case 32:s.next=34;return b("regeneratorRuntime").awrap(ta(a,n));case 34:s.next=36;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(d){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:f=d.SyncActionStore,g=d.PendingMutationStore,h=d.CollectionVersionStore;i.next=3;return b("regeneratorRuntime").awrap(f.bulkRemove(p));case 3:i.next=5;return b("regeneratorRuntime").awrap(f.bulkSet(n));case 5:i.next=7;return b("regeneratorRuntime").awrap(g.bulkRemove(e));case 7:i.next=9;return b("regeneratorRuntime").awrap(h.update(a,{version:c,ltHash:m,isLastPatchAnIncomingPatch:!1,lastPatchNewLtHashFromPatchDebugData:void 0,isLastPatchSenderAPrimaryDevice:void 0,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:void 0}));case 9:case"end":return i.stop()}},null,this)}));case 36:d("WALogger").LOG(P(),a);if(!i){s.next=43;break}s.next=40;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").reportCollectionInconsistency(a,"post-processing outgoing patch "+c));case 40:r=s.sent;s.next=43;return b("regeneratorRuntime").awrap(Ba(a,r));case 43:case"end":return s.stop()}},null,this)}function ta(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();if(!e){g.next=5;break}f=c.map(function(c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WAArrayBufferUtils").stringToArrayBuffer(c.index);j.next=3;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(c.keyId));case 3:f=j.sent;if(!(f!=null)){j.next=17;break}j.next=7;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(f));case 7:g=j.sent;j.next=10;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateIndexMac(g.indexKey,e));case 10:h=j.sent;if(d("WACryptoUtils").arrayBuffersEqual(h,c.indexMac)){j.next=17;break}i="uploaded inconsistent index mac for "+a+": "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(h).slice(-16)+" "+d("WASyncdCryptoUtils").arrayBufferToHexPadded(c.indexMac).slice(-16);j.next=15;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,i));case 15:d("WALogger").LOG(O(),i),d("WALogger").ERROR(N()).sendLogs("syncd: uploaded inconsistent index mac");case 17:case"end":return j.stop()}},null,this)});g.next=5;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(f));case 5:case"end":return g.stop()}},null,this)}function ua(a,e,f,g){var i,j,k,l,m,n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:i=(h||(h=b("Promise"))).resolve();j=0;k=d("WATimeUtils").unixTimeMs();f!=null&&(m=c("WASyncdValidateServerSyncProtobuf").validateExternalBlobReference(a,f),j+=d("WALongInt").numberOrThrowIfTooLarge((l=m.fileSizeBytes)!=null?l:0),d("WALogger").LOG(M(),a),i=d("WASyncdMMSDownload").downloadSnapshot(a,m));n=(h||(h=b("Promise"))).resolve();e!=null&&e.length>0&&(o=e.map(function(b){return c("WASyncdValidateServerSyncProtobuf").validatePatchProtobuf(a,b)}),n=(h||(h=b("Promise"))).all(o.map(function(c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=c.mutations||[];f=c.externalMutations;if(!f){h.next=9;break}d("WALogger").LOG(L(),a);h.next=6;return b("regeneratorRuntime").awrap(d("WASyncdMMSDownload").downloadExternalPatch(a,f));case 6:e=h.sent,d("WALogger").LOG(K(),a),j+=d("WALongInt").numberOrThrowIfTooLarge((g=f.fileSizeBytes)!=null?g:0);case 9:return h.abrupt("return",{mutations:e,version:c.version,snapshotMac:c.snapshotMac,patchMac:c.patchMac,keyId:c.keyId,exitCode:c.exitCode,deviceIndex:c.deviceIndex,clientDebugData:c.clientDebugData});case 10:case"end":return h.stop()}},null,this)})));s.prev=6;s.next=9;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all([i,n]));case 9:r=s.sent;p=r[0];q=r[1];d("WASyncdCollectionUtils").isBootstrap(g)&&d("WASyncdMetrics").reportSyncdBootstrapAppStateDownloadMetric({collection:a,downloadStartTs:k,downloadSize:j,isSuccess:"success"});s.next=19;break;case 15:s.prev=15;s.t0=s["catch"](6);d("WASyncdCollectionUtils").isBootstrap(g)&&d("WASyncdMetrics").reportSyncdBootstrapAppStateDownloadMetric({collection:a,downloadStartTs:k,downloadSize:j,isSuccess:"failure"});throw s.t0;case 19:return s.abrupt("return",[p,q]);case 20:case"end":return s.stop()}},null,this,[[6,15]])}function va(a){var c=function(c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a==null?void 0:a.mark("anti_tampering_start",{source:d("WASyncdConst").SyncDataType.Snapshot});g.next=3;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").computeLtHashAndValidateSnapshot(c,e));case 3:f=g.sent;a==null?void 0:a.mark("anti_tampering_end",{source:d("WASyncdConst").SyncDataType.Snapshot});return g.abrupt("return",f);case 6:case"end":return g.stop()}},null,this)},e=function(c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a==null?void 0:a.mark("decryption_start",{source:d("WASyncdConst").SyncDataType.Snapshot});g.next=3;return b("regeneratorRuntime").awrap(d("WASyncdDecryptMutations").tryDecryptSnapshot(c,e));case 3:f=g.sent;a==null?void 0:a.mark("decryption_end",{source:d("WASyncdConst").SyncDataType.Snapshot});return g.abrupt("return",f);case 6:case"end":return g.stop()}},null,this)};return{measuredComputeLtHashAndValidateSnapshot:c,measuredTryDecryptSnapshot:e}}function wa(a){var c=function(c,e,f){var g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:a==null?void 0:a.mark("anti_tampering_start",{source:d("WASyncdConst").SyncDataType.Patch});h.next=3;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").computeLtHashAndValidatePatch(c,e,f));case 3:g=h.sent;a==null?void 0:a.mark("anti_tampering_end",{source:d("WASyncdConst").SyncDataType.Patch});return h.abrupt("return",g);case 6:case"end":return h.stop()}},null,this)},e=function(c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a==null?void 0:a.mark("decryption_start",{source:d("WASyncdConst").SyncDataType.Patch});g.next=3;return b("regeneratorRuntime").awrap(d("WASyncdDecryptMutations").tryDecryptPatch(c,e));case 3:f=g.sent;a==null?void 0:a.mark("decryption_end",{source:d("WASyncdConst").SyncDataType.Patch});return g.abrupt("return",f);case 6:case"end":return g.stop()}},null,this)};return{measuredComputeLtHashAndValidatePatch:c,measuredTryDecryptPatch:e}}function xa(a,c,e,f){var g,h,i,j,k,l,m,n,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"start _applySnapshotAndPatches. mutation count: "+c.records.length+", version: "+c.version.version));case 2:p.next=4;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").logMacsInSnapshot(a));case 4:p.prev=4;g=va(f),h=g.measuredComputeLtHashAndValidateSnapshot,i=g.measuredTryDecryptSnapshot;f==null?void 0:f.mark("apply_start",{source:d("WASyncdConst").SyncDataType.Snapshot,snapshotRecordsCount:c.records.length});d("WALogger").LOG(J(),a);p.next=10;return b("regeneratorRuntime").awrap(h(a,c));case 10:j=p.sent;d("WALogger").LOG(I(),a);p.next=14;return b("regeneratorRuntime").awrap(i(a,c));case 14:k=p.sent;d("WALogger").LOG(H(),a);d("WASyncdWamAppState").addMutationCount(c.records.length);d("WASyncdMetricCriticalBootstrapStage").reportSyncdDecryptedMutations(d("WASyncdMetricCriticalBootstrapStage").SyncdDecryptMutationsType.SNAPSHOT_MUTATIONS,k);d("WASyncdValidateMutations").validateNoSameIndexForMultipleMutations(a,k,d("WASyncdConst").SyncDataType.Snapshot);l=c.version.version;p.next=22;return b("regeneratorRuntime").awrap(Z(a,k,d("WASyncdConst").SyncDataType.Snapshot,f));case 22:m=p.sent;n=m.setMutationsToPersist;o=m.pendingSetMutationsToDrop;d("WALogger").LOG(G(),k.length,a,l);d("WALogger").LOG(F(),a,l);f==null?void 0:f.mark("update_DB_start",{source:d("WASyncdConst").SyncDataType.Snapshot,setMutationsToPersistCount:n.length,pendingMutationsToDropCount:o.length});p.next=30;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(c){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d=c.SyncActionStore,e=c.PendingMutationStore,f=c.CollectionVersionStore;g.next=3;return b("regeneratorRuntime").awrap(d.bulkSet(n));case 3:g.next=5;return b("regeneratorRuntime").awrap(e.bulkRemove(o));case 5:g.next=7;return b("regeneratorRuntime").awrap(f.update(a,{version:l,ltHash:j,isLastPatchAnIncomingPatch:!0,lastPatchNewLtHashFromPatchDebugData:void 0,isLastPatchSenderAPrimaryDevice:void 0,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:void 0,didBootstrapFromSnapshot:!0}));case 7:case"end":return g.stop()}},null,this)}));case 30:f==null?void 0:f.mark("update_DB_end",{source:d("WASyncdConst").SyncDataType.Snapshot});d("WALogger").LOG(E(),a);f==null?void 0:f.mark("apply_end",{source:d("WASyncdConst").SyncDataType.Snapshot,decryptedMutationsCount:k.length});p.next=43;break;case 35:p.prev=35;p.t0=p["catch"](4);p.next=39;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"exception "+p.t0.message));case 39:if(!(p.t0 instanceof d("WASyncdError").SyncdMissingKeyError)){p.next=42;break}p.next=42;return b("regeneratorRuntime").awrap(d("WASyncdHandleMissingKeys").handleMissingKeysInSnapshot(a,c));case 42:throw p.t0;case 43:p.next=45;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"done applying snapshot"));case 45:if(!e){p.next=50;break}f==null?void 0:f.mark("apply_start",{source:d("WASyncdConst").SyncDataType.Patch,patchCount:e.length});p.next=49;return b("regeneratorRuntime").awrap(za(a,e,f));case 49:f==null?void 0:f.mark("apply_end",{source:d("WASyncdConst").SyncDataType.Patch,patchCount:e.length});case 50:case"end":return p.stop()}},null,this,[[4,35]])}function ya(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=d("WABaseGlobals").getConfig().syncdMaxMutationsToProcessDuringResume();if(!(a>c)){f.next=7;break}e=Date.now();d("WALogger").LOG(D(),a);f.next=6;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().handleSyncDelayApplyingPatchUntilUIUnblocks());case 6:d("WALogger").LOG(C(),Date.now()-e);case 7:case"end":return f.stop()}},null,this)}function za(a,c,e){var f,g,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:f=c.length===0?"n/a":c[c.length-1].version.version;j.next=3;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"start apply patches. count: "+c.length+", last patch version: "+f));case 3:if(!(c.length===0)){j.next=6;break}d("WALogger").LOG(B(),a);return j.abrupt("return",(h||(h=b("Promise"))).resolve());case 6:d("WASyncdValidateMutations").validateNoDuplicatePatchVersionInCollection(a,c);c.sort(function(a,b){return a.version.version>b.version.version?1:-1});j.prev=8;g=c.reduce(function(a,b){return a+b.mutations.length},0);j.next=12;return b("regeneratorRuntime").awrap(ya(g));case 12:i=0;case 13:if(!(i<c.length)){j.next=25;break}if(!(i<=4||i%10===0)){j.next=17;break}j.next=17;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"start applying patch "+c[i].version.version+" with "+c[i].mutations.length+" mutations"));case 17:j.next=19;return b("regeneratorRuntime").awrap(Aa(a,c[i],e,i<=1));case 19:if(!(i<=4||i%10===0)){j.next=22;break}j.next=22;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"finished applying patch "+c[i].version.version+" with "+c[i].mutations.length+" mutations"));case 22:i++;j.next=13;break;case 25:j.next=27;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"after apply patches (total mutations: "+g+")"));case 27:j.next=37;break;case 29:j.prev=29;j.t0=j["catch"](8);j.next=33;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"exception"+j.t0.message));case 33:if(!(j.t0 instanceof d("WASyncdError").SyncdMissingKeyError)){j.next=36;break}j.next=36;return b("regeneratorRuntime").awrap(d("WASyncdHandleMissingKeys").handleMissingKeysInPatches(a,c));case 36:throw j.t0;case 37:case"end":return j.stop()}},null,this,[[8,29]])}function Aa(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,B,C,D,E,F,G,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:I=function(c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByCollectionsInTransaction([a]));case 2:f.t0=function(a){return d("WACryptoUtils").arrayBuffersEqual(c,a.indexMac)};f.t1=e=f.sent.filter(f.t0).pop();if(!(f.t1==null)){f.next=8;break}f.t2=void 0;f.next=9;break;case 8:f.t2=e.valueMac;case 9:return f.abrupt("return",f.t2);case 10:case"end":return f.stop()}},null,this)};f===void 0&&(f=!1);J.next=4;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").logMacsInSnapshot(a));case 4:g=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();if(!c.exitCode){J.next=18;break}j=c.exitCode.code;J.next=9;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"patch exit code "+((h=j)!=null?h:"")));case 9:J.t0=j;J.next=J.t0===100?12:J.t0===101?14:16;break;case 12:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_MISSING_DATA,a);return J.abrupt("break",17);case 14:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_DESERIALIZATION_ERROR,a);return J.abrupt("break",17);case 16:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_UNKNOWN,a);case 17:throw new(d("WASyncdError").SyncdFatalError)("received terminal patch with exit code:  "+String(j)+" text: "+String((i=c.exitCode)==null?void 0:i.text)+"  ");case 18:J.next=20;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().handleSyncBeforeApplyPatch(c));case 20:k=c.mutations.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}).length;l=c.mutations.length-k;d("WALogger").LOG(A(),a,c.version.version,c.deviceIndex,k,l);k===0&&l===0&&d("WALogger").WARN(z(),a).sendLogs("syncd: "+a+": empty patch found");m=wa(e),n=m.measuredComputeLtHashAndValidatePatch,o=m.measuredTryDecryptPatch;J.next=27;return b("regeneratorRuntime").awrap(n(a,c,I));case 27:p=J.sent;d("WALogger").LOG(y(),a,c.version.version);J.next=31;return b("regeneratorRuntime").awrap(o(a,c));case 31:q=J.sent;d("WASyncdMetricCriticalBootstrapStage").reportSyncdDecryptedMutations(d("WASyncdMetricCriticalBootstrapStage").SyncdDecryptMutationsType.PATCH_MUTATIONS,q);if(!f){J.next=36;break}J.next=36;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"after decrypt patch "+c.version.version));case 36:d("WASyncdWamAppState").addMutationCount(q.length);d("WASyncdValidateMutations").validateNoSameIndexForMultipleMutations(a,q,d("WASyncdConst").SyncDataType.Patch);r=Ea(q);s=r.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE});J.next=42;return b("regeneratorRuntime").awrap(Ca(a,s));case 42:t=J.sent;u=t.pendingRemoveMutationsToDrop;d("WALogger").LOG(x(),a,c.version.version);B=r.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET});J.next=48;return b("regeneratorRuntime").awrap(Z(a,B,d("WASyncdConst").SyncDataType.Patch,e,f));case 48:C=J.sent;D=C.setMutationsToPersist;E=C.pendingSetMutationsToDrop;d("WALogger").LOG(w(),q.length,c.version.version,a);F=u.concat(E);e==null?void 0:e.mark("update_DB_start",{source:d("WASyncdConst").SyncDataType.Patch,setMutationsToPersistCount:D.length,pendingMutationsToDropCount:F.length});G=c.version.version;J.next=57;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(d){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:f=d.SyncActionStore,g=d.PendingMutationStore,h=d.CollectionVersionStore;i.next=3;return b("regeneratorRuntime").awrap(f.bulkRemove(s.map(function(a){return a.index})));case 3:i.next=5;return b("regeneratorRuntime").awrap(f.bulkSet(D));case 5:i.next=7;return b("regeneratorRuntime").awrap(g.bulkRemove(F));case 7:i.next=9;return b("regeneratorRuntime").awrap(h.update(a,{version:G,ltHash:p,lastPatchNewLtHashFromPatchDebugData:(e=c.clientDebugData)==null?void 0:e.newLthash,isLastPatchAnIncomingPatch:!0,isLastPatchSenderAPrimaryDevice:c.deviceIndex===0,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:c.deviceIndex}));case 9:case"end":return i.stop()}},null,this)}));case 57:if(!g){J.next=63;break}J.next=60;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").reportCollectionInconsistency(a,"post-processing incoming patch "+c.version.version+". has remove: "+(l>0).toString()));case 60:H=J.sent;J.next=63;return b("regeneratorRuntime").awrap(Ba(a,H));case 63:e==null?void 0:e.mark("update_DB_end",{source:d("WASyncdConst").SyncDataType.Patch});d("WALogger").LOG(v(),a,c.version.version);if(!f){J.next=68;break}J.next=68;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"after final transaction for patch "+c.version.version));case 68:case"end":return J.stop()}},null,this)}function Ba(a,c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").runInTransaction({CollectionVersionStore:!0},function(d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=d.CollectionVersionStore;f.next=3;return b("regeneratorRuntime").awrap(e.update(a,{didLastPatchFailPostValidation:c}));case 3:case"end":return f.stop()}},null,this)}));case 2:case"end":return e.stop()}},null,this)}function Z(a,e,f,g,h){var i,j,k,l,m,n,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return b("regeneratorRuntime").async(function(Q){while(1)switch(Q.prev=Q.next){case 0:h===void 0&&(h=!1);d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.ABOUT_TO_APPLY_MUTATIONS);j=f===d("WASyncdConst").SyncDataType.Local?" (individual mutations)":"";k=[];l=d("WASyncdValidateMutations").validateAndTypeSetMutations(a,e);m=Fa(a,l),n=m.supportedMutations,v=m.unsupportedMutations;v.forEach(function(a){return k.push(d("WASyncdCollectionHandlerTypesConverter").setMutationToSyncAction(a,d("WASyncdConst").SyncActionState.Unsupported))});g==null?void 0:g.mark("conflict_resolution_start",{source:f,collectionName:a,count:n.length});Q.next=10;return b("regeneratorRuntime").awrap(d("WASyncdResolveConflict").resolveConflict(a,n));case 10:w=Q.sent,x=w.remoteMutationsToApply,y=w.pendingSetMutationsToDrop,z=n.filter(function(a){return!x.includes(a)}),g==null?void 0:g.mark("conflict_resolution_end",{source:f,collectionName:a,apply:x.length,drop:z.length}),z.forEach(function(a){return k.push(d("WASyncdCollectionHandlerTypesConverter").setMutationToSyncAction(a,d("WASyncdConst").SyncActionState.Skipped,a.actionName))}),g==null?void 0:g.mark("apply_set_mutations_start",{source:f,collectionName:a,count:x.length}),A=Ga(x),B=null,C=0;case 20:if(!(C<A.length)){Q.next=52;break}D=h&&C<=1;E=A[C][0].actionHandler;F=A[C].map(function(a){var b;a.binarySyncData?b=c("WANullthrows")(d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData).value):b=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction);(B==null||B<a.timestamp)&&(B=a.timestamp);return{operation:"set",indexParts:a.indexArr,value:b,timestamp:a.timestamp}});if(!D){Q.next=27;break}Q.next=27;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"after deserialize. mutationsToApply length: "+F.length));case 27:G=[];H=!1;Q.prev=29;d("WALogger").DEV(u(),JSON.stringify(F,null,2),j);d("WALogger").LOG(t(),a,F.length,j);Q.next=34;return b("regeneratorRuntime").awrap(E.applyMutations(F,{setMutationsPendingToPersist:k,allSupportedSetMutations:x},D));case 34:G=Q.sent;if(!D){Q.next=38;break}Q.next=38;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"after apply. result length: "+G.length));case 38:Q.next=46;break;case 40:Q.prev=40;Q.t0=Q["catch"](29);if(!(Q.t0 instanceof d("WASyncdError").SyncdFatalError||a===d("WASyncdConst").CollectionName.CriticalBlock)){Q.next=44;break}throw Q.t0;case 44:H=!0,d("WALogger").WARN(s(),Q.t0);case 46:d("WALogger").DEV(r(),j,G.slice(0,100).map(function(a){return a.actionState}));d("WALogger").LOG(q(),a,j);for(I=0;I<A[C].length;I++)L=H?d("WASyncdConst").SyncActionState.Failed:G[I].actionState,k.push(d("WASyncdCollectionHandlerTypesConverter").setMutationToSyncAction(A[C][I],L,A[C][I].actionName,H?void 0:(J=G[I].orphanModel)==null?void 0:J.modelId,H?void 0:(K=G[I].orphanModel)==null?void 0:K.modelType));case 49:C++;Q.next=20;break;case 52:M=B;N=M==null?null:d("WATimeUtils").daysDiff(d("WATimeUtils").unixTimeMs(),M);d("WALogger").LOG(p(),(i=N)!=null?i:"n/a");if(!h){Q.next=58;break}Q.next=58;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(a,"max timestamp from recent patch: "+((O=N)!=null?O:"n/a")+" days ago"));case 58:P=k.reduce(function(a,b){b=b.actionState;a[b]==null&&(a[b]=0);a[b]++;return a},{});g==null?void 0:g.mark("apply_set_mutations_end",babelHelpers["extends"]({source:f,collectionName:a,count:x.length},P));d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.APPLIED_MUTATIONS);d("WALogger").LOG(o(),a,j);return Q.abrupt("return",{setMutationsToPersist:k,pendingSetMutationsToDrop:y});case 63:case"end":return Q.stop()}},null,this,[[29,40]])}function Ca(a,c){var e,f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:e=Da(c),f=e.supportedMutations;g=Ga(f);h=new Set(c.map(function(a){return a.index}));l.next=5;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").getSyncPendingMutationsByCollectionInTransaction(a));case 5:l.t0=function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE&&h.has(a.index)},l.t1=function(a){return a.id},l.t2=Boolean,i=l.sent.filter(l.t0).map(l.t1).filter(l.t2),d("WALogger").LOG(n(),a),j=0;case 11:if(!(j<g.length)){l.next=18;break}k=g[j][0].actionHandler;l.next=15;return b("regeneratorRuntime").awrap(k.applyMutations(g[j].map(function(b){return{operation:"remove",indexParts:$(a,b.index)}}),{setMutationsPendingToPersist:[],allSupportedSetMutations:[]}));case 15:j++;l.next=11;break;case 18:d("WALogger").LOG(m(),a);return l.abrupt("return",{pendingRemoveMutationsToDrop:i});case 20:case"end":return l.stop()}},null,this)}function Da(a){a=a.map(function(a){if(a.version>d("WASyncdGetActionHandler").maxSupportedVersion())return{unsupported:a};var b=$(a.collection,a.index),c=d("WASyncdConst").Actions.cast(b[0]);if(!c){d("WALogger").WARN(l(),b[0]);return{unsupported:a}}var e=d("WASyncdGetActionHandler").getActionHandler(c);if(!e){d("WALogger").WARN(k(),c);return{unsupported:a}}a={collection:a.collection,index:a.index,indexMac:a.indexMac,keyId:a.keyId,binarySyncData:a.binarySyncData,valueMac:a.valueMac,version:a.version,indexArr:b,actionName:c,actionHandler:e};return{supported:a}});var b=[],c=[];a.map(function(a){var d=a.supported;a=a.unsupported;d!=null?b.push(d):a!=null&&c.push(a)});return{supportedMutations:b,unsupportedMutations:c}}function Ea(a){var b=a.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}),c=new Set(b.map(function(a){return a.index}));a=a.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE});a.forEach(function(a){c.has(a.index)||b.push(a)});return b}function Fa(a,b){b=b.map(function(b){if(b.version>d("WASyncdGetActionHandler").maxSupportedVersion())return{unsupported:b};var c=$(a,b.index),e=d("WASyncdConst").Actions.cast(c[0]);if(!e){d("WALogger").WARN(j(),c[0]);return{unsupported:b}}var f=d("WASyncdGetActionHandler").getActionHandler(e);if(!f){d("WALogger").WARN(i(),e);return{unsupported:b}}return{supported:{collection:b.collection,index:b.index,indexMac:b.indexMac,keyId:b.keyId,timestamp:b.timestamp,binarySyncData:b.binarySyncData,valueMac:b.valueMac,version:b.version,indexArr:c,actionName:e,actionHandler:f}}});var c=[],e=[];b.map(function(a){var b=a.supported;a=a.unsupported;b!=null?c.push(b):a!=null&&e.push(a)});return{supportedMutations:c,unsupportedMutations:e}}function Ga(a){return a.reduce(function(a,b){a.length!==0&&b.actionName===a[a.length-1][0].actionName?a[a.length-1].push(b):a.push([b]);return a},[])}function $(a,b){try{b=JSON.parse(b);if(b.length<1)throw c("WAErr")();return b}catch(b){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.INVALID_ACTION_INDEX,a);throw new(d("WASyncdError").SyncdFatalError)("invalid action index")}}g.applyIndividualMutations=a;g.applyAppStateSyncResponse=e}),98);
__d("WASyncdDisabled",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABaseGlobals").getConfig().syncdDisabled()}g.isSyncdDisabled=a}),98);
__d("WASyncdOrphan",["Promise","WABaseGlobals","WAGetSyncAction","WALogger","WASyncdCollectionHandler","WASyncdConst","WASyncdDisabled","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end applyAllOrphansAndUnsupported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start applyAllOrphansAndUnsupported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: finished applying orphans of type "," with ids=",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: applying orphans of type "," with ids=",""]);l=function(){return a};return a}function a(a,c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!d("WASyncdDisabled").isSyncdDisabled()){e.next=2;break}return e.abrupt("return",(h||(h=b("Promise"))).resolve());case 2:e.next=4;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all([m(a),n(c),d("WABaseGlobals").getDbImpls().bulkGetAccountLid(c).then(function(a){return o(a.filter(Boolean))})]));case 4:case"end":return e.stop()}},null,this)}function m(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().getAdditionalLidMsgKeys(a));case 2:c=e.sent;e.next=5;return b("regeneratorRuntime").awrap(p(a.concat(c),d("WASyncdConst").SyncModelType.Msg));case 5:case"end":return e.stop()}},null,this)}function n(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(p(a,d("WASyncdConst").SyncModelType.Chat));case 2:case"end":return c.stop()}},null,this)}function o(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(p(a,d("WASyncdConst").SyncModelType.Account));case 2:case"end":return c.stop()}},null,this)}function p(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d("WALogger").DEV(l(),c,a);if(!d("WASyncdDisabled").isSyncdDisabled()){f.next=3;break}return f.abrupt("return",(h||(h=b("Promise"))).resolve());case 3:f.next=5;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByModelInfosInTransaction(a.map(function(a){return[a,c,d("WASyncdConst").SyncActionState.Orphan]})));case 5:e=f.sent;f.next=8;return b("regeneratorRuntime").awrap(d("WASyncdCollectionHandler").applyIndividualMutations(e));case 8:d("WALogger").DEV(k(),c,a);case 9:case"end":return f.stop()}},null,this)}function c(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(!d("WASyncdDisabled").isSyncdDisabled()){c.next=2;break}return c.abrupt("return",(h||(h=b("Promise"))).resolve());case 2:d("WALogger").LOG(j());c.next=5;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByActionStatesInTransaction([d("WASyncdConst").SyncActionState.Orphan,d("WASyncdConst").SyncActionState.Unsupported]));case 5:a=c.sent;c.next=8;return b("regeneratorRuntime").awrap(d("WASyncdCollectionHandler").applyIndividualMutations(a));case 8:d("WALogger").LOG(i());case 9:case"end":return c.stop()}},null,this)}function e(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(p(a,d("WASyncdConst").SyncModelType.Agent));case 2:case"end":return c.stop()}},null,this)}function f(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(p(a,d("WASyncdConst").SyncModelType.ChatAssignment));case 2:case"end":return c.stop()}},null,this)}function q(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(p(a,d("WASyncdConst").SyncModelType.UserStatusMute));case 2:case"end":return c.stop()}},null,this)}g.checkOrphanMutations=a;g.checkOrphanMessages=m;g.checkOrphanChats=n;g.checkOrphanAccountLids=o;g.applyAllOrphansAndUnsupported=c;g.checkOrphanAgents=e;g.checkOrphanChatAssignments=f;g.checkOrphanUserStatusMutes=q}),98);
__d("WAWebHandleForMessageRangeEnums",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DropMessage","SkipUI"]);c=b("$InternalEnum").Mirrored(["DOES_NOT_CONTAIN","CONTAINS_BY_TIMESTAMP","CONTAINS_BY_ADDITIONAL"]);f.ActiveRangeHandlerAction=a;f.RangeContain=c}),66);
__d("WAWebHandleMsgTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){c=(a=b("$InternalEnum"))({Self:1,Bsp:2,Capi:3});d=a({OnPremise:1,Facebook:2});e=a.Mirrored(["SUCCESS","RETRY","HSM_MISMATCH","BACKFILL","PARSE_ERROR","PARSE_VALIDATION_ERROR","SIGNAL_OLD_COUNTER_ERROR"]);b=a.Mirrored(["E2E","FANOUT","BOT_UNAVAILABLE_FANOUT","HOSTED_UNAVAILABLE_FANOUT"]);a=a({NO_OVERWRITE:0,RETRY:1,FUTURE_PROOF:2,PEER_RETRY:3});var g=Object.freeze({CHAT:"chat",GROUP:"group",PEER_BROADCAST:"peer_broadcast",OTHER_BROADCAST:"other_broadcast",DIRECT_PEER_STATUS:"direct_peer_status",OTHER_STATUS:"other_status"});f.ActualActorsEnumType=c;f.HostStorageEnumType=d;f.E2EProcessResult=e;f.PlaceholderType=b;f.MessageOverwriteOption=a;f.MESSAGE_TYPE=g}),66);
__d("WAWebSendMsgTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({Message:"message",Addon:"addon"});f.SendMessageRecordType=a}),66);
__d("WAWebPersistedJobDefinitions",["WATimeUtils","WAWebBackendErrors","WAWebBizGatingUtils"],(function(a,b,c,d,e,f,g){a={rotateKey:function(){return{type:"rotateKey",args:{},uniqKey:"rotateKey"}},setAbout:function(a){return{type:"setAbout",args:{content:a},uniqKey:"setAbout"}},queryProductList:function(a,b,c,e,f){c===void 0&&(c=null);if(d("WAWebBizGatingUtils").commerceFeaturesDisabledBySanctions())throw new(d("WAWebBackendErrors").E451)();return{type:"queryProductList",args:{catalogWid:a.toString(),productIds:b,width:e,height:f,directConnectionEncryptedInfo:c},uniqKey:"queryProductList:"+b.slice().sort().join(",")+":"+e+":"+f}},getPublicKey:function(a){return{type:"getPublicKey",args:{businessJid:a.toString()},uniqKey:"getPublicKey:"+a.toString()}},getSignedUserInfo:function(a){return{type:"getSignedUserInfo",args:{businessJid:a.toString()},uniqKey:"getSignedUserInfo:"+a.toString()}},verifyPostcode:function(a,b){return{type:"verifyPostcode",args:{businessJid:a.toString(),directConnectionEncryptedInfo:b},uniqKey:"verifyPostcode:"+a.toString()+":"+b}},deleteReactions:function(a,b){return{type:"deleteReactions",args:{chatId:a,parentMsgKeys:b},uniqKey:"deleteReactions:"+a}},deleteReactionsV2:function(a,b){return{type:"deleteReactionsV2",args:{chatId:a,parentMsgKeys:b}}},deleteAddOns:function(a,b){return{type:"deleteAddOns",args:{chatId:a,parentMsgKeys:b}}},sendRequestedKeyShare:function(a,b,c){return{type:"sendRequestedKeyShare",args:{keys:a,orphanKeys:b,peerDeviceId:c.toString()}}},dismissQuickPromotion:function(a){var b=d("WATimeUtils").unixTime();return{type:"dismissQuickPromotion",args:{id:a,ts:b},uniqKey:"dismissQuickPromotion-"+a+"-"+b}},primaryActionClickInQuickPromotion:function(a){var b=d("WATimeUtils").unixTime();return{type:"primaryActionClickInQuickPromotion",args:{id:a,ts:b},uniqKey:"primaryActionClickInQuickPromotion-"+a+"-"+b}},impressionOnQuickPromotion:function(a){var b=d("WATimeUtils").unixTime();return{type:"impressionOnQuickPromotion",args:{id:a,ts:b},uniqKey:"impressionOnQuickPromotion-"+a+"-"+b}},userExposureToQuickPromotion:function(a,b,c){var e=d("WATimeUtils").unixTime();return{type:"userExposureToQuickPromotion",args:{id:a,ts:e,experimentKey:b,exposureHoldout:c},uniqKey:"userExposureToQuickPromotion-"+a+"-"+e}},setTextStatus:function(a,b,c,d){return{type:"setTextStatus",args:{id:a,text:b,emoji:c,ephemeralDurationSeconds:d},uniqKey:"setTextStatus"}},queryAndUpdateGroupsMetadataByJids:function(a){var b=d("WATimeUtils").unixTime();return{type:"queryAndUpdateGroupsMetadataByJids",args:a,uniqKey:"handleGroupsDirtyNotification-"+b}},resendUserMsg:function(a,b,c){var d=a.data.id.toString();return{type:"resendUserMsg",args:{msgId:d,msgType:a.data.type,msgRecordType:a.type,excludeList:b.map(function(a){return a.toString()}),ackTime:c},uniqKey:"resendUserMsg-"+d}},resendGroupMsg:function(a,b,c,d,e,f,g){var h=a.data.id.toString();b=b.groupId;return{type:"resendGroupMsg",args:{msgId:h,msgType:a.data.type,msgRecordType:a.type,groupId:b,isDirect:c,oldList:d.map(function(a){return a.toString()}),phash:e,ackTime:f,serverAddressingMode:g},uniqKey:"resendGroupMsg-"+h}}};g.jobSerializers=a}),98);
__d("WAWebHandleSingleMsg",["Promise","WABackoffUtils","WALogger","WAPromiseDelays","WAPromiseLoop","WASyncdOrphan","WATimeUtils","WAWebApiGroupInviteV4Store","WAWebApiOrphanRevoke","WAWebBackendApi","WAWebBackendErrors","WAWebCheckUpdateOrphanReactions","WAWebDBProcessMessage","WAWebDBStoreRevokeMsgs","WAWebHandleForMessageRange","WAWebHandleForMessageRangeEnums","WAWebHandleMsgTypes.flow","WAWebHandlePlaceholderWam","WAWebMsgType","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Msg: "," chat: "," Error: ",", message: ",", stack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Msg: "," chat: "," Error: ",", message: ",", stack: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Msg: "," chat: "," Error: PreviousMsgNotUpdatableError"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSingleMsg: checkOrphanMutations failed during handleSingleMsg for: "," chat: "," Error: ",", message: ",", stack: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSingleMsg: msgId::",", checkOrphanMutations done"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSingleMsg: msgId::",", write message to db done, overwrite: ",", skipUI: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessages loop: Gave up after "," tries"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessages loop: failed with error ","."]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessages loop"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMessages loop: detect resend message"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["processPlaceholderMsg: skip creating duplicate placeholder"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["placeholder populate successful"]);t=function(){return a};return a}function a(a,b,c,d,e){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,u){g===void 0&&(g=d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE);u===void 0&&(u=!0);var v=g!==d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE,w={add:"after",update:v,isHistory:!1},x=e.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&["sender_revoke","admin_revoke"].includes(e.subtype),y=e;if(!x){g=(yield d("WAWebApiOrphanRevoke").applyOrphanRevokes([y],[]));e=g.newMsgs;if(e.length===0)return;y=e[0]}g=(yield d("WAWebHandleForMessageRange").handleForActiveMessageRange(a,y));if(g.has(d("WAWebHandleForMessageRangeEnums").ActiveRangeHandlerAction.DropMessage))return;e=g.has(d("WAWebHandleForMessageRangeEnums").ActiveRangeHandlerAction.SkipUI);try{c("WAWebWid").isStatus(a)&&(yield d("WAWebBackendApi").frontendSendAndReceive("handleStatusUpdate",{rawMsg:y,checksum:null,isMsgUpdate:!1}));yield d("WAPromiseLoop").promiseLoop(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,e,f){e=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(f,12e4,1e3,.1));try{if(v)y=(yield d("WAWebDBProcessMessage").updateMessage(y)),d("WALogger").LOG(t()).tags("handleSingleMsg");else if(x)yield d("WAWebDBStoreRevokeMsgs").processRevokeMsgs([{revokeMsgKey:y.protocolMessageKey,newMsgKey:y.id,timestamp:y.t,subtype:y.subtype,sender:y.author,revokeTimestamp:y.t}]),d("WAWebBackendApi").frontendFireAndForget("deleteModelsForLastAddOnPreview",{messagesIds:[y.protocolMessageKey.toString()]}),yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a.toString(),[y.protocolMessageKey.toString()]));else try{yield d("WAWebDBProcessMessage").storeMessages([y],a),y.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT&&void d("WAWebHandlePlaceholderWam").addPlaceholderWam([y])}catch(a){if(a instanceof d("WAWebDBProcessMessage").DuplicateMessageError)y.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT?d("WALogger").LOG(s()):(d("WALogger").LOG(r()),y=(yield d("WAWebDBProcessMessage").updateMessage(y)),w.update=!0);else throw a}if(y.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE){var g=y.id.toString();yield d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msg(g,{id:g,from:y.from.toString(),to:y.to.toString(),groupId:y.inviteGrp,expiration:parseInt(y.inviteCodeExp,10),expired:d("WATimeUtils").unixTime()>=parseInt(y.inviteCodeExp,10)})}d("WALogger").LOG(q()).tags("handleSingleMsg");c()}catch(a){d("WALogger").LOG(p(),a).tags("handleSingleMsg");if(f>3){d("WALogger").WARN(o(),f);return(h||(h=b("Promise"))).reject(a)}return e}});return function(a,b,d){return c.apply(this,arguments)}}());d("WALogger").LOG(n(),y.id.id,v,e).tags("messaging");try{yield d("WASyncdOrphan").checkOrphanMutations([y.id.toString()],[a.toString()]),d("WALogger").DEV(m(),y.id.id).tags("messaging"),yield d("WAWebCheckUpdateOrphanReactions").checkUpdateForOrphanReactions([y.id.toString()])}catch(b){d("WALogger").ERROR(l(),String(y.id),String(a),b.name,b.message,b.stack).devConsole(b)}e||(yield d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:a,msgObjs:[babelHelpers["extends"]({},y,{recvFresh:!0,isNewMsg:!0})],meta:w,processMessagesOrigin:f,chatMsgsCollection:null,preserveOrder:u}))}catch(b){if(b instanceof d("WAWebBackendErrors").LogoutDrop)return;if(b instanceof d("WAWebDBProcessMessage").PreviousMsgNotUpdatableError){d("WALogger").WARN(k(),String(y.id),String(a));return}!c("gkx")("26258")?d("WALogger").WARN(j(),String(y.id),String(a),b.name,b.message,b.stack).tags("messaging").devConsole(b).sendLogs("msg_handler: error storing/processing single message"):d("WALogger").WARN(i(),String(y.id),String(a),b.name,b.message,b.stack).tags("messaging").devConsole(b)}});return u.apply(this,arguments)}g.handleSingleMsg=a}),98);
__d("WAWebShouldUpdateLastAddOnPreview",["WAWebBackendApi","WAWebDBUpdateLastAddOnPreviewChat","WAWebLastAddOnDBSerialization","WAWebMsgKey","WAWebReactionsBEUtils","WAWebSchemaChat","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){var b=c("WAWebMsgKey").fromString(a.parentMsgKey);return a.type==="comment"?!0:(d("WAWebUserPrefsMeUser").isSerializedWidMe(a.sender)||b.fromMe)&&!a.isOrphan}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();a=(yield d("WAWebSchemaChat").getChatTable().bulkGet(a));a.forEach(function(a){var c;a!=null&&b.set(a.id.toString(),(c=a.chatlistPreview)!=null?c:a.lastReactionPreview)});return b});return j.apply(this,arguments)}function k(a){a=c("WAWebMsgKey").fromString(a.parentMsgKey);return a.remote.toString()}function l(a,b){return!p(a)?!1:a.sender===b.sender&&a.parentMsgKey===b.parentMsgKey&&a.timestamp>=b.timestamp}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.filter(function(a){return h(a)});var b=new Map();if(!a.length)return b;var e=new Set(a.map(function(a){a=c("WAWebMsgKey").fromString(a.parentMsgKey);return a.remote.toString()})),f=(yield i(Array.from(e)));a.forEach(function(a){var c=k(a),e=f.get(c),g=b.get(c);g=(g=g)!=null?g:e;p(a)?g&&l(a,g)&&a.timestamp>=g.timestamp&&b.set(c,void 0):g?a.timestamp>=g.timestamp&&b.set(c,d("WAWebLastAddOnDBSerialization").lastAddOnPreviewFromCandidate(a)):b.set(c,d("WAWebLastAddOnDBSerialization").lastAddOnPreviewFromCandidate(a))});return b});return n.apply(this,arguments)}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield m(a));a.size>0&&(yield d("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(a),d("WAWebBackendApi").frontendFireAndForget("updateChatLastAddOnPreview",{chatMap:a}))});return o.apply(this,arguments)}function p(a){switch(a.type){case"poll_vote":return a.selectedOptionsCount===0;case"reaction":default:return a.reactionText===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT}}g.isAddOnPreviewUpdateCandidate=h;g.bulkGetChatLastAddOnPreviewMap=i;g.filterChatsWithAddOnPreviewUpdates=m;g.filterAndUpdateChatPreviews=a}),98);
__d("WAWebApiOrphanReceipt",["WAWebModelStorageUtils","WAWebSchemaOrphanReceipt"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaOrphanReceipt").getOrphanReceiptTable().remove(a)}function b(a){return d("WAWebSchemaOrphanReceipt").getOrphanReceiptTable().get(a)}function c(a,b,c){return d("WAWebModelStorageUtils").getStorage().lock(["orphan-receipt"],function(d){var e=d[0];return e.bulkGet(c).then(function(d){var f=c.reduce(function(c,e,f){f=d[f];f==null&&(f={msgKey:e});e=f[a];(e==null||e>b)&&(f[a]=b,c.push(f));return c},[]);return e.bulkCreateOrReplace(f)})})}g.removeOrphanReceipt=a;g.getOrphanReceipt=b;g.createOrUpdateOrphanReceipt=c}),98);
__d("WAWebHandleMsgReceiptCommon",["WALogger","WATimeUtils","WAWebAck","WAWebActiveMessageRanges","WAWebApiActiveMessageRanges","WAWebApiChat","WAWebApiOrphanReceipt","WAWebBackendApi","WAWebChatThreadLogging","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebMarkAddOnsAsReadJob","WAWebMsgKey","WAWebNewsletterDBUtils","WAWebNewsletterGatingUtils","WAWebPromiseQueue","WAWebSchemaMessage","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateChatPeerRead: storing "," orphan acks"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateChatPeerRead: maybeOrphans ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["shouldMarkChatRead: messageExistsOutsideRange=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["shouldMarkChatRead: found an active mark as unread range"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processOrphanPeerReceipt: orphan read ack found for incoming ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["processOrphanPeerReceipt: orphan played ack found for incoming ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["processOrphanPeerReceipt: no orphan ack found for incoming ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMsgAcks: store "," orphan acks"]);o=function(){return a};return a}var p=new(d("WAWebPromiseQueue").PromiseQueue)();function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebApiActiveMessageRanges").getActiveMessageRanges(a));a=a.filter(function(a){return a.action==="markChatAsRead"&&a.actionValue.read===!1&&a.actionValue.messageRange!=null});if(a.length===0)return!0;d("WALogger").DEV(k());var e=a[0];a=b.some(function(a){return!d("WAWebActiveMessageRanges").rangeContainsMessage(e.actionValue.messageRange,{id:c("WAWebMsgKey").fromString(a.id),t:a.t})});d("WALogger").DEV(j(),a);return a});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.map(String),f=null;b=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(e,!1));var g=[];b.forEach(function(a,b){if(!a)g.push(e[b]);else if(a.pendingReadReceipt==null)return;else a.rowId!=null&&(f==null||a.rowId>f)&&(f=a.rowId)});g.length>0&&d("WALogger").LOG(i(),g.length);var j;if(g.length===0)j=new Set();else{var k=(yield d("WAWebMarkAddOnsAsReadJob").markUnclassifiedAddOnsAsReadJob(g.map(function(a){return c("WAWebMsgKey").from(a)}))),l=k.updatedAddOns;k=k.updatedOrphans;j=new Set([].concat(k,c("lodash").flatten(Array.from(l.values()))).map(String))}var m=g.filter(function(a){return!j.has(a)});p.enqueue(function(){d("WALogger").LOG(h(),m.length);return d("WAWebApiOrphanReceipt").createOrUpdateOrphanReceipt(d("WAWebAck").ACK_STRING.READ,0,m)});yield d("WAWebApiChat").markMessageAndChatAsRead(f,String(a),!(yield q(a.toString(),b.filter(Boolean))));if(a.isNewsletter()){d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&(yield d("WAWebBackendApi").frontendSendAndReceive("updateNewsletterUnreadMsgCount",{id:a}));return}yield d("WAWebBackendApi").frontendSendAndReceive("updateChatUnreadMsgCountAndClearMentions",{remote:a})});return t.apply(this,arguments)}function a(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.map(function(a){return d("WAWebDBMessageUtils").craftInternalId(b.toJid(),a)});a=(yield d("WAWebSchemaMessage").getMessageTable().anyOf(["internalId"],a));a=a.map(function(a){return c("WAWebMsgKey").fromString(a.id)});yield d("WAWebNewsletterDBUtils").updateMsgViewReceipt(a);return d("WAWebBackendApi").frontendFireAndForget("updateMsgsViewed",{ids:a})});return u.apply(this,arguments)}function e(a,b,c){p.enqueue(function(){d("WALogger").LOG(o(),a.length);var e=null;b===d("WAWebAck").ACK.PLAYED?e=d("WAWebAck").ACK_STRING.PLAYED:b===d("WAWebAck").ACK.READ&&(e=d("WAWebAck").ACK_STRING.READ);if(e)return d("WAWebApiOrphanReceipt").createOrUpdateOrphanReceipt(e,c,a.map(String))})}function f(a){return p.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebApiOrphanReceipt").getOrphanReceipt(String(a)));if(!b){d("WALogger").LOG(n(),a);return}b[d("WAWebAck").ACK_STRING.PLAYED]!=null&&(d("WALogger").LOG(m(),a),yield d("WAWebBackendApi").frontendSendAndReceive("updateMsgPeerAcks",{msgKeys:[a],ack:d("WAWebAck").ACK.PLAYED,t:b[d("WAWebAck").ACK_STRING.PLAYED]}));b[d("WAWebAck").ACK_STRING.READ]!=null&&(d("WALogger").LOG(l(),a),s(a.remote,[a]));yield d("WAWebApiOrphanReceipt").removeOrphanReceipt(String(a))}))}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(String);a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a,!1));d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging(a.filter(Boolean).map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)}).filter(function(a){return a.isViewOnce}).map(function(a){var b;return{activityType:"viewOnceOpen",ts:(b=a.t)!=null?b:d("WATimeUtils").unixTime(),chatId:a.id.remote}}))});return w.apply(this,arguments)}g.updateChatPeerRead=s;g.updateMsgViewed=a;g.updateOrphanPeerReceipt=e;g.processOrphanPeerReceipt=f;g.handleViewOnceOpenedIfNecessary=v}),98);
__d("WAWebHandleOfflineAbProps",["WAWebABProps","WAWebOfflineHandler","WAWebRuntimeEnvironmentUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_non_blocking_offline_resume_max_message_count")}function b(){return d("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")}function c(){return!d("WAWebRuntimeEnvironmentUtils").isServiceWorker()&&d("WAWebABProps").getABPropConfigValue("web_offline_dynamic_batch_size_enabled")}function e(){var a=JSON.parse(d("WAWebABProps").getABPropConfigValue("web_offline_dynamic_batch_config")),b=parseFloat(a.multiplier);a=a.version||"default";return{multiplier:Number.isNaN(b)?.2:b,version:a}}function f(){return d("WAWebABProps").getABPropConfigValue("web_offline_resume_max_batch_size_enabled")}function h(){var a=parseInt(d("WAWebABProps").getABPropConfigValue("web_offline_resume_max_batch_size"),10);return!Number.isNaN(a)&&a>0?a:d("WAWebOfflineHandler").DEFAULT_MAX_BATCH_SIZE}g.getNonBlockingOfflineResumeMaxMessageCount=a;g.isNonBlockingOfflineResumeExpEnabled=b;g.isOfflineDynamicBatchSizeEnabled=c;g.getOfflineDynamicBatchConfig=e;g.isOfflineResumeMaxBatchSizeEnabled=f;g.getOfflineResumeMaxBatchSize=h}),98);
__d("WAWebOfflineDeviceCache",["WAComms","WADeprecatedSendIq","WALogger","WAShiftTimer","WAWebApiPendingDeviceSync","WAWebPromiseQueue","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][device-cache]: creating snapshot for pending devices ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][device-cache]: creating snapshot: schedule in "," ms"]);i=function(){return a};return a}var j=3e3;a=function(){function a(){var a=this;this.pendingDeviceCache=new Set();this.pendingAcks=[];this.snapshotTimer=new(d("WAShiftTimer").ShiftTimer)(function(){a.createSnapshot()});this.checkpointQueue=new(d("WAWebPromiseQueue").PromiseQueue)()}var c=a.prototype;c.addOfflinePendingDevice=function(a,b){this.pendingDeviceCache.add(a),b&&this.pendingAcks.push(b),this.snapshotTimer.isScheduled()||(d("WALogger").LOG(i(),j),this.snapshotTimer.onOrAfter(j))};c.createSnapshot=function(){this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();var a=Array.from(this.pendingDeviceCache),c=this.pendingAcks;d("WALogger").LOG(h(),a.join(","));this.checkpointQueue.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync(a),c.forEach(function(a){return d("WADeprecatedSendIq").deprecatedCastStanza(a)}),d("WAComms").cancelDeadSocketTimer()}));this.pendingDeviceCache=new Set();this.pendingAcks=[]};return a}();c=new a();g.OfflinePendingDeviceCache=c}),98);
__d("WASmaxOutOfflineBatchRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.offlineBatchCount;a=d("WASmaxJsx").smax("ib",null,d("WASmaxJsx").smax("offline_batch",{count:d("WAWap").INT(a)}));return a}g.makeBatchRequest=a}),98);
__d("WASmaxOfflineBatchRPC",["WAComms","WASmaxOutOfflineBatchRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutOfflineBatchRequest").makeBatchRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendBatchRPC=a}),98);
__d("WAWebEventsWaitForReadyForOffline",["Promise","WAWebCmd","WAWebEventsWaitForBbEvent","err"],(function(a,b,c,d,e,f,g){var h,i;function a(){if(i)return;i=c("WAWebEventsWaitForBbEvent")(d("WAWebCmd").Cmd,"offline_process_ready")}function e(){return!i?(h||(h=b("Promise"))).reject(c("err")("waitForOfflineProcessReady called before init")):i}g.initWaitForOfflineProcessReady=a;g.waitForOfflineProcessReady=e}),98);
__d("WAWebLid1X1ThreadAccountMigrations",["$InternalEnum","WALogger","WATimeUtils","WAWebABProps","WAWebLid1X1MigrationGating","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[LID] Failed to migrate 1x1 chats: ",""]);h=function(){return a};return a}var i=b("$InternalEnum")({WAITING_PROP:1,WAITING_MAPPINGS:2,READY:3,IN_PROGRESS:4,COMPLETE:5});function a(){var a=d("WAWebABProps").getABPropConfigValue("lid_one_on_one_migration_enabled"),b=o().state;if(!a&&b!==i.WAITING_PROP&&b!==i.COMPLETE)return n(i.WAITING_PROP);if(a&&b===i.WAITING_PROP)return n(i.WAITING_MAPPINGS)}function e(a){void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",{state:i.READY,ts:d("WATimeUtils").unixTime(),lidMappingsFromPrimaryMigration:a})}function f(){var a=o().state;return a===i.READY||a===i.IN_PROGRESS}function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{n(i.IN_PROGRESS);var a=o();c("nullthrows")(a==null?void 0:a.lidMappingsFromPrimaryMigration,"got empty mappings while in lid thread migration");c("nullthrows")(a==null?void 0:a.ts,"received empty sync timestamp while in lid thread migration");n(i.COMPLETE);void d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.setIsAccountLidFieldMigrated(!0)}catch(a){d("WALogger").ERROR(h(),a)}});return k.apply(this,arguments)}function l(){var a;return(a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WALidThreadAccountMigrationStatus"))==null?void 0:a.ts}function m(){var a;if(!d("WAWebABProps").getABPropConfigValue("lid_one_on_one_migration_enabled"))return!1;var b=o().state;a=(a=l())!=null?a:d("WATimeUtils").unixTime();return b===i.WAITING_MAPPINGS&&d("WATimeUtils").unixTime()-a>=d("WATimeUtils").DAY_SECONDS*16}function n(a){void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",{state:a,ts:d("WATimeUtils").unixTime()})}function o(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WALidThreadAccountMigrationStatus");if(a==null){var b={state:i.WAITING_PROP,ts:d("WATimeUtils").unixTime()};void d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",b);return b}return a}g.LidThreadMigrationStatus=i;g.checkIfMigrationEnabled=a;g.setLidMigrationMappings=e;g.shouldMigrateNow=f;g.migrate1x1Chats=j;g.getLidThreadMigrationTs=l;g.isLidThreadMigrationExpired=m}),98);
__d("WAWebLogoutReasonConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({UserInitiated:"user_initiated",SyncdFailure:"syncd_failure",InvalidAdvStatus:"invalid_adv_status",CriticalSyncTimeout:"critical_sync_timeout",SyncdTimeout:"syncd_timeout",HistorySyncTimeout:"history_sync_timeout",AccountSyncTimeout:"account_sync_timeout",MDOptOut:"md_opt_out",UnknownCompanion:"unknown_companion",ClientVersionOutdated:"client_version_outdated",SyncdErrorDuringBootstrap:"syncd_error_during_bootstrap",AccountSyncError:"account_sync_error",ClientFatalError:"client_fatal_error",StorageQuotaExceeded:"storage_quota_exceeded",PrimaryIdentityKeyChange:"primary_identity_key_change",MissingEncSalt:"missing_enc_salt",MissingScreenLockSalt:"missing_screen_lock_salt",AccountLocked:"account_locked",LidMigrationSplitThreadMismatch:"lid_migration_split_thread_mismatch",LidMigrationNoLidAvailiable:"lid_migration_no_lid_available",LidMigrationPrimaryMappingsObsolete:"lid_migration_primary_mappings_obsolete",LidMigrationPeerMappingsNotReceived:"lid_migration_peer_mapping_not_received"});c={CLIENT_FATAL:"0",SYNC_FAIL:"1",INITIAL_HISTORY_SYNC_TIMEOUT:"2",ACCOUNT_LOCKED:"3"};f.LogoutReason=a;f.LOGOUT_REASON_CODE=c}),66);
__d("WAWebSocketLogoutJob",["Promise","WALogger","WAWebBackendApi","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Socket logout failed, err: ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebRuntimeEnvironmentUtils").isServiceWorker())try{yield (h||(h=b("Promise"))).all([d("WAWebUserPrefsGeneral").setOfflinePushDisabled(!0),d("WAWebUserPrefsGeneral").setLogoutReason({reason:a})])}catch(a){d("WALogger").ERROR(i(),a).sendLogs("sw-socket-logout-failed");return}d("WAWebBackendApi").frontendFireAndForget("socketLogout",{reason:a})});return j.apply(this,arguments)}g.socketLogout=a}),98);
__d("WAWebOfflineHandler",["invariant","WALogger","WASmaxOfflineBatchRPC","WAWebABProps","WAWebCmd","WAWebEventsWaitForReadyForOffline","WAWebHandleOfflineAbProps","WAWebLid1X1ThreadAccountMigrations","WAWebLogoutReasonConstants","WAWebOfflineResumeUtils","WAWebPageLoadLogging","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSocketLogoutJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive] _maybeRequestMoreStanza: request next batch, pending message ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive] _maybeRequestMoreStanza: start request next batch"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive] _maybeRequestMoreStanza: skip, prevPending: ",", currentPending: ",", complete: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive][debounced] _maybeRequestMoreStanzaDebounced: start request next batch"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive][debounced] _maybeRequestMoreStanzaDebounced: skipDebouncing: ",", prevPending: ",", currentPending: ",", complete: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive][debounced] _maybeRequestMoreStanza: request next batch, pending message ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][lid-migration] waiting for mappings exceeded timeout. Logout user"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][adaptive] _endBatchCheck: done"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] restart client due to exceed the LIMIT, message: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab][non-blocking] resume from current state of app"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] initState called more than once"]);s=function(){return a};return a}var t=200,u=10,v=200,w=100,x=new Map([[0,200],[1,100],[2,50],[3,10]]),y=a();c=function(){function a(){this._offlineManagerInitialized=!1,this._pendingMessageCount=0,this._isPendingPrevBatch=!1,this._isPendingCurrentBatch=!1,this._currentBatchSize=t,this._runningMaxOfflineRetry=0,this._isOfflineDynamicBatchSizeEnabled=!1,this._lastBatchRequestTimestamp=0}var c=a.prototype;c.initState=function(a){this._offlineResumeManager!=null&&d("WALogger").ERROR(s()),this._offlineResumeManager=a.getBlockingStageManager(),d("WAWebPageLoadLogging").addPageLoadQplAnnotation({blocking_resume:!0}),this._createNonblockingStageManager=a.getNonblockingStageManager};c.processOfflinePreviewIb=function(a){d("WAWebPageLoadLogging").addPageLoadQplPoint("offline_preview_received");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"OfflinePreviewReceived");this._resetBatchState();this._isOfflineDynamicBatchSizeEnabled=d("WAWebHandleOfflineAbProps").isOfflineDynamicBatchSizeEnabled();if(this._createNonblockingStageManager!=null){var b=this._createNonblockingStageManager;d("WAWebCmd").Cmd.isMainStreamReadyMd&&this.isResumeFromRestartComplete()?A(a.message)?(d("WALogger").LOG(r()),this._offlineResumeManager=b({mainScreenLoaded:!0})):(d("WALogger").LOG(q(),a.message),d("WAWebOfflineResumeUtils").refreshWindow()):!this._offlineManagerInitialized&&!this.isResumeFromRestartComplete()&&A(a.message)&&(d("WAWebPageLoadLogging").addPageLoadQplAnnotation({blocking_resume:!1}),this._offlineResumeManager=b())}this._offlineManagerInitialized=!0;this._offlineResumeManager.processOfflinePreview(a)};c.processMessageDecryptResult=function(a){this._offlineResumeManager.processDecryptResult(a),this._pendingMessageCount-=1,void this._maybeRequestMoreStanza()};c.addOfflinePendingMessage=function(){this.isResumeFromRestartComplete()||(this._pendingMessageCount+=1)};c.newOfflineStanza=function(a,b,c){var e=this;this._isPendingPrevBatch=!1;this._runningMaxOfflineRetry=Math.max(this._runningMaxOfflineRetry,c);this._endBatchCheck==null&&(this._endBatchCheck=self.setTimeout(function(){e._maybeRequestMoreStanza(),e._endBatchCheck=null,d("WALogger").LOG(p())},0));return this._offlineResumeManager.newOfflineStanza(a,b,c)};c.offlineStanzaReceivedAfterComplete=function(){return this._offlineResumeManager.offlineStanzaReceivedAfterComplete()};c.getOfflineDeliveryProgress=function(){return this._offlineResumeManager.getOfflineDeliveryProgress()};c.getOfflineMessageCount=function(){return Math.max(this._offlineResumeManager.offlineMessagePreviewCounter,0)};c.isResumeOnSocketDisconnectInProgress=function(){return this._offlineResumeManager.isResumeOnSocketDisconnectInProgress()};c.isResumeFromRestartComplete=function(){return this._offlineResumeManager.isResumeFromRestartComplete()};c.isResumeComplete=function(){return this._offlineResumeManager.isResumeComplete()};c.getHasMessagesToDownload=function(){return this._offlineResumeManager.getHasMessagesToDownload()};c.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100};c.processOfflineIb=function(a){d("WAWebPageLoadLogging").addPageLoadQplPoint("offline_received");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"OfflineIbReceived");if(d("WAWebLid1X1ThreadAccountMigrations").isLidThreadMigrationExpired()){d("WALogger").LOG(o());return d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.LidMigrationPeerMappingsNotReceived)}return this._offlineResumeManager.processOfflineSessionComplete(a)};c.shouldUseOfflineResumeScreen=function(){return this._offlineResumeManager.shouldUseOfflineResumeScreen()};c.getResumeUIProgressBarType=function(){return this._offlineResumeManager.getResumeUIProgressBarType()};c.hasInitOfflineResumeManager=function(){return this._offlineResumeManager!=null};c.getResumeType=function(){return this._offlineResumeManager.resumeType};c._resetBatchState=function(){this._isPendingPrevBatch=!1,this._isPendingCurrentBatch=!1,this._lastBatchRequestTimestamp=0};c._sendBatchRequestIBDebounced=function(a,b){var c=this;b===void 0&&(b=!1);b=b===!0||this._lastBatchRequestTimestamp===0;this._batchIBCheckTimer!=null&&self.clearTimeout(this._batchIBCheckTimer);b?(d("WALogger").LOG(n(),this._pendingMessageCount),void d("WASmaxOfflineBatchRPC").sendBatchRPC({offlineBatchCount:a}),this._lastBatchRequestTimestamp=Date.now(),this._runningMaxOfflineRetry=0,this._isPendingPrevBatch=!0,this._isPendingCurrentBatch=!1):this._batchIBCheckTimer=self.setTimeout(function(){void c._maybeRequestMoreStanzaDebounced()},w)};c._maybeRequestMoreStanzaDebounced=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);var b=Date.now()-this._lastBatchRequestTimestamp;a=a||!this.isResumeComplete()&&this._pendingMessageCount<=t&&b>=w&&this._isPendingPrevBatch===!1&&this._isPendingCurrentBatch===!0;if(this.isResumeComplete()||this._isPendingPrevBatch||this._isPendingCurrentBatch){this.isResumeComplete()||d("WALogger").LOG(m(),a,this._isPendingPrevBatch,this._isPendingCurrentBatch,this.isResumeComplete());if(a===!1)return}if(this._pendingMessageCount<=t){d("WALogger").LOG(l());this._isPendingCurrentBatch=!0;yield d("WAWebEventsWaitForReadyForOffline").waitForOfflineProcessReady();t;b=y(this._runningMaxOfflineRetry,this._currentBatchSize);this._currentBatchSize=b;this._sendBatchRequestIBDebounced(b,a)}});function a(b){return a.apply(this,arguments)}return a}();c._maybeRequestMoreStanza=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(this._isOfflineDynamicBatchSizeEnabled)return this._maybeRequestMoreStanzaDebounced(a);if(this.isResumeComplete()||this._isPendingPrevBatch||this._isPendingCurrentBatch){this.isResumeComplete()||d("WALogger").LOG(k(),this._isPendingPrevBatch,this._isPendingCurrentBatch,this.isResumeComplete());return}this._pendingMessageCount<=t&&(d("WALogger").LOG(j()),this._isPendingCurrentBatch=!0,yield d("WAWebEventsWaitForReadyForOffline").waitForOfflineProcessReady(),void d("WASmaxOfflineBatchRPC").sendBatchRPC({offlineBatchCount:t}),this._isPendingCurrentBatch=!1,this._isPendingPrevBatch=!0,d("WALogger").LOG(i(),this._pendingMessageCount))});function a(b){return a.apply(this,arguments)}return a}();return a}();function z(a,b,c,e){var f;e===void 0&&(e=.2);if(a===0){if(d("WAWebHandleOfflineAbProps").isOfflineResumeMaxBatchSizeEnabled()){if(b==null||b>0)return v;var g=d("WAWebHandleOfflineAbProps").getOfflineResumeMaxBatchSize();return Math.min(g,Math.floor(c*.45)+c)}return v}if(a>3)return u;g=null;f=a-((f=b)!=null?f:0);if(f===0){g=Math.floor(c*e)+c;((f=x.get(a-1))!=null?f:v)<=g&&(g=c)}else g=x.get(a);g!=null||h(0,75725,a,(e=b)!=null?e:"N/A",c);return(f=g)!=null?f:v}function a(){var a=null;return function(b,c){var e=d("WAWebHandleOfflineAbProps").getOfflineDynamicBatchConfig(),f=e.version;e=e.multiplier;var g=a;a=b;switch(f){case"progressive":return z(b,g,c,e);default:return v}}}function A(a){if(a<=200&&d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel"))return!0;return a>=d("WAWebHandleOfflineAbProps").getNonBlockingOfflineResumeMaxMessageCount()?!1:!0}e=new c();g.DEFAULT_MAX_BATCH_SIZE=v;g.OfflineMessageHandlerImpl=c;g.OfflineMessageHandler=e}),98);
__d("WAWebDBProcessGroupInviteMsgs",["WATimeUtils","WAWebApiGroupInviteV4Store","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebApiGroupInviteV4Store").persistGroupInviteV4Msgs(a.map(function(a){return{id:a.id.toString(),from:a.from.toString(),to:a.to.toString(),groupId:a.inviteGrp,expiration:parseInt(a.inviteCodeExp,10),expired:d("WATimeUtils").unixTime()>=parseInt(a.inviteCodeExp,10)}}))});return h.apply(this,arguments)}g.processGroupInviteMessages=a}),98);
__d("WAWebMessageAssociationUIUpdateFromStorage",["WAWebBackendApi","WAWebHandleMsgTypes.flow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.forEach(function(a){void d("WAWebBackendApi").frontendFireAndForget("updateMessageUI",{chatId:a.id.remote,msg:a,messageOverwriteOption:d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE,preserveOrder:!0})})}g.updateAssociatedMsgsUIFromStorage=a}),98);
__d("WAWebStoreMsgs",["WALogger","WASyncdOrphan","WAWebAddonGatingUtils","WAWebAddonProcessMsgs","WAWebAddonProcessMsgsUtils","WAWebApiOrphanRevoke","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebCastToReactionMsg","WAWebCheckUpdateOrphanReactions","WAWebCmd","WAWebCommonMsgUtils","WAWebDBAddOnProviders","WAWebDBMessageBulkHelper","WAWebDBMessageSerialization","WAWebDBProcessEditProtocolMsgs","WAWebDBProcessGroupInviteMsgs","WAWebDBProcessPaymentMessages","WAWebDBProcessPollUpdateMsgs","WAWebDBProcessReactionsMsgs","WAWebDBProcessReplyMsgs","WAWebDBStoreMessage","WAWebDBStoreRevokeMsgs","WAWebHandleForMessageRange","WAWebHandlePlaceholderWam","WAWebLinkify","WAWebMessageAssociationGatingUtils","WAWebMessageAssociationUIUpdateFromStorage","WAWebMsgGetters","WAWebMsgType","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebProcessMessageAssociationMessages","WAWebSchemaMessage","WAWebStoreOrphans","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs] [classify-msgs]: skip for "," duplicate messages, with id ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMsgs: receive a protocol message with a type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs]: classifyMsgs got "," existing message(s)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs]: classifyMsgs got "," message(s)"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs] Error: ",", message: ",", stack: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs] Error: ",", message: ",", stack: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs] done: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeMsgs: checkOrphanMutations failed during handleSingleMsg for: "," chat: "," Error: ",", message: ",", stack: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[store-msgs] start: ",""]);p=function(){return a};return a}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaMessage").getMessageTable().bulkRemove(a.map(function(a){return a.id.toString()}))});return r.apply(this,arguments)}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;try{var b=(yield v(a)),e=Object.entries(b).map(function(a){var b=a[0];a=a[1];return Array.isArray(a)&&a.length>0&&b+": "+a.length}).filter(Boolean).join(", ");d("WALogger").LOG(p(),e);var f=[],g=b.newMsgs,h=b.newAssociatedMsgs,i=b.replaceMsgs,j=b.revokeMsgs,k=b.paymentMsgs,r=b.reactionMsgs,s=b.groupInviteMsgs,w=b.chatsWithNewOfflineMsg,x=b.pollUpdateMsgs,y=b.removedPlaceholders,z=b.keepInChatMessages,A=b.editProtocolMsgs,B=b.replyMsgs,C=b.newsletterMsgs,D=b.unifiedAddons,E=b.botInvokeSystemMsgs;b=b.replaceCommentMsgs;h=(yield d("WAWebProcessMessageAssociationMessages").classifyAssociatedMsgs(h));if(Boolean(h==null?void 0:h.orphanAssociatedMsgs.length)){var F;f=f.concat((F=h==null?void 0:h.orphanAssociatedMsgs)!=null?F:[])}F=(yield d("WAWebApiOrphanRevoke").applyOrphanRevokes(g,(F=h==null?void 0:h.validAssociatedMsgs)!=null?F:[]));var G=F.newMsgs;F=F.newAssociatedMsgs;yield d("WAWebDBMessageBulkHelper").persistNewMessagesInBulk(G,F,w);yield d("WAWebDBMessageBulkHelper").persistNewNewsletterMessagesInBulk(C);yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrReplace(i);yield q(b);G=(yield d("WAWebAddonProcessMsgs").processMsgsAndGetOrphans(D));F=G.orphans;Boolean(F.length)&&(f=f.concat(F));f.length!==0&&(yield d("WAWebStoreOrphans").storeOrphans(f));C=(yield d("WAWebApiOrphanRevoke").applyAddonRevokes(D));if(C.length>0)for(i of C)j.push(i);yield u(j);yield d("WAWebDBProcessPaymentMessages").processPaymentMessages(k);yield d("WAWebDBProcessReactionsMsgs").processReactionMsgs(r);yield d("WAWebDBProcessGroupInviteMsgs").processGroupInviteMessages(s);d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()&&(h==null?void 0:h.detachedAssociatedMsgs.length)&&d("WAWebMessageAssociationUIUpdateFromStorage").updateAssociatedMsgsUIFromStorage(h==null?void 0:h.detachedAssociatedMsgs);yield d("WAWebBackendApi").frontendSendAndReceive("processKeepInChatMessages",{keepInChatMessages:z,allowNotification:!1});yield d("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs(A);yield d("WAWebDBProcessReplyMsgs").processReplyMsgs(B);yield d("WAWebDBProcessPollUpdateMsgs").processPollUpdateMsgs(x);yield d("WAWebHandleForMessageRange").handleOfflineForMessageRange(a);if(d("WAWebBotGating").isBotReceiveEnabled()&&E.length>0){var H=new Set();E.forEach(function(a){if(H.has(a.id.remote.toString()))return;H.add(a.id.remote.toString());void d("WAWebBackendApi").frontendFireAndForget("updateBotInvokeSystemMsgCreated",{chatId:a.id.remote})})}b=a.map(function(a){return a.id.toString()});try{yield d("WASyncdOrphan").checkOrphanMutations(b,w),yield d("WAWebCheckUpdateOrphanReactions").checkUpdateForOrphanReactions(b)}catch(c){d("WALogger").ERROR(o(),String(b.join(" ")),String(a[0].id.remote),c.name,c.message,c.stack).devConsole(c)}t(g,y);d("WALogger").LOG(n(),e)}catch(a){c("gkx")("26258")?d("WALogger").ERROR(m(),a.name,a.message,a.stack).sendLogs("storeMsgs-error",{sampling:.01}):d("WALogger").ERROR(l(),a.name,a.message,a.stack).devConsole(a).sendLogs("storeMsgs-error: "+a.message)}});return s.apply(this,arguments)}function t(a,b){a=a.filter(function(a){return d("WAWebCommonMsgUtils").isPlaceholderMsg(a.type)});a.length>0&&void d("WAWebHandlePlaceholderWam").addPlaceholderWam(a);b.length>0&&void d("WAWebHandlePlaceholderWam").populatePlaceholderWam(b)}function u(a){var c=[];a.forEach(function(a){a.protocolMessageKey&&c.push({revokeMsgKey:a.protocolMessageKey,newMsgKey:a.id,timestamp:a.t,subtype:a.subtype,sender:d("WAWebMsgGetters").getSender(a),revokeTimestamp:a.t,disappearingModeInitiator:a.disappearingModeInitiator,ephemeralDuration:a.ephemeralDuration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp,viewMode:a.viewMode})});return d("WAWebDBStoreRevokeMsgs").processRevokeMsgs(c).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c.length>0){var b=[],e=new Set();c.forEach(function(a){b.push(a.revokeMsgKey.toString());a=a.revokeMsgKey.remote.toString();e.add(a)});yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(Array.from(e.values()).join(","),b))}return a});return function(b){return a.apply(this,arguments)}}())}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(k(),a.length);var b=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a.map(function(a){return String(a.id)}),!1));d("WALogger").DEV(j(),b.filter(function(a){return a!=null}).length);var c=[],e=[],f=[],g=[],l=[],m=[],n=[],o=[],p=[],q=[],r=[],s=[],t=new Set(),u=new Map(),v=new Map(),w=[],z=[],A=[];a.forEach(function(a,h){var j=a,k=String(a.id);h=b[h];if(h!=null&&y(a,h)){if(a.type===d("WAWebMsgType").MSG_TYPE.COMMENT){var B=d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(j);d("WAWebAddonGatingUtils").isUnifiedInfraEnabled(a)&&B!=null&&s.push(B);z.push(a)}else{var C;B=d("WAWebDBMessageSerialization").dbRowFromMessage(j);B.t=h.t;B.internalId=h.internalId;B.rowId=h.rowId;B.pendingReadReceipt=h.pendingReadReceipt;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&h.placeholderCreatedWhenAccountIsHosted===!1&&B.senderOrRecipientAccountTypeHosted===!0&&((C=a.id)==null?void 0:(C=C.remote)==null?void 0:C.isUser())&&(B.hostedBizEncStateMismatch=!0,d("WAWebCmd").Cmd.isMainStreamReadyMd&&d("WAWebBackendApi").frontendFireAndForget("updateMsgModelHostedBizEncStateMismatchFlagToTrue",{msgId:a.id}));C=d("WAWebDBStoreMessage").isPendingUnreadReceipt(j.id,j);B=d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:B,chatId:j.id.remote.toString(),hasLink:d("WAWebLinkify").hasHttpLink(j),pendingReadReceipt:C});e.push(B)}d("WAWebCommonMsgUtils").isPlaceholderMsg(h.type)&&v.set(k,j)}else if(h&&!(d("WAWebCommonMsgUtils").isFutureproofMsg(h.type)&&x(a)))c.push(a.id.id);else{C=u.get(k);B=C&&!d("WAWebCommonMsgUtils").isPlaceholderMsg(C.type);if(B)c.push(a.id.id);else{a.type===d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&a.subtype==="bot_invoke_disclaimer"&&w.push(j);if(d("WAWebMsgGetters").getIsNewsletterMsg(a)&&a.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.subtype!=="admin_revoke")r.push(j);else if(d("WAWebAddonGatingUtils").isUnifiedInfraEnabled(a)&&d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(j)!=null){h=d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(j);h!=null&&s.push(h)}else a.type===d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT?n.push(j):d("WAWebCastToReactionMsg").castToReactionMsgData(j)!=null?g.push(d("WAWebCastToReactionMsg").assertReactionMsgData(j)):a.kind===d("WAWebMsgType").MsgKind.PollVoteEncrypted?m.push(a):a.kind===d("WAWebMsgType").MsgKind.ProtocolRevoke?f.push(a):["sender_revoke","admin_revoke"].includes(a.subtype)?(f.push(a),d("WALogger").ERROR(i(),a.type).tags("messaging").sendLogs("storeMsgs-protocol",{sampling:.01})):a.type===d("WAWebMsgType").MSG_TYPE.PAYMENT&&a.subtype==="send"||a.subtype==="payment_action_request_declined"||a.subtype==="payment_transaction_request_cancelled"?(l.push(j),u.set(k,j),t.add(String(a.id.remote))):a.type===d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE?(o.push(j),u.set(k,j),t.add(String(a.id.remote))):a.type===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&a.subtype==="message_edit"?p.push(j):a.quotedMsg||a.quotedStanzaID!=null?(q.push(j),u.set(k,j),t.add(String(a.id.remote))):a.associationType!=null?(A.push(a),t.add(String(a.id.remote))):a.type!==d("WAWebMsgType").MSG_TYPE.PROTOCOL&&(u.set(k,j),t.add(String(a.id.remote)))}}});c.length>0&&d("WALogger").LOG(h(),c.length,c);return{newMsgs:Array.from(u.values()),newAssociatedMsgs:A,chatsWithNewOfflineMsg:Array.from(t),removedPlaceholders:Array.from(v.values()),replaceMsgs:e,revokeMsgs:f,paymentMsgs:l,reactionMsgs:g,pollUpdateMsgs:m,keepInChatMessages:n,groupInviteMsgs:o,editProtocolMsgs:p,replyMsgs:q,newsletterMsgs:r,unifiedAddons:s,botInvokeSystemMsgs:w,replaceCommentMsgs:z}});return w.apply(this,arguments)}function x(a){return d("WAWebAddonGatingUtils").isUnifiedInfraEnabled(a)?!0:Boolean(d("WAWebDBAddOnProviders").getAddOnProviderForMsg(a))}function y(a,b){return d("WAWebCommonMsgUtils").isPlaceholderMsg(b.type)&&!d("WAWebCommonMsgUtils").isPlaceholderMsg(a.type)||d("WAWebCommonMsgUtils").isFutureproofMsg(b.type)&&!d("WAWebCommonMsgUtils").isFutureproofMsg(a.type)&&!x(a)}g.storeMsgs=a;g.classifyMsgs=v}),98);
__d("WAWebStoreOrphans",["WALogger","WAWebAddonProcessMsgsUtils","WAWebDBStoreMessageOrphans","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[orphans-infra]: processed "," orphan(s)"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;yield d("WAWebDBStoreMessageOrphans").storeMessageOrphans(a,function(a){return d("WAWebAddonProcessMsgsUtils").getParentMsgKey(a)});d("WALogger").DEV(h(),a.length)});return i.apply(this,arguments)}g.storeOrphans=a}),98);
__d("WAWebGroupConstants",[],(function(a,b,c,d,e,f){a={ANNOUNCEMENT:"announcement",RESTRICT:"restrict",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",EPHEMERAL:"ephemeral",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",REPORT_TO_ADMIN_MODE:"report_to_admin_mode",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",MEMBER_ADD_MODE:"member_add_mode"};b=60;f.GROUP_SETTING_TYPE=a;f.PAST_PARTICIPANT_EXPIRATION_DAYS=b}),66);
__d("WAWebApiParticipantStore",["WALogger","WATimeUtils","WAWebBackendApi","WAWebGroupConstants","WAWebModelStorageUtils","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWamGroupMetricCache","WAWebWidFactory","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getGroupSenderKeyList: missed "," sender key(s) for primary devices"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getGroupSenderKeyList: include "," because its primary doesn't have sender key"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["pruneExpiredPastParticipants: Pruning expired past participants from participant DB"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["markForgetSenderKey: group participant info missing for group ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["markHasSenderKey: group participant info missing for group ",""]);l=function(){return a};return a}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="GroupUnSyncedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.toString();b=(yield d("WAWebSchemaParticipant").getParticipantTable().get(b));return o(a,b)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=[],f=[];if(!b)return{skDistribList:e,skList:f,rotateKey:!1};var g=b.senderKey,j=b.rotateKey,k=0;g.forEach(function(a,b){var c=d("WAWebWidFactory").createWid(b),h=d("WAWebWidFactory").toUserWid(c);h=(h=g.get(h.toString()))!=null?h:!1;a&&h?f.push(c):(e.push(c),c.isCompanion()&&a&&!h&&(d("WALogger").WARN(i(),b),k++))});c("gkx")("26258")||k>0&&d("WALogger").WARN(h(),k).sendLogs("missing-sender-key-on-primary");yield r(a,g.size);d("WAWebWamGroupMetricCache").cacheGroupMetrics(b);return j?{skDistribList:[].concat(e,f),skList:[],rotateKey:j}:{skDistribList:e,skList:f,rotateKey:j}});return p.apply(this,arguments)}function e(a,c){var e=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(e));if(!b){d("WALogger").LOG(l(),e);return}yield a.createOrReplace(q(b,c,!0))});return function(b){return a.apply(this,arguments)}}())}function f(a,c){var e=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(e));if(!b){d("WALogger").LOG(k(),e);return}yield a.createOrReplace(q(b,c,!1))});return function(b){return a.apply(this,arguments)}}())}function q(a,b,c){var e=new Map(a.senderKey),f=!1;b.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;var b=String(a);e.has(b)?e.set(b,c):a.isLid()||(f=!0)});return{groupId:a.groupId,senderKey:e,participants:a.participants,pastParticipants:a.pastParticipants,admins:a.admins,superAdmins:a.superAdmins,rotateKey:f,deviceSyncComplete:a.deviceSyncComplete}}function r(a,b){return d("WAWebBackendApi").frontendSendAndReceive("updateCachedDeviceCount",{groupWid:a,deviceCount:b})}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return a.id.toString()}),c=(yield d("WAWebSchemaParticipant").getParticipantTable().bulkGet(b));b=a.map(function(a,b){return babelHelpers["extends"]({},a,{pastParticipants:(a=c[b])==null?void 0:(b=a.pastParticipants)==null?void 0:b.map(function(a){var b=a.jid,c=a.leaveTs;a=a.leaveReason;return{id:d("WAWebWidFactory").createWid(b),leaveTs:c,leaveReason:a}})})});return b});return t.apply(this,arguments)}function u(){return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield d("WAWebSchemaParticipant").getParticipantTable().all()),c=[],e=d("WATimeUtils").DAY_SECONDS*d("WAWebGroupConstants").PAST_PARTICIPANT_EXPIRATION_DAYS;b.forEach(function(a){var b=a.pastParticipants.filter(function(a){a=d("WATimeUtils").castToUnixTime(a.leaveTs);a=d("WATimeUtils").happenedWithin(a,e);return a});if(b.length!==a.pastParticipants.length){a=babelHelpers["extends"]({},a,{pastParticipants:b});c.push(a)}});c.length>0&&d("WALogger").DEV(j());return a.bulkCreateOrReplace(c)});return function(b){return a.apply(this,arguments)}}())}var v=new Map();function w(a,b){v.set(a,b)}function x(a){a!=null?v["delete"](a):v.clear()}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=v.get(a);if(b==null){var c=(yield d("WAWebSchemaParticipant").getParticipantTable().get(a));c=!!c&&c.admins.includes((c=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:c.toString());v.set(a,c);return c}return b});return z.apply(this,arguments)}g.GroupUnSyncedError=m;g.getGroupSenderKeyList=a;g.getGroupSenderKeyListFromParticipantRecord=o;g.markHasSenderKey=e;g.markForgetSenderKey=f;g.injectPastParticipantsFromDB=s;g.pruneExpiredPastParticipants=u;g.setAdminshipCache=w;g.clearAdminshipCache=x;g.isCurrentUserGroupAdmin=y}),98);
__d("WAWebChatConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,INCOMPLETE:2,NOT_INCLUDED_IN_HIST_SYNC:3,COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:4});c=60*5*1e3;f.ConversationEndOfHistoryTransferModelPropType=a;f.FTS_TTL=c}),66);
__d("WAWebGroupDatabaseJob",["WAJobOrchestratorTypes","WAWebDBGroupParticipant","WAWebDBGroupsGroupMetadata","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateGroupMetadataTable",function(a){return d("WAWebDBGroupsGroupMetadata").updateGroupMetadataTable(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({groupInfos:a})}function b(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateGroupParticipantTableWithoutDeviceSync",function(a){return d("WAWebDBGroupParticipant").updateGroupParticipantTableWithoutDeviceSync(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({groupInfos:a})}function c(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("markGroupParticipantStale",function(a){return d("WAWebDBGroupParticipant").markGroupParticipantStale(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({group:a})}function e(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("bulkMarkGroupParticipantStale",function(a){return d("WAWebDBGroupParticipant").bulkMarkGroupParticipantStale(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({groupIds:a})}function f(a,b,c){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("modifyGroupParticipant",function(a){return d("WAWebDBGroupParticipant").modifyGroupParticipant(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({group:a,oldId:b,newId:c})}function h(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getGroupMetadata",function(a){return d("WAWebDBGroupsGroupMetadata").getGroupMetadataUNSAFE(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({groupWid:a})}function i(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getGroupParticipant",function(a){return d("WAWebDBGroupParticipant").getGroupParticipant(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({groupWid:a})}g.updateGroupMetadataTableJob=a;g.updateGroupParticipantTableWithoutDeviceSyncJob=b;g.markGroupParticipantStaleJob=c;g.bulkMarkGroupParticipantStaleJob=e;g.modifyGroupParticipantJob=f;g.getGroupMetadataJob=h;g.getGroupParticipantJob=i}),98);
__d("WACryptoSha256",["Promise","WABase64","WACryptoDependencies"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=b("Promise"))).resolve(d("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},a))}function j(a){return(h||(h=b("Promise"))).resolve(i(a).then(d("WABase64").encodeB64))}function a(a){return j(k(a))}function k(a){var b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(var d=0,e=a.length;d<e;d++)c[d]=a.charCodeAt(d);return b}g.sha256=i;g.sha256Base64=j;g.sha256Str=a}),98);
__d("WAWebPhashUtils",["WABase64","WACryptoSha256","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return d("WAWebWidFactory").toUserWid(a).toString({legacy:!0})}).sort().join("");var b=[];for(var c=0;c<a.length;c++)b.push(a.charCodeAt(c));c=new Uint8Array(b);a=(yield self.crypto.subtle.digest({name:"SHA-1"},c));return"1:"+d("WABase64").encodeB64(a.slice(0,6))});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return a.toString({legacy:!0,formatFull:!0})}).sort().join("");var b=[];for(var c=0;c<a.length;c++)b.push(a.charCodeAt(c));c=new Uint8Array(b);a=(yield d("WACryptoSha256").sha256(c));return"2:"+d("WABase64").encodeB64(a.slice(0,6))});return i.apply(this,arguments)}g.phashV1=a;g.phashV2=c}),98);
__d("WAWebUserPrefsModelStorage",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function a(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.INITIAL_GROUP_PHASH,JSON.stringify(a))}function b(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.INITIAL_GROUP_PHASH);try{return JSON.parse(b)[a]}catch(a){return null}}function e(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.INITIAL_GROUP_PHASH);try{return JSON.parse(a)}catch(a){return null}}g.setInitialGroupPhash=a;g.getInitialGroupPhash=b;g.getInitialGroupPhashMap=e}),98);
__d("WAWebQueryAndUpdateGroupMetadataJob",["Promise","WALogger","WATimeUtils","WAWebApiChat","WAWebApiParticipantStore","WAWebBackendApi","WAWebChatConstants","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebGroupDatabaseJob","WAWebGroupQueryJob","WAWebGroupSystemMsg","WAWebHandleSingleMsg","WAWebPhashUtils","WAWebQueryAndUpdateSubgroupSuggestionsJob","WAWebSchemaChat","WAWebUserPrefsModelStorage","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Completed updateGroupEndOfHistorySyncFlag"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["One ore more chat create failed for group not synced in initial sync with error: "," "]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Start updateGroupEndOfHistorySyncFlag"]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a===void 0&&(a=!1);if(c!=null){c=(yield d("WAWebGroupQueryJob").queryGroupsById(c,"per_group_dirty_recovery"));if(c==null||c.length===0)return}else{c=(yield d("WAWebGroupQueryJob").queryAllGroups());if(c.length===0)return}c=(yield d("WAWebApiParticipantStore").injectPastParticipantsFromDB(c));c=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB(c));var e=[],f=[];c.forEach(function(b){d("WAWebBackendApi").frontendFireAndForget("createOrUpdateGroupMetadataFromQuery",{groupInfo:b}),a&&void o(b),e.push(d("WAWebGroupQueryJob").maybeQueryAndUpdateMembershipApprovalRequests(b))});var g=[];c.forEach(function(a){a.participants.forEach(function(a){var b=a.id,c=a.lid,e=a.phoneNumber;a=a.displayName;g.push({id:d("WAWebWidFactory").toUserWid(b),lid:c?d("WAWebWidFactory").toUserWid(c):null,phoneNumber:e?d("WAWebWidFactory").toUserWid(e):null,displayName:a})})});yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappings(g,!0);yield d("WAWebGroupDatabaseJob").updateGroupMetadataTableJob(c);yield d("WAWebGroupDatabaseJob").updateGroupParticipantTableWithoutDeviceSyncJob(c);a&&(yield m(c));c.forEach(function(a){f.push(d("WAWebQueryAndUpdateSubgroupSuggestionsJob").maybeQueryAndUpdateSubgroupSuggestions(a))});yield (h||(h=b("Promise"))).all(e)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(k()).tags("history-sync","groups");var b=d("WAWebUserPrefsModelStorage").getInitialGroupPhashMap(),c=[];for(a of a){var e=(yield d("WAWebApiChat").getChatRecord(a.id));if(e)continue;e=b==null?void 0:b[a.id.toString()];if(e!=null)continue;c.push({unreadCount:0,muteExpiration:0,isAutoMuted:!1,id:a.id,endOfHistoryTransferType:d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC})}yield d("WAWebBackendApi").frontendSendAndReceive("chatCollectionAdd",{things:c,options:{merge:!0}});yield d("WAWebSchemaChat").getChatTable().bulkCreate(c.map(function(a){var b=a.endOfHistoryTransferType;a=a.id;b={endOfHistoryTransferType:b,id:a.toString(),unreadCount:0,muteExpiration:0,isAutoMuted:!1};return b}))["catch"](function(a){d("WALogger").LOG(j(),a.message).tags("history-sync","groups")});d("WALogger").LOG(i()).tags("history-sync","groups")});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsModelStorage").getInitialGroupPhash(a.id.toString());if(b==null)return;var c=(yield d("WAWebPhashUtils").phashV1(a.participants.map(function(a){return a.id}))),e=c.substring(2);b!=null&&b!==c&&b!==e&&d("WAWebHandleSingleMsg").handleSingleMsg(a.id,d("WAWebGroupSystemMsg").genInitialPhashMismatchMsg(a.id,d("WATimeUtils").unixTime()),"pHashMismatchMsg")});return p.apply(this,arguments)}g.queryAndUpdateAllGroupMetadata=a}),98);
__d("WAJobRequirement",["Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["JobRequirement[","] blocker errored ",""]);i=function(){return a};return a}c=function(){function a(a){var c=this;this.$1=(h||(h=b("Promise"))).resolve();this.$2=!0;this.$3=null;this.$4=function(){var a=c.$3;if(a!=null){c.$3=null;return(h||(h=b("Promise"))).all(a).then(c.$4)}c.$2=!0};this.name=a}var c=a.prototype;c.addBlocker=function(a){var c=this;a=a["catch"](function(a){d("WALogger").ERROR(i(),c.name,a).sendLogs("job-blocker-rejected")});if(this.$2)this.$2=!1,this.$1=(h||(h=b("Promise"))).all([this.$1,a]).then(this.$4);else{var e=this.$3;e!=null?e.push(a):this.$3=[a]}};c.waitUntilSatisfied=function(){return this.$1};c.isSatisfied=function(){return this.$2};c.isSatisfiable=function(){return!0};return a}();e=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;a.prototype.addBlocker.call(babelHelpers.assertThisInitialized(c),new(h||(h=b("Promise")))(function(){}));return c}var d=c.prototype;d.addBlocker=function(){};d.isSatisfiable=function(){return!1};return c}(c);function a(a,c){var d=a.filter(function(a){return!a.isSatisfiable()});if(d.length>0){var e=d.map(function(a){return a.name});return function(a){c==null?void 0:c("unsatisfiable",e,a);return d[0].waitUntilSatisfied()}}var f=a.map(function(){return(h||(h=b("Promise"))).resolve()}),g=(h||(h=b("Promise"))).resolve(),i=null,j=function c(){if(f.every(function(b,c){return b===a[c].waitUntilSatisfied()})){i=null;return}var d=[],e=a.map(function(a){var b=a.waitUntilSatisfied();a.isSatisfied()||(d.push(a.name),b.then(function(){var b=d.indexOf(a.name);d.splice(b,1)}));return b});f=e;i=d;return(h||(h=b("Promise"))).all(e).then(c)};return function(a){if(i==null){var b=j();b!=null&&(g=g.then(function(){return b}))}c==null?void 0:c(i==null?"satisfied":"unsatisfied",i,a);return g}}g.JobRequirement=c;g.UnsatisfiableJobRequirement=e;g.joinRequirements=a}),98);
__d("WAPersistedJobManager",["Promise","WAJobRequirement","WALogger","WAPromiseBackoffs","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitUntilCompletedNonPersisted not implemented in PersistedJobManager"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["fireAndForgetNonPersisted not implemented in PersistedJobManager"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," has been loaded and is marked as deprecated"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": requires page"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": running step"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["No entry for job ",""]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": restarting"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"]);K=function(){return a};return a}var L=1,M=function(){function a(a){this.feature=a}var b=a.prototype;b.toString=function(){return"RequiresPage: "+this.feature};return a}(),N=function(){function a(a){this.backoffOptions=a}var b=a.prototype;b.toString=function(){return"RetryOnBackoff"};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));var O=function(a){this.result=a},P="$unstarted",Q="$finished";c=function(){function a(a){var c=this,e=a.isRestartAfterCrash,f=a.accessors,g=a.unfinishedJobEntries,i=new Map();g=g.then(function(a){var g=[],j=[];a.forEach(function(a){a.stepHardStartCountAfterTimeout>=5?g.push(a):j.push(a)});return(h||(h=b("Promise"))).all(g.map(function(a){d("WALogger").ERROR(K(),S(a),a.step).devConsole(R(a)).sendLogs("job-stuck-"+a.type);return f.deletePersistedJob(a.jobId)})).then(function(){j.forEach(function(a){if(i.has(a.jobId))return;d("WALogger").LOG(J(),R(a));i.set(a.jobId,c.$1(a,e))})})});this.implementationLoaders=new Map();this.implementations=new Map();this.stepBlockers=new WeakMap();this.accessors=f;this.activeJobs=i;this.initialJobsPromise=g;this.listeners=a.listeners;this.deprecatedJobs=a.deprecatedJobs}var c=a.prototype;c.loadAndRunJobFromId=function(a){var b=this.activeJobs.get(a);if(b!=null)return b;b=this.$2(a);this.activeJobs.set(a,b);return b};c.$2=function(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=this.initialJobsPromise,e=this.accessors;g.next=3;return b("regeneratorRuntime").awrap(c);case 3:g.next=5;return b("regeneratorRuntime").awrap(e.readPersistedJob(a));case 5:f=g.sent;if(f){g.next=10;break}d("WALogger").DEV(I(),a);d("WALogger").WARN(H());return g.abrupt("return",null);case 10:return g.abrupt("return",this.$1(f,!1));case 11:case"end":return g.stop()}},null,this)};c.$3=function(a){var b=this.implementations,c=this.implementationLoaders,d=b.get(a);if(d)return d;d=c.get(a);if(!d)return null;c=d();b.set(a,c);return c};c.$4=function(a,c){if(c==null||c.length===0)return(h||(h=b("Promise"))).resolve();var e=this.stepBlockers,f=e.get(c);f==null&&(f=d("WAJobRequirement").joinRequirements(c.map(function(a){return a()}),U),e.set(c,f));return f(a)};c.$5=function(a,b,c,e){var f=this;c===void 0&&(c=!1);var g=a.step,h=b.findIndex(function(a){return a.stepName===g}),i=b[h].info(a.current,a.original,V(a,c)),j=i.requirements,k=i.code;i=this.$4(a,j);e&&(i=i.then(e));return i.then(function(){d("WALogger").LOG(G(),T(a));return k(a.current,a.original,V(a,c))}).then(function(e){if(e instanceof O){d("WALogger").LOG(F(),T(a));return e.result}var g=h+1;if(g>=b.length)return e;g=b[g];a.step=g.stepName;a.current=e;a.stepHardStartCountAfterTimeout=0;a.stepFirstStartTime=d("WATimeUtils").unixTime();a.stepUnexpectedErrorCount=0;a.waitUntil=null;a.backedOffCount=0;return f.accessors.updatePersistedJob(a).then(function(){return f.$5(a,b,c)})})};c.$1=function(a,c){var e,f=this,g,i,j,k,l,m,n,F,G,H,I,J,K,O,S,U;return b("regeneratorRuntime").async(function(W){while(1)switch(W.prev=W.next){case 0:g=this.accessors,i=this.activeJobs,j=this.deprecatedJobs,k=this.listeners,l=k.onJobFinished,m=k.onJobStarted;W.next=3;return b("regeneratorRuntime").awrap(this.$3(a.type));case 3:n=W.sent;F=j[a.type];if(n){W.next=21;break}if(F){W.next=13;break}d("WALogger").ERROR(E(),a.type).sendLogs("missing-job-implementation");W.next=10;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 10:return W.abrupt("return",null);case 13:if(!(F==="NOOP")){W.next=18;break}d("WALogger").WARN(D(),a.type);W.next=17;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 17:return W.abrupt("return",null);case 18:W.next=20;return b("regeneratorRuntime").awrap(F());case 20:n=W.sent;case 21:G=n;F&&d("WALogger").LOG(C(),a.type);H=(e=a.stepFirstStartTime)!=null?e:d("WATimeUtils").unixTime();a.stepFirstStartTime=H;a.stepUnexpectedErrorCount=a.stepUnexpectedErrorCount||0;a.backedOffCount=a.backedOffCount||0;if(!(a.step===Q)){W.next=44;break}I=a.waitUntil;J=d("WATimeUtils").secondsUntil(H);if(!(I!=null&&d("WATimeUtils").isInFuture(I)&&J>0)){W.next=38;break}d("WALogger").LOG(B(),R(a));I=d("WATimeUtils").castToUnixTime(I-J);if(!d("WATimeUtils").isInFuture(I)){W.next=38;break}a.stepFirstStartTime=d("WATimeUtils").castToUnixTime(H-J);a.waitUntil=I;W.next=38;return b("regeneratorRuntime").awrap(this.accessors.updatePersistedJob(a));case 38:if(!(I==null||!d("WATimeUtils").isInFuture(I))){W.next=42;break}d("WALogger").LOG(A(),R(a));W.next=42;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 42:i["delete"](a.jobId);return W.abrupt("return",a.current);case 44:K=a.step!==P?n.find(function(b){return b.stepName===a.step}):n[0];if(K){W.next=50;break}d("WALogger").ERROR(z(),a.type,a.step).sendLogs("missing-job-step");W.next=49;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 49:return W.abrupt("return",null);case 50:a.step=K.stepName;O=function e(){var g=a.waitUntil,i=(h||(h=b("Promise"))).resolve();if(g!=null){var j=d("WATimeUtils").futureUnixTime(d("WATimeUtils").DAY_SECONDS);g>j?(d("WALogger").LOG(y(),T(a),g,j),a.waitUntil=j,i=f.accessors.updatePersistedJob(a).then(function(){return d("WATimeUtils").delayUntil(j)})):(d("WALogger").LOG(x(),T(a),g),i=d("WATimeUtils").delayUntil(g))}return i.then(function(){var g=function(){a.waitUntil=null;d("WATimeUtils").happenedWithin(H,d("WATimeUtils").DAY_SECONDS)||a.stepHardStartCountAfterTimeout++;return f.accessors.updatePersistedJob(a)};return f.$5(a,G,c,g)["catch"](function(c){if(c instanceof M){d("WALogger").LOG(w(),T(a));a.stepHardStartCountAfterTimeout>0&&(--a.stepHardStartCountAfterTimeout,f.accessors.updatePersistedJob(a));return new(h||(h=b("Promise")))(function(){})}else if(c instanceof N){d("WALogger").LOG(v(),T(a));var g=d("WAPromiseBackoffs").getDelay(++a.backedOffCount,c.backoffOptions);a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(g/1e3));a.stepHardStartCountAfterTimeout>0&&--a.stepHardStartCountAfterTimeout;return f.accessors.updatePersistedJob(a).then(e)}else if(a.stepUnexpectedErrorCount<L){d("WALogger").WARN(u(),T(a),a.stepUnexpectedErrorCount);d("WALogger").WARN(t(),T(a),c);a.stepUnexpectedErrorCount++;return f.accessors.updatePersistedJob(a).then(e)}throw c})})};S=O();U=S.then(function(c){var e;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d("WALogger").LOG(s(),T(a));e=null;try{e=l(a.jobId,a.type,a.original,c)}catch(b){d("WALogger").ERROR(r(),a.type,b).sendLogs("onJobFinished-threw")}if(!(e!=null&&e>0)){h.next=12;break}a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(e/1e3));a.step=Q;a.current=c;a.stepFirstStartTime=d("WATimeUtils").unixTime();h.next=10;return b("regeneratorRuntime").awrap(f.accessors.updatePersistedJob(a));case 10:h.next=15;break;case 12:h.next=14;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 14:i["delete"](a.jobId);case 15:case"end":return h.stop()}},null,this)},function(e){var f,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:d("WALogger").ERROR(q(),a.type,e).sendLogs("job-threw-exception-"+a.type);f=G.find(function(b){return b.stepName===a.step});if(f){j.next=6;break}d("WALogger").ERROR(p(),a.type,a.step);j.next=10;break;case 6:h=f.info(a.current,a.original,V(a,c));if(!(h.stopRetryIf!=null)){j.next=10;break}j.next=10;return b("regeneratorRuntime").awrap(h.stopRetryIf.onStopRetry(a.current,a.original,V(a,c)));case 10:j.next=12;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 12:i["delete"](a.jobId);case 13:case"end":return j.stop()}},null,this)});try{m(a.jobId,a.type,a.original)}catch(b){d("WALogger").ERROR(o(),a.type,b).sendLogs("onJobStarted-threw")}return W.abrupt("return",U.then(function(){return S}));case 56:case"end":return W.stop()}},null,this)};c.addPersistedJobImplementation=function(a,b){var c=this.implementationLoaders,e=this.deprecatedJobs;if(c.has(a)){d("WALogger").ERROR(n(),a).sendLogs("repeat-job-loader");return}e&&e[a]&&d("WALogger").DEV(m(),a);c.set(a,b)};c.fireAndForget=function(a){var b=this;this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.waitUntilPersisted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;b.loadAndRunJobFromId(a)})};c.waitUntilCompleted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.fireAndForgetNonPersisted=function(a){d("WALogger").LOG(l())};c.waitUntilCompletedNonPersisted=function(a){return(h||(h=b("Promise"))).resolve(function(){return d("WALogger").LOG(k())})};return a}();function R(a){return"Job["+a.jobId+"] ("+a.type+")"}function S(a){return"[Job "+a.type+"] "}function T(a){return"Job["+a.jobId+"] ("+a.type+"."+a.step+")"}function U(a,b,c){a==="unsatisfiable"?d("WALogger").LOG(j(),T(c),b):a==="unsatisfied"?d("WALogger").LOG(i(),T(c),b):a}function V(a,b){b===void 0&&(b=!1);return{jobStartTime:a.startTime,afterCrash:b,interruptJob:W}}function W(a){return new O(a)}g.RequiresPage=M;g.RetryOnBackoff=N;g.NonRetryableError=a;g.InterruptJob=O;g.UNSTARTED_JOB=P;g.FINISHED_JOB=Q;g.PersistedJobManager=c}),98);
__d("WAJobBuilder",["Promise","WAPersistedJobManager","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){function a(a){this.steps=a}var b=a.prototype;b.step=function(a,b){return this.$1(a,typeof b==="function"?{code:b}:b)};b.$1=function(b,c){var e=c.stopRetryIf,f=c.requirements;c=c.code;f=k(f,c,e);if(e){var g=e.timePassedSeconds;c=e.appCrashed;var h=e.onStopRetry;h=k(null,l(h),e);g!=null&&(f=j(function(a,b,c){a=c.jobStartTime;return d("WATimeUtils").happenedWithin(a,g)},f,h));c&&(f=j(function(a,b,c){a=c.afterCrash;return!a},f,h))}return new a([].concat(this.steps,[{stepName:b,info:f}]))};b.finalStep=function(a,b){var c=this.step(a,b);return{end:function(){return c.steps}}};return a}();function a(){return new i([])}function j(a,b,c){return function(d,e,f){return a(d,e,f)?b(d,e,f):c(d,e,f)}}function k(a,b,c){var d={requirements:a,code:b,stopRetryIf:c};return function(){return d}}function l(a){return function(c,e,f){return(h||(h=b("Promise"))).resolve(a(c,e,f)).then(function(a){return a instanceof d("WAPersistedJobManager").InterruptJob?a:new(d("WAPersistedJobManager").InterruptJob)(a)})}}g.JobBuilder=i;g.definePersistedJob=a}),98);
__d("WAWebDefinePersistedJob",["WAJobBuilder"],(function(a,b,c,d,e,f,g){function a(){return d("WAJobBuilder").definePersistedJob()}g.defineWebPersistedJob=a}),98);
__d("WAWebQueryAndUpdateGroupsMetadataByJidsJob",["WALogger","WAWebDefinePersistedJob","WAWebQueryAndUpdateGroupMetadataJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryAndUpdateGroupsMetadataByJidsJob: started persisted job"]);h=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("queryAndUpdateGroupsMetadataByJids",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(h()),yield d("WAWebQueryAndUpdateGroupMetadataJob").queryAndUpdateAllGroupMetadata(!1,a)});return function(b){return a.apply(this,arguments)}}()).end();g.queryAndUpdateGroupsMetadataByJidsJob=a}),98);
__d("WAWebApiSubgroupSuggestionStore",["Promise","WABatcher","WALogger","WAWebSchemaSubgroupSuggestionV2","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeSubgroupSuggestionsBatched: aggregating "," changes"]);i=function(){return a};return a}c=3e3;e=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().equals(["parentGroupId"],a.toString()).then(function(a){return a.map(function(a){var b=a.id,c=a.parentGroupId,e=a.subject,f=a.desc,g=a.owner,h=a.t,i=a.isExistingGroup,j=a.participantCount;a=a.hiddenSubgroup;return{id:d("WAWebWidFactory").createWid(b),parentGroupId:d("WAWebWidFactory").createWid(c),subject:e,desc:f,owner:d("WAWebWidFactory").createWid(g),t:h,isExistingGroup:i,participantCount:j,hiddenSubgroup:a}})})};var j=function(a,b){b=b.map(function(b){var c=b.id,d=b.subject,e=b.desc,f=b.owner,g=b.t,h=b.isExistingGroup,i=b.participantCount;b=b.hiddenSubgroup;return{id:c.toString(),parentGroupId:a.toString(),subject:d,desc:e,owner:f.toString(),t:g,isExistingGroup:h,participantCount:i,hiddenSubgroup:b}});return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkCreateOrReplace(b)};f=function(a,c,e,f){var g=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield (h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().get([a.toString(),b.toString(),e.toString()]));return b});return function(a){return c.apply(this,arguments)}}())));g=g.filter(Boolean);var i=g.map(function(a){return babelHelpers["extends"]({},a,{owner:f,parentGroupId:d("WAWebWidFactory").createWid(a.parentGroupId),id:d("WAWebWidFactory").createWid(a.id)})});yield k(g.map(function(b){b=b.id;return{parentGroupId:a,id:d("WAWebWidFactory").createWid(b),owner:e}}));yield j(a,i)});return function(){return g.apply(this,arguments)}}();return g()};var k=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkRemove(a.map(function(a){var b=a.parentGroupId,c=a.id;a=a.owner;return[b.toString(),c.toString(),a.toString()]}))},l=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkRemoveByIndex(["parentGroupId"],[a.toString()])},m=d("WABatcher").batch({delayMs:c},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i(),a.length).devConsole(a);a=a.reduce(function(a,b){a.push.apply(a,b.suggestionsRowKeys);return a},[]);yield k(a);return[]});return function(b){return a.apply(this,arguments)}}());function a(a){var b=a.subgroupSuggestions;a=a.isOffline;return a===!0?m({suggestionsRowKeys:b}):k(b)}g.getSubgroupSuggestions=e;g.addSubgroupSuggestions=j;g.updateOwnerInSubgroupSuggestions=f;g.removeSubgroupSuggestions=k;g.removeAllSubgroupSuggestions=l;g.removeSubgroupSuggestionsWithOfflineOption=a}),98);
__d("WAWebCommunityGatingUtils",["WAWebABProps","WAWebGroupType","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("parent_group_create_enabled_for_smb_on_web"):!0}function b(){return d("WAWebABProps").getABPropConfigValue("parent_group_link_limit")+1}function c(){return d("WAWebABProps").getABPropConfigValue("parent_group_link_limit_community_creation")+1}function e(){return d("WAWebABProps").getABPropConfigValue("community_admin_promotion_one_time_prompt")}function f(){return d("WAWebABProps").getABPropConfigValue("parent_group_create_privacy")}function h(){return d("WAWebABProps").getABPropConfigValue("parent_group_subgroup_filter")}function i(){return d("WAWebABProps").getABPropConfigValue("community_reporting_ui_upsell_exit")}function j(){return d("WAWebABProps").getABPropConfigValue("group_mentions_in_subgroups")}function k(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_added_groups_m1")}function l(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_added_groups_m2")}function m(a){return a==null?!1:(a.groupType===d("WAWebGroupType").GroupType.LINKED_SUBGROUP||a.groupType===d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP)&&a.getParentGroupChat()!=null}function n(){return d("WAWebABProps").getABPropConfigValue("community_shorter_group_creation_enabled")}function o(){return d("WAWebABProps").getABPropConfigValue("community_general_chat_UI_enabled")}function p(){return d("WAWebABProps").getABPropConfigValue("community_general_chat_create_enabled")}function q(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_suggest_existing_m3_receiver")}function r(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_suggest_existing_m3_sender")}function s(){return d("WAWebABProps").getABPropConfigValue("web_communities_general_chat_v_2")}function t(){return d("WAWebABProps").getABPropConfigValue("web_community_permissions_enabled")}function u(){return d("WAWebABProps").getABPropConfigValue("enable_community_suspend_and_appeals")}function v(){return d("WAWebABProps").getABPropConfigValue("replies_in_cag_m2_album")}function w(){return d("WAWebABProps").getABPropConfigValue("parent_group_announcement_comments_history_sync_receiver_enabled")}function x(){return d("WAWebABProps").getABPropConfigValue("parent_group_announcement_comments_enabled")}function y(){return d("WAWebABProps").getABPropConfigValue("parent_group_announcement_comments_receiver_enabled")}function z(){return d("WAWebABProps").getABPropConfigValue("web_comments_receive_ui_enabled")}function A(){return d("WAWebABProps").getABPropConfigValue("web_comments_send_ui_enabled")}function B(){return d("WAWebABProps").getABPropConfigValue("community_hidden_groups_receiver_enabled")}function C(){return d("WAWebABProps").getABPropConfigValue("community_transfer_ownership_sender")}function D(){return d("WAWebABProps").getABPropConfigValue("parent_group_improve_subgroup_activation_variant")===1}function E(){return d("WAWebABProps").getABPropConfigValue("improve_subgroup_activation_subgroup_poll_interval")}g.communitiesCreationEnabled=a;g.getParentGroupLinkLimit=b;g.getParentGroupLinkLimitCommunityCreation=c;g.communityAdminPromotionOneTimePromptEnabled=e;g.communityCreatePrivacyEnabled=f;g.subgroupFilterEnabled=h;g.reportCommunityExitUpsellEnabled=i;g.groupMentionsInSubgroupsEnabled=j;g.memberAddedGroupsM1Enabled=k;g.memberSuggestedGroupsEnabled=l;g.shouldShowNewSubgroupIdentity=m;g.communityShortGroupCreationEnabled=n;g.communityGeneralChatUIEnabled=o;g.communityGeneralChatCreateEnabled=p;g.memberSuggestedGroupsM3ReceiverEnabled=q;g.memberSuggestedGroupsM3SenderEnabled=r;g.communityGeneralChatV2Enabled=s;g.communityPermissionsEnabled=t;g.isCommunitySuspendAppealEnabled=u;g.repliesInCAGForAlbumsEnabled=v;g.isCommentMessageHistorySyncReceiverEnabled=w;g.isCommentMessagesEnabled=x;g.isCommentMessageReceiverEnabled=y;g.isCommentReceiveUIEnabled=z;g.isCommentSenderUIEnabled=A;g.communityHiddenGroupsReceiverEnabled=B;g.communityTransferOwnershipSenderEnabled=C;g.subgroupActivationEnabled=D;g.communityPollIntervalTimeInSeconds=E}),98);
__d("WAWebMexFetchSubgroupSuggestionsJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"group_id"},b={defaultValue:null,kind:"LocalArgument",name:"query_context"},c={defaultValue:null,kind:"LocalArgument",name:"sub_group_hint_id"},d=[{fields:[{kind:"Variable",name:"group_id",variableName:"group_id"},{kind:"Variable",name:"query_context",variableName:"query_context"},{kind:"Variable",name:"sub_group_hint",variableName:"sub_group_hint_id"}],kind:"ObjectValue",name:"group_input"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},g=[f],h={alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:g,storageKey:null},i={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[e],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"is_existing_group",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"hidden_group",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c],kind:"Fragment",metadata:null,name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[e,h,{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:g,storageKey:null},i,j,k,l,m],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,b],kind:"Operation",name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[e,h,{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[f,e],storageKey:null},i,j,k,l,m],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}]},params:{id:"8049169471838505",metadata:{},name:"WAWebMexFetchSubgroupSuggestionsJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchSubgroupSuggestionsJob",["Promise","WALogger","WAWebBackendErrors","WAWebMexClient","WAWebMexFetchSubgroupSuggestionsJobQuery.graphql","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][COMMUNITY] Fetched subgroup suggestions for ",""]);j=function(){return a};return a}var k=h!==void 0?h:h=b("WAWebMexFetchSubgroupSuggestionsJobQuery.graphql");function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e={group_id:a.toString(),query_context:e,sub_group_hint_id:c.toString()};try{c=(yield d("WAWebMexClient").fetchQuery(k,e));e=(e=c.xwa2_group_query_by_id)==null?void 0:(e=e.sub_group_suggestions)==null?void 0:e.edges;if(e==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing edges in response");e=e.map(function(b){b=b.node;if(b!=null)return m(a,b);throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"null node in sub_group_suggestions")});d("WALogger").DEV(j(),a.toString()).tags("GQL","MEX").devConsole({result:c});return e}catch(a){return a instanceof d("WAWebBackendErrors").ServerStatusCodeError?(i||(i=b("Promise"))).reject(a):(i||(i=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a.code),a.message))}});return l.apply(this,arguments)}function m(a,b){var e,f,g;if(b.is_existing_group==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing is_existing_group in response");else g=b.is_existing_group;if(b.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing id in response");else e=new(c("WAWebWid"))(b.id,{intentionallyUsePrivateConstructor:!0});if(b.creator.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing creator.id in response");else f=new(c("WAWebWid"))(b.creator.id,{intentionallyUsePrivateConstructor:!0});return{id:e,parentGroupId:a,subject:(a=(e=b.subject)==null?void 0:e.value)!=null?a:"",desc:(e=b.description)==null?void 0:e.value,owner:f,t:parseInt(b.creation_time,10),isExistingGroup:g,participantCount:b.total_participants_count,hiddenSubgroup:b.hidden_group}}g.mexFetchSubgroupSuggestions=a}),98);
__d("WAWebQueryAndUpdateSubgroupSuggestionsJob",["WAWebApiSubgroupSuggestionStore","WAWebBackendApi","WAWebCommunityGatingUtils","WAWebDBCommunity","WAWebMexFetchSubgroupSuggestionsJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebMexFetchSubgroupSuggestionsJob").mexFetchSubgroupSuggestions(a,b,"INTERACTIVE"));b=(yield d("WAWebApiSubgroupSuggestionStore").getSubgroupSuggestions(a));b=b.filter(function(a){return!c.some(function(b){return b.id.equals(a.id)&&b.owner.equals(a.owner)})});yield d("WAWebApiSubgroupSuggestionStore").removeSubgroupSuggestions(b.map(function(b){var c=b.id;b=b.owner;return{parentGroupId:a,id:c,owner:b}}));yield d("WAWebApiSubgroupSuggestionStore").addSubgroupSuggestions(a,c);d("WAWebBackendApi").frontendFireAndForget("createOrUpdateSubgroupSuggestions",{parentGroupId:a,subgroupSuggestions:c})});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.isParentGroup===!0&&a.allowNonAdminSubGroupCreation===!1&&a.participants.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)&&a.isAdmin})&&d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()){var b=(yield d("WAWebDBCommunity").getJoinedSubgroups(a.id));if(b.length)return h(a.id,b[0])}});return j.apply(this,arguments)}g.queryAndUpdateSubgroupSuggestions=h;g.maybeQueryAndUpdateSubgroupSuggestions=a}),98);
__d("WASmaxInInAppCommsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInInAppCommsIQErrorRequestTimeoutMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","request-timeout");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",408);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRequestTimeoutMixin=a}),98);
__d("WASmaxInInAppCommsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInInAppCommsIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInInAppCommsIQErrorInternalServerErrorMixin","WASmaxInInAppCommsIQErrorRequestTimeoutMixin","WASmaxInInAppCommsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInInAppCommsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInInAppCommsIQErrorRequestTimeoutMixin").parseIQErrorRequestTimeoutMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorRequestTimeout",value:c.value});var e=d("WASmaxInInAppCommsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorRequestTimeout","IQErrorServiceUnavailable"],[b,c,e])}g.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup=a}),98);
__d("WASmaxInInAppCommsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInInAppCommsEventResponseError",["WAResultOrError","WASmaxInInAppCommsIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup","WASmaxInInAppCommsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInInAppCommsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInInAppCommsIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup:b.value}))}g.parseEventResponseError=a}),98);
__d("WASmaxInInAppCommsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInInAppCommsEventResponseSuccess",["WASmaxInInAppCommsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInInAppCommsIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseEventResponseSuccess=a}),98);
__d("WASmaxOutInAppCommsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutInAppCommsEventRequest",["WASmaxJsx","WASmaxOutInAppCommsBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.eventPromotionId,e=a.eventType,f=a.eventTimestampSec;a=a.eventLogdata;c=d("WASmaxOutInAppCommsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"w:comms",to:(b=d("WAWap")).S_WHATSAPP_NET},d("WASmaxJsx").smax("event",{promotion_id:b.CUSTOM_STRING(c),type:b.CUSTOM_STRING(e),timestamp_sec:b.INT(f),logdata:b.CUSTOM_STRING(a)})));return c}g.makeEventRequest=a}),98);
__d("WASmaxParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,"SmaxParsingFailure: "+b)||this;c.name="SmaxParsingFailure";c.reason=b;return c}var c=b.prototype;c.toString=function(){return"SmaxParsingFailure: "+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxParsingFailure=a}),66);
__d("WASmaxRpcUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Object.keys(b).map(function(a){var c=a==="Request"?"<request>":'<response name="'+a+'">';return"Tried "+c+", but failed with "+b[a].error+"."}).join(" ");return'Failed to parse incoming stanza of <rpc name="'+a+'">. '+c}f.errorMessageRpcParsing=a}),66);
__d("WASmaxInAppCommsEventRPC",["WAComms","WASmaxInInAppCommsEventResponseError","WASmaxInInAppCommsEventResponseSuccess","WASmaxOutInAppCommsEventRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutInAppCommsEventRequest").makeEventRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInInAppCommsEventResponseSuccess").parseEventResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"EventResponseSuccess",value:g.value});case 7:h=d("WASmaxInInAppCommsEventResponseError").parseEventResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"EventResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Event",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendEventRPC=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin","WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin","WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin","WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:e.value});var f=d("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[b,c,e,f])}g.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxInBizCtwaAdAccountIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizCtwaAdAccountIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup:b.value}))}g.parseGetAccessTokenAndSessionCookiesResponseError=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"code","432");if(!e.success)return e;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"text","INCORRECT_NONCE");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorCode:e.value,errorText:c.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce=a}),98);
__d("WASmaxInBizCtwaAdAccountIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"access_token");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(a,"session_cookies");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(a,"business_person");if(!f.success)return f;c=d("WASmaxParseUtils").contentString(c.value);if(!c.success)return c;e=d("WASmaxParseUtils").contentString(e.value);if(!e.success)return e;f=d("WASmaxParseUtils").attrString(f.value,"id");if(!f.success)return f;a=d("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({accessTokenElementValue:c.value,sessionCookiesElementValue:e.value,businessPersonId:f.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseSuccess=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"code","431");if(!e.success)return e;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"text","TOO_MANY_ATTEMPTS");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorCode:e.value,errorText:c.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts=a}),98);
__d("WASmaxAttrs",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return d("WAWap").DROP_ATTR;else return a(b)}function b(a,b){if(b)return a;else return d("WAWap").DROP_ATTR}g.OPTIONAL=a;g.OPTIONAL_LITERAL=b}),98);
__d("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest",["WASmaxJsx","WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.codeElementValue;b=d("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(104)},d("WASmaxJsx").smax("parameters",null,d("WASmaxJsx").smax("code",null,b))),a);return b}g.makeGetAccessTokenAndSessionCookiesRequest=a}),98);
__d("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC",["WAComms","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts","WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest").makeGetAccessTokenAndSessionCookiesRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess").parseGetAccessTokenAndSessionCookiesResponseSuccess(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"GetAccessTokenAndSessionCookiesResponseSuccess",value:g.value});case 7:h=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts").parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"GetAccessTokenAndSessionCookiesResponseTooManyAttempts",value:h.value});case 10:i=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce").parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"GetAccessTokenAndSessionCookiesResponseIncorrectNonce",value:i.value});case 13:j=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError").parseGetAccessTokenAndSessionCookiesResponseError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"GetAccessTokenAndSessionCookiesResponseError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetAccessTokenAndSessionCookies",{Success:g,TooManyAttempts:h,IncorrectNonce:i,Error:j}));case 17:case"end":return k.stop()}},null,this)}g.sendGetAccessTokenAndSessionCookiesRPC=a}),98);
__d("WASmaxInBizAccessTokenIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizAccessTokenIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInBizAccessTokenIQErrorBadRequestMixin","WASmaxInBizAccessTokenIQErrorForbiddenMixin","WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin","WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBizAccessTokenIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBizAccessTokenIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:e.value});var f=d("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[b,c,e,f])}g.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseError",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin","WASmaxInBizAccessTokenIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizAccessTokenIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup:b.value}))}g.parseRequestSilentNonceResponseError=a}),98);
__d("WASmaxInBizAccessTokenIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizAccessTokenIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"result");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"status","RecoveryRequired");if(!e.success)return e;c=d("WASmaxParseUtils").attrString(c.value,"email");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({resultStatus:e.value,resultEmail:c.value},a.value))}g.parseRequestSilentNonceResponseRecoveryRequired=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"result");if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"status","Success");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({resultStatus:c.value},a.value))}g.parseRequestSilentNonceResponseSuccess=a}),98);
__d("WASmaxOutBizAccessTokenBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizAccessTokenBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutBizAccessTokenBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizAccessTokenRequestSilentNonceRequest",["WASmaxJsx","WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(118)}),a);return a}g.makeRequestSilentNonceRequest=a}),98);
__d("WASmaxBizAccessTokenRequestSilentNonceRPC",["WAComms","WASmaxInBizAccessTokenRequestSilentNonceResponseError","WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired","WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess","WASmaxOutBizAccessTokenRequestSilentNonceRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutBizAccessTokenRequestSilentNonceRequest").makeRequestSilentNonceRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess").parseRequestSilentNonceResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"RequestSilentNonceResponseSuccess",value:g.value});case 7:h=d("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired").parseRequestSilentNonceResponseRecoveryRequired(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"RequestSilentNonceResponseRecoveryRequired",value:h.value});case 10:i=d("WASmaxInBizAccessTokenRequestSilentNonceResponseError").parseRequestSilentNonceResponseError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"RequestSilentNonceResponseError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RequestSilentNonce",{Success:g,RecoveryRequired:h,Error:i}));case 14:case"end":return j.stop()}},null,this)}g.sendRequestSilentNonceRPC=a}),98);
__d("WAWebCTWABizAccessTokenNonceManager",["WACustomError","WALogger","WAPromiseRetryLoop","WAPromiseTimeout","WAQplTypes","WAResolvable","WASmaxBizAccessTokenRequestSilentNonceRPC","WAWebBizGatingUtils","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received a biz token nonce without asking for it"]);h=function(){return a};return a}var i=250,j=1e3,k=null;function a(a){if(k!=null&&a!==!0)return k.promise;var b=d("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds(),c=d("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries();d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{"int":{fetch_nonce_timeout:b,fetch_nonce_max_retries:c}});var e=c;a=function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{"int":{fetch_nonce_retry:c-e}});return d("WAPromiseTimeout").promiseTimeout(l(),b*1e3).then(function(b){a(b)})["catch"](function(a){var b=e>0;e--;if(!b){a instanceof d("WACustomError").TimeoutError&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.ABORTED),k=null);throw a}})};a=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"fetchAdAccountNonce",timer:{algo:{type:"exponential",first:i},max:j},code:a});a.start();return a.promise()}function l(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_start");var a=k=new(d("WAResolvable").Resolvable)();return d("WASmaxBizAccessTokenRequestSilentNonceRPC").sendRequestSilentNonceRPC({}).then(function(b){switch(b.name){case"RequestSilentNonceResponseError":d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;return{type:"error"};case"RequestSilentNonceResponseRecoveryRequired":d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{bool:{fetch_nonce_recovery_needed:!0}});d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;return{type:"recovery-required",emailMask:b.value.resultEmail};default:b.name;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_start");return a.promise}})["catch"](function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;throw a})}function b(a){k==null?(d("WALogger").WARN(h()),k=null,d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.DROPPED)):(k.resolve({type:"success",nonce:a}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.SUCCESS))}function c(a){k==null&&(k=new(d("WAResolvable").Resolvable)()),k.resolve({type:"success",nonce:m(a)})}function e(){k=null}function m(a){return a}function f(){return d("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds()*(d("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries()+1)}g.fetchNonce=a;g.setNonceFromPushNotification=b;g.setNonceFromRecoveryCode=c;g.markNonceAsUsed=e;g.castToNonce=m;g.getMaximumNonceFetchTimeoutSeconds=f}),98);
__d("WAWebCommonAdsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){e=b("$InternalEnum").Mirrored(["ACTIVE","AUTHENTICATION_NEEDED","CREATING","EXTENDABLE","FINISHED","LIMITED_DELIVERY","NOT_DELIVERING","PAUSED","PENDING","REJECTED","REVIEW_NEEDED","SCHEDULED","ERROR","UNKNOWN"]);function a(a){return a}function c(a){return a}function d(a){return a}f.BoostingStatusEnum=e;f.asAdId=a;f.asAdCampaignGroupId=c;f.asAdAccountToken=d}),66);
__d("WAWebFailureErrorCodes",[],(function(a,b,c,d,e,f){a={REASON_GENERIC_FAILURE:400,REASON_NOT_AUTHORIZED:401,REASON_TEMP_BANNED:402,REASON_LOCKED:403,REASON_CLIENT_TOO_OLD:405,REASON_BANNED:406,REASON_BAD_USER_AGENT:409,REASON_INTERNAL_SERVER_ERROR:500,REASON_EXPERIMENTAL:501,REASON_SERVICE_UNAVAILABLE:503};f.FAILURE_REASON=a}),66);
__d("WAWebCommonAdEntryPointsTypes",[],(function(a,b,c,d,e,f){function a(a){return a}f.asAdEntryPointContent=a}),66);
__d("WAWebPonyfillsCryptoRandomUUID",[],(function(a,b,c,d,e,f){function a(){return"randomUUID"in self.crypto?self.crypto.randomUUID():([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}f["default"]=a}),66);
__d("WAWebUserPrefsCTWA",["WATimeUtils","WAWebBizGatingUtils","WAWebCommonAdEntryPointsTypes","WAWebCommonAdsTypes","WAWebPonyfillsCryptoRandomUUID","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function h(){var a=c("WAWebPonyfillsCryptoRandomUUID")();c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY,a);return a}function a(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY);(a==null||typeof a!=="string")&&(a=h());return a}function b(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY);(a==null||typeof a!=="number")&&(a=1);c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,a+1);return a}function e(){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,1)}function f(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION);if(b==null||typeof b!=="object")return null;var e=b.configuration,f=b.ts;b=b.locale;if(typeof f!=="number"||typeof b!=="string")return null;f=!d("WATimeUtils").isInFuture(d("WATimeUtils").futureUnixTime(d("WAWebBizGatingUtils").adEntryPointsConfigurationFetchThreshold()/1e3,d("WATimeUtils").castToUnixTime(f)));if(b!==a)return null;if(e==null||typeof e!=="object")return null;b=Object.keys(e).reduce(function(a,b){var c=e[b];if(c==null||typeof c!=="object")return a;var f=c.shouldShow,g=c.content;c=c.subContent;if(typeof f!=="boolean")return a;f={shouldShow:f};if(g!=null){if(typeof g!=="string")return a;f.content=d("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(g)}if(c!=null){if(typeof c!=="string")return a;f.subContent=d("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(c)}a[b]=f;return a},{});return{configuration:b,isExpired:f}}function i(a,b){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION,{configuration:b,ts:d("WATimeUtils").unixTime(),locale:a})}function j(){if(!d("WAWebBizGatingUtils").adAccountTokenStoringEnabled())return null;var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN);return a==null||typeof a!=="string"?null:d("WAWebCommonAdsTypes").asAdAccountToken(a)}function k(a){if(!d("WAWebBizGatingUtils").adAccountTokenStoringEnabled())return;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,a)}function l(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,null)}g.generateAdCreationFlowId=h;g.getAdCreationFlowId=a;g.getAndIncrementAdCreationSequenceNumber=b;g.resetAdCreationSequenceNumber=e;g.getAdEntryPointsConfiguration=f;g.setAdEntryPointsConfiguration=i;g.getAdAccountToken=j;g.setAdAccountToken=k;g.clearAdAccountToken=l}),98);
__d("WAWebFetchAdAccountToken",["WAQplTypes","WAResolvable","WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC","WAWebCTWABizAccessTokenNonceManager","WAWebCommonAdsTypes","WAWebFailureErrorCodes","WAWebGraphQLServerError","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsCTWA"],(function(a,b,c,d,e,f,g){var h=null,i=1;function a(a){if(h!=null){if(a!==!0)return h.promise;h=null}h;var b=h=new(d("WAResolvable").Resolvable)(),c=d("WAWebUserPrefsCTWA").getAdAccountToken();if(c!=null&&a!==!0){b.resolve({type:"success",token:c});return b.promise}d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_start");void j(i).then(function(a){a.type==="success"?d("WAWebUserPrefsCTWA").setAdAccountToken(a.token):(a.type,h=null),b.resolve(a)})["catch"](function(a){h=null,b.reject(a)});return b.promise}function b(){h=null,d("WAWebUserPrefsCTWA").clearAdAccountToken()}function c(a){if(a instanceof d("WAWebGraphQLServerError").GraphQLServerError){a=a.source.errors.some(function(a){return d("WAWebGraphQLServerError").GraphQLErrorCode.cast(a.code)===d("WAWebGraphQLServerError").GraphQLErrorCode.INVALID_ACCESS_TOKEN||a.code===d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_GENERIC_FAILURE});return a}return!1}function j(a){return d("WAWebCTWABizAccessTokenNonceManager").fetchNonce().then(function(b){switch(b.type){case"error":case"recovery-required":return b;default:b.type;return k(b.nonce).then(function(b){return b.type==="incorrect-nonce"&&a>0?j(a-1).then(function(a){if(a.type==="success")return a;a.type;return b}):b})}})}function k(a){d("WAWebCTWABizAccessTokenNonceManager").markNonceAsUsed();return d("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC").sendGetAccessTokenAndSessionCookiesRPC({codeElementValue:a}).then(function(a){switch(a.name){case"GetAccessTokenAndSessionCookiesResponseTooManyAttempts":n();return{type:"too-many-attempts"};case"GetAccessTokenAndSessionCookiesResponseIncorrectNonce":n();return{type:"incorrect-nonce"};case"GetAccessTokenAndSessionCookiesResponseError":n();return{type:"error"};default:a.name;m();return{type:"success",token:d("WAWebCommonAdsTypes").asAdAccountToken(a.value.accessTokenElementValue)}}})["catch"](function(a){n();throw a})}function l(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,a)}function m(){l(d("WAQplTypes").QuickLogActionType.SUCCESS)}function n(){l(d("WAQplTypes").QuickLogActionType.FAIL)}function e(){return d("WAWebCTWABizAccessTokenNonceManager").getMaximumNonceFetchTimeoutSeconds()*(i+1)}g.FETCH_AD_ACCOUNT_TOKEN_MAX_RETRIES=i;g.fetchToken=a;g.markTokenAsInvalid=b;g.hasGraphQLAuthError=c;g.getMaximumAdAccountFetchTimeoutSeconds=e}),98);
__d("WAWebQuickPromotionActionMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6907502319358470"}),null);
__d("WAWebQuickPromotionActionMutation.graphql",["WAWebQuickPromotionActionMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"WaQuickPromotionLogEventResponsePayload",kind:"LinkedField",name:"wa_quick_promotion_log_event",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQuickPromotionActionMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQuickPromotionActionMutation",selections:c},params:{id:b("WAWebQuickPromotionActionMutation_facebookRelayOperation"),metadata:{},name:"WAWebQuickPromotionActionMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebQuickPromotionActionMutation",["Promise","WACustomError","WALogger","WAPromiseTimeout","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebFetchAdAccountToken","WAWebOrchestratorNonPersistedJob","WAWebQuickPromotionActionMutation.graphql","WAWebRelayClient"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['executeQuickPromotionActionMutation: failed as "timeout"']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['executeQuickPromotionActionMutation: failed as "','"']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["executeQuickPromotionActionMutation: success"]);l=function(){return a};return a}var m={type:"error"},n=h!==void 0?h:h=b("WAWebQuickPromotionActionMutation.graphql");function a(a){if(!d("WAWebBizGatingUtils").qpGraphQLEnabled())return(i||(i=b("Promise"))).resolve({type:"not-enabled"});var c=d("WAWebCTWAConstants").KNOWN_QP_SURFACES.get(a.surface_nux_id);return c==null||!d("WAWebBizGatingUtils").qpSurfaceIdsUsingGraphQL().has(c)?(i||(i=b("Promise"))).resolve({type:"not-enabled"}):d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("quickPromotionActionMutation",function(){return o(a)}).waitUntilCompleted()}function o(a){return d("WAPromiseTimeout").promiseTimeout(p(a),d("WAWebCTWAConstants").QP_ACTION_MUTATION_TIMEOUT_MS).then(function(a){if(a.type==="success"){d("WALogger").LOG(l());return a}a.type;d("WALogger").WARN(k(),a.type);return a})["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError){d("WALogger").WARN(j());return{type:"timeout"}}throw a})}function p(a){return d("WAWebFetchAdAccountToken").fetchToken().then(function(b){if(b.type==="success")return q(a,b.token).then(function(a){a.type==="auth-failure"?d("WAWebFetchAdAccountToken").markTokenAsInvalid():a.type;return a});b.type;return b})}function q(a,b){return d("WAWebRelayClient").commitMutation(n,{input:a},{environmentType:"facebook",accessToken:b}).then(function(a){if(a==null)return m;return a.wa_quick_promotion_log_event==null?m:{type:"success"}})["catch"](function(a){return d("WAWebFetchAdAccountToken").hasGraphQLAuthError(a)?{type:"auth-failure"}:m})}g.executeQuickPromotionActionMutation=a}),98);
__d("WAWebJobDismissQuickPromotion",["WALogger","WASmaxInAppCommsEventRPC","WAWebBizGatingUtils","WAWebDefinePersistedJob","WAWebModelStorageUtils","WAWebQuickPromotionActionMutation","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["dismissQuickPromotion: unable to log through IQ"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["dismissQuickPromotion: unable to log through GraphQL"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["dismissQuickPromotion: surface id for GraphQL call not found"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["dismissQuickPromotion: promotion not found"]);k=function(){return a};return a}function a(a){var c=a.id,e=a.ts;return d("WAWebModelStorageUtils").getStorage().lock(["quick-promotions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(c));if(b==null){d("WALogger").WARN(k());return}var f=babelHelpers["extends"]({},b.tracking,{dismisses:b.tracking.dismisses+1}),g=f.lastDismissTs;(g==null||e>g)&&(f.lastDismissTs=e);yield a.merge(c,{tracking:f});return{surfaceId:b.surfaceId,instanceLogData:(g=b.data.qpConfigInstanceLogData)==null?void 0:g.elementValue}});return function(b){return a.apply(this,arguments)}}()).then(function(a){return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("loadQuickPromotions",{trigger:"user-action"}).then(function(){return a})})}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.id;b=b.ts;var e=(a==null?void 0:a.instanceLogData)!=null?String.fromCharCode.apply(null,a.instanceLogData):"";if(d("WAWebBizGatingUtils").qpGraphQLEnabled()){a=a==null?void 0:a.surfaceId;if(a==null)d("WALogger").WARN(j());else{a;var f;try{f=(yield d("WAWebQuickPromotionActionMutation").executeQuickPromotionActionMutation({event:"ACTION",action:"DISMISS",promotion_id:c,surface_nux_id:a,promotion_logging_data:e,client_time:b}))}catch(a){d("WALogger").ERROR(i()).devConsole(a)}if(((a=f)==null?void 0:a.type)!=="not-enabled")return;f.type}}a=(yield d("WASmaxInAppCommsEventRPC").sendEventRPC({eventType:"dismiss",eventPromotionId:c,eventTimestampSec:b,eventLogdata:e}));a.name!=="EventResponseSuccess"&&(a.name,d("WALogger").ERROR(h()).devConsole(a.value))});return l.apply(this,arguments)}e=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("saveToDb",a).finalStep("reportToComms",c).end();g.dismissQuickPromotion=e}),98);
__d("WAWebJobImpressionOnQuickPromotion",["WALogger","WASmaxInAppCommsEventRPC","WAWebBizGatingUtils","WAWebDefinePersistedJob","WAWebModelStorageUtils","WAWebQuickPromotionActionMutation","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["impressionOnQuickPromotion: unable to log"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["impressionOnQuickPromotion: unable to log through GraphQL"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["impressionOnQuickPromotion: surface id for GraphQL call not found"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["impressionOnQuickPromotion: promotion not found"]);k=function(){return a};return a}function a(a){var c=a.id,e=a.ts;return d("WAWebModelStorageUtils").getStorage().lock(["quick-promotions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(c));if(b==null){d("WALogger").WARN(k());return}var f=babelHelpers["extends"]({},b.tracking,{impressions:b.tracking.impressions+1}),g=f.lastImpressionTs;(g==null||e>g)&&(f.lastImpressionTs=e);yield a.merge(c,{tracking:f});return{surfaceId:b.surfaceId,instanceLogData:(g=b.data.qpConfigInstanceLogData)==null?void 0:g.elementValue}});return function(b){return a.apply(this,arguments)}}()).then(function(a){return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("loadQuickPromotions",{trigger:"user-action"}).then(function(){return a})})}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.id;b=b.ts;var e=(a==null?void 0:a.instanceLogData)!=null?String.fromCharCode.apply(null,a.instanceLogData):"";if(d("WAWebBizGatingUtils").qpGraphQLEnabled()){a=a==null?void 0:a.surfaceId;if(a==null)d("WALogger").WARN(j());else{a;var f;try{f=(yield d("WAWebQuickPromotionActionMutation").executeQuickPromotionActionMutation({event:"VIEW",promotion_id:c,surface_nux_id:a,promotion_logging_data:e,client_time:b}))}catch(a){d("WALogger").ERROR(i()).devConsole(a)}if(((a=f)==null?void 0:a.type)!=="not-enabled")return;f.type}}a=(yield d("WASmaxInAppCommsEventRPC").sendEventRPC({eventType:"impression",eventPromotionId:c,eventTimestampSec:b,eventLogdata:e}));a.name!=="EventResponseSuccess"&&(a.name,d("WALogger").ERROR(h()).devConsole(a.value))});return l.apply(this,arguments)}e=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("saveToDb",a).finalStep("reportToComms",c).end();g.impressionOnQuickPromotion=e}),98);
__d("WAWebJobPrimaryActionClickInQuickPromotion",["WALogger","WASmaxInAppCommsEventRPC","WAWebBizGatingUtils","WAWebDefinePersistedJob","WAWebModelStorageUtils","WAWebQuickPromotionActionMutation","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["primaryActionClickInQuickPromotion: unable to log"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["primaryActionClickInQuickPromotion: unable to log through GraphQL"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["primaryActionClickInQuickPromotion: surface id for GraphQL call not found"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["primaryActionClickInQuickPromotion: promotion not found"]);k=function(){return a};return a}function a(a){var c=a.id,e=a.ts;return d("WAWebModelStorageUtils").getStorage().lock(["quick-promotions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(c));if(b==null){d("WALogger").WARN(k());return}var f=babelHelpers["extends"]({},b.tracking,{primaryClicks:b.tracking.primaryClicks+1}),g=f.lastPrimaryClickTs;(g==null||e>g)&&(f.lastPrimaryClickTs=e);yield a.merge(c,{tracking:f});return{surfaceId:b.surfaceId,instanceLogData:(g=b.data.qpConfigInstanceLogData)==null?void 0:g.elementValue}});return function(b){return a.apply(this,arguments)}}()).then(function(a){return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("loadQuickPromotions",{trigger:"user-action"}).then(function(){return a})})}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.id;b=b.ts;var e=(a==null?void 0:a.instanceLogData)!=null?String.fromCharCode.apply(null,a.instanceLogData):"";if(d("WAWebBizGatingUtils").qpGraphQLEnabled()){a=a==null?void 0:a.surfaceId;if(a==null)d("WALogger").WARN(j());else{a;var f;try{f=(yield d("WAWebQuickPromotionActionMutation").executeQuickPromotionActionMutation({event:"ACTION",action:"PRIMARY",promotion_id:c,surface_nux_id:a,promotion_logging_data:e,client_time:b}))}catch(a){d("WALogger").ERROR(i()).devConsole(a)}if(((a=f)==null?void 0:a.type)!=="not-enabled")return;f.type}}a=(yield d("WASmaxInAppCommsEventRPC").sendEventRPC({eventType:"primary_click",eventPromotionId:c,eventTimestampSec:b,eventLogdata:e}));a.name!=="EventResponseSuccess"&&(a.name,d("WALogger").ERROR(h()).devConsole(a.value))});return l.apply(this,arguments)}e=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("saveToDb",a).finalStep("reportToComms",c).end();g.primaryActionClickInQuickPromotion=e}),98);
__d("WAWebJobUserExposureToQuickPromotion",["WALogger","WASmaxInAppCommsEventRPC","WAWebDefinePersistedJob","WAWebModelStorageUtils","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["userExposureToQuickPromotion: unable to log"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["userExposureToQuickPromotion: skipping comms step: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["userExposureToQuickPromotion: missing experiment key"]);j=function(){return a};return a}function a(a){var c=a.id,e=a.experimentKey,f=a.exposureHoldout;if(e.length===0){d("WALogger").ERROR(j()).sendLogs("user-exposure-quick-promotion-missing-exp-key");return"missing-key"}return d("WAWebModelStorageUtils").getStorage().lock(["quick-promotions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(c));if(b==null)return"not-found";if(f==null)return"old-job";b=b.tracking;var d=b.lastLoggedExposure;if(d!=null&&(d.experimentKey===e&&d.exposureHoldout===f))return"deduped";d=babelHelpers["extends"]({},b,{lastLoggedExposure:{experimentKey:e,exposureHoldout:f}});yield a.merge(c,{tracking:d});return"updated"});return function(b){return a.apply(this,arguments)}}()).then(function(a){return a==="updated"?d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("loadQuickPromotions",{trigger:"user-action"}).then(function(){return a}):a})}function c(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.id,e=b.ts;b=b.experimentKey;if(a!=="updated"&&a!=="old-job"){d("WALogger").WARN(i(),a);return}a=(yield d("WASmaxInAppCommsEventRPC").sendEventRPC({eventType:"exposure",eventPromotionId:c,eventTimestampSec:e,eventLogdata:b}));a.name!=="EventResponseSuccess"&&(a.name,d("WALogger").ERROR(h()).devConsole(a.value))});return k.apply(this,arguments)}e=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("saveToDb",a).finalStep("reportToComms",c).end();g.userExposureToQuickPromotion=e}),98);
__d("WAWebQueryGetPublicKeyJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebCommsWapMd","WAWebDefinePersistedJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("getPublicKeyResponse",function(a){a.assertTag("iq");a.assertFromServer();a=(a=a.maybeChild("public_key"))==null?void 0:(a=a.maybeChild("pem"))==null?void 0:a.contentString();return{certificate:a}});a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendStanza",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.businessJid;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"get",smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").BizGetPublicKey),xmlns:"w:biz:catalog",id:b.generateId()},b.wap("public_key",{jid:d("WAWebCommsWapMd").USER_JID(d("WAWebWidFactory").createWid(a))}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode);else return a.result});return function(b){return a.apply(this,arguments)}}()).end();g.QueryGetPublicKey=a}),98);
__d("WAWebQueryGetSignedUserInfoJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebCommsWapMd","WAWebDefinePersistedJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){return a==null?void 0:(a=a.maybeChild(b))==null?void 0:a.contentString()}var i=new(c("WADeprecatedWapParser"))("getSignedUserInfoResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.maybeChild("signed_user_info");return{phoneNumber:h(a,"phone_number"),phoneNumberSignatureExpiration:h(a,"ttl_timestamp"),phoneNumberSignature:h(a,"phone_number_signature"),businessDomain:h(a,"business_domain")}});a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendStanza",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.businessJid;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:b.generateId()},b.wap("signed_user_info",{biz_jid:d("WAWebCommsWapMd").USER_JID(d("WAWebWidFactory").createWid(a))}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,i));if(!a.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode);return a.result});return function(b){return a.apply(this,arguments)}}()).end();g.QueryGetSignedUserInfo=a}),98);
__d("WAWebBizCatalogManagementFetchProductListQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8239907179381052"}),null);
__d("WAWebBizCatalogManagementFetchProductListQuery.graphql",["WAWebBizCatalogManagementFetchProductListQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{kind:"Variable",name:"request",variableName:"request"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null};d=[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductMediaVideo",kind:"LinkedField",name:"videos",plural:!0,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"original_video_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null}],storageKey:null},f,{alias:null,args:null,concreteType:"XFBWhatsAppCatalogStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebBizCatalogManagementFetchProductListQuery",selections:[{alias:null,args:c,concreteType:"XFBWhatsAppCatalogGetProductListResponse",kind:"LinkedField",name:"xfb_whatsapp_catalog_product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductListResponse",kind:"LinkedField",name:"product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductInfo",kind:"LinkedField",name:"products",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"WAWebBizCatalogManagementParseProductGraphql_product",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebBizCatalogManagementFetchProductListQuery",selections:[{alias:null,args:c,concreteType:"XFBWhatsAppCatalogGetProductListResponse",kind:"LinkedField",name:"xfb_whatsapp_catalog_product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductListResponse",kind:"LinkedField",name:"product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBWhatsAppCatalogProductInfo",kind:"LinkedField",name:"products",plural:!0,selections:d,storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("WAWebBizCatalogManagementFetchProductListQuery_facebookRelayOperation"),metadata:{},name:"WAWebBizCatalogManagementFetchProductListQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebBizCatalogManagementParseProductGraphql_product.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebBizCatalogManagementParseProductGraphql_product"};e.exports=a}),null);
__d("WAWebBizCartConstants",[],(function(a,b,c,d,e,f){a=99;f.CART_ITEM_MAX_QUANTITY=a}),66);
__d("WAWebBizParseProductGraphql_product.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:{mask:!1},name:"WAWebBizParseProductGraphql_product",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},b,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaVideo",kind:"LinkedField",name:"videos",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_video_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],type:"XWACatalogProduct",abstractKey:null}}();a.hash="1692ed525d746a2adf81bc0e9062a879";e.exports=a}),null);
__d("WAWebSyntheticCountryCode",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NotApplicable:"NOT_APPLICABLE"});f.SyntheticCountryCode=a}),66);
__d("WAWebBizParseProductGraphql",["WANullthrows","WAWebBizCartConstants","WAWebBizParseProductGraphql_product.graphql","WAWebProductTypes.flow","WAWebSyntheticCountryCode"],(function(a,b,c,d,e,f,g){var h,i={AVAILABLE_FOR_ANOTHER_POSTCODE:d("WAWebProductTypes.flow").ProductAvailability.AVAILABLE_FOR_ANOTHER_POSTCODE,IN_STOCK:d("WAWebProductTypes.flow").ProductAvailability.IN_STOCK,OUT_OF_STOCK:d("WAWebProductTypes.flow").ProductAvailability.OUT_OF_STOCK};function a(a){var b,e,f=a.status_info,g=a.sale_price,h=a.product_availability,j=a.compliance_info;a=babelHelpers.objectWithoutPropertiesLoose(a,["status_info","sale_price","product_availability","compliance_info"]);b=(b=(b=a.media)==null?void 0:b.images)!=null?b:[];var k=b[0];b=b.slice(1);k=babelHelpers["extends"]({id:c("WANullthrows")(a.id),retailer_id:(e=a.retailer_id)!=null?e:"",name:c("WANullthrows")(a.name),description:(e=a.description)!=null?e:"",url:(e=a.url)!=null?e:"",currency:a.currency,price:a.price,is_hidden:a.is_hidden==="ISHIDDEN_TRUE",max_available:(e=a.max_available)!=null?e:d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY,availability:h&&h in i?i[h]:d("WAWebProductTypes.flow").ProductAvailability.UNKNOWN},(g==null?void 0:g.price)!=null?babelHelpers["extends"]({sale_price:g.price},g.start_date!=null&&g.end_date!=null?{sale_start_date:g.start_date,sale_end_date:g.end_date}:null):null,{checkmark:a.belongs_to==="true",image_hashes_for_whatsapp:((h=(e=a.media)==null?void 0:e.images)!=null?h:[]).map(function(a){return c("WANullthrows")(a.id)}),image_cdn_urls:k?[{key:"requested",value:c("WANullthrows")(k.request_image_url)},{key:"full",value:c("WANullthrows")(k.original_image_url)}]:[],additional_image_cdn_urls:b.map(function(a){return[{key:"requested",value:c("WANullthrows")(a.request_image_url)},{key:"full",value:c("WANullthrows")(a.original_image_url)}]}),whatsapp_product_can_appeal:(f==null?void 0:f.can_appeal)==="true",capability_to_review_status:[{key:"WHATSAPP",value:(g=f==null?void 0:f.status)!=null?g:"APPROVED"}],videos:(e=a.media)==null?void 0:(h=e.videos)==null?void 0:h.map(function(a){return{id:c("WANullthrows")(a.id),original_video_url:c("WANullthrows")(a.original_video_url),thumbnail_url:c("WANullthrows")(a.thumbnail_url)}})});if(j!=null){b=j.importer_address;k.compliance_info=a.compliance_category==="COMPLIANCECATEGORY_COUNTRYORIGINEXEMPT"?{country_code_origin:d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable}:{country_code_origin:(f=j.country_code_origin)!=null?f:void 0,importer_name:(g=j.importer_name)!=null?g:void 0,importer_address:{street1:c("WANullthrows")(b==null?void 0:b.street1),street2:(e=b==null?void 0:b.street2)!=null?e:void 0,postal_code:(h=b==null?void 0:b.postal_code)!=null?h:void 0,city:c("WANullthrows")(b==null?void 0:b.city),region:(a=b==null?void 0:b.region)!=null?a:void 0,country_code:c("WANullthrows")(b==null?void 0:b.country_code)}}}return k}g.parseProductGraphQL=a}),98);
__d("WAWebBizCatalogManagementParseProductGraphql",["WAWebBizCatalogManagementParseProductGraphql_product.graphql","WAWebBizParseProductGraphql","WAWebProductTypes.flow"],(function(a,b,c,d,e,f,g){var h;c=h!==void 0?h:h=b("WAWebBizCatalogManagementParseProductGraphql_product.graphql");function a(a){var b;return d("WAWebBizParseProductGraphql").parseProductGraphQL({id:a.id,name:a.name,description:a.description,url:a.url,price:a.price,currency:a.currency,retailer_id:a.retailer_id,belongs_to:a.belongs_to,status_info:{can_appeal:(b=a.status_info)==null?void 0:b.can_appeal,status:(b=a.status_info)==null?void 0:b.status},availability:a.availability,max_available:a.max_available,sale_price:{start_date:(b=a.sale_price)==null?void 0:b.start_date,end_date:(b=a.sale_price)==null?void 0:b.end_date,price:(b=a.sale_price)==null?void 0:b.price},media:{images:(b=(b=a.media)==null?void 0:b.images.map(function(a){return{id:a.id,original_image_url:a.original_image_url,request_image_url:a.request_image_url}}))!=null?b:[],videos:((b=(b=a.media)==null?void 0:b.videos)!=null?b:[]).map(function(a){return{id:a.id,original_video_url:a.original_video_url,thumbnail_url:a.thumbnail_url}})},compliance_info:a.compliance_info!=null?{country_code_origin:a.compliance_info.country_code_origin,importer_name:a.compliance_info.importer_name,importer_address:{street1:(b=a.compliance_info.importer_address)==null?void 0:b.street1,street2:(b=a.compliance_info.importer_address)==null?void 0:b.street2,postal_code:(b=a.compliance_info.importer_address)==null?void 0:b.postal_code,city:(b=a.compliance_info.importer_address)==null?void 0:b.city,region:(b=a.compliance_info.importer_address)==null?void 0:b.region,country_code:(b=a.compliance_info.importer_address)==null?void 0:b.country_code}}:null,compliance_category:d("WAWebProductTypes.flow").mapComplianceCategoryToWASchema(a.compliance_category),is_hidden:d("WAWebProductTypes.flow").mapIsHiddenToWASchema(a.is_hidden)})}g.PARSE_PRODUCT_FRAGMENT=c;g.parseProductGraphQL=a}),98);
__d("WAWebBizCatalogManagementFetchProductList",["Promise","WALogger","WAWebBizCatalogManagementFetchProductListQuery.graphql","WAWebBizCatalogManagementParseProductGraphql","WAWebBizGatingUtils","WAWebFetchAdAccountToken","WAWebGraphQLServerError","WAWebNetworkStatus","WAWebRelayClient"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchProductListWithToken: failed with error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['fetchProductList: failed as "','"']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchProductList: success"]);l=function(){return a};return a}var m={type:"error"},n=h!==void 0?h:h=b("WAWebBizCatalogManagementFetchProductListQuery.graphql");function a(a){return!d("WAWebBizGatingUtils").graphQLForGetProductListEnabled()?(i||(i=b("Promise"))).resolve({type:"not-enabled"}):o(a).then(function(a){if(a.type==="success"){d("WALogger").LOG(l());return a}a.type;d("WALogger").LOG(k(),a.type);return a})}function o(a){return d("WAWebFetchAdAccountToken").fetchToken().then(function(b){if(b.type==="success")return p(b.token,a).then(function(a){a.type!=="success"?a.type==="auth-failure"?d("WAWebFetchAdAccountToken").markTokenAsInvalid():a.type:a.type;return a});b.type;return b})}function p(a,b){var e;return c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal}).then(function(){return d("WAWebRelayClient").fetchQuery(n,{request:b},{environmentType:"facebook",accessToken:a,getInlineDataReader:function(a){e=a}})}).then(function(a){if(a==null)return m;a=(a=a.xfb_whatsapp_catalog_product_list)==null?void 0:(a=a.product_list)==null?void 0:a.products;if(a==null)return m;a=a.map(function(a){return e(d("WAWebBizCatalogManagementParseProductGraphql").PARSE_PRODUCT_FRAGMENT,a)}).map(d("WAWebBizCatalogManagementParseProductGraphql").parseProductGraphQL);return{type:"success",productsResult:a}})["catch"](function(a){d("WALogger").LOG(j()).devConsole(a);if(d("WAWebFetchAdAccountToken").hasGraphQLAuthError(a))return{type:"auth-failure"};return a instanceof d("WAWebGraphQLServerError").GraphQLServerError?{type:"graphql-error",error:a}:m})}g.fetchProductList=a}),98);
__d("WAWebBizCatalogParseProduct",["WAWap","WAWebBizCartConstants","WAWebProductTypes.flow","WAWebSyntheticCountryCode"],(function(a,b,c,d,e,f,g){b=function(a){var b,c,e=a.child("id").contentString(),f=a.maybeChild("url"),g="";f&&f.hasContent()&&(g=f.contentString());f=a.child("name").contentString();b=(b=a.maybeAttrString("availability"))!=null?b:d("WAWebProductTypes.flow").ProductAvailability.UNKNOWN;var h=d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY,j=a.maybeAttrString("max_available");j!=null&&(h=Number(j));j=a.maybeChild("max_available");j=j==null?void 0:j.contentString();j!=null&&(h=Number(j));j=a.maybeChild("description");j=j?j.contentString():"";var l=a.maybeChild("belongs_to");l=(l==null?void 0:l.contentString())==="true"||!1;var m=[],n=[],o=[],p=a.child("media"),q=!0;p.forEachChildWithTag("image",function(a){if(q)q=!1,m.push({key:"requested",value:a.child("request_image_url").contentString()}),m.push({key:"full",value:a.child("original_image_url").contentString()}),o.push(a.child("id").contentString());else{var b=[];b.push({key:"requested",value:a.child("request_image_url").contentString()});b.push({key:"full",value:a.child("original_image_url").contentString()});n.push(b);o.push(a.child("id").contentString())}});var r=[];p.forEachChildWithTag("video",function(a){var b=a.maybeChild("id"),c=a.child("original_video_url").contentString();a=a.maybeChild("thumbnail_url");b=(b==null?void 0:b.contentString())||"";a=(a==null?void 0:a.contentString())||"";r.push({id:b,original_video_url:c,thumbnail_url:a})});p=a.maybeChild("status_info");var s=(p==null?void 0:p.child("status").contentString())||"APPROVED";p=p==null?void 0:(p=p.maybeChild("can_appeal"))==null?void 0:p.contentString();s=[{key:"WHATSAPP",value:s}];var t=a.maybeChild("currency");t=t?t.contentString():void 0;var u=a.maybeChild("price");u=u==null?void 0:u.contentString();var v=a.maybeChild("retailer_id");v=v?v.contentString():"";var w=a.hasAttr("is_hidden")?a.attrString("is_hidden")==="true":!1,x=a.hasAttr("compliance_category")?d("WAWebProductTypes.flow").ProductComplianceCategory.cast(a.attrString("compliance_category")):d("WAWebProductTypes.flow").ProductComplianceCategory.Default,y=a.maybeChild("sale_price");c=y?babelHelpers["extends"]({sale_price:(c=y.maybeChild("price"))==null?void 0:c.contentString()},y.hasChild("start_date")&&y.hasChild("end_date")?{sale_start_date:y.child("start_date").contentString(),sale_end_date:y.child("end_date").contentString()}:null):null;y=babelHelpers["extends"]({id:e,is_hidden:w,url:g,name:f,description:j,availability:b,max_available:h,additional_image_cdn_urls:n,image_cdn_urls:m,capability_to_review_status:s,whatsapp_product_can_appeal:p==="true",image_hashes_for_whatsapp:o,currency:t,price:u,retailer_id:v,checkmark:l,videos:r},c);e=a.maybeChild("compliance_info");x===d("WAWebProductTypes.flow").ProductComplianceCategory.CountryOriginExempt?y.compliance_info=k():e&&(y.compliance_info=i(e));return y};function a(a){var b,c,e,f=a.id?d("WAWap").wap("id",null,a.id.toString()):void 0,g=a.description?d("WAWap").wap("description",null,a.description):void 0,i=a.url?d("WAWap").wap("url",null,a.url):void 0,j=a.retailerId?d("WAWap").wap("retailer_id",null,a.retailerId):void 0,k=a.priceAmount1000!=null?d("WAWap").wap("currency",null,a.currency):void 0,l=a.priceAmount1000!=null?d("WAWap").wap("price",null,a.priceAmount1000.toString()):void 0;b=[d("WAWap").wap("image",null,d("WAWap").wap("url",null,a.imageCdnUrl))].concat((b=a.additionalImageCdnUrl)==null?void 0:b.map(function(a){return d("WAWap").wap("image",null,d("WAWap").wap("url",null,a))}));c=(c=a.videos)==null?void 0:c.map(function(a){return d("WAWap").wap("video",null,d("WAWap").wap("url",null,a.original_video_url))});var m=h(a.complianceInfo);e=babelHelpers["extends"]({is_hidden:a.isHidden?"true":"false"},((e=a.complianceInfo)==null?void 0:e.countryCodeOrigin)===String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable)?{compliance_category:d("WAWebProductTypes.flow").ProductComplianceCategory.CountryOriginExempt}:void 0);return d("WAWap").wap("product",e,f,d("WAWap").wap("name",null,a.name),g,i,j,d("WAWap").wap("media",null,b.concat(c)),l,k,m)}function h(a){var b=j(a),c=b.isExempt,e=b.hasCountryCodeOrigin,f=b.hasImporterName;b=b.hasImporterAddress;return!c&&(e||f||b)?d("WAWap").wap("compliance_info",null,e?d("WAWap").wap("country_code_origin",null,a==null?void 0:a.countryCodeOrigin):void 0,f?d("WAWap").wap("importer_name",null,a==null?void 0:a.importerName):void 0,b?d("WAWap").wap("importer_address",null,(a==null?void 0:(c=a.importerAddress)==null?void 0:c.street1)?d("WAWap").wap("street1",null,a.importerAddress.street1):void 0,(a==null?void 0:(e=a.importerAddress)==null?void 0:e.street2)?d("WAWap").wap("street2",null,a.importerAddress.street2):void 0,(a==null?void 0:(f=a.importerAddress)==null?void 0:f.city)?d("WAWap").wap("city",null,a.importerAddress.city):void 0,(a==null?void 0:(b=a.importerAddress)==null?void 0:b.region)?d("WAWap").wap("region",null,a.importerAddress.region):void 0,(a==null?void 0:(c=a.importerAddress)==null?void 0:c.postalCode)?d("WAWap").wap("postal_code",null,a.importerAddress.postalCode):void 0,(a==null?void 0:(e=a.importerAddress)==null?void 0:e.countryCode)?d("WAWap").wap("country_code",null,a.importerAddress.countryCode):void 0):void 0):void 0}function i(a){var b,c=a.child("country_code_origin").contentString();b=(b=a.maybeChild("importer_name"))==null?void 0:b.contentString();a=a.maybeChild("importer_address");c={country_code_origin:c,importer_name:b};if(a){c.importer_address={street1:a.child("street1").contentString(),street2:(b=a.maybeChild("street2"))==null?void 0:b.contentString(),postal_code:(b=a.maybeChild("postal_code"))==null?void 0:b.contentString(),city:a.child("city").contentString(),region:(b=a.maybeChild("region"))==null?void 0:b.contentString(),country_code:a.child("country_code").contentString()}}return c}function j(a){var b=(a==null?void 0:a.countryCodeOrigin)===String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable),c=!b&&(a==null?void 0:a.countryCodeOrigin)!==void 0,e=!b&&(a==null?void 0:a.importerName)!==void 0;a=!b&&(a==null?void 0:a.importerAddress)!==void 0&&[a.importerAddress.street1,a.importerAddress.street2,a.importerAddress.city,a.importerAddress.region,a.importerAddress.postalCode,a.importerAddress.countryCode].some(function(a){return a});return{isExempt:b,hasImporterAddress:a,hasImporterName:e,hasCountryCodeOrigin:c}}function k(){return{country_code_origin:String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable)}}g.parseProductNode=b;g.productModelToNode=a;g.scanComplianceInfoForMissingData=j}),98);
__d("WAWebWamEnumBusinessType",[],(function(a,b,c,d,e,f){a=Object.freeze({SMB:1,API_DC:2,API:3});f.BUSINESS_TYPE=a}),66);
__d("WAWebWamEnumGraphqlCatalogEndpoint",[],(function(a,b,c,d,e,f){a=Object.freeze({GET_CATALOG:1,GET_PRODUCT:2,GET_PRODUCT_LIST:3,GET_COLLECTIONS:4,GET_SINGLE_COLLECTION:5,GET_CATEGORIES:6,GET_VARIANTS:7,GET_PROMOTIONS:8,CREATE_COLLECTION:9});f.GRAPHQL_CATALOG_ENDPOINT=a}),66);
__d("WAWebWamEnumGraphqlRequestResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,FAILURE:2});f.GRAPHQL_REQUEST_RESULT=a}),66);
__d("WAWebGraphqlCatalogRequestWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBusinessType","WAWebWamEnumGraphqlCatalogEndpoint","WAWebWamEnumGraphqlRequestResult"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GraphqlCatalogRequest:[3206,{businessJid:[4,d("WAWebWamCodegenUtils").TYPES.STRING],businessType:[5,d("WAWebWamEnumBusinessType").BUSINESS_TYPE],graphqlCatalogEndpoint:[1,d("WAWebWamEnumGraphqlCatalogEndpoint").GRAPHQL_CATALOG_ENDPOINT],graphqlErrorCode:[3,d("WAWebWamCodegenUtils").TYPES.INTEGER],graphqlRequestResult:[2,d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT]},[1,1,1],"private",0]},{GraphqlCatalogRequest:[]});g.GraphqlCatalogRequestWamEvent=a}),98);
__d("WAWebCatalogEventLogger",["WAWebGraphqlCatalogRequestWamEvent","WAWebWamEnumGraphqlCatalogEndpoint","WAWebWamEnumGraphqlRequestResult"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(d("WAWebGraphqlCatalogRequestWamEvent").GraphqlCatalogRequestWamEvent)({graphqlCatalogEndpoint:a});return{success:function(){b.set({graphqlErrorCode:-1,graphqlRequestResult:d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT.SUCCESS}),b.commit()},failure:function(a){a=a[0];b.set({graphqlErrorCode:a.code,graphqlRequestResult:d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT.FAILURE});b.commit()}}};g.GRAPHQL_CATALOG_ENDPOINT=d("WAWebWamEnumGraphqlCatalogEndpoint").GRAPHQL_CATALOG_ENDPOINT;g.createCatalogEventLogger=a}),98);
__d("WAWebMaybeThrowCatalogErrors",["errorCode","WAWebBackendErrors"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.source.errors||[];b=b[0];switch(b==null?void 0:b.code){case 2498052:case 2498049:case 2498050:case 2498051:case 2498053:case 2498056:throw new(d("WAWebBackendErrors").ServerStatusCodeError)(400,a.message);case 2498048:throw new(d("WAWebBackendErrors").E451)();case 2498054:throw new(d("WAWebBackendErrors").ServerStatusCodeError)(421)}}g["default"]=a}),98);
__d("WAWebProductMessageListConstant",[],(function(a,b,c,d,e,f){a="DELETED";f.INVALID_PRODUCT_TOKEN=a}),66);
__d("WAWebQueryProductListCatalogJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetProductListResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_product_list",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetProductListResponseSuccessProductList",kind:"LinkedField",name:"product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"products",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},c,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebQueryProductListCatalogJobQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebQueryProductListCatalogJobQuery",selections:c},params:{id:"WAWebQueryProductListCatalogJobQuery",metadata:{},name:"WAWebQueryProductListCatalogJobQuery",operationKind:"query",text:null}}}();a.hash="5d3b936da25c831ffeb17f59668da9c4";e.exports=a}),null);
__d("filterNulls",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e!=null&&b.push(e)}return b}f["default"]=a}),66);
__d("WAWebQueryProductListCatalogJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebBizCatalogManagementFetchProductList","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebCatalogEventLogger","WAWebCommsWapMd","WAWebDefinePersistedJob","WAWebGraphQLServerError","WAWebMaybeThrowCatalogErrors","WAWebProductMessageListConstant","WAWebQueryProductListCatalogJobQuery.graphql","WAWebRelayClient","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err","filterNulls"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["GraphQL: Failed fetching xwa_product_catalog_get_product_list query. Falling back to IQ."]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("productListResponse",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("product_list");var b=[];a.forEachChildWithTag("product",function(a){var c=a.maybeChild("id");if(!c)return;var e=a.maybeChild("status");(e==null?void 0:e.contentString())===d("WAWebProductMessageListConstant").INVALID_PRODUCT_TOKEN?b.push({id:c.contentString(),status:d("WAWebProductMessageListConstant").INVALID_PRODUCT_TOKEN}):b.push(d("WAWebBizCatalogParseProduct").parseProductNode(a))});return b}),k=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.catalogWid,f=a.productIds,g=a.width,h=a.height;a=a.directConnectionEncryptedInfo;e=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"get",smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogGetProductList),xmlns:"w:biz:catalog",id:b.generateId()},b.wap("product_list",{jid:d("WAWebCommsWapMd").USER_JID(d("WAWebWidFactory").createWid(e))},f.map(function(a){return d("WAWap").wap("product",null,d("WAWap").wap("id",null,a))}).concat(c("filterNulls")([b.wap("width",null,g.toString()),b.wap("height",null,h.toString()),a?d("WAWap").wap("direct_connection_encrypted_info",null,a):null]))));f=(yield d("WADeprecatedSendIq").deprecatedSendIq(e,j));if(!f.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(f.errorCode);else return f.result});return function(b){return a.apply(this,arguments)}}(),l=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var e=a.catalogWid,f=a.productIds,g=a.width,j=a.height,l=a.directConnectionEncryptedInfo;e=(yield d("WAWebRelayClient").fetchQuery(h!==void 0?h:h=b("WAWebQueryProductListCatalogJobQuery.graphql"),{request:{product_list:{jid:e.toString(),products:f.map(function(a){return{id:a}}),width:String(g),height:String(j),direct_connection_encrypted_info:l}}},{eventLogger:d("WAWebCatalogEventLogger").createCatalogEventLogger(d("WAWebCatalogEventLogger").GRAPHQL_CATALOG_ENDPOINT.GET_PRODUCT_LIST)}));return c("WANullthrows")(e==null?void 0:(f=e.xwa_product_catalog_get_product_list)==null?void 0:(g=f.product_list)==null?void 0:g.products.map(d("WAWebBizParseProductGraphql").parseProductGraphQL))}catch(b){b instanceof d("WAWebGraphQLServerError").GraphQLServerError&&c("WAWebMaybeThrowCatalogErrors")(b);d("WALogger").WARN(i());return k(a)}});return function(b){return a.apply(this,arguments)}}(),m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.catalogWid,e=a.productIds,f=a.width,g=a.height;a=a.directConnectionEncryptedInfo;b=(yield d("WAWebBizCatalogManagementFetchProductList").fetchProductList({product_list:{jid:b.toString(),products:e.map(function(a){return{id:a}}),width:String(f),height:String(g),direct_connection_encrypted_info:a}}));if(b.type==="success")return b.productsResult;else b.type==="graphql-error"?c("WAWebMaybeThrowCatalogErrors")(b.error):b.type;throw c("err")("queryProductListGraphQLByOwner: error handling flow not implemented for "+JSON.stringify(b))});return function(b){return a.apply(this,arguments)}}();a=function(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeUser();return b!=null&&b.equals(d("WAWebWidFactory").createWid(a.catalogWid))?d("WAWebBizGatingUtils").graphQLForGetProductListEnabled()?m(a):k(a):d("WAWebBizGatingUtils").graphQLForCatalogM1Enabled()?l(a):k(a)};e=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendStanza",a).end();g.QueryProductListCatalog=e}),98);
__d("WAWebResendGroupMsgJob",["WALogger","WAWebDefinePersistedJob","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendGroupMsgJob: failed to resend message: ",""]);h=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("resendUserGroupMsg",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgId,c=a.msgType,e=a.msgRecordType,f=a.groupId,g=a.isDirect,i=a.oldList,j=a.phash,k=a.ackTime;a=a.serverAddressingMode;try{b=(yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("resendGroupMsg",{msgId:b,msgType:c,msgRecordType:e,groupId:f,isDirect:g,oldList:i,phash:j,ackTime:k,serverAddressingMode:a}));return b}catch(a){d("WALogger").ERROR(h(),a).tags("messaging").sendLogs("persisted-group-message-resend-failed")}});return function(b){return a.apply(this,arguments)}}()).end();g.resendGroupMsgJob=a}),98);
__d("WAWebResendUserMsgJob",["WALogger","WAWebDefinePersistedJob","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsgJob: failed to resend message: ",""]);h=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("resendUserMsg",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgId,c=a.msgType,e=a.msgRecordType,f=a.excludeList;a=a.ackTime;try{b=(yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("resendUserMsg",{msgId:b,msgType:c,msgRecordType:e,excludeList:f,ackTime:a}));return b}catch(a){d("WALogger").ERROR(h(),a).tags("messaging").sendLogs("persisted-message-resend-failed")}});return function(b){return a.apply(this,arguments)}}()).end();g.resendUserMsgJob=a}),98);
__d("WAWebSendRequestedKeyShareJob",["WALogger","WAWebDefinePersistedJob","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end sendRequestedKeyShare job"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: starting sendRequestedKeyShare job"]);i=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendRequestedKeyShare",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.keys,c=a.orphanKeys;a=a.peerDeviceId;d("WALogger").DEV(i());b={type:"missing_key",keys:b,orphanKeys:c,peerDeviceId:d("WAWebWidFactory").createWid(a)};yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("sendAppStateSyncKeyShare",{keyShare:b});d("WALogger").DEV(h())});return function(b){return a.apply(this,arguments)}}()).end();g.sendRequestedKeyShare=a}),98);
__d("WAWebSetAboutJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebDefinePersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("aboutResponse",function(a){a.assertAttr("type","result");return{id:a.attrInt("id")}});a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendStanza",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.content;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"set",xmlns:"status",id:b.generateId()},b.wap("status",null,a));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,h));return!a.success?{status:a.errorCode}:{status:200}});return function(b){return a.apply(this,arguments)}}()).end();g.setAbout=a}),98);
__d("WAWebMexEventWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MexEvent:[3782,{isMex:[1,a.TYPES.BOOLEAN],mexEventData:[2,a.TYPES.STRING],mexEventDurationT:[12,a.TYPES.TIMER],mexEventEndTime:[3,a.TYPES.INTEGER],mexEventEnvelopeResponseStatus:[13,a.TYPES.INTEGER],mexEventOperation:[7,a.TYPES.STRING],mexEventPayloadResponseStatus:[14,a.TYPES.INTEGER],mexEventRequestSize:[8,a.TYPES.INTEGER],mexEventResponseSize:[9,a.TYPES.INTEGER],mexEventRetries:[10,a.TYPES.INTEGER],mexEventStartTime:[11,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MexEvent:[]});g.MexEventWamEvent=b}),98);
__d("WAWebMexExperiment",["WAWebABProps","WAWebMexEventWamEvent"],(function(a,b,c,d,e,f,g){a=function(){function a(b){this.$1=!1,this.$2="not provided",this.$3=-1,this.$4=-1,this.$2=b,this.$1=a.isGraphQLenabled()}var b=a.prototype;b.toUseGraphQL=function(){return this.$1};b.start=function(){this.$3=Date.now()};b.stop=function(){this.$4=Date.now()};b.logEvent=function(b){var c=b.envelopeResponseStatus;b=b.payloadResponseStatus;if(!a.isExperimentEnabled())return;new(d("WAWebMexEventWamEvent").MexEventWamEvent)({isMex:this.$1,mexEventOperation:this.$2,mexEventStartTime:this.$3,mexEventEndTime:this.$4,mexEventPayloadResponseStatus:b,mexEventEnvelopeResponseStatus:c,mexEventRequestSize:1}).commit()};a.isExperimentEnabled=function(){return d("WAWebABProps").getABPropConfigValue("mex_phase3_enabled")};a.isGraphQLenabled=function(){return a.isExperimentEnabled()&&a.isGraphQLFlagSet()};a.isGraphQLFlagSet=function(){return a.isFlagSet(1)};a.isFlagSet=function(a){var b=d("WAWebABProps").getABPropConfigValue("mex_phase3_status_flags");return(b&a)===a};return a}();g.GraphQlPerfTracker=a}),98);
__d("WAWebMexUpdateTextStatusJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"text_status_input",variableName:"input"}],concreteType:"XWA2TextStatusMutationResponse",kind:"LinkedField",name:"xwa2_update_text_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"result",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexUpdateTextStatusJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexUpdateTextStatusJobMutation",selections:b},params:{id:"6995196977195668",metadata:{},name:"WAWebMexUpdateTextStatusJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebTextStatusParseUtils",["WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h=0;function a(a){var b;return{id:d("WAWebWidFactory").createWid(a.jid),textStatusString:a.text,textStatusEmoji:(b=a.emoji)==null?void 0:b.content,textStatusEphemeralDuration:a.ephemeral_duration_sec,textStatusLastUpdateTime:a.last_update_time!=null?Number(a.last_update_time):void 0}}function b(a){return{jid:a.id.toJid(),last_update_time:(a=a.textStatusLastUpdateTime)==null?void 0:a.toString()}}function c(a){var b=a.textStatusString;a.textStatusString===""&&(b=null);var c=a.textStatusEphemeralDuration;c==null&&(c=h);b==null&&a.textStatusEmoji==null&&c!==h&&(c=h);var d;a.textStatusEmoji!=null&&(d={content:a.textStatusEmoji});return{text:b,emoji:d,ephemeral_duration_sec:c}}g.parseTextStatusServerResponse=a;g.createTextStatusObjectForGetRequest=b;g.createTextStatusObjectForUpdateRequest=c}),98);
__d("WAWebMexUpdateTextStatusJob",["WALogger","WAWebMexClient","WAWebMexUpdateTextStatusJobMutation.graphql","WAWebTextStatusParseUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][TEXTSTATUS] Updated text status via mex"]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=h!==void 0?h:h=b("WAWebMexUpdateTextStatusJobMutation.graphql");a=d("WAWebTextStatusParseUtils").createTextStatusObjectForUpdateRequest({textStatusString:a,textStatusEmoji:c,textStatusEphemeralDuration:e});c={input:a};e=(yield d("WAWebMexClient").fetchQuery(f,c));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:e});return e});return j.apply(this,arguments)}g.mexUpdateTextStatus=a}),98);
__d("WAWebUpdateTextStatusJob",["WALogger","WAWebMexExperiment","WAWebMexUpdateTextStatusJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateTextStatus:",""]);h=function(){return a};return a}function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=new(d("WAWebMexExperiment").GraphQlPerfTracker)("update-text-status");f.start();f.toUseGraphQL();b=(yield d("WAWebMexUpdateTextStatusJob").mexUpdateTextStatus(b,c,e));e=(c=b.xwa2_update_text_status)==null?void 0:c.result;f.stop();d("WALogger").LOG(h(),a.toString()).devConsole(b);return{id:a,result:e}});return i.apply(this,arguments)}g.updateTextStatus=a}),98);
__d("WAWebSetTextStatusJob",["WAWebDefinePersistedJob","WAWebUpdateTextStatusJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendMex",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.id,c=a.text,e=a.emoji;a=a.ephemeralDurationSeconds;b=(yield d("WAWebUpdateTextStatusJob").updateTextStatus(b,c,e,a));return b});return function(b){return a.apply(this,arguments)}}()).end();g.setTextStatus=a}),98);
__d("WAWebVerifyPostcodeJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebCommsWapMd","WAWebDefinePersistedJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("productResponse",function(a){a.assertTag("iq");a.assertFromServer();var b=a.child("result_code");a=a.maybeChild("encrypted_location_name");a=a==null?void 0:a.contentString();b=b.contentString();return{resultCode:b,encryptedLocationName:a}});a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("sendStanza",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.businessJid;a=a.directConnectionEncryptedInfo;e=(b=d("WAWap")).wap("iq",{id:b.generateId(),xmlns:"w:biz:catalog",type:"get",to:b.S_WHATSAPP_NET,smax_id:b.SMAX_ID(c("WAWapDeprecatedSmaxID").CatalogVerifyPostcode)},b.wap("verify_postcode",{biz_jid:d("WAWebCommsWapMd").USER_JID(d("WAWebWidFactory").createWid(e))},b.wap("direct_connection_encrypted_info",null,a)));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(e,h));if(!b.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode);else return b.result});return function(b){return a.apply(this,arguments)}}()).end();g.VerifyPostcode=a}),98);
__d("WAWebPersistedJob",["Promise","WAWebDeleteAddonsJob","WAWebDeleteReactionsJob","WAWebJobDismissQuickPromotion","WAWebJobImpressionOnQuickPromotion","WAWebJobPrimaryActionClickInQuickPromotion","WAWebJobUserExposureToQuickPromotion","WAWebQueryAndUpdateGroupsMetadataByJidsJob","WAWebQueryGetPublicKeyJob","WAWebQueryGetSignedUserInfoJob","WAWebQueryProductListCatalogJob","WAWebResendGroupMsgJob","WAWebResendUserMsgJob","WAWebRotateKeyJob","WAWebSendRequestedKeyShareJob","WAWebSetAboutJob","WAWebSetTextStatusJob","WAWebVerifyPostcodeJob"],(function(a,b,c,d,e,f,g){var h;function a(a){i(a,{rotateKey:function(){return(h||(h=b("Promise"))).resolve(d("WAWebRotateKeyJob").rotateKey)},setAbout:function(){return(h||(h=b("Promise"))).resolve(d("WAWebSetAboutJob").setAbout)},setTextStatus:function(){return(h||(h=b("Promise"))).resolve(d("WAWebSetTextStatusJob").setTextStatus)},queryProductList:function(){return(h||(h=b("Promise"))).resolve(d("WAWebQueryProductListCatalogJob").QueryProductListCatalog)},getPublicKey:function(){return(h||(h=b("Promise"))).resolve(d("WAWebQueryGetPublicKeyJob").QueryGetPublicKey)},getSignedUserInfo:function(){return(h||(h=b("Promise"))).resolve(d("WAWebQueryGetSignedUserInfoJob").QueryGetSignedUserInfo)},verifyPostcode:function(){return(h||(h=b("Promise"))).resolve(d("WAWebVerifyPostcodeJob").VerifyPostcode)},deleteReactions:function(){return(h||(h=b("Promise"))).resolve(d("WAWebDeleteReactionsJob").deleteReactions)},deleteReactionsV2:function(){return(h||(h=b("Promise"))).resolve(d("WAWebDeleteAddonsJob").deleteReactionsV2)},deleteAddOns:function(){return(h||(h=b("Promise"))).resolve(d("WAWebDeleteAddonsJob").deleteAddOns)},sendRequestedKeyShare:function(){return(h||(h=b("Promise"))).resolve(d("WAWebSendRequestedKeyShareJob").sendRequestedKeyShare)},dismissQuickPromotion:function(){return(h||(h=b("Promise"))).resolve(d("WAWebJobDismissQuickPromotion").dismissQuickPromotion)},primaryActionClickInQuickPromotion:function(){return(h||(h=b("Promise"))).resolve(d("WAWebJobPrimaryActionClickInQuickPromotion").primaryActionClickInQuickPromotion)},impressionOnQuickPromotion:function(){return(h||(h=b("Promise"))).resolve(d("WAWebJobImpressionOnQuickPromotion").impressionOnQuickPromotion)},userExposureToQuickPromotion:function(){return(h||(h=b("Promise"))).resolve(d("WAWebJobUserExposureToQuickPromotion").userExposureToQuickPromotion)},queryAndUpdateGroupsMetadataByJids:function(){return(h||(h=b("Promise"))).resolve(d("WAWebQueryAndUpdateGroupsMetadataByJidsJob").queryAndUpdateGroupsMetadataByJidsJob)},resendUserMsg:function(){return(h||(h=b("Promise"))).resolve(d("WAWebResendUserMsgJob").resendUserMsgJob)},resendGroupMsg:function(){return(h||(h=b("Promise"))).resolve(d("WAWebResendGroupMsgJob").resendGroupMsgJob)}})}function i(a,b){Object.keys(b).forEach(function(c){Object.prototype.hasOwnProperty.call(b,c)&&a.addPersistedJobImplementation(c,b[c])})}g["default"]=a}),98);
__d("WAWebJobsStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="jobs-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56369);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[jobs-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebJobsStorageVersions",["WAWebJobsStorageUtils"],(function(a,b,c,d,e,f,g){c=1;function a(){return d("WAWebJobsStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebJobsStorageUtils").getStorage().versions.version(1)}g.versionToRollout=c;g.jobsCreateV1Table=a;g.jobsCreateV2Table=b}),98);
__d("WAWebSchemaJobs",["WAWebJobsStorageUtils","WAWebJobsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey,j=c.addIndex,k=c.removeColumn;function a(){d("WAWebJobsStorageUtils").getStorage().add("jobs-store").version(d("WAWebJobsStorageVersions").jobsCreateV1Table(),[i("jobId"),h("type"),h("uniqKey"),j("uniqKey"),h("original"),h("current"),h("step"),h("startTime"),h("endTime"),h("stepHardStartCountAfterTimeout"),h("stepFirstStartTime"),h("waitUntil"),h("backedOffCount"),h("version")]).version(d("WAWebJobsStorageVersions").jobsCreateV2Table(),[h("stepUnexpectedErrorCount"),k("endTime")]).view(function(a){return{jobId:a.jobId,type:a.type,uniqKey:a.uniqKey,original:a.original,current:a.current,step:a.step,startTime:a.startTime,stepHardStartCountAfterTimeout:a.stepHardStartCountAfterTimeout,stepFirstStartTime:a.stepFirstStartTime,waitUntil:a.waitUntil,backedOffCount:a.backedOffCount,version:a.version,stepUnexpectedErrorCount:a.stepUnexpectedErrorCount}})}function b(){return d("WAWebJobsStorageUtils").getStorage().table("jobs-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebJobsStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebJobsStorageUtils","WAWebSchemaJobs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebJobsStorageUtils").createStorage(),d("WAWebSchemaJobs").addTable(),i=d("WAWebJobsStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize jobs storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebJobsStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebJobsStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}g.initialize=a;g.destroy=e}),98);
__d("WAWebPersistedJobManager",["Promise","WAHex","WAPersistedJobManager","WATimeUtils","WAWebJobsStorage","WAWebPersistedJob","WAWebSchemaJobs","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebJobsStorage").initialize();var a=d("WAWebSchemaJobs").getTable();i=new(d("WAPersistedJobManager").PersistedJobManager)({accessors:k(),unfinishedJobEntries:a.all(),isRestartAfterCrash:!1,listeners:{onJobStarted:function(){},onJobFinished:function(){return null}},deprecatedJobs:{}});c("WAWebPersistedJob")(i)});return j.apply(this,arguments)}function k(){return{deletePersistedJob:function(a){var b=d("WAWebSchemaJobs").getTable();return b.remove(a)},updatePersistedJob:function(a){var b=d("WAWebSchemaJobs").getTable();return b.createOrReplace(a)},readPersistedJob:function(a){var b=d("WAWebSchemaJobs").getTable();return b.get(a)},loadAllJobs:function(){var a=d("WAWebSchemaJobs").getTable();return a.all()},maybeCreateJob:l}}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c,e=d("WAWebSchemaJobs").getTable();c=JSON.stringify([a.type,(c=a.uniqKey)!=null?c:d("WAHex").randomHex(32)]);c={type:a.type,uniqKey:c,startTime:d("WATimeUtils").unixTime(),version:(c=a.version)!=null?c:1,original:a.args,current:a.args,step:d("WAPersistedJobManager").UNSTARTED_JOB,waitUntil:null,stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,backedOffCount:0};if(a.uniqKey==null)return e.createOrReplace(c).then(function(a){return{id:a,newlyCreated:!0}});a=(yield e.equals(["uniqKey"],[a.uniqKey]));if(a.length===0)return e.createOrReplace(c).then(function(a){return{id:a,newlyCreated:!0}});var f=[],g=null;for(a of a)a.step!==d("WAPersistedJobManager").FINISHED_JOB?g=a:f.push(e.remove(a.jobId));yield (h||(h=b("Promise"))).all(f);return g!=null?{id:g.jobId,newlyCreated:!1}:e.createOrReplace(c).then(function(a){return{id:a,newlyCreated:!0}})});return m.apply(this,arguments)}function e(){if(i==null)throw c("err")("jobs manager has not been initialized");return i}g.startWebPersistedJobManager=a;g.maybeCreateJob=l;g.getJobManager=e}),98);
__d("WAWebDBDeleteReactions",["WAWebModelStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c=[];return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var d=(yield b.equals(["parentMsgKey"],a));d.forEach(function(a){return c.push([a.parentMsgKey,a.senderUserJid])});return b.bulkRemove(c)});return function(a){return d.apply(this,arguments)}}())}function c(a){var c=[];return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var d=(yield b.anyOf(["parentMsgKey"],a));d.forEach(function(a){return c.push([a.parentMsgKey,a.senderUserJid])});yield b.bulkRemove(c);return d.map(function(a){return a.msgKey})});return function(a){return d.apply(this,arguments)}}())}function e(a){return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];yield b.bulkRemove(a)});return function(a){return c.apply(this,arguments)}}())}g.deleteReactionsByParentMessageKey=a;g.deleteReactionsByParentMessageKeys=c;g.deleteReactionsByRecords=e}),98);
__d("WAWebDeleteAddonsJob",["Promise","WALogger","WAWebAddonDeleteMsgs","WAWebAddonGatingUtils","WAWebDBDeleteReactions","WAWebDBGetReactions","WAWebDBMessageDelete","WAWebDBPollsDeleteVotes","WAWebDefinePersistedJob","WAWebDeleteLastAddOnsPreview","WAWebMsgKey","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deletePollVotes job finished for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deletePollVotes job started for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deleteReactionsV2 finished"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Reactions table"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Msg table"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deleteReactionsV2 finished, no reactionsMsgKeys"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deleteReactionsV2 persisted job started for ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteAddons job finished for ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteAddons job started for ",""]);q=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("deleteAddOns",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.chatId;a=a.parentMsgKeys;d("WALogger").LOG(q(),c);var e=[d("WAWebAddonDeleteMsgs").deleteAddonMsgsByParentKeys({parentMsgKeys:a})];d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.REACTION)||e.push(r({chatId:c,parentMsgKeys:a}));d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.POLL_UPDATE)||e.push(t({chatId:c,parentMsgKeys:a}));a=(yield (h||(h=b("Promise"))).allSettled(e));d("WALogger").LOG(p(),c);for(e of a)if(e.status==="rejected")throw e.reason});return function(b){return a.apply(this,arguments)}}()).end();e=d("WAWebDefinePersistedJob").defineWebPersistedJob().finalStep("deleteReactionsV2",function(a){var b=a.chatId;a=a.parentMsgKeys;return r({chatId:b,parentMsgKeys:a})}).end();function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatId;a=a.parentMsgKeys;d("WALogger").LOG(o(),b);b=(yield d("WAWebDBGetReactions").getAllReactionsFromParentMsgs(a));var e=b.map(function(a){return a.msgKey});if(e.length===0){d("WALogger").LOG(n());return}var f=[];e.forEach(function(a){c("WAWebMsgKey").fromString(a).fromMe&&f.push(a)});f.length>0&&(d("WALogger").DEV(m()),yield d("WAWebDBMessageDelete").removeMessagesFromHistory(f));e=b.map(function(a){return[a.parentMsgKey,a.senderUserJid]});d("WALogger").DEV(l());yield d("WAWebDBDeleteReactions").deleteReactionsByRecords(e);yield d("WAWebDeleteLastAddOnsPreview").deleteLastAddOnsPreview(a);d("WALogger").LOG(k())});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatId;a=a.parentMsgKeys;d("WALogger").LOG(j(),b);yield d("WAWebDBPollsDeleteVotes").deleteVotesByParentMsgKeys(a);d("WALogger").LOG(i(),b)});return u.apply(this,arguments)}g.deleteAddOns=a;g.deleteReactionsV2=e}),98);
__d("WAWebMarkAddOnsAsReadJob",["Promise","WAJobOrchestratorTypes","WAWebAddOnsMarkAddOnsAsReadDb","WAWebAddonMarkAsReadUtils","WAWebBackendApi","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("markAddOnsAsRead",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebAddOnsMarkAddOnsAsReadDb").markAddOnsAsReadDb(a.updates),d("WAWebBackendApi").frontendFireAndForget("markAddOnsAsReadUi",{updatedMsgKeys:a.updates})});return function(b){return a.apply(this,arguments)}}(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted({updates:a})});return i.apply(this,arguments)}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("markAddOnsAsReadUsingAddonInfra",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebAddonMarkAsReadUtils").processMarkAsRead(a.addons)});return function(b){return a.apply(this,arguments)}}(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted({addons:a})});return j.apply(this,arguments)}function e(a){return a.length===0?(h||(h=b("Promise"))).resolve({updatedAddOns:new Map(),updatedOrphans:[]}):d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("markUnclassifiedAddOnsAsRead",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebAddOnsMarkAddOnsAsReadDb").markUnclassifiedAddOnsAsReadDb(a.msgKeys));d("WAWebBackendApi").frontendFireAndForget("markAddOnsAsReadUi",{updatedMsgKeys:a.updatedAddOns});return a});return function(b){return a.apply(this,arguments)}}(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({msgKeys:a})}g.markAddOnsAsReadJob=a;g.markAddOnsAsReadUsingAddonInfraJob=c;g.markUnclassifiedAddOnsAsReadJob=e}),98);
__d("WAWebGroupParticipantsJob",["WAJobOrchestratorTypes","WAWebGroupsParticipantsApi","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateParticipants",function(a){return d("WAWebGroupsParticipantsApi").updateParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function b(a,b,c,e){a={group:a,participants:b,isOffline:c,reason:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("addParticipants",function(a){return d("WAWebGroupsParticipantsApi").addParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function c(a,b,c,e,f,g,h){a={group:a,participants:b,timestamp:c,author:e,reason:f,groupMetadata:g,isOffline:h};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("removeParticipants",function(a){return d("WAWebGroupsParticipantsApi").removeParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function e(a,b,c,e){a={group:a,participants:b,groupMetadata:c,isOffline:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("demoteParticipants",function(a){return d("WAWebGroupsParticipantsApi").demoteParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function f(a,b,c,e){a={group:a,participants:b,groupMetadata:c,isOffline:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("promoteParticipants",function(a){return d("WAWebGroupsParticipantsApi").promoteParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function h(a,b){a={group:a,newSuperAdmin:b};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("setGroupSuperAdmin",function(a){return d("WAWebGroupsParticipantsApi").setGroupSuperAdmin(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function i(a,b,c){a={group:a,participants:b,isOffline:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("promoteCommunityParticipants",function(a){return d("WAWebGroupsParticipantsApi").promoteCommmunityParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function j(a,b,c){a={group:a,participants:b,isOffline:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("demoteCommunityParticipants",function(a){return d("WAWebGroupsParticipantsApi").demoteCommmunityParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}g.updateParticipantsJob=a;g.addParticipantsJob=b;g.removeParticipantsJob=c;g.demoteParticipantsJob=e;g.promoteParticipantsJob=f;g.setGroupSuperAdminJob=h;g.promoteCommunityParticipantsJob=i;g.demoteCommunityParticipantsJob=j}),98);
__d("WAWebGroupApiConst",[],(function(a,b,c,d,e,f){a={superadmin:"superadmin",admin:"admin",participant:"participant"};f.GROUP_PARTICIPANT_TYPES=a}),66);
__d("WAWebGroupsQueryApi",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WATimeUtils","WAWap","WAWebBackendErrors","WAWebCommsWapMd","WAWebGroupApiConst","WAWebJidToWid","WAWebSchemaGroupMetadata","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroup failed: ",":",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseBatchGroupInfoSmax: unexpected truncated group info received from server when querying dirty groups metadata"]);i=function(){return a};return a}function j(a){if(!a)return null;var b=a.bodyElementValue,c=a.id,e=a.participant;a=a.t;return{desc:b,descId:c,descOwner:e!=null?d("WAWebJidToWid").userJidToUserWid(e):void 0,descTime:d("WATimeUtils").castToUnixTime(a)}}function k(a){if(!a)return null;a=a.expiration;return{ephemeralDuration:a}}function l(a){if(a==null)return null;var b=a.expiration;a=a.type;return{growthLockExpiration:b,growthLockType:a}}function m(a){return a==null?null:{parentGroup:d("WAWebJidToWid").groupJidToWid(a.jid),parentGroupSubject:a.subject}}function n(a){return a.map(function(a){if(a.groupInfoParticipantMixins.name==="GroupInfoParticipantAdmin"){var b=a.groupInfoParticipantMixins.value,c=b.type;b=b.groupInfoParticipantAdminMixins;var e=c==="admin"||c==="superadmin";c=c==="superadmin";if(b.name==="ParticipantWithJid")return{isAdmin:e,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(b.value.jid),displayName:null,lid:null,phoneNumber:null};else if(b.name==="ParticipantWithJidAndPn")return{isAdmin:e,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(b.value.jid),displayName:null,lid:null,phoneNumber:d("WAWebJidToWid").userJidToUserWid(b.value.phoneNumber)};else if(b.name==="ParticipantWithJidAndLid")return{isAdmin:e,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(b.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(b.value.lid),displayName:null};b.name;return{isAdmin:e,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(b.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(b.value.lid),displayName:b.value.displayName}}a.groupInfoParticipantMixins.name;e=a.groupInfoParticipantMixins.value.participantMixins;if(e.name==="ParticipantWithJid")return{isAdmin:!1,isSuperAdmin:!1,id:d("WAWebJidToWid").userJidToUserWid(e.value.jid),displayName:null,lid:null};else if(e.name==="ParticipantWithJidAndPn")return{isAdmin:!1,isSuperAdmin:!1,id:d("WAWebJidToWid").userJidToUserWid(e.value.jid),displayName:null,lid:null,phoneNumber:d("WAWebJidToWid").userJidToUserWid(e.value.phoneNumber)};else if(e.name==="ParticipantWithJidAndLid")return{isAdmin:!1,isSuperAdmin:!1,id:d("WAWebJidToWid").userJidToUserWid(e.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(e.value.lid),displayName:null};else if(e.name==="ParticipantWithJidContainingLidAndDisplayName")return{isAdmin:!1,isSuperAdmin:!1,id:d("WAWebJidToWid").userJidToUserWid(e.value.jid),displayName:e.value.displayName,lid:null,phoneNumber:null};e.name;return{isAdmin:!1,isSuperAdmin:!1,id:d("WAWebJidToWid").userJidToUserWid(e.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(e.value.lid),displayName:e.value.displayName,phoneNumber:null}})}function a(a,b){var c=[];b.forEach(function(b){b=b.groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup;a==="per_group_dirty_recovery"&&b.name==="TruncatedGroupInfo"&&d("WALogger").WARN(i()).sendLogs("unexpected-truncated-group-info-for-dirty-group-request");(b.name==="GroupInfo"||b.name==="TruncatedGroupInfo")&&c.push(o(b.value))});return c}function o(a){var b,e=a.groupAddressingModeMixin,f=a.creator,g=a.creation,h=a.id,i=a.hasLocked,o=a.hasAnnouncement,p=a.hasNoFrequentlyForwarded,q=a.hasSupport,r=a.hasSuspended,s=a.parent,t=a.hasCapi,u=a.hasDefaultSubGroup,v=a.hasGeneralChat,w=a.hasIncognito,x=a.membershipApprovalMode,y=a.membershipApprovalRequest,z=a.hasAllowAdminReports,A=a.ephemeral,B=a.growthLocked,C=a.linkedParent,D=a.description,E=a.descriptionGroupInfoDescriptionMixin,F=a.namedSubjectOrUnnamedSubjectFallbackMixinGroup,G=a.participant,H=a.sT,I=a.size,J=a.groupMemberAddModeMixin,K=a.hasAllowNonAdminSubGroupCreation;a=a.hasAutoAddDisabled;if(h==null)throw c("err")("parseGroupSmax: invalid group id");F=F==null?void 0:F.value.subject;if(F==null)throw c("err")("parseGroupSmax: invalid group subject");G=G!=null?n(G):[];b=(b=x==null?void 0:(b=x.membershipApprovalGroupJoinModeEnabledMixin)==null?void 0:b.state)!=null?b:x==null?void 0:x.state;J=d("WAWebSchemaGroupMetadata").MemberAddMode.cast(J==null?void 0:(x=J.memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup)==null?void 0:x.value.elementValue);D=(x=D==null?void 0:D.groupInfoDescriptionMixin)!=null?x:E;E=babelHelpers["extends"]({id:d("WAWebWidFactory").createWid(h+"@g.us"),owner:f!=null?d("WAWebJidToWid").userJidToUserWid(f):void 0,creation:g,restrict:Boolean(i),announce:Boolean(o),noFrequentlyForwarded:Boolean(p),support:q,suspended:r,isParentGroup:s!=null,numSubgroups:s==null?void 0:s.numSubGroups,participants:G,isParentGroupClosed:(s==null?void 0:(x=s.parentGroupDefaultMembershipApprovalModeMixin)==null?void 0:x.defaultMembershipApprovalMode)==="request_required",defaultSubgroup:u,generalSubgroup:v,incognito:w,membershipApprovalMode:b==="on",reportToAdminMode:z,membershipApprovalRequest:y,isLidAddressingMode:(e==null?void 0:e.addressingMode)==="lid",memberAddMode:J,allowNonAdminSubGroupCreation:K},D&&j(D),A&&k(A),l(B),m(C),{subject:F,subjectTime:H,size:I,generalChatAutoAddDisabled:Boolean(a),hasCapi:t});return E}function p(a){if(a.hasChild("description")){a=a.child("description");if(a.hasChild("body")){var b=a.child("body");if(b.hasContent()){b={desc:b.contentString(),descId:a.attrString("id")};a.hasAttr("participant")&&(b.descOwner=d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("participant")));a.hasAttr("t")&&(b.descTime=a.attrTime("t"));return b}}}return null}function q(a){var b=a.attrString("subject");b={subject:b};a.hasAttr("s_o")&&(b.subjectOwner=d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("s_o")));a.hasAttr("s_o_pn")&&(b.subjectOwnerPn=d("WAWebJidToWid").userJidToUserWid(a.attrPhoneUserJid("s_o_pn")));a.hasAttr("s_t")&&(b.subjectTime=a.attrTime("s_t"));return b}function r(a){if(a.hasChild("ephemeral")){a=a.child("ephemeral");if(a.hasAttr("expiration"))return{ephemeralDuration:a.attrInt("expiration")}}return null}function s(a){a=a.maybeChild("growth_locked");var b=a==null?void 0:a.maybeAttrInt("expiration");a=a==null?void 0:a.maybeAttrString("type");return b==null||a==null?null:{growthLockExpiration:b,growthLockType:a}}function t(a){a=a.maybeChild("linked_parent");var b=a==null?void 0:a.maybeAttrGroupJid("jid");return b==null?null:{parentGroup:d("WAWebJidToWid").groupJidToWid(b),parentGroupSubject:a==null?void 0:a.maybeAttrString("subject")}}function u(a){var b=p(a),e=q(a),f=r(a),g=s(a),h=t(a),i,j;try{i=d("WAWebWidFactory").createWid(a.attrString("id")+"@g.us")}catch(a){}if(i==null)throw c("err")("createGroupReplyParser: invalid group id");a.hasChild("member_add_mode")&&(j=d("WAWebSchemaGroupMetadata").MemberAddMode.cast(a.child("member_add_mode").contentString()));var k=a.mapChildrenWithTag("participant",function(a){var b=a.attrEnumOrDefault("type",d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES,d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.participant),c=a.maybeAttrLidUserJid("lid"),e=a.maybeAttrPhoneUserJid("phone_number");return{displayName:a.maybeAttrString("display_name"),id:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid")),isSuperAdmin:b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.admin||b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.superadmin,lid:c!=null?d("WAWebJidToWid").userJidToUserWid(c):null,phoneNumber:e!=null?d("WAWebJidToWid").userJidToUserWid(e):null}});k=babelHelpers["extends"]({id:i,owner:a.hasAttr("creator")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("creator")):void 0,creatorPn:a.hasAttr("creator_pn")?d("WAWebJidToWid").userJidToUserWid(a.attrPhoneUserJid("creator_pn")):void 0,creation:a.attrTime("creation"),restrict:a.hasChild("locked"),announce:a.hasChild("announcement"),noFrequentlyForwarded:a.hasChild("no_frequently_forwarded"),participants:k,support:a.hasChild("support"),size:a.hasAttr("size")?a.attrInt("size"):void 0,suspended:a.hasChild("suspended"),isParentGroup:(k=a.hasChild("parent"))!=null?k:void 0,isParentGroupClosed:((k=a.maybeChild("parent"))==null?void 0:k.maybeAttrString("default_membership_approval_mode"))==="request_required",numSubgroups:(k=(k=a.maybeChild("parent"))==null?void 0:k.maybeAttrInt("num_sub_groups"))!=null?k:0,defaultSubgroup:(k=a.hasChild("default_sub_group"))!=null?k:void 0,generalSubgroup:(k=a.hasChild("general_chat"))!=null?k:void 0,generalChatAutoAddDisabled:a.hasChild("auto_add_disabled"),incognito:a.hasChild("incognito"),isLidAddressingMode:a.maybeAttrString("addressing_mode")?a.attrString("addressing_mode")==="lid":!1,membershipApprovalMode:(a==null?void 0:(k=a.maybeChild("membership_approval_mode"))==null?void 0:(k=k.maybeChild("group_join"))==null?void 0:k.maybeAttrString("state"))==="on",memberAddMode:j,membershipApprovalRequest:a.hasChild("membership_approval_request"),reportToAdminMode:a.hasChild("allow_admin_reports"),allowNonAdminSubGroupCreation:a.hasChild("allow_non_admin_sub_group_creation"),hasCapi:a.hasChild("capi"),hiddenSubgroup:a.hasChild("hidden_group")},b,f,g,e,h);a=k.defaultSubgroup&&k.incognito;b=k.isLidAddressingMode;a===!1&&b===!1&&(k.participants=k.participants.filter(function(a){a=a.id;return!a.isLid()}));return k}var v=new(c("WADeprecatedWapParser"))("queryGroupParser",function(a){return!a.hasChild("group")?{phashMatch:!0}:u(a.child("group"))});function e(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.groupWid,c=a.request;a=a.phash;b=d("WAWap").wap("iq",{to:d("WAWebCommsWapMd").GROUP_JID(b),type:"get",xmlns:"w:g2",id:d("WAWap").generateId()},d("WAWap").wap("query",{request:c||d("WAWap").DROP_ATTR,phash:d("WAWap").MAYBE_CUSTOM_STRING(a)}));c=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,v));if(!c.success){d("WALogger").LOG(h(),c.errorCode,c.errorType);throw new(d("WAWebBackendErrors").ServerStatusCodeError)(c.errorCode,c.errorText)}return c.result});return w.apply(this,arguments)}g.parseBatchGroupInfoSmax=a;g.parseGroupSmax=o;g.extractDescription=p;g.extractLinkedParent=t;g.queryGroup=e}),98);
__d("WAWebMexFetchGroupInfoJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"query_context"}],b=[{fields:[{kind:"Variable",name:"group_id",variableName:"id"},{kind:"Variable",name:"query_context",variableName:"query_context"}],kind:"ObjectValue",name:"group_input"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"announcement_version",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"lid",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"pn",storageKey:null},h={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[c,f,g],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},k={alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:[h,e,j],storageKey:null};j={alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[c,e,h,j],storageKey:null};f={alias:null,args:null,concreteType:"XWA2GroupParticipantsConnection",kind:"LinkedField",name:"participants",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2GroupParticipantEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"node",plural:!1,selections:[c,f,g,{alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participants_phash_match",storageKey:null}],storageKey:null};g={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null};var l={alias:null,args:null,kind:"ScalarField",name:"ack",storageKey:null},m={alias:null,args:null,concreteType:"XWA2GroupEphemeralSetting",kind:"LinkedField",name:"ephemeral",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_sec",storageKey:null}],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"locked",storageKey:null},o={alias:null,args:null,concreteType:"XWA2GroupGrowthLocked",kind:"LinkedField",name:"growth_locked2",plural:!1,selections:[n],storageKey:null},p={alias:null,args:null,concreteType:"XWA2GroupLIDMigrationState",kind:"LinkedField",name:"lid_migration_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"addressing_mode",storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"member_add_mode",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"parent_group_jid",storageKey:null},s={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunityDefaultSubGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[l,m,o,p,q,r],storageKey:null}],type:"XWA2CommunityDefaultSubGroup",abstractKey:null},t={alias:null,args:null,kind:"ScalarField",name:"allow_admin_reports",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"announcement",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"membership_approval_mode_enabled",storageKey:null};r={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"membership_approval_request",storageKey:null},{alias:null,args:null,concreteType:"XWA2CommunitySubGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[l,t,u,m,o,p,n,q,v,r,{alias:null,args:null,kind:"ScalarField",name:"general_chat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"auto_add_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hidden_group",storageKey:null}],storageKey:null}],type:"XWA2CommunitySubGroup",abstractKey:null};var w={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"num_sub_groups",storageKey:null},{alias:null,args:null,concreteType:"XWA2CommunityProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_non_admin_sub_group_creation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed_by_membership_approval_mode",storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null};l={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2GroupRegularGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[l,t,u,{alias:null,args:null,kind:"ScalarField",name:"capi",storageKey:null},m,o,p,{alias:null,args:null,kind:"ScalarField",name:"internal",storageKey:null},n,q,v,{alias:null,args:null,kind:"ScalarField",name:"support",storageKey:null}],storageKey:null}],type:"XWA2GroupRegularGroup",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[c,d,e,h,i,k,j,f,g,s,r,w,l],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,d,e,h,i,k,j,f,g,s,r,w,l],storageKey:null}]},params:{id:"6519737481484009",metadata:{},name:"WAWebMexFetchGroupInfoJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexGetTypename",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==null?void 0:a.__typename}f.getTypename=a}),66);
__d("WAWebMexGroupParseUtils",["WALogger","WAWebBackendErrors","WAWebMexGetTypename","WAWebSchemaGroupMetadata","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: XML and MEX shadow participant mismatch: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: XML and MEX shadow participant size mismatch, XML:"," MEX:",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: MEX shadow mode participants is null while XML is non-null- ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: XML shadow mode participants is null while MEX is non-null- ",""]);k=function(){return a};return a}var l="XWA2CommunityGroup",m="XWA2CommunityDefaultSubGroup",n="XWA2CommunitySubGroup",o="LID";function a(a){var b,c,e,f,g,h,i,j,k,s,t,u,v,w,x,y,z,A,B,C;a=a.xwa2_group_query_by_id;if(a==null)return null;var D=a.id,E=a.creation_time,F=a.creator;b=(b=a.creator)==null?void 0:b.pn;var G=a.description;c=(c=a.participants)==null?void 0:c.edges;e=(e=a.properties)==null?void 0:e.allow_admin_reports;f=(f=a.properties)==null?void 0:f.allow_non_admin_sub_group_creation;g=(g=a.properties)==null?void 0:g.announcement;h=(h=a.properties)==null?void 0:(h=h.ephemeral)==null?void 0:h.expiration_time_in_sec;i=((i=a.properties)==null?void 0:(i=i.lid_migration_state)==null?void 0:i.addressing_mode)===o;j=(j=a.properties)==null?void 0:j.locked;k=(k=a.properties)==null?void 0:k.member_add_mode;s=(s=a.properties)==null?void 0:s.membership_approval_mode_enabled;t=(t=a.properties)==null?void 0:t.support;var H=a.state,I=a.subject;u=(u=a.subject)==null?void 0:(u=u.creator)==null?void 0:u.pn;var J=a.total_participants_count;v=(v=a.participants)==null?void 0:v.participants_phash_match;w=(w=a.properties)==null?void 0:w.closed_by_membership_approval_mode;x=(x=a.properties)==null?void 0:x.general_chat;y=a==null?void 0:(y=a.properties)==null?void 0:(y=y.growth_locked2)==null?void 0:y.locked;z=a==null?void 0:(z=a.properties)==null?void 0:z.auto_add_disabled;A=a==null?void 0:(A=a.properties)==null?void 0:A.parent_group_jid;B=a==null?void 0:(B=a.properties)==null?void 0:B.capi;C=a==null?void 0:(C=a.properties)==null?void 0:C.hidden_group;if(D!=null&&E!=null&&(I==null?void 0:I.value)!=null){var K=d("WAWebMexGetTypename").getTypename(a);z=babelHelpers["extends"]({id:d("WAWebWidFactory").createWid(D),owner:(F==null?void 0:F.id)!=null?d("WAWebWidFactory").createWid(F==null?void 0:F.id):void 0,creatorPn:b!=null?d("WAWebWidFactory").createWid(b):void 0,subject:I.value,creation:Number(E),participants:r(v,c),subjectTime:Number(I==null?void 0:I.creation_time),subjectOwner:(I==null?void 0:(D=I.creator)==null?void 0:D.id)!=null?d("WAWebWidFactory").createWid(I==null?void 0:(F=I.creator)==null?void 0:F.id):void 0,subjectOwnerPn:u!=null?d("WAWebWidFactory").createWid(u):void 0,allowNonAdminSubGroupCreation:(b=f)!=null?b:!1,generalChatAutoAddDisabled:K===n&&z!=null?z:!1,restrict:j===!0,announce:K===m||g===!0,support:(E=t)!=null?E:!1,desc:(c=G==null?void 0:G.value)!=null?c:void 0,descId:(D=G==null?void 0:G.id)!=null?D:void 0,descOwner:(G==null?void 0:(I=G.creator)==null?void 0:I.id)!=null?d("WAWebWidFactory").createWid(G==null?void 0:(F=G.creator)==null?void 0:F.id):void 0,descTime:(G==null?void 0:G.creation_time)!=null?Number(G==null?void 0:G.creation_time):void 0,size:J,noFrequentlyForwarded:!1,incognito:K===m,ephemeralDuration:(u=h)!=null?u:void 0,membershipApprovalMode:(f=s)!=null?f:!1,memberAddMode:q(k),suspended:H===p.SUSPENDED,terminated:H===p.TERMINATED?!0:void 0,isLidAddressingMode:i,reportToAdminMode:(b=e)!=null?b:!1,isParentGroupClosed:w===!0,isParentGroup:K===l,parentGroup:A!=null?d("WAWebWidFactory").createWid(A):void 0,generalSubgroup:x===!0,defaultSubgroup:K===m},(K===n||K===m)&&{parentGroupSubject:null},{numSubgroups:0,membershipApprovalRequest:a.membership_approval_request===!0,growthLockType:y===!0?"invite":void 0,hasCapi:B===!0,hiddenSubgroup:C!=null?C:void 0});return{groupInfo:z,participantPhashMatch:v}}}var p={ACTIVE:"ACTIVE",TERMINATED:"NON_EXISTENT",SUSPENDED:"SUSPENDED"};function b(a){switch(a){case"interactive":return"INTERACTIVE";case"phash":return"PHASH";case"prefetch":return"PRE_FETCH";default:return"UNKNOWN"}}function q(a){switch(a){case"ADMIN_ADD":return d("WAWebSchemaGroupMetadata").MemberAddMode.ADMIN_ADD;case"ALL_MEMBER_ADD":return d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD;default:return d("WAWebSchemaGroupMetadata").MemberAddMode.ADMIN_ADD}}function r(a,b){if(a===!0)return[];if(b==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing participants in group info participant response");a=b.map(function(a){var b=a.node;a=a.role;var c,e,f;if(b.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing id in group info participant response");else c=d("WAWebWidFactory").createWid(b.id);b.lid!=null&&(e=d("WAWebWidFactory").createWid(b.lid));b.pn!=null&&(f=d("WAWebWidFactory").createWid(b.pn));return{id:c,lid:e,phoneNumber:(c=f)!=null?c:null,displayName:(c=b.display_name)!=null?c:null,isAdmin:a==="ADMIN_MEMBER"||a==="SUPERADMIN_MEMBER",isSuperAdmin:a==="SUPERADMIN_MEMBER"}});return a}function c(a,b){var c=[];a.id!==b.id&&c.push("id");a.owner!==b.owner&&c.push("owner");a.creatorPn!==b.creatorPn&&c.push("creatorPn");a.subject!==b.subject&&c.push("subject");a.creation!==b.creation&&c.push("creation");a.subjectTime!==b.subjectTime&&c.push("subjectTime");s(a.participants,b.participants)||c.push("participants");a.pastParticipants!==b.pastParticipants&&c.push("pastParticipants");a.subjectTime!==b.subjectTime&&c.push("subjectTime");a.subjectOwner!==b.subjectOwner&&c.push("subjectOwner");a.subjectOwnerPn!==b.subjectOwnerPn&&c.push("subjectOwnerPn");a.restrict!==b.restrict&&c.push("restrict");a.announce!==b.announce&&c.push("announce");a.noFrequentlyForwarded!==b.noFrequentlyForwarded&&c.push("noFrequentlyForwarded");a.ephemeralDuration!==b.ephemeralDuration&&c.push("ephemeralDuration");a.membershipApprovalMode!==b.membershipApprovalMode&&c.push("membershipApprovalMode");a.memberAddMode!==b.memberAddMode&&c.push("memberAddMode");a.membershipApprovalRequest!==b.membershipApprovalRequest&&c.push("membershipApprovalRequest");a.growthLockExpiration!==b.growthLockExpiration&&c.push("growthLockExpiration");a.growthLockType!==b.growthLockType&&c.push("growthLockType");a.desc!==b.desc&&c.push("desc");a.descId!==b.descId&&c.push("descId");a.descTime!==b.descTime&&c.push("descTime");a.descOwner!==b.descOwner&&c.push("descOwner");a.support!==b.support&&c.push("support");a.a_v_id!==b.a_v_id&&c.push("a_v_id");a.size!==b.size&&c.push("size");a.suspended!==b.suspended&&c.push("suspended");a.terminated!==b.terminated&&c.push("terminated");a.isParentGroup!==b.isParentGroup&&c.push("isParentGroup");a.isParentGroupClosed!==b.isParentGroupClosed&&c.push("isParentGroupClosed");a.defaultSubgroup!==b.defaultSubgroup&&c.push("defaultSubgroup");a.generalSubgroup!==b.generalSubgroup&&c.push("generalSubgroup");a.unjoinedSubgroups!==b.unjoinedSubgroups&&c.push("unjoinedSubgroups");a.numSubgroups!==b.numSubgroups&&c.push("numSubGroups");a.parentGroupSubject!==b.parentGroupSubject&&c.push("parentGroupSubject");a.lastActivityTimestamp!==b.lastActivityTimestamp&&c.push("lastActivityTimestamp");a.lastSeenActivityTimestamp!==b.lastSeenActivityTimestamp&&c.push("lastSeenActivityTimestamp");a.incognito!==b.incognito&&c.push("incognito");a.isLidAddressingMode!==b.isLidAddressingMode&&c.push("isLidAddressingMode");a.adminRequestRequired!==b.adminRequestRequired&&c.push("adminRequestRequired");a.reportToAdminMode!==b.reportToAdminMode&&c.push("reportToAdminMode");a.lastReportToAdminTimestamp!==b.lastReportToAdminTimestamp&&c.push("lastReportToAdminTimestamp");a.allowNonAdminSubGroupCreation!==b.allowNonAdminSubGroupCreation&&c.push("allowNonAdminSubGroupCreation");a.generalChatAutoAddDisabled!==b.generalChatAutoAddDisabled&&c.push("generalChatAutoAddDisabled");a.hiddenSubgroup!==b.hiddenSubgroup&&c.push("hiddenSubgroup");return c}function s(a,b){if(a==null&&b==null)return!0;if(a==null||b==null){a==null?d("WALogger").LOG(k(),JSON.stringify(b)):d("WALogger").LOG(j(),JSON.stringify(a));return!1}if((a==null?void 0:a.length)!==(b==null?void 0:b.length)){d("WALogger").LOG(i(),a==null?void 0:a.length,b==null?void 0:b.length);return!1}var c=[],e=function(){if(g){if(l>=f.length)return"break";m=f[l++]}else{l=f.next();if(l.done)return"break";m=l.value}var a=m,d=b.find(function(b){return b.id.equals(a.id)});if(d==null){c.push([a,null]);return"continue"}(a.displayName!==d.displayName||a.isAdmin!==d.isAdmin||a.isSuperAdmin!==d.isSuperAdmin)&&c.push([a,d])};_loop:for(var f=a,g=Array.isArray(f),l=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;a=e();switch(a){case"break":break _loop;case"continue":continue}}if(c.length>0){d("WALogger").LOG(h(),JSON.stringify(c));return!1}return!0}g.parseMexGroupResponse=a;g.toMexQueryContext=b;g.compareMexAndXmlGroupInfoResults=c}),98);
__d("WARetryPromise",["Promise","WAAbortError","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return new(h||(h=b("Promise")))(function(f,g){var i=0,j,k=!1;if(e){var l=function a(){e.removeEventListener("abort",a),k=!0,j!=null&&clearTimeout(j),g(new(d("WAAbortError").AbortError)())};if(e.aborted){l();return}e.addEventListener("abort",l)}function m(){var d=!1,e=!1;j=null;try{var l=a({retry:function(a){if(k||e)return;d=!0;i++;if(a==null)return m();j=setTimeout(m,a)},failCount:i});if(!(l instanceof(h||(h=b("Promise")))))throw c("WAErr")("TypeError: task must return a promise");l.then(function(a){if(k||d)return;e=!0;f(a)})["catch"](function(a){if(k||d)return;e=!0;g(a)})}catch(a){if(k||d)return;g(a)}}m()})}g["default"]=a}),98);
__d("WARetryableError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,"see error at this.source")||this;c.source=b;return c}return b}(d("WACustomError").customError("RetryableError"));g["default"]=a}),98);
__d("WABackoff",["Promise","WARetryPromise","WARetryableError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=Object.freeze({timeoutIncludesTaskDuration:!0});function a(a,d){a=babelHelpers["extends"]({},i,a);var e=a.signal,f=a.timeoutIterator,g=a.timeoutIncludesTaskDuration;return c("WARetryPromise")(function(a){var e=a.retry,i=a.failCount;return new(h||(h=b("Promise")))(function(a,j){var k=Date.now();try{d(l,i).then(a)["catch"](m)}catch(a){m(a);return}function l(a){return(h||(h=b("Promise"))).reject(new(c("WARetryableError"))(a))}function m(a){if(!(a instanceof c("WARetryableError")))return void j(a);var b=f.next();if(b.done)return void j(a.source);a=Date.now()-k;a=g?Math.max(b.value-a,0):b.value;e(a)}})},e)}g.defaults=i;g.backoff=a}),98);
__d("WAExponentialIterator",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("regeneratorRuntime").mark(a);function a(a){var c;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:c=1;case 1:b.next=4;return c;case 4:c*=a;b.next=1;break;case 7:case"end":return b.stop()}},g,this)}f["default"]=a}),66);
__d("WAExponentialBackoffIterator",["WAExponentialIterator","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=b("regeneratorRuntime").mark(a),i={factor:2,jitter:0,maxTimeout:Infinity};function a(a){var d,e,f,g,j,k,l,m,n,o,p,q,r;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:(d=babelHelpers["extends"]({},i,a),e=d.factor,f=d.jitter,g=d.maxTimeout,j=d.minTimeout,k=d.retries),l=0,(m=c("WAExponentialIterator")(e),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 3:if(!n){b.next=9;break}if(!(o>=m.length)){b.next=6;break}return b.abrupt("break",22);case 6:p=m[o++];b.next=13;break;case 9:o=m.next();if(!o.done){b.next=12;break}return b.abrupt("break",22);case 12:p=o.value;case 13:q=p;l++;if(!(l>k)){b.next=17;break}return b.abrupt("return");case 17:r=1+(Math.random()*f*2-f);b.next=20;return Math.min(j*q*r,g);case 20:b.next=3;break;case 22:case"end":return b.stop()}},h,this)}g.defaults=i;g.exponentialBackoffIterator=a}),98);
__d("WAExponentialBackoff",["WABackoff","WAExponentialBackoffIterator"],(function(a,b,c,d,e,f,g){"use strict";var h=babelHelpers["extends"]({},d("WAExponentialBackoffIterator").defaults,d("WABackoff").defaults);function a(a,b){a=babelHelpers["extends"]({},h,a);var c=a.signal,e=a.timeoutIncludesTaskDuration;a=babelHelpers.objectWithoutPropertiesLoose(a,["signal","timeoutIncludesTaskDuration"]);a=d("WAExponentialBackoffIterator").exponentialBackoffIterator(a);return d("WABackoff").backoff({signal:c,timeoutIterator:a,timeoutIncludesTaskDuration:e},b)}g.exponentialBackoff=a}),98);
__d("WAWebNewsletterRpcUtils",["WAExponentialBackoff","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={minTimeout:1e3,retries:3},i=new Set([429,500]);function a(a,c){c=c===void 0?{retryableErrorCodes:i}:c;var e=c.retryableErrorCodes;c=new AbortController();c=c.signal;return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},h,{signal:c}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){try{return yield a()}catch(a){if(!(a instanceof d("WAWebBackendErrors").ServerStatusCodeError))throw a;var f=e.has(a.statusCode);if(f&&c<h.retries)return b(a);throw a}});return function(a,b){return c.apply(this,arguments)}}())}g.runWithBackoff=a}),98);
__d("WAWebMexFetchGroupInfoJob",["WALogger","WAWebMexClient","WAWebMexFetchGroupInfoJobQuery.graphql","WAWebMexGroupParseUtils","WAWebNewsletterRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][GROUP] fetched get group info for ",""]);i=function(){return a};return a}var j=h!==void 0?h:h=b("WAWebMexFetchGroupInfoJobQuery.graphql");function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){return d("WAWebNewsletterRpcUtils").runWithBackoff(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebMexClient").fetchQuery(j,{id:a,query_context:c}));d("WALogger").LOG(i(),a).tags("GQL","MEX").devConsole({response:b});return b}))});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("WAWebMexGroupParseUtils").toMexQueryContext(b);a=(yield k(a,b));if(a==null)return;return d("WAWebMexGroupParseUtils").parseMexGroupResponse(a)});return m.apply(this,arguments)}g.mexGetGroupInfo=a}),98);
__d("WAWebMexGroupGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("mex_group_get_group_info_mode")===1}function b(){return d("WAWebABProps").getABPropConfigValue("mex_group_get_group_info_mode")===2}function c(){return d("WAWebABProps").getABPropConfigValue("mex_group_get_group_info_mode")===0}g.mexGetGroupInfoEnabled=a;g.groupInfoShadowTestingEnabled=b;g.xmlGroupInfoEnabled=c}),98);
__d("WAWebGroupQueryGroupJob",["Promise","WALogger","WAWebApiChat","WAWebApiParticipantStore","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebDBGroupsGroupMetadata","WAWebGroupsParticipantsApi","WAWebGroupsQueryApi","WAWebMexFetchGroupInfoJob","WAWebMexGroupGatingUtils","WAWebMexGroupParseUtils","WAWebOrchestratorNonPersistedJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: error codes not equal between xml and mex queries for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: mex query succeeded but xml query failed for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: xml query succeeded but mex query failed for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: group info not equal between xml and mex queries for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: phash match not equal between xml and mex queries for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: MEX shadow group info results for ","- ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: MEX shadow group info without participants for ","- ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: XML shadow group info for ","- ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryGroupJob: XML shadow group info without participants for ","- ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["groupQueryJob: group "," does not exist"]);r=function(){return a};return a}function a(a,c,e){e={groupWid:a,request:c,phash:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("queryGroup",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(f!=null&&f.terminated){d("WALogger").DEV(r(),a);return}var g,i;if(d("WAWebMexGroupGatingUtils").xmlGroupInfoEnabled())g=(yield d("WAWebGroupsQueryApi").queryGroup(e));else if(d("WAWebMexGroupGatingUtils").groupInfoShadowTestingEnabled()){f=(yield s(e,a,c));e=(f==null?void 0:(e=f.xmlGroupInfo)==null?void 0:(e=e.groupInfo)==null?void 0:e.isLidAddressingMode)===!0;e||u(a,f);g=f.xmlGroupInfo.groupInfo}else if(d("WAWebMexGroupGatingUtils").mexGetGroupInfoEnabled()){e=(yield d("WAWebMexFetchGroupInfoJob").mexGetGroupInfo(a.toString(),c));g=e==null?void 0:e.groupInfo;i=e==null?void 0:e.participantPhashMatch}if((f=g)==null?void 0:f.id){e=g.participants.map(function(a){return{id:d("WAWebWidFactory").toUserWid(a.id),lid:a.lid?d("WAWebWidFactory").toUserWid(a.lid):null,displayName:a.displayName,phoneNumber:a.phoneNumber?d("WAWebWidFactory").toUserWid(a.phoneNumber):null}});f=g;var j=f.owner,k=f.creatorPn,l=f.subjectOwner;f=f.subjectOwnerPn;j&&k&&e.push({id:d("WAWebWidFactory").toUserWid(j),lid:d("WAWebWidFactory").toUserWid(j),phoneNumber:d("WAWebWidFactory").toUserWid(k)});l&&f&&e.push({id:d("WAWebWidFactory").toUserWid(l),lid:d("WAWebWidFactory").toUserWid(l),phoneNumber:d("WAWebWidFactory").toUserWid(f)});j=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB([g]));k=j[0];yield (h||(h=b("Promise"))).all([d("WAWebDBGroupsGroupMetadata").updateGroupMetadataTable({groupInfos:[k]}),i!==!0&&d("WAWebGroupsParticipantsApi").updateParticipants({group:g.id,participants:g.participants,groupInfo:g}),d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappings(e,!0)]);d("WAWebApiParticipantStore").clearAdminshipCache(g.id.toString())}return g});return function(a){return e.apply(this,arguments)}}()).waitUntilCompleted(e)}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f,g;a=(yield d("WAWebGroupsQueryApi").queryGroup(a).then(function(a){f=!0;g=a==null;return a})["catch"](function(a){e=a}));var h,i,j;b=(yield d("WAWebMexFetchGroupInfoJob").mexGetGroupInfo(b.toString(),c).then(function(a){i=!0;j=a==null;return a})["catch"](function(a){h=a}));return{xmlGroupInfo:{groupInfo:a,isSuccess:f===!0,error:e,phashMatch:g},mexGroupInfo:{groupInfo:b==null?void 0:b.groupInfo,isSuccess:i===!0,error:h,phashMatch:j}}});return t.apply(this,arguments)}function u(a,b){var c,e=b.xmlGroupInfo;b=b.mexGroupInfo;if((e==null?void 0:(c=e.groupInfo)==null?void 0:c.participants)!=null){c=e.groupInfo;c.participants;c=babelHelpers.objectWithoutPropertiesLoose(c,["participants"]);d("WALogger").LOG(q(),a.toLogString(),JSON.stringify(c))}else d("WALogger").LOG(p(),a.toLogString(),JSON.stringify(e));if((b==null?void 0:(c=b.groupInfo)==null?void 0:c.participants)!=null){c=b.groupInfo;c.participants;c=babelHelpers.objectWithoutPropertiesLoose(c,["participants"]);d("WALogger").LOG(o(),a,JSON.stringify(c))}else d("WALogger").LOG(n(),a,JSON.stringify(b));if(e.isSuccess&&b.isSuccess){e.phashMatch!==b.phashMatch&&d("WALogger").ERROR(m(),a).sendLogs("groupQueryGroupJob-phashMatch-notEqual");if(e.groupInfo!=null&&b.groupInfo!=null){c=d("WAWebMexGroupParseUtils").compareMexAndXmlGroupInfoResults(e.groupInfo,b.groupInfo);c.length>0&&d("WALogger").ERROR(l(),a).sendLogs("groupQueryGroupJob-xml-mex-groupInfo-notEqual mismatched fields: "+JSON.stringify(c))}}if(e.isSuccess&&!b.isSuccess){var f;c=(c=b==null?void 0:(c=b.error)==null?void 0:c.statusCode)!=null?c:"";f=(f=e==null?void 0:(f=e.error)==null?void 0:f.statusCode)!=null?f:"";d("WALogger").ERROR(k(),a).sendLogs("groupQueryGroupJob-xml-succeeded-mex-failed MEX ERROR:"+JSON.stringify(c)+" XML ERROR: "+JSON.stringify(f))}!e.isSuccess&&b.isSuccess&&d("WALogger").ERROR(j(),a).sendLogs("groupQueryGroupJob-mex-succeeded-xml-failed");if(!e.isSuccess&&!b.isSuccess){((c=e.error)==null?void 0:c.statusCode)!==((f=b.error)==null?void 0:f.statusCode)&&d("WALogger").ERROR(i(),a).sendLogs("groupQueryGroupJob-error-codes-notEqual")}if(!e.isSuccess)throw e.error}g.queryGroupJob=a}),98);
__d("WASmaxInGroupsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInGroupsIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit"],[b,c])}g.parseBatchGetGroupInfoClientErrors=a}),98);
__d("WASmaxInGroupsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseClientError",["WAResultOrError","WASmaxInGroupsBatchGetGroupInfoClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsBatchGetGroupInfoClientErrors").parseBatchGetGroupInfoClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorBatchGetGroupInfoClientErrors:b.value}))}g.parseBatchGetGroupInfoResponseClientError=a}),98);
__d("WASmaxInGroupsIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",500,599);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);
__d("WASmaxInGroupsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInGroupsIQErrorPartialServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","partial-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",530);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorPartialServerErrorMixin=a}),98);
__d("WASmaxInGroupsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInGroupsServerErrors",["WAResultOrError","WASmaxInGroupsIQErrorFallbackServerMixin","WASmaxInGroupsIQErrorInternalServerErrorMixin","WASmaxInGroupsIQErrorPartialServerErrorMixin","WASmaxInGroupsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInGroupsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:c.value});var e=d("WASmaxInGroupsIQErrorPartialServerErrorMixin").parseIQErrorPartialServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorPartialServerError",value:e.value});var f=d("WASmaxInGroupsIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorServiceUnavailable","IQErrorPartialServerError","IQErrorFallbackServer"],[b,c,e,f])}g.parseServerErrors=a}),98);
__d("WASmaxInGroupsBaseServerErrorMixin",["WAResultOrError","WASmaxInGroupsIQErrorResponseMixin","WASmaxInGroupsServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseBaseServerErrorMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseBatchGetGroupInfoResponseServerError=a}),98);
__d("WASmaxInGroupsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={304:"304",419:"419"};b={403:"403",404:"404",406:"406",419:"419"};c={404:"404",406:"406"};e={404:"404",419:"419"};f={406:"406",500:"500"};var h={accept:"accept",auto_add:"auto_add",default_sub_group_admin_add:"default_sub_group_admin_add",general_chat_auto_add:"general_chat_auto_add",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join",sub_group_suggestion_approved:"sub_group_suggestion_approved"},i={accept:"accept",default_sub_group_promote:"default_sub_group_promote",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join"},j={admin:"admin",creator:"creator"},k={admin:"admin",superadmin:"superadmin"},l={approved:"approved",cancelled:"cancelled",rejected:"rejected"},m={deactivate_general_chat:"deactivate_general_chat",delete_capi:"delete_capi",delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent"},n={deactivate_group:"deactivate_group",delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent",unlink_group:"unlink_group"},o={e2ee_migration:"e2ee_migration",regular:"regular",rtc:"rtc"},p={"false":"false","true":"true"},q={group:"group",user:"user"},r={image:"image",preview:"preview"},s={invite_link:"invite_link",linked_group_join:"linked_group_join",non_admin_add:"non_admin_add"},t={lid:"lid",pn:"pn"},u={parent_group:"parent_group",sibling_group:"sibling_group",sub_group:"sub_group"};d={validators:[d("WAJids").validateDomainJid,d("WAJids").validateGroupJid],typeName:"DomainJid|GroupJid"};g.ENUM_304_419=a;g.ENUM_403_404_406_419=b;g.ENUM_404_406=c;g.ENUM_404_419=e;g.ENUM_406_500=f;g.ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPADMINADD_GENERALCHATAUTOADD_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN_SUBGROUPSUGGESTIONAPPROVED=h;g.ENUM_ACCEPT_DEFAULTSUBGROUPPROMOTE_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN=i;g.ENUM_ADMIN_CREATOR=j;g.ENUM_ADMIN_SUPERADMIN=k;g.ENUM_APPROVED_CANCELLED_REJECTED=l;g.ENUM_DEACTIVATEGENERALCHAT_DELETECAPI_DELETEPARENT_INTEGRITYDELETEPARENT=m;g.ENUM_DEACTIVATEGROUP_DELETEPARENT_INTEGRITYDELETEPARENT_UNLINKGROUP=n;g.ENUM_E2EEMIGRATION_REGULAR_RTC=o;g.ENUM_FALSE_TRUE=p;g.ENUM_GROUP_USER=q;g.ENUM_IMAGE_PREVIEW=r;g.ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD=s;g.ENUM_LID_PN=t;g.ENUM_PARENTGROUP_SIBLINGGROUP_SUBGROUP=u;g.DOMAINJID_GROUPJID=d}),98);
__d("WASmaxInGroupsDedupAttrsMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").attrString(a,"key");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"create_ctx",d("WASmaxInGroupsEnums").ENUM_E2EEMIGRATION_REGULAR_RTC);return!a.success?a:d("WAResultOrError").makeResult({key:b.value,createCtx:a.value})}g.parseDedupAttrsMixin=a}),98);
__d("WASmaxInGroupsGroupForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"error","403");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,error:a.value})}g.parseGroupForbiddenMixin=a}),98);
__d("WASmaxInGroupsGroupAddressingModeMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"addressing_mode",d("WASmaxInGroupsEnums").ENUM_LID_PN);return!a.success?a:d("WAResultOrError").makeResult({addressingMode:a.value})}g.parseGroupAddressingModeMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseNamedSubjectMixin=a}),98);
__d("WASmaxInGroupsUnnamedSubjectFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseUnnamedSubjectFallbackMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup",["WAResultOrError","WASmaxInGroupsNamedSubjectMixin","WASmaxInGroupsUnnamedSubjectFallbackMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsNamedSubjectMixin").parseNamedSubjectMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NamedSubject",value:b.value});var c=d("WASmaxInGroupsUnnamedSubjectFallbackMixin").parseUnnamedSubjectFallbackMixin(a);return c.success?d("WAResultOrError").makeResult({name:"UnnamedSubjectFallback",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NamedSubject","UnnamedSubjectFallback"],[b,c])}g.parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup=a}),98);
__d("WASmaxInGroupsGroupInfoAttributesMixin",["WAResultOrError","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"creator");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"creator_pn");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"creation",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"p_v_id");if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"a_v_id");if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"s_t",0,void 0);if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"s_o");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"s_o_pn");if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"open_thread_id");if(!l.success)return l;var m=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);a=d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup").parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,creator:c.value,creatorPn:e.value,creation:f.value,pVId:g.value,aVId:h.value,sT:i.value,sO:j.value,sOPn:k.value,openThreadId:l.value,groupAddressingModeMixin:m.success?m.value:null,namedSubjectOrUnnamedSubjectFallbackMixinGroup:a.value})}g.parseGroupInfoAttributesMixin=a}),98);
__d("WASmaxInGroupsGroupInfoDescriptionMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"body");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_pn");if(!f.success)return f;a=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!a.success)return a;b=d("WASmaxParseUtils").contentString(b.value);return!b.success?b:d("WAResultOrError").makeResult({id:c.value,participant:e.value,participantPn:f.value,t:a.value,bodyElementValue:b.value})}g.parseGroupInfoDescriptionMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseParticipantWithJidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithLidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"lid");return!b.success?b:d("WAResultOrError").makeResult({lid:b.value})}g.parseParticipantWithLidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndLidMixin",["WAResultOrError","WASmaxInGroupsParticipantWithJidMixin","WASmaxInGroupsParticipantWithLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantWithLidMixin").parseParticipantWithLidMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndLidMixin=a}),98);
__d("WASmaxInGroupsPhoneNumberMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrUserJid(a,"phone_number");return!a.success?a:d("WAResultOrError").makeResult({phoneNumber:a.value})}g.parsePhoneNumberMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndPnMixin",["WAResultOrError","WASmaxInGroupsParticipantWithJidMixin","WASmaxInGroupsPhoneNumberMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndPnMixin=a}),98);
__d("WASmaxInGroupsDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidLidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantAdminMixins",["WAResultOrError","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxInGroupsParticipantWithJidAndPnMixin","WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin").parseParticipantWithJidLidAndDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidLidAndDisplayName",value:b.value});var c=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndLid",value:c.value});var e=d("WASmaxInGroupsParticipantWithJidAndPnMixin").parseParticipantWithJidAndPnMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndPn",value:e.value});var f=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);return f.success?d("WAResultOrError").makeResult({name:"ParticipantWithJid",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[b,c,e,f])}g.parseGroupInfoParticipantAdminMixins=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantAdminMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxInGroupsGroupInfoParticipantAdminMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInGroupsEnums").ENUM_ADMIN_SUPERADMIN);if(!b.success)return b;a=d("WASmaxInGroupsGroupInfoParticipantAdminMixins").parseGroupInfoParticipantAdminMixins(a);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,groupInfoParticipantAdminMixins:a.value})}g.parseGroupInfoParticipantAdminMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value},a.value))}g.parseParticipantWithJidContainingLidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantMixins",["WAResultOrError","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxInGroupsParticipantWithJidAndPnMixin","WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin").parseParticipantWithJidLidAndDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidLidAndDisplayName",value:b.value});var c=d("WASmaxInGroupsParticipantWithJidContainingLidAndDisplayNameMixin").parseParticipantWithJidContainingLidAndDisplayNameMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidContainingLidAndDisplayName",value:c.value});var e=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndLid",value:e.value});var f=d("WASmaxInGroupsParticipantWithJidAndPnMixin").parseParticipantWithJidAndPnMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndPn",value:f.value});var g=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);return g.success?d("WAResultOrError").makeResult({name:"ParticipantWithJid",value:g.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidContainingLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[b,c,e,f,g])}g.parseParticipantMixins=a}),98);
__d("WASmaxInGroupsParticipantMixin",["WAResultOrError","WASmaxInGroupsParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixins").parseParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({participantMixins:b.value})}g.parseParticipantMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin",["WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);return!b.success?b:b}g.parseGroupInfoParticipantNonAdminMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixins",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantAdminMixin","WASmaxInGroupsGroupInfoParticipantNonAdminMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoParticipantAdminMixin").parseGroupInfoParticipantAdminMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfoParticipantAdmin",value:b.value});var c=d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin").parseGroupInfoParticipantNonAdminMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupInfoParticipantNonAdmin",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfoParticipantAdmin","GroupInfoParticipantNonAdmin"],[b,c])}g.parseGroupInfoParticipantMixins=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixin",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixins").parseGroupInfoParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({groupInfoParticipantMixins:b.value})}g.parseGroupInfoParticipantMixin=a}),98);
__d("WASmaxInGroupsAdminAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"admin_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAdminAddModeMixin=a}),98);
__d("WASmaxInGroupsAllMembersAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"all_member_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAllMembersAddModeMixin=a}),98);
__d("WASmaxInGroupsUnknownAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseUnknownAddModeMixin=a}),98);
__d("WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup",["WAResultOrError","WASmaxInGroupsAdminAddModeMixin","WASmaxInGroupsAllMembersAddModeMixin","WASmaxInGroupsUnknownAddModeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsAdminAddModeMixin").parseAdminAddModeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AdminAddMode",value:b.value});var c=d("WASmaxInGroupsAllMembersAddModeMixin").parseAllMembersAddModeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"AllMembersAddMode",value:c.value});var e=d("WASmaxInGroupsUnknownAddModeMixin").parseUnknownAddModeMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UnknownAddMode",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AdminAddMode","AllMembersAddMode","UnknownAddMode"],[b,c,e])}g.parseAdminOrAllMembersOrUnknownAddModeMixinGroup=a}),98);
__d("WASmaxInGroupsGroupMemberAddModeMixin",["WAResultOrError","WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"member_add_mode");if(!a.success)return a;a=d("WASmaxInGroupsAdminOrAllMembersOrUnknownAddModeMixinGroup").parseAdminOrAllMembersOrUnknownAddModeMixinGroup(a.value);return!a.success?a:d("WAResultOrError").makeResult({memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup:a.value})}g.parseGroupMemberAddModeMixin=a}),98);
__d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group_join");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"state","on");return!b.success?b:d("WAResultOrError").makeResult({state:b.value})}g.parseGroupJoinMembershipApprovalModeEnabledMixin=a}),98);
__d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin",["WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"group_join");if(!b.success)return b;a=d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin").parseGroupJoinMembershipApprovalModeEnabledMixin(b.value);return!a.success?a:a}g.parseMembershipApprovalGroupJoinModeEnabledMixin=a}),98);
__d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"default_membership_approval_mode","request_required");return!b.success?b:d("WAResultOrError").makeResult({defaultMembershipApprovalMode:b.value})}g.parseParentGroupDefaultMembershipApprovalModeMixin=a}),98);
__d("WASmaxInGroupsParticipantNotAddressableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"addressable","false");return!b.success?b:d("WAResultOrError").makeResult({addressable:b.value})}g.parseParticipantNotAddressableMixin=a}),98);
__d("WASmaxInGroupsGroupInfoMixin",["WAResultOrError","WASmaxInGroupsGroupInfoAttributesMixin","WASmaxInGroupsGroupInfoDescriptionMixin","WASmaxInGroupsGroupInfoParticipantMixin","WASmaxInGroupsGroupMemberAddModeMixin","WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin","WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin","WASmaxInGroupsParticipantNotAddressableMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixin").parseGroupInfoParticipantMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantNotAddressableMixin").parseParticipantNotAddressableMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{participantNotAddressableMixin:a.success?a.value:null}))}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoDescriptionMixin").parseGroupInfoDescriptionMixin(a);return d("WAResultOrError").makeResult({groupInfoDescriptionMixin:b.success?b.value:null})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin").parseParentGroupDefaultMembershipApprovalModeMixin(a);return d("WAResultOrError").makeResult({parentGroupDefaultMembershipApprovalModeMixin:b.success?b.value:null})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"ephemeral");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,2147483647);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"trigger",0,20);return!a.success?a:d("WAResultOrError").makeResult({expiration:b.value,trigger:a.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"growth_locked");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,expiration:a.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin").parseMembershipApprovalGroupJoinModeEnabledMixin(a);return d("WAResultOrError").makeResult({membershipApprovalGroupJoinModeEnabledMixin:b.success?b.value:null})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_parent");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"description",i);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChild(a,"locked");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChild(a,"announcement");if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChildWithTag(a,"parent",j);if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChild(a,"no_frequently_forwarded");if(!g.success)return g;var o=d("WASmaxParseUtils").optionalChild(a,"support");if(!o.success)return o;var p=d("WASmaxParseUtils").optionalChildWithTag(a,"ephemeral",k);if(!p.success)return p;var q=d("WASmaxParseUtils").optionalChild(a,"suspended");if(!q.success)return q;var r=d("WASmaxParseUtils").optionalChildWithTag(a,"growth_locked",l);if(!r.success)return r;var s=d("WASmaxParseUtils").optionalChild(a,"default_sub_group");if(!s.success)return s;var t=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_mode",m);if(!t.success)return t;var u=d("WASmaxParseUtils").optionalChild(a,"incognito");if(!u.success)return u;var v=d("WASmaxParseUtils").optionalChild(a,"allow_admin_reports");if(!v.success)return v;var w=d("WASmaxParseUtils").optionalChild(a,"allow_non_admin_sub_group_creation");if(!w.success)return w;var x=d("WASmaxParseUtils").optionalChild(a,"general_chat");if(!x.success)return x;var y=d("WASmaxParseUtils").optionalChild(a,"auto_add_disabled");if(!y.success)return y;var z=d("WASmaxParseUtils").optionalChild(a,"group_history");if(!z.success)return z;var A=d("WASmaxParseUtils").optionalChildWithTag(a,"linked_parent",n);if(!A.success)return A;var B=d("WASmaxParseUtils").optionalChild(a,"hidden_group");if(!B.success)return B;var C=d("WASmaxParseUtils").optionalChild(a,"capi");if(!C.success)return C;var D=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"ack","false");if(!D.success)return D;var E=d("WASmaxInGroupsGroupInfoAttributesMixin").parseGroupInfoAttributesMixin(a);if(!E.success)return E;var F=d("WASmaxInGroupsGroupMemberAddModeMixin").parseGroupMemberAddModeMixin(a);a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",0,19999,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({ack:D.value},E.value,{groupMemberAddModeMixin:F.success?F.value:null,description:b.value,hasLocked:c.value!=null,hasAnnouncement:e.value!=null,parent:f.value,hasNoFrequentlyForwarded:g.value!=null,hasSupport:o.value!=null,ephemeral:p.value,hasSuspended:q.value!=null,growthLocked:r.value,hasDefaultSubGroup:s.value!=null,membershipApprovalMode:t.value,hasIncognito:u.value!=null,hasAllowAdminReports:v.value!=null,hasAllowNonAdminSubGroupCreation:w.value!=null,hasGeneralChat:x.value!=null,hasAutoAddDisabled:y.value!=null,hasGroupHistory:z.value!=null,linkedParent:A.value,hasHiddenGroup:B.value!=null,hasCapi:C.value!=null,participant:a.value}))}g.parseGroupInfoParticipant=h;g.parseGroupInfoDescription=i;g.parseGroupInfoParent=j;g.parseGroupInfoEphemeral=k;g.parseGroupInfoGrowthLocked=l;g.parseGroupInfoMembershipApprovalMode=m;g.parseGroupInfoLinkedParent=n;g.parseGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGroupNotExistMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"error","404");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,error:a.value})}g.parseGroupNotExistMixin=a}),98);
__d("WASmaxInGroupsTruncatedGroupInfoMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"truncated","true");if(!c.success)return c;a=d("WASmaxParseUtils").attrIntRange(a,"size",0,19999);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,truncated:c.value,size:a.value})}g.parseTruncatedGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup",["WAResultOrError","WASmaxInGroupsGroupForbiddenMixin","WASmaxInGroupsGroupInfoMixin","WASmaxInGroupsGroupNotExistMixin","WASmaxInGroupsTruncatedGroupInfoMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfo",value:b.value});var c=d("WASmaxInGroupsTruncatedGroupInfoMixin").parseTruncatedGroupInfoMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"TruncatedGroupInfo",value:c.value});var e=d("WASmaxInGroupsGroupForbiddenMixin").parseGroupForbiddenMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"GroupForbidden",value:e.value});var f=d("WASmaxInGroupsGroupNotExistMixin").parseGroupNotExistMixin(a);return f.success?d("WAResultOrError").makeResult({name:"GroupNotExist",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfo","TruncatedGroupInfo","GroupForbidden","GroupNotExist"],[b,c,e,f])}g.parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseSuccess",["WAResultOrError","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(a);a=d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup").parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({dedupAttrsMixin:b.success?b.value:null,groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"group",1,1e4,h);return!b.success?b:d("WAResultOrError").makeResult({type:e.value,groupsGroup:b.value})}g.parseBatchGetGroupInfoResponseSuccessGroupsGroup=h;g.parseBatchGetGroupInfoResponseSuccess=a}),98);
__d("WASmaxChildren",["WADeepEquals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return null;else return a(b)}function b(a,b){if(b==null)return null;else if(b)return a()}function c(a,b){if(b)for(var c=1;c<b.length;c++)if(!d("WADeepEquals").deepEqual(b[c],b[0]))throw new Error("expected all homogeneous children to be equal, but they were not");c=h(a,b,0,Infinity);return c}function e(a,b){return i(a,b,0,Infinity)}function h(a,b,c,d){if(b==null){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}var e=b.length;if(e<c)throw new Error("expected at least "+c+" children, but found "+e);else if(e>d)throw new Error("expected at most "+d+" children, but found "+e);return b.map(function(b){return a(b)})}function i(a,b,c,d){if(b===0){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}if(b<c)throw new Error("expected at least "+c+" children, but found "+b);else if(b>d)throw new Error("expected at most "+d+" children, but found "+b);c=[];for(d=0;d<b;d++)c.push(a());return c}g.OPTIONAL_CHILD=a;g.HAS_OPTIONAL_CHILD=b;g.HOMOGENEOUS_CHILD=c;g.HOMOGENEOUS_CHILD_COUNT=e;g.REPEATED_CHILD=h;g.REPEATED_CHILD_COUNT=i}),98);
__d("WASmaxOutGroupsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutGroupsBaseGetServerMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutGroupsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").G_US,xmlns:"w:g2"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseGetServerMixin=a}),98);
__d("WASmaxOutGroupsBatchGetGroupInfoRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.groupJid;a=d("WASmaxJsx").smax("group",{jid:d("WAWap").GROUP_JID(a)});return a}function a(a){var b=a.groupArgs;a=a.queryContext;a=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("query",{context:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)},d("WASmaxChildren").REPEATED_CHILD(h,b,1,1e4))));return a}g.makeBatchGetGroupInfoRequestQueryGroup=h;g.makeBatchGetGroupInfoRequest=a}),98);
__d("WASmaxGroupsBatchGetGroupInfoRPC",["WAComms","WASmaxInGroupsBatchGetGroupInfoResponseClientError","WASmaxInGroupsBatchGetGroupInfoResponseServerError","WASmaxInGroupsBatchGetGroupInfoResponseSuccess","WASmaxOutGroupsBatchGetGroupInfoRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsBatchGetGroupInfoRequest").makeBatchGetGroupInfoRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsBatchGetGroupInfoResponseSuccess").parseBatchGetGroupInfoResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"BatchGetGroupInfoResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsBatchGetGroupInfoResponseClientError").parseBatchGetGroupInfoResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"BatchGetGroupInfoResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsBatchGetGroupInfoResponseServerError").parseBatchGetGroupInfoResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"BatchGetGroupInfoResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("BatchGetGroupInfo",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendBatchGetGroupInfoRPC=a}),98);
__d("WASmaxInGroupsIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",400,499);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);
__d("WASmaxInGroupsIQErrorGoneMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","gone");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",410);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorGoneMixin=a}),98);
__d("WASmaxInGroupsIQErrorGrowthLockedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"growth_locked");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,expiration:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"growth_locked",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","growth-locked");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",436);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,growthLocked:b.value})}g.parseIQErrorGrowthLockedGrowthLocked=h;g.parseIQErrorGrowthLockedMixin=a}),98);
__d("WASmaxInGroupsIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInGroupsIQErrorLockedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","locked");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",423);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorLockedMixin=a}),98);
__d("WASmaxInGroupsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"field");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"reason");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,reason:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"field",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);
__d("WASmaxInGroupsIQErrorNotAuthorizedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-authorized");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",401);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorGoneMixin","WASmaxInGroupsIQErrorGrowthLockedMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAcceptableMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInGroupsIQErrorGoneMixin").parseIQErrorGoneMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorGone",value:e.value});var f=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:f.value});var g=d("WASmaxInGroupsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:g.value});var h=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:h.value});var i=d("WASmaxInGroupsIQErrorGrowthLockedMixin").parseIQErrorGrowthLockedMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"IQErrorGrowthLocked",value:i.value});var j=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return j.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:j.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorGone","IQErrorNotAuthorized","IQErrorNotAcceptable","IQErrorLocked","IQErrorGrowthLocked","IQErrorFallbackClient"],[b,c,e,f,g,h,i,j])}g.parseGetInviteGroupInfoClientErrors=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseClientError",["WAResultOrError","WASmaxInGroupsGetInviteGroupInfoClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetInviteGroupInfoClientErrors").parseGetInviteGroupInfoClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetInviteGroupInfoClientErrors:b.value}))}g.parseGetInviteGroupInfoResponseClientError=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetInviteGroupInfoResponseServerError=a}),98);
__d("WASmaxInGroupsInviteLinkGroupInfoMixin",["WAResultOrError","WASmaxInGroupsGroupInfoAttributesMixin","WASmaxInGroupsGroupInfoDescriptionMixin","WASmaxInGroupsGroupInfoParticipantMixin","WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin","WASmaxInGroupsNamedSubjectMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixin").parseGroupInfoParticipantMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"num_sub_groups",1,1e3);return!b.success?b:d("WAResultOrError").makeResult({numSubGroups:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_parent");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");if(!b.success)return b;a=d("WASmaxInGroupsNamedSubjectMixin").parseNamedSubjectMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value},a.value))}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin").parseMembershipApprovalGroupJoinModeEnabledMixin(a);return!b.success?b:b}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"error","304");return!b.success?b:d("WAResultOrError").makeResult({error:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"description");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"parent",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"linked_parent",j);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChild(a,"hidden_group");if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChild(a,"default_sub_group");if(!g.success)return g;var m=d("WASmaxParseUtils").optionalChild(a,"general_chat");if(!m.success)return m;var n=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_mode",k);if(!n.success)return n;var o=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_request",l);if(!o.success)return o;var p=d("WASmaxParseUtils").attrIntRange(a,"size",0,19999);if(!p.success)return p;b=d("WASmaxInGroupsGroupInfoDescriptionMixin").parseGroupInfoDescriptionMixin(b.value);var q=d("WASmaxInGroupsGroupInfoAttributesMixin").parseGroupInfoAttributesMixin(a);if(!q.success)return q;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",0,19999,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({size:p.value,descriptionGroupInfoDescriptionMixin:b.success?b.value:null},q.value,{parent:c.value,linkedParent:e.value,hasHiddenGroup:f.value!=null,hasDefaultSubGroup:g.value!=null,hasGeneralChat:m.value!=null,membershipApprovalMode:n.value,membershipApprovalRequest:o.value,participant:a.value}))}g.parseInviteLinkGroupInfoParticipant=h;g.parseInviteLinkGroupInfoParent=i;g.parseInviteLinkGroupInfoLinkedParent=j;g.parseInviteLinkGroupInfoMembershipApprovalMode=k;g.parseInviteLinkGroupInfoMembershipApprovalRequest=l;g.parseInviteLinkGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseSuccess",["WAResultOrError","WASmaxInGroupsInviteLinkGroupInfoMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"group");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(c.value,"size",0,19999);if(!b.success)return b;a=d("WASmaxInGroupsInviteLinkGroupInfoMixin").parseInviteLinkGroupInfoMixin(c.value);return!a.success?a:d("WAResultOrError").makeResult({type:e.value,groupSize:b.value,groupInviteLinkGroupInfoMixin:a.value})}g.parseGetInviteGroupInfoResponseSuccess=a}),98);
__d("WASmaxOutGroupsGetInviteGroupInfoRequest",["WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.inviteCode;a=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("invite",{code:d("WAWap").CUSTOM_STRING(a)})));return a}g.makeGetInviteGroupInfoRequest=a}),98);
__d("WASmaxGroupsGetInviteGroupInfoRPC",["WAComms","WASmaxInGroupsGetInviteGroupInfoResponseClientError","WASmaxInGroupsGetInviteGroupInfoResponseServerError","WASmaxInGroupsGetInviteGroupInfoResponseSuccess","WASmaxOutGroupsGetInviteGroupInfoRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsGetInviteGroupInfoRequest").makeGetInviteGroupInfoRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsGetInviteGroupInfoResponseSuccess").parseGetInviteGroupInfoResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetInviteGroupInfoResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsGetInviteGroupInfoResponseClientError").parseGetInviteGroupInfoResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetInviteGroupInfoResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsGetInviteGroupInfoResponseServerError").parseGetInviteGroupInfoResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetInviteGroupInfoResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetInviteGroupInfo",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetInviteGroupInfoRPC=a}),98);
__d("WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value});var e=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit","IQErrorFallbackClient"],[b,c,e])}g.parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseClientError",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup").parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup:b.value}))}g.parseGetParticipatingGroupsResponseClientError=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetParticipatingGroupsResponseServerError=a}),98);
__d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup",["WAResultOrError","WASmaxInGroupsGroupInfoMixin","WASmaxInGroupsTruncatedGroupInfoMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfo",value:b.value});var c=d("WASmaxInGroupsTruncatedGroupInfoMixin").parseTruncatedGroupInfoMixin(a);return c.success?d("WAResultOrError").makeResult({name:"TruncatedGroupInfo",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfo","TruncatedGroupInfo"],[b,c])}g.parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseSuccess",["WAResultOrError","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(a);a=d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup").parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({dedupAttrsMixin:b.success?b.value:null,groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"group",0,1e4,h);return!b.success?b:d("WAResultOrError").makeResult({type:e.value,groupsGroup:b.value})}g.parseGetParticipatingGroupsResponseSuccessGroupsGroup=h;g.parseGetParticipatingGroupsResponseSuccess=a}),98);
__d("WASmaxOutGroupsGetParticipatingGroupsRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("participants",null);return a}function i(){var a=d("WASmaxJsx").smax("description",null);return a}function a(a){var b=a.hasParticipants;a=a.hasDescription;b=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("participating",null,d("WASmaxChildren").HAS_OPTIONAL_CHILD(h,b),d("WASmaxChildren").HAS_OPTIONAL_CHILD(i,a))));return b}g.makeGetParticipatingGroupsRequestParticipatingParticipants=h;g.makeGetParticipatingGroupsRequestParticipatingDescription=i;g.makeGetParticipatingGroupsRequest=a}),98);
__d("WASmaxGroupsGetParticipatingGroupsRPC",["WAComms","WASmaxInGroupsGetParticipatingGroupsResponseClientError","WASmaxInGroupsGetParticipatingGroupsResponseServerError","WASmaxInGroupsGetParticipatingGroupsResponseSuccess","WASmaxOutGroupsGetParticipatingGroupsRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsGetParticipatingGroupsRequest").makeGetParticipatingGroupsRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsGetParticipatingGroupsResponseSuccess").parseGetParticipatingGroupsResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetParticipatingGroupsResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsGetParticipatingGroupsResponseClientError").parseGetParticipatingGroupsResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetParticipatingGroupsResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsGetParticipatingGroupsResponseServerError").parseGetParticipatingGroupsResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetParticipatingGroupsResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetParticipatingGroups",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetParticipatingGroupsRPC=a}),98);
__d("WASmaxInGroupsIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:e.value});var f=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:f.value});var g=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:g.value});var h=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:h.value});var i=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return i.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:i.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorNotAuthorized","IQErrorForbidden","IQErrorRateOverlimit","IQErrorLocked","IQErrorFallbackClient"],[b,c,e,f,g,h,i])}g.parseGetMembershipApprovalRequestsClientErrors=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError",["WAResultOrError","WASmaxInGroupsGetMembershipApprovalRequestsClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetMembershipApprovalRequestsClientErrors").parseGetMembershipApprovalRequestsClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetMembershipApprovalRequestsClientErrors:b.value}))}g.parseGetMembershipApprovalRequestsResponseClientError=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetMembershipApprovalRequestsResponseServerError=a}),98);
__d("WASmaxInGroupsMembershipRequestMethodAttributeMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"request_method",d("WASmaxInGroupsEnums").ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD);return!a.success?a:d("WAResultOrError").makeResult({requestMethod:a.value})}g.parseMembershipRequestMethodAttributeMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin",["WAResultOrError","WASmaxInGroupsMembershipRequestMethodAttributeMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"requestor");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrGroupJid,a,"parent_group_jid");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"request_time",0,void 0);if(!f.success)return f;a=d("WASmaxInGroupsMembershipRequestMethodAttributeMixin").parseMembershipRequestMethodAttributeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value,requestor:c.value,parentGroupJid:e.value,requestTime:f.value},a.value))}g.parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"requestor_fetch","true");return!a.success?a:d("WAResultOrError").makeResult({requestorFetch:a.value})}g.parseGetMembershipApprovalRequestsRequestorFetchMixin=a}),98);
__d("WASmaxInGroupsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess",["WAResultOrError","WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin","WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsIQResultResponseMixin","WASmaxInGroupsPhoneNumberMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin").parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{phoneNumberMixin:a.success?a.value:null}))}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"membership_approval_requests");if(!c.success)return c;var e=d("WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin").parseGetMembershipApprovalRequestsRequestorFetchMixin(c.value);b=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"membership_approval_request",0,19999,h);return!c.success?c:d("WAResultOrError").makeResult(babelHelpers["extends"]({membershipApprovalRequestsGetMembershipApprovalRequestsRequestorFetchMixin:e.success?e.value:null},b.value,{groupAddressingModeMixin:a.success?a.value:null,membershipApprovalRequestsMembershipApprovalRequest:c.value}))}g.parseGetMembershipApprovalRequestsResponseSuccessMembershipApprovalRequestsMembershipApprovalRequest=h;g.parseGetMembershipApprovalRequestsResponseSuccess=a}),98);
__d("WASmaxOutGroupsBaseGetGroupMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTo;a=d("WASmaxOutGroupsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").GROUP_JID(a),xmlns:"w:g2"}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseGetGroupMixin=a}),98);
__d("WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("smax$any",{requestor_fetch:"true"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGetMembershipApprovalRequestsRequestorFetchMixin=a}),98);
__d("WASmaxOutGroupsGetMembershipApprovalRequestsRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseGetGroupMixin","WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=a.hasGetMembershipApprovalRequestsRequestorFetch;b=d("WASmaxOutGroupsBaseGetGroupMixin").mergeBaseGetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin").mergeGetMembershipApprovalRequestsRequestorFetchMixin,d("WASmaxJsx").smax("membership_approval_requests",null),b)),a);return b}g.makeGetMembershipApprovalRequestsRequest=a}),98);
__d("WASmaxGroupsGetMembershipApprovalRequestsRPC",["WAComms","WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError","WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError","WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess","WASmaxOutGroupsGetMembershipApprovalRequestsRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutGroupsGetMembershipApprovalRequestsRequest").makeGetMembershipApprovalRequestsRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess").parseGetMembershipApprovalRequestsResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetMembershipApprovalRequestsResponseSuccess",value:g.value});case 7:h=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError").parseGetMembershipApprovalRequestsResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetMembershipApprovalRequestsResponseClientError",value:h.value});case 10:i=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError").parseGetMembershipApprovalRequestsResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetMembershipApprovalRequestsResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetMembershipApprovalRequests",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetMembershipApprovalRequestsRPC=a}),98);
__d("WAWebRequestMethodType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NonAdminAdd","InviteLink","LinkedGroupJoin"]);f.RequestMethod=a}),66);
__d("WAWebGroupGetMembershipApprovalRequestsJob",["Promise","WALogger","WASmaxGroupsGetMembershipApprovalRequestsRPC","WAWebApiMembershipApprovalRequestStore","WAWebBackendApi","WAWebBackendErrors","WAWebJidToWid","WAWebRequestMethodType","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryMembershipApprovalRequests failed: ",":",""]);i=function(){return a};return a}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxGroupsGetMembershipApprovalRequestsRPC").sendGetMembershipApprovalRequestsRPC({iqTo:d("WAWebWidToJid").widToGroupJid(a)}));switch(a.name){case"GetMembershipApprovalRequestsResponseSuccess":return a.value.membershipApprovalRequestsMembershipApprovalRequest.map(function(a){var b=d("WAWebJidToWid").userJidToUserWid(a.jid);return{id:b,t:a.requestTime,addedBy:a.requestor!=null?d("WAWebJidToWid").userJidToUserWid(a.requestor):b,requestMethod:l(a.requestMethod),parentGroupId:a.parentGroupJid!=null?d("WAWebJidToWid").groupJidToWid(a.parentGroupJid):void 0}});case"GetMembershipApprovalRequestsResponseClientError":var b=a.value.errorGetMembershipApprovalRequestsClientErrors;return m(b.value);default:a.name;return m(a.value.errorServerErrors.value)}});return k.apply(this,arguments)}function l(a){switch(a){case"invite_link":return d("WAWebRequestMethodType").RequestMethod.InviteLink;case"linked_group_join":return d("WAWebRequestMethodType").RequestMethod.LinkedGroupJoin;case"non_admin_add":return d("WAWebRequestMethodType").RequestMethod.NonAdminAdd}}function m(a){var c=a.code;a=a.text;d("WALogger").LOG(i(),c,a);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a)),c=(yield d("WAWebApiMembershipApprovalRequestStore").getMembershipApprovalRequests(a));c=c.filter(function(a){return!b.some(function(b){return b.id.equals(a.id)})});yield d("WAWebApiMembershipApprovalRequestStore").removeMembershipApprovalRequests(a,c.map(function(a){return a.id}));yield d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a,b);d("WAWebBackendApi").frontendFireAndForget("removeMembershipApprovalRequests",{groupId:a,requestIds:c.map(function(a){return a.id})});d("WAWebBackendApi").frontendFireAndForget("addMembershipApprovalRequests",{groupId:a,requests:b})});return n.apply(this,arguments)}g.queryAndUpdateGroupMembershipApprovalRequests=a}),98);
__d("WAWebGroupQueryJob",["Promise","WALogger","WASmaxGroupsBatchGetGroupInfoRPC","WASmaxGroupsGetInviteGroupInfoRPC","WASmaxGroupsGetParticipatingGroupsRPC","WAWebABProps","WAWebApiChat","WAWebApiParticipantStore","WAWebBackendApi","WAWebBackendErrors","WAWebGroupDatabaseJob","WAWebGroupGetMembershipApprovalRequestsJob","WAWebGroupQueryGroupJob","WAWebGroupsQueryApi","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById failed: ",":",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById failed: ",":",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById: successfully received batch group info for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryAndUpdateGroupMetadataById: skip update due to phash match"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryAndUpdateGroupMetadataById: unable to query group ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInvite failed: ",":",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInvite failed: ",":",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryAllGroups failed: ",":",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryAllGroups failed: ",":",""]);q=function(){return a};return a}function a(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebApiParticipantStore").clearAdminshipCache();var a=(yield d("WASmaxGroupsGetParticipatingGroupsRPC").sendGetParticipatingGroupsRPC({hasParticipants:!0,hasDescription:!0}));switch(a.name){case"GetParticipatingGroupsResponseSuccess":return a.value.groupsGroup.map(function(a){a=a.groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup;return d("WAWebGroupsQueryApi").parseGroupSmax(a.value)});case"GetParticipatingGroupsResponseClientError":var c=a.value.errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup.value,e=c.code;c=c.text;d("WALogger").LOG(q(),e,c);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),c));case"GetParticipatingGroupsResponseServerError":e=a.value.errorServerErrors.value;c=e.code;a=e.text;d("WALogger").LOG(p(),c,a);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}});return r.apply(this,arguments)}function c(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxGroupsGetInviteGroupInfoRPC").sendGetInviteGroupInfoRPC({inviteCode:a}));switch(a.name){case"GetInviteGroupInfoResponseSuccess":return d("WAWebGroupsQueryApi").parseGroupSmax(a.value.groupInviteLinkGroupInfoMixin);case"GetInviteGroupInfoResponseClientError":var c=a.value.errorGetInviteGroupInfoClientErrors.value,e=c.code;c=c.text;d("WALogger").LOG(o(),e,c);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),c));case"GetInviteGroupInfoResponseServerError":e=a.value.errorServerErrors.value;c=e.code;a=e.text;d("WALogger").LOG(n(),c,a);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}});return s.apply(this,arguments)}function e(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WAWebGroupQueryGroupJob").queryGroupJob(a,b));if(b==null){d("WALogger").DEV(m(),a);return}if(b.phashMatch){d("WALogger").LOG(l());return}a=(yield d("WAWebApiParticipantStore").injectPastParticipantsFromDB([b]));b=a[0];a=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB([b]));b=a[0];yield d("WAWebGroupDatabaseJob").updateGroupParticipantTableWithoutDeviceSyncJob([b]);d("WAWebBackendApi").frontendFireAndForget("createOrUpdateGroupMetadataFromQuery",{groupInfo:b});yield u(b)});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.membershipApprovalMode&&a.participants.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)&&a.isAdmin})&&d("WAWebABProps").getABPropConfigValue("group_join_request_m2")){var b=(yield d("WAWebApiChat").getChatRecord(a.id));if(!b)return;return d("WAWebGroupGetMembershipApprovalRequestsJob").queryAndUpdateGroupMembershipApprovalRequests(a.id)}});return v.apply(this,arguments)}function f(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASmaxGroupsBatchGetGroupInfoRPC").sendBatchGetGroupInfoRPC({queryContext:c,groupArgs:a.map(function(a){return{groupJid:a}})}));switch(e.name){case"BatchGetGroupInfoResponseSuccess":d("WALogger").LOG(k(),a.length);return d("WAWebGroupsQueryApi").parseBatchGroupInfoSmax(c,e.value.groupsGroup);case"BatchGetGroupInfoResponseClientError":a=e.value.errorBatchGetGroupInfoClientErrors.value;c=a.code;a=a.text;d("WALogger").LOG(j(),c,a);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a));case"BatchGetGroupInfoResponseServerError":c=e.value.errorServerErrors.value;a=c.code;e=c.text;d("WALogger").LOG(i(),a,e);return(h||(h=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),e))}});return w.apply(this,arguments)}g.queryAllGroups=a;g.queryGroupInvite=c;g.queryAndUpdateGroupMetadataById=e;g.maybeQueryAndUpdateMembershipApprovalRequests=u;g.queryGroupsById=f}),98);
__d("WAWebSignalConst",[],(function(a,b,c,d,e,f){a={REG_ID:"signal_reg_id",STATIC_PUBKEY:"signal_static_pubkey",STATIC_PRIVKEY:"signal_static_privkey",NEXT_PK_ID:"signal_next_pk_id",LAST_SPK_ID:"signal_last_spk_id",FIRST_UNUPLOAD_PK_ID:"signal_first_unupload_pk_id",SERVER_HAS_KEY:"signal_sever_has_pre_keys",ADV_SIGNED_IDENTITY:"adv_signed_identity"};f.META_KEYS=a}),66);
__d("WAWebSignalStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="signal-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56356);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[signal-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebSignalStorageVersions",["WAWebSignalStorageUtils"],(function(a,b,c,d,e,f,g){var h=6;function a(){return d("WAWebSignalStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebSignalStorageUtils").getStorage().versions.version(1)}function c(){return d("WAWebSignalStorageUtils").getStorage().versions.version(2)}function e(){return d("WAWebSignalStorageUtils").getStorage().versions.version(3)}function f(){return d("WAWebSignalStorageUtils").getStorage().versions.version(4)}function i(){return d("WAWebSignalStorageUtils").getStorage().versions.version(5)}function j(){return d("WAWebSignalStorageUtils").getStorage().versions.version(6)}g.versionToRollout=h;g.identityCreateTable=a;g.metaCreateTable=b;g.preKeyCreateTable=c;g.sessionCreateTable=e;g.signedPreKeyCreateTable=f;g.baseKeyCreateTable=i;g.senderKeyCreateTable=j}),98);
__d("WAWebSchemaBasekey",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey,j=c.addCompositeIndex;function a(){d("WAWebSignalStorageUtils").getStorage().add("baseKey-store").version(d("WAWebSignalStorageVersions").baseKeyCreateTable(),[i("id"),h("address"),h("originalMsgId"),h("baseKey"),j(["address","originalMsgId"])]).view(function(a){return{id:a.id,address:a.address,originalMsgId:a.originalMsgId,baseKey:a.baseKey}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("baseKey-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaIdentity",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebSignalStorageUtils").getStorage().add("identity-store").version(d("WAWebSignalStorageVersions").identityCreateTable(),[i("identifier"),h("identityKey"),h("rowId"),h("sentAddonRowId")]).view(function(a){return{identifier:a.identifier,identityKey:a.identityKey,rowId:a.rowId,sentAddonRowId:a.sentAddonRowId}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("identity-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaMeta",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebSignalStorageUtils").getStorage().add("signal-meta-store").version(d("WAWebSignalStorageVersions").metaCreateTable(),[i("key"),h("value")]).view(function(a){return{key:a.key,value:a.value}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("signal-meta-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaPrekey",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey;function a(){d("WAWebSignalStorageUtils").getStorage().add("prekey-store").version(d("WAWebSignalStorageVersions").preKeyCreateTable(),[i("keyId"),h("keyPair"),h("isDirectDistribution")]).view(function(a){return{keyId:a.keyId,keyPair:a.keyPair,isDirectDistribution:a.isDirectDistribution}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("prekey-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaSenderkey",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey,j=c.addIndex;function a(){d("WAWebSignalStorageUtils").getStorage().add("senderkey-store").version(d("WAWebSignalStorageVersions").senderKeyCreateTable(),[i("senderKeyName"),h("senderKey"),h("senderId"),j("senderId")]).view(function(a){return{senderKeyName:a.senderKeyName,senderKey:a.senderKey,senderId:a.senderId}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("senderkey-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaSession",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebSignalStorageUtils").getStorage().add("session-store").version(d("WAWebSignalStorageVersions").sessionCreateTable(),[i("address"),h("session")]).view(function(a){return{address:a.address,session:a.session}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("session-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaSignedPrekey",["WAWebSignalStorageUtils","WAWebSignalStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey;function a(){d("WAWebSignalStorageUtils").getStorage().add("signed-prekey-store").version(d("WAWebSignalStorageVersions").signedPreKeyCreateTable(),[i("keyId"),h("keyPair"),h("signature")]).view(function(a){return{keyId:a.keyId,keyPair:a.keyPair,signature:a.signature}})}function b(){return d("WAWebSignalStorageUtils").getStorage().table("signed-prekey-store")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSignalStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebSchemaBasekey","WAWebSchemaIdentity","WAWebSchemaMeta","WAWebSchemaPrekey","WAWebSchemaSenderkey","WAWebSchemaSession","WAWebSchemaSignedPrekey","WAWebSignalStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebSignalStorageUtils").createStorage(),d("WAWebSchemaBasekey").addTable(),d("WAWebSchemaIdentity").addTable(),d("WAWebSchemaMeta").addTable(),d("WAWebSchemaPrekey").addTable(),d("WAWebSchemaSenderkey").addTable(),d("WAWebSchemaSession").addTable(),d("WAWebSchemaSignedPrekey").addTable(),i=d("WAWebSignalStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize signal storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebSignalStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebSignalStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}g.getBaseKeyTable=d("WAWebSchemaBasekey").getTable;g.getIdentityTable=d("WAWebSchemaIdentity").getTable;g.getMetaTable=d("WAWebSchemaMeta").getTable;g.getPreKeyTable=d("WAWebSchemaPrekey").getTable;g.getSenderKeyTable=d("WAWebSchemaSenderkey").getTable;g.getSessionTable=d("WAWebSchemaSession").getTable;g.getSignedPreKeyTable=d("WAWebSchemaSignedPrekey").getTable;g.initialize=a;g.destroy=e}),98);
__d("WAWebSignalStoreApi",["Promise","WALogger","WAWebSignalCommonUtils","WAWebSignalConst","WAWebSignalStorage","WAWebSignalStorageUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPreKeys: no prekey needs to be generated, available: ",", need: ",""]);i=function(){return a};return a}var j=1;a=function(){function a(){this.idToSignedPreKey=new Map()}var e=a.prototype;e.getMeta=function(a){var b=d("WAWebSignalStorage").getMetaTable();return b.get(a).then(function(a){return a?a.value:null})};e.putMeta=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=d("WAWebSignalStorage").getMetaTable();a=a.map(function(a){return c.createOrReplace(a)});yield (h||(h=b("Promise"))).all(a)});function c(b){return a.apply(this,arguments)}return c}();e.setServerHasPreKeys=function(a){this.putMeta([{key:d("WAWebSignalConst").META_KEYS.SERVER_HAS_KEY,value:a}])};e.getServerHasPreKeys=function(){return this.getMeta(d("WAWebSignalConst").META_KEYS.SERVER_HAS_KEY)};e.putADVSignedIdentity=function(a){return this.putMeta([{key:d("WAWebSignalConst").META_KEYS.ADV_SIGNED_IDENTITY,value:a}])};e.getADVSignedIdentity=function(){return this.getMeta(d("WAWebSignalConst").META_KEYS.ADV_SIGNED_IDENTITY)};e.getPreKeysByRange=function(a,b){var c=d("WAWebSignalStorage").getPreKeyTable();return c.greaterThan(["keyId"],a-1,{limit:b})};e.getPreKeyById=function(a){var b=d("WAWebSignalStorage").getPreKeyTable();return b.get(a)};e.removePreKeyById=function(a){var b=d("WAWebSignalStorage").getPreKeyTable();return b.remove(a)};e.bulkRemovePreKey=function(a){var b=d("WAWebSignalStorage").getPreKeyTable();return b.bulkRemove(a)};e.putPreKeys=function(a){var b=d("WAWebSignalStorage").getPreKeyTable();return b.bulkCreateOrReplace(a)};e.markPreKeyAsDirectDistribution=function(a){var b=d("WAWebSignalStorage").getPreKeyTable();return b.merge(a,{isDirectDistribution:1})};e.getSignedPreKey=function(){var a=this;return this.getMeta(d("WAWebSignalConst").META_KEYS.LAST_SPK_ID).then(function(b){return a.getSignedPreKeyById(b)})};e.getSignedPreKeyById=function(a){var c=this;if(this.idToSignedPreKey.has(a))return(h||(h=b("Promise"))).resolve(this.idToSignedPreKey.get(a));var e=d("WAWebSignalStorage").getSignedPreKeyTable();return e.get(a).then(function(b){c.idToSignedPreKey.set(a,b);return b})};e.putSignedPreKeys=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=d("WAWebSignalStorage").getSignedPreKeyTable();a=a.map(function(a){var b=a.keyId,d=a.keyPair,f=a.signature;return e.get(b).then(function(a){if(a)throw c("err")("signed preKey id "+b+" already exists");else{a={keyId:b,keyPair:d,signature:f};return e.create(a)}})});yield (h||(h=b("Promise"))).all(a)});function e(b){return a.apply(this,arguments)}return e}();e.putSession=function(a,b){var c=d("WAWebSignalStorage").getSessionTable();return c.createOrReplace({address:a,session:b})};e.bulkPutSession=function(a){var b=d("WAWebSignalStorage").getSessionTable();return b.bulkCreateOrReplace(a)};e.removeSession=function(a){var b=d("WAWebSignalStorage").getSessionTable();return b.remove(a)};e.bulkRemoveSession=function(a){var b=d("WAWebSignalStorage").getSessionTable();return b.bulkRemove(a)};e.getSession=function(a){var b=d("WAWebSignalStorage").getSessionTable();return b.get(a).then(function(a){return a?a.session:null})};e.bulkGetSession=function(a){var b=d("WAWebSignalStorage").getSessionTable();return b.bulkGet(a).then(function(a){return a.map(function(a){return a?a.session:null})})};e.putIdentity=function(a,b){var c=d("WAWebSignalStorage").getIdentityTable();return c.createOrReplace({identifier:a,identityKey:b})};e.bulkPutIdentity=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.bulkCreateOrReplace(a)};e.bulkGetIdentity=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.bulkGet(a).then(function(a){return a.map(function(a){return a?a.identityKey:null})})};e.getIdentity=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.get(a).then(function(a){return a?a.identityKey:null})};e.removeIdentity=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.remove(a)};e.bulkRemoveIdentity=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.bulkRemove(a)};e.getIdentityKeyWithRowId=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.get(a).then(function(a){return a?{identityKey:a.identityKey,rowId:a.rowId,sentAddonRowId:a.sentAddonRowId}:null})};e.bulkGetIdentityKeyWithRowId=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.bulkGet(a).then(function(a){return a.map(function(a){return a?{identityKey:a.identityKey,rowId:a.rowId}:null})})};e.bulkPutIdentityKeyWithRowId=function(a){var b=d("WAWebSignalStorage").getIdentityTable();return b.bulkCreateOrReplace(a)};e.saveBaseKey=function(a,b,c){var e=d("WAWebSignalStorage").getBaseKeyTable();return e.createOrReplace({address:a,originalMsgId:b,baseKey:c})};e.loadBaseKey=function(a,b){var c=d("WAWebSignalStorage").getBaseKeyTable();return c.equals(["address","originalMsgId"],[a,b]).then(function(a){return a&&a.length!==0?a[0].baseKey:null})};e.deleteBaseKey=function(a,b){var c=d("WAWebSignalStorage").getBaseKeyTable();return c.equals(["address","originalMsgId"],[a,b]).then(function(a){if(a&&a.length!==0)return c.remove(a[0].id)})};e.putSenderKey=function(a,b,c){var e=d("WAWebSignalStorage").getSenderKeyTable();return e.createOrReplace({senderKeyName:a,senderId:b,senderKey:c})};e.bulkPutSenderKey=function(a){var b=d("WAWebSignalStorage").getSenderKeyTable();return b.bulkCreateOrReplace(a)};e.removeSenderKey=function(a){var b=d("WAWebSignalStorage").getSenderKeyTable();return b.remove(a)};e.getSenderKey=function(a){var b=d("WAWebSignalStorage").getSenderKeyTable();return b.get(a).then(function(a){return a?a.senderKey:null})};e.removeSenderKeyBySenderId=function(a){var b=d("WAWebSignalStorage").getSenderKeyTable();return b.equals(["senderId"],a).then(function(a){return b.bulkRemove(a.map(function(a){return a.senderKeyName}))})};e.clearCredential=function(){var a;a=[(a=d("WAWebSignalStorage")).getIdentityTable(),a.getMetaTable(),a.getPreKeyTable(),a.getSessionTable(),a.getSignedPreKeyTable()];return(h||(h=b("Promise"))).all(a.map(function(a){return a.clear()})).then(function(){})};e.getRegistrationInfo=function(){var a=this;return this.registrationInfo!=null?(h||(h=b("Promise"))).resolve(this.registrationInfo):(h||(h=b("Promise"))).all([this.getMeta(d("WAWebSignalConst").META_KEYS.REG_ID),this.getMeta(d("WAWebSignalConst").META_KEYS.STATIC_PUBKEY),this.getMeta(d("WAWebSignalConst").META_KEYS.STATIC_PRIVKEY)]).then(function(c){var e=c[0],f=c[1];c=c[2];if(!e||!f||!c)return;return(h||(h=b("Promise"))).all([d("WAWebSignalCommonUtils").decryptRegistrationMaterial(f),d("WAWebSignalCommonUtils").decryptRegistrationMaterial(c)]).then(function(b){var c=b[0];b=b[1];a.registrationInfo={registrationId:e,identityKeyPair:{pubKey:c,privKey:b}};return a.registrationInfo})})};e.setRegistrationInfo=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;yield (h||(h=b("Promise"))).all([d("WAWebSignalCommonUtils").encryptRegistrationMaterial(a.identityKeyPair.pubKey),d("WAWebSignalCommonUtils").encryptRegistrationMaterial(a.identityKeyPair.privKey)]).then(function(e){var f=e[0];e=e[1];return(h||(h=b("Promise"))).all([c.putMeta([{key:d("WAWebSignalConst").META_KEYS.REG_ID,value:a.registrationId},{key:d("WAWebSignalConst").META_KEYS.STATIC_PUBKEY,value:f},{key:d("WAWebSignalConst").META_KEYS.STATIC_PRIVKEY,value:e}])])})});function c(b){return a.apply(this,arguments)}return c}();e.getOrGenPreKeys=function(a,c){var e=this;return d("WAWebSignalStorageUtils").getStorage().lock(["signal-meta-store","prekey-store"],function(){return(h||(h=b("Promise"))).all([e.getMeta(d("WAWebSignalConst").META_KEYS.FIRST_UNUPLOAD_PK_ID),e.getMeta(d("WAWebSignalConst").META_KEYS.NEXT_PK_ID)]).then(function(f){var g=f[0];f=f[1];var l=g?g:j;g=f?f:j;f=g-l;var m=a-f;if(m<=0){d("WALogger").LOG(i(),f,a);return e.getPreKeysByRange(l,a)}f=k(g,g+m).map(function(a){return c(a)});return(h||(h=b("Promise"))).all(f).then(function(a){return e.savePreKeys(a)}).then(function(){return e.getPreKeysByRange(l,a)})})})};e.getOrGenSinglePreKey=function(a){return this.getOrGenPreKeys(1,a).then(function(a){if(a.length!==1)throw c("err")("Expected to get exactly one key but got "+a.length);return a[0]})};e.savePreKeys=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var c=a[a.length-1];yield (h||(h=b("Promise"))).all([this.putMeta([{key:d("WAWebSignalConst").META_KEYS.NEXT_PK_ID,value:c.keyId+1}]),this.putPreKeys(a)])});function c(b){return a.apply(this,arguments)}return c}();e.markKeyAsUploaded=function(a){var e=this;return(h||(h=b("Promise"))).all([this.getMeta(d("WAWebSignalConst").META_KEYS.FIRST_UNUPLOAD_PK_ID),this.getMeta(d("WAWebSignalConst").META_KEYS.NEXT_PK_ID)]).then(function(b){var f=b[0];b=b[1];if(a<0||!b||a>=b)throw c("err")("markKeyAsUploaded: key "+a+" is out of boundary.");b=f?Math.max(f,a+1):a+1;return e.putMeta([{key:d("WAWebSignalConst").META_KEYS.FIRST_UNUPLOAD_PK_ID,value:b}])})};e.rotateSignedPreKey=function(a,b){var c=this;return d("WAWebSignalStorageUtils").getStorage().lock(["signal-meta-store","signed-prekey-store"],function(){return c.getMeta(d("WAWebSignalConst").META_KEYS.LAST_SPK_ID).then(function(e){var f=e==null?j:e+1;return b(a,f).then(function(a){c.putSignedPreKeys([a]);c.putMeta([{key:d("WAWebSignalConst").META_KEYS.LAST_SPK_ID,value:f}]);return a})})})};return a}();function k(a,b){var c=[];for(a=a;a<b;a++)c.push(a);return c}e=new a();g.waSignalStore=e}),98);
__d("WAWebDigestKeyJob",["Promise","WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebSignalStoreApi","WAWebUploadPreKeysJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateLocalKeyBundle: success"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["digestKey: validate key bundle failed, upload prekeys again"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["digestKey: server error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["digestKey: service unavailable"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["digestKey: malformed request"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["digestKey: no record found for current user"]);n=function(){return a};return a}var o=32,p=new(c("WADeprecatedWapParser"))("digestResponseParser",function(a){a=a.child("digest");var b=a.child("skey");return{regId:a.child("registration").contentUint(4),type:a.child("type").contentUint(1),identity:a.child("identity").contentBytes(32),skey:{id:b.child("id").contentUint(3),pubkey:b.child("value").contentBytes(32),signature:b.child("signature").contentBytes(64)},keys:a.child("list").mapChildren(function(a){return a.contentUint(3)}),hash:a.child("hash").contentBytes(20)}});function a(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=d("WAWap")).wap("iq",{xmlns:"encrypt",type:"get",to:a.S_WHATSAPP_NET,id:a.generateId()},a.wap("digest",null));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,p));var b;if(a.success)try{yield r(a.result),b=!1}catch(a){b=!1}else{a=a.errorCode;a===404?(d("WALogger").WARN(n()),b=!0):a===406?(d("WALogger").WARN(m()),b=!1):a===503?(d("WALogger").WARN(l()),b=!1):(d("WALogger").WARN(k(),a),b=!1)}if(b!=null&&b){d("WALogger").LOG(j());return d("WAWebUploadPreKeysJob").uploadPreKeys()}});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()])),f=e[0];e=e[1];if(!f||!e)throw c("err")("validateLocalKeyBundle: No registration info is available");if(a.regId!==f.registrationId)throw c("err")("validateLocalKeyBundle: registation id mismatch");f=f.identityKeyPair.pubKey;var g=e.keyPair.pubKey,j=f.byteLength+g.byteLength+e.signature.byteLength+a.keys.length*o,k=new Uint8Array(j),l=0;[f,g,e.signature].forEach(function(a){k.set(new Uint8Array(a),l),l+=a.byteLength});j=a.keys.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSignalStoreApi").waSignalStore.getPreKeyById(a));if(!b)throw c("err")("validateLocalKeyBundle: missing prekey record for id "+a);return b.keyPair.pubKey});return function(b){return a.apply(this,arguments)}}());f=(yield h.all(j));f.forEach(function(a){k.set(new Uint8Array(a),l),l+=a.byteLength});g=(yield self.crypto.subtle.digest("SHA-1",k));e=d("WABase64").encodeB64(g);j=d("WABase64").encodeB64(a.hash);if(e!==j)throw c("err")("validateLocalKeyBundle: hash mismatch remote:"+j+" local:"+e);d("WALogger").LOG(i())});return s.apply(this,arguments)}g.digestKey=a}),98);
__d("WAWebGetIdentityKeysJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebCommsWapMd","WAWebCryptoCurve25519","WAWebJidToWid","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAndStoreIdentityKeys: query "," missing keys for "," contacts"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAndStoreIdentityKeys: got 0 missing keys"]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("identityKeysParser",function(a){return a.child("list").mapChildren(function(a){if(a.hasChild("error")){var b=a.child("error"),e=b.attrInt("code");b=b.attrString("text");throw c("err")("identityKeysParser bad response: "+e+" "+b)}else return{type:a.child("type").contentBytes(1),identity:a.child("identity").contentBytes(32),user:d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("jid"))}})});function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(a.map(function(a){return String(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a))}))),c=a.filter(function(a,c){return b[c]==null});if(c.length===0){d("WALogger").LOG(i());return}d("WALogger").LOG(h(),c.length,a.length);a=(yield l(c));c=a.map(function(a){var b=a.identity;b=d("WAWebCryptoCurve25519").toSignalCurvePubKey(b.buffer.slice(b.byteOffset,b.byteLength+b.byteOffset));b=d("WAWebSignalCommonUtils").bufferToStr(b);a=d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a.user);return{identityKey:b,identifier:a.toString()}});return d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkCreateIdentity(c)});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.map(function(a){return d("WAWap").wap("user",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)})});b=(b=d("WAWap")).wap("iq",{xmlns:"encrypt",type:"get",to:b.S_WHATSAPP_NET,id:b.generateId()},b.wap("identity",null,a));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,j));if(!a.success)throw c("err")("getIdentityKeys bad response "+String(a));return a.result});return m.apply(this,arguments)}g.getAndStoreIdentityKeys=a}),98);
__d("WAWebRotateKeyJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebCryptoCurve25519","WAWebDefinePersistedJob","WAWebDigestKeyJob","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateKey unrecognized error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateKey server error ",", wait a day"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["skey does not pass server validation"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateKey generated bad key"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateKey: signedPreKey uploading"]);l=function(){return a};return a}var m=new(c("WADeprecatedWapParser"))("rotateKeyResponseParser",function(a){a.assertFromServer()});a=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("uploadKeys",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo().then(function(a){if(!a)throw c("err")("No registration info is available");return d("WAWebSignalStoreApi").waSignalStore.rotateSignedPreKey(d("WAWebCryptoCurve25519").toSignalCurveKeyPair(a.identityKeyPair),d("WAWebSignalKeyApi").generateSignedKeyPair)}));d("WALogger").LOG(l());a=(a=d("WAWap")).wap("iq",{xmlns:"encrypt",type:"set",to:a.S_WHATSAPP_NET,id:a.generateId()},a.wap("rotate",null,d("WAWebSignalUtilsApi").xmppSignedPreKey(b)));b=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,m));if(b.success)return{shouldDigestKey:!1};a=!1;b=b.errorCode;b===406?d("WALogger").WARN(k()):b===409?(d("WALogger").WARN(j()),a=!0):b>=500?d("WALogger").LOG(i(),b):(d("WALogger").LOG(h(),b),a=!0);return{shouldDigestKey:a}})).finalStep("maybeDigestKey",function(a){a=a.shouldDigestKey;if(a)return d("WAWebDigestKeyJob").digestKey()}).end();g.rotateKey=a}),98);
__d("WAWebUploadPreKeysJob",["Promise","WAComms","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAPromiseRetryLoop","WAWap","WAWebConstantsDeprecated","WAWebServerPropsModel","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: disconnected, unclear if on server: "," (count: ",", size: ","b)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: unrecognized error "," (count: ",", size: ","b)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: uploaded invalid keys (count: ",", size: ","b)"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: server requested backoff "," (count: ",", size: ","b)"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: "," keys uploaded, raw stanza size: ","b"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: retrying (after delay)"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: done"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: running"]);p=function(){return a};return a}var q={error:!1,result:!0},r=new(c("WADeprecatedWapParser"))("uploadPreKeyResParser",function(a){a.assertTag("iq");a.assertFromServer();var b=a.attrEnum("type",q);if(b)return{success:!0};b=a.child("error");return{errorCode:b.attrInt("code"),errorText:b.hasAttr("text")?b.attrString("text"):""}});function s(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebServerPropsModel").ServerProps.maxKeys,e=(yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()])),f=e[0],g=e[1];if(!f||!g)throw c("err")("No signal info is available");var n=f.registrationId,o=f.identityKeyPair;e=(yield d("WAWebSignalStoreApi").waSignalStore.getOrGenPreKeys(a,d("WAWebSignalKeyApi").generatePreKeyPair).then(function(a){if(a.length===0)throw c("err")("No preKey is available");return[d("WAWap").wap("iq",{id:d("WAWap").generateId(),xmlns:"encrypt",type:"set",to:d("WAWap").S_WHATSAPP_NET},d("WAWap").wap("registration",null,d("WAWap").BIG_ENDIAN_CONTENT(n)),d("WAWap").wap("type",null,c("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),d("WAWap").wap("identity",null,o.pubKey),d("WAWap").wap("list",null,a.map(d("WAWebSignalUtilsApi").xmppPreKey)),d("WAWebSignalUtilsApi").xmppSignedPreKey(g)),a[a.length-1].keyId]}));var p=e[0],q=e[1];try{f=(yield d("WAComms").waitForConnection().then(function(){return d("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(q)}).then(function(){return d("WADeprecatedSendIq").deprecatedSendIqWithoutRetry(p,r)}));if(f.success){d("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!0);d("WALogger").LOG(m(),a,p.toString().length);return{success:!0}}e=f.errorCode;e>=500?d("WALogger").WARN(l(),e,a,p.toString().length):e===406?d("WALogger").WARN(k(),a,p.toString().length):d("WALogger").WARN(j(),e,a,p.toString().length);return{errorCode:f.errorCode,errorText:f.errorText}}catch(b){d("WALogger").WARN(i(),b,a,p.toString().length);return}});return t.apply(this,arguments)}var u={algo:{type:"fibonacci",first:1e3,second:2e3},max:61e4};function a(){var a=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"uploadPreKeys",timer:u,code:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(p());var b=(yield s());(b==null?void 0:b.success)===!0?(d("WALogger").LOG(o()),a()):d("WALogger").LOG(n())});function c(b){return a.apply(this,arguments)}return c}()});a.start();return a.promise()}g.uploadPreKeyResParser=r;g.uploadPreKeys=a}),98);
__d("WAWebHandleMsgMetaUtils",["WAWebHandleMsgCommon","WAWebMsgType"],(function(a,b,c,d,e,f,g){b=function(a){return(a==null?void 0:a.type)===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.reaction};c=function(a){return(a==null?void 0:a.type)===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll&&(a==null?void 0:a.pollType)===d("WAWebHandleMsgCommon").POLL_TYPES.vote};var h=function(a){return(a==null?void 0:a.type)===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text&&(a==null?void 0:a.threadMsgId)!=null&&(a==null?void 0:a.threadMsgSenderJid)!=null};e=function(a){return(a==null?void 0:a.type)===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event&&(a==null?void 0:a.eventType)===d("WAWebHandleMsgCommon").EVENT_TYPES.response};f=function(a){return(a==null?void 0:a.type)===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event&&(a==null?void 0:a.eventType)===d("WAWebHandleMsgCommon").EVENT_TYPES.edit};function a(a){if(a==null)return;if(h(a))return d("WAWebMsgType").MSG_TYPE.COMMENT}g.isReactionMsgMeta=b;g.isPollVoteMsgMeta=c;g.isCommentMsgMeta=h;g.isEventResponseMsgMeta=e;g.isEventEditMsgMeta=f;g.getMsgTypeFromMsgMeta=a}),98);
__d("WAWebSendAggregateDeliveryReceipts",["$InternalEnum","Promise","WAWebBackendApi","WAWebCmd","WAWebDBMsgUtils","WAWebHandleMsgMetaUtils","WAWebMsgProcessingApiUtils","WAWebPollsVotesSchema","WAWebSchemaReactions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=b("$InternalEnum").Mirrored(["Message","Reaction","PollVote","NotSupportedAddon"]),j=function(a){if(a.hasHideFailEnc){if(d("WAWebHandleMsgMetaUtils").isPollVoteMsgMeta(a.msgMeta))return i.PollVote;return d("WAWebHandleMsgMetaUtils").isReactionMsgMeta(a.msgMeta)?i.Reaction:i.NotSupportedAddon}return i.Message};function k(a){var b=new Map();a.forEach(function(a){var c,d=j(a);c=(c=b.get(d))!=null?c:b.set(d,[]).get(d);c==null?void 0:c.push(a)});return b}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=a.map(function(a){a=a.msgInfo;return d("WAWebMsgProcessingApiUtils").messageInfoToKey(a)});b=d("WAWebCmd").Cmd.isMainStreamReadyMd?yield b(a):a.map(function(){return!1});var e=new Set(),f=[];for(b of b.entries()){var g=b[0],h=b[1];h?e.add(a[g].toString()):f.push(a[g].toString())}if(f.length===0)return e;h=(yield c(f));return new Set([].concat(Array.from(e),Array.from(h)))});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){switch(a){case i.Message:return l(c,function(a){return d("WAWebBackendApi").frontendSendAndReceive("hasMsgsInCollection",{msgKeys:a})},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set();return d("WAWebDBMsgUtils").getMsgsExistByMsgKey(a).then(function(c){for(c of c.entries()){var d=c[0],e=c[1];e&&b.add(a[d])}return b})});return function(b){return a.apply(this,arguments)}}());case i.Reaction:return l(c,function(a){return d("WAWebBackendApi").frontendSendAndReceive("hasReactionsInCollection",{msgKeys:a})},function(a){var b=new Set();return d("WAWebSchemaReactions").getReactionsTable().anyOf(["msgKey"],a).then(function(a){for(a of a)b.add(a.msgKey);return b})});case i.PollVote:return l(c,function(a){return d("WAWebBackendApi").frontendSendAndReceive("hasPollVotesInCollection",{msgKeys:a})},function(a){return d("WAWebPollsVotesSchema").getTable().anyOf(["msgKey"],a,{shouldDecrypt:!1}).then(function(a){var b=new Set();for(a of a)b.add(a.msgKey);return b})});case i.NotSupportedAddon:a=new Set();for(c of c){var e=c.msgInfo;a.add(d("WAWebMsgProcessingApiUtils").messageInfoToKey(e).toString())}return a}});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var c=[],e=[];for(a of a)a.msgReceivedTimes>1?c.push({isInDB:!0,receipt:a}):e.push(a);if(e.length>0){var f=(yield n(b,e));c=c.concat(e.map(function(a){return{isInDB:f.has(d("WAWebMsgProcessingApiUtils").messageInfoToKey(a.msgInfo).toString()),receipt:a}}))}return c});return q.apply(this,arguments)}function a(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;a=k(a);a=(yield (h||(h=b("Promise"))).all(Array.from(a.entries()).map(p)));return(c=[]).concat.apply(c,a)});return r.apply(this,arguments)}g.aggregateDeliveryReceipts=a}),98);
__d("WAWebUnknownStanzaWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({UnknownStanza:[3448,{unknownStanzaTag:[1,d("WAWebWamCodegenUtils").TYPES.STRING],unknownStanzaType:[2,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{UnknownStanza:[]});g.UnknownStanzaWamEvent=a}),98);
__d("WAWebPostUnknownStanzaMetric",["WAWebUnknownStanzaWamEvent"],(function(a,b,c,d,e,f,g){function a(a){new(d("WAWebUnknownStanzaWamEvent").UnknownStanzaWamEvent)({unknownStanzaTag:a.tag,unknownStanzaType:(a=a.attrs.type)==null?void 0:a.toString()}).commit()}g.postUnknownStanzaMetric=a}),98);
__d("WAWebCreateNackFromStanza",["$InternalEnum","WALogger","WAWap","WAWebPostUnknownStanzaMetric"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendNack called with unsupported stanza tag: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["createNackFromStanza: failed with unhandled reason: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["createNackFromStanza: failed for class: '","' type: '","' id: '","' reason: '","'"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["createNackFromStanza: failed: 'id' or 'form' is null for class: '","' type: '","' reason: '","'"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["createNackFromStanza: class: '","' type: '","' id: '","' reason: '","'"]);l=function(){return a};return a}var m=b("$InternalEnum")({ParsingError:487,UnrecognizedStanza:488,UnrecognizedStanzaClass:489,UnrecognizedStanzaType:490,InvalidProtobuf:491,InvalidHostedCompanionStanza:493,MissingMessageSecret:495,SignalErrorOldCounter:496,MessageDeletedOnPeer:499,UnhandledError:500,UnsupportedAdminRevoke:550,UnsupportedLIDGroup:551,DBOperationFailed:552});function a(a,b){var c,e,f=a==null?void 0:a.tag;c=a==null?void 0:(c=a.attrs)==null?void 0:c.id;e=a==null?void 0:(e=a.attrs)==null?void 0:(e=e.type)==null?void 0:e.toString();var g=m.getName(b);try{var h;d("WALogger").LOG(l(),f,e,c,g);if(c!=null&&(a==null?void 0:(h=a.attrs)==null?void 0:h.from)!=null)return n(a,b);d("WALogger").ERROR(k(),f,e,g);d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a)}catch(a){d("WALogger").ERROR(j(),f,e,c,g);d("WALogger").ERROR(i(),(h=a.message)!=null?h:a).sendLogs("send-nack-exception")}return"NO_ACK"}function n(a,b){var c=a.attrs;if(b===m.UnrecognizedStanza)return d("WAWap").wap("ack",{"class":a.tag,id:c.id,to:c.from,type:c.type||d("WAWap").DROP_ATTR,participant:c.participant||d("WAWap").DROP_ATTR,error:d("WAWap").INT(b)});switch(a.tag){case"notification":return d("WAWap").wap("ack",{"class":"notification",id:c.id,to:c.from,type:c.type||d("WAWap").DROP_ATTR,participant:c.participant||d("WAWap").DROP_ATTR,error:d("WAWap").INT(b)});case"message":return d("WAWap").wap("ack",{"class":"message",id:c.id,to:c.from,type:c.type||d("WAWap").DROP_ATTR,participant:c.participant||d("WAWap").DROP_ATTR,error:d("WAWap").INT(b)});case"receipt":return d("WAWap").wap("ack",{"class":"receipt",id:c.id,to:c.from,type:c.type||d("WAWap").DROP_ATTR,participant:c.participant||d("WAWap").DROP_ATTR,error:d("WAWap").INT(b)});default:d("WALogger").WARN(h(),a.tag).sendLogs("unsupported-nack");d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);return"NO_ACK"}}g.NackReason=m;g.createNackFromStanza=a}),98);
__d("WAWebHandleMsgSendAck",["WADeprecatedSendIq","WALogger","WAWap","WAWebABProps","WAWebCommsWapMd","WAWebCreateNackFromStanza","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendNack: InvalidProtobuf error is missing e2eFailureReason"]);h=function(){return a};return a}function a(a,b,c,e){d("WADeprecatedSendIq").deprecatedCastStanza(d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),"class":"message",from:d("WAWebCommsWapMd").DEVICE_JID(d("WAWebUserPrefsMeUser").assertGetMe()),to:b?d("WAWebCommsWapMd").JID(b):d("WAWap").DROP_ATTR,participant:e?d("WAWebCommsWapMd").DEVICE_JID(e):d("WAWap").DROP_ATTR,type:(a=c)!=null?a:d("WAWap").DROP_ATTR}))}function b(a,b,c,e,f,g){var i=null;d("WAWebABProps").getABPropConfigValue("send_invalid_protobuf_nack_failure_reason")&&f===d("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf&&(g!=null?i=d("WAWap").wap("meta",{failure_reason:d("WAWap").INT(g)}):d("WALogger").ERROR(h()).sendLogs("invalid-protobuf-nack-missing-failure-reason"));d("WADeprecatedSendIq").deprecatedCastStanza(d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),"class":"message",from:d("WAWebCommsWapMd").DEVICE_JID(d("WAWebUserPrefsMeUser").assertGetMe()),to:b?d("WAWebCommsWapMd").JID(b):d("WAWap").DROP_ATTR,participant:e?d("WAWebCommsWapMd").DEVICE_JID(e):d("WAWap").DROP_ATTR,type:(g=c)!=null?g:d("WAWap").DROP_ATTR,error:d("WAWap").INT(f)},i))}g.sendAck=a;g.sendNack=b}),98);
__d("WAWebPendingMessageKey",[],(function(a,b,c,d,e,f){function a(a,b,c){c=c.map(function(a){return String(a.e2eType)+":"+a.retryCount}).join(",");return a.toString()+"_"+b.toString()+"_"+c}f.createPendingMessageKey=a}),66);
__d("WAWebMessageDedupUtils",["WALogger","WAWebABProps","WAWebPendingMessageKey"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-dedup] message cache cleared, total: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-dedup] message "," is pending, total: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message-dedup] add message: ",", total: ",""]);j=function(){return a};return a}var k=new Map();function a(){return d("WAWebABProps").getABPropConfigValue("web_pending_message_cache_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("web_message_dedup_enabled")}function c(a,b,c){a=d("WAWebPendingMessageKey").createPendingMessageKey(a,b,c);c=((b=k.get(a))!=null?b:0)+1;k.set(a,c);d("WALogger").LOG(j(),a,c);return c}function e(a,b,c){a=d("WAWebPendingMessageKey").createPendingMessageKey(a,b,c);b=k.get(a);if(b==null)return!1;d("WALogger").LOG(i(),a,b);return!0}function f(a){a===0&&(k.size>0&&d("WALogger").LOG(h(),k.size),k.clear())}g.isPengingMessageCacheEnabled=a;g.isMessageDedupEnabled=b;g.addPendingMessage=c;g.hasPendingMessage=e;g.maybeClearPendingMessages=f}),98);
__d("WAWebOffdStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="offd-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56317);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[offd-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebSchemaDanglingReceipt",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey;function a(){d("WAWebOffdStorageUtils").getStorage().add("dangling-receipt").version(d("WAWebOffdStorageUtils").getStorage().versions.version(1),[i("id"),h("receipts"),h("acks")]).view(function(a){return a})}function b(){return d("WAWebOffdStorageUtils").getStorage().table("dangling-receipt")}g.addTable=a;g.getTable=b}),98);
__d("WAWebCommsAckParser",["WAJids","WAWebWidToJid"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAJids").extractJidFromJidWithType(d("WAWebWidToJid").widToJidWithType(a.from)),c=a.participant==null?void 0:d("WAWebWidToJid").widToDeviceJid(a.participant),e=a.recipient==null?void 0:d("WAWebWidToJid").widToUserJid(a.recipient);return babelHelpers["extends"]({},a,{from:b,participant:c,recipient:e})}g.toCoreAckTemplate=a}),98);
__d("WAWebSendReceiptJobCommon",["Promise","WAAbortError","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebABProps","WAWebCommsAckParser","WAWebCommsWapMd","WAWebPrivacySettings","WAWebSchemaChat","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[messaging] sendAggregateReceipts: Invalid ack from server"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendReceiptAndHandleAck: Aborting due to signal abort"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAggregateReceipts: Aborting due to signal abort"]);k=function(){return a};return a}var l=new Set(),m=Object.freeze({INACTIVE:"inactive",SENDER:"sender",DELIVERY:"delivery",READ:"read",READ_SELF:"read-self",PLAYED:"played",PLAYED_SELF:"played-self",HISTORY_SYNC_COMPLETION:"hist_sync",SERVER_ERROR:"server-error",PEER_MSG:"peer_msg"}),n=256,o=new(c("WADeprecatedWapParser"))("readReceiptAckParser",function(a){a.assertTag("ack");return{readReceipts:a.hasAttr("readreceipts")?a.attrEnum("readreceipts",d("WAWebPrivacySettings").ALL_NONE):null}});function p(a,b){b=c("lodash").flatten(Array.from(b.values()));var e=b[0];b=b.slice(1);b=b.length>0?d("WAWap").wap("list",null,b.map(function(a){return d("WAWap").wap("item",{id:d("WAWap").CUSTOM_STRING(a)})})):null;e=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(e),to:d("WAWebCommsWapMd").JID(a),"class":d("WAWap").CUSTOM_STRING("message"),type:d("WAWap").CUSTOM_STRING("text")},b);return d("WADeprecatedSendIq").deprecatedCastStanza(e)}function q(a,b,c,e){var f=a[0];a=a.slice(1);a=a.length>0?d("WAWap").wap("list",null,a.map(function(a){return d("WAWap").wap("item",{id:d("WAWap").CUSTOM_STRING(a)})})):null;f=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(f),to:d("WAWebCommsWapMd").JID(b),recipient:c!=null?d("WAWebCommsWapMd").USER_JID(c):d("WAWap").DROP_ATTR,participant:e!=null?d("WAWebCommsWapMd").USER_JID(e):d("WAWap").DROP_ATTR,"class":d("WAWap").CUSTOM_STRING("message"),type:d("WAWap").CUSTOM_STRING("text")},a);return d("WADeprecatedSendIq").deprecatedCastStanza(f)}function a(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.to,e=a.type,f=a.groupedReceipt,g=a.t,l=a.recipient,r=a.signal;if(c.isNewsletter()&&e===m.DELIVERY)return p(c,f);var t=e===m.READ||e===m.PLAYED||e===m.READ_SELF||e===m.PLAYED_SELF||e===m.HISTORY_SYNC_COMPLETION,u=(yield s(c,e,m.DELIVERY));if((r==null?void 0:r.aborted)&&d("WAWebABProps").getABPropConfigValue("web_abort_preacks_on_disconnect_enabled")){d("WALogger").LOG(k()).tags("messaging");throw new(d("WAAbortError").AbortError)()}yield (h||(h=b("Promise"))).all(Array.from(f.keys()).map(function(a){var k=f.get(a);if(!k||k.length===0)return;var p=!c.isBot()&&a.isBot();if(e===m.DELIVERY&&p){var s,v;c.isUser()?(p=a,s=c):(p=c,v=a);q(k,p,s,v);return}var w=c.isUser()||c.isNewsletter()?null:a,x=c,y=l;y==null&&c.isUser()&&!c.isBot()&&a.isBot()&&(x=a,y=c);var z=[];p=function(){var a=k.splice(0,n),c=null;a.length>1&&(c=d("WAWap").wap("list",null,a.slice(1).map(function(a){return d("WAWap").wap("item",{id:d("WAWap").CUSTOM_STRING(a)})})));var f=void 0;w!=null&&(w.isPSA()?f=d("WAWebCommsWapMd").JID(w):f=d("WAWebCommsWapMd").DEVICE_JID(w));var h=d("WAWap").wap("receipt",{to:d("WAWebCommsWapMd").JID(x),type:e===m.DELIVERY?d("WAWap").DROP_ATTR:d("WAWap").CUSTOM_STRING(e),id:d("WAWap").CUSTOM_STRING(a[0]),t:g!=null?d("WAWap").CUSTOM_STRING(g):d("WAWap").DROP_ATTR,participant:(f=f)!=null?f:d("WAWap").DROP_ATTR,recipient:y?d("WAWebCommsWapMd").USER_JID(y):d("WAWap").DROP_ATTR,privacy_token:u?d("WAWap").CUSTOM_STRING("false"):d("WAWap").DROP_ATTR},c);if(t){f=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if((r==null?void 0:r.aborted)&&d("WAWebABProps").getABPropConfigValue("web_abort_preacks_on_disconnect_enabled")){d("WALogger").LOG(j()).tags("messaging");throw new(d("WAAbortError").AbortError)()}var b={id:a[0],from:x,"class":"receipt",type:e,participant:w,recipient:y};if(e===m.READ||e===m.READ_SELF){var c=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(h,d("WAWebCommsAckParser").toCoreAckTemplate(b)));c=o.parse(c);if(c.error)d("WALogger").ERROR(i()).sendLogs("Invalid-Receipt-Ack");else{c=c.success.readReceipts;c!=null&&d("WAWebUserPrefsGeneral").setUserPrivacySettings(babelHelpers["extends"]({},d("WAWebUserPrefsGeneral").getUserPrivacySettings(),{readReceipts:c}))}}else return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(h,d("WAWebCommsAckParser").toCoreAckTemplate(b))});return function(){return c.apply(this,arguments)}}();z.push(f())}else z.push(d("WADeprecatedSendIq").deprecatedCastStanza(h))};while(k.length>0)p();return(h||(h=b("Promise"))).all(z)}))});return r.apply(this,arguments)}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;if(!d("WAWebABProps").getABPropConfigValue("include_privacy_token_flag_in_delivery_receipt"))return!1;e=(e=(yield d("WAWebSchemaChat").getChatTable().get(a.toString())))==null?void 0:e.tcToken;b=a.isUser()&&b===c&&e==null&&!l.has(a);b&&l.add(a);e!=null&&l.has(a)&&l["delete"](a);return b});return t.apply(this,arguments)}function e(){l.clear()}g.RECEIPT_TYPE=m;g.sendBotInvokeResponseAcks=q;g.sendAggregateReceipts=a;g.shouldRequestTcToken=s;g.resetRequestedTcTokens=e}),98);
__d("WAWebSendOfflineDeliveryReceiptJob",["Promise","WAComms","WALogger","WATimeUtils","WAWebCreateNackFromStanza","WAWebHandleMsgSendAck","WAWebMessageDedupUtils","WAWebPostIncomingMessageDropMetric","WAWebSchemaDanglingReceipt","WAWebSendAggregateDeliveryReceipts","WAWebSendReceiptJobCommon","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAggregateOfflineReceipts: duplicate message does not exist in the db: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAggregateOfflineReceipts: duplicate message exists in the db: ",""]);j=function(){return a};return a}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];if(a.length===0)return b;a=(yield d("WAWebSendAggregateDeliveryReceipts").aggregateDeliveryReceipts(a));for(a of a){var c=a.receipt,e=a.isInDB,f=c.externalId,g=c.from,h=c.author,k=c.msgMeta,l=c.msgInfo;c=c.enc;var m=g.isUser()||g.isNewsletter()?null:h;e?(d("WALogger").LOG(j(),f),void d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropDuplicateMessage({msgMeta:k,msgInfo:l,enc:c}),d("WAWebMessageDedupUtils").isPengingMessageCacheEnabled()?d("WAWebHandleMsgSendAck").sendAck(f,g,k.type,m):b.push({externalId:f,from:g,author:h})):(d("WALogger").LOG(i(),f),void d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropOldCounter({msgMeta:k,msgInfo:l,enc:c}),d("WAWebHandleMsgSendAck").sendNack(f,g,k.type,m,d("WAWebCreateNackFromStanza").NackReason.SignalErrorOldCounter))}return b});return l.apply(this,arguments)}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[],e=[];for(a of a){var f=a.receiptInfo,g=a.duplicateMsgReceiptInfo;g!=null&&e.push(g);f!=null&&c.push(f)}c=c.concat(yield k(e));var i=new Map(),j=[];c.forEach(function(a){var b=a.from,c=a.author;a=a.externalId;var d=i.get(b);d||(d=new Map(),i.set(b,d));var e=d.get(c);e||(e=[],d.set(c,e));e.push(a);j.push({from:String(b),author:String(c),externalId:a})});var l=d("WAWebUserPrefsMeUser").getMeUser(),m=String(d("WATimeUtils").unixTime());void (h||(h=b("Promise"))).all(Array.from(i.keys()).map(function(a){var b=i.get(a);if(!b)return;var c=a.isUser()&&l.equals(d("WAWebWidFactory").toUserWid(a));return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:c?d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.SENDER:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:m,groupedReceipt:b,recipient:c?l:null})}));d("WAComms").cancelDeadSocketTimer();j.length>0&&(yield d("WAWebSchemaDanglingReceipt").getTable().create({receipts:j,acks:[]}))});return m.apply(this,arguments)}g.handleDuplicateMsgReceipts=k;g.sendAggregateOfflineReceipts=a}),98);
__d("WAWebProtobufsReporting.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalDefaults={minVersion:1};a.internalSpec={minVersion:[1,(e=d("WAProtoConst")).TYPES.UINT32],maxVersion:[2,e.TYPES.UINT32],notReportableMinVersion:[3,e.TYPES.UINT32],never:[4,e.TYPES.BOOL]};b.internalSpec={field:[1,e.TYPES.MAP,[e.TYPES.UINT32,c]],version:[2,e.TYPES.UINT32]};c.internalDefaults={minVersion:1};c.internalSpec={minVersion:[1,e.TYPES.UINT32],maxVersion:[2,e.TYPES.UINT32],notReportableMinVersion:[3,e.TYPES.UINT32],isMessage:[4,e.TYPES.BOOL],subfield:[5,e.TYPES.MAP,[e.TYPES.UINT32,c]]};g.ReportableSpec=a;g.ConfigSpec=b;g.FieldSpec=c}),98);
__d("WAWebReportingTokenConfig",["WAWebProtobufsReporting.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(a){a=atob(a);var b=a.length,c=new Uint8Array(new ArrayBuffer(b));for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}var i="CgQIARIACjQIAxIwKgQIAhIAKgQIAxIAKgQICBIAKgQICxIAKhAIERIMKgQIFRIAKgQIFhIAKgQIGRIACiIIBhIeKgQIARIAKhAIERIMKgQIFRIAKgQIFhIAKgQIHhIACi4IBxIqKgQIAhIAKgQIBxIAKgQIChIAKhAIERIMKgQIFRIAKgQIFhIAKgQIFBIACi4ICBIqKgQIAhIAKgQIBxIAKgQICRIAKhAIERIMKgQIFRIAKgQIFhIAKgQIFRIACjQICRIwKgQIAhIAKgQIBhIAKgQIBxIAKgQIDRIAKhAIERIMKgQIFRIAKgQIFhIAKgQIFBIACi4IGhIqKgQIBBIAKgQIBRIAKgQICBIAKgQIDRIAKhAIERIMKgQIFRIAKgQIFhIACgwIJRIIKgYIARICIAEKDAg1EggqBggBEgIgAQ==",j=function(){function a(a){var b=a.fieldNumber,c=a.isMessage;c=c===void 0?!1:c;a=a.subfields;this.fieldNumber=b;this.isMessage=c;this.subfields=a}var b=a.prototype;b.isExtractWholeField=function(){return this.subfields==null||this.subfields.fieldsToFrank.size===0};return a}(),k=function(){function a(a){var b=this;this.fieldsToFrank=new Map();a==null?void 0:a.forEach(function(a){b.fieldsToFrank.set(a.fieldNumber,a)})}var b=a.prototype;b.getConfigForField=function(a){return this.fieldsToFrank.get(a)||null};return a}();function l(a,b,c){var d=c.minVersion,e=c.maxVersion;e=e===void 0?Infinity:e;var f=c.subfield;c=c.isMessage;if(a<d||a>e)return null;if(f==null)return new j({fieldNumber:b,isMessage:c});var g=[];f.forEach(function(b,c){c=l(a,c,b);c!=null&&g.push(c)});return new j({fieldNumber:b,isMessage:c,subfields:new k(g)})}var m=new Map();function a(a){var b=m.get(a);if(b!=null)return b;b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsReporting.pb").ConfigSpec,h(i));var c=[];(b=b.field)==null?void 0:b.forEach(function(b,d){d=l(a,d,b);d!=null&&c.push(d)});b=new k(c);m.set(a,b);return b}g.getBytesFromBase64=h;g.REPORTING_TOKEN_CONFIG_BASE64=i;g.FieldToExtract=j;g.ReportingTokenConfig=k;g.getReportingTokenConfig=a}),98);
__d("WAWebReportingTokenProtobufUtils",["WABinary"],(function(a,b,c,d,e,f,g){function a(a){return a&7}function b(a){return a>>>3}function c(a){var b=new(d("WABinary").Binary)();b.writeVarInt(a);return b.readByteArray()}g.getWireTypeFromTag=a;g.getFieldNumberFromTag=b;g.convertToVarInt=c}),98);
__d("WAWebReportingTokenContent",["WABinary","WAErr","WAProtoConst","WAWebReportingTokenProtobufUtils"],(function(a,b,c,d,e,f,g){var h=function(a){this.value=a;a=d("WAWebReportingTokenProtobufUtils").convertToVarInt(a);this.size=a.length},i=function(){function a(a,b){this.valLengthSize=0;a=new(d("WABinary").Binary)(a);a.advance(b);var e=a.readVarInt(d("WABinary").parseInt64OrThrow);if(e<0||e>=4294967296)throw c("WAErr")("Invalid tag value, out of bound: "+e);var f=d("WAWebReportingTokenProtobufUtils").getWireTypeFromTag(e);this.tag=new h(e);var g=0,i=new(d("WABinary").Binary)();i.writeVarInt(e);switch(f){case d("WAProtoConst").ENC.VARINT:e=a.readVarInt(d("WABinary").parseUint64OrThrow);i.writeVarInt(e);break;case d("WAProtoConst").ENC.BINARY:e=a.readVarInt(d("WABinary").parseUint64OrThrow);var j=a.readByteArray(e);g+=d("WAWebReportingTokenProtobufUtils").convertToVarInt(e).length;i.writeVarInt(e);i.writeByteArray(j);this.valLengthSize=g;break;case d("WAProtoConst").ENC.BIT64:e=a.readByteArray(8);i.writeByteArray(e);break;case d("WAProtoConst").ENC.BIT32:j=a.readByteArray(4);i.writeByteArray(j);break;default:throw c("WAErr")("Unsupported wire type "+f)}this.bytes=i.readByteArray();this.start=b;this.end=b+this.bytes.length}var b=a.prototype;b.getFieldNumber=function(){return d("WAWebReportingTokenProtobufUtils").getFieldNumberFromTag(this.tag.value)};b.getWireType=function(){return d("WAWebReportingTokenProtobufUtils").getWireTypeFromTag(this.tag.value)};b.getTotalSize=function(){return this.bytes.length};b.getValueStartIdx=function(){return this.start+this.tag.size+this.valLengthSize};b.getValueEndIdx=function(){return this.end};b.getBytes=function(){return this.bytes};return a}(),j=function(){function a(a,b,c){this.tag=a,this.partsLength=b,this.parts=c,this.partsLengthInBytes=d("WAWebReportingTokenProtobufUtils").convertToVarInt(this.partsLength)}var b=a.prototype;b.getFieldNumber=function(){return d("WAWebReportingTokenProtobufUtils").getFieldNumberFromTag(this.tag.value)};b.getTotalSize=function(){return this.tag.size+this.partsLengthInBytes.length+this.parts.getTotalSize()};b.getBytes=function(){var a=new(d("WABinary").Binary)();a.writeVarInt(this.tag.value);a.writeVarInt(this.partsLength);for(var b=this.parts.fields,c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;a.writeByteArray(f.getBytes())}return a.readByteArray()};return a}(),k=function(){function a(){this.fields=[],this.totalSize=0}var b=a.prototype;b.add=function(a){this.fields.push(a),this.totalSize+=a.getTotalSize()};b.getTotalSize=function(){return this.totalSize};return a}();a=function(){function a(a,b){this.protobufMessage=a,this.messageConfig=b}var b=a.prototype;b.extractProtobufParts=function(a,b,c,e){var f=new k();if(e==null)return f;b=b;while(b<c){var g=new i(a,b),h=e.getConfigForField(g.getFieldNumber());b+=g.getTotalSize();if(h==null)continue;if(h.isMessage===!0||!h.isExtractWholeField()){if(g.getWireType()===d("WAProtoConst").ENC.BINARY){h=this.extractProtobufParts(a,g.getValueStartIdx(),g.getValueEndIdx(),h.isMessage===!0?this.messageConfig:h.subfields);h.fields.length>0&&f.add(new j(g.tag,h.getTotalSize(),h))}}else f.add(g)}f.fields.sort(function(a,b){return a.getFieldNumber()-b.getFieldNumber()});return f};b.getReportingTokenContent=function(){var a=this.extractProtobufParts(this.protobufMessage,0,this.protobufMessage.length,this.messageConfig);a=a.fields;var b=new(d("WABinary").Binary)();for(var a=a,c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;b.writeByteArray(f.getBytes())}return b.readByteArray()};return a}();g.ReportingTokenContentCalculator=a}),98);
__d("WAWebWamEnumReportingTokenValidationFailureReason",[],(function(a,b,c,d,e,f){a=Object.freeze({MISSING_MESSAGE_SECRET:0,EMPTY_REPORTING_TOKEN_CONTENT:1,MISMATCH_REPORTING_TOKEN:2,UNSUPPORTED_VERSION:3});f.REPORTING_TOKEN_VALIDATION_FAILURE_REASON=a}),66);
__d("WAWebReportingTokenUtils",["WABase64","WABinary","WACryptoHkdf","WACryptoHmac","WACryptoUtils","WAJids","WALogger","WAUseCaseSecret","WAWap","WAWebCreateNackFromStanza","WAWebMessageInsertDebugPlaceholder","WAWebMessagePluginGenerateReportingTokenContent","WAWebMessageSecretErrorsWamEvent","WAWebMessagingGatingUtils","WAWebMsgGetters","WAWebProtobufsE2E.pb","WAWebReportingTokenConfig","WAWebReportingTokenContent","WAWebUserPrefsMeUser","WAWebWamEnumMessageSecretAllowedType","WAWebWamEnumMessageSecretErrorType","WAWebWamEnumReportingTokenValidationFailureReason","WAWebWamMsgUtils","WAWebWamReportingTokenMismatchReporter","WAWebWid","WAWebWidToJid","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["unexpected exception in validating reporting token info: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Franking tag doesn't match for message ","-",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["remoteJid cannot be null for validating reporting token info"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["senderWid cannot be null for validating reporting token info"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["message secret cannot be null for validating reporting token info"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["unexpected exception in generating reporting token body: ",""]);m=function(){return a};return a}var n=16,o=32,p=6,q=7,r={DEFAULT:1,HISTORY_SYNC:-1},s={sampling:.01},t={sampling:1};function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.messageSecret,c=a.stanzaId,e=a.senderJid;a=a.remoteJid;c=d("WABinary").Binary.build(c,e,a,d("WAUseCaseSecret").UseCaseSecretModificationType.REPORT_TOKEN).readBuffer();return d("WACryptoHkdf").extractAndExpand(b instanceof ArrayBuffer?new Uint8Array(b):b,c,o)});return v.apply(this,arguments)}function w(a){return d("WAJids").extractFromJid(d("WAWebWidToJid").widToJidWithType(z(a)))}function x(a){a=d("WAWebWidToJid").widToJidWithType(a.id.remote);return{jidType:a.jidType,remoteJid:d("WAJids").extractFromJid(a)}}function a(a){var b;if(a.encFilehash==null&&a.caption==null)return null;b=new Uint8Array(d("WABase64").decodeB64((b=a.encFilehash)!=null?b:""));a=new TextEncoder().encode((a=a.caption)!=null?a:"");var c=new Uint8Array(b.length+a.length);c.set(b);c.set(a,b.length);return self.crypto.getRandomValues(new Uint8Array(c.length))}function e(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var c;if(!(d("WAWebMessagingGatingUtils").isReportingTokenSendingEnabled()&&d("WAWebMessagePluginGenerateReportingTokenContent").isMsgTypeReportingTokenCompatible(a.type,a.subtype)))return null;c=(c=b.messageContextInfo)==null?void 0:c.messageSecret;var e=d("WAWebMsgGetters").getSender(a),f=x(a),g=f.jidType;f=f.remoteJid;if(g==="interopUser")return null;if(c==null){new(d("WAWebMessageSecretErrorsWamEvent").MessageSecretErrorsWamEvent)({messageSecretAllowedList:d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_REPORTING_TOKEN,messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(a),messageSecretError:d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.MISSING_MESSAGE_SECRET}).commit();return null}if(e==null||f==null)return null;g=d("WAWebMessagingGatingUtils").getSenderReportingTokenVersion();c=(yield u({messageSecret:c,stanzaId:a.id.id,senderJid:d("WAWebWidToJid").widToUserJid(e),remoteJid:f}));a=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,b);e=new(d("WAWebReportingTokenContent").ReportingTokenContentCalculator)(a.readByteArray(),d("WAWebReportingTokenConfig").getReportingTokenConfig(g)).getReportingTokenContent();if(e.length===0)return null;b=(yield d("WACryptoHmac").hmacSha256(new Uint8Array(c),(f=e)!=null?f:new Uint8Array(0),n));return d("WAWap").wap("reporting",null,d("WAWap").wap("reporting_token",{v:d("WAWap").CUSTOM_STRING(String(g))},new Uint8Array(b)))}catch(a){d("WALogger").WARN(m(),a).tags("messaging","wa-ice","report-token").sendLogs("report-token-unexpected-exception",s);return null}});return y.apply(this,arguments)}function z(a){var b=d("WAWebMsgGetters").getBroadcastId(a);if(b!=null)return b;b=a.id.remote;if(!c("WAWebWid").isUser(b))return b;return c("WAWebWid").isLid(b)?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser()}function f(a,b,c,d,e){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){try{if(!d("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return{res:!0,reportingTokenContent:null};if(e==null||Object.keys(e).length===0)return{res:!0,reportingTokenContent:null};if(e.reportingTag==null)return{res:!0,reportingTokenContent:null};b=e.reportingToken;e=(e=e.version)!=null?e:r.DEFAULT;if(b==null)return{res:!0,reportingTokenContent:null};if(!d("WAWebMessagePluginGenerateReportingTokenContent").isMsgTypeReportingTokenCompatible(a.type,a.subtype))return{res:!0,reportingTokenContent:null};var g=d("WAWebMsgGetters").getSender(a),m=w(a),o=a.messageSecret;if(o==null){d("WALogger").ERROR(l()).tags("messaging","wa-ice","report-token").sendLogs("report-token-null-message-secret",t);d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.MISSING_MESSAGE_SECRET,isMessageRetry:f});return{res:!1,reportingTokenContent:null}}if(g==null){d("WALogger").ERROR(k()).tags("messaging","wa-ice","report-token").sendLogs("report-token-null-sender",t);d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.MISSING_MESSAGE_SECRET,isMessageRetry:f});return{res:!1,reportingTokenContent:null}}if(m==null){d("WALogger").ERROR(j()).tags("messaging","wa-ice","report-token").sendLogs("report-token-null-remote",t);d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.MISSING_MESSAGE_SECRET,isMessageRetry:f});return{res:!1,reportingTokenContent:null}}o=(yield u({messageSecret:o,stanzaId:a.id.id,senderJid:d("WAWebWidToJid").widToUserJid(g),remoteJid:m}));g=new(d("WAWebReportingTokenContent").ReportingTokenContentCalculator)(c,d("WAWebReportingTokenConfig").getReportingTokenConfig(e)).getReportingTokenContent();if(g.length===0){d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.EMPTY_REPORTING_TOKEN_CONTENT,isMessageRetry:f});return{res:!1,reportingTokenContent:null}}c=new Uint8Array(yield d("WACryptoHmac").hmacSha256(new Uint8Array(o),(m=g)!=null?m:new Uint8Array(0),n));m=d("WACryptoUtils").uint8ArraysEqual(c,(o=b.subarray(0,32))!=null?o:new Uint8Array(0));m||(d("WALogger").ERROR(i(),a.type,a.subtype).tags("messaging","wa-ice","report-token").sendLogs("report-token-mismatch",t),e>d("WAWebMessagingGatingUtils").getSenderReportingTokenVersion()?d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.UNSUPPORTED_VERSION,isMessageRetry:f}):d("WAWebWamReportingTokenMismatchReporter").logReportingTokenValidationEvent({msg:a,reason:d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON.MISMATCH_REPORTING_TOKEN,isMessageRetry:f}));return{res:m,reportingTokenContent:g}}catch(a){d("WALogger").ERROR(h(),a).tags("messaging","wa-ice","report-token").sendLogs("report-token-unexpected-exception",s);return{res:!1,reportingTokenContent:null}}});return A.apply(this,arguments)}g.REPORTING_TOKEN_STORAGE_SIZE=p;g.REPORTING_TOKEN_INVALID_STORAGE_SIZE=q;g.REPORTING_TOKEN_VERSION=r;g.genReportingTokenKeyFromMessageSecret=u;g.getRemoteJidOnReceiverSide=w;g.getRemoteJidOnSenderSide=x;g.getMediaReportingTokenContent=a;g.genReportingTokenBody=e;g.getReportingTokenRemoteWid=z;g.validateReportingTokenInfo=f}),98);
__d("WAWebUpdateLidMetadataApi",["WAWebApiContact","WAWebBackendApi","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.updates;var b=a.map(function(a){var b=a.lid;a=a.data;return{lid:d("WAWebWidFactory").toUserWid(b),shareOwnPn:(b=a.shareOwnPn)!=null?b:null,displayNameLID:(b=a.displayNameLID)!=null?b:null,requestedPnTimestamp:(b=a.requestedPnTimestamp)!=null?b:null,username:(b=a.username)!=null?b:null}});yield d("WAWebBackendApi").frontendSendAndReceive("bulkUpdateLidContactState",{lidContactDataMappings:b});yield d("WAWebApiContact").updateLidMetadata(a)});return h.apply(this,arguments)}g.updateLidMetadata=a}),98);
__d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob",["Promise","WAWebDBCreateLidPnMappings","WAWebUpdateLidMetadataApi","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=[];for(a of a){if(a==null)continue;var g=a.id;if(g.isLid()){var i=a.displayName,j=a.phoneNumber;i!=null&&e.push({lid:d("WAWebWidFactory").toUserWid(g),data:{displayNameLID:i}});j!=null&&f.push({lid:d("WAWebWidFactory").toUserWid(g),pn:d("WAWebWidFactory").toUserWid(j)})}else{i=a.lid;i!=null&&f.push({lid:d("WAWebWidFactory").toUserWid(i),pn:d("WAWebWidFactory").toUserWid(g)})}}yield (h||(h=b("Promise"))).all([e.length>0?d("WAWebUpdateLidMetadataApi").updateLidMetadata({updates:e}):null,f.length>0?d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:f,flushImmediately:c}):null].filter(Boolean))});return i.apply(this,arguments)}g.createOrReplaceDisplayNamesAndLidPnMappings=a}),98);
__d("WAWebSetPrivacyTokensJob",["$InternalEnum","WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","WAWebCommsWapMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("setPrivacyTokensParser",function(a){a={stanzaId:a.attrString("id")};return a});e=b("$InternalEnum")({TrustedContact:"trusted_contact"});function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;b=b.map(function(b){return d("WAWap").wap("token",{jid:d("WAWebCommsWapMd").USER_JID(a),t:d("WAWap").CUSTOM_STRING(String(c)),type:d("WAWap").CUSTOM_STRING(b)})});e=(yield d("WADeprecatedSendIq").deprecatedSendIq((e=d("WAWap")).wap("iq",{to:e.S_WHATSAPP_NET,type:"set",xmlns:"privacy",id:e.generateId()},e.wap("tokens",null,b)),h));if(!e.success)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(e.errorCode,e.errorText)});return i.apply(this,arguments)}g.TokenType=e;g.setPrivacyTokens=a}),98);
__d("WAWebTrustedContactsUtils",["$InternalEnum","WATimeUtils","WAWebABProps"],(function(a,b,c,d,e,f,g){var h=6*30*24*60*60,i=b("$InternalEnum")({Sender:"sender",Receiver:"receiver"});function j(a){a=a===i.Receiver?"tctoken_duration":"tctoken_duration_sender";return Math.min(d("WAWebABProps").getABPropConfigValue(a),h)}function a(a,b){return a<k(b)}function k(a){var b=a===i.Receiver?"tctoken_num_buckets":"tctoken_num_buckets_sender";b=d("WAWebABProps").getABPropConfigValue(b);a=j(a);var c=Math.floor(d("WATimeUtils").unixTime()/a);c=c-(b-1);return d("WATimeUtils").castToUnixTime(c*a)}function c(a){if(a==null)return!0;var b=d("WAWebABProps").getABPropConfigValue("tctoken_duration_sender"),c=Math.floor(d("WATimeUtils").unixTime()/b);a=Math.floor(a/b);return c>a}g.TcTokenMode=i;g.getTcTokenDuration=j;g.isTokenExpired=a;g.tokenExpirationCutoff=k;g.shouldSendNewToken=c}),98);
__d("WAWebSendTcTokenWhenDeviceIdentityChange",["WALogger","WATimeUtils","WAWebABProps","WAWebApiChat","WAWebBackendApi","WAWebRuntimeEnvironmentUtils","WAWebSetPrivacyTokensJob","WAWebTrustedContactsUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendTcTokenWhenDeviceIdentityChange failed - ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;d("WAWebRuntimeEnvironmentUtils").isWorker()||d("WAWebABProps").getABPropConfigValue("web_tc_token_db_read_enabled")?b=(yield d("WAWebApiChat").getChatRecord(a)):b=(yield d("WAWebBackendApi").frontendSendAndReceive("getChat",{chatId:a}));if(b==null)return;b=b.tcTokenSenderTimestamp;if(b==null)return;if(d("WAWebTrustedContactsUtils").isTokenExpired(b,d("WAWebTrustedContactsUtils").TcTokenMode.Sender))return;try{yield d("WAWebSetPrivacyTokensJob").setPrivacyTokens(a,[d("WAWebSetPrivacyTokensJob").TokenType.TrustedContact],d("WATimeUtils").castToUnixTime(b))}catch(a){d("WALogger").WARN(h(),a).verbose().devConsole(a).sendLogs("send-tc-token-device-identity-change-failed")}});return i.apply(this,arguments)}g.sendTcTokenWhenDeviceIdentityChange=a}),98);
__d("WAWebMexUsyncQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"include_about_status"},b={defaultValue:null,kind:"LocalArgument",name:"include_username"},c={defaultValue:null,kind:"LocalArgument",name:"input"},d=[{kind:"Variable",name:"input",variableName:"input"}],e={alias:null,args:null,kind:"ScalarField",name:"jid",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null},h={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"XWA2ResponseStatus",abstractKey:null},i={condition:"include_username",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"username_info",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},g],type:"XWA2Username",abstractKey:null},h],storageKey:null}]};g={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},g],type:"XWA2AboutStatus",abstractKey:null};return{fragment:{argumentDefinitions:[a,b,c],kind:"Fragment",metadata:null,name:"WAWebMexUsyncQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_fetch_wa_users",plural:!0,selections:[e,i,{condition:"include_about_status",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"about_status_info",plural:!1,selections:[g,h],storageKey:null}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,b,a],kind:"Operation",name:"WAWebMexUsyncQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_fetch_wa_users",plural:!0,selections:[f,e,i,{condition:"include_about_status",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"about_status_info",plural:!1,selections:[f,g,h],storageKey:null}]},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"XWA2User",abstractKey:null}],storageKey:null}]},params:{id:"7704202859661049",metadata:{},name:"WAWebMexUsyncQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexUsync",["WAWebMexClient","WAWebMexRelayEnvironment","WAWebMexUsyncQuery.graphql","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=h!==void 0?h:h=b("WAWebMexUsyncQuery.graphql");function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebMexClient").fetchQuery(i,{input:{query_input:a.users,telemetry:a.telemetry},include_username:a.fetch.username===!0,include_about_status:a.fetch.about_status===!0}));if(a.xwa2_fetch_wa_users!=null)return{response:a.xwa2_fetch_wa_users,error:null};throw c("err")("[MEX][USYNC] xwa2_fetch_wa_users null")}catch(a){if(a instanceof d("WAWebMexRelayEnvironment").MexIqError)return{response:null,error:{code:a.code,text:"MexIqError:"+a.message}};if(a instanceof d("WAWebMexRelayEnvironment").MexFatalExtensionError)return{response:null,error:{code:a.error.extensions.error_code,text:"MexFatalExtensionError:"+a.error.message}};throw a}});return j.apply(this,arguments)}g.mexUsyncQuery=a}),98);
__d("WAWebMexUsersGetUsername",["WAWebMexUsync","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebMexUsync").mexUsyncQuery({users:a.map(function(a){return{jid:a.toJid()}}),telemetry:{context:"INTERACTIVE"},fetch:{username:!0}}));a=a.response;if(a!=null)return a.map(function(a){return a.username_info==null?{error:!0,username:null}:{username:(a=a.username_info)==null?void 0:a.username}})});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h([a]));return a==null?void 0:a[0].username});return j.apply(this,arguments)}g.getMexUserUsername=a}),98);
__d("WAWebMexSetUsernameJobMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"username",variableName:"input"}],concreteType:"XWA2UsernameSetMutationResponse",kind:"LinkedField",name:"xwa2_username_set",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"result",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebMexSetUsernameJobMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebMexSetUsernameJobMutation",selections:b},params:{id:"7107616276002412",metadata:{},name:"WAWebMexSetUsernameJobMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WAWebMexSetUsernameJob",["WALogger","WAWebMexClient","WAWebMexSetUsernameJobMutation.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MEX][USERNAME] Successfully fetched set username mutation via mex"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c={input:a},e=h!==void 0?h:h=b("WAWebMexSetUsernameJobMutation.graphql");e=(yield d("WAWebMexClient").fetchQuery(e,a!=null?c:{}));d("WALogger").DEV(i()).tags("GQL","MEX").devConsole({response:e});return((a=e.xwa2_username_set)==null?void 0:a.result)==="SUCCESS"});return j.apply(this,arguments)}g.mexSetUsernameQueryJob=a}),98);
__d("WAWebSetUsernameJob",["WAJobOrchestratorTypes","WALogger","WAWebApiContact","WAWebBackendApi","WAWebMexSetUsernameJob","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[username] ",": deleting username in db + collection"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[username] ",": updating "," username in db + collection"]);i=function(){return a};return a}function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("setUsernameQueryJob",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebMexSetUsernameJob").mexSetUsernameQueryJob(a));if(b){b=d("WAWebUserPrefsMeUser").assertGetMeUser();yield j([{userId:b,username:(b=a)!=null?b:void 0}]);return!0}return!1}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){var b=a.userId;a=a.username;var c=b.toJid();d("WALogger").LOG(i(),b.toLogString(),a==null||a===""?"empty":"non-empty");return{id:c,username:a}});yield d("WAWebApiContact").bulkUpdateUsernamesInDb(a);yield d("WAWebBackendApi").frontendSendAndReceive("bulkUpdateUsernames",{usernameUpdates:a})});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){var b=a.userId;a=a.displayNameLID;var c=b.toJid();d("WALogger").LOG(h(),b.toLogString());return{id:c,username:void 0,displayNameLID:a}});yield d("WAWebApiContact").bulkUpdateUsernamesInDb(a);yield d("WAWebBackendApi").frontendSendAndReceive("bulkUpdateUsernames",{usernameUpdates:a})});return l.apply(this,arguments)}g.setUsernameQueryJob=a;g.setUsernamesJob=j;g.deleteUsernamesJob=c}),98);
__d("WAWebUsernameGatingUtils",["WAWebABProps","WAWebPrimaryFeatures"],(function(a,b,c,d,e,f,g){function a(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_change"))}function b(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_contact_display"))}function c(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_usync"))}function e(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_1on1_chat"))}function f(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_creation"))}function h(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_contact_display"))&&Boolean(d("WAWebABProps").getABPropConfigValue("username_1on1_chat"))&&Boolean(d("WAWebABProps").getABPropConfigValue("username_usync"))}function i(){return d("WAWebABProps").getABPropConfigValue("username_creation")&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("username_supported")}function j(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_security_code_generation"))}function k(){return Boolean(d("WAWebABProps").getABPropConfigValue("username_security_code_verification"))}function l(){return!1}function m(){return Boolean(d("WAWebABProps").getABPropConfigValue("mex_usync_username_query"))}g.usernameChangeEnabled=a;g.usernameDisplayedEnabled=b;g.usernameUsyncEnabled=c;g.username1on1ChatCreationEnabled=e;g.usernameCreationEnabled=f;g.usernameContactlessChatEnabled=h;g.usernameSupported=i;g.usernameSecurityCodeGenerationEnabled=j;g.usernameSecurityCodeVerificationEnabled=k;g.shouldLogUnknownNumberError=l;g.mexUsyncUsernameQueryEnabled=m}),98);
__d("WAWebUsyncBackoff",["Promise","WALogger"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["usync: "," protocol: ","ms backoff ended"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["usync: "," protocol: ","ms backoff started"]);j=function(){return a};return a}var k=new Map();function a(a,c){d("WALogger").LOG(j(),a,c),k.set(a,new(h||(h=b("Promise")))(function(a){return self.setTimeout(a,c)}).then(function(){d("WALogger").LOG(i(),a,c)}))}function c(a){return!l(a)?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).all(a.protocols.map(function(a){return k.get(a.getName())}))}function l(a){if(a.context==="interactive")return!1;var b=a.protocols.map(function(a){return a.getName()});return b.includes("devices")&&(a.context==="message"||a.context==="voip")?!1:!0}g.setProtocolBackoffMs=a;g.waitForBackoff=c}),98);
__d("WAWebUsyncBotProfile",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b;a.assertTag("bot");var c=a.maybeChild("error");if(c)return{errorCode:c.attrInt("code"),errorText:c.attrString("text")};c=a.child("profile");a=c.child("name");a=a.contentString();var d=c.child("attributes");d=d.contentString();var e=c.child("description");e=e.contentString();var f=c.child("category");f=f.contentString();var g=c.maybeChild("default");g=(g==null?void 0:g.contentString())==="true";var j=c.maybeChild("prompts");j=h(j);b=(b=c.maybeAttrString("persona_id"))!=null?b:"";c=c.maybeChild("commands");c=i(c);var k=c.commands;c=c.commandsDescription;return{name:a,attributes:d,description:e,category:f,isDefault:g,prompts:j,personaId:b,commands:k,commandsDescription:c}}function h(a){if(a==null)return[];var b=[];a.forEachChildWithTag("prompt",function(a){var c=a.maybeChild("emoji");c=(c=c==null?void 0:c.contentString())!=null?c:"";a=a.maybeChild("text");a=(a=a==null?void 0:a.contentString())!=null?a:"";b.push({emoji:c,text:a})});return b}function i(a){if(a==null)return{commands:[],commandsDescription:""};var b=[],c=a.maybeChild("description");c=(c=c==null?void 0:c.contentString())!=null?c:"";a.forEachChildWithTag("command",function(a){var c=a.maybeChild("name");c=(c=c==null?void 0:c.contentString())!=null?c:"";a=a.maybeChild("description");a=(a=a==null?void 0:a.contentString())!=null?a:"";b.push({name:c,description:a})});return{commands:b,commandsDescription:c}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"bot"};b.getQueryElement=function(){return d("WAWap").wap("bot",null,d("WAWap").wap("profile",{v:"1"}))};b.getUserElement=function(a){a=a.getPersonaId();return d("WAWap").wap("bot",null,d("WAWap").wap("profile",{persona_id:a!=null?d("WAWap").CUSTOM_STRING(a):d("WAWap").DROP_ATTR}))};return a}();g.botProfileParser=a;g.USyncBotProfileProtocol=b}),98);
__d("WAWebNonEmptyString",[],(function(a,b,c,d,e,f){function a(a){if(a!=="")return a}function b(a){return a!=null&&a!==""}f.asMaybeNonEmptyString=a;f.isNonEmptyString=b}),66);
__d("WAWebProtobufsVnameCert.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({ENTERPRISE:0});e=a({ON_PREMISE:0,FACEBOOK:1});f=a({SELF:0,BSP:1});b=a({ON_PREMISE:0,FACEBOOK:1});a=a({UNKNOWN:0,LOW:1,HIGH:2});var h={},i={},j={},k={},l={},m={};h.internalSpec={lg:[1,(d=d("WAProtoConst")).TYPES.STRING],lc:[2,d.TYPES.STRING],verifiedName:[3,d.TYPES.STRING]};i.internalSpec={details:[1,d.TYPES.BYTES],signature:[2,d.TYPES.BYTES],serverSignature:[3,d.TYPES.BYTES]};j.internalSpec={serial:[1,d.TYPES.UINT64],issuer:[2,d.TYPES.STRING],verifiedName:[4,d.TYPES.STRING],localizedNames:[8,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h],issueTime:[10,d.TYPES.UINT64]};k.internalSpec={vnameCert:[1,d.TYPES.MESSAGE,i],bizAcctLinkInfo:[2,d.TYPES.BYTES]};l.internalSpec={whatsappBizAcctFbid:[1,d.TYPES.UINT64],whatsappAcctNumber:[2,d.TYPES.STRING],issueTime:[3,d.TYPES.UINT64],hostStorage:[4,d.TYPES.ENUM,e],accountType:[5,d.TYPES.ENUM,c]};m.internalSpec={vlevel:[1,d.TYPES.ENUM,a],vnameCert:[2,d.TYPES.MESSAGE,i],signed:[3,d.TYPES.BOOL],revoked:[4,d.TYPES.BOOL],hostStorage:[5,d.TYPES.ENUM,b],actualActors:[6,d.TYPES.ENUM,f],privacyModeTs:[7,d.TYPES.UINT64],featureControls:[8,d.TYPES.UINT64]};g.BizAccountLinkInfo$AccountType=c;g.BizAccountLinkInfo$HostStorageType=e;g.BizIdentityInfo$ActualActorsType=f;g.BizIdentityInfo$HostStorageType=b;g.BizIdentityInfo$VerifiedLevelValue=a;g.LocalizedNameSpec=h;g.VerifiedNameCertificateSpec=i;g.VerifiedNameCertificate$DetailsSpec=j;g.BizAccountPayloadSpec=k;g.BizAccountLinkInfoSpec=l;g.BizIdentityInfoSpec=m}),98);
__d("WAWebValidateBusinessCertificate",["WAWebProtobufsVnameCert.pb","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h="ent:wa",i="smb:wa";function a(a){return{serial:a.serial,name:a.verifiedName,isApi:a.issuer===h,isSmb:a.issuer===i}}function b(a){if(!a)return null;a=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsVnameCert.pb").VerifiedNameCertificateSpec,a);if(!a.details)throw c("err")("verifyCertificate cert missing details");var b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsVnameCert.pb").VerifiedNameCertificate$DetailsSpec,a.details);return{cert:a,details:b}}g.extractCertificateDetailsParams=a;g.getParsedProtoObjects=b}),98);
__d("WAWebCommonParsersVerifiedName",["WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebNonEmptyString","WAWebValidateBusinessCertificate"],(function(a,b,c,d,e,f,g){function h(a){a=d("WAWebValidateBusinessCertificate").getParsedProtoObjects(a);if(a==null?void 0:a.details){a=d("WAWebValidateBusinessCertificate").extractCertificateDetailsParams(a.details);var b=a.name,c=a.serial,e=a.isApi;a=a.isSmb;return{name:b,serial:String(c),isApi:e,isSmb:a}}}function a(a){var b=a.attrEnum("verified_level",d("WAWebHandleMsgCommon").MSG_VERIFIED_LEVEL),c=a.hasContent()?a.contentBytes():null,e=d("WAWebNonEmptyString").asMaybeNonEmptyString(a.maybeAttrString("serial"));c=c&&h(c)||{};var f=c.serial,g=c.name,i=c.isApi;c=c.isSmb;var j=d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(a.maybeAttrInt("actual_actors")),k=d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(a.maybeAttrInt("host_storage"));a=a.maybeAttrInt("privacy_mode_ts");j=j!=null&&k!=null&&a!=null?{actualActors:j,hostStorage:k,privacyModeTs:a}:null;return{level:b,serial:e!=null?e:f,name:g,isApi:i===!0,isSmb:c===!0,privacyMode:j}}g["default"]=a}),98);
__d("WAWebUsyncBusiness",["WAWap","WAWebCommonParsersVerifiedName"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("business");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};b=a.maybeChild("verified_name");a=b?c("WAWebCommonParsersVerifiedName")(b):null;return{verifiedName:a}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"business"};b.getQueryElement=function(){return d("WAWap").wap("business",null,d("WAWap").wap("verified_name",null))};b.getUserElement=function(a){return null};return a}();g.businessParser=a;g.USyncBusinessProtocol=b}),98);
__d("WAWebUsyncContact",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("contact");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};b={type:a.attrString("type")};var c=a.hasAttr("username");c&&(b.username=a.attrString("username"));return b}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"contact"};b.getQueryElement=function(){return d("WAWap").wap("contact",null)};b.getUserElement=function(a){var b=a.getPhone(),c=a.getUsername();a=a.getType();if(b!=null)return d("WAWap").wap("contact",null,b);else if(c!=null)return d("WAWap").wap("contact",{username:d("WAWap").CUSTOM_STRING(c)});else if(a!=null)return d("WAWap").wap("contact",{type:d("WAWap").CUSTOM_STRING(a)});return null};return a}();g.contactParser=a;g.USyncContactProtocol=b}),98);
__d("WAWebUsyncDevice",["WAWap","WAWebBizCoexGatingUtils"],(function(a,b,c,d,e,f,g){var h=2;function a(a){a.assertTag("devices");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};b=a.maybeChild("key-index-list");a=a.maybeChild("device-list");b=b==null?null:{ts:b.attrTime("ts"),signedKeyIndexBytes:b.hasContent()?b.contentBytes():null,expectedTs:b.hasAttr("expected_ts")?b.attrTime("expected_ts"):void 0};a=a==null?void 0:a.mapChildrenWithTag("device",function(a){var b={id:a.attrInt("id"),keyIndex:a.hasAttr("key-index")?a.attrInt("key-index"):null};d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(a.hasAttr("is_hosted")&&a.attrString("is_hosted")==="true"&&(b.isHosted=!0));return b});return{deviceList:a,keyIndex:b}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"devices"};b.getQueryElement=function(){return d("WAWap").wap("devices",{version:d("WAWap").CUSTOM_STRING(String(h))})};b.getUserElement=function(a){var b=a.getDeviceHash(),c=a.getTs();a=a.getExpectedTs();return!b&&c==null&&a==null?null:d("WAWap").wap("devices",{device_hash:b?d("WAWap").CUSTOM_STRING(b):d("WAWap").DROP_ATTR,ts:c!=null?d("WAWap").INT(c):d("WAWap").DROP_ATTR,expected_ts:a!=null?d("WAWap").INT(a):d("WAWap").DROP_ATTR})};return a}();g.deviceParser=a;g.USyncDeviceProtocol=b}),98);
__d("WAWebUsyncDisappearingMode",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("disappearing_mode");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};b=a.attrInt("duration",0);a=a.attrInt("t");return{duration:b,t:a}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"disappearing_mode"};b.getQueryElement=function(){return d("WAWap").wap("disappearing_mode",null)};b.getUserElement=function(a){return null};return a}();g.disappearingModeParser=a;g.USyncDisappearingModeProtocol=b}),98);
__d("WAWebUsyncFeature",["WAWap","err"],(function(a,b,c,d,e,f,g){var h={document:(b=d("WAWap")).wap("document",null),encrypt:b.wap("encrypt",null),encrypt_blist:b.wap("encrypt_blist",null),encrypt_contact:b.wap("encrypt_contact",null),encrypt_group_gen2:b.wap("encrypt_group_gen2",null),encrypt_image:b.wap("encrypt_image",null),encrypt_location:b.wap("encrypt_location",null),encrypt_url:b.wap("encrypt_url",null),encrypt_v2:b.wap("encrypt_v2",null),voip:b.wap("voip",null),multi_agent:b.wap("multi_agent",null)};function a(a){a.assertTag("feature");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};var c={};Object.keys(h).forEach(function(b){var d=a.maybeChild(b);d&&(c[b]=d.attrString("value"))});return c}e=function(){var a=b.prototype;a.getName=function(){return"picture"};function b(a){this.queries=a;if(a.length===0)throw c("err")("must specify at least one query")}a.getQueryElement=function(){return d("WAWap").wap("feature",null,this.queries&&this.queries.map(function(a){return h[a]}))};a.getUserElement=function(a){return null};return b}();g.featureParser=a;g.USyncFeaturesProtocol=e}),98);
__d("WAWebUsyncLid",["WAWap","WAWebCommsWapMd"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("lid");var b=a.maybeChild("error");return b?{errorCode:b.attrInt("code"),errorText:b.attrString("text")}:a.maybeAttrLidUserJid("val")}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"lid"};b.getQueryElement=function(){return d("WAWap").wap("lid",null)};b.getUserElement=function(a){a=a.getLid();return!a?null:d("WAWap").wap("lid",{jid:a?d("WAWebCommsWapMd").USER_JID(a):d("WAWap").DROP_ATTR})};return a}();g.lidParser=a;g.USyncLidProtocol=b}),98);
__d("WAWebUsyncPicture",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("picture");var b=a.maybeChild("error");return b?{errorCode:b.attrInt("code"),errorText:b.attrString("text")}:{id:a.attrInt("id")}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"picture"};b.getQueryElement=function(){return d("WAWap").wap("picture",null)};b.getUserElement=function(a){return null};return a}();g.pictureParser=a;g.USyncPictureProtocol=b}),98);
__d("WAWebUsyncStatus",["WAWap"],(function(a,b,c,d,e,f,g){var h=null;function a(a){a.assertTag("status");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};return!a.hasContent()?a.hasAttr("code")&&a.attrInt("code")===401?"":h:a.contentString().length!==0?a.contentString():h}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"status"};b.getQueryElement=function(){return d("WAWap").wap("status",null)};b.getUserElement=function(a){return null};return a}();g.statusParser=a;g.USyncStatusProtocol=b}),98);
__d("WAWebUsyncTextStatus",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("text_status");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};b=a.hasAttr("text")?a.attrString("text"):void 0;var c=a.hasChild("emoji")?a.child("emoji"):void 0;c=(c==null?void 0:c.hasAttr("content"))?c==null?void 0:c.attrString("content"):void 0;var d=a.hasAttr("ephemeral_duration_sec")?a.attrInt("ephemeral_duration_sec"):void 0;a=a.hasAttr("last_update_time")?a.attrString("last_update_time"):void 0;return{text:b,emoji:c,ephemeralDurationSeconds:d,lastUpdateTime:a}}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"text_status"};b.getQueryElement=function(){return d("WAWap").wap("text_status",null)};b.getUserElement=function(a){return null};return a}();g.textStatusParser=a;g.USyncTextStatusProtocol=b}),98);
__d("WAWebUsyncUsername",["WAWap"],(function(a,b,c,d,e,f,g){function a(a){a.assertTag("username");var b=a.maybeChild("error");if(b)return{errorCode:b.attrInt("code"),errorText:b.attrString("text")};return a.hasContent()?a.contentString():null}b=function(){function a(){}var b=a.prototype;b.getName=function(){return"username"};b.getQueryElement=function(){return d("WAWap").wap("username",null)};b.getUserElement=function(a){return null};return a}();g.usernameParser=a;g.USyncUsernameProtocol=b}),98);
__d("WAWebUsync",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebCommsWapMd","WAWebJidToWid","WAWebUsyncBackoff","WAWebUsyncBotProfile","WAWebUsyncBusiness","WAWebUsyncContact","WAWebUsyncDevice","WAWebUsyncDisappearingMode","WAWebUsyncFeature","WAWebUsyncLid","WAWebUsyncPicture","WAWebUsyncStatus","WAWebUsyncTextStatus","WAWebUsyncUsername","WAWebWid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Usync success:"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["usync: ready to query for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Usync warning: a usync query must have at least one user"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["usync query success!"]);k=function(){return a};return a}var l={FEATURE:"feature",DEVICE:"devices",CONTACT:"contact",PICTURE:"picture",STATUS:"status",BUSINESS:"business",DISAPPEARING_MODE:"disappearing_mode",LID:"lid",BOT:"bot",USERNAME:"username",TEXT_STATUS:"text_status"},m={feature:d("WAWebUsyncFeature").featureParser,devices:d("WAWebUsyncDevice").deviceParser,contact:d("WAWebUsyncContact").contactParser,picture:d("WAWebUsyncPicture").pictureParser,status:d("WAWebUsyncStatus").statusParser,business:d("WAWebUsyncBusiness").businessParser,disappearing_mode:d("WAWebUsyncDisappearingMode").disappearingModeParser,lid:d("WAWebUsyncLid").lidParser,bot:d("WAWebUsyncBotProfile").botProfileParser,username:d("WAWebUsyncUsername").usernameParser,text_status:d("WAWebUsyncTextStatus").textStatusParser};function n(a){var b=[];a.forEachChildWithTag("user",function(a){var c={};if(!a.hasAttr("jid"))return;Object.keys(l).forEach(function(b){b=l[b];var d=a.maybeChild(b);d&&m[b]&&(c[b]=m[b](d))});c.id=d("WAWebJidToWid").deviceJidToUserWid(a.attrDeviceJid("jid"));b.push(c)});return b}var o=new(c("WADeprecatedWapParser"))("usyncParser",function(a){a.assertAttr("type","result");var b={error:{},refresh:{},list:[],sideList:[]};a=a.child("usync");var c=a.child("result"),e=a.child("list");a=a.maybeChild("side_list");Object.keys(l).forEach(function(a){a=l[a];var d=c.maybeChild(a);if(d){var e=d.maybeChild("error");e?b.error[a]={errorCode:e.attrInt("code"),errorText:e.attrString("text"),errorBackoff:e.attrInt("backoff")}:d.hasAttr("refresh")&&(b.refresh[a]=d.attrInt("refresh",0))}});b.list=n(e);a&&(b.sideList=n(a));d("WALogger").LOG(k());return b});a=function(){function a(){this.context="interactive",this.mode="query",this.protocols=[],this.users=[]}var e=a.prototype;e.withMode=function(a){this.mode=a;return this};e.withContext=function(a){this.context=a;return this};e.withContactProtocol=function(){this.protocols.push(new(d("WAWebUsyncContact").USyncContactProtocol)());return this};e.withBusinessProtocol=function(){this.protocols.push(new(d("WAWebUsyncBusiness").USyncBusinessProtocol)());return this};e.withDeviceProtocol=function(){this.protocols.push(new(d("WAWebUsyncDevice").USyncDeviceProtocol)());return this};e.withDisappearingModeProtocol=function(){this.protocols.push(new(d("WAWebUsyncDisappearingMode").USyncDisappearingModeProtocol)());return this};e.withPictureProtocol=function(){this.protocols.push(new(d("WAWebUsyncPicture").USyncPictureProtocol)());return this};e.withStatusProtocol=function(){this.protocols.push(new(d("WAWebUsyncStatus").USyncStatusProtocol)());return this};e.withTextStatusProtocol=function(){this.protocols.push(new(d("WAWebUsyncTextStatus").USyncTextStatusProtocol)());return this};e.withFeaturesProtocol=function(a){this.protocols.push(new(d("WAWebUsyncFeature").USyncFeaturesProtocol)(a));return this};e.withLidProtocol=function(){this.protocols.push(new(d("WAWebUsyncLid").USyncLidProtocol)());return this};e.withBotProfileProtocol=function(){this.protocols.push(new(d("WAWebUsyncBotProfile").USyncBotProfileProtocol)());return this};e.withUser=function(a){this.users.push(a);return this};e.withUsernameProtocol=function(){this.protocols.push(new(d("WAWebUsyncUsername").USyncUsernameProtocol)());return this};e.$1=function(){var a=this;if(this.protocols.length===0)throw c("err")("a usync query must have at least one protocol");var b=this.users.filter(function(a){var b=a.getId();return b&&c("WAWebWid").isServer(b)?!1:a.validate()});b.length===0&&d("WALogger").WARN(j());var e=d("WAWap").wap("query",null,this.protocols.map(function(a){return a.getQueryElement()}));b=b.map(function(b){var c=b.getId();return d("WAWap").wap("user",{jid:c?d("WAWebCommsWapMd").USER_JID(c):d("WAWap").DROP_ATTR},a.protocols.map(function(a){return a.getUserElement(b)}))});b=d("WAWap").wap("list",null,b);return d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"usync",type:"get",id:d("WAWap").generateId()},d("WAWap").wap("usync",{sid:d("WAWap").generateId(),index:"0",last:"true",mode:d("WAWap").CUSTOM_STRING(this.mode),context:d("WAWap").CUSTOM_STRING(this.context)},e,b))};e.execute=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.$1();d("WALogger").DEV(i(),this.protocols.map(function(a){return a.getName()}));yield d("WAWebUsyncBackoff").waitForBackoff(this);a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,o));if(a.success){d("WALogger").DEV(h()).devConsole(a.result);p(a.result);return a.result}return{error:{all:{errorCode:a.errorCode,errorText:a.errorText,errorType:a.errorType}},refresh:{},list:[]}});function c(){return a.apply(this,arguments)}return c}();return a}();function p(a){Object.values(l).forEach(function(b){var c=a.error[b];if(c==null)return;c.errorBackoff!=null&&d("WAWebUsyncBackoff").setProtocolBackoffMs(b,c.errorBackoff*1e3)})}g.USyncQuery=a}),98);
__d("WAWebUsyncUser",["WALogger","WAWebBizCoexGatingUtils","WAWebWidValidator","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["USync user created with invalid jid: ",""]);h=function(){return a};return a}a=function(){function a(){}var b=a.prototype;b.withId=function(a){this.$1=a;return this};b.withLid=function(a){this.$2=a;return this};b.withDeviceHash=function(a){this.$4=a;return this};b.withTs=function(a){this.$5=a;return this};b.withExpectedTs=function(a){this.$6=a;return this};b.withPhone=function(a){this.$3=a;return this};b.withPersonaId=function(a){this.$7=a;return this};b.withUsername=function(a){this.$8=a;return this};b.withType=function(a){this.$9=a;return this};b.getDeviceHash=function(){return this.$4};b.getPhone=function(){return this.$3};b.getId=function(){return this.$1};b.getLid=function(){return this.$2};b.getTs=function(){return this.$5};b.getExpectedTs=function(){return this.$6};b.getPersonaId=function(){return this.$7};b.getUsername=function(){return this.$8};b.getType=function(){return this.$9};b.validate=function(){var a=this.$1,b=this.$3,e=this.$8;if(a==null&&b==null&&e==null)throw c("err")("user must have an id, phone or a username");else if(a){b=d("WAWebWidValidator").validateWid(a.toString(),d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled());b||d("WALogger").WARN(h(),a.toString());return b}return!0};return a}();g.USyncUser=a}),98);
__d("WAWebQueryExistsJob",["WALogger","WAPhoneFindCC","WAWebABProps","WAWebApiContact","WAWebBackendErrors","WAWebDBCreateLidPnMappings","WAWebMexUsersGetUsername","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebUsync","WAWebUsyncUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] username info response"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] querying username: "," for contact info"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] username info response"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[usync] querying contact: "," for username info"]);k=function(){return a};return a}function a(a){var b=a.isLid()?"":"+"+a.toString();return a.isLid()?l({type:"lid",wid:a}):l({type:"phone",phone:b})}function e(a){return l({type:"phone",phone:a})}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.type==="lid"&&!a.wid.isLid())throw c("err")("queryExist is provided with invalid lid");var b=new(d("WAWebUsyncUser").USyncUser)(),e=new(d("WAWebUsync").USyncQuery)();a.type==="phone"?(e.withContactProtocol(),b.withPhone(a.phone)):b.withId(a.wid);e.withLidProtocol();if(a.type==="phone"){var f=d("WAPhoneFindCC").extractDigits(a.phone)+"@c.us";if(c("WAWebWid").isWid(f)){f=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").createUserWid(f));f&&b.withLid(f)}}e.withUser(b);e.withBusinessProtocol();e.withDisappearingModeProtocol();d("WAWebUsernameGatingUtils").usernameUsyncEnabled()&&e.withUsernameProtocol();f=(yield e.execute());b=f.error.all||f.error.contact;if(b)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode,b.errorText);e=f.list;if(e.length!==1)return null;b=e[0];f=b.id;e=b.contact;var g=b.business,h=b.disappearing_mode,i=b.lid;b=b.username;if(a.type==="phone"&&(e==null?void 0:e.type)!=="in")return null;a={wid:f,biz:g!=null,bizInfo:g};h&&(a.disappearingMode={duration:h.duration,settingTimestamp:h.t});i!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{pn:f,lid:d("WAWebWidFactory").createUserWid(i,"lid")}],flushImmediately:!0}));d("WAWebUsernameGatingUtils").usernameUsyncEnabled()&&b!=null?yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:f,username:b}]):yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:f,username:void 0}]);return a});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(k(),a).devConsole({wid:a});var b=new(d("WAWebUsyncUser").USyncUser)(),c=new(d("WAWebUsync").USyncQuery)();b.withId(a);c.withUser(b);c.withUsernameProtocol();a=(yield c.execute());b=a.error.all||a.error.contact;d("WALogger").LOG(j()).devConsole({res:a,error:b});if(b)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(b.errorCode,b.errorText);c=a.list;if(c.length!==1)return null;b=c[0];if(b.id!=null)return{id:b.id,username:b.username,shouldDelete:!Object.prototype.hasOwnProperty.call(b,"username")}});return o.apply(this,arguments)}function f(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isLid())return;var b,c,e;if(d("WAWebABProps").getABPropConfigValue("mex_usync_username_query")){var f=d("WAWebWidFactory").createUserWid(a.toString()),g=(yield d("WAWebMexUsersGetUsername").getMexUserUsername(f));g!=null?(b=g,c=f):e=!0}else{g=(yield n(a));g!=null&&(b=g.username,c=g.id,e=g.shouldDelete)}if(c==null)return;b!=null?yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:c,username:b}]):e===!0&&(yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:c,username:void 0}]));return b});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(i(),a).devConsole({queryUsername:a});var b=new(d("WAWebUsyncUser").USyncUser)(),c=new(d("WAWebUsync").USyncQuery)();c.withUser(b);c.withContactProtocol();b.withUsername(a);b=(yield c.execute());a=b.error.all||b.error.contact;d("WALogger").LOG(h()).devConsole({res:b,error:a});if(a)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText);c=b.list;if(c.length!==1)return null;a=c[0];b=a.id;c=a.contact;a=c.username;c=c.type;if(c==="out")return null;a!=null?yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:b,username:a}]):yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:b,username:void 0}]);c={wid:b,username:a,biz:!1};return c});return r.apply(this,arguments)}g.queryWidExists=a;g.queryPhoneExists=e;g.queryExist=l;g.queryWidUsernameExists=f;g.queryUsernameExists=q}),98);
__d("WAWebSyncDeviceAdvDeviceListJob",["WAJobOrchestratorTypes","WAWebAdvSyncDeviceListApi","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b,c){a={wids:a,context:b,phash:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("syncDeviceList",function(a){return d("WAWebAdvSyncDeviceListApi").syncDeviceList(a)}).waitUntilCompleted(a)}function b(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("syncMyDeviceList",function(a){return d("WAWebAdvSyncDeviceListApi").syncMyDeviceList()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted()}g.syncDeviceListJob=a;g.syncMyDeviceListJob=b}),98);
__d("WAWebBackendJobs.flow",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Skmsg:"skmsg",Pkmsg:"pkmsg",Msg:"msg",Msmsg:"msmsg"});c=b("$InternalEnum")({Image:"image",Video:"video",Ptv:"ptv",Audio:"audio",Ptt:"ptt",Location:"location",VCard:"vcard",Document:"document",Url:"url",Call:"call",Gif:"gif",Future:"future",ContactArray:"contact_array",LiveLocation:"livelocation",ProfilePic:"profile_pic",Sticker:"sticker",Hsm:"hsm",ProductImage:"product_image",Template:"template",MdAppState:"md_app_state",MdHistorySync:"md_history_sync",List:"list",ListResponse:"list_response",Button:"button",ButtonResponse:"button_response",Order:"order",Product:"product",NativeFlowResponse:"native_flow_response"});d=b("$InternalEnum")({Hide:"hide",Show:"show"});f.CiphertextType=a;f.EncMediaType=c;f.DecryptFailType=d}),66);
__d("WAWebSignalCommonErrors",["WACustomError"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("SignalDecryptionError"));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("SignalMessageCounterError"));g.SignalDecryptionError=a;g.SignalMessageCounterError=b}),98);
__d("WAWebVerifyProtobufMsgObjectKeys",["$InternalEnum","WAWebHandleMsgError","WAWebMsgType","WAWebProtobufsE2E.pb","err"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({Buttons:1,Template:2,SenderKeyDistribution:3,UnknownMessageKey:4});function i(a,b){switch(a){case"$$unknownFieldCount":return b[a]===0?null:d("WAWebMsgType").MSG_TYPE.UNKNOWN;case"messageContextInfo":return null;case"contactMessage":return d("WAWebMsgType").MSG_TYPE.VCARD;case"contactsArrayMessage":return d("WAWebMsgType").MSG_TYPE.MULTI_VCARD;case"conversation":case"extendedTextMessage":return d("WAWebMsgType").MSG_TYPE.CHAT;case"imageMessage":return d("WAWebMsgType").MSG_TYPE.IMAGE;case"locationMessage":case"liveLocationMessage":return d("WAWebMsgType").MSG_TYPE.LOCATION;case"documentMessage":return d("WAWebMsgType").MSG_TYPE.DOCUMENT;case"audioMessage":return d("WAWebMsgType").MSG_TYPE.AUDIO;case"videoMessage":return d("WAWebMsgType").MSG_TYPE.VIDEO;case"protocolMessage":return d("WAWebMsgType").MSG_TYPE.PROTOCOL;case"highlyStructuredMessage":return d("WAWebMsgType").MSG_TYPE.PROTOCOL;case"sendPaymentMessage":case"requestPaymentMessage":case"paymentInviteMessage":return d("WAWebMsgType").MSG_TYPE.PAYMENT;case"declinePaymentRequestMessage":case"cancelPaymentRequestMessage":return d("WAWebMsgType").MSG_TYPE.UNKNOWN;case"stickerMessage":return d("WAWebMsgType").MSG_TYPE.STICKER;case"groupInviteMessage":return d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE;case"templateButtonReplyMessage":return d("WAWebMsgType").MSG_TYPE.TEMPLATE_BUTTON_REPLY;case"productMessage":return d("WAWebMsgType").MSG_TYPE.PRODUCT;case"listMessage":return d("WAWebMsgType").MSG_TYPE.LIST;case"orderMessage":return d("WAWebMsgType").MSG_TYPE.ORDER;case"listResponseMessage":return d("WAWebMsgType").MSG_TYPE.LIST_RESPONSE;case"buttonsResponseMessage":return d("WAWebMsgType").MSG_TYPE.BUTTONS_RESPONSE;case"interactiveMessage":return d("WAWebMsgType").MSG_TYPE.INTERACTIVE;case"interactiveResponseMessage":return d("WAWebMsgType").MSG_TYPE.INTERACTIVE_RESPONSE;case"reactionMessage":return d("WAWebMsgType").MSG_TYPE.REACTION;case"encReactionMessage":return d("WAWebMsgType").MSG_TYPE.REACTION_ENC;case"encCommentMessage":return d("WAWebMsgType").MSG_TYPE.COMMENT;case"pinInChatMessage":return d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE;case"pollCreationMessage":case"pollCreationMessageV2":case"pollCreationMessageV3":return d("WAWebMsgType").MSG_TYPE.POLL_CREATION;case"pollUpdateMessage":return d("WAWebMsgType").MSG_TYPE.POLL_UPDATE;case"keepInChatMessage":return d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT;case"requestPhoneNumberMessage":return d("WAWebMsgType").MSG_TYPE.REQUEST_PHONE_NUMBER;case"ptvMessage":return d("WAWebMsgType").MSG_TYPE.PTV;case"callLogMesssage":return d("WAWebMsgType").MSG_TYPE.CALL_LOG;case"buttonsMessage":return h.Buttons;case"templateMessage":return h.Template;case"senderKeyDistributionMessage":case"fastRatchetKeySenderKeyDistributionMessage":return h.SenderKeyDistribution;case"newsletterAdminInviteMessage":return d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE;case"eventMessage":return d("WAWebMsgType").MSG_TYPE.EVENT_CREATION;case"encEventResponseMessage":return d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE;case"secretEncryptedMessage":return((b=b[a])==null?void 0:b.secretEncType)===d("WAWebProtobufsE2E.pb").Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT?d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED:h.UnknownMessageKey;case"albumMessage":return d("WAWebMsgType").MSG_TYPE.ALBUM;case"stickerPackMessage":return d("WAWebMsgType").MSG_TYPE.STICKER_PACK;default:return h.UnknownMessageKey}}function j(a){if(a!=null&&typeof a==="object"&&"message"in a){a=a.message;if(a!=null&&typeof a==="object")return a}return null}function a(a){m(a);var b,c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=j(a[e]);if(f!=null){var g=k(f);for(var g=g,h=Array.isArray(g),l=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(h){if(l>=g.length)break;n=g[l++]}else{l=g.next();if(l.done)break;n=l.value}n=n;var o=n[0];n[1];typeof o!=="number"&&(b=f)}}else{n=i(e,a);n!=null&&(b=a)}if(b!=null)break}return b}function k(a){var b=[],c=Object.keys(a);for(var e=0;e<c.length;e++){var f=c[e],g=j(a[f]);if(g!=null){var h=k(g);h.length===0?b.push([d("WAWebMsgType").MSG_TYPE.UNKNOWN,f]):b.push.apply(b,k(g))}else{h=i(f,a);h!=null&&b.push([h,f])}}return b}function l(a){return Boolean(a.find(function(a){a=a[0];return typeof a==="number"&&a===h.SenderKeyDistribution}))}function m(a){a=k(a);var b=a.length===1||a.length===2&&l(a);if(!b)throw new(d("WAWebHandleMsgError").MessageProtobufInvalidMessageTypes)(a.map(function(a){a[0];a=a[1];return a}))}function n(a){var b=new Set();for(var a=k(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];f[1];if(typeof g!=="number")b.add(g);else if(h.cast(g)!=null&&(g===h.Buttons||g===h.Template))throw c("err")("Undeclared message types")}return b}function e(a,b){return n(a).has(b)}g.UndeclaredMessageType=h;g.getUnwrappedProtobufMessage=a;g.getProtobufMessageTypesToKeys=k;g.verifyProtobufMessageObjectKeys=m;g.getProtobufMessageTypesSet=n;g.isProtobufHasMessageType=e}),98);
__d("WAWebWamEnumE2eCiphertextType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:0,PREKEY_MESSAGE:1,SENDER_KEY_MESSAGE:2,MESSAGE_SECRET_MESSAGE:3});f.E2E_CIPHERTEXT_TYPE=a}),66);
__d("WAWebWamEnumE2eDestination",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:0,GROUP:1,LIST:2,STATUS:3,CHANNEL:4,INTEROP:5});f.E2E_DESTINATION=a}),66);
__d("WAWebBackendJobsCommon",["WAJobOrchestratorTypes","WALogger","WAWap","WAWebABProps","WAWebAck","WAWebBackendJobs.flow","WAWebHandleMsgCommon","WAWebHandleMsgError","WAWebSendMsgCommonApi","WAWebSignalCommonErrors","WAWebVerifyProtobufMsgObjectKeys","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumPlaceholderReasonType","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPlaceholderAddReason Other reason"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPlaceholderAddReason SignalBadMac reason"]);i=function(){return a};return a}var j=2;function a(a){switch(a){case d("WAWebBackendJobs.flow").CiphertextType.Skmsg:return d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE.SENDER_KEY_MESSAGE;case d("WAWebBackendJobs.flow").CiphertextType.Pkmsg:return d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE.PREKEY_MESSAGE;case d("WAWebBackendJobs.flow").CiphertextType.Msg:return d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE.MESSAGE;case d("WAWebBackendJobs.flow").CiphertextType.Msmsg:return d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE.MESSAGE_SECRET_MESSAGE}}function b(a){var b=a.encMediaType,c=a.msgType;a=a.msgPollType;if(c===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.reaction)return d("WAWebWamEnumMediaType").MEDIA_TYPE.REACTION;else if(a===d("WAWebHandleMsgCommon").POLL_TYPES.creation)return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_CREATE;else if(a===d("WAWebHandleMsgCommon").POLL_TYPES.vote)return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_VOTE;else if(b)switch(b){case d("WAWebBackendJobs.flow").EncMediaType.Image:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PHOTO;case d("WAWebBackendJobs.flow").EncMediaType.Video:return d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO;case d("WAWebBackendJobs.flow").EncMediaType.Ptv:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PUSH_TO_VIDEO;case d("WAWebBackendJobs.flow").EncMediaType.Audio:return d("WAWebWamEnumMediaType").MEDIA_TYPE.AUDIO;case d("WAWebBackendJobs.flow").EncMediaType.Ptt:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PTT;case d("WAWebBackendJobs.flow").EncMediaType.Location:return d("WAWebWamEnumMediaType").MEDIA_TYPE.LOCATION;case d("WAWebBackendJobs.flow").EncMediaType.VCard:return d("WAWebWamEnumMediaType").MEDIA_TYPE.CONTACT;case d("WAWebBackendJobs.flow").EncMediaType.Document:return d("WAWebWamEnumMediaType").MEDIA_TYPE.DOCUMENT;case d("WAWebBackendJobs.flow").EncMediaType.Url:return d("WAWebWamEnumMediaType").MEDIA_TYPE.URL;case d("WAWebBackendJobs.flow").EncMediaType.Call:return d("WAWebWamEnumMediaType").MEDIA_TYPE.CALL;case d("WAWebBackendJobs.flow").EncMediaType.Gif:return d("WAWebWamEnumMediaType").MEDIA_TYPE.GIF;case d("WAWebBackendJobs.flow").EncMediaType.Future:return d("WAWebWamEnumMediaType").MEDIA_TYPE.FUTURE;case d("WAWebBackendJobs.flow").EncMediaType.ContactArray:return d("WAWebWamEnumMediaType").MEDIA_TYPE.CONTACT_ARRAY;case d("WAWebBackendJobs.flow").EncMediaType.LiveLocation:return d("WAWebWamEnumMediaType").MEDIA_TYPE.LIVE_LOCATION;case d("WAWebBackendJobs.flow").EncMediaType.ProfilePic:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PROFILE_PIC;case d("WAWebBackendJobs.flow").EncMediaType.Sticker:return d("WAWebWamEnumMediaType").MEDIA_TYPE.STICKER;case d("WAWebBackendJobs.flow").EncMediaType.Hsm:return d("WAWebWamEnumMediaType").MEDIA_TYPE.HSM;case d("WAWebBackendJobs.flow").EncMediaType.ProductImage:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_IMAGE;case d("WAWebBackendJobs.flow").EncMediaType.Template:return d("WAWebWamEnumMediaType").MEDIA_TYPE.TEMPLATE;case d("WAWebBackendJobs.flow").EncMediaType.MdAppState:return d("WAWebWamEnumMediaType").MEDIA_TYPE.MD_APP_STATE;case d("WAWebBackendJobs.flow").EncMediaType.MdHistorySync:return d("WAWebWamEnumMediaType").MEDIA_TYPE.MD_HISTORY_SYNC;case d("WAWebBackendJobs.flow").EncMediaType.List:return d("WAWebWamEnumMediaType").MEDIA_TYPE.LIST;case d("WAWebBackendJobs.flow").EncMediaType.ListResponse:return d("WAWebWamEnumMediaType").MEDIA_TYPE.LIST_REPLY;case d("WAWebBackendJobs.flow").EncMediaType.Button:return d("WAWebWamEnumMediaType").MEDIA_TYPE.BUTTON_MESSAGE;case d("WAWebBackendJobs.flow").EncMediaType.ButtonResponse:return d("WAWebWamEnumMediaType").MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case d("WAWebBackendJobs.flow").EncMediaType.Order:return d("WAWebWamEnumMediaType").MEDIA_TYPE.ORDER;case d("WAWebBackendJobs.flow").EncMediaType.Product:return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_IMAGE;case d("WAWebBackendJobs.flow").EncMediaType.NativeFlowResponse:return d("WAWebWamEnumMediaType").MEDIA_TYPE.INTERACTIVE_RESPONSE_NFM}return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE}function k(a){if(a.deviceSentMessage){var b=a.deviceSentMessage.message;return b?k(b):null}else if(a.ephemeralMessage){b=a.ephemeralMessage.message;return b?k(b):null}else if(a.groupMentionedMessage){b=a.groupMentionedMessage.message;return b?k(b):null}else if(a.viewOnceMessageV2Extension){b=a.viewOnceMessageV2Extension.message;return b?k(b):null}else if(a.viewOnceMessage){b=a.viewOnceMessage.message;return b?k(b):null}else if(a.documentWithCaptionMessage){b=a.documentWithCaptionMessage.message;return b?k(b):null}else if(a.botInvokeMessage){b=a.botInvokeMessage.message;return b?k(b):null}else if(a.imageMessage)return d("WAWebBackendJobs.flow").EncMediaType.Image;else if(a.stickerMessage)return d("WAWebBackendJobs.flow").EncMediaType.Sticker;else if(a.lottieStickerMessage)return d("WAWebBackendJobs.flow").EncMediaType.Sticker;else if(a.locationMessage)return a.locationMessage.isLive===!0?d("WAWebBackendJobs.flow").EncMediaType.LiveLocation:d("WAWebBackendJobs.flow").EncMediaType.Location;else if(a.contactMessage)return d("WAWebBackendJobs.flow").EncMediaType.VCard;else if(a.contactsArrayMessage)return d("WAWebBackendJobs.flow").EncMediaType.ContactArray;else if(a.documentMessage)return d("WAWebBackendJobs.flow").EncMediaType.Document;else if(a.audioMessage)return a.audioMessage.ptt?d("WAWebBackendJobs.flow").EncMediaType.Ptt:d("WAWebBackendJobs.flow").EncMediaType.Audio;else if(a.videoMessage)return a.videoMessage.gifPlayback?d("WAWebBackendJobs.flow").EncMediaType.Gif:d("WAWebBackendJobs.flow").EncMediaType.Video;else if(a.ptvMessage)return d("WAWebBackendJobs.flow").EncMediaType.Ptv;else if(a.buttonsMessage)return d("WAWebBackendJobs.flow").EncMediaType.Button;else if(a.buttonsResponseMessage)return d("WAWebBackendJobs.flow").EncMediaType.ButtonResponse;else if(a.listMessage)return d("WAWebBackendJobs.flow").EncMediaType.List;else if(a.listResponseMessage)return d("WAWebBackendJobs.flow").EncMediaType.ListResponse;else if(a.orderMessage)return d("WAWebBackendJobs.flow").EncMediaType.Order;else if(a.productMessage)return d("WAWebBackendJobs.flow").EncMediaType.Product;else if(a.groupInviteMessage)return d("WAWebBackendJobs.flow").EncMediaType.Url;else if(a.interactiveResponseMessage)return d("WAWebBackendJobs.flow").EncMediaType.NativeFlowResponse;else if(((b=a.extendedTextMessage)==null?void 0:b.matchedText)!=null&&a.extendedTextMessage.matchedText.trim()!=="")return d("WAWebBackendJobs.flow").EncMediaType.Url;return null}function e(a){var b=function(){switch(a){case d("WAWebBackendJobs.flow").EncMediaType.Image:return"image";case d("WAWebBackendJobs.flow").EncMediaType.Video:return"video";case d("WAWebBackendJobs.flow").EncMediaType.Ptv:return"ptv";case d("WAWebBackendJobs.flow").EncMediaType.Audio:return"audio";case d("WAWebBackendJobs.flow").EncMediaType.Ptt:return"ptt";case d("WAWebBackendJobs.flow").EncMediaType.VCard:return"vcard";case d("WAWebBackendJobs.flow").EncMediaType.Document:return"document";case d("WAWebBackendJobs.flow").EncMediaType.Gif:return"gif";case d("WAWebBackendJobs.flow").EncMediaType.ContactArray:return"contact_array";case d("WAWebBackendJobs.flow").EncMediaType.Location:return"location";case d("WAWebBackendJobs.flow").EncMediaType.LiveLocation:return"livelocation";case d("WAWebBackendJobs.flow").EncMediaType.Sticker:return"sticker";case d("WAWebBackendJobs.flow").EncMediaType.List:return"list";case d("WAWebBackendJobs.flow").EncMediaType.ListResponse:return"list_response";case d("WAWebBackendJobs.flow").EncMediaType.ButtonResponse:return"buttons_response";case d("WAWebBackendJobs.flow").EncMediaType.Order:return"order";case d("WAWebBackendJobs.flow").EncMediaType.Product:return"product";case d("WAWebBackendJobs.flow").EncMediaType.Url:return"url";case d("WAWebBackendJobs.flow").EncMediaType.NativeFlowResponse:return"native_flow_response";default:return null}};b=b();if(b)return d("WAWap").CUSTOM_STRING(b);throw c("err")("Unsupported type")}function f(a){return function(b){return b==null?d("WAWap").DROP_ATTR:a(b)}}e=f(e);function l(a){switch(a){case d("WAWebBackendJobs.flow").DecryptFailType.Show:return d("WAWap").DROP_ATTR;case d("WAWebBackendJobs.flow").DecryptFailType.Hide:return d("WAWap").CUSTOM_STRING("hide")}}function m(a){if(a.isUser())return d("WAWebWamEnumE2eDestination").E2E_DESTINATION.INDIVIDUAL;else if(a.isGroup())return d("WAWebWamEnumE2eDestination").E2E_DESTINATION.GROUP;else if(a.isStatus())return d("WAWebWamEnumE2eDestination").E2E_DESTINATION.STATUS;else if(a.isBroadcast())return d("WAWebWamEnumE2eDestination").E2E_DESTINATION.LIST;else if(a.isNewsletter())return d("WAWebWamEnumE2eDestination").E2E_DESTINATION.CHANNEL}function n(a){if(a instanceof d("WAWebHandleMsgError").UnknownDeviceMessageError)return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.UNKNOWN_COMPANION_NO_PREKEY;if(a instanceof d("WAWebSignalCommonErrors").SignalDecryptionError){var b=c("gkx")("26258")?.001:.01;switch(a.message){case"errSignalNoSession":case"errLoadSenderKeySession":return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.SIGNAL_NO_SESSION;case"errSignalInvalidMsg":return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.SIGNAL_INVALID_MESSAGE;case"errSignalInvalidKey":case"errSignalInvalidOneTimeKey":case"errSignalInvalidSignedPreKey":return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.SIGNAL_INVALID_KEY;case"errSignalTooManyMessagesInFuture":case"errSignalGrpTooManyMessagesInFuture":return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.SIGNAL_FUTURE_MESSAGE;case"errInvalidMacWithDecryptedPlaintext":case"errInvalidMacInvalidCipherKey":case"errInvalidMacInvalidCipherKeyNewChain":var e="MsgPlaceholderBadMac-"+a.message;d("WALogger").ERROR(i()).sendLogs(e,{sampling:b});return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.SIGNAL_BAD_MAC}e="MsgPlaceholderOther-"+a.message;d("WALogger").ERROR(h()).sendLogs(e,{sampling:b});return d("WAWebWamEnumPlaceholderReasonType").PLACEHOLDER_REASON_TYPE.OTHER}}function o(a){if(a.interactiveResponseMessage){return(a=a.interactiveResponseMessage.nativeFlowResponseMessage)==null?void 0:a.name}return null}f=f(function(a){return d("WAWap").CUSTOM_STRING(a)});function p(a){switch(a){case d("WAWebAck").EDIT_ATTR.SENDER_REVOKE:return d("WAWebWamEnumEditType").EDIT_TYPE.SENDER_REVOKE;case d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE:return d("WAWebWamEnumEditType").EDIT_TYPE.ADMIN_REVOKE;case d("WAWebAck").EDIT_ATTR.MESSAGE_EDIT:return d("WAWebWamEnumEditType").EDIT_TYPE.EDITED;default:return d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED}}function q(a,b){if(d("WAWebABProps").getABPropConfigValue("web_unwrap_message_for_stanza_attributes")){var c;c=(c=d("WAWebVerifyProtobufMsgObjectKeys").getUnwrappedProtobufMessage(a))!=null?c:a}else c=a;return d("WAWebSendMsgCommonApi").isRevokeMsg(c)?b.subtype==="admin_revoke"?d("WAWebWamEnumEditType").EDIT_TYPE.ADMIN_REVOKE:d("WAWebWamEnumEditType").EDIT_TYPE.SENDER_REVOKE:d("WAWebSendMsgCommonApi").isEditMsg(c)?d("WAWebWamEnumEditType").EDIT_TYPE.EDITED:d("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED}function r(a){return a?d("WAJobOrchestratorTypes").JOB_PRIORITY.OFFLINE:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}g.CIPHERTEXT_VERSION=j;g.getMetricE2eCiphertextType=a;g.getMetricMediaType=b;g.mediaTypeFromProtobuf=k;g.encodeMaybeMediaType=e;g.encodeMaybeDecryptFail=l;g.getMetricE2eDestination=m;g.getPlaceholderAddReason=n;g.nativeFlowNameTypeFromProtobuf=o;g.encodeMaybeNativeFlowName=f;g.getMetricEditType=p;g.getMetricEditTypeFromMsg=q;g.getNonCriticalNotificationPriority=r}),98);
__d("WAWebAddOnsMarkAddOnsAsReadDb",["Promise","WANullthrows","WAWebDBAddOnProviders","WAWebDBMarkAsReadForTable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).allSettled(Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];b=c("WANullthrows")(d("WAWebDBAddOnProviders").getProviderForAddOnType(b));return b.markAsRead==null?void 0:b.markAsRead(a)})));for(a of a)if(a.status==="rejected")throw a.reason});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map(),e=d("WAWebDBAddOnProviders").addOnProviders.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=(yield b.markAsRead==null?void 0:b.markAsRead(a));c.set(b.type,(b=d)!=null?b:[])});return function(a){return d.apply(this,arguments)}}()),f=[],g=d("WAWebDBMarkAsReadForTable").markAsReadForTable("message-orphans",a.map(String)).then(function(a){f.push.apply(f,a)});e=(yield (h||(h=b("Promise"))).allSettled([].concat(e,[g])));for(g of e)if(g.status==="rejected")throw g.reason;return{updatedAddOns:c,updatedOrphans:f}});return j.apply(this,arguments)}g.markAddOnsAsReadDb=a;g.markUnclassifiedAddOnsAsReadDb=e}),98);
__d("WALruCache",["WAErr","WALogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."]);h=function(){return a};return a}var i=function(a,b){this.key=a,this.value=b,this.prev=null,this.next=null};a=function(){function a(a){var b=this,e;this.$2=new Map();this.purgeNow=function(){for(var a=b.$6.prev;b.$4>b.$3&&a!==b.$5;a=a?a.prev:null){if(a==null)throw c("WAErr")("The linked list is not constructed properly.");var d=a,e=d.key;d=d.value;if(!b.$9(e,d))continue;b["delete"](e);b.$10&&b.$10(e,d)}b.$8&&b.$8(b.$2)};this.$3=a.sizeLimit;this.$7=a.getSize;this.$8=a.onPurge;this.$9=(e=a.shouldEvict)!=null?e:function(){return!0};this.$10=a.onEvict;this.$11=a.onAdd;this.$12=a.onDelete;this.$4=0;this.$5=new i("placeholder-head",null);this.$6=new i("placeholder-tail",null);this.$5.next=this.$6;this.$6.prev=this.$5;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){return b.purgeNow()})}var b=a.prototype;b.get=function(a){if(!this.$2.has(a))return null;a=this.$2.get(a);if(a==null)return null;var b=a.prev,d=a.next;b&&(b.next=d);d&&(d.prev=b);d=this.$5.next;if(d==null)throw c("WAErr")("The linked list is not constructed properly.");this.$5.next=a;d.prev=a;a.prev=this.$5;a.next=d;return a.value};b.has=function(a){return this.$2.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){if(this.$3===0)return;if(this.$7(b)>this.$3){d("WALogger").WARN(h());return}this["delete"](a);this.$14(a,b);this.schedulePurge()};b.$14=function(a,b){var d=new i(a,b);this.$2.set(a,d);var e=this.$5.next;if(e==null)throw c("WAErr")("The linked list is not constructed properly.");this.$5.next=d;e.prev=d;d.prev=this.$5;d.next=e;this.$4+=this.$7(b);this.$11&&this.$11(a,b)};b["delete"]=function(a){if(!this.$2.has(a))return;var b=this.$2.get(a);if(b==null)return;this.$4-=this.$7(b.value);var c=b.prev,d=b.next;c&&(c.next=d);d&&(d.prev=c);this.$2["delete"](a);this.$12&&this.$12(a,b.value)};b.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()};b.schedulePurge=function(){this.$1.onOrBefore(1e3)};b.getCurrentSize=function(){return this.$4};b.getPlaceholderHead=function(){return this.$5};return a}();g.LruCache=a}),98);
__d("WAWebDeviceListPk",["err"],(function(a,b,c,d,e,f,g){function a(a){switch(a.server){case"lid":return a.user+"@lid";case"c.us":return a.user;case"hosted":return a.user;case"hosted.lid":return a.user+"@lid";case"bot":return a.user+"@bot"}throw c("err")("Jid "+a.toString({legacy:!0})+' is not fully qualified to create a device list pk, jid.server should be "c.us" or "lid"')}g.createDeviceListPK=a}),98);
__d("WAWebApiDeviceList",["Promise","WAJids","WALruCache","WAWebApiContact","WAWebDeviceListPk","WAWebSchemaDeviceList","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i=new(d("WALruCache").LruCache)({sizeLimit:5e3,getSize:function(){return 1}});function j(a){var c=d("WAWebDeviceListPk").createDeviceListPK(a);if(!i.has(c)){var e=d("WAWebSchemaDeviceList").getDeviceListTable().get(c);i.put(c,e)}i.get(c)!=null&&d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_API_DEVICE_LIST_GET_DEVICE_RECORD);return(e=i.get(c))!=null?e:(h||(h=b("Promise"))).resolve(null)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[];a.forEach(function(a){i.has(d("WAWebDeviceListPk").createDeviceListPK(a))||c.push(d("WAWebDeviceListPk").createDeviceListPK(a))});if(c.length>0){var e=(yield d("WAWebSchemaDeviceList").getDeviceListTable().bulkGet(c));e.forEach(function(a,d){i.put(c[d],(h||(h=b("Promise"))).resolve(a))})}e=a.filter(function(a){return i.get(d("WAWebDeviceListPk").createDeviceListPK(a))!=null});e.length>0&&d("WAWebApiContact").checkPnToLidMapping(e,d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_API_DEVICE_LIST_BULK_GET_DEVICE_RECORD);return(h||(h=b("Promise"))).all(a.map(function(a){return i.get(d("WAWebDeviceListPk").createDeviceListPK(a))}))});return l.apply(this,arguments)}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebApiContact").checkPnToLidMapping([d("WAWebWidFactory").createUserWidFromDeviceListPk(a.id)],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_API_DEVICE_LIST_CREATE_OR_REPLACE_DEVICE_RECORD),yield d("WAWebSchemaDeviceList").getDeviceListTable().createOrReplace(a),i.put(a.id,(h||(h=b("Promise"))).resolve(a))});return m.apply(this,arguments)}function e(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebApiContact").checkPnToLidMapping(a.map(function(a){return d("WAWebWidFactory").createUserWidFromDeviceListPk(a.id)}),d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_API_DEVICE_LIST_BULK_CREATE_OR_REPLACE_DEVICE_RECORD),yield d("WAWebSchemaDeviceList").getDeviceListTable().bulkCreateOrReplace(a),a.forEach(function(a){i.put(a.id,(h||(h=b("Promise"))).resolve(a))})});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield k(a));return a.map(function(a){if(a&&!a.deleted){var b=a.devices.map(function(a){return{id:a.id,isHosted:a.isHosted}});return{id:a.id,devices:b}}return null})});return p.apply(this,arguments)}function f(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b===d("WAJids").DEFAULT_DEVICE_ID)return!0;a=(yield o([a]));a=a[0];if(!a)return!1;return!a.devices.some(function(a){return a.id===b})?!1:!0});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield k(a));return a.map(function(a){if(a&&!a.deleted){var b=a.devices.map(function(a){return{id:a.id,isHosted:a.isHosted}});return{id:a.id,devices:b,timestamp:a.timestamp,expectedTs:a.expectedTs}}return null})});return s.apply(this,arguments)}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMeUser").assertGetMe();a=(yield j(a));if(!a||a.deleted)throw c("err")("syncd: cannot find my device list");return a});return u.apply(this,arguments)}function v(){return d("WAWebSchemaDeviceList").getDeviceListTable().all()}g.getDeviceRecord=j;g.bulkGetDeviceRecord=k;g.createOrReplaceDeviceRecord=a;g.bulkCreateOrReplaceDeviceRecord=e;g.getDeviceIds=o;g.hasDevice=f;g.getDeviceInfoForSync=r;g.getMyDeviceList=t;g.getAllDeviceLists=v}),98);
__d("WAWebApiTasksScheduledTime",["WAWebModelStorageUtils","WAWebSchemaTasksScheduledTime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaTasksScheduledTime").getTasksScheduledTimeTable().get(a).then(function(a){return a==null?void 0:a.time})}function b(a,b){return d("WAWebModelStorageUtils").getStorage().lock(["tasks-scheduled-time"],function(c){c=c[0];var d={taskName:a,time:b};return c.createOrReplace(d)})}g.getTaskScheduledTime=a;g.updateTaskScheduledTime=b}),98);
__d("WAWebLastADVCheckTimeApi",["Promise","WAWebApiTasksScheduledTime"],(function(a,b,c,d,e,f,g){var h,i;function a(){i==null&&(i=d("WAWebApiTasksScheduledTime").getTaskScheduledTime("advDeviceInfoCheck"));return i}function c(a){i=(h||(h=b("Promise"))).resolve(a)}g.getLastADVDeviceInfoCheckTime=a;g.setLastADVDeviceInfoCheckTime=c}),98);
__d("WAWebAdvHandlerApi",["Promise","WALogger","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebCryptoCurve25519","WAWebDeviceListPk","WAWebHandleAdvForMessageApi","WAWebHandleAdvForUsyncApi","WAWebIdentityUpdateDeviceTableApi","WAWebLastADVCheckTimeApi","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleADVDeviceSyncResultImpl: start to handling "," updates"]);i=function(){return a};return a}function a(a,b,c,d,e,f,g){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h){g===void 0&&(g=!1);var i=(yield d("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime());return d("WAWebHandleAdvForMessageApi").handleADVDeviceUpdateForMessage(a,b,c,e,f,g,i,h)});return j.apply(this,arguments)}function e(a){var d=a.wid,e=a.devices;a=a.type;return a==null?(h||(h=b("Promise"))).reject(c("err")("handleADVDeviceNotification: notification without type")):k(d,e,a)}function f(a){return m(a)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=null;if(c==="add"){var f=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().loadIdentityKey(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString()));e=f?d("WAWebCryptoCurve25519").toCurveKeyPubKey(d("WAWebSignalCommonUtils").strToBuffer(f)):null;if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&b.deviceList!=null){b.deviceList=(f=b.deviceList)==null?void 0:f.filter(function(a){return a.id!==d("WAWebBizCoexUtils").HOSTED_DEVICE_ID})}}f=(yield d("WAWebApiDeviceList").getDeviceRecord(a));var g=(yield d("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime());c=d("WAWebHandleAdvForUsyncApi").handleDeviceNotification(a,c,b,e,f,g);if(c){if(c.clearRecord){yield d("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(a,(f==null?void 0:f.devices)||[],!1,f==null?void 0:f.advAccountType,c==null?void 0:(b=c.update)==null?void 0:b.advAccountType)}return d("WAWebIdentityUpdateDeviceTableApi").bulkApplyDeviceUpdate([{wid:a,update:c.update,currentRecord:f}])}});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||a.forEach(function(a){var b;if((a==null?void 0:(b=a.devices)==null?void 0:b.deviceList)==null)return;a.devices.deviceList=(b=a.devices.deviceList)==null?void 0:b.filter(function(a){return a.id!==d("WAWebBizCoexUtils").HOSTED_DEVICE_ID})});d("WALogger").LOG(i(),a.length).devConsole(a);var c=a.map(function(a){return a.wid}),e=a.filter(function(a){return(a=a.devices.keyIndex)==null?void 0:a.signedKeyIndexBytes}),f=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(e.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a.wid).toString()}))),g=new Map();e.forEach(function(a,b){g.set(d("WAWebDeviceListPk").createDeviceListPK(a.wid),f[b])});var j=(yield d("WAWebApiDeviceList").bulkGetDeviceRecord(c)),k=[],l=[];a.forEach(function(a,b){var c=g.get(d("WAWebDeviceListPk").createDeviceListPK(a.wid));c=c?d("WAWebCryptoCurve25519").toCurveKeyPubKey(d("WAWebSignalCommonUtils").strToBuffer(c)):null;b=j[b];c=d("WAWebHandleAdvForUsyncApi").handleADVSyncResult(a.wid,a.devices,c,b);if(c==null)return;if(c.clearRecord){var e;k.push({wid:a.wid,currentList:(b==null?void 0:b.devices)||[],currentAdvAccountType:b==null?void 0:b.advAccountType,incomingAdvAccountType:(e=c.update)==null?void 0:e.advAccountType});l.push({wid:a.wid,currentRecord:{id:d("WAWebDeviceListPk").createDeviceListPK(a.wid),deleted:!0},update:c.update})}else l.push({wid:a.wid,currentRecord:b,update:c.update})});yield (h||(h=b("Promise"))).all(k.map(function(a){var b=a.wid,c=a.currentList,e=a.currentAdvAccountType;a=a.incomingAdvAccountType;return d("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(b,c,!1,e,a)}));yield d("WAWebIdentityUpdateDeviceTableApi").bulkApplyDeviceUpdate(l)});return n.apply(this,arguments)}g.handleADVDeviceUpdateForMessage=a;g.handleADVDeviceNotification=e;g.handleADVDeviceSyncResult=f}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("WAWebAdvSignatureApi",["invariant","Promise","WABase64","WABinary","WAByteArray","WALogger","WAWebAdvHandlerApi","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebCryptoCurve25519","WAWebProtobufsAdv.pb","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVwithEncs: failed ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVwithEncs: start validate prekey msg "]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: failed"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: successfully verified accountSignature and deviceSignature"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: process adv device identity failed"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: add to coex cache for ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: invalid device signature"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["validateADVIdentity: invalid account signature"]);q=function(){return a};return a}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e===void 0&&(e=!1);var f=!1;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(f=a.isHosted());try{var g=d("WAWebWidFactory").toUserWid(a);c=d("WAByteArray").uint8ArrayToBuffer(c);var i=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().loadIdentityKey(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString()));if(i){i=d("WAWebCryptoCurve25519").toCurveKeyPubKey(d("WAWebSignalCommonUtils").strToBuffer(i));if(d("WAWebSignalCommonUtils").bufferEqual(i,c))return!0}i=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedDeviceIdentitySpec,b);i!=null||h(0,56342);b=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().loadIdentityKey(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(g).toString()));g=b?d("WAWebCryptoCurve25519").toCurveKeyPubKey(d("WAWebSignalCommonUtils").strToBuffer(b)):null;if(!E(i,c,g)){d("WALogger").WARN(q());return!1}if(!K(i,c,g,f)){d("WALogger").WARN(p());return!1}b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVDeviceIdentitySpec,i.details);b!=null||h(0,56341);f=i.accountSignatureKey;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(b.accountType===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(o(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").addToCoexHostedVerificationCache(a)),f=f&&f.byteLength>0?f:void 0);try{yield d("WAWebAdvHandlerApi").handleADVDeviceUpdateForMessage(a,b,g,f,c,e,b.accountType)}catch(a){d("WALogger").WARN(n()).devConsole(a);return!1}d("WALogger").LOG(m());return!0}catch(a){d("WALogger").WARN(l()).devConsole(a);return!1}});return s.apply(this,arguments)}function a(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e===void 0&&(e=!1);c=c.find(function(a){return a.e2eType===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg});if(!c)return!0;d("WALogger").LOG(k());try{a!=null||h(0,56346);c=d("WAWebSignalUtilsApi").extractIdentityKey(c.ciphertext);c!=null||h(0,56345);a=(yield r(a,b,new Uint8Array(c),e));yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();return a}catch(a){d("WALogger").WARN(j(),a);return!1}});return t.apply(this,arguments)}var u=new Uint8Array([6,5]),v=new Uint8Array([6,6]),w=new Uint8Array([6,0]),x=new Uint8Array([6,1]),y=new Uint8Array([6,2]);function e(){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=new Uint8Array(32);self.crypto.getRandomValues(a);a=d("WABase64").encodeB64(a);yield d("WAWebUserPrefsMultiDevice").setADVSecretKey(a);return a});return z.apply(this,arguments)}function f(){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsMultiDevice").getADVSecretKey());if(a==null)throw c("err")("secretKey is null or undefined");return a});return A.apply(this,arguments)}function B(a){if(a==null)return(i||(i=b("Promise"))).reject(c("err")("advSignedDeviceIdentity is null or undefined"));return a.deviceSignature==null?(i||(i=b("Promise"))).reject(c("err")("advSignedDeviceIdentity is missing deviceSignature")):d("WAWebSignalStoreApi").waSignalStore.putADVSignedIdentity(a)}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSignalStoreApi").waSignalStore.getADVSignedIdentity());if(a==null)throw c("err")("advSignedDeviceIdentity is null or undefined");if(a.deviceSignature==null)throw c("err")("advSignedDeviceIdentity is missing deviceSignature");return d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedDeviceIdentitySpec,a).readByteArray()});return D.apply(this,arguments)}function E(a,b,c){a=G(a,c);c=a.accountSignatureKey;var d=a.accountSignature;a=a.advDeviceIdentityDetails;return F(a,d,b,c)}function F(a,b,c,e){var f=w;if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var g=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVDeviceIdentitySpec,a);g.deviceType===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(f=u)}e!=null||h(0,56344);b!=null||h(0,56295);g=d("WABinary").Binary.build(f,a,c).readByteArray();return d("WAWebCryptoCurve25519").verifySignature(new Uint8Array(e),g,new Uint8Array(b))}function G(a,b){var c=a.details,e=a.accountSignatureKey||b;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(e=e&&e.byteLength>0?e:b);e!=null||h(0,56344);b=a.accountSignature;b!=null||h(0,56295);c!=null||h(0,70451);return{accountSignatureKey:e,accountSignature:b,advDeviceIdentityDetails:c}}function H(a,b,c){a=a.details;a=d("WABinary").Binary.build(x,a,b.pubKey,c).readByteArray().buffer;return d("WAWebCryptoCurve25519").calculateSignature(b,a)}function I(a,b,c,e,f){var g=x;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(c===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(g=v));c=d("WABinary").Binary.build(g,a,b,f).readByteArray();return d("WAWebCryptoCurve25519").verifySignature(new Uint8Array(b),c,new Uint8Array(e))}function J(a,b){var c=a.details,e=a.deviceSignature;e!=null||h(0,56343);a=a.accountSignatureKey||b;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(a=a&&a.byteLength>0?a:b);a!=null||h(0,56344);c!=null||h(0,70451);return{accountSignatureKey:a,deviceSignature:e,advDeviceIdentityDetails:c}}function K(a,b,c,e){e===void 0&&(e=!1);a=J(a,c);c=a.accountSignatureKey;var f=a.deviceSignature;a=a.advDeviceIdentityDetails;var g=d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(e&&(g=d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED));return I(a,b,g,f,c)}function L(){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsMultiDevice").setADVSecretKey(void 0)});return M.apply(this,arguments)}function N(a,b){var c=a.details;a=a.accountSignature;a!=null||h(0,56295);c=d("WABinary").Binary.build(y,c).readByteArray();return d("WAWebCryptoCurve25519").verifySignature(new Uint8Array(b),c,new Uint8Array(a))}g.validateADVwithIdentityKey=r;g.validateADVwithEncs=a;g.ADV_HOSTED_PREFIX_DEVICE_IDENTITY_ACCOUNT_SIGNATURE=u;g.generateADVSecretKey=e;g.getADVSecretKey=f;g.setADVSignedIdentity=B;g.getADVEncodedIdentity=C;g.verifyDeviceIdentityAccountSignature=E;g.generateDeviceSignature=H;g.clearADVSecretKey=L;g.verifyKeyIndexListAccountSignature=N}),98);
__d("WAWebHandleAdvForMessageApi",["invariant","WAJids","WAWebApiDeviceList","WAWebHandleAdvListResetApi","WAWebHandleAdvNoListResetApi","WAWebSignalCommonUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function a(a,b,c,d,e,f,g,h){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,i,j){g===void 0&&(g=!1);var k=b.rawId,l=b.timestamp;b=b.keyIndex;k!=null||h(0,56258);l!=null||h(0,56257);b!=null||h(0,56256);l={rawId:k,timestamp:l,keyIndex:b};b=a.device;b!=null&&b!==d("WAJids").DEFAULT_DEVICE_ID||h(0,56259);b=d("WAWebWidFactory").toUserWid(a);b=(yield d("WAWebApiDeviceList").getDeviceRecord(b));c=c==null||e!=null&&!d("WAWebSignalCommonUtils").bufferEqual(c,e);return!b||b.deleted||b.rawId!==k||c?d("WAWebHandleAdvListResetApi").handleListReset(a,l,c?e:null,f,b,g,i,j):d("WAWebHandleAdvNoListResetApi").handleNoListReset(a,l,f,b,g,i,j)});return i.apply(this,arguments)}g.handleADVDeviceUpdateForMessage=a}),98);
__d("WAWebAdvExpectedTsApi",["WATimeUtils"],(function(a,b,c,d,e,f,g){function a(a,b,c){var d=b==null?void 0:b.timestamp;if(d==null)return{expectedTs:void 0,expectedTsLastDeviceJobTs:void 0,expectedTsUpdateTs:void 0};var e,f,g;b!=null&&!b.deleted&&(e=b.expectedTs,f=b.expectedTsLastDeviceJobTs,g=b.expectedTsUpdateTs);return h(a,d,c,e,f,g)}function h(a,b,c,e,f,g){f={expectedTs:e,expectedTsLastDeviceJobTs:f,expectedTsUpdateTs:g};if(b>=a||e!=null&&e>=a)return f;f.expectedTs=a;f.expectedTsLastDeviceJobTs=(g=c)!=null?g:void 0;(e==null||b>=e)&&(f.expectedTsUpdateTs=d("WATimeUtils").unixTimeWithoutClockSkewCorrection());return f}function b(a,b,c,d){if(c==null||c.deleted)return!1;if(c.expectedTs==null)return!1;if(a>=c.expectedTs)return!0;return a<c.expectedTs&&b===c.expectedTs&&d!=null&&(c.expectedTsLastDeviceJobTs==null||d>c.expectedTsLastDeviceJobTs)?!0:!1}g.computeExpectedTsForDeviceRecord=a;g.computeNewExpectedTs=h;g.shouldClearExpectedTs=b}),98);
__d("WAWebHandleAdvListResetApi",["invariant","WAJids","WALongInt","WATimeUtils","WAWebABProps","WAWebAdvExpectedTsApi","WAWebBizCoexGatingUtils","WAWebCryptoCurve25519","WAWebDeviceListPk","WAWebIdentityUpdateDeviceTableApi","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){function a(a,b,c,d,e,f,g,h){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k){var l;i===void 0&&(i=!1);var m=b.rawId,n=b.timestamp;b=b.keyIndex;n=d("WALongInt").numberOrThrowIfTooLarge(n);var o=a.device;o!=null&&o!==d("WAJids").DEFAULT_DEVICE_ID||h(0,56259);var p=d("WAWebWidFactory").toUserWid(a),q=0;q=(l=g==null?void 0:g.timestamp)!=null?l:d("WATimeUtils").pastUnixTime((d("WAWebABProps").getABPropConfigValue("num_days_key_index_list_expiration")-1)*d("WATimeUtils").DAY_SECONDS);if(g!=null&&!g.deleted){if(g.timestamp>n)throw c("err")("handleADVDeviceIdentity: out-of-order timestamp detected");yield d("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(p,g.devices,i)}e&&(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().saveIdentity(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(p).toString(),d("WAWebCryptoCurve25519").toSignalCurvePubKey(e)));l={id:d("WAWebDeviceListPk").createDeviceListPK(a),rawId:m,timestamp:q,devices:[{id:o,keyIndex:b},{id:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:0}],validIndexes:null,currentIndex:null,deleted:!1};g=d("WAWebAdvExpectedTsApi").computeExpectedTsForDeviceRecord(n,l,j);l.expectedTs=g.expectedTs;l.expectedTsLastDeviceJobTs=g.expectedTsLastDeviceJobTs;l.expectedTsUpdateTs=g.expectedTsUpdateTs;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(k!=null&&(l.advAccountType=k));yield d("WAWebIdentityUpdateDeviceTableApi").bulkApplyDeviceUpdate([{wid:p,update:l,currentRecord:null}],i);yield d("WAWebSignalProtocolStore").getSignalProtocolStore().saveIdentity(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString(),d("WAWebCryptoCurve25519").toSignalCurvePubKey(f))});return i.apply(this,arguments)}g.handleListReset=a}),98);
__d("WAWebHandleAdvNoListResetApi",["invariant","WAJids","WALongInt","WAWebAdvExpectedTsApi","WAWebBizCoexGatingUtils","WAWebCryptoCurve25519","WAWebIdentityUpdateDeviceTableApi","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){function a(a,b,c,d,e,f,g){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j){g===void 0&&(g=!1);var k=b.timestamp;b=b.keyIndex;k=d("WALongInt").numberOrThrowIfTooLarge(k);var l=a.device;l!=null&&l!==d("WAJids").DEFAULT_DEVICE_ID||h(0,56259);if(f.timestamp>=k&&f.validIndexes&&!f.validIndexes.includes(b))throw c("err")("handleADVDeviceIdentity: out-of-order timestamp detected");var m=new Map(f.devices.map(function(a){return[a.id,a.keyIndex]}));if(!m.has(l)||m.get(l)!==b){m.set(l,b);l=Array.from(m.entries()).map(function(a){var b=a[0];a=a[1];return{id:b,keyIndex:a}});b=babelHelpers["extends"]({},f,{devices:l,deleted:!1});m=d("WAWebAdvExpectedTsApi").computeExpectedTsForDeviceRecord(k,b,i);b.expectedTs=m.expectedTs;b.expectedTsLastDeviceJobTs=m.expectedTsLastDeviceJobTs;b.expectedTsUpdateTs=m.expectedTsUpdateTs;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(b.advAccountType=j);yield d("WAWebIdentityUpdateDeviceTableApi").bulkApplyDeviceUpdate([{wid:d("WAWebWidFactory").toUserWid(a),update:b,currentRecord:f}],g,!0);yield d("WAWebSignalProtocolStore").getSignalProtocolStore().saveIdentity(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString(),d("WAWebCryptoCurve25519").toSignalCurvePubKey(e))}});return i.apply(this,arguments)}g.handleNoListReset=a}),98);
__d("WAWebHandleAdvDeviceNotificationApi",["WAJids","WALogger","WALongInt","WAWebAdvExpectedTsApi","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebBizCoexUtils","WAWebDeviceListPk","WAWebHandleAdvDeviceNotificationUtils","WAWebProtobufsAdv.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clear record due to mismatch between local ADV account type and incoming ADV account type of "," for ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDeviceAddNotification: add to coex cache for ",""]);i=function(){return a};return a}function a(a,b,c,e,f,g,j){if(!g||g.deleted){d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&d("WAWebBizCoexUtils").triggerUsyncForCoexDeviceAdd(b,a);return null}if(c<g.timestamp)return null;if(f==null)return null;f=d("WAWebHandleAdvDeviceNotificationUtils").decodeSignedKeyIndexBytes(f,e);if(!f)return null;e=f.rawId;var k=d("WALongInt").numberOrThrowIfTooLarge(f.timestamp),l=null;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(l=f.accountType,l===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(i(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").addToCoexHostedVerificationCache(a)));if(k!==c)return null;c=!1;var m=null,n=g.timestamp;g.rawId!==e?c=!0:m=g.devices;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(g.advAccountType!=null&&(g.advAccountType!==l&&(c=!0,d("WALogger").LOG(h(),l,a==null?void 0:a.toLogString()))));var o=new Set(f.validIndexes),p=f.currentIndex||0,q=m==null?[]:m.filter(function(a){return a.id!==d("WAJids").DEFAULT_DEVICE_ID&&(o.has(a.keyIndex)||a.keyIndex>p)});b.forEach(function(a){var b=a.id;a=a.keyIndex;b!==d("WAJids").DEFAULT_DEVICE_ID&&a!=null&&o.has(a)&&q.push({id:b,keyIndex:a})});q.push({id:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:0});g={id:d("WAWebDeviceListPk").createDeviceListPK(a),rawId:e,timestamp:n,validIndexes:Array.from(o),devices:q,currentIndex:f.currentIndex,deleted:!1};m=d("WAWebAdvExpectedTsApi").computeExpectedTsForDeviceRecord(k,g,j);g.expectedTs=m.expectedTs;g.expectedTsLastDeviceJobTs=m.expectedTsLastDeviceJobTs;g.expectedTsUpdateTs=m.expectedTsUpdateTs;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(l!=null&&(g.advAccountType=l));return{update:g,clearRecord:c}}function b(a,b,c){if(c==null||c.deleted)return null;if(b<c.timestamp)return null;var e=new Map(a.map(function(a){return[a.id,a.keyIndex]}));b=c.devices.filter(function(a){if(a.id!==d("WAJids").DEFAULT_DEVICE_ID){var b=e.get(a.id);return b==null||b!==a.keyIndex}return!1});b.push({id:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:0});return{update:babelHelpers["extends"]({},c,{devices:b}),clearRecord:!1}}g.handleDeviceAddNotification=a;g.handleDeviceRemoveNotification=b}),98);
__d("WAWebHandleAdvDeviceNotificationUtils",["WAWebAdvSignatureApi","WAWebProtobufsAdv.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){function a(a,b){var c;try{c=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedKeyIndexListSpec,b)}catch(a){return null}if(!d("WAWebAdvSignatureApi").verifyKeyIndexListAccountSignature(c,a))return null;var e;try{e=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVKeyIndexListSpec,c.details)}catch(a){return null}b=e;a=b.timestamp;var f=b.rawId,g=b.validIndexes,h=b.currentIndex;b=b.accountType;if(a==null)return null;return f==null?null:{timestamp:a,rawId:f,validIndexes:g,currentIndex:h,accountType:b}}g.decodeSignedKeyIndexBytes=a}),98);
__d("WAWebHandleAdvOmittedResultApi",["WAJids","WAWebAdvExpectedTsApi"],(function(a,b,c,d,e,f,g){function a(a,b,c,e){if(!b||b.deleted)return null;if(a!=null&&a<b.timestamp)return null;var f=babelHelpers["extends"]({},b);a!=null&&(f.timestamp=a,d("WAWebAdvExpectedTsApi").shouldClearExpectedTs(a,c,b,e)&&(f.expectedTs=void 0,f.expectedTsLastDeviceJobTs=void 0,f.expectedTsUpdateTs=void 0));f.devices=[{id:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:0}];return{update:f,clearRecord:!1}}g.handleOmittedResult=a}),98);
__d("WAWebHandleAdvForUsyncApi",["invariant","WAJids","WALogger","WAWebHandleAdvDeviceNotificationApi","WAWebHandleAdvKeyIndexResultApi","WAWebHandleAdvOmittedResultApi"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processADVSyncResult: drop response with companion device but no keyIndexbytes"]);i=function(){return a};return a}function a(a,b,c,e,f){var g=b.deviceList;b=b.keyIndex;if(b==null||b.signedKeyIndexBytes==null){if(g!=null&&g.some(function(a){return a.id!==d("WAJids").DEFAULT_DEVICE_ID})){d("WALogger").LOG(i());return}return d("WAWebHandleAdvOmittedResultApi").handleOmittedResult(b==null?void 0:b.ts,e,b==null?void 0:b.expectedTs,f)}var h=b.ts,j=b.expectedTs;b=b.signedKeyIndexBytes;return d("WAWebHandleAdvKeyIndexResultApi").handleKeyIndexResult(a,g,h,b,c,e,f,j)}function b(a,b,c,e,f,g){var i=c.deviceList;c=c.keyIndex;i!=null||h(0,75739,b);c!=null||h(0,75740,b);var j=c.ts,k=c.signedKeyIndexBytes;if(b==="add"){k!=null||h(0,75741,b);return d("WAWebHandleAdvDeviceNotificationApi").handleDeviceAddNotification(a,i,j,k,e,f,g)}if(b==="remove")return d("WAWebHandleAdvDeviceNotificationApi").handleDeviceRemoveNotification(i,c.ts,f)}g.handleADVSyncResult=a;g.handleDeviceNotification=b}),98);
__d("WAWebHandleAdvKeyIndexResultApi",["invariant","WAJids","WALogger","WALongInt","WAWebAdvExpectedTsApi","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebDeviceListPk","WAWebHandleAdvDeviceNotificationUtils","WAWebProtobufsAdv.pb"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clear record to force hosted notification update"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clear record due to mismatch between local ADV account type and incoming ADV account type of "," for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleKeyIndexResult: add to coex cache for ",""]);k=function(){return a};return a}var l=99;function a(a,b,c,e,f,g,m,n){if((g==null?void 0:g.timestamp)!=null&&c<g.timestamp)return null;if(f==null)return null;f=d("WAWebHandleAdvDeviceNotificationUtils").decodeSignedKeyIndexBytes(f,e);if(!f)return null;e=f.rawId;var o=d("WALongInt").numberOrThrowIfTooLarge(f.timestamp),p=null;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(p=f.accountType,p===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(k(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").addToCoexHostedVerificationCache(a)));if(o!==c)return null;c=!1;var q=null;b=b;if(g&&!g.deleted){b==null&&(b=g.devices);g.rawId!==e?c=!0:q=g.devices;if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var r=g.advAccountType!=null&&g.advAccountType!==p||g!=null&&p===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&p!==(g==null?void 0:g.advAccountType);r&&(c=!0,d("WALogger").LOG(j(),p,a==null?void 0:a.toLogString()))}}else if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){r=p===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(g==null?void 0:g.deletedChangedToHost)!==!0;r&&(c=!0,d("WALogger").DEV(i()))}var s=new Map(),t=new Set(f.validIndexes),u=f.currentIndex||0;b&&b.forEach(function(a){a.keyIndex!=null&&t.has(a.keyIndex)&&(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(a.id===l&&(a.isHosted===!0||h(0,76137))),s.set(a.id,a.keyIndex))});q!=null&&q.forEach(function(a){a.keyIndex>u&&s.set(a.id,a.keyIndex)});s.set(d("WAJids").DEFAULT_DEVICE_ID,0);r=Array.from(s.entries()).map(function(a){var b=a[0];a=a[1];return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&b===l?{id:b,keyIndex:a,isHosted:!0}:{id:b,keyIndex:a}});b=o;q={id:d("WAWebDeviceListPk").createDeviceListPK(a),rawId:e,timestamp:b,validIndexes:Array.from(t),devices:r,currentIndex:f.currentIndex,deleted:!1,advAccountType:p};!c&&!d("WAWebAdvExpectedTsApi").shouldClearExpectedTs(o,n,g,m)&&(g&&!g.deleted&&(q.expectedTs=g.expectedTs,q.expectedTsLastDeviceJobTs=g.expectedTsLastDeviceJobTs,q.expectedTsUpdateTs=g.expectedTsUpdateTs));return{update:q,clearRecord:c}}g.handleKeyIndexResult=a}),98);
__d("WAWebGroupsParticipantsApi",["WAWebAdvSyncDeviceListApi","WAWebDBGroupParticipant","WAWebDBParticipantTypes","WAWebGroupType","WAWebOfflineDeviceCache","WAWebPnhCagIncognito","WAWebSchemaGroupMetadata","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,c=a.participants,e=a.isOffline,f=a.groupInfo;a=a.skipDeviceSync;a=a===void 0?!1:a;var g=[],h=[];c.forEach(function(a){a.isAdmin&&g.push(a.id),a.isSuperAdmin&&h.push(a.id)});var i=d("WAWebUserPrefsMeUser").getMaybeMeUser(),j=g.some(function(a){return i&&i.equals(a)}),k=!1;f!=null&&(k=Boolean(f.incognito)&&Boolean(f.defaultSubgroup));k=k?d("WAWebPnhCagIncognito").augmentedCagGroupParticipantList(j,c):c.map(function(a){a=a.id;return a});a?j=k:j=(yield q(k,e));return d("WAWebDBGroupParticipant").replaceParticipants({group:b,participants:c,admins:g,superAdmins:h,deviceIds:j,groupInfo:f})});return h.apply(this,arguments)}function e(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,e=a.participants,f=a.isOffline;a=a.reason;var g=!1,h=b.toString(),i=!1,j=[],k=d("WAWebUserPrefsMeUser").assertGetMeUser(),l=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(h));if(l==null)throw c("err")("addParticipants: groupMetadataRecord is null");var m=l.isLidAddressingMode===!0,n=e.some(function(a){return a.id.isLid()});h=(yield d("WAWebSchemaParticipant").getParticipantTable().get(h));h!=null&&(g=Boolean(l.defaultSubgroup),j=h.admins.map(function(a){return d("WAWebWidFactory").createWid(a)}),i=j.some(function(a){return k&&k.equals(a)})||a===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE);if(n&&!g&&!m)return;h=e.map(function(a){a=a.id;return a});g&&(h=a===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE?[].concat(j,h,[k]):d("WAWebPnhCagIncognito").augmentedCagGroupParticipantList(i,e));n=(yield q(h,f));return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.ADD,participants:e,deviceIds:n},l,f)});return i.apply(this,arguments)}function f(a){var b=a.group,c=a.participants,e=a.timestamp,f=a.author,g=a.reason,h=a.groupMetadata;a=a.isOffline;return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.REMOVE,participants:c,timestamp:e,author:f,reason:g},h,a)}function j(a){var b=a.group,c=a.participants,e=a.groupMetadata;a=a.isOffline;return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE,participants:c},e,a)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,c=a.participants,e=a.groupMetadata;a=a.isOffline;var f=b.toString(),g=d("WAWebUserPrefsMeUser").assertGetMeUser(),h=c.some(function(a){return g.equals(a.id)}),i;if(h){h=(yield d("WAWebSchemaParticipant").getParticipantTable().get(f));if(h!=null){f=Boolean(e.defaultSubgroup);f&&(f=h.admins.map(function(a){return d("WAWebWidFactory").createWid(a)}),i=(yield q([].concat(f,[g]),a)))}}return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE,participants:c,deviceIds:i},e,a)});return l.apply(this,arguments)}function m(a){var b=a.group,c=a.participants;a=a.isOffline;return d("WAWebDBGroupParticipant").updateCommunityParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE,participants:c},a)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group;a=a.newSuperAdmin;return d("WAWebDBGroupParticipant").setDBGroupSuperAdmin(b,a)});return o.apply(this,arguments)}function p(a){var b=a.group,c=a.participants;a=a.isOffline;return d("WAWebDBGroupParticipant").updateCommunityParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE,participants:c},a)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(b){a.forEach(function(a){d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(String(a))});return a}b=(yield d("WAWebAdvSyncDeviceListApi").syncAndGetDeviceList(a));var c=[];b.forEach(function(b,e){if(!b)c.push(a[e]);else{var f=b.id;e=b.devices;c=c.concat(e.map(function(a){return d("WAWebWidFactory").createDeviceWidFromDeviceListPk(f,a.id,a.isHosted)}))}});return c});return r.apply(this,arguments)}function s(a){return d("WAWebSchemaParticipant").getParticipantTable().bulkGet(a.map(function(a){return a.toString()}))}function t(a){return d("WAWebSchemaParticipant").getParticipantTable().get(a.toString())}function u(a){a=a==null?void 0:a.participants;if(a==null)return!1;var b=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(b!=null&&a.includes(b.toString()))return!0;b=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();return b!=null&&a.includes(b.toString())?!0:!1}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return u(yield t(a))});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield s(a)).map(u)});return y.apply(this,arguments)}g.updateParticipants=a;g.addParticipants=e;g.removeParticipants=f;g.demoteParticipants=j;g.promoteParticipants=k;g.promoteCommmunityParticipants=m;g.setGroupSuperAdmin=n;g.demoteCommmunityParticipants=p;g.bulkGetParticipants=s;g.getParticipants=t;g.checkMyMembership=v;g.bulkCheckMyMembership=x}),98);
__d("WAWebApiUnjoinedSubgroupMetadataStore",["WAWebSchemaUnjoinedSubgroupMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().remove(a.toString())}function h(a){var b={},c=a.defaultSubgroup,d=a.generalSubgroup,e=a.parentGroupId,f=babelHelpers.objectWithoutPropertiesLoose(a,["defaultSubgroup","generalSubgroup","parentGroupId"]);c!=null&&(b.defaultSubgroup=c);d!=null&&(b.generalSubgroup=d);e!=null&&(b.parentGroup=e.toString());return babelHelpers["extends"]({},f,b,{id:a.id.toString(),hiddenSubgroup:(c=a.hiddenSubgroup)!=null?c:!1,membershipApprovalMode:(d=a.membershipApprovalMode)!=null?d:!1,membershipApprovalRequest:(e=a.membershipApprovalRequest)!=null?e:!1})}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.unjoinedSubgroups,c=a.parentGroupId;a=a.link;if(!a){yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemove(b.map(function(a){return a.id.toString()}));return}a=[];var e=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(b.map(function(a){return a.id.toString()})));a=b.map(function(a,b){b=e[b];var d={subject:a.subject,subjectTime:a.subjectTime||0};if(b){var f=b.subjectTime||0;f>d.subjectTime&&(d={subject:b.subject,subjectTime:f})}return h(babelHelpers["extends"]({},a,d,{parentGroupId:c}))});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(a)});return i.apply(this,arguments)}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.unjoinedSubgroupIds;a=a.parentGroupId;a=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().equals(["parentGroup"],a.toString()));a=a.map(function(a){return a.id});var c=b.map(function(a){return a.toString()});b=a.filter(function(a){return!c.includes(a)});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemoveByIndex(["id"],b)});return j.apply(this,arguments)}function f(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().get(a.toString()));if(a!=null){a=babelHelpers["extends"]({},a,{membershipApprovalRequest:b});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge([a])}});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(a.map(function(a){return a.id.toString()}))),c=[];a.forEach(function(a,d){d=b[d];d&&c.push(babelHelpers["extends"]({},d,{size:a.participantCount}))});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(c)});return m.apply(this,arguments)}g.removeUnjoinedSubgroupMetadataFromStorage=a;g.updateUnjoinedSubgroups=c;g.cleanUnjoinedSubgroups=e;g.updateMembershipApprovalRequestinDB=f;g.updateSizeInDB=l}),98);
__d("WAWebGroupUnjoinedSubgroupJob",["WAJobOrchestratorTypes","WAWebApiUnjoinedSubgroupMetadataStore","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b,c){c===void 0&&(c=!0);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateUnjoinedSubgroups",function(a){return d("WAWebApiUnjoinedSubgroupMetadataStore").updateUnjoinedSubgroups(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroups:a,parentGroupId:b,link:c})}function b(a,b){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("cleanUnjoinedSubgroups",function(a){return d("WAWebApiUnjoinedSubgroupMetadataStore").cleanUnjoinedSubgroups(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroupIds:a,parentGroupId:b})}g.updateUnjoinedSubgroupsJob=a;g.cleanUnjoinedSubgroupsJob=b}),98);
__d("WAWebUpdateDbForCommunityAction",["Promise","WAWebDBCommunity","WAWebDBGroupsGroupMetadata","WAWebGroupUnjoinedSubgroupJob","WAWebGroupsParticipantsApi","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(a,b){return l(a,b,!1)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=(yield (h||(h=b("Promise"))).all([d("WAWebDBCommunity").getJoinedSubgroupsMetadata(d("WAWebWidFactory").createWid(a.id)).then(function(a){return a.filter(function(a){return!d("WAWebWidFactory").createWid(a.id).equals(c)})}),d("WAWebDBCommunity").getUnjoinedSubgroupsMetadata(d("WAWebWidFactory").createWid(a.id))]));var f=a[0];a=a[1];f=f.concat(a).map(function(a){var b=a.id;a=a.subject;return{id:d("WAWebWidFactory").createWid(b),subject:a}});return i(e,f)});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b.forEach(function(b){b.parentGroupId=c?a:void 0,b.generalSubgroup=c?b.generalSubgroup:void 0,b.hiddenSubgroup=c?b.hiddenSubgroup:void 0});b=p(b,yield n(b.map(function(a){return a.id})));var e=b.joinedSubgroups;b=b.unjoinedSubgroups;e=e.map(function(b){return d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(b.id,{parentGroup:c?a.toString():void 0,generalSubgroup:c?b.generalSubgroup:void 0,hiddenSubgroup:c?b.hiddenSubgroup:void 0})});b=d("WAWebGroupUnjoinedSubgroupJob").updateUnjoinedSubgroupsJob(b,a,c);return[].concat(e,[b])});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map((yield d("WAWebGroupsParticipantsApi").bulkGetParticipants(a)).filter(Boolean).map(function(a){return[a.groupId,a.participants]})),c=d("WAWebUserPrefsMeUser").assertGetMeUser().toString();return function(a){return(a=(a=b.get(a.toString()))==null?void 0:a.includes(c))!=null?a:!1}});return o.apply(this,arguments)}function p(a,b){return a.reduce(function(a,c){b(c.id)?a.joinedSubgroups=a.joinedSubgroups.concat(c):a.unjoinedSubgroups=a.unjoinedSubgroups.concat(c);return a},{joinedSubgroups:[],unjoinedSubgroups:[]})}function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[],e=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if((e==null?void 0:e.isParentGroup)!==!0)return c;var f={suspended:!0,terminated:!0};c.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(a,f,b));var g=(yield d("WAWebDBCommunity").getDefaultSubgroup(a));g!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(g))&&c.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,f,b));f=(yield j(e,g,a));c.push.apply(c,f);return c});return q.apply(this,arguments)}function r(a){var b=[];b.push(d("WAWebSchemaGroupMetadata").getGroupMetadataTable().remove(a.toString()));b.push(d("WAWebSchemaChat").getChatTable().remove(a.toString()));return b}function c(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=[];a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(a==null||a.defaultSubgroup!==!0)return e;a=a.parentGroup;a!=null&&e.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(d("WAWebWidFactory").createWid(a),{suspended:b},c));return e});return s.apply(this,arguments)}function e(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[],e=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(e==null||e.isParentGroup!==!0)return c;var f=(yield d("WAWebDBCommunity").getDefaultSubgroup(a));f!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(f))&&c.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(f,{terminated:!0,parentGroup:void 0},b));b=(yield j(e,f,a));c.push.apply(c,b);c.push.apply(c,r(a));return c});return t.apply(this,arguments)}function f(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];if(!a)return b;var c=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(!c||c.isParentGroup!==!0)return b;var e=(yield d("WAWebDBCommunity").getDefaultSubgroup(a));c=e==null?[]:yield j(c,e,a);b.push.apply(b,c);b.push.apply(b,r(a));return b});return u.apply(this,arguments)}g.databaseUpdatesForSubgroupUnlink=i;g.partitionSubgroups=p;g.databaseUpdatesForIntegrityDeactivateCommunity=a;g.maybeUpdateCommunitySuspendedStatus=c;g.databaseUpdatesForDeactivateCommunity=e;g.databaseUpdatesForExitedCommunity=f}),98);
__d("WAWebEphemeralityUtils",["WAWebEphemeralityTypes","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){switch(a){case d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:return 1;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange:return 3;default:return null}}function b(a,b){return b==null?a>0?1:null:a===b?2:1}function c(a){switch(a){case 1:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;case 2:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;case 3:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;default:return null}}function e(a){switch(a){case"1":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;case"2":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;case"3":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;default:return null}}function f(a){switch(a){case"chat_settings":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;case"account_settings":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;case"bulk_change":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;case"biz_supports_fb_hosting":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting;case"unknown_groups":return d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups;case"unknown":default:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.Unknown}}function h(a){switch(a){case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.CHAT_SETTING:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.ACCOUNT_SETTING:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BULK_CHANGE:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN_GROUPS:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups;default:return}}g.getGroupEphemeralTrigger=a;g.getEphemeralTriggerForGroupCreation=b;g.getDisappearingModeTrigger=c;g.getDisappearingModeTriggerString=e;g.getDisappearingModeTriggerFromString=f;g.getDisappearingModeTriggerFromProtobuf=h}),98);
__d("WAWebDBGroupMembeshipApprovalRequest",["WABatcher","WALogger","WAWebModelStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeMembershipApprovalRequestsBatched: aggregating "," changes"]);h=function(){return a};return a}var i=3e3,j=function(){return d("WABatcher").batch({delayMs:i},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h(),a.length).devConsole(a);var b=a.flatMap(function(a){var b=a.id.toString();return a.requests.map(function(a){return[b,a.toString()]})});yield d("WAWebModelStorageUtils").getStorage().lock(["pending-membership-approval-request"],function(a){a=a[0];return a.bulkRemove(b)});return b.map(function(a){return void 0})});return function(b){return a.apply(this,arguments)}}())}();function a(a,b,c){c===void 0&&(c=!1);if(c)return j({id:a,requests:b});var e=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["pending-membership-approval-request"],function(a){a=a[0];return a.bulkRemove(b.map(function(a){return[e,a.toString()]}))})}g.removeMembershipApprovalRequests=a}),98);
__d("WAWebGroupsMembershipApprovalRequestsApi",["WAWebDBGroupMembeshipApprovalRequest"],(function(a,b,c,d,e,f,g){function a(a){var b=a.group,c=a.requests;a=a.isOffline;return d("WAWebDBGroupMembeshipApprovalRequest").removeMembershipApprovalRequests(b,c,a)}g.removeMembershipApprovalRequests=a}),98);
__d("WAWebGroupMembershipApprovalRequestsJob",["WAJobOrchestratorTypes","WAWebGroupsMembershipApprovalRequestsApi","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b,c){a={group:a,requests:b,isOffline:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("removeMembershipApprovalRequests",function(a){return d("WAWebGroupsMembershipApprovalRequestsApi").removeMembershipApprovalRequests(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}g.removeMembershipApprovalRequestsJob=a}),98);
__d("WAWebDBBulkPersistContact",["WABatcher","WALogger","WAWebLidAwareContactsDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistContactChanges: persisting "," records"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistContactChanges: processing "," records"]);i=function(){return a};return a}var j=d("WABatcher").batch({delayMs:3e3},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield k(a);return a.map(function(a){return void 0})});return function(b){return a.apply(this,arguments)}}());function a(a,b){return j(babelHelpers["extends"]({},b,{id:a.toJid()}))}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i(),a.length);b=b();d("WALogger").DEV(h(),a.length);yield c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b);function b(){return Array.from(a.reduce(function(a,b){var c;a.set(b.id,babelHelpers["extends"]({},(c=a.get(b.id))!=null?c:{},b));return a},new Map()).values())}});return l.apply(this,arguments)}g.persistContactUpdateBatched=a}),98);
__d("WAWebHandlePushnameUpdate",["WALogger","WAWebBackendApi","WAWebDBBulkPersistContact","WAWebPromiseQueue","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePushName: set pushname for ",""]);h=function(){return a};return a}var i=new(d("WAWebPromiseQueue").PromiseQueue)();function j(a,b){return d("WAWebBackendApi").frontendSendAndReceive("updatePushname",{contactId:a,pushname:b})}function a(a,c,e){e===void 0&&(e=!1);var f=d("WAWebWidFactory").toUserWid(a);return i.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=void 0;e||(a=(yield j(f,c)));(a===!0||a===void 0)&&(d("WALogger").LOG(h(),f.toLogString()),void d("WAWebDBBulkPersistContact").persistContactUpdateBatched(f,{pushname:c}))}))}g.updatePushname=a}),98);
__d("WAWebNux",["$InternalEnum"],(function(a,b,c,d,e,f){var g={SAFARI_LIMITED_SUPPORT:"safari_limited_support",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX_NEW:"sender_revoke_legal_disclaimer_nux",ADMIN_REVOKE_LEGAL_DISCLAIMER_NUX:"admin_revoke_legal_disclaimer_nux",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",COMMUNITY:"community",COMMUNITY_HOME:"community_home",STATUS_QUICK_REPLIES:"status_quick_replies",KEEP_IN_CHAT:"keep_in_chat",CHAT_ASSIGNMENT:"chat_assignment",TOOLTIP_AD_CREATION:"tooltip_ad_creation",DESKTOP_UPSELL:"desktop_upsell",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",ORDER_REQUEST_EDUCATION:"order_request_education",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",TOOLTIP_STATUS_POSTING:"tooltip_status_posting",SUPPORT_AI:"support_ai",EVENT_CREATE:"event_create",TOOLTIP_STATUS_ENTRY_POINT:"tooltip_status_entry_point",CAPI_GROUP_ABOUT_MODAL:"capi_group_about_modal",STATUS_PRIVATE_MENTIONS:"status_private_mentions",MESSAGE_LABEL_DEPRECATION_MIGRATED_PERMANENT:"message_label_deprecation_migrated_permanent",CAG_EVENTS_AWARENESS_BANNER:"cag_events_awareness_banner"};function h(a){return"community_admin_promote_"+a}function i(a){return"chat_auto_muted_"+a}function a(a){return"membership_approval_requests_banner_"+a}function c(a){return"newsletter_alerts_"+a}function d(a){return"subgroup_suggestions_banner_"+a}var j=b("$InternalEnum")({EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive",STATUS_QUICK_REPLIES:"status_quick_replies",COMMUNITY:"community",COMMUNITY_HOME:"community_home",KEEP_IN_CHAT:"keep_in_chat",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",SUPPORT_AI:"support_ai",EVENT_CREATE:"event_create",TOOLTIP_STATUS_POSTING:"tooltip_status_posting",TOOLTIP_STATUS_ENTRY_POINT:"tooltip_status_entry_point",STATUS_PRIVATE_MENTIONS:"status_private_mentions",MESSAGE_LABEL_DEPRECATION_MIGRATED:"message_label_deprecation_migrated"});function e(a){switch(a){case g.EPHEMERAL:return j.EPHEMERAL;case g.EPHEMERAL_VIEW_ONCE:return j.EPHEMERAL_VIEW_ONCE;case g.EPHEMERAL_VIEW_ONCE_RECEIVER:return j.EPHEMERAL_VIEW_ONCE_RECEIVER;case g.STATUS_QUICK_REPLIES:return j.STATUS_QUICK_REPLIES;case g.COMMUNITY:return j.COMMUNITY;case g.COMMUNITY_HOME:return j.COMMUNITY_HOME;case g.KEEP_IN_CHAT:return j.KEEP_IN_CHAT;case g.FORWARD_MEDIA_WITH_CAPTION:return j.FORWARD_MEDIA_WITH_CAPTION;case g.MESSAGE_EDIT:return j.MESSAGE_EDIT;case g.NEWSLETTER_MULTI_ADMIN:return j.NEWSLETTER_MULTI_ADMIN;case g.SUPPORT_AI:return j.SUPPORT_AI;case g.TOOLTIP_STATUS_POSTING:return j.TOOLTIP_STATUS_POSTING;case g.TOOLTIP_STATUS_ENTRY_POINT:return j.TOOLTIP_STATUS_ENTRY_POINT;case g.STATUS_PRIVATE_MENTIONS:return j.STATUS_PRIVATE_MENTIONS;case g.MESSAGE_LABEL_DEPRECATION_MIGRATED_PERMANENT:return j.MESSAGE_LABEL_DEPRECATION_MIGRATED;default:return a.includes(h(""))||a.includes(i(""))?a:null}}b={COOL_OFF_NUX:{INCOMPLETE_BUSINESS_PROFILE_BANNER:"incomplete_business_profile_banner",PRODUCT_CATALOG_BANNER:"product_catalog_banner",COLLECTIONS:"collections_banner",CART_INTERSTITIAL:"cart_interstitial",CTWA_SUGGESTION:"ctwa_suggestion",ORDER_EXPANSION:"order_expansion",MESSAGE_LABEL_DEPRECATION_MIGRATED_CHAT_LIST:"message_label_deprecation_migrated_chat_list"},VIEW_COUNT_NUX:{SAFARI_LIMITED_SUPPORT:"safari_limited_support",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",ADMIN_REVOKE_LEGAL_DISCLAIMER_NUX:"admin_revoke_legal_disclaimer_nux",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",COMMUNITY:"community",COMMUNITY_HOME:"community_home",KEEP_IN_CHAT:"keep_in_chat",CHAT_ASSIGNMENT:"chat_assignment",TOOLTIP_AD_CREATION:"tooltip_ad_creation",DESKTOP_UPSELL:"desktop_upsell",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",ORDER_REQUEST_EDUCATION:"order_request_education",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",TOOLTIP_STATUS_POSTING:"tooltip_status_posting",SUPPORT_AI:"support_ai",TOOLTIP_STATUS_ENTRY_POINT:"tooltip_status_entry_point",CAPI_GROUP_ABOUT_MODAL:"capi_group_about_modal",STATUS_PRIVATE_MENTIONS:"status_private_mentions",MESSAGE_LABEL_DEPRECATION_MIGRATED_PERMANENT:"message_label_deprecation_migrated_permanent",CAG_EVENTS_AWARENESS_BANNER:"cag_events_awareness_banner"}};var k={DEFAULT:"default_cool_off_banners_key",CATALOG:"catalog_banners_key",CTWA_SUGGESTION:"ctwa_suggestion_banners_key",ORDER_EXPANSION:"order_expansion_banner_key",MESSAGE_LABEL_DEPRECATION_MIGRATED_CHAT_LIST:"message_label_deprecation_migrated_chat_list_key"};function l(a){return a+"_cool_off"}f.NUX=g;f.getCommunityAdminPromotionNuxKey=h;f.getChatAutoMutedNuxKey=i;f.getMembershipApprovalRequestsBannerNuxKey=a;f.getNewsletterAlertsBannerNuxKey=c;f.getSubgroupSuggestionsBannerNuxKey=d;f.NuxSyncKey=j;f.getNuxSyncKey=e;f.NuxKeyTypes=b;f.CoolOffPeriodKeys=k;f.asCoolOffNuxType=l}),66);
__d("WASyncdAction",["Promise","WASyncdConst"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var c=a.prototype;c.resolveConflicts=function(a,c){c=c.timestamp;return c>=a.timestamp?(h||(h=b("Promise"))).resolve(d("WASyncdConst").ConflictResolutionState.ApplyRemoteAndDropLocal):(h||(h=b("Promise"))).resolve(d("WASyncdConst").ConflictResolutionState.SkipRemote)};c.dropMutationDueToCrossIndexConflict=function(a,c){return(h||(h=b("Promise"))).resolve(!1)};return a}();g.SyncActionBase=a}),98);
__d("WASyncdActionUtils",["WASyncAction.pb","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return JSON.stringify([a].concat(b))}function a(a){var b=a.action,c=a.indexArgs,e=a.collection,f=a.value,g=a.version,i=a.operation;a=a.timestamp;return{collection:e,index:h(b,c),binarySyncAction:d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,babelHelpers["extends"]({},f,{timestamp:a})).readBuffer(),version:g,operation:i,timestamp:a,action:b}}function b(a){var b=a.remoteJid,c=a.id,d=a.fromMe;a=a.participant;return[b,c,d?"1":"0",a!=null&&!d?a:"0"]}g.buildIndex=h;g.buildPendingMutation=a;g.buildMessageKey=b}),98);
__d("WASyncdCollectionsStateMachine",["WAGetCollectionVersion","WALogger","WASyncdConst","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Collection "," is in finite retry state with no failure start time"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: ",": "," ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: state machine persistToDb. states:"]);j=function(){return a};return a}a=function(){function a(){}a.loadStatesFromDb=function(){var a=this,c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getAllCollectionVersionsInTransaction());case 2:c=e.sent,c.forEach(function(b){return a.collectionStates.set(b.collection,{collection:b.collection,state:b.state,finiteFailureStartTime:b.finiteFailureStartTime})});case 4:case"end":return e.stop()}},null,this)};a.persistToDb=function(){var a=[];this.collectionStates.forEach(function(b){return a.push(b)});d("WALogger").LOG(j());a.forEach(function(a){var b=a.finiteFailureStartTime==null?"":"(failure start: "+a.finiteFailureStartTime+")";d("WALogger").LOG(i(),a.collection,a.state,b)});return d("WAGetCollectionVersion").bulkUpdateCollectionVersionInTransaction(a)};a.clean=function(){this.collectionStates=new Map()};a.getCollectionState=function(a){var b=this.collectionStates.get(a);if(b)return b.state;this.moveCollectionsToUpToDate([a]);return d("WASyncdConst").CollectionSyncState.UpToDate};a.getCollectionsInStateDirty=function(){var a=[];this.collectionStates.forEach(function(b){b.state===d("WASyncdConst").CollectionSyncState.Dirty&&a.push(b.collection)});return a};a.getCollectionsInStateRetry=function(){var a=[];this.collectionStates.forEach(function(b){b.state===d("WASyncdConst").CollectionSyncState.FailingFiniteRetry&&a.push(b.collection)});return a};a.getCollectionsInStateFatal=function(){var a=[];this.collectionStates.forEach(function(b){b.state===d("WASyncdConst").CollectionSyncState.Fatal&&a.push(b.collection)});return a};a.getCollectionsInStateBlocked=function(){var a=[];this.collectionStates.forEach(function(b){b.state===d("WASyncdConst").CollectionSyncState.Blocked&&a.push(b.collection)});return a};a.moveCollectionsToUpToDate=function(a){var b=this;a.forEach(function(a){return b.collectionStates.set(a,{collection:a,state:d("WASyncdConst").CollectionSyncState.UpToDate,finiteFailureStartTime:void 0})})};a.moveCollectionsToDirty=function(a){var b=this;a.forEach(function(a){return b.collectionStates.set(a,{collection:a,state:d("WASyncdConst").CollectionSyncState.Dirty,finiteFailureStartTime:(a=b.collectionStates.get(a))==null?void 0:a.finiteFailureStartTime})})};a.moveCollectionsToFiniteRetry=function(a){var b=this;a.forEach(function(a){return b.collectionStates.set(a,{collection:a,state:d("WASyncdConst").CollectionSyncState.FailingFiniteRetry,finiteFailureStartTime:(a=(a=b.collectionStates.get(a))==null?void 0:a.finiteFailureStartTime)!=null?a:d("WATimeUtils").unixTimeMs()})})};a.moveCollectionsToFatal=function(a){var b=this;a.forEach(function(a){return b.collectionStates.set(a,{collection:a,state:d("WASyncdConst").CollectionSyncState.Fatal})})};a.moveCollectionsToBlocked=function(a){var b=this;a.forEach(function(a){return b.collectionStates.set(a,{collection:a,state:d("WASyncdConst").CollectionSyncState.Blocked,finiteFailureStartTime:(a=b.collectionStates.get(a))==null?void 0:a.finiteFailureStartTime})})};a.getExpiredCollections=function(){var a=[];this.collectionStates.forEach(function(b){if(b.state===d("WASyncdConst").CollectionSyncState.FailingFiniteRetry){var c;b.finiteFailureStartTime==null?(c=Infinity,d("WALogger").WARN(h(),b.collection)):c=b.finiteFailureStartTime;c=c+d("WASyncdConst").FINITE_FAILURE_EXPIRY_DURATION;c<d("WATimeUtils").unixTimeMs()&&a.push(b.collection)}});return a};a.getCollectionMinFailureTime=function(){var a=Array.from(this.collectionStates.values()).filter(function(a){return a.state===d("WASyncdConst").CollectionSyncState.FailingFiniteRetry}).map(function(a){return a.finiteFailureStartTime}).filter(Boolean);return a.length===0?null:Math.min.apply(Math,a)};return a}();a.collectionStates=new Map();g["default"]=a}),98);
__d("WAMediaCalculateFilehash",["WACryptoDependencies","WACryptoSha256"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WACryptoSha256").sha256Base64(a)}function b(){var a=d("WACryptoDependencies").getCrypto().getRandomValues(new Uint8Array(20));a=a.buffer;return d("WACryptoSha256").sha256Base64(a)}g.calculateFilehash=a;g.getRandomFilehash=b}),98);
__d("WASyncdRequestEncode",["WAServerSync.pb","WASyncAction.pb","WASyncdError","WASyncdMetricFatalError","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){try{return d("encodeProtobuf").encodeProtobuf(d("WAServerSync.pb").SyncdPatchSpec,a).readBuffer()}catch(a){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_PROTOBUF_SERIALIZATION_FAILED);throw new(d("WASyncdError").SyncdFatalError)("patch protobuf serialization failed")}}function b(a){try{return d("encodeProtobuf").encodeProtobuf(d("WAServerSync.pb").SyncdMutationsSpec,a).readBuffer()}catch(a){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED);throw new(d("WASyncdError").SyncdFatalError)("mutations protobuf serialization failed")}}function c(a){try{return d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a).readBuffer()}catch(a){d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED);throw new(d("WASyncdError").SyncdFatalError)("action data protobuf serialization failed")}}g.encodeSyncdPatch=a;g.encodeSyncdMutations=b;g.encodeSyncActionData=c}),98);
__d("WASyncdEncryptMutations",["WAArrayBufferUtils","WABaseGlobals","WACryptoDependencies","WAGetSyncAction","WAServerSync.pb","WASyncAction.pb","WASyncdAntiTampering","WASyncdCrypto","WASyncdCryptoConst","WASyncdCryptoUtils","WASyncdError","WASyncdKeyCache","WASyncdMetricFatalError","WASyncdRequestEncode","decodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e){var f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;return b("regeneratorRuntime").async(function(F){while(1)switch(F.prev=F.next){case 0:f=a.index,g=a.operation;i=c.keyId;j=c.keyData;F.t0=g;F.next=F.t0===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET?6:F.t0===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE?7:20;break;case 6:return F.abrupt("break",20);case 7:F.next=9;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionInTransaction(f));case 9:k=F.sent;if(k){F.next=12;break}throw new(d("WASyncdError").SyncdFatalError)("no corresponding set mutation");case 12:l=k.keyId;F.next=15;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(l));case 15:m=F.sent;if(!(m==null)){F.next=18;break}throw new(d("WASyncdError").SyncdFatalError)("no key data for corresponding mutation");case 18:i=l,j=m;case 20:F.next=22;return b("regeneratorRuntime").awrap(h(a,i,j));case 22:n=F.sent;o=n.indexMac;p=n.indexAndValueCipherText;q=d("WASyncdCrypto").valueMacFromIndexAndValueCipherText(p);r=d("WABaseGlobals").getConfig().syncdShouldParsePatchDebugData();if(!(r&&g===d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE)){F.next=50;break}F.next=30;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByIndexMacsInTransaction([o]));case 30:v=F.sent;w=v.length>0?v[0]:null;x="\n  generating a REMOVE mutation\n  calculated indexMac: "+d("WASyncdAntiTampering").indexAndValueMacToString(o,p)+" using keyId: "+d("WASyncdCryptoUtils").syncKeyIdToHex(i)+"\n  db action based on the index: "+(k==null?"":d("WASyncdAntiTampering").indexAndValueMacToString((s=k)==null?void 0:s.indexMac,(t=k)==null?void 0:t.valueMac))+" using keyId: "+(k==null?"":d("WASyncdCryptoUtils").syncKeyIdToHex((u=k)==null?void 0:u.keyId))+"\n  db action based on the indexMac: "+(w?d("WASyncdAntiTampering").indexAndValueMacToString(w.indexMac,w.valueMac):"N/A")+" using keyId: "+(w?d("WASyncdCryptoUtils").syncKeyIdToHex(w.keyId):"N/A")+"\n  ";F.next=35;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(e,x));case 35:if(!(w===null&&k!=null)){F.next=50;break}F.next=38;return b("regeneratorRuntime").awrap(d("WASyncdKeyCache").getKeyData(k.keyId));case 38:y=F.sent;if(!(y!=null)){F.next=50;break}F.next=42;return b("regeneratorRuntime").awrap(h(a,k.keyId,y));case 42:B=F.sent;C=B.indexMac;D=B.indexAndValueCipherText;F.next=47;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByIndexMacsInTransaction([k.indexMac]));case 47:E=F.sent;F.next=50;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().writeSyncdLog(e,"could not fetch row from sync action. recalculated indexMac: "+d("WASyncdAntiTampering").indexAndValueMacToString(C,D)+" using keyId: "+d("WASyncdCryptoUtils").syncKeyIdToHex(k.keyId)+".\n           cached indexMac: "+d("WASyncdAntiTampering").indexAndValueMacToString(k.indexMac,k.valueMac)+" using keyId: "+d("WASyncdCryptoUtils").syncKeyIdToHex(k.keyId)+".\n           correspondingSetAction.index===mutation.index ? "+(k.index===a.index?"true":"false")+".\n           index mac from self fetch: "+(E==null?"":d("WASyncdAntiTampering").indexAndValueMacToString((z=E[0])==null?void 0:z.indexMac,(A=E[0])==null?void 0:A.valueMac))+"\n                with keyId: "+(E==null?"":d("WASyncdCryptoUtils").syncKeyIdToHex(k.keyId))+".\n           is corresponding set action outgoing? "+(k.isOutgoing===!0?"true":k.isOutgoing===!1?"false":"unknown")+".\n           is corresponding set action individual mutation? "+(k.isIndividualMutation===!0?"true":k.isIndividualMutation===!1?"false":"unknown")+".\n           corresponding action state: "+k.actionState+"\n           corresponding action has model type? "+(k.modelType!=null?"true":"false")+".\n           "));case 50:return F.abrupt("return",babelHelpers["extends"]({},a,{keyId:i,keyData:j,indexMac:o,indexAndValueCipherText:p,valueMac:q}));case 51:case"end":return F.stop()}},null,this)}function h(a,c,e){var f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:x.prev=0;f=a.index,g=a.binarySyncAction,h=a.operation,j=a.version;k=d("WAArrayBufferUtils").stringToArrayBuffer(f);x.next=5;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateEncryptionKeys(e));case 5:l=x.sent;m=l.indexKey,n=l.valueEncryptionKey,o=l.valueMacKey;x.next=9;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().getRandomValues(new Uint8Array(d("WASyncdCryptoConst").IV_LENGTH)));case 9:p=x.sent;q=d("WASyncdCrypto").generatePadding(k.byteLength,g.byteLength);r=i(k,g,q,j);x.next=14;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateCipherText(p,n,r));case 14:s=x.sent;t=d("WASyncdCrypto").generateAssociatedData(h,c);x.next=18;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateMac(t,s,o));case 18:u=x.sent;v=d("WASyncdCryptoUtils").combine([s,u]);x.next=22;return b("regeneratorRuntime").awrap(d("WASyncdCrypto").generateIndexMac(m,k));case 22:w=x.sent;return x.abrupt("return",{indexMac:w,indexAndValueCipherText:v});case 26:x.prev=26;x.t0=x["catch"](0);d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.ENCRYPTION_FAILED);throw new(d("WASyncdError").SyncdFatalError)("encryption failure");case 30:case"end":return x.stop()}},null,this,[[0,26]])}function i(a,b,c,e){return d("WASyncdRequestEncode").encodeSyncActionData({index:a,value:d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,b),padding:c,version:e})}g.encryptMutation=a}),98);
__d("WASyncdKeyManagementUtils",["WASyncdKeyTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new DataView(d("WASyncdKeyTypes").fromSyncKeyId(a)).getUint16(0)}function h(a){return new DataView(d("WASyncdKeyTypes").fromSyncKeyId(a)).getUint32(2)}function b(a){return h(a)+1}g.getKeyDeviceId=a;g.getKeyEpoch=h;g.generateNewKeyEpoch=b}),98);
__d("WAArrayBuffersConcat",[],(function(a,b,c,d,e,f){"use strict";function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.reduce(function(a,b){return a+b.byteLength},0),e=new Uint8Array(d),f=0;b.forEach(function(a){e.set(new Uint8Array(a),f),f+=a.byteLength});return e.buffer}f.concatArrayBuffers=a}),66);
__d("everySet",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=a.entries(),e=d.next();while(!e.done){var f=e.value;if(!b.call(c,f[1],f[0],a))return!1;e=d.next()}return!0}f["default"]=a}),66);
__d("equalsSet",["everySet"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.size!==b.size?!1:c("everySet")(a,function(a){return b.has(a)})}g["default"]=a}),98);
__d("WASyncdRotateKey",["WAArrayBuffersConcat","WABaseGlobals","WAByteArray","WACryptoDependencies","WAJids","WASyncdKeyManagementUtils","WASyncdKeyTypes","WATimeUtils","equalsSet"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=90;function a(a){a=a.timestamp;var b=Math.min(i,Math.max(h,d("WABaseGlobals").getConfig().syncdKeyMaxUseDays()));b=b*d("WATimeUtils").DAY_MILLISECONDS;a=d("WATimeUtils").unixTimeMs()-a;return a>b}function b(a,b){a=a.fingerprint;var d=b.rawId,e=b.currentIndex;b=b.deviceIndexes;var f=new Set(a.deviceIndexes);for(var g=a.currentIndex+1;g<=e;g++)f.add(g);return a.rawId!==d||!c("equalsSet")(f,new Set(b))}function e(a,b){b=j(b);var c=b.keyId;b=b.keyEpoch;var e=k(),f=d("WATimeUtils").unixTimeMs();return{keyId:c,keyEpoch:b,keyData:e,fingerprint:a,timestamp:f}}function j(a){if(a==null){var b=new Uint8Array(16);d("WACryptoDependencies").getCrypto().getRandomValues(b);b=d("WASyncdKeyManagementUtils").generateNewKeyEpoch(d("WASyncdKeyTypes").toSyncKeyId(b.buffer))}else b=d("WASyncdKeyManagementUtils").generateNewKeyEpoch(a.keyId);a=d("WAJids").interpretAsNumber(d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid()));return{keyId:d("WASyncdKeyTypes").toSyncKeyId(new Uint8Array(d("WAArrayBuffersConcat").concatArrayBuffers(d("WAByteArray").intToBytes(2,a).buffer,d("WAByteArray").intToBytes(4,b).buffer)).buffer),keyEpoch:b}}function k(){return d("WASyncdKeyTypes").toSyncKeyData(d("WACryptoDependencies").getCrypto().getRandomValues(new Uint8Array(32)).buffer)}g.hasKeyExpired=a;g.hasADeviceBeenRemoved=b;g.rotateKey=e}),98);
__d("WASyncdKeyManagement",["WABaseGlobals","WAErr","WAGetSyncKey","WALogger","WAPromiseQueue","WASyncdCryptoUtils","WASyncdKeyManagementUtils","WASyncdMetrics","WASyncdRotateKey","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: key rotation due to no key present"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: key rotation due to device removal"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: key rotation due to key expiry"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: stored key rotation key id ",""]);k=function(){return a};return a}var l=new(d("WAPromiseQueue").PromiseQueue)();function a(a){a===void 0&&(a=!0);return l.enqueue(function(){return m(a)})}function m(a){var e,f,g,l,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:a===void 0&&(a=!0);p.next=3;return b("regeneratorRuntime").awrap(n());case 3:e=p.sent;p.next=6;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().getDeviceFingerprint());case 6:f=p.sent;g=!1;l=!1;if(!(e!=null)){p.next=16;break}g=d("WASyncdRotateKey").hasKeyExpired(e);l=d("WASyncdRotateKey").hasADeviceBeenRemoved(e,f);if(!(!a||!g&&!l)){p.next=14;break}return p.abrupt("return",{keyId:e.keyId,keyData:e.keyData});case 14:p.next=18;break;case 16:if(!(!a||d("WABaseGlobals").getConfig().isCompanion())){p.next=18;break}throw c("WAErr")("syncd: No sync key available");case 18:o=d("WASyncdRotateKey").rotateKey(f,e);d("WALogger").LOG(k(),d("WASyncdCryptoUtils").syncKeyIdToHex(o.keyId));p.next=22;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").setSyncKeyInTransaction(o));case 22:p.next=24;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().sendSyncdKeyRotation([o]));case 24:g&&(d("WALogger").LOG(j()),d("WASyncdMetrics").reportSyncdKeyRotationEvent(d("WASyncdMetrics").SyncdKeyRotationEventType.APP_STATE_SYNC_KEY_EXPIRY));l&&(d("WALogger").LOG(i()),d("WASyncdMetrics").reportSyncdKeyRotationEvent(d("WASyncdMetrics").SyncdKeyRotationEventType.DEVICE_DEREGISTERATION));e==null&&(d("WALogger").LOG(h()),d("WASyncdMetrics").reportSyncdKeyRotationEvent(d("WASyncdMetrics").SyncdKeyRotationEventType.NO_KEYS));return p.abrupt("return",m(a));case 28:case"end":return p.stop()}},null,this)}function n(){var a,c,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getAllSyncKeysInTransaction());case 2:a=j.sent;if(!(a.length===0)){j.next=5;break}return j.abrupt("return",null);case 5:c=a.map(function(a){return d("WASyncdKeyManagementUtils").getKeyEpoch(a.keyId)});e=Math.max.apply(Math,c);f=a.filter(function(a){return d("WASyncdKeyManagementUtils").getKeyEpoch(a.keyId)===e});g=f.map(function(a){return d("WASyncdKeyManagementUtils").getKeyDeviceId(a.keyId)});h=Math.min.apply(Math,g);i=g.indexOf(h);return j.abrupt("return",f[i]);case 12:case"end":return j.stop()}},null,this)}g.getActiveKey=a;g.getNewestKeyPair=n}),98);
__d("WASyncdMMSUpload",["WABaseGlobals"],(function(a,b,c,d,e,f,g){"use strict";var h=100,i=2e3,j=10,k=100;function a(a){var b=Math.min(i,Math.max(d("WABaseGlobals").getConfig().syncdInlineMutationsMaxCount(),h));return a.length>b}function b(a){var b=Math.min(k,Math.max(d("WABaseGlobals").getConfig().syncdPatchProtobufMaxSize(),j))*1e3;return a.byteLength>b}g.exceedInlineMutationCount=a;g.exceedPatchProtobufSize=b}),98);
__d("WASyncdRequestBuilderTypesConverter",["WASyncAction.pb","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.map(function(a){var c=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData).value;c=d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,c).readBuffer();return{collection:a.collection,index:a.index,binarySyncAction:c,operation:b,version:a.version,timestamp:a.timestamp,action:a.action}})}g.syncActionsToPendingMutations=a}),98);
__d("sortBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.map(function(a,c){return{index:c,sortValue:b(a),value:a}});a.sort(function(a,b){var c=a.sortValue,d=b.sortValue;if(c>d)return 1;return c<d?-1:a.index-b.index});return a.map(function(a){return a.value})}f["default"]=a}),66);
__d("WASyncdRequestBuilderBuild",["Promise","WABase64","WABaseGlobals","WAGetCollectionVersion","WAGetSyncAction","WAJids","WALogger","WAMediaCalculateFilehash","WAServerSync.pb","WASyncdAntiTampering","WASyncdConst","WASyncdCryptoUtils","WASyncdEncryptMutations","WASyncdKeyManagement","WASyncdKeyManagementUtils","WASyncdKeyTypes","WASyncdMMSUpload","WASyncdRequestBuilderTypesConverter","WASyncdRequestEncode","WASyncdWamAppState","WAWap","regeneratorRuntime","sortBy"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end _buildCollectionNodes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: skipping "," in sync iq patch because initial full sync\n        is incomplete"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start _buildCollectionNodes"]);k=function(){return a};return a}var l=5;function a(a){var c,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(n(a));case 2:c=j.sent;e=c.collectionNodes;f=c.collectionWithEncryptedMutations;g=c.localCollectionVersions;h=c.collectionsToSkip;i=m(d("WAWap").wap("sync",null,e));return j.abrupt("return",{syncIqNode:i,collectionWithEncryptedMutations:f,localCollectionVersions:g,collectionsToSkip:h});case 9:case"end":return j.stop()}},null,this)}function e(){return m(d("WAWap").wap("delete_all_data",null))}function m(a){return d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"w:sync:app:state"},a)}function n(a){var c,e,f,g,l,m,n;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:d("WALogger").LOG(k());c=[];e=function(a,e){var f,g,h,i,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.next=2;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").getCollectionVersionInTransaction(a).then(function(a){return a==null?void 0:a.version}));case 2:f=m.sent;if(!(e!=null&&e.length>0)){m.next=16;break}if(!(f==null)){m.next=9;break}d("WALogger").LOG(j(),a);c.push(a);m.next=16;break;case 9:m.next=11;return b("regeneratorRuntime").awrap(o(a,e));case 11:i=m.sent,k=i.patchNode,l=i.encryptedMutations,g=k,h=l;case 16:return m.abrupt("return",{collection:a,version:f,patchNode:g,encryptedMutations:h});case 17:case"end":return m.stop()}},null,this)};f=new Map();g=new Map();l=[];a.forEach(function(a,b){return l.push(e(b,a))});p.next=9;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(l));case 9:m=p.sent;n=m.map(function(a){var b=a.collection,c=a.version,e=a.patchNode;a=a.encryptedMutations;a&&g.set(b,a);f.set(b,c);return d("WAWap").wap("collection",{name:d("WAWap").CUSTOM_STRING(b),return_snapshot:c===void 0?"true":"false",version:d("WAWap").INT((a=c)!=null?a:d("WASyncdConst").DEFAULT_COLLECTION_VERSION)},e)});d("WALogger").LOG(i());return p.abrupt("return",{collectionNodes:n,collectionWithEncryptedMutations:g,localCollectionVersions:f,collectionsToSkip:c});case 13:case"end":return p.stop()}},null,this)}function o(a,c){var e,f,g,i,j,k,l,m,n,o,w,x,y,z,A;return b("regeneratorRuntime").async(function(B){while(1)switch(B.prev=B.next){case 0:B.next=2;return b("regeneratorRuntime").awrap(d("WASyncdKeyManagement").getActiveKey(!p(c)));case 2:e=B.sent;B.next=5;return b("regeneratorRuntime").awrap(v(a,c,e));case 5:f=B.sent;g=f.map(function(b){return d("WASyncdEncryptMutations").encryptMutation(b,e,a)});B.next=9;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(g));case 9:i=B.sent;j=i.map(function(a){return{indexMac:a.indexMac,valueMac:a.valueMac,operation:a.operation}});B.next=13;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").computeLtHash(a,j));case 13:k=B.sent;l=k.ltHash;B.next=17;return b("regeneratorRuntime").awrap(d("WASyncdAntiTampering").computeOutgoingSnapshotAndPatchMacs(a,l,i,e.keyData));case 17:m=B.sent;n=m.snapshotMac;o=m.patchMac;w=i.map(function(a){return u(a.keyId,a.operation,a.indexMac,a.indexAndValueCipherText)});x=t(w);y=function(){var a,c;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().uploadSyncExternalPatch(x));case 2:a=f.sent;f.next=5;return b("regeneratorRuntime").awrap(q(a,x));case 5:c=f.sent;return f.abrupt("return",r(c,e.keyId,n,o));case 7:case"end":return f.stop()}},null,this)};if(!d("WASyncdMMSUpload").exceedInlineMutationCount(w)){B.next=29;break}B.next=26;return b("regeneratorRuntime").awrap(y());case 26:z=B.sent;B.next=34;break;case 29:z=s(w,e.keyId,n,o);if(!d("WASyncdMMSUpload").exceedPatchProtobufSize(z)){B.next=34;break}B.next=33;return b("regeneratorRuntime").awrap(y());case 33:z=B.sent;case 34:A=d("WAWap").wap("patch",null,z);return B.abrupt("return",{patchNode:A,encryptedMutations:i});case 36:case"end":return B.stop()}},null,this)}function p(a){return d("WABaseGlobals").getConfig().logoutInProgress()&&a.some(function(a){return JSON.parse(a.index)[0]===d("WASyncdConst").Actions.Sentinel})}function q(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=a.mediaKey,f=a.directPath,g=a.encFilehash,h=a.handle;j.next=3;return b("regeneratorRuntime").awrap(d("WAMediaCalculateFilehash").calculateFilehash(c));case 3:i=j.sent;return j.abrupt("return",{mediaKey:e,directPath:f,handle:h,fileSizeBytes:c.byteLength,fileSha256:d("WABase64").decodeB64(i),fileEncSha256:g});case 5:case"end":return j.stop()}},null,this)}function r(a,b,c,e){var f=d("WABaseGlobals").getConfig().syncdPatchDeviceIndexIncluded()?d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid()):void 0;return d("WASyncdRequestEncode").encodeSyncdPatch({keyId:{id:d("WASyncdKeyTypes").fromSyncKeyId(b)},externalMutations:a,snapshotMac:c,patchMac:e,deviceIndex:f})}function s(a,b,c,e){var f=d("WABaseGlobals").getConfig().syncdPatchDeviceIndexIncluded()?d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid()):void 0;return d("WASyncdRequestEncode").encodeSyncdPatch({keyId:{id:d("WASyncdKeyTypes").fromSyncKeyId(b)},mutations:a,snapshotMac:c,patchMac:e,deviceIndex:f})}function t(a){return d("WASyncdRequestEncode").encodeSyncdMutations({mutations:a})}function u(a,b,c,e){return{operation:b,record:{keyId:{id:d("WASyncdKeyTypes").fromSyncKeyId(a)},index:{blob:c},value:{blob:e}}}}function v(a,c,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByCollectionsInTransaction([a]));case 2:f=j.sent;g=c;h=w(f,c,e.keyId);g=g.concat(h);i=x(f,g,e.keyId);d("WASyncdWamAppState").addKeyRotationRemoveCount(i.length);g=g.concat(i);return j.abrupt("return",g);case 10:case"end":return j.stop()}},null,this)}function w(a,b,e){a=a.filter(function(a){return!b.map(function(a){return a.index}).includes(a.index)&&!d("WASyncdCryptoUtils").syncKeyIdsEqual(a.keyId,e)});a=c("sortBy")(a,function(a){return d("WASyncdKeyManagementUtils").getKeyEpoch(a.keyId)});var f=Math.min(l,d("WABaseGlobals").getConfig().syncdAdditionalMutations());a=a.slice(0,f);return d("WASyncdRequestBuilderTypesConverter").syncActionsToPendingMutations(a,d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET)}function x(a,b,c){var e=b.filter(function(a){return a.operation===d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET}).map(function(a){return a.index});b=a.filter(function(a){return e.includes(a.index)});a=b.filter(function(a){return!d("WASyncdCryptoUtils").syncKeyIdsEqual(a.keyId,c)});return d("WASyncdRequestBuilderTypesConverter").syncActionsToPendingMutations(a,d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE)}g.buildSyncIqNode=a;g.buildDeleteAllIqNode=e;g._generateMutationsToUpload=v}),98);
__d("WASyncdRequestBuilderUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.reverse(),function(a){return a.index}).reverse()}function g(a,b){var c=new Set();return a.filter(function(a){a=b(a);if(c.has(a))return!1;c.add(a);return!0})}f.compactPatch=a}),66);
__d("WASyncdRequestBuilder",["Promise","WAGetPendingMutation","WASyncdRequestBuilderBuild","WASyncdRequestBuilderUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=new Map();e=new Map();g.next=4;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(a.map(function(a){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").getSyncPendingMutationsByCollectionInTransaction(a));case 2:f=i.sent,g=f.map(function(a){return a.id}).filter(Boolean),e.set(a,g),h=d("WASyncdRequestBuilderUtils").compactPatch(f),c.set(a,h);case 7:case"end":return i.stop()}},null,this)})));case 4:g.next=6;return b("regeneratorRuntime").awrap(d("WASyncdRequestBuilderBuild").buildSyncIqNode(c));case 6:f=g.sent;return g.abrupt("return",{syncIqNode:f.syncIqNode,collectionWithPendingMutationsIds:e,collectionWithEncryptedMutations:f.collectionWithEncryptedMutations,localCollectionVersions:f.localCollectionVersions,collectionsToSkip:f.collectionsToSkip});case 8:case"end":return g.stop()}},null,this)}g["default"]=a}),98);
__d("WASyncdResponseParser",["WADeprecatedWapParser","WALogger","WASyncdConst","WASyncdDecode","WASyncdError","WASyncdMetricFatalError"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection "," did not get server error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection "," got server code has_more_patches"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: retryable error: collection "," throws ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error 404: collection "," throws ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: collection "," throws ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection "," got server error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully parsed collection ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: collection "," has no version, patches or snapshot"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start parsing syncd collections"]);p=function(){return a};return a}a=new(c("WADeprecatedWapParser"))("syncResponseParser",function(a){d("WALogger").LOG(p());var b=[];a=a.child("sync");a.mapChildrenWithTag("collection",function(a){var c=babelHelpers["extends"]({},null),e=d("WASyncdConst").CollectionName.cast(a.attrString("name"));if(!e)throw new(d("WASyncdError").SyncdFatalError)("invalid collection name");c.name=e;c.state=q(a,c.name);a.hasAttr("version")&&(c.version=parseInt(a.attrString("version"),10));a.hasChild("patches")&&(c.patches=a.child("patches").mapChildrenWithTag("patch",function(a){return d("WASyncdDecode").decodeSyncdPatch(e,a.contentBytes())}));a.hasChild("snapshot")&&(c.snapshot=d("WASyncdDecode").decodeExternalBlobReference(e,a.child("snapshot").contentBytes()));b.push(c);c.version==null&&c.patches==null&&c.snapshot==null&&d("WALogger").LOG(o(),e);d("WALogger").LOG(n(),e)});return b});function q(a,b){if(a.hasAttr("type")&&a.attrString("type")==="error"){var c=a.child("error"),e=c.attrString("code");c=c.attrString("text");d("WALogger").LOG(m(),b,e);switch(e){case"409":return a.hasAttr("has_more_patches")?d("WASyncdConst").CollectionState.ConflictHasMore:d("WASyncdConst").CollectionState.Conflict;case"400":d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_REQUEST_FOR_COLLECTION);d("WALogger").ERROR(l(),String(b),c).sendLogs("syncd: fatal error 400: collection "+String(b));return d("WASyncdConst").CollectionState.ErrorFatal;case"404":d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_FOUND_FOR_COLLECTION);d("WALogger").ERROR(k(),String(b),c).sendLogs("syncd: fatal error: collection "+String(b));return d("WASyncdConst").CollectionState.ErrorFatal;default:d("WALogger").WARN(j(),String(b),c).sendLogs("syncd: retryable error: collection "+String(b));return d("WASyncdConst").CollectionState.ErrorRetry}}else if(a.hasAttr("has_more_patches")){d("WALogger").LOG(i(),b);return d("WASyncdConst").CollectionState.SuccessHasMore}else{d("WALogger").LOG(h(),b);return d("WASyncdConst").CollectionState.Success}}g.syncResponseParser=a}),98);
__d("WASyncdServerSync",["Promise","WABaseGlobals","WADeprecatedSendIq","WAGetCollectionVersion","WAGetPendingMutation","WALogger","WASyncdCollectionHandler","WASyncdConst","WASyncdError","WASyncdMetricCriticalBootstrapStage","WASyncdMetricFatalError","WASyncdMetrics","WASyncdRequestBuilder","WASyncdResponseParser","WASyncdWamAppState","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: cannot log collection sync start: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: received sync response for collections: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: completed network operation for collections: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: sending sync request for collections: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: retryable error: syncd global throws ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: syncd global throws ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end apply collections: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start apply collections: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n\t"," v",""],["\\n\\t"," v",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: local collection versions:"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: deferred local mutation upload for ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: reached max iterations for collections: ",""]);t=function(){return a};return a}var u=5,v=500;function a(a){var c,e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(A(a,"start serverSync"));case 2:c=[],e=[].concat(a),f=0;case 5:if(!(f<u||e.length>0&&f<v)){k.next=20;break}if(!(e.length===0)){k.next=8;break}return k.abrupt("break",20);case 8:k.next=10;return b("regeneratorRuntime").awrap(w(e));case 10:g=k.sent;i=g.doneCollections;j=g.refetchCollections;k.next=15;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(i.map(function(a){return A([a.name],"done collection, state: "+a.state)})));case 15:e=j;c=c.concat(i);f++;k.next=5;break;case 20:if(!(e.length>0)){k.next=25;break}k.next=23;return b("regeneratorRuntime").awrap(A(e,"error: max iterations"));case 23:d("WALogger").ERROR(t(),e).tags("syncd").sendLogs("syncd: max iteration"),c=c.concat(e.map(function(a){return{state:d("WASyncdConst").CollectionState.ErrorRetry,name:a}}));case 25:return k.abrupt("return",c);case 26:case"end":return k.stop()}},null,this)}function w(a){var c,e,f,g,i,j,k,l,t,u,v;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:if(!(a.length===0)){w.next=2;break}return w.abrupt("return",{doneCollections:[],refetchCollections:[]});case 2:w.next=4;return b("regeneratorRuntime").awrap(z(a));case 4:w.prev=4;w.next=7;return b("regeneratorRuntime").awrap(x(a));case 7:c=w.sent;e=c.collectionDetails;f=c.localCollectionVersions;g=c.collectionsToUpload;g.length>0&&d("WALogger").LOG(s(),g);d("WALogger").LOG(r());f.forEach(function(a,b){d("WALogger").LOG(q(),b,(b=a)!=null?b:"(undefined)}")});i=[];j=[];e.forEach(function(a){switch(a.state){case d("WASyncdConst").CollectionState.ErrorRetry:case d("WASyncdConst").CollectionState.ErrorFatal:case d("WASyncdConst").CollectionState.Blocked:j.push(a);return;default:i.push(a)}(a.state===d("WASyncdConst").CollectionState.Conflict||a.state===d("WASyncdConst").CollectionState.ConflictHasMore)&&d("WASyncdWamAppState").incConflict()});d("WALogger").LOG(p(),i.map(function(a){return a.name}));k=new(d("WASyncdMetrics").SyncdEventFlow)();w.next=21;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(i.map(function(a){return d("WASyncdCollectionHandler").applyAppStateSyncResponse(a,f.get(a.name),k)})));case 21:l=w.sent;k.end();d("WALogger").LOG(o(),i.map(function(a){return a.name}));t=[];w.next=27;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(l.map(function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(a.state===d("WASyncdConst").CollectionState.Conflict)){e.next=8;break}e.next=3;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").getSyncPendingMutationsByCollectionInTransaction(a.name));case 3:e.t0=e.sent.length;c=e.t0>0;c?t.push(a.name):(a.state=d("WASyncdConst").CollectionState.Success,j.push(a));e.next=15;break;case 8:if(!(a.state===d("WASyncdConst").CollectionState.ConflictHasMore||a.state===d("WASyncdConst").CollectionState.SuccessHasMore||a.state===d("WASyncdConst").CollectionState.Success&&g.some(function(b){return b===a.name}))){e.next=12;break}t.push(a.name);e.next=15;break;case 12:j.push(a);e.next=15;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").updateLastSuccessfulSyncEndTimeInTransaction(a.name));case 15:case"end":return e.stop()}},null,this)})));case 27:return w.abrupt("return",{doneCollections:j,refetchCollections:t});case 30:w.prev=30;w.t0=w["catch"](4);if(!(w.t0 instanceof d("WASyncdError").SyncdFatalError)){w.next=38;break}d("WALogger").ERROR(n(),w.t0.message).sendLogs("syncd: fatal error: syncd global throws "+w.t0.message);w.next=36;return b("regeneratorRuntime").awrap(A(a,"moving to fatal state: "+w.t0.name+" "+w.t0.message+" "+w.t0.stack));case 36:u=a.map(function(a){return{state:d("WASyncdConst").CollectionState.ErrorFatal,name:a}});return w.abrupt("return",{doneCollections:u,refetchCollections:[]});case 38:d("WALogger").WARN(m(),w.t0.message).sendLogs("syncd: retryable error: syncd global throws "+w.t0.message);w.next=41;return b("regeneratorRuntime").awrap(A(a,"retryable error: "+w.t0));case 41:v=a.map(function(a){return{state:d("WASyncdConst").CollectionState.ErrorRetry,name:a,serverBackoff:w.t0.errorBackoff}});return w.abrupt("return",{doneCollections:v,refetchCollections:[]});case 43:case"end":return w.stop()}},null,this,[[4,30]])}function x(a){var e,f,g,h,i,m,n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return b("regeneratorRuntime").awrap(c("WASyncdRequestBuilder")(a));case 2:e=s.sent;f=e.syncIqNode;g=e.collectionWithPendingMutationsIds;h=e.collectionWithEncryptedMutations;i=e.localCollectionVersions;m=e.collectionsToSkip;d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.REQUEST_BUILT);d("WALogger").LOG(l(),a.map(function(a){var b;return"\n\t"+a+" v"+((b=i.get(a))!=null?b:"(undefined)")+" "+(((b=(b=g.get(a))==null?void 0:b.length)!=null?b:0)>0&&i.get(a)!=null?" with local changes":"")}));s.next=12;return b("regeneratorRuntime").awrap(A(a,"before sendIq"));case 12:s.next=14;return b("regeneratorRuntime").awrap(d("WADeprecatedSendIq").deprecatedSendIq(f,d("WASyncdResponseParser").syncResponseParser));case 14:n=s.sent;d("WALogger").LOG(k(),a);d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.RESPONSE_RECEIVED);if(!n.success){s.next=25;break}d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.RESPONSE_PARSED_VALID);s.next=21;return b("regeneratorRuntime").awrap(A(a,"after sendIq success"));case 21:o=n.result;d("WALogger").LOG(j(),o.map(function(a){var b="\n"+a.name;a.version!=null&&(b+="\n\tupdated to version "+a.version);a.snapshot!=null&&(b+="\n\tcontains snapshot");a.patches!=null&&(b+="\n\tcontains "+a.patches.length+" patches");return b}));o.forEach(function(a){var b=g.get(a.name);b&&(a.syncedPendingMutationsId=b);b=h.get(a.name);b&&(a.syncedEncryptedMutations=b)});return s.abrupt("return",{collectionDetails:o,localCollectionVersions:i,collectionsToUpload:m});case 25:p=n.errorCode,q=n.errorText,r=n.errorBackoff;throw y(p,q,r);case 27:case"end":return s.stop()}},null,this)}function y(a,b,c){switch(a){case 400:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_REQUEST_GLOBAL_ERROR);return new(d("WASyncdError").SyncdFatalError)(b);case 404:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_FOUND_GLOBAL_ERROR);return new(d("WASyncdError").SyncdFatalError)(b);case 405:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_METHOD_GLOBAL_ERROR);return new(d("WASyncdError").SyncdFatalError)(b);case 406:d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR);return new(d("WASyncdError").SyncdFatalError)(b);default:return new(d("WASyncdError").SyncdRetryableError)(b,c)}}function z(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.prev=0;c=5;g.next=4;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").bulkGetCollectionVersionsInTransaction(a));case 4:e=g.sent;f=e.filter(Boolean).map(function(a){var b;b=((b=a.lastSyncAttemptStartTimes)!=null?b:[]).slice(-c+1);return{collection:a.collection,lastSyncAttemptStartTimes:[].concat(b,[d("WATimeUtils").unixTimeMs()])}});g.next=8;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").bulkSetCollectionSyncAttemptStartTimesInTransaction(f));case 8:g.next=13;break;case 10:g.prev=10,g.t0=g["catch"](0),d("WALogger").ERROR(i(),g.t0).tags("syncd").sendLogs("syncd: cannot log collection sync start");case 13:case"end":return g.stop()}},null,this,[[0,10]])}function A(a,c){return(h||(h=b("Promise"))).all(a.map(function(a){return d("WABaseGlobals").getDbImpls().writeSyncdLog(a,c)}))}g.serverSync=a}),98);
__d("WASyncd",["Promise","WABaseGlobals","WAGetCollectionVersion","WAGetMissingKey","WAGetPendingMutation","WAGetSyncAction","WAGetSyncKey","WALogger","WASyncdCollectionsStateMachine","WASyncdConst","WASyncdCryptoUtils","WASyncdDisabled","WASyncdKeyCache","WASyncdMetricCriticalBootstrapStage","WASyncdMetricFatalError","WASyncdOrphan","WASyncdServerSync","WASyncdWamAppState","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: syncing pending mutations and blocked collections due to app resume"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: syncPendingMutationsAndBlockedCollections: [","]"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: syncPendingMutationsAndBlockedCollections"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: retry is in flight"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: state machine tick"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: expired collections"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: cleanup after handleRetry()"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: exception during handleRetry(): ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: server sync retry successful"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: initiate server sync retry"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: cleanup after sync()"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: exception during sync(): ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: server sync successful"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: initiate server sync"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no collections to sync"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: dirty collections: ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: syncBlockedCollections:\n    \tmoving blocked collections to dirty: [","]\n    \tadding inflight collections to pending: [","]"],["syncd: syncBlockedCollections:\n    \\tmoving blocked collections to dirty: [","]\n    \\tadding inflight collections to pending: [","]"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: sync blocked collections: ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd:\n        key id: ","\n        key timestamp: ","\n        key device indexes: ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," unsupported mutations"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd:\n        "," successful "," mutations\n        "," orphan "," mutations,\n        "," failed "," mutations"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: local version (",")for "," >= server version (","); will not mark for sync."]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: local version (",") for "," less than server version (","); will mark for sync."]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: server version for "," missing; will mark for sync."]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: local version for "," missing; will mark for sync."]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start filter collections: ",""]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: "," state before sync: ",""]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: marking for sync: ",""]);J=function(){return a};return a}var K=1e3,L=1e3*60*60,M=2,N=new Set(),O=new Set(),P,Q=!1,R=0,S=0;function T(a,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!(e!=null)){g.next=6;break}g.next=3;return b("regeneratorRuntime").awrap(U(a,e));case 3:g.t0=g.sent;g.next=7;break;case 6:g.t0=a;case 7:f=g.t0;d("WALogger").LOG(J(),f);f.forEach(function(a){var b=c("WASyncdCollectionsStateMachine").getCollectionState(a);d("WALogger").LOG(I(),a,b);b===d("WASyncdConst").CollectionSyncState.UpToDate?c("WASyncdCollectionsStateMachine").moveCollectionsToDirty([a]):b===d("WASyncdConst").CollectionSyncState.Dirty&&(O=new Set([].concat(Array.from(O),[a])))});g.next=12;return b("regeneratorRuntime").awrap(c("WASyncdCollectionsStateMachine").persistToDb());case 12:return g.abrupt("return",V());case 13:case"end":return g.stop()}},null,this)}function U(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d("WALogger").LOG(H(),a);g.next=3;return b("regeneratorRuntime").awrap(d("WAGetCollectionVersion").bulkGetCollectionVersionsInTransaction(a));case 3:e=g.sent;f=new Map(a.map(function(a,b){return[a,(a=e[b])==null?void 0:a.version]}));return g.abrupt("return",a.filter(function(a){var b=f.get(a);if(b==null){d("WALogger").LOG(G(),a);return!0}var e=c.get(a);if(e==null){d("WALogger").LOG(F(),a);return!0}if(b<e){d("WALogger").LOG(E(),b,a,e);return!0}d("WALogger").LOG(D(),b,a,e);return!1}));case 6:case"end":return g.stop()}},null,this)}function a(){var a,c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").countSyncActionsInTransaction());case 2:a=g.sent;d("WASyncdWamAppState").setStoredMutationCount(a);g.next=6;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByActionStatesInTransaction([d("WASyncdConst").SyncActionState.Malformed]));case 6:c=g.sent;d("WASyncdWamAppState").setInvalidActionCount(c.length);g.next=10;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getSyncActionsByActionStatesInTransaction([d("WASyncdConst").SyncActionState.Unsupported]));case 10:e=g.sent;d("WASyncdWamAppState").setUnsupportedActionCount(e.length);g.next=14;return b("regeneratorRuntime").awrap(d("WAGetMissingKey").getMissingKeyCountTransaction());case 14:f=g.sent,d("WASyncdWamAppState").setMissingKeyCount(f);case 16:case"end":return g.stop()}},null,this)}function e(){var a,c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=7;break;e.next=3;return b("regeneratorRuntime").awrap(d("WAGetSyncAction").getAllSyncActions());case 3:a=e.sent,Array.from(d("WASyncdConst").Actions.members()).forEach(function(b){var c=a.filter(function(a){return a.action!=null&&a.action===b});if(c.length>0){var e=c.filter(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Success||a.actionState===d("WASyncdConst").SyncActionState.Skipped}),f=c.filter(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Orphan});c=c.filter(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Malformed||a.actionState===d("WASyncdConst").SyncActionState.Failed});d("WALogger").DEV(C(),e.length,b,f.length,b,c.length,b)}}),c=a.filter(function(a){return a.actionState===d("WASyncdConst").SyncActionState.Unsupported}),d("WALogger").DEV(B(),c.length);case 7:case"end":return e.stop()}},null,this)}function f(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=5;break;c.next=3;return b("regeneratorRuntime").awrap(d("WAGetSyncKey").getAllSyncKeysInTransaction());case 3:a=c.sent,a.forEach(function(a){d("WALogger").DEV(A(),d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId),a.timestamp,a.fingerprint.deviceIndexes)});case 5:case"end":return c.stop()}},null,this)}function e(){var a=c("WASyncdCollectionsStateMachine").getCollectionsInStateBlocked();d("WALogger").LOG(z(),a);c("WASyncdCollectionsStateMachine").moveCollectionsToDirty(a);O=new Set([].concat(Array.from(O),Array.from(N)));d("WALogger").LOG(y(),a,Array.from(N));return V()}function V(){var a,e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!d("WASyncdDisabled").isSyncdDisabled()){i.next=2;break}return i.abrupt("return",(h||(h=b("Promise"))).resolve());case 2:a=c("WASyncdCollectionsStateMachine").getCollectionsInStateDirty();d("WALogger").LOG(x(),a);e=new Set(a.filter(function(a){return!N.has(a)}));if(!(e.size===0)){i.next=8;break}d("WALogger").LOG(w());return i.abrupt("return",(h||(h=b("Promise"))).resolve());case 8:f=[];i.prev=9;N=new Set([].concat(Array.from(N),Array.from(e)));d("WALogger").LOG(v());i.next=14;return b("regeneratorRuntime").awrap(d("WASyncdServerSync").serverSync(Array.from(e)));case 14:f=i.sent;d("WALogger").LOG(u());g=f.filter(function(a){return a.state===d("WASyncdConst").CollectionState.ErrorRetry});g.length>0&&(S=g[0].serverBackoff||0,R=0);$(f);i.next=26;break;case 22:i.prev=22,i.t0=i["catch"](9),d("WALogger").LOG(t(),i.t0),c("WASyncdCollectionsStateMachine").moveCollectionsToFiniteRetry(Array.from(e));case 26:i.prev=26;d("WALogger").LOG(s());c("WASyncdCollectionsStateMachine").persistToDb();N=new Set(Array.from(N).filter(function(a){return!e.has(a)}));Z();i.next=33;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().handleSyncCompleted(f));case 33:return i.finish(26);case 34:case"end":return i.stop()}},null,this,[[9,22,26,34]])}function W(){if(d("WASyncdDisabled").isSyncdDisabled())return;var a=new Set(c("WASyncdCollectionsStateMachine").getCollectionsInStateRetry());if(a.size===0)return;P=setTimeout(function(){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;Q=!0;R+=1;d("WALogger").LOG(r());f.next=6;return b("regeneratorRuntime").awrap(d("WASyncdServerSync").serverSync(Array.from(a)));case 6:e=f.sent;d("WALogger").LOG(q());$(e);f.next=15;break;case 11:f.prev=11,f.t0=f["catch"](0),d("WALogger").LOG(p(),f.t0),c("WASyncdCollectionsStateMachine").moveCollectionsToFiniteRetry(Array.from(a));case 15:f.prev=15;d("WALogger").LOG(o());f.next=19;return b("regeneratorRuntime").awrap(Y());case 19:c("WASyncdCollectionsStateMachine").persistToDb();Q=!1;Z();return f.finish(15);case 23:case"end":return f.stop()}},null,this,[[0,11,15,23]])},X(R,S))}function X(a,b){a=Math.pow(M,a)*K;return Math.min(Math.max(a,b),L)}function Y(){var a;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=c("WASyncdCollectionsStateMachine").getExpiredCollections();if(!(a.length>0)){e.next=7;break}c("WASyncdCollectionsStateMachine").moveCollectionsToFatal(a);e.next=5;return b("regeneratorRuntime").awrap(d("WABaseGlobals").getDbImpls().printSyncdLog());case 5:d("WALogger").ERROR(n()).sendLogs("syncd: fatal error: expired collections"),d("WASyncdMetricFatalError").reportSyncdFatalError(d("WASyncdMetricFatalError").SyncdFatalErrorType.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D,a[0]);case 7:case"end":return e.stop()}},null,this)}function Z(){d("WALogger").LOG(m());c("WASyncdCollectionsStateMachine").getCollectionsInStateDirty().length>0&&(O=new Set(Array.from(O).filter(function(a){return N.has(a)})),V());var a=c("WASyncdCollectionsStateMachine").getCollectionsInStateRetry();if(a.length>0){if(Q){d("WALogger").LOG(l());return}P!=null&&clearTimeout(P);O=new Set(Array.from(O).filter(function(b){return!a.includes(b)}));W()}c("WASyncdCollectionsStateMachine").getCollectionsInStateFatal().length>0&&d("WABaseGlobals").getDbImpls().handleSyncdFatal({collections:c("WASyncdCollectionsStateMachine").getCollectionsInStateFatal()})}function $(a){return a.forEach(function(a){if(a.state===d("WASyncdConst").CollectionState.Success&&!O.has(a.name))return c("WASyncdCollectionsStateMachine").moveCollectionsToUpToDate([a.name]);if(a.state===d("WASyncdConst").CollectionState.ErrorRetry){d("WASyncdMetricCriticalBootstrapStage").reportSyncdCriticalBootstrapStage(d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.ENTERED_RETRY_MODE);return c("WASyncdCollectionsStateMachine").moveCollectionsToFiniteRetry([a.name])}if(a.state===d("WASyncdConst").CollectionState.ErrorFatal)return c("WASyncdCollectionsStateMachine").moveCollectionsToFatal([a.name]);if(a.state===d("WASyncdConst").CollectionState.Blocked&&!O.has(a.name))return c("WASyncdCollectionsStateMachine").moveCollectionsToBlocked([a.name])})}function aa(){var a,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:d("WALogger").LOG(k());g.next=3;return b("regeneratorRuntime").awrap(d("WAGetPendingMutation").getAllSyncPendingMutationsInTransaction());case 3:a=g.sent,e=c("WASyncdCollectionsStateMachine").getCollectionsInStateBlocked(),c("WASyncdCollectionsStateMachine").moveCollectionsToDirty(e),f=a.map(function(a){return a.collection}).concat(e),f.length>0&&(d("WALogger").LOG(j(),f),T(f));case 8:case"end":return g.stop()}},null,this)}function ba(){return c("WASyncdCollectionsStateMachine").loadStatesFromDb().then(function(){return Z()})}function ca(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(d("WASyncdOrphan").applyAllOrphansAndUnsupported());case 2:d("WALogger").LOG(i());a.next=5;return b("regeneratorRuntime").awrap(aa());case 5:case"end":return a.stop()}},null,this)}function da(){return d("WABaseGlobals").runInTransaction({SyncActionStore:!0,CollectionVersionStore:!0,PendingMutationStore:!0,MissingKeyStore:!0,SyncKeyStore:!0},function(a){var e=a.SyncActionStore,f=a.CollectionVersionStore,g=a.PendingMutationStore,i=a.MissingKeyStore;a=a.SyncKeyStore;return(h||(h=b("Promise"))).all([e.clear(),f.clear(),g.clear(),i.clear(),a.clear()]).then(function(){c("WASyncdCollectionsStateMachine").clean(),d("WASyncdKeyCache").clearSyncKeysCache()})})}g.markCollectionsForSync=T;g.reportWam=a;g.logKeysInfoInIntern=f;g.syncBlockedCollections=e;g.initializeStateMachine=ba;g.processOnAppResume=ca;g.clearSyncdData=da}),98);
__d("WAWebSyncdDb",["WALogger","WASyncAction.pb","WASyncdKeyTypes","WAWebABProps","WAWebSchemaCollectionVersion","WAWebSchemaMissingKeys","WAWebSchemaPendingMutations","WAWebSchemaSyncActions","WAWebSchemaSyncKeys","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: adding pending mutations:\n  ",""]);h=function(){return a};return a}function a(){return d("WAWebSchemaPendingMutations").getPendingMutationsTable().all()}function c(a,b){return d("WAWebSchemaPendingMutations").getPendingMutationsTable().equals(a,b)}function e(a,b){return d("WAWebSchemaPendingMutations").getPendingMutationsTable().equals(a,b)}function f(a){d("WALogger").DEV(h(),JSON.stringify(a.map(function(a){return{operation:a.operation,index:a.index,value:d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction)}}),null,2));return d("WAWebSchemaPendingMutations").getPendingMutationsTable().bulkCreate(a)}function i(a){return d("WAWebSchemaPendingMutations").getPendingMutationsTable().bulkRemove(a)}function j(a,b,c){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().createOrMerge(a,{collection:a,version:b,ltHash:c})}function k(a){return d("WAWebSchemaSyncActions").getSyncActionsTable().get(a)}function l(a,b){return d("WAWebSchemaSyncActions").getSyncActionsTable().anyOf(a,b)}function m(a){return d("WAWebSchemaSyncActions").getSyncActionsTable().createOrReplace(a)}function n(a){return d("WAWebSchemaSyncActions").getSyncActionsTable().bulkCreateOrReplace(a)}function o(a){return d("WAWebSchemaSyncActions").getSyncActionsTable().bulkCreateOrMerge(a.map(function(a){return babelHelpers["extends"]({},a)}))}function p(a){return d("WAWebSchemaSyncActions").getSyncActionsTable().bulkRemove(a)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaSyncKeys").getSyncKeysTable().get(new Uint8Array(d("WASyncdKeyTypes").fromSyncKeyId(a))));return a==null?a:d("WAWebSchemaSyncKeys").convertToSyncKeyFromRow(a)});return r.apply(this,arguments)}function s(){return d("WAWebSchemaSyncKeys").getSyncKeysTable().all().then(function(a){return a.map(d("WAWebSchemaSyncKeys").convertToSyncKeyFromRow)})}function t(a){return d("WAWebABProps").getABPropConfigValue("enable_override_syncd_key")?d("WAWebSchemaSyncKeys").getSyncKeysTable().createOrReplace(d("WAWebSchemaSyncKeys").convertFromSyncKeyToRow(a)).then(function(a){return d("WASyncdKeyTypes").toSyncKeyId(a.buffer)}):d("WAWebSchemaSyncKeys").getSyncKeysTable().create(d("WAWebSchemaSyncKeys").convertFromSyncKeyToRow(a)).then(function(a){return d("WASyncdKeyTypes").toSyncKeyId(a.buffer)})}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaSyncKeys").getSyncKeysTable().equals(["keyEpoch"],a));a.forEach(function(a){return d("WAWebSchemaSyncKeys").getSyncKeysTable().merge({keyId:a.keyId},{timestamp:0})})});return v.apply(this,arguments)}function w(){return d("WAWebSchemaMissingKeys").getMissingKeysTable().count()}function x(a){return d("WAWebSchemaMissingKeys").getMissingKeysTable().bulkGet(a).then(function(a){return a.map(function(a){return a==null?null:d("WAWebSchemaMissingKeys").convertToMissingKeyFromRow(a)})})}function y(){return d("WAWebSchemaMissingKeys").getMissingKeysTable().all().then(function(a){return a.map(d("WAWebSchemaMissingKeys").convertToMissingKeyFromRow)})}function z(a){return d("WAWebSchemaMissingKeys").getMissingKeysTable().bulkRemove(a)}function A(a){return d("WAWebSchemaMissingKeys").getMissingKeysTable().bulkCreateOrMerge(a.map(d("WAWebSchemaMissingKeys").convertFromMissingKeyToRow))}g.getAllPendingMutationsRows=a;g.getPendingMutationsRows=c;g.getPendingMutationsRowsByIndex=e;g.appendPendingMutationsRows=f;g.bulkRemovePendingMutations=i;g.setCollectionVersion=j;g.getSyncAction=k;g.getSyncActionsRows=l;g.setSyncAction=m;g.setSyncActionRows=n;g.updateSyncActionRows=o;g.deleteSyncActionRows=p;g.getSyncKey=q;g.getAllSyncKeys=s;g.createSyncKey=t;g.expireSyncKey=u;g.getMissingKeyCount=w;g.bulkGetMissingKeys=x;g.getAllMissingKeys=y;g.bulkRemoveMissingKeys=z;g.createOrUpdateMissingKeys=A}),98);
__d("WAWebUserPrefsAppStateSync",["WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED,!0);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.CRITICAL_DATA_SYNCED,!0)});return h.apply(this,arguments)}function e(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED);return a===!0}function f(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,a);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,a)});return i.apply(this,arguments)}function j(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS);return a}function k(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0);return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0)});return l.apply(this,arguments)}function m(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED);return a===!0}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,a)});return o.apply(this,arguments)}function p(){return c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS,!0)}function q(){return!!c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS)}function r(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=(yield r()))!=null?b:{};yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS,babelHelpers["extends"]({},b,a))});return t.apply(this,arguments)}g.setAllCriticalDataSynced=a;g.getAllCriticalDataSynced=e;g.setLastPeriodicAppStateSyncTs=f;g.getLastPeriodicAppStateSyncTs=j;g.setShouldCheckContactSyncStatus=k;g.getMdSyncActionsActionSanitized=m;g.setMdSyncActionsActionSanitized=n;g.setPrimaryAllowsAllMutations=p;g.getPrimaryAllowsAllMutations=q;g.getNonCriticalDataSyncStatus=r;g.setNonCriticalDataSyncStatus=s}),98);
__d("parseJSONMixed",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a==null?null:JSON.parse(a,b)}f["default"]=a}),66);
__d("tryParseJSONMixed",["parseJSONMixed"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("parseJSONMixed")(a,b)}catch(a){return null}}g["default"]=a}),98);
__d("WAWebSyncd",["Promise","WALogger","WAServerSync.pb","WASyncd","WASyncdConst","WASyncdDisabled","WASyncdGetActionHandler","WASyncdRequestBuilderTypesConverter","WATypeUtils","WAWebCmd","WAWebEventsWaitForOfflineDeliveryEnd","WAWebLid1X1MigrationGating","WAWebModelStorageUtils","WAWebSchemaChat","WAWebSchemaSyncActions","WAWebSyncdDb","WAWebUserPrefsAppStateSync","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","lodash","tryParseJSONMixed"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: getPnMutationsForLidCleanup: chat JID not a string"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: getPnMutationsForLidCleanup: indexParts is not an array"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: invalid action ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: sanitizing null 'action' property in sync-actions table"]);l=function(){return a};return a}var m=["pending-mutations"];function a(){if(d("WASyncdDisabled").isSyncdDisabled())return(h||(h=b("Promise"))).resolve();n();d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd().then(function(){d("WASyncd").processOnAppResume()});o();return d("WASyncd").initializeStateMachine()}function n(){var a=1e3*60;a=c("lodash").debounce(d("WASyncd").reportWam,a,{maxWait:a*3});d("WAWebCmd").Cmd.on(d("WAWebCmd").APP_STATE_SYNC_COMPLETED,a)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsAppStateSync").getMdSyncActionsActionSanitized());if(!a){d("WALogger").LOG(l());a=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().all());a=a.filter(function(a){return a.action==null});a=a.map(function(a){var b=JSON.parse(a.index)[0],c=d("WASyncdConst").Actions.cast(b);if(!c){d("WALogger").LOG(k(),b);return babelHelpers["extends"]({},a)}return babelHelpers["extends"]({},a,{action:b})});yield d("WAWebSyncdDb").updateSyncActionRows(a);yield d("WAWebUserPrefsAppStateSync").setMdSyncActionsActionSanitized(!0)}});return p.apply(this,arguments)}function e(a,c,e){a=[].concat(a,m);d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isAccountLidFieldMigrated()&&a.push("chat","sync-actions");a=d("WAWebModelStorageUtils").getStorage().lock(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var f=(yield q(c));return(h||(h=b("Promise"))).all([d("WAWebSyncdDb").appendPendingMutationsRows(c.concat(f)),e(a)])});return function(b){return a.apply(this,arguments)}}()).then(function(){var a=c.map(function(a){return a.collection});void d("WASyncd").markCollectionsForSync(a)});return(h||(h=b("Promise"))).resolve(a)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isAccountLidFieldMigrated()||d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isSyncdSessionMigrated())return[];a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.action==null)return;var b=d("WASyncdGetActionHandler").getActionHandler(a.action);if((b==null?void 0:b.chatJidIndex)==null)return;b=b.chatJidIndex;a=c("tryParseJSONMixed")(a.index);if(!Array.isArray(a)){d("WALogger").ERROR(j()).sendLogs("syncd-lid-cleanup-invalid-index-non-array");return}var e=a[b];if(!d("WATypeUtils").isString(e)){d("WALogger").ERROR(i()).sendLogs("syncd-lid-cleanup-invalid-index-non-string-jid");return}if(!c("WAWebWid").isLid(e))return;e=(yield d("WAWebSchemaChat").getChatTable().equals(["accountLid"],e,{shouldDecrypt:!1}))[0];if(e==null||e.accountLid===e.id)return;e=d("WAWebWidFactory").createWid(e.id).toJid();a=[].concat(a);a[b]=e;b=JSON.stringify(a);return d("WAWebSchemaSyncActions").getSyncActionsTable().get(b)});return function(b){return a.apply(this,arguments)}}()))).filter(Boolean).map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow);return d("WASyncdRequestBuilderTypesConverter").syncActionsToPendingMutations(a,d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE)});return r.apply(this,arguments)}g.initialize=a;g.sanitizeActionInSyncActionsRow=o;g.lockForSync=e}),98);
__d("WAWebUserPrefsNuxPreferences",["WAWebBizGatingUtils","WAWebEventEmitter","WAWebNux","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.handleNuxChange=function(a){this.trigger(a)};return a}(c("WAWebEventEmitter")),i=new h();function a(a){var b=d("WAWebNux").getNuxSyncKey(a);if(b!=null&&n(b))return!1;b=j(a);return!b?!0:b.views<p(a)}function j(a){a=c("WAWebUserPrefsStore").getUser(a);if(a==null||typeof a!=="object")return null;a=a.views;return typeof a==="number"?{views:a}:null}function b(a,b){c("WAWebUserPrefsStore").setUser(a,b),i.handleNuxChange(a)}function k(a){c("WAWebUserPrefsStore").setUser(a),i.handleNuxChange(a)}function l(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.NUX_LIST);return a instanceof Array?a.filter(function(a){return typeof a==="string"}):[]}function e(a){var b=new Set(l());a.forEach(function(a){var c=a.nuxKey;a=a.acknowledged;a?b.add(c):b["delete"](c)});c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.NUX_LIST,Array.from(b));a.forEach(function(a){a=a.nuxKey;a=o(a);a!=null&&i.handleNuxChange(a)})}function f(){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.NUX_LIST,[])}function m(a){k(a);var b=l().filter(function(b){return b!==a});c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.NUX_LIST,b)}function n(a){return l().includes(a)}function o(a){switch(a){case"message_label_deprecation_migrated":return d("WAWebNux").NUX.MESSAGE_LABEL_DEPRECATION_MIGRATED_PERMANENT;default:return null}}function p(a){switch(a){case"message_label_deprecation_migrated_permanent":case"desktop_upsell":return Number.POSITIVE_INFINITY;case"chat_assignment":return d("WAWebBizGatingUtils").chatAssignmentMaxNuxImpressions();case"status_quick_replies":return 3;default:a;return 1}}g.NuxPrefsEvent=i;g.shouldShowNUX=a;g.getNUX=j;g.setNUX=b;g.removeNUX=k;g.getNuxSyncList=l;g.updateNuxSyncList=e;g.removeAllNuxSync=f;g.resetNux=m;g.nuxExistsInNuxSync=n;g.getNuxMaxViews=p}),98);
__d("WAWebNuxSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WATypeUtils","WAWebSyncd","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["NuxSync: update nux to local store"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["NuxSync: malformed mutation"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["NuxSync: operation not supported ",""]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.Nux};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];a=a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(k(),a);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var c=a.indexParts[1];if(!d("WATypeUtils").isString(c)){d("WALogger").WARN(j()).devConsole(a);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b.push({nuxKey:c,acknowledged:((c=a.value.nuxAction)==null?void 0:c.acknowledged)===!0});return{actionState:d("WASyncdConst").SyncActionState.Success}});b.length!==0&&(d("WALogger").LOG(i()),d("WAWebUserPrefsNuxPreferences").updateNuxSyncList(b));return a});function c(b){return a.apply(this,arguments)}return c}();e.$NuxSync1=function(a,b,c){c={nuxAction:{acknowledged:c}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a],value:c,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:b,action:this.getAction()})};e.acknowledgeNux=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$NuxSync2(a,!0)});function c(b){return a.apply(this,arguments)}return c}();e.unAcknowledgeNux=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$NuxSync2(a,!1)});function c(b){return a.apply(this,arguments)}return c}();e.$NuxSync2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){d("WAWebUserPrefsNuxPreferences").updateNuxSyncList([{nuxKey:a,acknowledged:c}]);a=this.$NuxSync1(a,d("WATimeUtils").unixTimeMs(),c);yield d("WAWebSyncd").lockForSync([],[a],function(){return(h||(h=b("Promise"))).resolve()})});function c(b,c){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebNuxAction",["Promise","WAWebNux","WAWebNuxSync","WAWebUserPrefsNuxPreferences"],(function(a,b,c,d,e,f,g){var h;function i(){return{views:0}}function j(a,e){e===void 0&&(e=!1);var f=d("WAWebUserPrefsNuxPreferences").getNUX(a);f=(f=f)!=null?f:i();var g=d("WAWebUserPrefsNuxPreferences").getNuxMaxViews(a);e=e?g:f.views+1;d("WAWebUserPrefsNuxPreferences").setNUX(a,{views:e});if(e>=g){f=d("WAWebNux").getNuxSyncKey(a);if(f!=null)return c("WAWebNuxSync").acknowledgeNux(f)}return(h||(h=b("Promise"))).resolve()}function a(a){return j(a,!0)}function e(a){d("WAWebUserPrefsNuxPreferences").removeNUX(a);a=d("WAWebNux").getNuxSyncKey(a);return a!=null?c("WAWebNuxSync").unAcknowledgeNux(a):(h||(h=b("Promise"))).resolve()}g.viewNux=j;g.dismissNux=a;g.resetNux=e}),98);
__d("WAWebSubgroupSuggestionsJob",["WAJobOrchestratorTypes","WAWebApiSubgroupSuggestionStore","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("removeSubgroupSuggestions",function(a){return d("WAWebApiSubgroupSuggestionStore").removeSubgroupSuggestionsWithOfflineOption(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted({subgroupSuggestions:a,isOffline:b})}g.removeSubgroupSuggestionsJob=a}),98);
__d("WAWebUpdateDbForGroupActionApi",["Promise","WAFilteredCatch","WALogger","WANullthrows","WATimeUtils","WAWebABProps","WAWebApiMembershipApprovalRequestStore","WAWebApiParticipantStore","WAWebApiSubgroupSuggestionStore","WAWebCommunityGatingUtils","WAWebDBCommunity","WAWebDBCommunityTypes","WAWebDBGroupsGroupMetadata","WAWebDBParticipantTypes","WAWebDBRevokeInviteV4","WAWebEphemeralityUtils","WAWebGroupDatabaseJob","WAWebGroupMembershipApprovalRequestsJob","WAWebGroupParticipantsJob","WAWebGroupQueryBridge","WAWebGroupType","WAWebHandlePushnameUpdate","WAWebNux","WAWebNuxAction","WAWebQueryAndUpdateSubgroupSuggestionsJob","WAWebSubgroupSuggestionsJob","WAWebUpdateDbForCommunityAction","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished all storageTasks"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["unhandled group notif action in handleGroupActionMD for action ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["communityOwnerUpdate: out-of-sync group notification"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["modifyGroupParticipant: out-of-sync group notification"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["_handleGroupActionMD: participants length should be 1, but is ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received group invite revokation from ",", but user not in participants list"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received revoke without an admin jid ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMaybeMeUser returned null, can't process action ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["linkedGroupDemote: out-of-sync group notification"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["linkedGroupPromote: out-of-sync group notification"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeParticipants: out-of-sync group notification"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeParticipants: out-of-sync group notification"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeParticipants: out-of-sync group notification"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["addParticipants: out-of-sync group notification"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["inside _handleGroupActionMD"]);w=function(){return a};return a}function a(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!1);d("WALogger").LOG(w()).tags("groups");var g=a.chatId,x=a.author,z=a.pushname,B=a.ts,C=B===void 0?Date.now()/1e3:B;x&&z&&d("WAWebHandlePushnameUpdate").updatePushname(x,z,f);B=[];switch(e.actionType){case d("WAWebGroupType").GROUP_ACTIONS.ADD:B.push(d("WAWebGroupParticipantsJob").addParticipantsJob(g,e.participants,f,e.reason)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(v()),A(g,f)})));d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&B.push(d("WAWebGroupMembershipApprovalRequestsJob").removeMembershipApprovalRequestsJob(a.chatId,e.participants.map(function(a){return a.id}),f));break;case d("WAWebGroupType").GROUP_ACTIONS.REMOVE:z=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(g));if(z==null)break;var D=e.reason!==d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&(yield d("WAWebDBCommunity").isLastJoinedSubgroup(z));B.push(d("WAWebGroupParticipantsJob").removeParticipantsJob(g,e.participants,C,a.author,e.reason,z,f)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(u()),A(g,f)})));e.participants.find(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&(d("WAWebUserPrefsGeneral").removeUserSentMessageToChat(g),d("WAWebApiParticipantStore").setAdminshipCache(g.toString(),!1));if(D){D=z==null?void 0:z.parentGroup;z=(yield d("WAWebUpdateDbForCommunityAction").databaseUpdatesForExitedCommunity(D!=null?d("WAWebWidFactory").createWid(D):null));B.push.apply(B,z)}break;case d("WAWebGroupType").GROUP_ACTIONS.DEMOTE:D=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(g));if(D==null)break;e.participants.find(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&(d("WAWebApiParticipantStore").setAdminshipCache(g.toString(),!1),d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&B.push(d("WAWebApiMembershipApprovalRequestStore").removeAllMembershipApprovalRequests(g)),yield y(D,g));B.push(d("WAWebGroupParticipantsJob").demoteParticipantsJob(g,e.participants,D,f)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(t()),A(g,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.PROMOTE:z=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(g));if(z==null)break;var E=d("WAWebUserPrefsMeUser").getMaybeMeUser();if(E&&e.participants.find(function(a){a=a.id;return a.equals(E)})){if(d("WAWebCommunityGatingUtils").communityAdminPromotionOneTimePromptEnabled()&&z!=null&&d("WAWebGroupType").getGroupTypeFromGroupMetadata(z)===d("WAWebGroupType").GroupType.COMMUNITY){D=d("WAWebNux").getCommunityAdminPromotionNuxKey(z.id.toString());d("WAWebNuxAction").resetNux(D)}d("WAWebApiParticipantStore").setAdminshipCache(g.toString(),!0);yield y(z,g)}B.push(d("WAWebGroupParticipantsJob").promoteParticipantsJob(g,e.participants,z,f)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(s()),A(g,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE:if(!e.jid)break;var F=e.jid;D=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(F.toString()));D||B.push(d("WAWebGroupParticipantsJob").promoteCommunityParticipantsJob(F,e.participants,f)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(r()),A(F,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE:if(!e.jid)break;var G=e.jid;z=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(G.toString()));z||B.push(d("WAWebGroupParticipantsJob").demoteCommunityParticipantsJob(G,e.participants,f)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(q()),A(G,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.REVOKE_INVITE:var H=(D=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:D.toString();if(!H){d("WALogger").WARN(p(),e);return}z=x==null?void 0:x.toString();D=[];if(z==null){d("WALogger").WARN(o(),e);return}if(z===H)D=e.participants.map(function(a){return{from:H,to:a.id.toString(),groupId:g.toString(),expiration:a.expiration}});else{var I=e.participants.find(function(a){return a.id.toString()===H});if(!I){d("WALogger").ERROR(n(),z).sendLogs("bad-revoke");return}D=[{from:z,to:H,groupId:g.toString(),expiration:I.expiration}]}yield (h||(h=b("Promise"))).all(D.map(function(a){return d("WAWebDBRevokeInviteV4").revokeGroupInviteV4(a.from,a.to,a.groupId,a.expiration)}));break;case d("WAWebGroupType").GROUP_ACTIONS.MODIFY:if(e.participants.length!==1){d("WALogger").WARN(m(),e.participants.length);break}B.push(d("WAWebGroupDatabaseJob").modifyGroupParticipantJob(g,c("WANullthrows")(x),e.participants[0].id)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(l()),A(g,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.SUBJECT:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{subject:e.subject},f));break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{desc:e.desc,descId:e.descId,descTime:e.descTime,descOwner:x==null?void 0:x.toString()},f));break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0},f));break;case d("WAWebGroupType").GROUP_ACTIONS.RESTRICT:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{restrict:!!e.value},f));break;case d("WAWebGroupType").GROUP_ACTIONS.SUSPEND:z=!!e.value;B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{suspended:z},f));I=(yield d("WAWebUpdateDbForCommunityAction").maybeUpdateCommunitySuspendedStatus(g,z,f));B.push.apply(B,I);break;case d("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{announce:!!e.value},f));break;case d("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{noFrequentlyForwarded:!!e.value},f));break;case d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL:if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")){D=d("WAWebEphemeralityUtils").getDisappearingModeTrigger(e.trigger);B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{ephemeralDuration:e.duration,disappearingModeTrigger:D!=null?D:void 0,disappearingModeInitiatedByMe:e.initiatedByMe},f))}else B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{ephemeralDuration:e.duration},f));break;case d("WAWebGroupType").GROUP_ACTIONS.INVITE_CODE:break;case d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK:break;case d("WAWebGroupType").GROUP_ACTIONS.DELETE:if(e.reason===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT){z=(yield d("WAWebUpdateDbForCommunityAction").databaseUpdatesForIntegrityDeactivateCommunity(g,f));B.push.apply(B,z)}else if(e.reason===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT){I=(yield d("WAWebUpdateDbForCommunityAction").databaseUpdatesForDeactivateCommunity(g,f));B.push.apply(B,I)}else B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{terminated:!0},f));break;case d("WAWebGroupType").GROUP_ACTIONS.GROWTH_UNLOCKED:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{growthLockExpiration:void 0,growthLockType:void 0},f));break;case d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED:e.type==="invite"&&B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{growthLockExpiration:e.expiration,growthLockType:e.type},f));break;case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK:D=e.groupDatas[0].id;B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{parentGroup:D.toString()},f));break;case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK:B.push(d("WAWebDBCommunity").persistCommunityLink(g,e.groupDatas,d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupLink,f),d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{lastActivityTimestamp:d("WATimeUtils").unixTime()},f));break;case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_LINK:B.push(d("WAWebDBCommunity").persistCommunityLink(g,e.groupDatas,d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupLink,f));break;case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{parentGroup:void 0},f));break;case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_UNLINK:B.push(d("WAWebDBCommunity").persistCommunityLink(g,e.groupDatas,d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupUnlink,f));break;case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_UNLINK:B.push(d("WAWebDBCommunity").persistCommunityLink(g,e.groupDatas,d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupUnlink,f));break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&(B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{membershipApprovalMode:e.value},f)),e.value||B.push(d("WAWebApiMembershipApprovalRequestStore").removeAllMembershipApprovalRequests(g)));break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:if(d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&!d("WAWebABProps").getABPropConfigValue("group_join_request_m3")){B.push(d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a.chatId,[{id:c("WANullthrows")(x),t:C,addedBy:c("WANullthrows")(x),requestMethod:e.requestMethod,parentGroupId:e.parentGroupId}]));z=d("WAWebNux").getMembershipApprovalRequestsBannerNuxKey(a.chatId.toString());d("WAWebNuxAction").resetNux(z)}break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,babelHelpers["extends"]({reportToAdminMode:e.value},!e.value&&{lastReportToAdminTimestamp:null}),f));break;case d("WAWebGroupType").GROUP_ACTIONS.ADMIN_REPORT_RECIEVED:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{lastReportToAdminTimestamp:e.value},f));break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:if(d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&d("WAWebABProps").getABPropConfigValue("group_join_request_m3")){B.push(d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a.chatId,e.requests.map(function(a){return{id:a,t:C,addedBy:c("WANullthrows")(x),requestMethod:e.requestMethod,parentGroupId:e.parentGroupId}})));I=d("WAWebNux").getMembershipApprovalRequestsBannerNuxKey(a.chatId.toString());d("WAWebNuxAction").resetNux(I)}break;case d("WAWebGroupType").GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS:d("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&B.push(d("WAWebGroupMembershipApprovalRequestsJob").removeMembershipApprovalRequestsJob(a.chatId,e.requests,f));break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{allowNonAdminSubGroupCreation:!!e.value},f));break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:B.push(d("WAWebApiSubgroupSuggestionStore").addSubgroupSuggestions(a.chatId,[{id:e.id,parentGroupId:e.parentGroupId,subject:e.subject,desc:e.description,owner:e.owner,t:e.t,isExistingGroup:(D=e.isExistingGroup)!=null?D:!1,participantCount:e.participantCount,hiddenSubgroup:e.hiddenSubgroup}]));z=d("WAWebNux").getSubgroupSuggestionsBannerNuxKey(a.chatId.toString());void d("WAWebNuxAction").resetNux(z);break;case d("WAWebGroupType").GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS:B.push(d("WAWebSubgroupSuggestionsJob").removeSubgroupSuggestionsJob(e.subgroupSuggestions.map(function(a){var b=a.id;a=a.owner;return{parentGroupId:e.parentGroupId,id:b,owner:a}}),f));break;case d("WAWebGroupType").GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER:B.push(d("WAWebApiSubgroupSuggestionStore").updateOwnerInSubgroupSuggestions(e.parentGroupId,e.subgroupSuggestions,e.oldOwner,e.newOwner));break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBER_ADD_MODE:d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled")&&B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{memberAddMode:e.memberAddMode},f));break;case d("WAWebGroupType").GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{generalChatAutoAddDisabled:!0},f));break;case d("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE:B.push(d("WAWebGroupParticipantsJob").setGroupSuperAdminJob(g,e.newOwner)["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebDBParticipantTypes").GroupUnSyncedError,function(){d("WALogger").WARN(k()),void A(g,f)})));break;case d("WAWebGroupType").GROUP_ACTIONS.HIDDEN_GROUP:B.push(d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(g,{hiddenSubgroup:!!e.value}));break;default:d("WALogger").ERROR(j(),JSON.stringify(e)).tags("groups");break}yield (h||(h=b("Promise"))).all(B);d("WALogger").LOG(i()).tags("groups")});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.isParentGroup===!0&&a.allowNonAdminSubGroupCreation!==!0&&d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()){a=(yield d("WAWebDBCommunity").getJoinedSubgroups(b));a[0]&&void d("WAWebQueryAndUpdateSubgroupSuggestionsJob").queryAndUpdateSubgroupSuggestions(b,a[0])}});return z.apply(this,arguments)}function A(a,b){return b?d("WAWebGroupDatabaseJob").markGroupParticipantStaleJob(a):d("WAWebGroupQueryBridge").sendQueryGroup(a)}function e(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));e!=null&&(e.disappearingModeTrigger=c,yield d("WAWebDBGroupsGroupMetadata").persistGroupMetadata(a,{disappearingModeTrigger:c}));return(h||(h=b("Promise"))).resolve()});return B.apply(this,arguments)}g.updateDBForGroupAction=a;g.syncDisappearingModeTriggerToDB=e}),98);
__d("WAWebMmsMediaTypes",["WAWebInteractiveMessageHeaderMediaType","WAWebMsgGetters","WAWebMsgType","err","lodash"],(function(a,b,c,d,e,f,g){var h=Object.freeze({AUDIO:"audio",DOCUMENT:"document",GIF:"gif",IMAGE:"image",NATIVE_FLOW:"native_flow",PPIC:"ppic",PRODUCT:"product",PTT:"ptt",STICKER:"sticker",VIDEO:"video",PTV:"ptv",TEMPLATE:"template",THUMBNAIL_DOCUMENT:"thumbnail-document",THUMBNAIL_IMAGE:"thumbnail-image",THUMBNAIL_VIDEO:"thumbnail-video",THUMBNAIL_LINK:"thumbnail-link",HISTORY_SYNC:"md-msg-hist",MD_APP_STATE:"md-app-state",PRODUCT_CATALOG_IMAGE:"product-catalog-image",PAYMENT_BG_IMAGE:"payment-bg-image",BIZ_COVER_PHOTO:"biz-cover-photo",PREVIEW:"preview",NEWSLETTER_AUDIO:"newsletter-audio",NEWSLETTER_DOCUMENT:"newsletter-document",NEWSLETTER_IMAGE:"newsletter-image",NEWSLETTER_GIF:"newsletter-gif",NEWSLETTER_PTT:"newsletter-ptt",NEWSLETTER_STICKER:"newsletter-sticker",NEWSLETTER_THUMBNAIL_LINK:"newsletter-thumbnail-link",NEWSLETTER_VIDEO:"newsletter-video",NATIVE_AD_IMAGE:"ads-image"});e=c("lodash").values(h);function a(a){var b;if(a==null)b=h.DOCUMENT;else if(a in h)b=h[a];else throw c("err")("castToV4: unexpected mmsv3 type "+a);return b}function i(a){var b=a.type,e=a.isGif,f=a.interactiveHeader;a=a.isNewsletter;switch(b){case d("WAWebMsgType").MSG_TYPE.IMAGE:return a?h.NEWSLETTER_IMAGE:h.IMAGE;case d("WAWebMsgType").MSG_TYPE.VIDEO:return a?e===!0?h.NEWSLETTER_GIF:h.NEWSLETTER_VIDEO:e===!0?h.GIF:h.VIDEO;case d("WAWebMsgType").MSG_TYPE.AUDIO:return a?h.NEWSLETTER_AUDIO:h.AUDIO;case d("WAWebMsgType").MSG_TYPE.PTT:return a?h.NEWSLETTER_PTT:h.PTT;case d("WAWebMsgType").MSG_TYPE.PTV:return h.PTV;case d("WAWebMsgType").MSG_TYPE.DOCUMENT:return h.DOCUMENT;case d("WAWebMsgType").MSG_TYPE.STICKER:return a?h.NEWSLETTER_STICKER:h.STICKER;case d("WAWebMsgType").MSG_TYPE.PRODUCT:return h.PRODUCT;case d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW:return h.NATIVE_FLOW;case d("WAWebMsgType").MSG_TYPE.INTERACTIVE:if((f==null?void 0:f.mediaType)!=null)switch(f.mediaType){case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.DOCUMENT:return h.DOCUMENT;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO:return h.VIDEO;case d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.IMAGE:return h.IMAGE}break}throw c("err")("msg is not a media msg: "+b+", isGif="+String(e))}function b(a){return i({type:a.type,interactiveHeader:a.interactiveHeader,isGif:a.type===d("WAWebMsgType").MSG_TYPE.VIDEO?a.isGif:!1,isNewsletter:d("WAWebMsgGetters").getIsNewsletterMsg(a)})}g.MEDIA_TYPES=h;g.MEDIA_TYPE_VALUES=e;g.castToV4=a;g.msgToMediaType=i;g.getMsgMediaType=b}),98);
__d("WAWebMediaCryptoEligibilityUtils",["WAWebMmsMediaTypes","WAWebMsgGetters"],(function(a,b,c,d,e,f,g){function a(a){return a.isNewsletter?!1:!0}function b(a){return d("WAWebMsgGetters").getIsNewsletterMsg(a)?!1:!0}var h=new Set([(f=d("WAWebMmsMediaTypes")).MEDIA_TYPES.NEWSLETTER_AUDIO,f.MEDIA_TYPES.NEWSLETTER_DOCUMENT,f.MEDIA_TYPES.NEWSLETTER_GIF,f.MEDIA_TYPES.NEWSLETTER_IMAGE,f.MEDIA_TYPES.NEWSLETTER_PTT,f.MEDIA_TYPES.NEWSLETTER_STICKER,f.MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK,f.MEDIA_TYPES.NEWSLETTER_VIDEO]);function i(a){return h.has(a)}function c(a){return i(a)?!1:!0}function e(a){return i(a)?!1:!0}g.isMediaCryptoExpectedForChat=a;g.isMediaCryptoExpectedForMsg=b;g.isMediaCryptoExpectedForMediaType=c;g.isRmrSupportedForMediaType=e}),98);
__d("WAWebE2EProtoParserApi",["WABase64","WALogger","WAWebGroupType","WAWebMediaCryptoEligibilityUtils","WAWebProtobufsE2E.pb","WAWebWid","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaKey is missing from msg type ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["url(deprecatedMms3Url) is missing from msg type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fileEncSha256 missing from msg type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["directPath missing from msg type ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["directPath and fileEncSha256 missing from msg type ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["directPath missing from msg type ",""]);m=function(){return a};return a}function a(a){switch(a){case d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.PARENT:return d("WAWebGroupType").GroupType.COMMUNITY;case d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.SUB:return d("WAWebGroupType").GroupType.LINKED_SUBGROUP;case d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$InviteLinkGroupType.DEFAULT_SUB:return d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP;default:return d("WAWebGroupType").GroupType.DEFAULT}}function b(a){return a&&!a.includes("/u/")?a:void 0}function e(a){return a?d("WABase64").encodeB64(a):void 0}function f(a,b){if(!n(a,b))return;var c=a.type;if(!d("WAWebMediaCryptoEligibilityUtils").isMediaCryptoExpectedForMsg(a)){b.directPath==null&&d("WALogger").LOG(m(),c).sendLogs(c+"-unencrypted-message-missing-direct-path");return}b.directPath==null&&b.fileEncSha256==null?d("WALogger").LOG(l(),c).sendLogs(c+"-message-missing-direct-path-and-file-enc"):b.directPath==null?d("WALogger").LOG(k(),c).sendLogs(c+"-message-missing-direct-path"):b.fileEncSha256==null&&d("WALogger").LOG(j(),c).sendLogs(c+"-message-missing-file-enc");b.url==null&&d("WALogger").LOG(i(),c).sendLogs(c+"-message-missing-mms3-url");b.mediaKey==null&&d("WALogger").LOG(h(),c).sendLogs(c+"-message-missing-media-key")}function n(a,b){var d;if(c("gkx")("26258")&&Math.random()>.001)return!1;if(!a.id)return!1;return((d=a.id.remote)==null?void 0:d.user)==="status"&&c("WAWebWid").isPSA(a.author)&&b.staticUrl==null?!1:!0}g.parseInviteGrpType=a;g.decodeUrl=b;g.decodeBytes=e;g.validateRequiredMediaProperties=f;g.shouldLogE2eProtoValidation=n}),98);
__d("WAWebEphemeralKeepInChat",["WANullthrows","WAWebEphemeralKeepInChatUtils","WAWebMsgKey","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){function a(a){a=a.keepInChat;if(a!=null&&a.key!=null){var b=a.key,e=b.id,f=b.remoteJid,g=b.participant;b=b.fromMe;var h=a.keepType;a=a.serverTimestampMs;if(e==null||h==null||a==null||f==null)throw c("err")("parseKeepInChatHistorySyncMessage: malformed KIC WebMessageInfo");h=d("WAWebEphemeralKeepInChatUtils").parseKeepTypeToKicState(h);if(h==null)throw c("err")("parseKeepInChatHistorySyncMessage: KeepType has unsupported value");return{kicKey:new(c("WAWebMsgKey"))({fromMe:c("WANullthrows")(b),id:c("WANullthrows")(e),remote:c("WANullthrows")(d("WAWebWidFactory").createWidFromWidLike(f)),participant:g!=null?d("WAWebWidFactory").createWidFromWidLike(g):void 0}),kicState:h,kicTimestampMs:parseInt(a,10)}}}g.parseKeepInChatHistorySyncMessage=a}),98);
__d("WAWebParseWebMessageInfoApi",["WAJids","WALogger","WANullthrows","WATimeUtils","WAWebABProps","WAWebBizCoexGatingUtils","WAWebBotTypes","WAWebE2EProtoParser","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebEphemeralKeepInChat","WAWebEventsGatingUtils","WAWebMessagingGatingUtils","WAWebMsgKey","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebProtobufsWeb.pb","WAWebReportingTokenUtils","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ProtocolParser: admin revoke came without admin JID"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseWebMessageInfo: KIC fields are malformed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["drop: broadcast"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["drop: cannot create MsgKey: ",""]);k=function(){return a};return a}function l(a,b){var e=d("WAWebE2EProtoUtils").decodeJid(b.remoteJid),f=d("WAWebE2EProtoUtils").decodeJid(b.participant),g=d("WAWebUserPrefsMeUser").getMaybeMeUser(),h=d("WAWebE2EProtoUtils").decodeJid(a.participant);f==null&&e!=null&&c("WAWebWid").isWid(e)&&e===d("WAWebWidFactory").createWid(d("WAJids").PSA_JID)&&(f=d("WAWebWidFactory").createWid(d("WAJids").PSA_JID));(c("WAWebWid").isGroup(e)||c("WAWebWid").isStatus(e))&&(f==null&&(b.fromMe===!0?f=g:a.participant!=null&&(f=d("WAWebE2EProtoUtils").decodeJid(a.participant))),h=h||f);try{g=new(c("WAWebMsgKey"))({fromMe:c("WANullthrows")(b.fromMe),remote:e,id:c("WANullthrows")(b.id),participant:f});return{msgKey:g,author:h}}catch(a){d("WALogger").WARN(k(),a.stack);return}}function a(a){var b=a.key,c=d("WAWebE2EProtoUtils").decodeJid(b.remoteJid),e=d("WAWebUserPrefsMeUser").getMaybeMeUser(),f=b.fromMe?c:e,g=b.fromMe?e:c,h=l(a,b);if(h==null)return;var k=h.msgKey;h=h.author;var n="in";e.equals(c)&&(n=b.fromMe?"out":"in");if(f==="broadcast"){d("WALogger").WARN(j()).devConsole(a);return}e=!1;e=a.reactions.some(function(a){return a.text!=null});h={id:k,from:g,to:f,self:n,participant:k.participant,type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,t:a.messageTimestamp||0,ack:a.status-1,author:h,invis:!!a.ignore,star:!!a.starred,broadcast:b.fromMe&&a.broadcast,notifyName:a.pushName||"",encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(a.mediaCiphertextSha256),shareDuration:a.duration,labels:a.labels,ephemeralStartTimestamp:a.ephemeralStartTimestamp,ephemeralOutOfSync:a.ephemeralOutOfSync,bizPrivacyStatus:a.bizPrivacyStatus,verifiedBizName:a.verifiedBizName,reactions:a.reactions,hasReaction:e,agentId:a.agentId,revokeTimestamp:a.revokeMessageTimestamp,kicKey:void 0,kicState:void 0,pollInvalidated:((c=a.pollAdditionalMetadata)==null?void 0:c.pollInvalidated)===!0,eventInvalidated:((g=a.eventAdditionalMetadata)==null?void 0:g.isStale)===!0,replyCount:(f=a.commentMetadata)==null?void 0:f.replyCount,originalSelfAuthor:d("WAWebE2EProtoUtils").decodeJid(a.originalSelfAuthorUserJidString),kicTimestampMs:void 0,pinInChat:a.pinInChat,pmCampaignId:(n=a.premiumMessageInfo)==null?void 0:n.serverCampaignId,bizSource:((k=a.premiumMessageInfo)==null?void 0:k.serverCampaignId)!=null?"smb_promo":void 0,bizBotType:a.is1PBizBotMessage===!0?d("WAWebBotTypes").BizBotType.BIZ_1P:null,botTargetSenderJid:a.botMessageInvokerJid!=null?d("WAWebE2EProtoUtils").decodeJid(a.botMessageInvokerJid):null};if(d("WAWebMessagingGatingUtils").isReportingTagSyncingEnabled()){h.reportingTokenInfo=a.reportingTokenInfo!=null?{reportingTag:(b=a.reportingTokenInfo)==null?void 0:b.reportingTag,version:d("WAWebReportingTokenUtils").REPORTING_TOKEN_VERSION.HISTORY_SYNC}:null}if(a.keepInChat!=null)try{e=d("WAWebEphemeralKeepInChat").parseKeepInChatHistorySyncMessage(a);e!=null&&Object.assign(h,e)}catch(a){d("WALogger").WARN(i()).devConsole(a)}return a.message?d("WAWebE2EProtoParser").parseMsgProto(a.message,h,"history",a.paymentInfo,a.finalLiveLocation,a.quotedPaymentInfo,null,null,null,h.bizSource):m(a,h)}function m(a,b){if(a.messageStubType==null)return;var c=d("WAWebProtobufsWeb.pb").WebMessageInfo$StubType;switch(a.messageStubType){case c.REVOKE:b.type="revoked";b.subtype="sender";b.kind=d("WAWebMsgType").MsgKind.RevokedMessage;var e=a.messageStubParameters;e=e!=null&&e.length>0?e[0]:null;if(e!=null){b.protocolMessageKey=(e=l(a,babelHelpers["extends"]({},a.key,{id:e})))==null?void 0:e.msgKey}return b;case c.CIPHERTEXT:b.type="ciphertext";b.kind=d("WAWebMsgType").MsgKind.Ciphertext;return b;case c.OVERSIZED:b.type="oversized";b.kind=d("WAWebMsgType").MsgKind.Oversized;return b;case c.FUTUREPROOF:b.kind=d("WAWebMsgType").MsgKind.Unknown;b.subtype="phone";return b;case c.CAPI_GROUP_NE2EE_SYSTEM_MESSAGE:b.type="notification_template";b.subtype="is_capi_hosted_group";return b;default:return n(a,b)}}function n(a,b){if(a.messageStubType==null)return;var e=d("WAWebProtobufsWeb.pb").WebMessageInfo$StubType;b.type="notification_template";b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.templateParams=Array.isArray(a.messageStubParameters)?a.messageStubParameters.map(function(b){return a.messageStubType===e.GROUP_CREATE||a.messageStubType===e.GROUP_CHANGE_SUBJECT?b:d("WAWebE2EProtoUtils").decodeJid(b)}):void 0;if(a.messageStubType==null){b.templateParams=void 0;return b}switch(a.messageStubType){case e.NON_VERIFIED_TRANSITION:b.subtype="non_verified_transition";break;case e.UNVERIFIED_TRANSITION:b.subtype="unverified_transition";break;case e.VERIFIED_TRANSITION:b.subtype="verified_transition";break;case e.VERIFIED_LOW_UNKNOWN:b.subtype="verified_low_unknown";break;case e.VERIFIED_HIGH:b.subtype="verified_high";break;case e.VERIFIED_INITIAL_UNKNOWN:b.subtype="verified_initial_unknown";break;case e.VERIFIED_INITIAL_LOW:b.subtype="verified_initial_low";break;case e.VERIFIED_INITIAL_HIGH:b.subtype="verified_initial_high";break;case e.VERIFIED_TRANSITION_ANY_TO_NONE:b.subtype="verified_transition_any_to_none";break;case e.VERIFIED_TRANSITION_ANY_TO_HIGH:b.subtype="verified_transition_any_to_high";break;case e.VERIFIED_TRANSITION_HIGH_TO_LOW:b.subtype="verified_transition_high_to_low";break;case e.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:b.subtype="verified_transition_high_to_unknown";break;case e.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:b.subtype="verified_transition_unknown_to_low";break;case e.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:b.subtype="verified_transition_low_to_unknown";break;case e.VERIFIED_TRANSITION_NONE_TO_LOW:b.subtype="verified_transition_none_to_low";break;case e.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:b.subtype="verified_transition_none_to_unknown";break;case e.GROUP_CREATE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="create";b.body=b.templateParams[0];b.templateParams=void 0;break;case e.REPORT_TO_ADMIN_ENABLED_STATUS:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="allow_admin_reports";break;case e.GROUP_DELETE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="delete";b.templateParams=void 0;break;case e.GROUP_CHANGE_SUBJECT:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="subject";b.body=b.templateParams[0];b.templateParams=void 0;break;case e.GROUP_CHANGE_ICON:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="picture";b.body=b.templateParams[0];b.templateParams=void 0;break;case e.GROUP_CHANGE_INVITE_LINK:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="revoke_invite";break;case e.GROUP_CHANGE_DESCRIPTION:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="description";b.body=b.templateParams[0];break;case e.GROUP_CHANGE_RESTRICT:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="restrict";b.body=b.templateParams[0];break;case e.GROUP_CHANGE_ANNOUNCE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="announce";b.body=b.templateParams[0];break;case e.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="no_frequently_forwarded";b.body=b.templateParams[0];break;case e.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="announce_msg_bounce";b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_ADD:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="add";b.recipients=b.templateParams;b.templateParams=void 0;Array.isArray(b.recipients)&&b.recipients.length===1&&b.author===b.recipients[0]&&(b.author=void 0);break;case e.GROUP_PARTICIPANT_REMOVE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="remove";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_PROMOTE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="promote";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_DEMOTE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="demote";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_INVITE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="invite";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_LEAVE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="leave";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_CHANGE_NUMBER:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="modify";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_V4_ADD_INVITE_SENT:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="v4_add_invite_sent";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="v4_add_invite_join";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GROUP_INVITE_LINK_GROWTH_LOCKED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype=b.templateParams[0]==="true"?"growth_locked":"growth_unlocked";b.body="invite";b.templateParams=void 0;break;case e.GROUP_PARTICIPANT_LINKED_GROUP_JOIN:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="linked_group_join";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.BROADCAST_CREATE:b.type="broadcast_notification";b.kind=d("WAWebMsgType").MsgKind.BroadcastNotification;b.subtype="create";b.body=b.templateParams[0]||"0";b.templateParams=void 0;break;case e.BROADCAST_ADD:b.type="broadcast_notification";b.kind=d("WAWebMsgType").MsgKind.BroadcastNotification;b.subtype="add";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.BROADCAST_REMOVE:b.type="broadcast_notification";b.kind=d("WAWebMsgType").MsgKind.BroadcastNotification;b.subtype="remove";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.GENERIC_NOTIFICATION:b.type="notification";b.kind=d("WAWebMsgType").MsgKind.Notification;b.body=b.templateParams[0];b.templateParams=void 0;break;case e.E2E_IDENTITY_CHANGED:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="identity";b.body=b.templateParams[0]instanceof c("WAWebWid")?b.templateParams[0].toString():b.templateParams[0];b.templateParams=void 0;break;case e.E2E_IDENTITY_UNAVAILABLE:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="e2e_identity_unavailable";break;case e.CHAT_PSA:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="chat_psa";break;case e.E2E_DEVICE_CHANGED:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="device";b.body=b.templateParams[0]instanceof c("WAWebWid")?b.templateParams[0].toString():b.templateParams[0];b.devicesAdded=parseInt(b.templateParams[1],10);b.devicesRemoved=parseInt(b.templateParams[2],10);b.templateParams=void 0;break;case e.E2E_ENCRYPTED:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="encrypt";break;case e.E2E_ENCRYPTED_NOW:b.type="e2e_notification";b.kind=d("WAWebMsgType").MsgKind.E2eNotification;b.subtype="encrypt_now";break;case e.CALL_MISSED_VOICE:b.type="call_log";b.kind=d("WAWebMsgType").MsgKind.CallLog;b.subtype="miss";break;case e.CALL_MISSED_VIDEO:b.type="call_log";b.kind=d("WAWebMsgType").MsgKind.CallLog;b.subtype="miss_video";break;case e.CALL_MISSED_GROUP_VOICE:b.type="call_log";b.kind=d("WAWebMsgType").MsgKind.CallLog;b.subtype="miss_group";break;case e.CALL_MISSED_GROUP_VIDEO:b.type="call_log";b.kind=d("WAWebMsgType").MsgKind.CallLog;b.subtype="miss_group_video";break;case e.SILENCED_UNKNOWN_CALLER_AUDIO:case e.SILENCED_UNKNOWN_CALLER_VIDEO:b.type="call_log";b.kind=d("WAWebMsgType").MsgKind.CallLog;b.subtype="silence";break;case e.INDIVIDUAL_CHANGE_NUMBER:b.subtype="change_number";break;case e.SENDER_INVITE:b.subtype="sender_invite";break;case e.RECEIVER_INVITE:b.subtype="receiver_invite";break;case e.MASKED_THREAD_CREATED:b.subtype="masked_thread_created";break;case e.CAG_MASKED_THREAD_CREATED:b.subtype="cag_masked_thread_created";break;case e.CHANGE_EPHEMERAL_SETTING:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="ephemeral";b.author=b.templateParams[1];break;case e.PAYMENT_CIPHERTEXT:b.type="payment";b.kind=d("WAWebMsgType").MsgKind.Payment;b.subtype="ciphertext";if(a.paymentInfo!=null){var f=d("WAWebE2EProtoUtils").parseMsgPaymentInfo(a.paymentInfo);b.paymentStatus=f.paymentStatus;b.paymentTxnStatus=f.paymentTxnStatus;b.paymentCurrency=f.paymentCurrency;b.paymentAmount1000=f.paymentAmount1000;b.paymentMessageReceiverJid=f.paymentMessageReceiverJid;b.paymentExpiryTimestamp=f.paymentExpiryTimestamp;b.paymentTransactionTimestamp=f.paymentTransactionTimestamp}break;case e.PAYMENT_FUTUREPROOF:b.type="payment";b.kind=d("WAWebMsgType").MsgKind.Payment;b.subtype="futureproof";if(a.paymentInfo!=null){f=d("WAWebE2EProtoUtils").parseMsgPaymentInfo(a.paymentInfo);b.paymentStatus=f.paymentStatus;b.paymentTxnStatus=f.paymentTxnStatus;b.paymentCurrency=f.paymentCurrency;b.paymentAmount1000=f.paymentAmount1000;b.paymentMessageReceiverJid=f.paymentMessageReceiverJid;b.paymentExpiryTimestamp=f.paymentExpiryTimestamp;b.paymentTransactionTimestamp=f.paymentTransactionTimestamp}break;case e.PAYMENT_ACTION_REQUEST_CANCELLED:b.subtype="payment_transaction_request_cancelled";break;case e.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:b.subtype="payment_transaction_status_update_failed";break;case e.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:b.subtype="payment_transaction_status_update_refunded";break;case e.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:b.subtype="payment_transaction_status_update_refund_failed";break;case e.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:b.subtype="payment_transaction_status_receiver_pending_setup";break;case e.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:b.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case e.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:b.subtype="payment_action_account_setup_reminder";break;case e.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:b.subtype="payment_action_send_payment_reminder";break;case e.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:b.subtype="payment_action_send_payment_invitation";break;case e.PAYMENT_ACTION_REQUEST_DECLINED:b.subtype="payment_action_request_declined";break;case e.PAYMENT_ACTION_REQUEST_EXPIRED:b.subtype="payment_action_request_expired";break;case e.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:b.subtype="biz_verified_transition_top_to_bottom";break;case e.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:b.subtype="biz_verified_transition_bottom_to_top";break;case e.BIZ_INTRO_TOP:b.subtype="biz_intro_top";break;case e.BIZ_INTRO_BOTTOM:b.subtype="biz_intro_bottom";break;case e.BIZ_NAME_CHANGE:b.subtype="biz_name_change";break;case e.BIZ_MOVE_TO_CONSUMER_APP:b.subtype="biz_move_to_consumer_app";break;case e.BIZ_TWO_TIER_MIGRATION_TOP:b.subtype="biz_two_tier_migration_top";break;case e.BIZ_TWO_TIER_MIGRATION_BOTTOM:b.subtype="biz_two_tier_migration_bottom";break;case e.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:b.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case e.BLUE_MSG_BSP_FB_TO_SELF_FB:b.subtype="blue_msg_bsp_fb_to_self_fb";break;case e.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:b.subtype="blue_msg_bsp_fb_to_self_premise";break;case e.BLUE_MSG_BSP_FB_UNVERIFIED:b.subtype="blue_msg_bsp_fb_unverified";break;case e.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:b.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case e.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:b.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case e.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:b.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case e.BLUE_MSG_BSP_FB_VERIFIED:b.subtype="blue_msg_bsp_fb_verified";break;case e.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:b.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case e.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:b.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case e.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:b.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case e.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:b.subtype="blue_msg_bsp_premise_to_self_premise";break;case e.BLUE_MSG_BSP_PREMISE_UNVERIFIED:b.subtype="blue_msg_bsp_premise_unverified";break;case e.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:b.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case e.BLUE_MSG_BSP_PREMISE_VERIFIED:b.subtype="blue_msg_bsp_premise_verified";break;case e.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:b.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case e.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:b.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case e.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:b.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case e.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:b.subtype="blue_msg_consumer_to_self_fb_unverified";break;case e.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:b.subtype="blue_msg_consumer_to_self_premise_unverified";break;case e.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:b.subtype="blue_msg_self_fb_to_bsp_premise";break;case e.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:b.subtype="blue_msg_self_fb_to_self_premise";break;case e.BLUE_MSG_SELF_FB_UNVERIFIED:b.subtype="blue_msg_self_fb_unverified";break;case e.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:b.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case e.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:b.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case e.BLUE_MSG_SELF_FB_VERIFIED:b.subtype="blue_msg_self_fb_verified";break;case e.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:b.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case e.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:b.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case e.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:b.subtype="blue_msg_self_premise_to_bsp_premise";break;case e.BLUE_MSG_SELF_PREMISE_UNVERIFIED:b.subtype="blue_msg_self_premise_unverified";break;case e.BLUE_MSG_SELF_PREMISE_VERIFIED:b.subtype="blue_msg_self_premise_verified";break;case e.BLUE_MSG_TO_BSP_FB:b.subtype="blue_msg_to_bsp_fb";break;case e.BLUE_MSG_TO_CONSUMER:b.subtype="blue_msg_to_consumer";break;case e.BLUE_MSG_TO_SELF_FB:b.subtype="blue_msg_to_self_fb";break;case e.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:b.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case e.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:b.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case e.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:b.subtype="blue_msg_unverified_to_self_fb_verified";break;case e.BLUE_MSG_UNVERIFIED_TO_VERIFIED:b.subtype="blue_msg_unverified_to_verified";break;case e.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:b.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case e.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:b.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case e.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:b.subtype="blue_msg_verified_to_self_fb_unverified";break;case e.BLUE_MSG_VERIFIED_TO_UNVERIFIED:b.subtype="blue_msg_verified_to_unverified";break;case e.BIZ_PRIVACY_MODE_INIT_FB:b.subtype="biz_privacy_mode_init_fb";((f=b.id)==null?void 0:(f=f.remote)==null?void 0:f.isBot())&&(b.subtype="bot_init");break;case e.BIZ_PRIVACY_MODE_INIT_BSP:b.subtype="biz_privacy_mode_init_bsp";break;case e.BIZ_PRIVACY_MODE_TO_FB:b.subtype="biz_privacy_mode_to_fb";((f=b.id)==null?void 0:(f=f.remote)==null?void 0:f.isBot())&&(b.subtype="bot_init");break;case e.BIZ_PRIVACY_MODE_TO_BSP:b.subtype="biz_privacy_mode_to_bsp";break;case e.DISAPPEARING_MODE:b.subtype="disappearing_mode";break;case e.BLOCK_CONTACT:b.subtype="block_contact";break;case e.ADMIN_REVOKE:b.type="revoked";b.subtype="admin";b.kind=d("WAWebMsgType").MsgKind.RevokedMessage;b.revokeSender=b.templateParams[1]instanceof c("WAWebWid")?b.templateParams[1]:void 0;b.revokeSender||d("WALogger").LOG(h()).devConsole(b.templateParams);f=b.templateParams[0];b.protocolMessageKey=(f=l(a,{remoteJid:a.key.remoteJid,fromMe:d("WAWebUserPrefsMeUser").isMeAccount(b.from),id:f,participant:a.key.participant}))==null?void 0:f.msgKey;b.templateParams=void 0;break;case e.COMMUNITY_LINK_PARENT_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="parent_group_link";break;case e.COMMUNITY_LINK_SIBLING_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sibling_group_link";break;case e.COMMUNITY_LINK_SUB_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sub_group_link";break;case e.COMMUNITY_CREATE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_create";break;case e.COMMUNITY_UNLINK_PARENT_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="parent_group_unlink";break;case e.INTEGRITY_UNLINK_PARENT_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="integrity_parent_group_unlink";break;case e.COMMUNITY_UNLINK_SIBLING_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sibling_group_unlink";break;case e.COMMUNITY_UNLINK_SUB_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sub_group_unlink";break;case e.COMMUNITY_PARTICIPANT_PROMOTE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="linked_group_promote";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.COMMUNITY_PARTICIPANT_DEMOTE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="linked_group_demote";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.EPHEMERAL_KEEP_IN_CHAT:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="ephemeral_keep_in_chat";break;case e.GROUP_MEMBERSHIP_JOIN_APPROVAL_MODE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="membership_approval_mode";break;case e.GROUP_MEMBER_ADD_MODE:if(!d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled")){b.templateParams=void 0;break}b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="member_add_mode";break;case e.GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST_NON_ADMIN_ADD:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.recipients=b.templateParams;b.subtype="created_membership_requests";break;case e.GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="membership_approval_request";break;case e.COMMUNITY_LINK_PARENT_GROUP_MEMBERSHIP_APPROVAL:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="parent_group_link_membership_approval";break;case e.GROUP_PARTICIPANT_JOINED_GROUP_AND_PARENT_GROUP:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="auto_add";break;case e.COMMUNITY_PARENT_GROUP_DELETED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="delete_parent_group";break;case e.BIZ_CHAT_ASSIGNMENT:b.subtype="chat_assignment";break;case e.BIZ_CHAT_ASSIGNMENT_UNASSIGN:b.subtype="chat_assignment_unassign";break;case e.COMMUNITY_PARENT_GROUP_SUBJECT_CHANGED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="subject";b.body=b.templateParams[1];break;case e.CAG_INVITE_AUTO_ADD:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="invite_auto_add";b.recipients=[d("WAWebUserPrefsMeUser").getMaybeMeUser()];break;case e.CAG_INVITE_AUTO_JOINED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="invite_auto_add";b.recipients=b.templateParams;b.templateParams=void 0;break;case e.COMMUNITY_PARTICIPANT_ADD_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_participant_add_rich";break;case e.SUB_GROUP_PARTICIPANT_ADD_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sub_group_participant_add_rich";break;case e.SUB_GROUP_INVITE_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="sub_group_invite_rich";b.author=void 0;break;case e.COMMUNITY_INVITE_AUTO_ADD_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_invite_auto_add_rich";b.author=void 0;break;case e.COMMUNITY_INVITE_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_invite_rich";b.author=void 0;break;case e.COMMUNITY_LINK_PARENT_GROUP_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_link_parent_group_rich";break;case e.COMMUNITY_CHANGE_DESCRIPTION:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="parent_group_description";b.body=b.templateParams[0];break;case e.PINNED_MESSAGE_IN_CHAT:b.type="pinned_message";b.kind=d("WAWebMsgType").MsgKind.PinnedMessage;break;case e.COMMUNITY_ALLOW_MEMBER_ADDED_GROUPS:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="allow_non_admin_sub_group_creation";break;case e.EMPTY_SUBGROUP_CREATE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="empty_subgroup_create";break;case e.SUGGESTED_SUBGROUP_ANNOUNCE:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="created_subgroup_suggestion";break;case e.SUBGROUP_ADMIN_TRIGGERED_AUTO_ADD_RICH:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="subgroup_admin_triggered_auto_add";break;case e.GENERAL_CHAT_ADD:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="general_chat_add";break;case e.GENERAL_CHAT_AUTO_ADD_DISABLED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="general_chat_auto_add_disabled";break;case e.BIZ_BOT_1P_MESSAGING_ENABLED:b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_bot_1p_disclosure";break;case e.BIZ_BOT_3P_MESSAGING_ENABLED:b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_bot_3p_disclosure";break;case e.CHANGE_USERNAME:b.subtype="change_username";break;case e.BIZ_COEX_PRIVACY_INIT_SELF:if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){b.templateParams=void 0;break}b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_me_account_type_is_hosted";break;case e.BIZ_COEX_PRIVACY_TRANSITION_SELF:if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){b.templateParams=void 0;break}b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_me_account_type_is_hosted_transition";break;case e.BIZ_COEX_PRIVACY_INIT:if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){b.templateParams=void 0;break}b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_account_type_is_hosted";break;case e.BIZ_COEX_PRIVACY_TRANSITION:if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){b.templateParams=void 0;break}b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="biz_account_type_changed_to_hosted";break;case e.SUPPORT_AI_EDUCATION:b.type=d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE;b.kind=d("WAWebMsgType").MsgKind.NotificationTemplate;b.subtype="saga_init";break;case e.EVENT_CANCELED:case e.EVENT_UPDATED:if(!d("WAWebEventsGatingUtils").isEventEditAndCancelSytemMessageEnabled())break;f=babelHelpers["extends"]({},d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(b),{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,subtype:"event_edit_decrypted",kind:d("WAWebMsgType").MsgKind.ProtocolEventEdit,eventName:b.templateParams[0],eventStartTime:d("WATimeUtils").unixTime(),isEventCanceled:a.messageStubType===e.EVENT_CANCELED,protocolMessageKey:c("WANullthrows")((f=l(a,c("WANullthrows")(a.targetMessageId)))==null?void 0:f.msgKey,"Error: buildMsgKey or targetMessageId is null or missing for event edit system message history sync parsing"),editMsgType:d("WAWebMsgType").MSG_TYPE.EVENT_CREATION,latestEditMsgKey:void 0,latestEditSenderTimestampMs:void 0});return f;case e.COMMUNITY_OWNER_UPDATED:b.type="gp2";b.kind=d("WAWebMsgType").MsgKind.Gp2;b.subtype="community_owner_update";break;default:b.templateParams=void 0;break}return b}g.buildMsgKey=l;g.parseWebMessageInfo=a;g.parseMsgStubProto=m}),98);
__d("WAWebAdvUpdateParticipantApi",["WAJids","WALogger","WAWebPostSenderKeyExpiredMetric","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWamEnumExpiryReason","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateGroupParticipantsInTransaction: error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateGroupParticipantsInTransaction: error: ",""]);i=function(){return a};return a}function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;try{e=(yield d("WAWebSchemaParticipant").getParticipantTable().equals(["participants"],String(a)))}catch(a){a.toString().includes("Failed to read large IndexedDB value")&&d("WALogger").ERROR(i(),a).sendLogs("indexeddb-participant-read-large-value");throw a}var f=e.map(function(e){var f=e.rotateKey,g=new Map(e.senderKey);c.forEach(function(b){var c;b=String(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(a.user,a.server,b));f=f||((c=g.get(b))!=null?c:!1);g["delete"](b)});f&&g.forEach(function(a,b){return g.set(b,!1)});b.forEach(function(b){g.set(String(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(a.user,a.server,b)),!1)});l(a,f,e,b,c);return babelHelpers["extends"]({},e,{senderKey:g,rotateKey:f})});return d("WAWebSchemaParticipant").getParticipantTable().bulkCreateOrReplace(f)});return j.apply(this,arguments)}function c(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var b;try{b=(yield d("WAWebSchemaParticipant").getParticipantTable().anyOf(["participants"],a.map(function(a){return String(a.wid)})))}catch(a){a.toString().includes("Failed to read large IndexedDB value")&&d("WALogger").ERROR(h(),a).sendLogs("indexeddb-participant-bulk-read-large-value");throw a}if(b.length===0)return;var c=new Map();a.forEach(function(a){c.set(String(a.wid),a)});a=b.map(function(a){var b=a.rotateKey,e=new Map(a.senderKey);a.participants.forEach(function(f){var g=c.get(f);if(!g)return;f=g.wid;var h=g.added,i=g.removed;i.forEach(function(a){var c;a=String(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(g.wid.user,g.wid.server,a));b=b||((c=e.get(a))!=null?c:!1);e["delete"](a)});b&&e.forEach(function(a,b){return e.set(b,!1)});h.forEach(function(a){e.set(String(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(g.wid.user,g.wid.server,a)),!1)});l(f,b,a,h,i)});return babelHelpers["extends"]({},a,{senderKey:e,rotateKey:b})});return d("WAWebSchemaParticipant").getParticipantTable().bulkCreateOrReplace(a)});return k.apply(this,arguments)}function l(a,b,c,e,f){if(b&&!c.rotateKey){f.includes(d("WAJids").DEFAULT_DEVICE_ID)&&e.includes(d("WAJids").DEFAULT_DEVICE_ID)?b=d("WAWebWamEnumExpiryReason").EXPIRY_REASON.IDENTITY_CHANGE:((f=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:f.equals(a))?b=d("WAWebWamEnumExpiryReason").EXPIRY_REASON.PEER_COMPANION_UNPAIR:b=d("WAWebWamEnumExpiryReason").EXPIRY_REASON.OTHER_DEVICE_UNPAIR;d("WAWebPostSenderKeyExpiredMetric").postSenderKeyExpiredMetric({chatId:c.groupId,deviceCount:c.senderKey.size,expiryReason:b})}}g.updateGroupParticipantsInTransaction=a;g.bulkUpdateGroupParticipantsInTransaction=c}),98);
__d("WAWebFMXUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebABProps").getABPropConfigValue("first_message_experience")}function i(){return h()&&d("WAWebABProps").getABPropConfigValue("first_message_experience_v2")}function a(){return i()&&d("WAWebABProps").getABPropConfigValue("fmx_ctwa_kill_switch")}g.supportsFMX=h;g.supportsFMXV2=i;g.fmxCTWAKillSwitchEnabled=a}),98);
__d("WAWebContactSystemMsg",["WATimeUtils","WAWebApiContact","WAWebFMXUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(a,b){var e=d("WAWebUserPrefsMeUser").getMeUser(),f=new(c("WAWebMsgKey"))({fromMe:b.equals(e),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:f,t:d("WATimeUtils").unixTime(),type:"e2e_notification",kind:d("WAWebMsgType").MsgKind.E2eNotification,subtype:"identity",from:a,to:e,body:b.toString()}}function e(a,b){b===void 0&&(b="encrypt");return l(a,{type:"e2e_notification",kind:d("WAWebMsgType").MsgKind.E2eNotification,subtype:b,templateParams:[]})}function f(a,b,c){c===void 0&&(c=[]);return l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:b,templateParams:c})}function h(a,b,e){var f=e?d("WAWebUserPrefsMeUser").getMeUser():a;if(f==null)throw c("err")("Cannot set null initiator for DDM system message: "+a.toString()+" / "+String(e));return l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"disappearing_mode",templateParams:[],ephemeralDuration:b,ephemeralSettingUser:f})}function i(a,b,c){return l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"disappearing_mode_update",templateParams:[],ephemeralDuration:b,ephemeralSettingUser:c})}function j(a,b){return l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"change_username",templateParams:b!=null?[b]:[""]})}function k(a){return l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"disappearing_mode_unsupported",templateParams:[]})}function l(a,b){var e=d("WAWebUserPrefsMeUser").getMaybeMeLid(),f=d("WAWebUserPrefsMeUser").getMeUser(),g=new(c("WAWebMsgKey"))({fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});return babelHelpers["extends"]({id:g,t:d("WATimeUtils").unixTime(),from:a,to:a.isLid()&&e!=null?e:f},b)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebFMXUtils").supportsFMX())return null;if(b.isEnterprise)return null;if(b.isSmb&&!d("WAWebFMXUtils").supportsFMXV2()||!a.isUser()||b.isWASupportStartingChat||b.iAmStartingChat||b.isFromCTWA&&d("WAWebFMXUtils").fmxCTWAKillSwitchEnabled())return null;if(a.isBot())return null;b=(yield d("WAWebApiContact").isAddressBookContact(a.toJid()));return b?null:l(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"contact_info_card",templateParams:[a]})});return n.apply(this,arguments)}g.genSecurityCodeNotificationMsg=a;g.genEncryptNotificationMsg=e;g.genNonE2ENotificationMsg=f;g.genDefaultDisappearingModeSystemMsg=h;g.genDisappearingModeUpdateSystemMsg=i;g.genUsernameChangeSystemMsg=j;g.genDisappearingModeUnsupportedSystemMsg=k;g.genNotificationMsg=l;g.genContactInfoCardMsg=m}),98);
__d("WAWebIdentityChangeApi",["Promise","WAJids","WANullthrows","WAWebAdvUpdateParticipantApi","WAWebApiContact","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebContactSystemMsg","WAWebDeviceListPk","WAWebHandleMsgTypes.flow","WAWebHandleSingleMsg","WAWebModelStorageUtils","WAWebMsgType","WAWebOfflineDeviceCache","WAWebProtobufsAdv.pb","WAWebSchemaChat","WAWebSecurityCodeApi","WAWebSendTcTokenWhenDeviceIdentityChange","WAWebSignal","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;b===void 0&&(b=!1);c=(c=a.device)!=null?c:d("WAJids").DEFAULT_DEVICE_ID;a=d("WAWebWidFactory").toUserWid(a);if(c===d("WAJids").DEFAULT_DEVICE_ID){yield j(a);c=(yield d("WAWebSecurityCodeApi").addSecurityCodeChangedNotifications(a,b));void d("WAWebSendTcTokenWhenDeviceIdentityChange").sendTcTokenWhenDeviceIdentityChange(a);return c}});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e===void 0&&(e=!1);var f=[d("WAJids").DEFAULT_DEVICE_ID],g=[d("WAJids").DEFAULT_DEVICE_ID],i=!1;if(e)d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(String(a),null),yield d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){return d("WAWebAdvUpdateParticipantApi").updateGroupParticipantsInTransaction(a,g,f)});else{e=(yield d("WAWebApiDeviceList").getDeviceRecord(a));e&&!e.deleted&&(e.devices.forEach(function(a){a.id!==d("WAJids").DEFAULT_DEVICE_ID&&f.push(a.id)}),d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&e.advAccountType===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(i=!0));(h||(h=b("Promise"))).all(f.map(function(c){return c===d("WAJids").DEFAULT_DEVICE_ID?(h||(h=b("Promise"))).resolve():d("WAWebSignal").Session.deleteRemoteInfo(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(a.user,a.server,c))}));yield h.all([d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){return d("WAWebAdvUpdateParticipantApi").updateGroupParticipantsInTransaction(a,g,f)}),d("WAWebApiDeviceList").createOrReplaceDeviceRecord({id:d("WAWebDeviceListPk").createDeviceListPK(a),deleted:!0})]);if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&i===!0){yield d("WAWebApiContact").updateContactAdvHostedType(a,d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE);e=(yield d("WAWebSchemaChat").getChatTable().get(a.toString(),!1));if(e!=null){i=d("WAWebContactSystemMsg").genNotificationMsg(a,{type:"e2e_notification",kind:d("WAWebMsgType").MsgKind.E2eNotification,subtype:"encrypt_now",templateParams:[]});yield d("WAWebHandleSingleMsg").handleSingleMsg(c("WANullthrows")(i.from),i,"bizStateChangeNotification",d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE)}void d("WAWebBizCoexUtils").triggerUsyncForCoexUpdate(a)}}});return k.apply(this,arguments)}g.handleNewIdentity=a;g.clearDeviceRecordForIdentityChange=j}),98);
__d("WAWebAdvHostedAccountTypeSystemMsg",["WATimeUtils","WAWebBizCoexGatingUtils","WAWebMsgKey","WAWebMsgType","WAWebProtobufsAdv.pb","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(!a.isUser())return null;var f=d("WAWebUserPrefsMeUser").getMeUser();b=new(c("WAWebMsgKey"))({fromMe:b.equals(f),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});if(e===d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE)return{id:b,t:d("WATimeUtils").unixTime(),type:"e2e_notification",kind:d("WAWebMsgType").MsgKind.E2eNotification,subtype:"encrypt",from:a,to:f};else if(e===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED)return{id:b,t:d("WATimeUtils").unixTime(),type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_account_type_changed_to_hosted",from:a,to:f}}return null}function b(a,b){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(!a.isUser())return null;var e=d("WAWebUserPrefsMeUser").getMeUser();b=new(c("WAWebMsgKey"))({fromMe:b.equals(e),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:b,t:d("WATimeUtils").unixTime(),type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_me_account_type_is_hosted",from:a,to:e}}return null}function e(a,b){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(!a.isUser())return null;var e=d("WAWebUserPrefsMeUser").getMeUser();b=new(c("WAWebMsgKey"))({fromMe:b.equals(e),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:b,t:d("WATimeUtils").unixTime(),type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_account_type_is_hosted",from:a,to:e}}return null}function f(a,b){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&d("WAWebBizCoexGatingUtils").smbHostedLazySystemMsgInsertInHistorySyncEnabled()&&a.isUser()){var e=d("WAWebUserPrefsMeUser").getMeUser();b=new(c("WAWebMsgKey"))({fromMe:b.equals(e),remote:a,id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:b,t:d("WATimeUtils").unixTime(),type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_me_account_type_is_hosted_transition",from:a,to:e}}return null}g.genAdvAccountTypeChangeNotificationMsg=a;g.genAdvMeAccountIsHostedNotificationMsg=b;g.genAdvAccountTypeInitialSysMsg=e;g.genAdvAccountTypeSelfTransitionToCoexNotificationMsg=f}),98);
__d("WAWebAdvDeviceNotificationApi",["Promise","WALogger","WAWebAdvHostedAccountTypeSystemMsg","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebProtobufsAdv.pb","WAWebSchemaChat","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["get chats failed during generateAdvAccountTypeChangeNotifications"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["accountTypeChangeNotification: check coex cache for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["SMB unexpected self adv system msg"]);k=function(){return a};return a}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={notifications:[],chatIds:[]};if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var f=[];if(a.equals(d("WAWebUserPrefsMeUser").getMeUser()))d("WALogger").ERROR(k()).tags("generateAdvAccountTypeChangeNotifications");else{b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(j(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").assertThrowsWidAdvTypeFromVerificationCache(a));try{var g=(yield d("WAWebSchemaChat").getChatTable().get(String(a),!1));g&&f.push(d("WAWebWidFactory").createWid(g.id))}catch(a){d("WALogger").DEV(i()).verbose().devConsole(a);throw c("err")("get chays failed")}}g=f.map(function(c){return d("WAWebAdvHostedAccountTypeSystemMsg").genAdvAccountTypeChangeNotificationMsg(c,a,b)}).filter(Boolean);e.notifications=g;e.chatIds=f.map(String);return e}return e});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())throw c("err")("hosted system msg gen: unexpected env");var e=[],f=new Set();a=(yield (h||(h=b("Promise"))).all(a.map(function(a){var c=a.wid;a=a.newAdvAccountType;return a!=null?l(c,a):(h||(h=b("Promise"))).resolve(null)})));a.forEach(function(a){a&&(e=e.concat(a.notifications),a.chatIds.forEach(function(a){return f.add(a)}))});return e.length>0?{notifications:e,chatIds:Array.from(f)}:{notifications:[],chatIds:[]}});return n.apply(this,arguments)}g.bulkGenerateDeviceAndAdvAccountTypeChangeNotifications=a}),98);
__d("WAWebApiGetDeviceUpdateLock",["WAWebBizCoexGatingUtils","WAWebModelStorageUtils"],(function(a,b,c,d,e,f,g){function a(a,b,c,e){c===void 0&&(c=!1);e===void 0&&(e=!1);var f=["participant","device-list"];b&&(f=[].concat(f,["message","message-association"]));c&&(f=[].concat(f,["missing-keys"]));d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(e&&(f=[].concat(f,["contact"])));return d("WAWebModelStorageUtils").getStorage().lock(f,function(){return a()})}g.getDeviceUpdateLock=a}),98);
__d("WAWebIdentityUpdateDeviceTableApi",["Promise","WAJids","WALogger","WASyncdStoreMissingKeys","WAWebAdvDeviceNotificationApi","WAWebAdvUpdateParticipantApi","WAWebApiContact","WAWebApiDeviceList","WAWebApiGetDeviceUpdateLock","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebBizCoexUtils","WAWebDBEncryptMultipleMsgs","WAWebDBStoreEncryptedMsgs","WAWebDeviceListPk","WAWebGetMessageCache","WAWebProtobufsAdv.pb","WAWebSignalSessionApi","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDevicesNotification: failed to clean the signal info for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: updateMissingKeyDevices failed with error:\n        ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkCreateOrReplace into device list table failed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkApplyDeviceUpdates: check coex cache for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["remove from device list table failed"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearDeviceRecord: check coex cache for ",""]);n=function(){return a};return a}function o(a,b){if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){if(a==null)return b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED?b:null;switch(a){case d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED:return b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE?b:null;case d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE:return b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED?b:null}}if(b===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED)throw c("err")("Unexpected account type");return null}function a(a,b,c,d,e){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){f===void 0&&(f=!1);yield (h||(h=b("Promise"))).all(e.filter(function(a){return a.id!==d("WAJids").DEFAULT_DEVICE_ID}).map(function(b){return t(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(a.user,a.server,b.id))}));var j=[],k=e.map(function(a){return a.id}).filter(function(a){return a!==d("WAJids").DEFAULT_DEVICE_ID}),l=o(g,i);d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&l===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(n(),a==null?void 0:a.toLogString()),d("WAWebBizCoexHostedAddVerification").assertThrowsWidAdvTypeFromVerificationCache(a),yield d("WAWebUserPrefsMultiDevice").setHaveProcessedCoexAdv());e=(yield r([{wid:a,added:j,removed:k,isNewRecord:!1,newAdvAccountType:l}],f,l!=null));var p=e.encryptedNotifications,q=e.chatIds;yield d("WAWebApiGetDeviceUpdateLock").getDeviceUpdateLock(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=p.length>0?d("WAWebDBStoreEncryptedMsgs").storeEncryptedDBMessages(p,[],q,!1):(h||(h=b("Promise"))).resolve(),f=d("WAWebAdvUpdateParticipantApi").updateGroupParticipantsInTransaction(a,j,k),g={id:d("WAWebDeviceListPk").createDeviceListPK(a),deleted:!0};d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&l===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(g.deletedChangedToHost=!0);g=d("WAWebApiDeviceList").createOrReplaceDeviceRecord(g)["catch"](function(a){d("WALogger").ERROR(m()).verbose().devConsole(a).sendLogs("remove from device list table failed when clearing device record");throw c("err")("remove from device list table failed")});var i=(h||(h=b("Promise"))).resolve();d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(l!=null&&(i=d("WAWebApiContact").updateContactAdvHostedType(a,l)));yield h.all([e,f,g,i])}),p.length>0,!1,l!=null);d("WAWebBizCoexUtils").sendWamCoexPrivacySysMsgInsertSuccess(p)});return p.apply(this,arguments)}function e(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e===void 0&&(e=!1);f===void 0&&(f=!1);var g=[],i=[],m=!1,n=!1,p=!1;a.forEach(function(a){var b=a.wid,e=a.update;a=a.currentRecord;var f=e.devices;f=f.map(function(a){return a.id});var h=a&&!a.deleted?a.devices.map(function(a){return a.id}):[],j=c("lodash").difference(f,h).filter(function(a){return a!==d("WAJids").DEFAULT_DEVICE_ID});h=c("lodash").difference(h,f).filter(function(a){return a!==d("WAJids").DEFAULT_DEVICE_ID});f=a==null;a=d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?o(a==null?void 0:a.advAccountType,e==null?void 0:e.advAccountType):null;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&a===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(d("WALogger").LOG(l(),b==null?void 0:b.toLogString()),d("WAWebBizCoexHostedAddVerification").assertThrowsWidAdvTypeFromVerificationCache(b));d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(a!=null&&(n=!0),a===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(p=!0));g.push({wid:b,added:j,removed:h,isNewRecord:f,newAdvAccountType:a});h.forEach(function(a){i.push(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,b.server,a))});d("WAWebDeviceListPk").createDeviceListPK(b)===d("WAWebDeviceListPk").createDeviceListPK(d("WAWebUserPrefsMeUser").getMeUser())&&h.length>0&&(m=!0)});d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&p===!0&&(yield d("WAWebUserPrefsMultiDevice").setHaveProcessedCoexAdv());e=(yield r(g,e,(e||f)&&n));var q=e.encryptedNotifications,s=e.chatIds;(h||(h=b("Promise"))).all(i.map(function(a){return t(a)}));var u=d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(q==null?void 0:q.length)>0;yield d("WAWebApiGetDeviceUpdateLock").getDeviceUpdateLock(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=q.length>0?d("WAWebDBStoreEncryptedMsgs").storeEncryptedDBMessages(q,[],s,!1):(h||(h=b("Promise"))).resolve(),f=d("WAWebAdvUpdateParticipantApi").bulkUpdateGroupParticipantsInTransaction(g),i=d("WAWebApiDeviceList").bulkCreateOrReplaceDeviceRecord(a.map(function(a){return a.update}))["catch"](function(a){d("WALogger").ERROR(k()).verbose().devConsole(a).sendLogs("bulkCreateOrReplace into device list table failed when applying device update");throw c("err")("bulkCreateOrReplace into device list table failed")}),l=m?i.then(function(){return d("WASyncdStoreMissingKeys").updateMissingKeyDevices()["catch"](function(a){d("WALogger").WARN(j(),a)})}):(h||(h=b("Promise"))).resolve(),n=[];d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&u&&g.forEach(function(a){var b=a.wid;a=a.newAdvAccountType;a!=null&&n.push(d("WAWebApiContact").updateContactAdvHostedType(b,a))});yield (h||(h=b("Promise"))).all([e,f,i,l].concat(n))}),q.length>0,m,u);d("WAWebBizCoexUtils").sendWamCoexPrivacySysMsgInsertSuccess(q)});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=!1);c=d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&c;a=c===!0?yield d("WAWebAdvDeviceNotificationApi").bulkGenerateDeviceAndAdvAccountTypeChangeNotifications(a):{notifications:[],chatIds:[]};var e=a.notifications;a=a.chatIds;c=c&&e.some(function(a){return d("WAWebBizCoexUtils").isCoexSystemMsgType(a.subtype)});if(!b||c){b=(yield d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(e));v(e);return{chatIds:a,encryptedNotifications:b}}d("WAWebGetMessageCache").getMessageCache().addMessages(e.map(function(a){return{msg:a}}),!1);return{chatIds:[],encryptedNotifications:[]}});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield (h||(h=b("Promise"))).all([d("WAWebSignalSessionApi").deleteRemoteInfo(a),d("WAWebSignalSessionApi").deleteDeviceSenderKey(a)])}catch(b){d("WALogger").LOG(i(),a.user)}});return u.apply(this,arguments)}function v(a){return(h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:a.from,msgObjs:[babelHelpers["extends"]({},a,{recvFresh:!0,isNewMsg:!0})],meta:{add:"after",isHistory:!1},processMessagesOrigin:"updateDeviceTableApi"})}))}g.clearDeviceRecord=a;g.bulkApplyDeviceUpdate=e}),98);
__d("WAWebWamEnumPushNotificationInteractions",[],(function(a,b,c,d,e,f){a=Object.freeze({SHOWN:1,CLICKED:2});f.PUSH_NOTIFICATION_INTERACTIONS=a}),66);
__d("WAWebWamEnumWebNotificationSettingType",[],(function(a,b,c,d,e,f){a=Object.freeze({ALLOWED:1,BLOCKED:2,UNKNOWN:3});f.WEB_NOTIFICATION_SETTING_TYPE=a}),66);
__d("WAWebWamEnumOffboardSources",[],(function(a,b,c,d,e,f){a=Object.freeze({IN_APP_SETTING:1,OS_SETTING:2});f.OFFBOARD_SOURCES=a}),66);
__d("WAWebWamEnumOnboardSources",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:1,BACKGROUND_SYNC_BUTTERBAR:2,WEB_NOTIFICATION_BUTTERBAR:3,IN_APP_SETTING:4,AUTO_ENABLE:5});f.ONBOARD_SOURCES=a}),66);
__d("WAWebWebcBackgroundSyncAdoptionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumOffboardSources","WAWebWamEnumOnboardSources","WAWebWamEnumPushNotificationInteractions","WAWebWamEnumWebNotificationSettingType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcBackgroundSyncAdoption:[5302,{offboardSource:[1,d("WAWebWamEnumOffboardSources").OFFBOARD_SOURCES],onboardSource:[2,d("WAWebWamEnumOnboardSources").ONBOARD_SOURCES],pushNotificationInteraction:[3,d("WAWebWamEnumPushNotificationInteractions").PUSH_NOTIFICATION_INTERACTIONS],webOsNotificationSetting:[4,d("WAWebWamEnumWebNotificationSettingType").WEB_NOTIFICATION_SETTING_TYPE]},[1,1,1],"regular"]},{WebcBackgroundSyncAdoption:[]});g.WebcBackgroundSyncAdoptionWamEvent=a}),98);
__d("WAWebBackgroundSyncReporter",["WAWebUserPrefsGeneral","WAWebWamEnumPushNotificationInteractions","WAWebWamEnumWebNotificationSettingType","WAWebWebcBackgroundSyncAdoptionWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=(yield d("WAWebUserPrefsGeneral").getOfflineNotificationEngagement());a=((a=b==null?void 0:b.totalNotifShown)!=null?a:0)>0;b=((b=b==null?void 0:b.totalNotifTapToOpen)!=null?b:0)>0;b?h=d("WAWebWamEnumPushNotificationInteractions").PUSH_NOTIFICATION_INTERACTIONS.CLICKED:a&&(h=d("WAWebWamEnumPushNotificationInteractions").PUSH_NOTIFICATION_INTERACTIONS.SHOWN)});return i.apply(this,arguments)}function c(a){var b,c=a.offboardSource;a=a.onboardSource;var e=d("WAWebWamEnumWebNotificationSettingType").WEB_NOTIFICATION_SETTING_TYPE.UNKNOWN;((b=window.Notification)==null?void 0:b.permission)==="granted"?e=d("WAWebWamEnumWebNotificationSettingType").WEB_NOTIFICATION_SETTING_TYPE.ALLOWED:((b=window.Notification)==null?void 0:b.permission)==="denied"&&(e=d("WAWebWamEnumWebNotificationSettingType").WEB_NOTIFICATION_SETTING_TYPE.BLOCKED);b=new(d("WAWebWebcBackgroundSyncAdoptionWamEvent").WebcBackgroundSyncAdoptionWamEvent)();b.set({offboardSource:c,onboardSource:a,pushNotificationInteraction:h,webOsNotificationSetting:e});b.commit()}g.setPushNotificationInteractionStatus=a;g.logBackgroundSyncAdoptionEvent=c}),98);
__d("WAWebNotificationConstants",[],(function(a,b,c,d,e,f){a="granted";b="default";c="denied";f.PERMISSION_ALLOWED=a;f.PERMISSION_DEFAULT=b;f.PERMISSION_DENIED=c}),66);
__d("WAWebUserPrefsNotifications",["WATimeUtils","WAWebBackgroundSyncReporter","WAWebNotificationConstants","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamEnumOnboardSources","cr:5151"],(function(a,b,c,d,e,f,g){function a(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_SOUNDS)!==!0}function e(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_SOUNDS,!a)}function f(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_CALL_RINGTONE)!==!0}function h(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_CALL_RINGTONE,!a)}function i(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_NOTIFICATIONS);if(typeof a!=="boolean"){var b;return((b=window.Notification)==null?void 0:b.permission)===d("WAWebNotificationConstants").PERMISSION_ALLOWED}return!a}function j(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_NOTIFICATIONS,!a)}function k(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED);if(typeof a!=="boolean"){var b;b=((b=window.Notification)==null?void 0:b.permission)===d("WAWebNotificationConstants").PERMISSION_ALLOWED;b&&d("WAWebBackgroundSyncReporter").logBackgroundSyncAdoptionEvent({offboardSource:null,onboardSource:d("WAWebWamEnumOnboardSources").ONBOARD_SOURCES.DEFAULT});return b}return a}function l(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED,a)}function m(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.SECURITY_NOTIFICATIONS)!==!0}function n(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.SECURITY_NOTIFICATIONS,!a)}var o={isDismissed:!1,firstSeenTime:null};function p(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.WEB_NOTIFICATIONS_BB_STATUS);if(a==null)return o;if(typeof a!=="object"||a instanceof Array)return o;a={isDismissed:a.isDismissed===!0,firstSeenTime:typeof a.firstSeenTime==="number"?d("WATimeUtils").castToUnixTime(a.firstSeenTime):null};return a}function q(a){var b,e=p();e=e.firstSeenTime;e=e===void 0?null:e;b=(b=a.firstSeenTime)!=null?b:e;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.WEB_NOTIFICATIONS_BB_STATUS,{isDismissed:a.isDismissed,firstSeenTime:b})}var r={isDismissed:!1,firstSeenTime:null,isLongResumeTime:!1};function s(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.OFFLINE_NOTIFICATIONS_BB_STATUS);if(a==null||typeof a!=="object"||a instanceof Array)return r;a={isDismissed:a.isDismissed===!0,firstSeenTime:typeof a.firstSeenTime==="number"?d("WATimeUtils").castToUnixTime(a.firstSeenTime):null,isLongResumeTime:a.isLongResumeTime===!0};return a}function t(a){var b,e=s(),f=e.isDismissed;f=f===void 0?!1:f;var g=e.firstSeenTime;g=g===void 0?null:g;e=e.isLongResumeTime;e=e===void 0?!1:e;b=(b=a.isDismissed)!=null?b:f;f=(f=a.firstSeenTime)!=null?f:g;a=(g=a.isLongResumeTime)!=null?g:e;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.OFFLINE_NOTIFICATIONS_BB_STATUS,{isDismissed:b,firstSeenTime:f,isLongResumeTime:a})}function u(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_PREVIEWS)!==!0}function v(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_MUTE_PREVIEWS,!a)}function w(){return b("cr:5151")?c("WAWebUserPrefsStore").getUser(b("cr:5151").IGNORE_NONDIRECT_GROUP_MSG)===!0:!1}function x(a){b("cr:5151")&&c("WAWebUserPrefsStore").setUser(b("cr:5151").IGNORE_NONDIRECT_GROUP_MSG,a)}function y(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.OUTGOING_MESSAGE_SOUND)===!0}function z(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.OUTGOING_MESSAGE_SOUND,a)}function A(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_COLLAPSE_MUTED)===!0}function B(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_COLLAPSE_MUTED,a)}function C(){return c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED_ONCE)===!0}function D(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED_ONCE,!0)}g.getGlobalSounds=a;g.setGlobalSounds=e;g.getGlobalCallRingtone=f;g.setGlobalCallRingtone=h;g.getGlobalNotifications=i;g.setGlobalNotifications=j;g.getGlobalOfflineNotifications=k;g.setGlobalOfflineNotifications=l;g.getGlobalSecurityNotifications=m;g.setGlobalSecurityNotifications=n;g.DEFAULT_NOTIFICATION_BB_STATUS=o;g.getWebNotificationsBBStatus=p;g.setWebNotificationsBBStatus=q;g.DEFAULT_OFFLINE_NOTIFICATION_BB_STATUS=r;g.getOfflineNotificationsBBStatus=s;g.setOfflineNotificationsBBStatus=t;g.getGlobalPreviews=u;g.setGlobalPreviews=v;g.getIgnoreNondirectGroupMsg=w;g.setIgnoreNondirectGroupMsg=x;g.getOutgoingMessageSound=y;g.setOutgoingMessageSound=z;g.getCollapseMuted=A;g.setCollapseMuted=B;g.getOfflineNotificationsEnabledOnce=C;g.setOfflineNotificationsEnabledOnce=D}),98);
__d("WAWebSecurityCodeApi",["WALogger","WAWebApiContact","WAWebBackendApi","WAWebContactSystemMsg","WAWebDBEncryptMultipleMsgs","WAWebDBStoreEncryptedMsgs","WAWebGetMessageCache","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebSchemaParticipant","WAWebSingleSignalSession","WAWebUserPrefsNotifications","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["get chats failed"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(a.isBot())return;var c=null;a.isLid()&&d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()&&(c=d("WAWebApiContact").getPnIfLidIsLatestMapping(d("WAWebWidFactory").toUserWid(a)));a=(yield j(a,c));c=a.notifications;var e=a.chatIds;if(c.length===0)return;if(!b){c=c.map(function(a){return babelHelpers["extends"]({},a,{recvFresh:!0,isNewMsg:!0})});for(b of c)d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:b.from,msgObjs:[b],meta:{add:"after",isHistory:!1},processMessagesOrigin:"securityCodeApi"});b=(yield d("WAWebDBEncryptMultipleMsgs").encryptMultipleDBMsgs(c));yield d("WAWebDBStoreEncryptedMsgs").storeEncryptedDBMessages(b,[],e,!1);return a}d("WAWebGetMessageCache").getMessageCache().addMessages(c.map(function(a){return{msg:a}}),!1);return a});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={notifications:[],chatIds:[]};b=b==null?[a]:[a,b];if(!d("WAWebUserPrefsNotifications").getGlobalSecurityNotifications())return e;var f=[];try{var g=(yield d("WAWebSchemaChat").getChatTable().bulkGet(b.map(function(a){return a.toString()}),!1)).filter(Boolean);f.push.apply(f,g.map(function(a){return d("WAWebWidFactory").createWid(a.id)}));g=(yield d("WAWebSchemaParticipant").getParticipantTable().anyOf(["participants"],b.map(String)));var i=new Map();if(g.length>0){b=g.map(function(a){return a.groupId});(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkGet(b)).forEach(function(a){a!=null&&i.set(a.id,a)})}g.forEach(function(b){var c=i.get(b.groupId);if(Boolean(c==null?void 0:c.defaultSubgroup)===!0&&a.isLid())return;f.push(d("WAWebWidFactory").createWid(b.groupId))})}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("get chats failed when creating device notification");throw c("err")("get chats failed")}b=f.map(function(b){return d("WAWebContactSystemMsg").genSecurityCodeNotificationMsg(b,a)});e.notifications=b;e.chatIds=f.map(String);return e});return k.apply(this,arguments)}g.addSecurityCodeChangedNotifications=a;g.generateSecurityCodeChangedNotifications=j}),98);
__d("WAWebDeviceSentMessageProtoUtils",[],(function(a,b,c,d,e,f){function a(a,b){var c={deviceSentMessage:{destinationJid:b.toString({legacy:!0}),message:a}},d=a==null?void 0:a.messageContextInfo;return d==null?c:{messageContextInfo:babelHelpers["extends"]({},d),deviceSentMessage:{destinationJid:b.toString({legacy:!0}),message:babelHelpers["extends"]({},a,{messageContextInfo:void 0})}}}function b(a){var b,c;b=a==null?void 0:(b=a.deviceSentMessage)==null?void 0:b.message;a=a==null?void 0:(a=a.messageContextInfo)==null?void 0:a.messageSecret;return b==null||a==null||((c=b.messageContextInfo)==null?void 0:c.messageSecret)!=null?b:babelHelpers["extends"]({},b,{messageContextInfo:babelHelpers["extends"]({},b.messageContextInfo,{messageSecret:a})})}f.wrapDeviceSentMessage=a;f.unwrapDeviceSentMessage=b}),66);
__d("WAWebProtobufsEphemeral.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={duration:[1,d("WAProtoConst").TYPES.SFIXED32],timestamp:[2,d("WAProtoConst").TYPES.SFIXED64]};g.EphemeralSettingSpec=a}),98);
__d("WAWebEphemeralDecodeBroadcastSetting",["WABase64","WABinary","WATimeUtils","WAWebProtobufsEphemeral.pb","asyncToGeneratorRuntime","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h=new Uint8Array(32);function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield self.crypto.subtle.importKey("raw",a,"HKDF",!1,["deriveKey"]));b=(yield self.crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:h,info:b},a,{name:"HMAC",hash:"SHA-256"},!0,["verify"]));return self.crypto.subtle.exportKey("raw",b)});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=a.slice(0,12);a=a.slice(12,44);a=(yield self.crypto.subtle.importKey("raw",a,"AES-GCM",!1,["decrypt"]));return self.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(d),additionalData:c},a,b)});return l.apply(this,arguments)}function a(a,b,c,d,e){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){a=a.toString({legacy:!0});b=b.toString({legacy:!0});e=e.toString({legacy:!0});b="Ephemeral "+b+" "+a;a=d("WABinary").Binary.build(b).readByteArray();b=new Uint8Array(g);g=d("WABase64").decodeB64(f);f=d("WABinary").Binary.build(e).readBuffer();e=(yield i(b,a));b=(yield k(e,g,f));a=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsEphemeral.pb").EphemeralSettingSpec,b);e=a.duration;g=a.timestamp;if(e==null||g==null)throw c("err")("ephSetting decoded into malformed proto");return{ephemeralDuration:e,ephemeralSettingTimestamp:d("WATimeUtils").castLongIntToUnixTime(g)}});return m.apply(this,arguments)}g.decodeBroadcastEphemeralSetting=a}),98);
__d("WAWebFutureproofingEdit",["WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"message_edit",futureproofType:d("WAWebMsgType").MSG_TYPE.PROTOCOL,futureproofSubtype:"message_edit"})}g.futureproofEdit=a}),98);
__d("WAWebGroupMsgReceiveUtils",["WAWebGroupType","WAWebMessageEditGatingUtils","WAWebSchemaGroupMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(a.toString()));if(!a)return!1;a=d("WAWebGroupType").getGroupTypeFromGroupMetadata(a);return a===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?!d("WAWebMessageEditGatingUtils").receiveCagMsgEditEnabled():!1});return h.apply(this,arguments)}g.futureproofEditInCAG=a}),98);
__d("WAWebMsgProcessingApiUtils",["Promise","WAJids","WALogger","WANullthrows","WAWebABProps","WAWebAck","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebDeviceSentMessageProtoUtils","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebEphemeralDecodeBroadcastSetting","WAWebFutureproofingEdit","WAWebGroupMsgReceiveUtils","WAWebHandleMsgError","WAWebHandleMsgMetaUtils","WAWebHandleMsgTypes.flow","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebUserPrefsMeUser","WAWebWamEnumDeviceType","WAWebWamEnumDsmError","WAWebWamMsgUtils","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["drop: cannot create MsgKey: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["protocol message: wid error in type ",""]);j=function(){return a};return a}function k(a){var b,c="";((b=a.protocolMessage)==null?void 0:b.historySyncNotification)!=null?c="historySyncNotification":((b=a.protocolMessage)==null?void 0:b.initialSecurityNotificationSettingSync)!=null?c="initialSecurityNotificationSettingSync":((b=a.protocolMessage)==null?void 0:b.appStateSyncKeyRequest)!=null?c="appStateSyncKeyRequest":((b=a.protocolMessage)==null?void 0:b.appStateSyncKeyShare)!=null?c="appStateSyncKeyShare":((b=a.protocolMessage)==null?void 0:b.peerDataOperationRequestResponseMessage)!=null?c="peerDataOperationRequestResponseMessage":((b=a.protocolMessage)==null?void 0:b.peerDataOperationRequestMessage)!=null&&(c="peerDataOperationRequestMessage");d("WALogger").ERROR(j(),c).sendLogs("wid error")}function l(a){var b=a.info,e=a.msgProtobuf,f=a.paymentInfo,g=a.bizInfo;a=a.msgBotInfo;var h,i=G(b);if(!d("WAWebUserPrefsMeUser").isMeAccountNonLid(i)){k(e);return}if(((i=e.protocolMessage)==null?void 0:i.historySyncNotification)!=null){i=d("WAWebE2EProtoParser").parseMsgProto(e,A(b),"relay",f,void 0,void 0,g);B(i,a);h={history:c("WANullthrows")(i.historySyncMetaData)}}else if(((b=e.protocolMessage)==null?void 0:b.initialSecurityNotificationSettingSync)!=null){h={securityNotificationEnabled:{isEnabled:(f=e.protocolMessage.initialSecurityNotificationSettingSync.securityNotificationEnabled)!=null?f:!0}}}else if(((g=e.protocolMessage)==null?void 0:g.appStateSyncKeyShare)!=null)h={appStateSyncKeyShare:e.protocolMessage.appStateSyncKeyShare};else if(((a=e.protocolMessage)==null?void 0:a.appStateSyncKeyRequest)!=null)h={appStateSyncKeyRequest:e.protocolMessage.appStateSyncKeyRequest};else if(((i=e.protocolMessage)==null?void 0:i.peerDataOperationRequestResponseMessage)!=null){h={peerDataOperationRequestResponseMessage:(b=e.protocolMessage)==null?void 0:b.peerDataOperationRequestResponseMessage}}else if(((f=e.protocolMessage)==null?void 0:f.peerDataOperationRequestMessage)!=null){h={peerDataOperationRequestMessage:(g=e.protocolMessage)==null?void 0:g.peerDataOperationRequestMessage}}return h}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.msgProtobuf,f=a.info;if(((b=e.protocolMessage)==null?void 0:b.historySyncNotification)!=null||((b=e.protocolMessage)==null?void 0:b.initialSecurityNotificationSettingSync)!=null||((b=e.protocolMessage)==null?void 0:b.appStateSyncKeyShare)!=null||((b=e.protocolMessage)==null?void 0:b.appStateSyncKeyRequest)!=null||((b=e.protocolMessage)==null?void 0:b.peerDataOperationRequestResponseMessage)!=null||((b=e.protocolMessage)==null?void 0:b.peerDataOperationRequestMessage)!=null)return l({info:f,msgProtobuf:e,paymentInfo:a.paymentInfo,bizInfo:a.bizInfo,hsmInfo:a.hsmInfo});switch(f.type){case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT:return d("WAWebUserPrefsMeUser").isMeAccount(f.author)?p(a):t(a);case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP:return d("WAWebUserPrefsMeUser").isMeAccount(f.author)&&f.isDirect?p(a):t(a);case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST:if(a.ciphertextType===d("WAWebBackendJobs.flow").CiphertextType.Skmsg){if(!f.bclHashValidated)throw c("err")("parseMessage: participants for peer broadcast message is not validated");return t(a)}return r(a);case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST:return t(a);case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS:return f.isDirect===!0?n(a):r(a);case d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS:return t(a);default:throw c("err")("Unrecognized MESSAGE_TYPE")}});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{return yield p(a)}catch(c){if(c instanceof d("WAWebHandleMsgError").DeviceSentMessageError){var b=Object.keys(a.msgProtobuf).filter(function(a){return a!=="$$unknownFieldCount"&&a!=="messageContextInfo"});if(b.length===1&&b[0]==="senderKeyDistributionMessage")return t(a)}throw c}});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgProtobuf;a=babelHelpers.objectWithoutPropertiesLoose(a,["msgProtobuf"]);var c=b.deviceSentMessage;if(c==null)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(F(a.info.author),d("WAWebWamEnumDsmError").DSM_ERROR.MISSING_DSM);if(c.destinationJid==null)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(F(a.info.author),d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_DSM);c=c.destinationJid;b=(yield v(d("WAWebDeviceSentMessageProtoUtils").unwrapDeviceSentMessage(b),a));return babelHelpers["extends"]({deviceSent:{destination:d("WAWebWidFactory").createWid(c)}},b)});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgProtobuf;a=babelHelpers.objectWithoutPropertiesLoose(a,["msgProtobuf"]);var c=a.info,e=b.deviceSentMessage;if(e==null)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(F(c.author),d("WAWebWamEnumDsmError").DSM_ERROR.MISSING_DSM);if(e.phash==null)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(F(c.author),d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_DSM);e=e.phash;b=(yield v(d("WAWebDeviceSentMessageProtoUtils").unwrapDeviceSentMessage(b),a));return babelHelpers["extends"]({deviceSent:{phash:e,info:c}},b)});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgProtobuf;a=babelHelpers.objectWithoutPropertiesLoose(a,["msgProtobuf"]);if(b.deviceSentMessage!=null)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(F(a.info.author),d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_SENDER);b=(yield v(b,a));return babelHelpers["extends"]({deviceSent:null},b)});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e,f=b.info,g=b.paymentInfo,h=b.bizInfo,i=b.hidePlaceholder,j=b.processDecryptedProtoParams,k=b.hsmInfo;b=b.msgBotInfo;if(a==null)return{senderKey:null,storeMsg:null,renderableMsgs:[]};h=babelHelpers["extends"]({},d("WAWebE2EProtoParser").parseMsgProto(a,A(f),"relay",g,void 0,void 0,h,f.edit,j==null?void 0:j.rcat,j==null?void 0:(g=j.msgMeta)==null?void 0:g.bizSource,j==null?void 0:j.msgMeta));g=h;g=g.disappearingModeTrigger;e=(e=h.id.remote)!=null?e:h.from;if(e!=null&&c("WAWebWid").isGroup(e)&&g!=null&&d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")){g=(yield d("WAWebE2EProtoUtils").updateDisappearingModeForGroups(g,e));g!=null&&(h=babelHelpers["extends"]({},h,g))}B(h,b,j==null?void 0:(e=j.msgMeta)==null?void 0:e.targetSenderJid,j==null?void 0:(g=j.msgMeta)==null?void 0:g.targetId);k!=null&&(h.hsmTag=k.tag,h.hsmCategory=k.category);if((j==null?void 0:(b=j.msgMeta)==null?void 0:b.bizSource)!=null){h.bizSource=j==null?void 0:(e=j.msgMeta)==null?void 0:e.bizSource}g=a.senderKeyDistributionMessage!=null?x(f,a.senderKeyDistributionMessage):null;if(h.subtype==="message_edit"&&h.futureproofSubtype!=="message_edit"&&(yield d("WAWebGroupMsgReceiveUtils").futureproofEditInCAG(f.chat))){k=d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(h);h=babelHelpers["extends"]({},d("WAWebFutureproofingEdit").futureproofEdit(k))}b=h.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&g==null;e=h.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&g!=null;a=null;if(b&&j!=null){k=j.decrypted;j.reparsing;b=babelHelpers.objectWithoutPropertiesLoose(j,["decrypted","reparsing"]);h.futureproofParams=b;h.futureproofBuffer=k}f.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS&&(h.campaignId=f.campaignId,h.campaignDuration=f.campaignDuration);f.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST&&(h.broadcastId=f.chat,h.broadcastParticipants=f.bclParticipants,h.broadcastEphSettings=f.bclEphSettings,a=h);if(f.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST){h.broadcastId=f.chat;j=f.ephSetting;b=h.ephemeralSharedSecret;if(j!=null&&b!=null){k=(yield d("WAWebEphemeralDecodeBroadcastSetting").decodeBroadcastEphemeralSetting(f.chat,f.author.isLid()?c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()):d("WAWebUserPrefsMeUser").getMeUser(),f.author,j,b));j=k.ephemeralDuration;b=k.ephemeralSettingTimestamp;h.ephemeralDuration=j;h.ephemeralSettingTimestamp=b}}k=[];j=h.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN;b=e||j&&i===!0&&h.futureproofType==null;b||(f.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST?k=(yield C(h,f.bclParticipants,f.bclEphSettings)):(h.subtype==="payment_transaction_request_cancelled"||h.subtype==="payment_action_request_declined")&&h.paymentRequestMessageKey==null||(k=[h]));return{senderKey:g,storeMsg:a,renderableMsgs:k}});return w.apply(this,arguments)}function x(a,b){if(!a.chat.isGroup()&&!a.chat.isBroadcast())throw c("err")("should not have senderkey");var d=b.groupId;b=b.axolotlSenderKeyDistributionMessage;if(d==null||a.chat.toString({legacy:!0})!==d)throw c("err")("senderKeyDistributionMessage: from "+a.chat.toString()+" mismatched to "+(d||"null"));if(!b)throw c("err")("senderKeyDistributionMessage: from "+a.author.toString()+" has no content");return{groupId:d,key:b}}function y(a){if(a.edit===d("WAWebAck").EDIT_ATTR.SENDER_REVOKE&&a.type!==d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST)return!1;return a.edit===d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE?!1:!0}function e(a){var b=a.msgInfo,c=a.placeholderType,e=a.msgMeta;a=a.placeholderAddReason;if(!y(b))return null;var f=null;switch(c){case d("WAWebHandleMsgTypes.flow").PlaceholderType.E2E:f=void 0;break;case d("WAWebHandleMsgTypes.flow").PlaceholderType.BOT_UNAVAILABLE_FANOUT:f="bot_unavailable_fanout";break;case d("WAWebHandleMsgTypes.flow").PlaceholderType.HOSTED_UNAVAILABLE_FANOUT:f="hosted_unavailable_fanout";break;default:f="fanout"}c=d("WAWebHandleMsgMetaUtils").getMsgTypeFromMsgMeta(e);f=babelHelpers["extends"]({},A(b),{type:d("WAWebMsgType").MSG_TYPE.CIPHERTEXT,kind:d("WAWebMsgType").MsgKind.Ciphertext,subtype:f,e2eSenderType:d("WAWebWamMsgUtils").getWamE2eSenderType(b.author),placeholderAddReason:a,broadcastParticipants:b.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST?b.bclParticipants:void 0,broadcastEphSettings:b.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST?b.bclEphSettings:void 0});return c!=null?babelHelpers["extends"]({},f,{parentMsgKey:d("WAWebE2EProtoUtils").createMsgKeyFromThreadInfo(e,b,c),kind:d("WAWebMsgType").MsgKind.PlaceholderAddon,realType:c}):babelHelpers["extends"]({},f,{kind:d("WAWebMsgType").MsgKind.PlaceholderMessage})}function f(a,b){a=babelHelpers["extends"]({},A(a),{type:d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER,kind:d("WAWebMsgType").MsgKind.DebugPlaceholder,body:b.toString()});return a}function z(a,b){if(d("WAWebBotGating").isBotMsgParseEnabledForFutureproofOrFullRecv()&&b.botParticipant!=null)return b.botParticipant;if(!a.fromMe&&c("WAWebWid").isGroup(a.remote)||c("WAWebWid").isStatus(a.remote))return a.participant;return!d("WAWebUserPrefsMeUser").isMeDevice(b.author)&&d("WAWebUserPrefsMeUser").isMeAccount(b.author)?b.author:void 0}function A(a){var b=E(a),e=d("WAWebUserPrefsMeUser").getMeUser(),f=d("WAWebUserPrefsMeUser").getMaybeMeLidUser();b.fromMe&&c("WAWebWid").isGroup(b.remote)&&a.author.isLid()&&f!=null?f=f:f=e;f=b.fromMe?f:b.remote;f={id:b,from:f,to:b.fromMe?b.remote:e,type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,t:a.ts||0,ack:d("WAWebMsgKeyUtils").isNoteToSelf(b)?d("WAWebAck").ACK.READ:d("WAWebAck").ACK.SENT,author:z(b,a),notifyName:a.pushname||"",invis:!1,count:a.count};d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&a.hostedBizEncStateMismatch===!0&&((e=f.id)==null?void 0:(b=e.remote)==null?void 0:b.isUser())&&(f.hostedBizEncStateMismatch=!0);d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&a.senderOrRecipientAccountTypeHosted===!0&&((e=f.id)==null?void 0:(b=e.remote)==null?void 0:b.isUser())&&(f.senderOrRecipientAccountTypeHosted=!0);d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&a.placeholderCreatedWhenAccountIsHosted!=null&&((e=f.id)==null?void 0:(b=e.remote)==null?void 0:b.isUser())&&(f.placeholderCreatedWhenAccountIsHosted=a.placeholderCreatedWhenAccountIsHosted);return f}function B(a,b,c,e){if(b!=null&&d("WAWebBotGating").isBotMsgParseEnabledForFutureproofOrFullRecv()){a=a;Object.assign(a,{botEditTargetId:b.botEditTargetId,botEditType:b.botEditType,bizBotType:b.bizBotType,botTargetSenderJid:c,botMsgBodyType:b.botMsgBodyType,botResponseTargetId:e})}}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e=(yield (h||(h=b("Promise"))).all(e.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;try{e=new(c("WAWebMsgKey"))({remote:b,fromMe:!0,id:a.id.id})}catch(a){d("WALogger").WARN(i(),a.stack);return null}var g,h,j=f?f[b.toString()]:null,k=a.ephemeralSharedSecret,l=a.broadcastId;if(l!=null&&j!=null&&k!=null){l=(yield d("WAWebEphemeralDecodeBroadcastSetting").decodeBroadcastEphemeralSetting(l,b,b.isLid()?c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()):d("WAWebUserPrefsMeUser").getMeUser(),j,k));g=l.ephemeralDuration;h=l.ephemeralSettingTimestamp}j=babelHelpers["extends"]({},a,{id:e,from:d("WAWebUserPrefsMeUser").getMeUser(),to:b,broadcast:!0,ephemeralDuration:g,ephemeralSettingTimestamp:h,protocolMessageKey:a.protocolMessageKey==null?void 0:new(c("WAWebMsgKey"))({remote:b,fromMe:!0,id:a.protocolMessageKey.id})});return j});return function(a){return e.apply(this,arguments)}}())));return e.filter(Boolean)});return D.apply(this,arguments)}function E(a){if(a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST)return new(c("WAWebMsgKey"))({remote:d("WAWebWidFactory").toUserWid(a.author),fromMe:!1,id:a.externalId});else if(a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT)return d("WAWebBotGating").isBotMsgParseEnabledForFutureproofOrFullRecv()&&a.botParticipant!=null?new(c("WAWebMsgKey"))({remote:a.chat,fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a.author),id:a.externalId,participant:d("WAWebWidFactory").toUserWid(c("WANullthrows")(a.botParticipant))}):new(c("WAWebMsgKey"))({remote:a.chat,fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a.author),id:a.externalId});return new(c("WAWebMsgKey"))({remote:a.chat,fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a.author),participant:d("WAWebWidFactory").toUserWid(a.author),id:a.externalId})}function F(a){return a.device==null||a.device===d("WAJids").DEFAULT_DEVICE_ID?d("WAWebWamEnumDeviceType").DEVICE_TYPE.PRIMARY:d("WAWebWamEnumDeviceType").DEVICE_TYPE.COMPANION}function G(a){return a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?a.author:a.chat}g.parseProtocolMessage=l;g.parseMessage=a;g.isRevokeInfo=y;g.generatePlaceholder=e;g.genDebugPlaceholderMsg=f;g.generateBaseMsg=A;g.generateBclMsgs=C;g.messageInfoToKey=E;g.getDeviceType=F;g.getFrom=G}),98);
__d("WAWebWamEnumMessageDropReasonType",[],(function(a,b,c,d,e,f){a=Object.freeze({SYNCD_DELETION:1,ADMIN_REVOKE_NOT_ENABLED:2,RECEIVED_WITH_OLD_COUNTER:3,INVALID_STANZA:4,INVALID_PROTOBUF:5,MESSAGE_SECRET_ERROR:6,INVALID_LID_ADDRESSED_MESSAGE:7,UNKNOWN_MESSAGE_TYPE:8,DB_OPERATION_FAILED:9,INTERNAL_ERROR:10,EXPIRED:11,INVALID_HOSTED_COMPANION_STANZA:12,MESSAGE_REVOKED:13,PAYMENT_MESSAGE_REVOKED:14,DUPLICATE_MESSAGE:15,DUPLICATE_DELIVERY:16});f.MESSAGE_DROP_REASON_TYPE=a}),66);
__d("WAWebWamEnumRevokeType",[],(function(a,b,c,d,e,f){a=Object.freeze({SENDER:0,ADMIN:1});f.REVOKE_TYPE=a}),66);
__d("WAWebIncomingMessageDropWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eDeviceType","WAWebWamEnumE2eFailureReason","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageDropReasonType","WAWebWamEnumRevokeType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({IncomingMessageDrop:[3724,{agentEngagementType:[12,d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[14,d("WAWebWamEnumBotType").BOT_TYPE],e2eCiphertextType:[1,d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eDestination:[2,d("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[9,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eSenderType:[3,d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],invisibleMessageCategory:[13,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isLid:[15,a.TYPES.BOOLEAN],localAddressingMode:[16,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageDropReason:[4,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE],messageMediaType:[5,d("WAWebWamEnumMediaType").MEDIA_TYPE],offline:[6,a.TYPES.BOOLEAN],offlineCount:[11,a.TYPES.INTEGER],retryCount:[7,a.TYPES.INTEGER],revokeType:[8,d("WAWebWamEnumRevokeType").REVOKE_TYPE],typeOfGroup:[10,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{IncomingMessageDrop:[]});g.IncomingMessageDropWamEvent=b}),98);
__d("WAWebPostIncomingMessageDropMetric",["WADeprecatedWapParser","WAWebAck","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebDBMessageSerialization","WAWebHandleMsgCommon","WAWebIncomingMessageDropWamEvent","WAWebJidToWid","WAWebMsgGetters","WAWebMsgProcessingApiUtils","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumMessageDropReasonType","WAWebWamEnumRevokeType","WAWebWamMsgUtils"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("incomingMsgParserForMetric",function(a){var b={};try{b.type=a.attrEnum("type",d("WAWebHandleMsgCommon").STANZA_MSG_TYPES)}catch(a){}try{b.pollType=b.type===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll?a.child("meta").attrEnumOrNullIfUnknown("polltype",d("WAWebHandleMsgCommon").POLL_TYPES):null}catch(a){}try{var c;b.from=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from"));((c=b.from)==null?void 0:c.isUser())?b.author=b.from:((c=b.from)==null?void 0:c.isGroup())&&(b.author=a.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("participant")):null)}catch(a){}try{b.offline=a.attrInt("offline")}catch(a){}try{b.edit=a.attrInt("edit")}catch(a){}try{c=a.attrString("category");c=d("WAWebWamMsgUtils").getWamInvisibleMessageCatgoryType(c);c!=null&&(b.invisibleMessageCategoryType=c)}catch(a){}c=a.maybeChild("enc");if(c!=null){try{b.e2eType=c.attrEnumValues("type",d("WAWebBackendJobs.flow").CiphertextType.members())}catch(a){}try{b.encMediaType=d("WAWebBackendJobs.flow").EncMediaType.cast(c.maybeAttrString("mediatype"))}catch(a){}try{b.retryCount=c.attrInt("count")}catch(a){}}try{b.botType=d("WAWebWamEnumBotType").BOT_TYPE.UNKNOWN;if((c=b.author)==null?void 0:c.isBot())b.botType=d("WAWebWamEnumBotType").BOT_TYPE.METABOT;else{a=(c=a.maybeChild("bot"))==null?void 0:c.maybeAttrString("biz_bot");a==="1"?b.botType=d("WAWebWamEnumBotType").BOT_TYPE.BOT_1P_BIZ:a==="3"&&(b.botType=d("WAWebWamEnumBotType").BOT_TYPE.BOT_3P_BIZ)}}catch(a){}return b});function i(a){var b=a.messageDropReason;a=a.stanza;var c=null;try{c=h.parse(a).success}catch(a){}b=new(d("WAWebIncomingMessageDropWamEvent").IncomingMessageDropWamEvent)({messageDropReason:b,offline:((a=c)==null?void 0:a.offline)!=null,offlineCount:(b=c)==null?void 0:b.offline,messageMediaType:d("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:(a=c)==null?void 0:a.encMediaType,msgType:(b=c)==null?void 0:b.type,msgPollType:(a=c)==null?void 0:a.pollType})});if(((a=c)==null?void 0:a.from)!=null){a=d("WAWebBackendJobsCommon").getMetricE2eDestination(c.from);a!=null&&(b.e2eDestination=a)}if(((a=c)==null?void 0:a.author)!=null){a=d("WAWebWamMsgUtils").getWamE2eSenderType(c.author);a!=null&&(b.e2eSenderType=a)}((a=c)==null?void 0:a.e2eType)!=null&&(b.e2eCiphertextType=d("WAWebBackendJobsCommon").getMetricE2eCiphertextType(c.e2eType));((a=c)==null?void 0:a.retryCount)!=null&&(b.retryCount=c.retryCount);((a=c)==null?void 0:a.edit)===d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE?b.revokeType=d("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:((a=c)==null?void 0:a.edit)===d("WAWebAck").EDIT_ATTR.SENDER_REVOKE&&(b.revokeType=d("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER);if(((a=c)==null?void 0:a.from)!=null&&((a=c)==null?void 0:a.author)!=null){if(((a=c)==null?void 0:(a=a.author)==null?void 0:a.isBot())===!0){((a=c)==null?void 0:(a=a.from)==null?void 0:a.isBot())===!0?b.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:b.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED}}if((a=c)==null?void 0:a.botType){b.botType=(a=c)==null?void 0:a.botType}((a=c)==null?void 0:a.invisibleMessageCategoryType)!=null&&(b.invisibleMessageCategory=c.invisibleMessageCategoryType);b.commit()}function a(a){i({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INVALID_STANZA,stanza:a})}function b(a){i({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.UNKNOWN_MESSAGE_TYPE,stanza:a})}function e(a){i({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INTERNAL_ERROR,stanza:a})}function f(a){i({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.DB_OPERATION_FAILED,stanza:a})}function j(a){i({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INVALID_HOSTED_COMPANION_STANZA,stanza:a})}function k(a,b){var c=a.msgInfo,e=a.msgMeta,f=a.enc;a=a.error;b=new(d("WAWebIncomingMessageDropWamEvent").IncomingMessageDropWamEvent)({messageDropReason:b,e2eCiphertextType:d("WAWebBackendJobsCommon").getMetricE2eCiphertextType(f.e2eType),messageMediaType:d("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:f.encMediaType,msgType:e.type,msgPollType:e.pollType}),retryCount:f.retryCount,offline:c.offline!=null,e2eFailureReason:a==null?void 0:a.e2eFailureReason});e=d("WAWebMsgProcessingApiUtils").getFrom(c);f=d("WAWebBackendJobsCommon").getMetricE2eDestination(e);f!=null&&(b.e2eDestination=f);if(e){a=d("WAWebWamMsgUtils").getWamE2eSenderType(e);a!=null&&(b.e2eSenderType=a)}c.edit===d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE?b.revokeType=d("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:c.edit===d("WAWebAck").EDIT_ATTR.SENDER_REVOKE&&(b.revokeType=d("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER);f=d("WAWebWamMsgUtils").getWamInvisibleMessageCatgoryType(c.category);f!=null&&(b.invisibleMessageCategory=f);if(c.offline!=null){e=parseInt(c.offline,10);Number.isNaN(e)||(b.offlineCount=e)}b.commit()}function l(a){k(a,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.RECEIVED_WITH_OLD_COUNTER)}function m(a){k(a,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.DUPLICATE_MESSAGE)}function n(a){k(a,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INVALID_PROTOBUF)}function o(a){k(a,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INVALID_STANZA)}function p(a){k(a,d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.EXPIRED)}function q(a){for(var b=0;b<a.length;b++){var c=a[b];c=d("WAWebDBMessageSerialization").messageFromDbRow(c);var e=new(d("WAWebIncomingMessageDropWamEvent").IncomingMessageDropWamEvent)({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.DB_OPERATION_FAILED,messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(c)});c=d("WAWebMsgGetters").getFrom(c);c=d("WAWebBackendJobsCommon").getMetricE2eDestination(c);c!=null&&(e.e2eDestination=c);e.commit()}}g.postIncomingMessageDropInvalidStanza=a;g.postIncomingMessageDropUnknownMessageType=b;g.postIncomingMessageDropInternalError=e;g.postIncomingMessageDropDBOperationFailed=f;g.postIncomingMessageDropInvalidHostedCompanionStanza=j;g.postIncomingMessageDropOldCounter=l;g.postIncomingMessageDropDuplicateMessage=m;g.postIncomingMessageDropInvalidProtobuf=n;g.postIncomingMessageDropInvalidStanzaFromDecryptedMessageInfo=o;g.postIncomingMessageDropExpired=p;g.postIncomingMessageDropDBOperationFailedForMsgRows=q}),98);
__d("WAWebGetMessageCache",["WAWebMessageProcessorCache"],(function(a,b,c,d,e,f,g){var h=null;function a(){h==null&&(h=d("WAWebMessageProcessorCache").messageProcessorCache);return h}g.getMessageCache=a}),98);
__d("WAWebCommsSendPing",["WAComms","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAComms").sendPing()});return h.apply(this,arguments)}function c(a){d("WATimeUtils").setClockSkew(a)}g.blockSendPing=a;g.updateClockSkew=c}),98);
__d("WAWebOfflineResumePreAckHandler",["WABatcher","WADeprecatedSendIq","WALogger","WAWap","WAWebCommsWapMd","WAWebSchemaDanglingReceipt","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to send offline pre-ack for envelope: "," with error: ",""]);h=function(){return a};return a}var i=d("WAWap").S_WHATSAPP_NET.toString(),j=d("WAWap").G_US.toString();function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c,d,e=a.attrs["class"].toString();if(e!=="notification"&&e!=="receipt")return;var f=a.attrs.id.toString(),g=a.tag,h=a.attrs.to.toString();b=(b=a.attrs.participant)==null?void 0:b.toString();c=(c=a.attrs.type)==null?void 0:c.toString();a=((d=a.attrs)==null?void 0:d.error)?parseInt((d=a.attrs)==null?void 0:d.error.toString(),10):void 0;void n({ackClass:e,ackId:f,to:h,tag:g,participant:b,type:c,error:a})});return k.apply(this,arguments)}function l(a){switch(a){case j:return d("WAWap").G_US;case i:return d("WAWap").S_WHATSAPP_NET;default:return d("WAWebCommsWapMd").JID(d("WAWebWidFactory").createWidFromWidLike(a))}}function c(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b;b=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.ackId),"class":a.ackClass,to:l(a.to),type:(b=a.type)!=null?b:d("WAWap").DROP_ATTR,participant:a.participant!=null?d("WAWebCommsWapMd").DEVICE_JID(d("WAWebWidFactory").createWid(a.participant)):d("WAWap").DROP_ATTR,error:a.error!=null?d("WAWap").INT(a.error):d("WAWap").DROP_ATTR});return d("WADeprecatedSendIq").deprecatedCastStanza(b,{preAck:!0})}catch(b){d("WALogger").ERROR(h(),a.ackClass,b).sendLogs("offline-pre-ack")}});return m.apply(this,arguments)}var n=function(){return d("WABatcher").batch({delayMs:3e3,maxSize:400},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaDanglingReceipt").getTable().create({receipts:[],acks:a});return[]});return function(b){return a.apply(this,arguments)}}())}();g.parseAndSerializeOfflinePreAck=a;g.sendOfflinePreAck=c}),98);
__d("WAWebGetAllModelStorageTableNames",[],(function(a,b,c,d,e,f){a=["abpropConfigs","abprop-event-sampling-configs","active-message-ranges","agent","blocklist","bot-profile","business-profile","cart","chat","chat-assignment","chat-thread-logging-pending-events","collection-version","comments","contact","ctwa-suggestion","device-list","direct-connection-keys","encrypted-mutations","favorite-stickers","fts-indexing-queue","group-invite-v4","group-metadata","history-sync-notification","in-app-banner","inactive-receipt","label","label-association","lid-chat-state","lid-display-name-mapping","lid-pn-mapping","message","message-history","message-info","message-orphans","missing-keys","newsletter-metadata","newsletter-my-votes","newsletter-polls-votes","newsletter-reactions","non-message-data-request","orphan-payment-notification","orphan-receipt","orphan-revoke","orphan-tc-token","participant","payment-backgrounds","peer-message","pending-membership-approval-request","pending-mutations","pinned-messages","poll-votes","premium-message","privacy-disallowed-list","profile-pic-thumb","quick-promotions","quick-reply","reactions","recent-stickers","reporting-token","self-addon-message-type","sticker-download","subgroup-suggestion","subgroup-suggestion-v2","subscription","sync-actions","sync-keys","syncd-logs","tasks-scheduled-time","unjoined-subgroup-metadata","user-prefs","verified-business-name"];f.allModelStorageTableNames=a}),66);
__d("WAWebWamEnumOfflineResumeModes",[],(function(a,b,c,d,e,f){a=Object.freeze({RESUME_FROM_RESTART:1,RESUME_FROM_OPEN_TAB:2,UNKNOWN:3,CONNECT_REASON_USER:4,CONNECT_REASON_PUSH:5,CONNECT_REASON_BACKOFF:6});f.OFFLINE_RESUME_MODES=a}),66);
__d("WAWebWamEnumOfflineResumeStages",[],(function(a,b,c,d,e,f){a=Object.freeze({PAGE_LOAD:1,SOCKET_CONNECT:2,PROCESS_COMPLETE:3,SCREEN_LOAD:4,OFFLINE_PREVIEW:5,OFFLINE_COMPLETE_RECEIVED:6,PREACKS_SENT:7});f.OFFLINE_RESUME_STAGES=a}),66);
__d("WAWebOfflineResumeStageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumOfflineResumeModes","WAWebWamEnumOfflineResumeStages"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({OfflineResumeStage:[3536,{attemptId:[13,a.TYPES.INTEGER],chatThreadCount:[4,a.TYPES.INTEGER],currentOfflineStage:[1,d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES],isResumeInForeground:[5,a.TYPES.BOOLEAN],isResumeStartedInForeground:[14,a.TYPES.BOOLEAN],lastPushTimestampMs:[12,a.TYPES.INTEGER],mailboxAge:[6,a.TYPES.INTEGER],offlineCallCount:[15,a.TYPES.INTEGER],offlineDecryptErrorCount:[7,a.TYPES.INTEGER],offlineMessageCount:[8,a.TYPES.INTEGER],offlineNotificationCount:[9,a.TYPES.INTEGER],offlineReceiptCount:[10,a.TYPES.INTEGER],offlineResumeMode:[11,d("WAWebWamEnumOfflineResumeModes").OFFLINE_RESUME_MODES],offlineSessionId:[2,a.TYPES.STRING],offlineSizeBytes:[16,a.TYPES.INTEGER],offlineStageTimestampMs:[3,a.TYPES.INTEGER],passiveModeT:[17,a.TYPES.TIMER]},[1,1,1],"regular"]},{OfflineResumeStage:[]});g.OfflineResumeStageWamEvent=b}),98);
__d("WAWebWamEnumOfflineResumeResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({COMPLETE:1,INCOMPLETE_UNKNOWN_ERROR:2,INCOMPLETE_DISCONNECT:3,INCOMPLETE_APP_RESTART:4});f.OFFLINE_RESUME_RESULT_TYPE=a}),66);
__d("WAWebOfflineResumeWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumOfflineResumeResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({OfflineResume:[3112,{affectedBySleepMode:[35,a.TYPES.BOOLEAN],attemptNumber:[36,a.TYPES.INTEGER],chatThreadCount:[1,a.TYPES.INTEGER],dbDurationT:[39,a.TYPES.TIMER],dbMainThreadDurationT:[40,a.TYPES.TIMER],dbMainThreadReadsCount:[41,a.TYPES.INTEGER],dbMainThreadWritesCount:[42,a.TYPES.INTEGER],dbReadsCount:[43,a.TYPES.INTEGER],dbWritesCount:[44,a.TYPES.INTEGER],disconnected:[45,a.TYPES.BOOLEAN],expectedOfflineCallCount:[23,a.TYPES.INTEGER],expectedOfflineMessageCount:[17,a.TYPES.INTEGER],expectedOfflineNotificationCount:[18,a.TYPES.INTEGER],expectedOfflineReceiptCount:[19,a.TYPES.INTEGER],isOfflineCompleteMissed:[2,a.TYPES.BOOLEAN],isResumeInForeground:[13,a.TYPES.BOOLEAN],isResumeStartedInForeground:[37,a.TYPES.BOOLEAN],isRunningFromServiceExtension:[22,a.TYPES.BOOLEAN],lastStanzaT:[3,a.TYPES.TIMER],logoutSessionId:[38,a.TYPES.INTEGER],mailboxAge:[14,a.TYPES.INTEGER],mainScreenLoadT:[4,a.TYPES.TIMER],offlineCallCount:[24,a.TYPES.INTEGER],offlineDecryptErrorCount:[5,a.TYPES.INTEGER],offlineMessageCount:[6,a.TYPES.INTEGER],offlineNotificationCount:[7,a.TYPES.INTEGER],offlinePreviewT:[8,a.TYPES.TIMER],offlineProcessingT:[20,a.TYPES.TIMER],offlineReceiptCount:[9,a.TYPES.INTEGER],offlineResumeResult:[21,d("WAWebWamEnumOfflineResumeResultType").OFFLINE_RESUME_RESULT_TYPE],offlineSessionT:[46,a.TYPES.TIMER],offlineSizeBytes:[10,a.TYPES.INTEGER],onTrickleMode:[15,a.TYPES.BOOLEAN],pageLoadT:[11,a.TYPES.TIMER],passiveModeT:[25,a.TYPES.TIMER],preackCallCount:[26,a.TYPES.INTEGER],preackMessageCount:[27,a.TYPES.INTEGER],preackNotificationCount:[28,a.TYPES.INTEGER],preackReceiptCount:[29,a.TYPES.INTEGER],preacksCount:[47,a.TYPES.INTEGER],processedCallCount:[30,a.TYPES.INTEGER],processedMessageCount:[31,a.TYPES.INTEGER],processedNotificationCount:[32,a.TYPES.INTEGER],processedReceiptCount:[33,a.TYPES.INTEGER],runningTasks:[48,a.TYPES.STRING],socketConnectT:[12,a.TYPES.TIMER],transientOfflineSessionId:[34,a.TYPES.STRING]},[1,1,1],"regular"]},{OfflineResume:[]});g.OfflineResumeWamEvent=b}),98);
__d("WAWebWamOfflineResumeReporter",["$InternalEnum","WAHex","WALogger","WAQplTypes","WATimeUtils","WAWebABProps","WAWebDBTableUsage","WAWebGetAllModelStorageTableNames","WAWebOfflineResumeStageWamEvent","WAWebOfflineResumeWamEvent","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsGeneral","WAWebUserPrefsMultiDevice","WAWebWamEnumOfflineResumeModes","WAWebWamEnumOfflineResumeStages","WAWebWamEnumWebScenarioCode","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] decryption error count exceeding product requirement, count ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] loading time exceeding product requirement, time ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] offline resume completes\n        ============== offline resume perf ================\n        messageCount: ","\n        receiptCount: ","\n        notificationCount: ","\n        chatThreadCount: ","\n        sizeBytes: ","\n        decryptErrorCount: ","\n        preackMessageCount: ","\n        preackReceiptCount: ","\n        lastStanzaT: ","\n        pageLoadT: ","\n        socketConnectT: ","\n        passiveModeT: ","\n        offlinePreviewT: ","\n        mainScreenLoadT: ","\n        isResumeInForeground: ","\n        isBlockingOfflineResume: ","\n        mailboxAge: ","\n        ===================================================\n        "]);j=function(){return a};return a}var k=b("$InternalEnum").Mirrored(["ResumeFromRestart","ResumeFromOpentab"]),l=function(){function a(a){this._mode=a}var b=a.prototype;b.start=function(){if(!d("WAWebABProps").getABPropConfigValue("web_offline_resume_qpl_enabled"))return;this.drop();this._qplEvent=d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,{annotations:{string:{mode:k.getName(this._mode)}}})};b.end=function(){var a;(a=this._qplEvent)==null?void 0:a.end(d("WAQplTypes").QuickLogActionType.SUCCESS)};b.drop=function(){var a;(a=this._qplEvent)==null?void 0:a.drop();this._qplEvent=void 0};b._addPoint=function(a,b){var c;b=b!=null?{data:b}:{};(c=this._qplEvent)==null?void 0:c.addPoint(a,b)};b.markOfflinePreviewReceived=function(){this._addPoint("offlinePreviewReceived")};b.markMainScreenLoad=function(){this._addPoint("mainScreenLoad")};b.setAnnotations=function(a){var b;(b=this._qplEvent)==null?void 0:b.annotate(a)};return a}(),m=function(){function a(a,b){this._sessionId=b,this._offlineStartT=self.performance.now(),this._resumeMode=a}var b=a.prototype;b._commitOfflineStage=function(a){a=new(d("WAWebOfflineResumeStageWamEvent").OfflineResumeStageWamEvent)({offlineSessionId:this._sessionId,offlineResumeMode:this._resumeMode===k.ResumeFromOpentab?d("WAWebWamEnumOfflineResumeModes").OFFLINE_RESUME_MODES.RESUME_FROM_OPEN_TAB:d("WAWebWamEnumOfflineResumeModes").OFFLINE_RESUME_MODES.RESUME_FROM_RESTART,offlineStageTimestampMs:Math.floor(self.performance.now()-this._offlineStartT),currentOfflineStage:a});this._addOfflineMetadata(a);a.commit()};b.logOfflineStart=function(){this._offlineStartT=self.performance.now()};b.logSocketConnect=function(){this._commitOfflineStage(d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES.SOCKET_CONNECT)};b.logProcessComplete=function(){this._commitOfflineStage(d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES.PROCESS_COMPLETE)};b.logScreenLoad=function(){this._commitOfflineStage(d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES.SCREEN_LOAD)};b.logOfflinePreview=function(){this._commitOfflineStage(d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES.OFFLINE_PREVIEW)};b.logOfflineCount=function(a){var b;((b=this._offlineMessageCount)!=null?b:0)===0&&(this._offlineMessageCount=a.message);((b=this._offlineReceiptCount)!=null?b:0)===0&&(this._offlineReceiptCount=a.receipt);((b=this._offlineNotificationCount)!=null?b:0)===0&&(this._offlineNotificationCount=a.notification)};b.logOfflineDecryptionErrorCount=function(a){this._offlineDecryptErrorCount=a};b.logOfflineChatThreadCount=function(a){this._chatThreadCount=a};b.logOldestStanzaTime=function(a){(this._oldestStanzaTs==null||this._oldestStanzaTs>a)&&(this._oldestStanzaTs=a)};b.setLastPushCompleteTimestamp=function(){this._lastPushCompleteTimestampMs=d("WAWebUserPrefsGeneral").getLastPushCompleteTimestamp()};b._addOfflineMetadata=function(a){this._offlineMessageCount!=null&&(a.offlineMessageCount=n(this._offlineMessageCount,10)),this._offlineReceiptCount!=null&&(a.offlineReceiptCount=n(this._offlineReceiptCount,10)),this._offlineNotificationCount!=null&&(a.offlineNotificationCount=n(this._offlineNotificationCount,10)),this._oldestStanzaTs!=null&&(a.mailboxAge=o(this._oldestStanzaTs)),this._offlineDecryptErrorCount!=null&&(a.offlineDecryptErrorCount=this._offlineDecryptErrorCount),this._chatThreadCount!=null&&(a.chatThreadCount=n(this._chatThreadCount,10)),this._lastPushCompleteTimestampMs!=null&&a.currentOfflineStage===d("WAWebWamEnumOfflineResumeStages").OFFLINE_RESUME_STAGES.SOCKET_CONNECT&&(a.lastPushTimestampMs=this._lastPushCompleteTimestampMs,void d("WAWebUserPrefsGeneral").clearLastPushCompleteTimestamp(),this._lastPushCompleteTimestampMs=null)};return a}();a=function(){function a(){this._initEvents(k.ResumeFromRestart)}var e=a.prototype;e._initEvents=function(a){this.isInitialSync=!1;this.oldestStanzaTs=0;this.offlineResume=new(d("WAWebOfflineResumeWamEvent").OfflineResumeWamEvent)();this.offlineResume.offlineMessageCount=0;this.offlineResume.offlineReceiptCount=0;this.offlineResume.offlineNotificationCount=0;this.offlineResume.offlineDecryptErrorCount=0;this.offlineResume.offlineSizeBytes=0;this.offlineResume.chatThreadCount=0;this.offlineResume.preackMessageCount=0;this.offlineResume.preackReceiptCount=0;this.offlineResume.isOfflineCompleteMissed=!1;this.qpl=new l(a);var b=this._generateOfflineSessionId();this.offlineStage=new m(a,b);this.endTableUsageMetric=d("WAWebDBTableUsage").beginDBTableUsage(d("WAWebWamEnumWebScenarioCode").WEB_SCENARIO_CODE.OFFLINE_RESUME,new Set(d("WAWebGetAllModelStorageTableNames").allModelStorageTableNames),b)};e.logOldestStanzaTime=function(a){this.offlineStage.logOldestStanzaTime(a);if(this.offlineResume==null)return;(this.oldestStanzaTs===0||this.oldestStanzaTs>a)&&(this.oldestStanzaTs=a)};e.logOfflineCount=function(a){var b;this.offlineStage.logOfflineCount(a);this.offlineStage.logOfflinePreview();if(!this.offlineResume)return;((b=this.offlineResume.offlineMessageCount)!=null?b:0)===0&&(this.offlineResume.offlineMessageCount=a.message);((b=this.offlineResume.offlineReceiptCount)!=null?b:0)===0&&(this.offlineResume.offlineReceiptCount=a.receipt);((b=this.offlineResume.offlineNotificationCount)!=null?b:0)===0&&(this.offlineResume.offlineNotificationCount=a.notification)};e.logOfflineDecryptionErrorCount=function(a){this.offlineStage.logOfflineDecryptionErrorCount(a);if(!this.offlineResume)return;this.offlineResume.offlineDecryptErrorCount=a};e.logAddOfflineSizeBytes=function(a){if(!this.offlineResume)return;this.offlineResume.offlineSizeBytes+=a};e.logOfflineChatThreadCount=function(a){this.offlineStage.logOfflineChatThreadCount(a);a=n(a,10);if(!this.offlineResume)return;this.offlineResume.chatThreadCount=a};e.logOfflinePreackCount=function(a,b){b===void 0&&(b=!1),this.offlineResume&&(b===!0?this.offlineResume.preackMessageCount+=a:this.offlineResume.preackReceiptCount+=a)};e.logOfflinePassiveT=function(){var a;if(((a=this.offlineResume)==null?void 0:a.passiveModeT)!=null)return;this._logPerformanceT("passiveModeT")};e._logPerformanceT=function(a){var b=Math.floor(self.performance.now());if(this.offlineResume==null)return;this.offlineResume[a]=b};e.logLastStanzaT=function(){var a;if(((a=this.offlineResume)==null?void 0:a.lastStanzaT)!=null)return;this._logPerformanceT("lastStanzaT");this.isInitialSync||this.offlineStage.logProcessComplete()};e.logMainScreenLoadT=function(){this._logPerformanceT("mainScreenLoadT"),this.qpl.markMainScreenLoad(),this.isInitialSync||this.offlineStage.logScreenLoad()};e.logOfflinePreviewT=function(){this._logPerformanceT("offlinePreviewT"),this.qpl.markOfflinePreviewReceived()};e.logOfflineStartT=function(){this._logPerformanceT("pageLoadT"),this.offlineStage.logOfflineStart(),window.document&&this.offlineResume&&(this.offlineResume.isResumeInForeground=!document.hidden,document.addEventListener("visibilitychange",this.logResumeInBackground))};e.logSocketConnectT=function(){this.qpl.start(),this._logPerformanceT("socketConnectT"),this.isInitialSync||this.offlineStage.logSocketConnect()};e.logMissedOfflineComplete=function(){if(!this.offlineResume)return;this.offlineResume.isOfflineCompleteMissed=!0};e.setIsInitialSync=function(){this.isInitialSync=!0};e.logResumeInBackground=function(){if(!this.offlineResume)return;document.hidden&&(this.offlineResume.isResumeInForeground=!1)};e.setLastPushCompleteTimestamp=function(){return this.offlineStage.setLastPushCompleteTimestamp()};e.isBlockingOfflineResume=function(a){if(a.lastStanzaT!=null&&a.mainScreenLoadT!=null)return a.lastStanzaT<a.mainScreenLoadT;else if(a.socketConnectT!=null&&a.lastStanzaT!=null&&a.mainScreenLoadT==null)return!0;else if(a.socketConnectT!=null&&a.lastStanzaT==null&&a.mainScreenLoadT!=null)return!1;return null};e.commit=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.offlineResume;if(!a)return;a.offlineSizeBytes=n(a.offlineSizeBytes,1e3);a.offlineMessageCount=n(a.offlineMessageCount,10);a.offlineReceiptCount=n(a.offlineReceiptCount,10);a.offlineNotificationCount=n(a.offlineNotificationCount,10);a.mailboxAge=o(this.oldestStanzaTs);yield d("WAWebUserPrefsMultiDevice").setRecentMailboxAgeDays(a.mailboxAge);var b=this.isBlockingOfflineResume(a);d("WALogger").LOG(j(),a.offlineMessageCount,a.offlineReceiptCount,a.offlineNotificationCount,a.chatThreadCount,a.offlineSizeBytes,a.offlineDecryptErrorCount,a.preackMessageCount,a.preackReceiptCount,a.lastStanzaT,a.pageLoadT,a.socketConnectT,a.passiveModeT,a.offlinePreviewT,a.mainScreenLoadT,a.isResumeInForeground,b,a.mailboxAge);if(!this.isInitialSync){a.commit();this.qpl.setAnnotations({"int":{messageCount:a.offlineMessageCount,receiptCount:a.offlineReceiptCount,notificationCount:a.offlineNotificationCount,chatThreadCount:a.chatThreadCount,sizeBytes:a.offlineSizeBytes,decryptErrorCount:a.offlineDecryptErrorCount,preackMessageCount:a.preackMessageCount,preackReceiptCount:a.preackReceiptCount},bool:{isResumeInForeground:a.isResumeInForeground,isBlockingOfflineResume:b}});this.qpl.end();this.endTableUsageMetric();if(!c("gkx")("26258")){b=3*60*1e3;var e=10,f=Math.max(a.mainScreenLoadT,a.lastStanzaT);f-a.socketConnectT>b&&d("WALogger").ERROR(i(),a.mainScreenLoadT).sendLogs("slow-offline-resume");a.offlineDecryptErrorCount>e&&d("WALogger").ERROR(h(),a.offlineDecryptErrorCount).sendLogs("slow-offline-resume")}}else this.qpl.drop();this.offlineResume=null;window.document&&document.removeEventListener("visibilitychange",this.logResumeInBackground)});function e(){return a.apply(this,arguments)}return e}();e.resetEvent=function(){this.offlineResume==null&&(this._initEvents(k.ResumeFromOpentab),this.logOfflineStartT())};e._generateOfflineSessionId=function(){return""+d("WAHex").randomHex(4)+d("WATimeUtils").unixTimeWithoutClockSkewCorrection()};return a}();function n(a,b){return c("gkx")("26258")?Math.round(a/b)*b:a}function o(a){if(a===0)return 0;a=d("WATimeUtils").unixTime()-a;return Math.round(a/d("WATimeUtils").DAY_SECONDS)}e=new a();g.roundUp=n;g.countDays=o;g.OfflineResumeReporter=e}),98);
__d("WAWebClearDanglingReceipts",["Promise","WAAbortError","WALogger","WATimeUtils","WAWebABProps","WAWebCommsSendPing","WAWebNetworkStatus","WAWebOfflineResumePreAckHandler","WAWebSchemaDanglingReceipt","WAWebSendReceiptJobCommon","WAWebWamOfflineResumeReporter","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearDanglingReceipts: starting clean receipts"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearDanglingReceipts: starting sending ping"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] clearDanglingReceipts: skip due to offline."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: complete"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: complete sending  "," preAcks"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: complete sending "," receipts"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: starting sending "," receipts,  "," preAcks"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: aborting receipts to signal.aborted"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: get "," danglingRecords"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendAndClearDanglingReceipts: aborting due to signal.aborted"]);r=function(){return a};return a}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.aborted&&d("WAWebABProps").getABPropConfigValue("web_abort_preacks_on_disconnect_enabled")){d("WALogger").LOG(r());throw new(d("WAAbortError").AbortError)()}var c=(yield d("WAWebSchemaDanglingReceipt").getTable().all());d("WALogger").LOG(q(),c.length);if(a.aborted){d("WALogger").LOG(p());throw new(d("WAAbortError").AbortError)()}var e=new Map(),f=[],g=0;c.forEach(function(a){g+=a.receipts.length;var b=a.receipts;a=a.acks;b.forEach(function(a){var b=d("WAWebWidFactory").createWid(a.from),c=d("WAWebWidFactory").createWid(a.author),f=e.get(b);f||(f=new Map(),e.set(b,f));b=f.get(c);b||(b=[],f.set(c,b));b.push(a.externalId)});f=f.concat(a)});var i=String(d("WATimeUtils").unixTime());c=Array.from(e.keys()).map(function(b){var c=e.get(b);if(!c)return;return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:b,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:i,groupedReceipt:c,signal:a})});var j=f.map(function(a){return d("WAWebOfflineResumePreAckHandler").sendOfflinePreAck(a)});d("WALogger").LOG(o(),c.length,j.length);yield (h||(h=b("Promise"))).all(c);d("WALogger").LOG(n(),c.length);yield h.all(j);d("WALogger").LOG(m(),j.length);yield t();d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreackCount(g);d("WALogger").LOG(l())});return s.apply(this,arguments)}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!c("WAWebNetworkStatus").online){d("WALogger").LOG(k());return(h||(h=b("Promise"))).resolve()}d("WALogger").LOG(j());yield d("WAWebCommsSendPing").blockSendPing();d("WALogger").LOG(i());yield d("WAWebSchemaDanglingReceipt").getTable().clear()});return u.apply(this,arguments)}g.sendAndClearDanglingReceipts=a;g.clearDanglingReceipts=t}),98);
__d("WAWebPushNotificationsGatingUtils",["WAWebABProps","WAWebUA","gkx"],(function(a,b,c,d,e,f,g){function a(){return h()&&d("WAWebABProps").getABPropConfigValue("web_push_notifications")}function h(){try{var a=d("WAWebUA").UA.isSafari&&Number(d("WAWebUA").UA.browserVersion.split(".")[0])<16;return c("gkx")("26262")&&!a}catch(a){return!1}}function b(){try{var a=d("WAWebUA").UA.isSafari||d("WAWebUA").UA.browser===d("WAWebUA").BROWSER_TYPE.FIREFOX||d("WAWebUA").UA.isChrome&&Number(d("WAWebUA").UA.browserVersion.split(".")[0])<80;return c("gkx")("26262")&&!a}catch(a){return!1}}function e(){return d("WAWebUA").UA.isSafari||d("WAWebUA").UA.isFirefox?!1:!0}g.canEnableOfflineNotifications=a;g.canSupportOfflineNotifications=h;g.canSupportPeriodicBackgroundSync=b;g.canSupportNotificationActions=e}),98);
__d("WAWebPushNotificationsOfflineBbApi",["WAWebPushNotificationsGatingUtils","WAWebUserPrefsNotifications"],(function(a,b,c,d,e,f,g){var h=10*1e3,i=!0,j=null;function a(){d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications()&&(i=!1,j=self.performance.now())}function b(){d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications()&&!i&&j!=null&&self.performance.now()-j>h&&d("WAWebUserPrefsNotifications").setOfflineNotificationsBBStatus({isLongResumeTime:!0})}g.setStartCommsT=a;g.setMainStreamModeReadyT=b}),98);
__d("WAWebOfflineResumeUtils",["Promise","WABackoffUtils","WALogger","WAPromiseDelays","WAPromiseLoop","WAWebABProps","WAWebClearDanglingReceipts","WAWebCmd","WAWebGetMessageCache","WAWebLogoutReasonConstants","WAWebMessageReceiptBatcher","WAWebNetworkStatus","WAWebOffdStorageUpdateOfflinePeerReceipts","WAWebOfflineDeviceCache","WAWebPageLoadLogging","WAWebPruneExpiredMessagesWithAddOns","WAWebPushNotificationsOfflineBbApi","WAWebSocketLogoutJob","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] loadMainScreen complete"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] loadMainScreen: pruneExpiredMessages message failed with error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] restoreDataFromStorage failed with error ","."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume] restoreDataFromStorage."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] runReceiptCleanUpLoop: Gave up clean up receipts "," tries"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] runReceiptCleanUpLoop: failed with error ","."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] runReceiptCleanUpLoop: done."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] runReceiptCleanUpLoop: skip due to offline."]);p=function(){return a};return a}var q={MIN_MESSAGE:20,LIMIT_WITH_MESSAGE:50,MAX_STANZA:200};function a(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebGetMessageCache").getMessageCache().createSnapshot();d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.createSnapshot();var a=[d("WAWebGetMessageCache").getMessageCache().checkpointQueue.wait(),d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.checkpointQueue.wait()];a.push(d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches());yield (h||(h=b("Promise"))).all(a)});return r.apply(this,arguments)}function e(){if(d("WAWebABProps").getABPropConfigValue("web_enable_open_tab_pre_ack")&&!c("WAWebNetworkStatus").online){d("WALogger").LOG(p());return(h||(h=b("Promise"))).resolve()}return d("WAPromiseLoop").promiseLoop(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(c,12e4,1e3,.1));try{yield d("WAWebClearDanglingReceipts").clearDanglingReceipts();d("WALogger").LOG(o());return a()}catch(e){d("WALogger").LOG(n(),e);if(c>3){d("WALogger").WARN(m(),c);return a()}return b}});return function(b,c,d){return a.apply(this,arguments)}}())}function f(){var a;((a=window.location)==null?void 0:a.reload)&&window.location.reload()}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebPageLoadLogging").startPageLoadQplMeasure("restoreDataFromStorage");try{var c=a.shouldUpdateReceipts;c=c===void 0?!1:c;a=a.shouldRestoreChatsAndMsgs;var e=a===void 0?!0:a;d("WALogger").LOG(l());a=c?d("WAWebOffdStorageUpdateOfflinePeerReceipts").updatePeerReceipts():(h||(h=b("Promise"))).resolve();c=a.then(function(){return e?d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("restoreChatsAndMessages"):(h||(h=b("Promise"))).resolve()});a=d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("restoreGroupsAndContacts");var f=d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("restoreProfilePictures");yield (h||(h=b("Promise"))).all([c,a,f])}catch(a){d("WALogger").ERROR(k(),a).verbose().sendLogs("offline-resume-fatal-error",{sendLogsType:d("WALogger").SendLogsType.USER_FORCEFULLY_LOGGED_OUT_SAD}),void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.ClientFatalError)}d("WAWebPageLoadLogging").endPageLoadQplMeasure("restoreDataFromStorage")});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebPruneExpiredMessagesWithAddOns").pruneExpiredMessagesWithAddOns()}catch(a){d("WALogger").ERROR(j(),a);throw a}yield s(a);w();d("WAWebCmd").Cmd.readyForProcessOffline();d("WALogger").LOG(i())});return v.apply(this,arguments)}function w(){d("WAWebCmd").Cmd.readyForMainStreamMode(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMainScreenLoadT(),d("WAWebPushNotificationsOfflineBbApi").setMainStreamModeReadyT()}function x(a,b){return a+b>q.MAX_STANZA||a>q.MIN_MESSAGE&&a+b>q.LIMIT_WITH_MESSAGE}g.clearOfflineSnapShot=a;g.runReceiptCleanUpLoop=e;g.refreshWindow=f;g.loadMainScreen=u;g.exceedResumeWithOpenTabLimit=x}),98);
__d("WAWebPruneExpiredMessagesWithAddOns",["WALogger","WAWebBackendApi","WAWebDBEphemeralMessage","WAWebMsgKey","WAWebPageLoadLogging","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][utils] pruneExpiredMessagesWithAddOns: pruneExpiredMessages pruned "," msg(s)"]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebPageLoadLogging").startPageLoadQplMeasure("pruneExpiredMessagesWithAddOns");var a=(yield d("WAWebDBEphemeralMessage").pruneExpiredMessages()),b=a.length;if(b>0){var e=[],f=new Set();a.forEach(function(a){a=a.id.toString();f.add(c("WAWebMsgKey").fromString(a).remote.toString());e.push(a)});a=Array.from(f.values()).join(",").toString();d("WAWebBackendApi").frontendFireAndForget("deleteModelsForLastAddOnPreview",{messagesIds:e});yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a,e));d("WALogger").LOG(h(),b)}d("WAWebPageLoadLogging").endPageLoadQplMeasure("pruneExpiredMessagesWithAddOns")});return i.apply(this,arguments)}g.pruneExpiredMessagesWithAddOns=a}),98);
__d("WAWebHandleOrphansForNewMsg",["Promise","WAWebDBProcessAssociatedDetachedMessagesForNewMsg","WAWebDBProcessOrphansForNewMsg","WAWebMessageAssociationGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[d("WAWebDBProcessOrphansForNewMsg").processOrphansForNewMsg(a)];d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()&&c.push(d("WAWebDBProcessAssociatedDetachedMessagesForNewMsg").processAssociatedDetachedMsgsForNewMsg(a));yield (h||(h=b("Promise"))).all(c)});return i.apply(this,arguments)}g.handleOrphansForNewMsg=a}),98);
__d("WAWebSendMsgCommonApi",["WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebABProps","WAWebAck","WAWebAddonRetryRequestUtils","WAWebDeviceListPk","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebReactionsBEUtils","WAWebSchemaMessage","WAWebSendMsgTypes","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebVerifyProtobufMsgObjectKeys","WAWebWidFactory","asyncToGeneratorRuntime","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["filterDeviceWithChangedIdentity: cannot determine rowId for message: ",", type: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["filterDeviceWithChangedIdentity: message not found: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["filterDeviceWithChangedIdentity: addon not found: ",""]);j=function(){return a};return a}var k=5;function a(){return(d("WAWebABProps").getABPropConfigValue("web_e2e_backfill_expire_time")||k)*60}function e(a){a=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,a);d("WAWebSignalCommonUtils").writeRandomPadMax16(a);return a.readByteArray()}function l(a){return a.protocolMessage!=null&&a.protocolMessage.type===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE}function m(a){return a.reactionMessage!=null&&a.reactionMessage.text===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT}function n(a){var b;b=(b=(b=a.protocolMessage)==null?void 0:b.type)!=null?b:(b=a.editedMessage)==null?void 0:(b=b.message)==null?void 0:(b=b.protocolMessage)==null?void 0:b.type;return b===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT||((b=a.secretEncryptedMessage)==null?void 0:b.secretEncType)===d("WAWebProtobufsE2E.pb").Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT}function o(a){return a.pinInChatMessage!=null}function p(a){return a.keepInChatMessage!=null&&a.keepInChatMessage.key!=null&&a.keepInChatMessage.key.fromMe===!0&&a.keepInChatMessage.keepType===d("WAWebProtobufsE2E.pb").KeepType.UNDO_KEEP_FOR_ALL}function q(a,b){var c,e=d("WAWebVerifyProtobufMsgObjectKeys").getProtobufMessageTypesSet(a);c=(c=d("WAWebVerifyProtobufMsgObjectKeys").getUnwrappedProtobufMessage(a))!=null?c:a;if(e.has(d("WAWebMsgType").MSG_TYPE.PROTOCOL)){a=(a=c.protocolMessage)==null?void 0:a.type;if(a===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE){b=b==="admin_revoke"?d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE:d("WAWebAck").EDIT_ATTR.SENDER_REVOKE;return d("WAWap").CUSTOM_STRING(String(b))}else if(a===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT)return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.MESSAGE_EDIT))}else if(e.has(d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.MESSAGE_EDIT));else if(e.has(d("WAWebMsgType").MSG_TYPE.REACTION)){if(((b=c.reactionMessage)==null?void 0:b.text)===d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT)return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.SENDER_REVOKE))}else if(e.has(d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT)){if(p(c))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.SENDER_REVOKE))}else if(e.has(d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.PIN_IN_CHAT));return d("WAWap").DROP_ATTR}function f(a,b){if(d("WAWebABProps").getABPropConfigValue("web_unwrap_message_for_stanza_attributes"))return q(a,b);if(l(a)){b=b==="admin_revoke"?d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE:d("WAWebAck").EDIT_ATTR.SENDER_REVOKE;return d("WAWap").CUSTOM_STRING(String(b))}else if(m(a))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.SENDER_REVOKE));else if(p(a))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.SENDER_REVOKE));else if(n(a))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.MESSAGE_EDIT));else if(o(a))return d("WAWap").CUSTOM_STRING(String(d("WAWebAck").EDIT_ATTR.PIN_IN_CHAT));return d("WAWap").DROP_ATTR}var r=new(c("WADeprecatedWapParser"))("sendMsgAckSyncParser",function(a){a.assertTag("ack");return{t:a.attrTime("t"),sync:a.hasAttr("sync")?a.attrString("sync"):null,phash:a.hasAttr("phash")?a.attrString("phash"):null,addressingMode:a.hasAttr("addressing_mode")?a.attrString("addressing_mode"):null,count:a.hasAttr("count")?a.attrInt("count"):null,error:a.hasAttr("error")?a.attrInt("error"):null}});function s(a){return a.device==null||a.device===d("WAJids").DEFAULT_DEVICE_ID}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.data.id;if(a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Addon){var e=(yield d("WAWebAddonRetryRequestUtils").hasSentAddonMsg(c));if(e!=null)return d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().updateIdentityRangeAfterEncryption("sentAddonRowId",e.rowId,b.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString()}))}else if(a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Message){e=(yield d("WAWebSchemaMessage").getMessageTable().get(String(c),!1));a=e==null?void 0:e.rowId;if(a!=null)return d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().updateIdentityRangeAfterEncryption("rowId",a,b.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString()}))}});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.data.id;if(a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Addon){var c=(yield d("WAWebAddonRetryRequestUtils").hasSentAddonMsg(b));c||d("WALogger").WARN(j(),b);return c==null?void 0:c.rowId}else if(a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Message){c=(yield d("WAWebSchemaMessage").getMessageTable().get(String(b),!1));c||d("WALogger").WARN(i(),b);return c==null?void 0:c.rowId}});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield v(a));if(e==null){d("WALogger").WARN(h(),a.data.id,a.data.type);throw c("err")("filterDeviceWithChangedIdentity: cannot determine message rowId")}var f=new Map();b.forEach(function(a){f.set(d("WAWebDeviceListPk").createDeviceListPK(a),a)});var g=Array.from(f.values()).map(function(a){return d("WAWebWidFactory").createDeviceWidFromUserAndDevice(a.user,a.server,d("WAJids").DEFAULT_DEVICE_ID)}),i=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkGetIdentityWithRowId(g.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a)}))),j=new Set();i.forEach(function(b,c){b=a.type===d("WAWebSendMsgTypes").SendMessageRecordType.Addon?b==null?void 0:b.sentAddonRowId:b==null?void 0:b.rowId;c=g[c];(b==null||b>e)&&j.add(d("WAWebDeviceListPk").createDeviceListPK(c))});return b.filter(function(a){return!j.has(d("WAWebDeviceListPk").createDeviceListPK(a))})});return y.apply(this,arguments)}g.getResendTimeoutInSeconds=a;g.encodeAndPad=e;g.isRevokeMsg=l;g.isEditMsg=n;g.editAttribute=f;g.sendMsgAckSyncParser=r;g.isPrimaryDevice=s;g.updateIdentityRange=t;g.filterDeviceWithChangedIdentity=x}),98);
__d("WAWebSignal",["WAWebSignalCipherApi","WAWebSignalSessionApi"],(function(a,b,c,d,e,f,g){g.Cipher=d("WAWebSignalCipherApi"),g.Session=d("WAWebSignalSessionApi")}),98);
__d("WAWebSignalCipherApi",["Promise","WAWebCryptoLibrary","WAWebSignalCommonErrors","asyncToGeneratorRuntime","cr:4533","gkx"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!c("gkx")("26258")){var i=b("cr:4533")==null?void 0:b("cr:4533").getDebugDecryptFail();if(i!=null&&i>0){b("cr:4533")==null?void 0:b("cr:4533").setDebugDecryptFail(i-1);return(h||(h=b("Promise"))).reject(new(d("WAWebSignalCommonErrors").SignalDecryptionError)())}}return d("WAWebCryptoLibrary").decryptSignalProto(a,e,f,g)});return i.apply(this,arguments)}function e(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return d("WAWebCryptoLibrary").encryptSignalProto(a,b,c)});return j.apply(this,arguments)}function f(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){return d("WAWebCryptoLibrary").decryptGroupSignalProto(a,b,c,e)});return k.apply(this,arguments)}function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){return d("WAWebCryptoLibrary").encryptSenderKeyMsgSignalProto(a,b,c,e)});return m.apply(this,arguments)}g.decryptSignalProto=a;g.encryptSignalProto=e;g.decryptGroupSignalProto=f;g.encryptSenderKeyMsgSignalProto=l}),98);
__d("WASignalSessions",["WABinary","WAErr","WASignalKeys","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function a(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function b(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function e(a,b){return n(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function f(a,b,c){return n(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function l(a,b,c,d){c===void 0&&(c=a.sendChain);return n(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function m(a,b,c,d,e,f,g){return n(a,b,c,d,e,f,0,[],g)}function n(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function o(a,b){b=new(d("WABinary").Binary)(b);var c=d("WASignalOther").readBytes(b,32),e=d("WASignalOther").readBytes(b,32);b=d("WASignalOther").readBytes(b,16);return p(a,c,e,b)}function p(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function q(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function r(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function s(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:r(a.sendChain),receiverChains:a.recvChains.map(q),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function t(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d("WASignalOther").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d("WASignalOther").toBuffer(b.pubKey),remoteIdentityPublic:d("WASignalOther").toBuffer(c.pubKey),rootKey:d("WASignalOther").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d("WASignalOther").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d("WASignalOther").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d("WASignalOther").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d("WASignalOther").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d("WASignalOther").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d("WASignalOther").toBuffer(a.cipherKey),macKey:d("WASignalOther").toBuffer(a.macKey),iv:d("WASignalOther").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey==null?void 0:d("WASignalOther").toBuffer(a.aliceBaseKey)}}function u(a){var b=A(a.currentSession,"currentSession");return w(b,a.previousSessions)}function v(a){return w(a,[])}function w(a,b){var e=A(a.sessionVersion,"sessionVersion");if(e!==h)throw c("WAErr")("Signal: bad session version "+e);e=A(a.senderChain,"senderChain");var f=A(e.chainKey,"senderChain.chainKey");e=j(d("WASignalKeys").makeSerializedKeyPairFrom(z(e.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),y(e.senderRatchetKey,"senderRatchetKey")),A(f.index,"senderChain.chainKey.index"),z(f.key,32,"senderChain.chainKey.key"));f=A(a.receiverChains,"receiverChains").map(function(a){var b=A(a.chainKey,"receiverChains[].chainKey");return i(y(a.senderRatchetKey,"receiverChains[].senderRatchetKey"),A(b.index,"receiverChains[].chainKey.index"),z(b.key,32,"receiverChains[].chainKey.key"),x(a.messageKeys))});var g={regId:d("WASignalOther").castRegistrationId(A(a.localRegistrationId,"localRegistrationId")),pubKey:y(a.localIdentityPublic,"localIdentityPublic")},l={regId:d("WASignalOther").castRegistrationId(A(a.remoteRegistrationId,"remoteRegistrationId")),pubKey:y(a.remoteIdentityPublic,"remoteIdentityPublic")},m=a.pendingPreKey,o=null;if(m){var p=m.preKeyId;o=k(p!=null?d("WASignalKeys").castToPreKeyId(p):null,d("WASignalKeys").castToSignedPreKeyId(A(m.signedPreKeyId,"pendingPreKey.signedPreKeyId")),y(m.baseKey,"pendingPreKey.baseKey"))}p=a.aliceBaseKey==null?null:y(a.aliceBaseKey,"aliceBaseKey");return n(g,l,z(a.rootKey,32,"rootKey"),f,e,o,a.previousCounter||0,b,p)}function x(a){return a.map(function(a){return{index:A(a.index,"messageKeys[].index"),cipherKey:z(a.cipherKey,32,"messageKeys[].cipherKey"),macKey:z(a.macKey,32,"messageKeys[].macKey"),iv:z(a.iv,16,"messageKeys[].iv")}})}function y(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(A(a,b)))}function z(a,b,c){return d("WASignalOther").toBytes(A(a,c),b)}function A(a,b){if(a==null)throw c("WAErr")("Signal: protobuf is missing "+b);return a}g.FORMAT_VERSION=h;g.makeFreshRecvChain=a;g.makeRecvChain=i;g.makeFreshSendChain=b;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=e;g.updateChains=f;g.ratchetSession=l;g.makeFreshSession=m;g.makeSession=n;g.splitMsgKey=o;g.serializeSession=s;g.detachSession=t;g.parseSessionFromRecord=u;g.parseSession=v;g._parseSession=w;g.bytesOrThrow=z;g.definedOrThrow=A}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(a,b,c,d,e,f,g){"use strict";var h=5,i=3;function j(a){var b=d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey"),c=d("WASignalSessions").definedOrThrow(a.senderMessageKeys,"senderMessageKeys"),e=d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:r(b["public"],"public"),senderSigningKeyPrivate:b["private"]?d("WASignalSessions").bytesOrThrow(b["private"],32,"private"):void 0,senderKeyId:d("WASignalSessions").definedOrThrow(a.senderKeyId,"senderKeyId"),unusedMsgKeys:c.map(function(a){return k(d("WASignalSessions").definedOrThrow(a.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(a.seed,50,"seed"))}),senderKeyChainKey:l(d("WASignalSessions").definedOrThrow(e.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(e.seed,32,"seed"))}}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e==null?[]:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d("WASignalSessions").definedOrThrow(a.senderKeyStates,"senderKeyStates");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});return c===-1?void 0:a.senderKeyStates[c]}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{"public":a.senderSigningKeyPublic,"private":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}})}}function r(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(d("WASignalSessions").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);
__d("WAWebCryptoLibrarySignalGroupUtilsApi",[],(function(a,b,c,d,e,f){var g="v1";function a(a,b,c,d){return{signatureKey:a,chainKey:b,keyId:c,messageKeys:d==null?[]:d}}function b(a){return{sessions:a,version:g}}function c(a){return a}function d(a,b){return{counter:a,key:b}}function e(a,b){return b!=null?{pubKey:a,privKey:b}:a}f.makeLibsignalSenderKeyState=a;f.makeNewLibsignalSenderKeySession=b;f.makeLibsignalSenderKeyMsgKey=c;f.makeLibsignalSenderKeyChainKey=d;f.makeLibsignalSenderKeySignatureKey=e}),66);
__d("WAWebCryptoLibrarySenderkeySessionConversionApi",["invariant","WAByteArray","WAPromiseReduce","WASignalGroupSession","WASignalOther","WAWebCryptoLibrarySignalGroupUtilsApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.sessions;a=(yield d("WAPromiseReduce").promiseReduce(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=(yield j(b));return a==null?d("WASignalGroupSession").makeNewSenderKeySession(c):d("WASignalGroupSession").updateSessionWithNewSenderKeyState(a,c)});return function(b,c,d){return a.apply(this,arguments)}}(),null));a!=null||h(0,72944);return a});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.signatureKey.pubKey!==void 0?new Uint8Array(a.signatureKey.pubKey):new Uint8Array(a.signatureKey),c=a.signatureKey.privKey?d("WASignalOther").ensureSize(new Uint8Array(a.signatureKey.privKey),32):void 0,e=d("WASignalGroupSession").makeSenderKeyChainKey(a.chainKey.counter,d("WASignalOther").ensureSize(new Uint8Array(a.chainKey.key),32)),f=a.keyId,g=[],h=function*(b){if(a.messageKeys[b]){var c=a.messageKeys[b];c=(yield d("WASignalOther").hkdf(new Uint8Array(c),null,"WhisperGroup",50).then(function(a){return d("WASignalGroupSession").makeSenderKeyMsgKey(b,a)}));g.push(c)}};for(var i=0;i<a.messageKeys.length;i++)yield* h(i);h=g;i=d("WASignalGroupSession").makeSenderKeyState(b,c,e,f,h);return i});return k.apply(this,arguments)}function l(a){var b=[],c=d("WAWebCryptoLibrarySignalGroupUtilsApi").makeLibsignalSenderKeyChainKey(a.senderKeyChainKey.nextMsgIndex,d("WAByteArray").uint8ArrayToBuffer(a.senderKeyChainKey.chainKey)),e=a.senderKeyId,f=a.senderSigningKeyPrivate;f=f!=null?d("WAWebCryptoLibrarySignalGroupUtilsApi").makeLibsignalSenderKeySignatureKey(d("WAByteArray").uint8ArrayToBuffer(a.senderSigningKeyPublic),d("WAByteArray").uint8ArrayToBuffer(f)):d("WAWebCryptoLibrarySignalGroupUtilsApi").makeLibsignalSenderKeySignatureKey(d("WAByteArray").uint8ArrayToBuffer(a.senderSigningKeyPublic));a=d("WAWebCryptoLibrarySignalGroupUtilsApi").makeLibsignalSenderKeyState(f,c,e,b);return a}function c(a){a=a.senderKeyStates;a=a.map(function(a){return l(a)});return d("WAWebCryptoLibrarySignalGroupUtilsApi").makeNewLibsignalSenderKeySession(a)}g.toCryptoManagerSenderKeySession=a;g.toSignalSenderKeySession=c}),98);
__d("WAWebCryptoLibrarySessionConversionApi",["WAArrayBufferUtils","WALogger","WASignalKeys","WASignalOther","WASignalSessions","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["toCryptoManagerSession: "," "]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["toLibsignalSession: prevSendChainHighestIndex: ",", sendChainCounter: ",""]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=m(a);c=(yield k(c,b));var e=[];for(var f in a.sessions)if(a.sessions[f].indexInfo.closed!==-1){var g=(yield k(a.sessions[f],b));g=d("WASignalSessions").detachSession(g);e.push(g)}return d("WASignalSessions").setPrevSessions(c,e)});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var c=[];if(a.currentRatchet.lastRemoteEphemeralKey){var e=a[d("WAArrayBufferUtils").arrayBufferToString(a.currentRatchet.lastRemoteEphemeralKey)];if(e){var f=[],g=function*(a){var b=e.messageKeys[a];b=(yield d("WASignalOther").hkdf(new Uint8Array(b),null,"WhisperMessageKeys",80).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)}));f.push(b)};for(var j=0;j<e.messageKeys.length;j++)yield* g(j);g=a.currentRatchet.lastRemoteEphemeralKey;j=e.chainKey.key;if(g!=null&&j!=null){g=d("WASignalSessions").makeRecvChain(d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g)),e.chainKey.counter+1,d("WASignalOther").toBytes(j,32),f);c.push(g)}}}j=a[d("WAArrayBufferUtils").arrayBufferToString(a.currentRatchet.ephemeralKeyPair.pubKey)];g=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(a.currentRatchet.ephemeralKeyPair.pubKey));var k=j.chainKey.key,l=d("WASignalOther").toBytes(a.currentRatchet.ephemeralKeyPair.privKey,32);l=d("WASignalKeys").makeSerializedKeyPairFrom(l,g);g=d("WASignalSessions").makeSendChain(l,j.chainKey.counter+1,d("WASignalOther").toBytes(k,32));l=b&&{regId:b.registrationId,pubKey:d("WASignalKeys").serializeIdentity(new Uint8Array(b.identityKeyPair.pubKey))};j=b&&{regId:a.registrationId,pubKey:new Uint8Array(a.indexInfo.remoteIdentityKey)};k=a.indexInfo.baseKey&&d("WASignalKeys").castToSerializedPubKey(new Uint8Array(a.indexInfo.baseKey));b=a.currentRatchet.previousCounter;b===-1&&d("WALogger").DEV(i(),b,g.nextMsgIndex);var m=d("WASignalOther").toBytes(a.currentRatchet.rootKey,32),n;a.pendingPreKey!=null&&(n=d("WASignalSessions").makeInitialExchangeInfo(a.pendingPreKey.preKeyId,a.pendingPreKey.signedKeyId,d("WASignalKeys").castToSerializedPubKey(new Uint8Array(a.pendingPreKey.baseKey))));a=[];l=d("WASignalSessions").makeSession(l,j,m,c,g,n,Math.max(b,0),a,k);return l}catch(a){d("WALogger").DEV(h(),a);throw a}});return l.apply(this,arguments)}function m(a){a=a.sessions;for(var b in a)if(a[b].indexInfo.closed===-1)return a[b];throw c("err")("getOpenSession: There are no open session")}g.toCryptoLibrarySessionPrevSessions=a;g.toCryptoManagerSession=k}),98);
__d("WAWebSignalConvertApi",["Promise","WALogger","WAWebCryptoCurve25519","WAWebCryptoLibrarySenderkeySessionConversionApi","WAWebCryptoLibrarySessionConversionApi","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeConvertSession: failed with error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeConvertSession: converting to crypto library"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeConvertSenderKey: failed with error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeConvertSenderKey: converting to crypto library"]);l=function(){return a};return a}function m(a){return a.sessions!=null}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a==null||!m(a))return a;var e=(yield (h||(h=b("Promise"))).all([d("WAWebSignalProtocolStore").getSignalProtocolStore().getIdentityKeyPair(),d("WAWebSignalProtocolStore").getSignalProtocolStore().getLocalRegistrationId()])),f=e[0];e=e[1];if(!f||e==null)throw c("err")("Attempted to loadSession without registration info");f={identityKeyPair:d("WAWebCryptoCurve25519").toCurveKeyPair(f),registrationId:e};d("WALogger").LOG(j()).sendLogs("libsignal-to-cryptolib-session",{sampling:0});return d("WAWebCryptoLibrarySessionConversionApi").toCryptoLibrarySessionPrevSessions(a,f)}catch(a){d("WALogger").ERROR(i(),a).sendLogs("session-convert-error");throw a}});return n.apply(this,arguments)}function o(a){return a.sessions!=null}function e(a){try{if(a==null||!o(a))return a;d("WALogger").LOG(l()).sendLogs("libsignal-to-cryptolib-senderkey",{sampling:0});return d("WAWebCryptoLibrarySenderkeySessionConversionApi").toCryptoManagerSenderKeySession(a)}catch(a){d("WALogger").ERROR(k(),a).sendLogs("senderkey-convert-error");throw a}}g.shouldConvertSession=m;g.maybeConvertSession=a;g.maybeConvertSenderKey=e}),98);
__d("WAWebSignalKeyApi",["WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("WAWebCryptoLibraryUtilsApi").makePreKey(a);var b=a.preKeyId,d=a.privKey;a=a.pubKey;d={privKey:d,pubKey:a};return{keyId:b,keyPair:d,isDirectDistribution:0}});return h.apply(this,arguments)}function e(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=c("WAWebCryptoLibraryUtilsApi").makeSignedPreKey(d("WAWebCryptoCurve25519").toCurveKeyPair(a),b);b=a.preKeyId;var e=a.privKey,f=a.pubKey;a=a.signature;e={privKey:e,pubKey:f};return{keyId:b,keyPair:d("WAWebCryptoCurve25519").toCurveKeyPair(e),signature:a}});return i.apply(this,arguments)}function f(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return c("WAWebCryptoLibraryUtilsApi").makeKeyPair()});return j.apply(this,arguments)}g.generatePreKeyPair=a;g.generateSignedKeyPair=e;g.generateIdentityKeyPair=f}),98);
__d("WAWebSignalSessionApi",["Promise","WABinary","WAJids","WALogger","WAWebAdvSignatureApi","WAWebApiContact","WAWebCryptoCurve25519","WAWebCryptoLibrary","WAWebCryptoLibraryDbCallbacksApi","WAWebCryptoLibrarySessionApi","WAWebCryptoLibraryUtilsApi","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebSignalStoreApi","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["hasSameBaseKey: MsgId: ",", savedBaseKey and sessionBaseKey is same"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["hasSameBaseKey: MsgId: ",", savedBaseKey and sessionBaseKey is different "]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["hasSameBaseKey: MsgId: ",", no session has been saved locally "]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["hasSameBaseKey: MsgId: ",", no base key has been saved locally "]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["saveSessionBaseKey: for ",", no basekey provided"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Signal::createSignalSession with ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Signal::createSignalSession"]);r=function(){return a};return a}function a(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.wid,f=a.identity,g=a.deviceIdentity;c("gkx")("26258")?d("WALogger").LOG(r()):d("WALogger").LOG(q(),e.toString({legacy:!0}));if(e.device!=null&&e.device!==d("WAJids").DEFAULT_DEVICE_ID){if(!g)throw c("err")("Signal::createSignalSession: expected device-identity in keyBundle for companion device");g=(yield d("WAWebAdvSignatureApi").validateADVwithIdentityKey(e,g,f));if(!g)throw c("err")("Signal::createSignalSession: invalid identityKey fetched")}var h,i,j;try{h=d("WAWebCryptoCurve25519").toSignalCurvePubKey(new(d("WABinary").Binary)(a.identity).readBuffer())}catch(a){d("WALogger").ERROR(p()).sendLogs("Signal::createSignalSession: invalid identityKey fetched");throw a}try{i=d("WAWebCryptoCurve25519").toSignalCurvePubKey(new(d("WABinary").Binary)(a.skey.pubkey).readBuffer())}catch(a){d("WALogger").ERROR(o()).sendLogs("Signal::createSignalSession: invalid signedPreKey fetched");throw a}if(a.key)try{j=d("WAWebCryptoCurve25519").toSignalCurvePubKey(new(d("WABinary").Binary)(a.key.pubkey).readBuffer())}catch(a){d("WALogger").ERROR(n()).sendLogs("Signal::createSignalSession: invalid preKey fetched")}f={registrationId:a.regId,identityKey:h,signedPreKey:{keyId:a.skey.id,publicKey:i,signature:new(d("WABinary").Binary)(a.skey.signature).readBuffer()}};a.key&&j&&(f.preKey={keyId:a.key.id,publicKey:j});return d("WAWebCryptoLibrarySessionApi").createSignalSession(f,e,b)});return s.apply(this,arguments)}function e(a,b){d("WAWebApiContact").checkPnToLidMapping(a,d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_HAS_SIGNAL_SESSIONS);return d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().containSessions(a.map(function(a){return d("WAWebSignalCommonUtils").createSignalAddress(a,b).toString()}))}function f(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebCryptoLibrarySessionApi").getRemoteRegId(a)});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_DELETE_REMOTE_INFO);var c=d("WAWebSignalCommonUtils").createSignalAddress(a,a.isLid()).toString();a=d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString();yield (h||(h=b("Promise"))).all([d("WAWebSignalProtocolStore").getSignalProtocolStore().removeIdentity(a),d("WAWebSignalProtocolStore").getSignalProtocolStore().removeSession(c)])});return v.apply(this,arguments)}function w(a){d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_DELETE_REMOTE_SESSION);a=d("WAWebSignalCommonUtils").createSignalAddress(a).toString();return d("WAWebSignalProtocolStore").getSignalProtocolStore().removeSession(a)}function x(a){a=d("WAWebSignalCommonUtils").createSignalAddress(a).toString();return d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().maybeCleanUpUnconvertedSession(a)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);var e=d("WAWebCryptoLibraryDbCallbacksApi").getCryptoDbCallbacks();a=d("WAJids").unsafeCoerceToDeviceJid(a.toJid());a=(yield c("WAWebCryptoLibraryUtilsApi").getSessionAliceBaseKey(a,b?e.loadSessionDeprecatedLid:e.loadSession));return a.success===!0?a.value:null});return z.apply(this,arguments)}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=!1);d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_SAVE_SESSION_BASE_KEY);var e=d("WAWebSignalCommonUtils").createSignalAddress(a,c);a=(yield y(a,c));!a?d("WALogger").LOG(m(),b):yield d("WAWebSignalStoreApi").waSignalStore.saveBaseKey(e.toString(),b,a)});return B.apply(this,arguments)}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e===void 0&&(e=!1);d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_HAS_SAME_BASE_KEY);var f=d("WAWebSignalCommonUtils").createSignalAddress(a,e);a=(yield (h||(h=b("Promise"))).all([y(a,e),d("WAWebSignalStoreApi").waSignalStore.loadBaseKey(f.toString(),c)]));e=a[0];f=a[1];if(!f){d("WALogger").LOG(l(),c);return!1}if(!e){d("WALogger").LOG(k(),c);return!1}if(!d("WAWebSignalCommonUtils").bufferEqual(f,e)){d("WALogger").LOG(j(),c);return!1}d("WALogger").LOG(i(),c);return!0});return D.apply(this,arguments)}function E(a,b,c,d){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){return d("WAWebCryptoLibrarySessionApi").createGroupSenderSignalSession(d("WAWebWidFactory").createWid(b),a,c,e)});return F.apply(this,arguments)}function G(a,b,c){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return d("WAWebCryptoLibrary").getGroupSenderKeyInfo(a,b,c)});return H.apply(this,arguments)}function I(a,b,c){c===void 0&&(c=!1);d("WAWebApiContact").checkPnToLidMapping([b],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_DELETE_GROUP_SENDER_KEY_INFO);b=d("WAWebSignalCommonUtils").createSignalAddress(b,c);c=a.toString({legacy:!0})+"::"+b.toString();return d("WAWebSignalStoreApi").waSignalStore.removeSenderKey(c)}function J(a,b){b===void 0&&(b=!1);d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_SIGNAL_SESSION_DELETE_DEVICE_SENDER_KEY);a=String(d("WAWebSignalCommonUtils").createSignalAddress(a,b));return d("WAWebSignalStoreApi").waSignalStore.removeSenderKeyBySenderId(a)}g.createSignalSession=a;g.hasSignalSessions=e;g.getRemoteRegId=f;g.deleteRemoteInfo=u;g.deleteRemoteSession=w;g.maybeDeleteUnconvertedSession=x;g.saveSessionBaseKey=A;g.hasSameBaseKey=C;g.createGroupSignalSession=E;g.getGroupSenderKeyInfo=G;g.deleteGroupSenderKeyInfo=I;g.deleteDeviceSenderKey=J}),98);
__d("WAWebSignalUtilsApi",["WAWap","WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi"],(function(a,b,c,d,e,f,g){function a(a){var b;return(b=d("WAWap")).wap("skey",null,b.wap("id",null,b.BIG_ENDIAN_CONTENT(a.keyId,3)),b.wap("value",null,a.keyPair.pubKey),b.wap("signature",null,a.signature))}function b(a){var b;return(b=d("WAWap")).wap("key",null,b.wap("id",null,b.BIG_ENDIAN_CONTENT(a.keyId,3)),b.wap("value",null,a.keyPair.pubKey))}function e(a){a=c("WAWebCryptoLibraryUtilsApi").extractIdentityKey(a);return a.success===!0?d("WAWebCryptoCurve25519").toCurveKeyPubKey(a.value):null}g.xmppSignedPreKey=a;g.xmppPreKey=b;g.extractIdentityKey=e}),98);
__d("WALock",["Promise","WAResolvable","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Lock failed for ",""]);i=function(){return a};return a}function a(a){return{lock:function(c,e){var f=new(d("WAResolvable").Resolvable)(),g=c.map(function(a){return[a,new(d("WAResolvable").Resolvable)()]});(h||(h=b("Promise"))).all(g.map(function(b){var c=b[0],d=b[1];return a.enqueue(c,function(){d.resolve();return f.promise})}))["catch"](function(){d("WATagsLogger").TAGS(["WALock"]).ERROR(i(),c)});return h.all(g.map(function(a){a[0];a=a[1];return a.promise})).then(function(){return e()})["finally"](function(){f.resolve()})},wait:function(b){return a.wait(b)}}}g.makeLock=a}),98);
__d("WALockMap",["WALock","WAPromiseQueue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=-1);a=new(d("WAPromiseQueue").PromiseQueueMap)(a);return d("WALock").makeLock(a)}g.makeLockMap=a}),98);
__d("WACryptoLibraryConfig",[],(function(a,b,c,d,e,f){"use strict";var g={signalFutureMessagesMax:2e3};function a(){return g}function b(a,b){g[a]=b}f.getCryptoLibraryConfig=a;f.setCryptoLibraryConfig=b}),66);
__d("WACryptoEd25519",["WACryptoPrimitives","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(a){var b=h;h=[];try{return a()}finally{((a=h)!=null?a:[]).forEach(function(a){return void a.fill(0)});h=b}}function j(a,b){if(h==null)throw c("WAErr")("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function e(a,b){var c=[k(),k(),k(),k()];d("WACryptoPrimitives").lowlevel.scalarbase(c,b);R(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw c("WAErr")("Incorrect initialiser array provided to the fieldElement");for(var d=0;d<a.length;d++)b[d]=a[d]}return b}function l(a,b){d("WACryptoPrimitives").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return T(a,b)?0:1}function v(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.unpack25519,f=c.lowlevel.pow2523,g=c.lowlevel.M;c=c.lowlevel.S;var h=k();e(h,z);e=k();f(e,b);f=k();g(f,b,e);e=k();c(e,f);c=k();g(c,f,h);y(f,c,1^u(e,b));a.set(f)}function B(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);S(j,i);f(a,h,j)}function C(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("WACryptoPrimitives").lowlevel.unpack25519,f=d("WACryptoPrimitives").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();S(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b,c=(b=d("WACryptoPrimitives")).lowlevel.S,e=b.lowlevel.M,f=b.lowlevel.pow2523;b=b.lowlevel.pack25519;var g=k(),h=k(),i=k(),j=k(),l=k();f(g,a);c(h,g);c(i,h);e(j,i,a);e(l,j,a);f=new Uint8Array(32);b(f,l);return 1&f[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function f(a,b){var c=q();b=U(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();S(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("WACryptoPrimitives").lowlevel.unpack25519;a=d("WACryptoPrimitives").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function Q(a){return i(function(){return O(a)})}function R(a,b){var c=k(),e=k(),f=k(),g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.pack25519;S(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function S(a,b){var c=k();c.set(b);var e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function T(a,b){var c=d("WACryptoPrimitives").lowlevel.pack25519,e=d("WACryptoPrimitives").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function U(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.set25519,f=c.lowlevel.S,g=c.lowlevel.M,h=c.lowlevel.Z,i=c.lowlevel.A,j=c.lowlevel.D,l=c.lowlevel.unpack25519;c=c.lowlevel.pow2523;var o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();e(a[2],n());l(a[1],b);f(r,a[1]);g(s,r,j);h(r,r,a[2]);i(s,a[2],s);f(t,s);f(u,t);g(v,u,t);g(o,v,r);g(o,o,s);c(o,o);g(o,o,r);g(o,o,s);g(o,o,s);g(a[0],o,s);f(q,a[0]);g(q,q,s);T(q,r)&&g(a[0],a[0],p());f(q,a[0]);g(q,q,s);if(T(q,r))return-1;V(a[0])===b[31]>>7&&h(a[0],m(),a[0]);g(a[3],a[0],a[1]);return 0}function V(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=e;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=f;g.elligator=P;g.hashToPoint=Q;g.pack=R;g.inv25519=S;g.unpackneg=U}),98);
__d("WASignalSignatures",["Promise","WACryptoDependencies","WACryptoEd25519","WACryptoPrimitives","WAErr","WAHex","WALogger","WALongInt","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["deserializeSignedPreKey error ",""]);i=function(){return a};return a}function j(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e,f=b.length,g=a.privateKey,h=new Uint8Array(32);(e=d("WACryptoEd25519")).scalarmultBase(h,g);var i=h[31]&128,j=new Uint8Array(f+128);j[0]=254;j.fill(255,1,32);j.set(g,32);j.set(b,64);j.set(c,f+64);var k=e.allocate(Uint8Array,64);e.hashSha512(k,j,f+128);j.set(h,32);h=e.allocate(Float64Array,64);e.reduce(k,h);e.scalarmultBase(j,k);var l=e.allocate(Uint8Array,64);e.hashSha512(l,j,f+64);e.reduce(l,h);for(f=0;f<32;++f)h[f]=k[f];for(f=0;f<32;++f)for(k=0;k<32;++k)h[f+k]+=l[f]*g[k];e.modL(j.subarray(32,64),h);return{pubKeyNegative:i!==0,signedMsg:j}})}function a(a,c){return(h||(h=b("Promise"))).resolve().then(function(){var b=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(b);return k(a,c,b)})}function e(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f,g,h=(f=d("WACryptoPrimitives")).lowlevel.A,i=f.lowlevel.M,j=f.lowlevel.Z,k=f.lowlevel.pack25519,l=f.lowlevel.unpack25519,m=(g=d("WACryptoEd25519")).allocate(Uint8Array,64);m.set(c);m[63]=e&127;var n=g.fieldElement(),o=g.fieldElement(),p=g.fieldElement(),q=g.fieldElement(),r=g.fieldElement(),s=g.allocate(Uint8Array,32),t=g.fieldElement();t[0]=1;l(n,a.subarray(1));j(o,n,t);h(p,n,t);g.inv25519(q,p);i(r,o,q);k(s,r);s[31]=s[31]&127|e&128;return f.signDetachedVerify(b,m,s)})}function k(a,b,c){a=j(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function l(a,b,e){var f=d("WASignalKeys").makeKeyPair(),g=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(g);e=k(e,d("WASignalKeys").serializePubKey(f),g);if(!Number.isSafeInteger(b))throw c("WAErr")("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:f,signature:e}}function f(a,b){var c=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(c);return k(a,b,c)}function m(a){var b=a.id,c=a.keyPair;return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function n(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToSignedPreKeyId(b),ts:d("WALongInt").numberOrThrowIfTooLarge(a),keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){d("WALogger").DEV(i(),a);return null}}function o(a){return new Uint8Array(d("WAHex").parseHex(a))}function p(a){if(a.length===33)return d("WASignalKeys").castToSerializedPubKey(a);else if(a.length===32)return d("WASignalKeys").serializeIdentity(a);else throw c("WAErr")("verifyCertificate publicKey incorrect length")}function q(a,c,d){return(h||(h=b("Promise"))).resolve().then(function(){var b=l(a,c,d),e=m(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=e;g.makeSignature=k;g.makeSignedPreKey=l;g.signSenderKeyMessage=f;g.serializeSignedPreKeyForPrivateStorage=m;g.deserializeSignedPreKey=n;g.convertPublicKeyHexToUint8Array=o;g.convertPublicKeyToSerializedPubKey=p;g.generateSignedPreKey=q}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,(d=d("WAProtoConst")).TYPES.BYTES],counter:[2,d.TYPES.UINT32],previousCounter:[3,d.TYPES.UINT32],ciphertext:[4,d.TYPES.BYTES]};b.internalSpec={registrationId:[5,d.TYPES.UINT32],preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[6,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],identityKey:[3,d.TYPES.BYTES],message:[4,d.TYPES.BYTES]};c.internalSpec={id:[1,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],ratchetKey:[3,d.TYPES.BYTES],identityKey:[4,d.TYPES.BYTES],baseKeySignature:[5,d.TYPES.BYTES]};e.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],ciphertext:[3,d.TYPES.BYTES]};f.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],chainKey:[3,d.TYPES.BYTES],signingKey:[4,d.TYPES.BYTES]};h.internalSpec={generation:[1,d.TYPES.UINT32],signature:[2,d.TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WACryptoDependencies","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Uint8Array(32);i.fill(255);var j=new Uint8Array([1]),k=new Uint8Array([2]);function a(a,c,e){var f,g,h,j,k,l,m,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").async(function(A){while(1)switch(A.prev=A.next){case 0:g=a.regId,h=a.staticKeyPair;j=c.identity;k=c.signedKey.publicKey;l=e.privateKey;m=h.privateKey;q=(f=c.oneTimeKey)==null?void 0:f.publicKey;r=d("WABinary").Binary.build(i,p(m,k),p(l,j),p(l,k),q&&p(l,q)).readByteArray();A.next=9;return b("regeneratorRuntime").awrap(o(r,"WhisperText"));case 9:s=A.sent;t=s[0];u=s[1];v=c.ratchetKey;w=d("WASignalSessions").makeFreshRecvChain(v,u);x=d("WASignalKeys").makeSerializedKeyPair();A.next=17;return b("regeneratorRuntime").awrap(n(t,x,v));case 17:y=A.sent;z=d("WASignalSessions").makeInitialExchangeInfo(c.oneTimeKey==null?null:c.oneTimeKey.id,c.signedKey.id,d("WASignalKeys").serializePubKey(e));return A.abrupt("return",d("WASignalSessions").makeFreshSession({regId:g,pubKey:d("WASignalKeys").serializePubKey(h)},{regId:c.regId,pubKey:j},y.rootKey,[w],d("WASignalSessions").makeFreshSendChain(x,y.chainKey),z,d("WASignalKeys").serializePubKey(e)));case 20:case"end":return A.stop()}},null,this)}function c(a,c,e,f){var g,h,j,k,l,m,n,p,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:h=a.regId,j=a.staticKeyPair;k=j.privateKey;l=f.signed.privateKey;m=e;n=c.pubKey;p=(g=f.oneTime)==null?void 0:g.privateKey;r=d("WABinary").Binary.build(i,q(n,l),q(m,k),q(m,l),p&&q(m,p)).readByteArray();x.next=9;return b("regeneratorRuntime").awrap(o(r,"WhisperText"));case 9:s=x.sent;t=s[0];u=s[1];v=f.ratchet;w=d("WASignalSessions").makeFreshSendChain(v,u);return x.abrupt("return",d("WASignalSessions").makeSession({regId:h,pubKey:d("WASignalKeys").serializePubKey(j)},c,t,[],w,null,0,[],e));case 15:case"end":return x.stop()}},null,this)}function e(a){a=d("WASignalGroupSession").makeSenderKeyState(d("WASignalKeys").serializePubKey(a),a.privateKey,d("WASignalGroupSession").makeSenderKeyChainKey(0,d("WASignalKeys").makeRawSenderKey()),d("WASignalOther").makeSenderKeyId(),[]);return(h||(h=b("Promise"))).resolve(d("WASignalGroupSession").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d("WASignalGroupSession").makeSenderKeyState(e,void 0,d("WASignalGroupSession").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d("WASignalGroupSession").updateSessionWithNewSenderKeyState(g,e):c=d("WASignalGroupSession").makeNewSenderKeySession(e);return(h||(h=b("Promise"))).resolve(c)}function l(a,c){var e,f,g,i;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=l.sent;f=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};g=f(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperMessageKeys",80)}).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)});i=f(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return l.abrupt("return",(h||(h=b("Promise"))).all([i,g]));case 7:case"end":return l.stop()}},null,this)}function m(a,c){var e,f,g,i;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=l.sent;f=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};g=f(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperGroup",50)}).then(function(b){return d("WASignalGroupSession").makeSenderKeyMsgKey(a,b)});i=f(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return l.abrupt("return",(h||(h=b("Promise"))).all([i,g]));case 7:case"end":return l.stop()}},null,this)}function n(a,c,e){var f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:f=c.privateKey;g=e;h=d("WASignalKeys").ecdh(f,g);l.next=5;return b("regeneratorRuntime").awrap(o(new Uint8Array(h),"WhisperRatchet",a));case 5:i=l.sent;j=i[0];k=i[1];return l.abrupt("return",{rootKey:j,chainKey:k});case 9:case"end":return l.stop()}},null,this)}function o(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e===void 0&&(e=null);g.next=3;return b("regeneratorRuntime").awrap(d("WASignalOther").hkdf(a,e,c,64));case 3:f=g.sent;return g.abrupt("return",[d("WASignalOther").sliceBytes(f,0,32),d("WASignalOther").sliceBytes(f,32,32)]);case 5:case"end":return g.stop()}},null,this)}function p(a,b){return new Uint8Array(d("WASignalKeys").ecdh(a,b))}function q(a,b){return p(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=l;g.deriveSenderKeyMsgKey=m;g.calculateRatchet=n}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoDependencies","WACryptoLibraryConfig","WACryptoUtils","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptMsgFromSession error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["deserializePkMsg error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["deserializeMsg error ",""]);k=function(){return a};return a}var l=40,m=8,n=2e3;function a(a,c){var e,f,g,h,i,j,k,l,n,o,p,q,r,s,u,x,y,z,A,B,C;return b("regeneratorRuntime").async(function(D){while(1)switch(D.prev=D.next){case 0:e=a.sendChain;D.next=3;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(e.nextMsgIndex,e.chainKey));case 3:f=D.sent;g=f[0];h=f[1];D.next=8;return b("regeneratorRuntime").awrap(w(h));case 8:i=D.sent;j=i.cipherKey;k=i.macKey;D.next=13;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:h.iv},j,c));case 13:l=D.sent;n=new(d("WABinary").Binary)();n.writeByteArray(a.local.pubKey);n.writeByteArray(a.remote.pubKey);o=n.size();n.writeUint8(t(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:e.ratchetKey.serializedPubKey,counter:h.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:l},n);p=n.readByteArray();D.next=23;return b("regeneratorRuntime").awrap(v(k,p));case 23:q=D.sent;r=p.subarray(o);s=d("WABinary").Binary.build(r,new Uint8Array(q,0,m)).readByteArray();y=a.initialExchangeInfo;y!=null?(A=new(d("WABinary").Binary)(),A.writeUint8(t(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION)),d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(z=y.remoteOneTimeId)!=null?z:void 0,signedPreKeyId:y.remoteSignedId,baseKey:y.localOneTimePubKey,identityKey:a.local.pubKey,message:s},A),u="pkmsg",x=A.readByteArray()):(u="msg",x=s);B=d("WASignalSessions").makeSendChain(e.ratchetKey,h.index+1,g);C=d("WASignalSessions").updateChains(a,a.recvChains,B);return D.abrupt("return",[C,{type:u,ciphertext:x}]);case 31:case"end":return D.stop()}},null,this)}function c(a,c){var e,f,g,h,i,j,k,l,m,n,o,p,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:if(!(a==null)){t.next=2;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 2:t.next=4;return b("regeneratorRuntime").awrap(q(a,c));case 4:e=t.sent;if(!e.success){t.next=10;break}f=e.value,g=f[0],h=f[1];return t.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:g,plaintext:h}));case 10:i=a.prevSessions,j=e,k=0;case 13:if(!(!j.success&&k<i.length)){t.next=22;break}l=d("WASignalSessions").parseSession(i[k]);t.next=17;return b("regeneratorRuntime").awrap(q(l,c));case 17:m=t.sent,m.success&&((n=m.value,o=n[0],p=n[1]),r=d("WASignalSessions").setPrevSessions(o,[d("WASignalSessions").detachSession(a)].concat(i.slice(0,k),i.slice(k+1))),s=!a||!d("WACryptoUtils").serializedPubKeysEqual(r.remote.pubKey,a.remote.pubKey)?r.remote.pubKey:null,j=d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:s,baseSession:l,usedPreKey:null},updatedSession:r,plaintext:p}));case 19:k++;t.next=13;break;case 22:return t.abrupt("return",j);case 23:case"end":return t.stop()}},null,this)}function e(a,b){if(x(a,b))return a;var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d("WASignalSessions").parseSession(c[e]);if(x(f,b))return d("WASignalSessions").setPrevSessions(f,[d("WASignalSessions").detachSession(a)].concat(c.slice(0,e),c.slice(e+1)))}return null}function f(a,c,e,f){var g,h,i,j,k,m,n,o,p,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:h=f.localSignedPreKey;if(!(h==null)){u.next=3;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidSignedPreKey"));case 3:i=d("WASignalSignatures").deserializeSignedPreKey(h);if(!(i==null)){u.next=6;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization"));case 6:if(!(i.id!==e.localSignedPreKeyId)){u.next=8;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch"));case 8:j=null;if(!(e.localOneTimeKeyId!=null)){u.next=18;break}k=f.localOneTimeKey;if(!(k==null)){u.next=13;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidOneTimeKey"));case 13:j=d("WASignalKeys").deserializePreKey(k);if(!(j==null)){u.next=16;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization"));case 16:if(!(j.id!==e.localOneTimeKeyId)){u.next=18;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalOneTimeKeyMismatch"));case 18:u.next=20;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionIncoming(a,e.remote,e.sessionBaseKey,{signed:i.keyPair,oneTime:(g=j)==null?void 0:g.keyPair,ratchet:d("WASignalKeys").toSerializedKeyPair(i.keyPair)}));case 20:m=u.sent;n=m.remote.pubKey;o=!c||!d("WACryptoUtils").serializedPubKeysEqual(n,c.remote.pubKey)?n:null;c&&!o&&(m=d("WASignalSessions").setPrevSessions(m,[d("WASignalSessions").detachSession(c)].concat(c.prevSessions.slice(0,l-1))));u.next=26;return b("regeneratorRuntime").awrap(q(m,e));case 26:p=u.sent;if(p.success){u.next=29;break}return u.abrupt("return",p);case 29:r=p.value,s=r[0],t=r[1];return u.abrupt("return",d("WAResultOrError").makeResult({newIdentity:o,baseSession:m,updatedSession:s,plaintext:t}));case 31:case"end":return u.stop()}},null,this)}function o(a){var b,c,e=null;try{var f=s(a,d("WASignalSessions").FORMAT_VERSION,m);if(!f.success)return f;f=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");b=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g))}catch(a){d("WALogger").DEV(k(),a);return d("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d("WAResultOrError").makeResult(f)}function p(a){a=s(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var h=a.registrationId,i=a.preKeyId,k=a.signedPreKeyId,l=a.baseKey,m=a.identityKey;a=a.message;if(h==null||k==null||l==null||m==null||a==null)return d("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");f=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(l));b={regId:d("WASignalOther").castRegistrationId(h),pubKey:d("WASignalKeys").castToSerializedPubKey(new Uint8Array(m))};e=i!=null?d("WASignalKeys").castToPreKeyId(i):null;c=d("WASignalKeys").castToSignedPreKeyId(k);g=new Uint8Array(a)}catch(a){d("WALogger").DEV(j(),a);return d("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}l=o(g);return!l.success?l:d("WAResultOrError").makeResult(babelHelpers["extends"]({},l.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function q(a,c){var e,f,g,h,j,k,l,n,o,p,q,s,t,u,x,y,z,A,B,C,D,E,F,G,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:e=c.ratchetPubKey,f=c.counter,g=c.ciphertext,h=c.versionContentMac;j=a.recvChains;k=a.recvChains.findIndex(function(a){return d("WACryptoUtils").serializedPubKeysEqual(a.ratchetPubKey,e)});if(!(k===-1)){J.next=24;break}J.next=6;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,e));case 6:o=J.sent;p=d("WASignalSessions").makeFreshRecvChain(e,o.chainKey);J.next=10;return b("regeneratorRuntime").awrap(r(p,f));case 10:q=J.sent;if(q.success){J.next=13;break}return J.abrupt("return",q);case 13:s=q.value;t=d("WASignalKeys").makeSerializedKeyPair();J.next=17;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(o.rootKey,t,e));case 17:u=J.sent;x=j.slice(-4);x.push(s.updatedChain);n=s.msgKey;l=d("WASignalSessions").ratchetSession(a,x,d("WASignalSessions").makeFreshSendChain(t,u.chainKey),u.rootKey);J.next=34;break;case 24:J.next=26;return b("regeneratorRuntime").awrap(r(j[k],f));case 26:y=J.sent;if(y.success){J.next=29;break}return J.abrupt("return",y);case 29:z=y.value,A=j.slice(),A[k]=z.updatedChain,n=z.msgKey,l=d("WASignalSessions").updateChains(a,A,a.sendChain);case 34:J.next=36;return b("regeneratorRuntime").awrap(w(n));case 36:B=J.sent;C=B.cipherKey;D=B.macKey;E=d("WABinary").Binary.build(a.remote.pubKey,a.local.pubKey,h.subarray(0,-m)).readByteArray();J.next=42;return b("regeneratorRuntime").awrap(v(D,E));case 42:F=J.sent;G=h.subarray(-m);H=!d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(F,0,m),G);I=null;J.prev=46;J.next=49;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:n.iv},C,g));case 49:I=J.sent;J.next=55;break;case 52:J.prev=52,J.t0=J["catch"](46),d("WALogger").DEV(i(),J.t0);case 55:if(!(H&&I==null)){J.next=59;break}if(!(k===-1)){J.next=58;break}return J.abrupt("return",d("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"));case 58:return J.abrupt("return",d("WAResultOrError").makeError("errInvalidMacInvalidCipherKey"));case 59:if(!H){J.next=61;break}return J.abrupt("return",d("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext"));case 61:if(!(I==null)){J.next=63;break}return J.abrupt("return",d("WAResultOrError").makeError("errUnknownInvalidCipherKey"));case 63:return J.abrupt("return",d("WAResultOrError").makeResult([l,I]));case 64:case"end":return J.stop()}},null,this,[[46,52]])}function r(a,c){var e,f,g,h,i,j,k,l,m,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:e=c-a.nextMsgIndex;f=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(!(e>f)){r.next=4;break}return r.abrupt("return",d("WAResultOrError").makeError("errSignalTooManyMessagesInFuture"));case 4:g=a.unusedMsgKeys;if(!(e<0)){r.next=10;break}h=g.findIndex(function(a){return a.index===c});if(!(h===-1)){r.next=9;break}return r.abrupt("return",d("WAResultOrError").makeError("errDuplicateMsg"));case 9:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:g[h],updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,u(g,h))}));case 10:i=a.nextMsgIndex;r.next=13;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(i,a.chainKey));case 13:j=r.sent;k=j[0];l=j[1];m=null;if(!(e>0)){r.next=31;break}o=e+g.length-n;o>0?(m=g.slice(o),o-=g.length):m=g.slice();p=i+1;case 21:if(!(p<=c)){r.next=31;break}o>0?o--:m.push(l);r.next=25;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(p,k));case 25:q=r.sent,k=q[0],l=q[1];case 28:p++;r.next=21;break;case 31:return r.abrupt("return",d("WAResultOrError").makeResult({msgKey:l,updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,c+1,k,m||g)}));case 32:case"end":return r.stop()}},null,this)}function s(a,b,c){if(a.length<1)return d("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var e=a[0]>>>4;if(e!==b)return e<b?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");e=a.length-c;return e<1?d("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):d("WAResultOrError").makeResult(a.subarray(1,e))}function t(a,b){return(a<<4|b)&255}function u(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function v(a,b){return d("WACryptoDependencies").getCrypto().subtle.sign(d("WASignalOther").HMAC_SHA256,a,b)}function w(a){return(h||(h=b("Promise"))).all([d("WASignalOther").makeCryptoKey(a.cipherKey,"aes-cbc"),d("WASignalOther").makeCryptoKey(a.macKey,"hmac-sha256")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function x(a,b){a=a.aliceBaseKey;return!a?!1:d("WACryptoUtils").serializedPubKeysEqual(a,b)}g.MAX_UNUSED_KEYS=n;g.encryptMsg=a;g.decryptMsg=c;g.findMatchingSession=e;g.decryptPkMsgWithNewSession=f;g.deserializeMsg=o;g.deserializePkMsg=p;g.decryptMsgFromSession=q;g.readContent=s;g.versionByte=t}),98);
__d("WASignalGroupCipher",["WABinary","WACryptoDependencies","WACryptoLibraryConfig","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["deserializeSenderKeyDistributionMsg error ",""]);i=function(){return a};return a}var j=64;function a(a,c){var e,f,g,h,i,j,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:e=k(a);if(e.success){m.next=3;break}return m.abrupt("return",e);case 3:f=e.value,g=f.senderKeyId,h=f.iteration,i=f.signingKeyPublic,j=f.chainKey;m.next=6;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSenderKeySessionIncoming(g,h,i,j,c));case 6:l=m.sent;return m.abrupt("return",d("WAResultOrError").makeResult(l));case 8:case"end":return m.stop()}},null,this)}function c(a){a=d("WASignalGroupSession").serializeSenderKeyState(a);var b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:a.senderKeyId,iteration:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").iteration,chainKey:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").seed,signingKey:d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey")["public"]},b);return b.readByteArray()}function e(a,c){var e,f,g,h,i,j,k,l,n,o,p,q,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:if(!(!a.senderKeyStates||a.senderKeyStates.length===0)){u.next=2;break}return u.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 2:e=a.senderKeyStates[a.senderKeyStates.length-1];u.next=5;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(e.senderKeyChainKey.nextMsgIndex,e.senderKeyChainKey.chainKey));case 5:f=u.sent;g=f[0];h=f[1];u.next=10;return b("regeneratorRuntime").awrap(m(h.seed));case 10:i=u.sent;j=i[0];k=i[1];u.next=15;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:k},j,c));case 15:l=u.sent;n=new(d("WABinary").Binary)();d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:e.senderKeyId,iteration:h.iteration,ciphertext:l},n);o=new(d("WABinary").Binary)();o.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));o.writeBinary(n);p=d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalSessions").definedOrThrow(e.senderSigningKeyPrivate,"senderSigningKeyPrivate"),e.senderSigningKeyPublic);q=d("WASignalSignatures").signSenderKeyMessage(p,o.readByteArray());r=new(d("WABinary").Binary)();r.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));r.writeBinary(n);r.writeByteArray(q);s=d("WASignalGroupSession").makeSenderKeyChainKey(h.iteration+1,g);t=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,s,e.senderKeyId,e.unusedMsgKeys));return u.abrupt("return",d("WAResultOrError").makeResult([t,r.readByteArray()]));case 30:case"end":return u.stop()}},null,this)}function f(a,c){var e,f,g,h,i,j,k,l,p,q,r,s,t,u,v;return b("regeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:e=c.senderKeyMessageId,f=c.iteration,g=c.ciphertext,h=c.versionContentMac;i=d("WASignalGroupSession").findSenderKeyState(a,e);if(!(i==null)){w.next=4;break}return w.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 4:j=i.senderSigningKeyPublic;k=n(h,j);if(k){w.next=8;break}return w.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 8:w.next=10;return b("regeneratorRuntime").awrap(o(i,f));case 10:l=w.sent;if(l.success){w.next=13;break}return w.abrupt("return",l);case 13:p=l.value;q=p.msgKey;r=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,p.updatedSenderKeyState);w.next=18;return b("regeneratorRuntime").awrap(m(q.seed));case 18:s=w.sent;t=s[0];u=s[1];w.next=23;return b("regeneratorRuntime").awrap(d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:u},t,g));case 23:v=w.sent;return w.abrupt("return",d("WAResultOrError").makeResult([r,v]));case 25:case"end":return w.stop()}},null,this)}function k(a){var b,c,e,f;try{a=d("WASignalCipher").readContent(a,d("WASignalGroupSession").FORMAT_VERSION,0);if(!a.success)return a;a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,a.value);b=a.id;c=a.iteration;var g=d("WASignalSessions").bytesOrThrow(a.signingKey,33,"signingKey");e=d("WASignalKeys").castToSerializedPubKey(g);f=d("WASignalSessions").bytesOrThrow(a.chainKey,32,"chainKey");if(b==null||c==null)return d("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(a){d("WALogger").DEV(i(),a);return d("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return d("WAResultOrError").makeResult({senderKeyId:b,iteration:c,signingKeyPublic:e,chainKey:f})}function l(a){if(a.length<1)return d("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var b=a[0]>>>4;if(b!==d("WASignalGroupSession").FORMAT_VERSION)return b<d("WASignalGroupSession").FORMAT_VERSION?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");if(a.length<1+j)return d("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var c,e,f;try{b=a.subarray(1,-j);b=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,b);c=b.id;e=b.iteration;f=b.ciphertext;if(c==null||e==null||f==null)return d("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(a){d("WALogger").ERROR(h(),a);return d("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return d("WAResultOrError").makeResult({senderKeyMessageId:c,iteration:e,ciphertext:new Uint8Array(f),versionContentMac:a})}function m(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=new(d("WABinary").Binary)(a);e=d("WASignalOther").readBytes(c,16);f=d("WASignalOther").readBytes(c,32);g.next=5;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(f,"aes-cbc"));case 5:g.t0=g.sent;g.t1=e;return g.abrupt("return",[g.t0,g.t1]);case 8:case"end":return g.stop()}},null,this)}function n(a,b){var c=a.subarray(a.length-j);a=a.subarray(0,a.length-j);return d("WASignalSignatures").verifyMsgSignalVariant(b,a,d("WASignalOther").toBytes(d("WASignalOther").toBuffer(c),64))}function o(a,c){var e,f,g,h,i,j,k,l,m,n,o,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:e=a;f=c-e.senderKeyChainKey.nextMsgIndex;g=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(!(f>g)){s.next=5;break}return s.abrupt("return",d("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture"));case 5:h=a.unusedMsgKeys||[];if(!(f<0)){s.next=11;break}i=h.findIndex(function(a){return a.iteration===c});if(!(i===-1)){s.next=10;break}return s.abrupt("return",d("WAResultOrError").makeError("errDuplicateMsg"));case 10:return s.abrupt("return",d("WAResultOrError").makeResult({msgKey:h[i],updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,e.senderKeyChainKey,e.senderKeyId,p(h,i))}));case 11:j=e.senderKeyChainKey.nextMsgIndex;s.next=14;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(j,e.senderKeyChainKey.chainKey));case 14:k=s.sent;l=k[0];m=k[1];n=null;if(!(f>0)){s.next=32;break}o=f+h.length-d("WASignalCipher").MAX_UNUSED_KEYS;o>0?(n=h.slice(o),o-=h.length):n=h.slice();q=j+1;case 22:if(!(q<=c)){s.next=32;break}o>0?o--:n.push(m);s.next=26;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveSenderKeyMsgKey(q,l));case 26:r=s.sent,l=r[0],m=r[1];case 29:q++;s.next=22;break;case 32:return s.abrupt("return",d("WAResultOrError").makeResult({msgKey:m,updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,d("WASignalGroupSession").makeSenderKeyChainKey(c+1,l),a.senderKeyId,n||h)}));case 33:case"end":return s.stop()}},null,this)}function p(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}g.processSenderKeyDistributionMsg=a;g.createSenderKeyDistributionProto=c;g.encryptSenderKeyMsgWithSession=e;g.decryptSenderKeyMsgFromSession=f;g.deserializeSenderKeyMsg=l}),98);
__d("WACryptoLibrary",["WACryptoUtils","WAJids","WALockMap","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSessionForRecipient pkmsg signature verification result: ",""]);h=function(){return a};return a}var i=d("WALockMap").makeLockMap(60*1e3),j=[],k=300;function l(a){j.push(a),j.length>=k&&j.shift()}function a(a){a(j),j=[]}function m(a,c){var e,f,g,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:l("createOutgoingSession");e=t(c);f=e.signedKey;j.next=5;return b("regeneratorRuntime").awrap(d("WASignalSignatures").verifyMsgSignalVariant(e.identity,f.publicKey,f.signature));case 5:g=j.sent;d("WALogger").DEV(h(),g);if(g){j.next=10;break}l("createOutgoingSession: errSignalInvalidKey");return j.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 10:j.next=12;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionOutgoing(a,e,d("WASignalKeys").makeKeyPair()));case 12:i=j.sent;return j.abrupt("return",d("WAResultOrError").makeResult(i));case 14:case"end":return j.stop()}},null,this)}function c(a,c,d,e,f){var g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:g=a.handleNewSession;l("establishOutgoingSession");j.next=4;return b("regeneratorRuntime").awrap(m(c,e));case 4:h=j.sent;if(h.success){j.next=7;break}return j.abrupt("return",h);case 7:i=h.value;return j.abrupt("return",g(d,i,i.remote.pubKey,null,f));case 9:case"end":return j.stop()}},null,this)}function e(a,c,e,f){var g=a.loadSession,h=a.handleNewSession;l("encryptContent");return i.lock([d("WAJids").extractUserJid(c)],function(){var a,i,j,k,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:a=null;case 1:o.next=3;return b("regeneratorRuntime").awrap(g(c,"cryptoLibraryEncryptContent"));case 3:i=o.sent;if(!(i==null)){o.next=7;break}l("encryptContent: errSignalInvalidKey");return o.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 7:if(!(f!=null&&!d("WACryptoUtils").uint8ArraysEqual(f,i.remote.pubKey))){o.next=10;break}l("encryptContent: identity-mismatch");return o.abrupt("return",d("WAResultOrError").makeError("identity-mismatch"));case 10:o.next=12;return b("regeneratorRuntime").awrap(d("WASignalCipher").encryptMsg(i,e));case 12:j=o.sent;k=j[0];m=j[1];o.next=17;return b("regeneratorRuntime").awrap(h(c,k,k.remote.pubKey));case 17:n=o.sent,n.success?a=d("WAResultOrError").makeResult(babelHelpers["extends"]({},m,{baseKey:k.aliceBaseKey})):n.error;case 19:if(a==null){o.next=1;break}case 20:return o.abrupt("return",a);case 21:case"end":return o.stop()}},null,this)})}function f(a,c,e,f,g){var h=a.loadSession,j=a.handleNewSession,k=a.loadSignedPreKey,m=a.loadOneTimePreKey;l("decryptContent");return i.lock([d("WAJids").extractUserJid(e)],function(){var a,i,o,p,q,r,s,t,u,v,w,x;return b("regeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:a=!1;y.next=3;return b("regeneratorRuntime").awrap(h(e,"decryptContent"));case 3:i=y.sent;if(!(f.type==="pkmsg")){y.next=18;break}p=d("WASignalCipher").deserializePkMsg(f.ciphertext);if(p.success){y.next=9;break}l("decryptContent: errCryptoDeserialization");return y.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 9:q=p.value;y.next=12;return b("regeneratorRuntime").awrap(n({loadSignedPreKey:k,loadOneTimePreKey:m},c,q,i));case 12:r=y.sent;if(r.success){y.next=15;break}return y.abrupt("return",r);case 15:o=r.value;y.next=30;break;case 18:f.type;s=d("WASignalCipher").deserializeMsg(f.ciphertext);if(s.success){y.next=23;break}l("decryptContent: errCryptoDeserialization");return y.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 23:t=s.value;y.next=26;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptMsg(i,t));case 26:u=y.sent;if(u.success){y.next=29;break}return y.abrupt("return",u);case 29:o=u.value;case 30:v=o,w=v.newSessionInfo;if(!(w&&(w.newIdentity!=null||w.usedPreKey!=null))){y.next=34;break}y.next=34;return b("regeneratorRuntime").awrap(j(e,w.baseSession,w.newIdentity,w.usedPreKey));case 34:if(a){y.next=39;break}x=w==null?void 0:w.baseSession.remote.pubKey;y.next=38;return b("regeneratorRuntime").awrap(g(new Uint8Array(o.plaintext),x));case 38:a=!0;case 39:y.next=41;return b("regeneratorRuntime").awrap(j(e,o.updatedSession,o.updatedSession.remote.pubKey));case 41:return y.abrupt("return",d("WAResultOrError").makeResult());case 42:case"end":return y.stop()}},null,this)})}function n(a,c,e,f){var g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:g=a.loadSignedPreKey,h=a.loadOneTimePreKey;l("decryptPkMsg");i=f&&d("WASignalCipher").findMatchingSession(f,e.sessionBaseKey);if(!i){x.next=13;break}x.next=6;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptMsgFromSession(i,e));case 6:j=x.sent;if(j.success){x.next=9;break}return x.abrupt("return",j);case 9:k=j.value,m=k[0],n=k[1];return x.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:m,plaintext:n}));case 13:o=e.localOneTimeKeyId;x.next=16;return b("regeneratorRuntime").awrap(g(e.localSignedPreKeyId));case 16:p=x.sent;if(!(o==null)){x.next=21;break}x.t0=null;x.next=24;break;case 21:x.next=23;return b("regeneratorRuntime").awrap(h(o));case 23:x.t0=x.sent;case 24:q=x.t0;x.next=27;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptPkMsgWithNewSession(c,f,e,{localSignedPreKey:p,localOneTimeKey:q}));case 27:r=x.sent;if(r.success){x.next=30;break}return x.abrupt("return",r);case 30:s=r.value,t=s.newIdentity,u=s.baseSession,v=s.updatedSession,w=s.plaintext;return x.abrupt("return",d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:t,baseSession:u,usedPreKey:o},updatedSession:v,plaintext:w}));case 32:case"end":return x.stop()}},null,this)}function o(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;l("encryptGroupContent");return i.lock([e,d("WAJids").extractUserJid(f)],function(){var c,i,j,k,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:c=null;case 1:q.next=3;return b("regeneratorRuntime").awrap(h(e,f));case 3:i=q.sent;if(i.success){q.next=6;break}return q.abrupt("return",d("WAResultOrError").makeError(i.error));case 6:j=i.value;q.next=9;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").encryptSenderKeyMsgWithSession(j,g));case 9:k=q.sent;if(!k.success){q.next=18;break}m=k.value,n=m[0],o=m[1];q.next=14;return b("regeneratorRuntime").awrap(a(e,f,n));case 14:p=j.senderKeyStates[j.senderKeyStates.length-1];c=d("WAResultOrError").makeResult({ciphertext:{ciphertext:o,type:"skmsg"},senderKeyId:p.senderKeyId,senderKeyDistributionProto:d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(p))});q.next=20;break;case 18:l("encryptGroupContent: sender-key-no-session");return q.abrupt("return",d("WAResultOrError").makeError("sender-key-no-session"));case 20:if(c==null){q.next=1;break}case 21:return q.abrupt("return",c);case 22:case"end":return q.stop()}},null,this)})}function p(c,e,f,g,h){var j=c.loadSenderKeySession,a=c.saveSenderKeySession;l("decryptGroupContent");return i.lock([e,d("WAJids").extractUserJid(f)],function(){var c,i,k,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:c=!1;r.next=3;return b("regeneratorRuntime").awrap(j(e,f));case 3:i=r.sent;if(i.success){r.next=6;break}return r.abrupt("return",d("WAResultOrError").makeError(i.error));case 6:k=d("WASignalGroupCipher").deserializeSenderKeyMsg(g);if(k.success){r.next=10;break}l("decryptGroupContent: errCryptoDeserialization");return r.abrupt("return",d("WAResultOrError").makeError("errCryptoDeserialization"));case 10:m=i.value;r.next=13;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").decryptSenderKeyMsgFromSession(m,k.value));case 13:n=r.sent;if(n.success){r.next=16;break}return r.abrupt("return",n);case 16:o=n.value,p=o[0],q=o[1];if(c){r.next=21;break}r.next=20;return b("regeneratorRuntime").awrap(h(new Uint8Array(q)));case 20:c=!0;case 21:r.next=23;return b("regeneratorRuntime").awrap(a(e,f,p));case 23:return r.abrupt("return",d("WAResultOrError").makeResult());case 24:case"end":return r.stop()}},null,this)})}function q(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;l("saveSenderKeySession");return i.lock([e,d("WAJids").extractUserJid(f)],function(){var c,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:c=null;if(!h){l.next=6;break}l.next=4;return b("regeneratorRuntime").awrap(h(e,f));case 4:i=l.sent,c=i.success?i.value:null;case 6:l.next=8;return b("regeneratorRuntime").awrap(d("WASignalGroupCipher").processSenderKeyDistributionMsg(g,c));case 8:j=l.sent;if(j.success){l.next=11;break}return l.abrupt("return",j);case 11:k=j.value;l.next=14;return b("regeneratorRuntime").awrap(a(e,f,k));case 14:return l.abrupt("return",d("WAResultOrError").makeResult());case 15:case"end":return l.stop()}},null,this)})}function r(c,e,f,g){var a=c.saveSenderKeySession;l("rotateGroupSenderKey");return i.lock([e,d("WAJids").extractUserJid(f)],function(){var c,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSenderKeySessionOutgoing(g));case 2:c=i.sent;h=c.senderKeyStates[0].senderKeyId;i.next=6;return b("regeneratorRuntime").awrap(a(e,f,c));case 6:return i.abrupt("return",{senderKeyId:h});case 7:case"end":return i.stop()}},null,this)})}function s(c,e,f){var g,a,h,i,j,k;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:g=c.loadSenderKeySession,a=c.saveSenderKeySession;l("createSenderKeyDistributionMsg");m.next=4;return b("regeneratorRuntime").awrap(g(e,f));case 4:h=m.sent;i=h.error;if(!(!h.success&&i==="errLoadSenderKeySession")){m.next=15;break}m.next=9;return b("regeneratorRuntime").awrap(d("WASignalKeys").makeKeyPair());case 9:j=m.sent;m.next=12;return b("regeneratorRuntime").awrap(r({saveSenderKeySession:a},e,f,j));case 12:m.next=14;return b("regeneratorRuntime").awrap(g(e,f));case 14:h=m.sent;case 15:if(!h.success){m.next=19;break}k=h.value.senderKeyStates.slice(-1);if(!(k.length>0)){m.next=19;break}return m.abrupt("return",d("WAResultOrError").makeResult(d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(k[0]))));case 19:l("createSenderKeyDistributionMsg: errGetSenderKeyProto");return m.abrupt("return",d("WAResultOrError").makeError("errGetSenderKeyProto"));case 21:case"end":return m.stop()}},null,this)}function t(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;l("sanitizeInitialSessionInfo");var f=d("WASignalKeys").castToSerializedPubKey(e.publicKey);return{regId:d("WASignalOther").castRegistrationId(b),identity:d("WASignalKeys").castToSerializedPubKey(c),signedKey:{id:d("WASignalKeys").castToSignedPreKeyId(e.id),publicKey:f,signature:d("WASignalOther").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d("WASignalKeys").castToPreKeyId(a.id),publicKey:d("WASignalKeys").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}g.publishLogs=a;g.createOutgoingSession=m;g.establishOutgoingSession=c;g.encryptContent=e;g.decryptContent=f;g.encryptGroupContent=o;g.decryptGroupContent=p;g.saveSenderKeySession=q;g.rotateGroupSenderKey=r;g.createSenderKeyDistributionMsg=s}),98);
__d("WAWebCryptoLibrary",["Promise","WAByteArray","WACryptoLibrary","WAJids","WALogger","WASignalKeys","WAWebBackendJobs.flow","WAWebCryptoLibraryDbCallbacksApi","WAWebCryptoLibraryUtilsApi","WAWebSignalCommonErrors","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::getGroupSenderKeyInfo failed with error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::getGroupSenderKeyInfo"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::encryptGroupMessage failed with error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::encryptGroupMessage no sender key, generating a new one"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptSignalProto failed to decrypt: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptMessage failed with error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptSignalProto"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::createSignalSession failed with error ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::createSignalSession"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptGroupSignalProto failed to decrypt: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptGroupMessage failed ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::decryptGroupSignalProto"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::processSenderKeyDistributionMsg failed with error ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::processSenderKeyDistributionMsg"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::encryptSignalProto:failed with error ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::encryptSignalProto"]);x=function(){return a};return a}var y=d("WAWebCryptoLibraryDbCallbacksApi").getCryptoDbCallbacks();function z(){var a;return{establishOutgoingSession:(a=d("WACryptoLibrary")).establishOutgoingSession,decryptContent:a.decryptContent,encryptContent:a.encryptContent,encryptGroupContent:a.encryptGroupContent,decryptGroupContent:a.decryptGroupContent,saveSenderKeySession:a.saveSenderKeySession,rotateGroupSenderKey:a.rotateGroupSenderKey}}function a(a,b,c){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("WALogger").LOG(q());var f=(yield y.getRegistrationInfo());if(!f)throw c("err")("No registration info found");return z().establishOutgoingSession({handleNewSession:e?y.handleNewSessionDeprecatedLid:y.handleNewSession},f,d("WAWebWidToJid").widToDeviceJid(a),b,void 0).then(function(a){if(!a.success){d("WALogger").WARN(p(),a.error);throw c("err")(a.error)}})});return A.apply(this,arguments)}function e(a,b,c,d){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){d("WALogger").LOG(o());e=e===d("WAWebBackendJobs.flow").CiphertextType.Pkmsg?"pkmsg":"msg";var i,j=(yield y.getRegistrationInfo());return!j?(h||(h=b("Promise"))).reject(c("err")("No registration info found")):z().decryptContent({handleNewSession:g?y.handleNewSessionDeprecatedLid:y.handleNewSession,loadOneTimePreKey:y.loadOneTimePreKey,loadSession:g?y.loadSessionDeprecatedLid:y.loadSession,loadSignedPreKey:y.loadSignedPreKey},j,d("WAWebWidToJid").widToDeviceJid(a),{ciphertext:f,type:e},function(a){i=d("WAByteArray").uint8ArrayToBuffer(a);return(h||(h=b("Promise"))).resolve()}).then(function(a){if(a.success){if(i==null)throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("Null result on successful decryption");return i}a=a.error;d("WALogger").WARN(n(),a);if(a==="errDuplicateMsg")throw new(d("WAWebSignalCommonErrors").SignalMessageCounterError)(a);else throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)(a)})["catch"](function(a){if(a instanceof d("WAWebSignalCommonErrors").SignalDecryptionError||a instanceof d("WAWebSignalCommonErrors").SignalMessageCounterError)throw a;d("WALogger").ERROR(m(),a.stack);throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("Unexpected decryption error")})});return B.apply(this,arguments)}function f(a,b,e){d("WALogger").LOG(x());return z().encryptContent({handleNewSession:e?y.handleNewSessionDeprecatedLid:y.handleNewSession,loadSession:e?y.loadSessionDeprecatedLid:y.loadSession},d("WAWebWidToJid").widToDeviceJid(a),b,null).then(function(a){if(a.success){var b=a.value,e=b.type;b=b.ciphertext;return{type:(e=d("WAWebBackendJobs.flow").CiphertextType.cast(e))!=null?e:d("WAWebBackendJobs.flow").CiphertextType.Msg,ciphertext:d("WAByteArray").uint8ArrayToBuffer(b)}}d("WALogger").WARN(w(),a.error);throw c("err")(a.error)})}function C(a,b){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAWebWidToJid").widToDeviceJid(a);b=b?yield y.loadSessionDeprecatedLid(a):yield y.loadSession(a);return b==null?void 0:b.remote});return D.apply(this,arguments)}function E(a,b,c,d){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g;a=d("WAWebWidToJid").widToMulticastJid(a);g=(g=d("WAJids").validateGroupJid(a))!=null?g:d("WAJids").validateStatusJid(a);if(g==null)throw c("err")("Broadcast JIDs are not supported by WACryptoManager yet.");a=d("WAWebWidToJid").widToDeviceJid(b);b=(yield z().encryptGroupContent({loadSenderKeySession:f?y.loadSenderKeySessionDeprecatedLid:y.loadSenderKeySession,saveSenderKeySession:f?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession},g,a,e));if(!b.success&&b.error==="errLoadSenderKeySession"){b.error;d("WALogger").LOG(l());var h=(yield d("WASignalKeys").makeKeyPair());yield z().rotateGroupSenderKey({saveSenderKeySession:f?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession},g,a,h);b=(yield z().encryptGroupContent({loadSenderKeySession:f?y.loadSenderKeySessionDeprecatedLid:y.loadSenderKeySession,saveSenderKeySession:f?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession},g,a,e))}if(b.success){h=b.value.ciphertext.ciphertext;f=b.value.senderKeyDistributionProto;return{ciphertext:d("WAByteArray").uint8ArrayToBuffer(h),senderKeyBytes:d("WAByteArray").uint8ArrayToBuffer(f)}}d("WALogger").WARN(k(),b.error);throw c("err")(b.error)});return F.apply(this,arguments)}function G(a,b,e,f){d("WALogger").LOG(v());return z().saveSenderKeySession({loadSenderKeySession:f?y.loadSenderKeySessionDeprecatedLid:y.loadSenderKeySession,saveSenderKeySession:f?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession},a,d("WAWebWidToJid").widToDeviceJid(b),new Uint8Array(e)).then(function(a){if(!a.success){d("WALogger").WARN(u(),a.error);throw c("err")(a.error)}})}function H(a,c,e,f){d("WALogger").LOG(t());var g=null;return z().decryptGroupContent({loadSenderKeySession:f?y.loadSenderKeySessionDeprecatedLid:y.loadSenderKeySession,saveSenderKeySession:f?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession},d("WAWebWidToJid").widToMulticastJid(a),d("WAWebWidToJid").widToDeviceJid(c),e,function(a){g=d("WAByteArray").uint8ArrayToBuffer(a);return(h||(h=b("Promise"))).resolve()}).then(function(a){if(a.success){if(g==null)throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("Null result on successful decryption of group msg");return g}a=a.error;d("WALogger").WARN(s(),a);if(a==="errDuplicateMsg")throw new(d("WAWebSignalCommonErrors").SignalMessageCounterError)(a);else throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)(a)})["catch"](function(a){if(a instanceof d("WAWebSignalCommonErrors").SignalDecryptionError||a instanceof d("WAWebSignalCommonErrors").SignalMessageCounterError)throw a;d("WALogger").ERROR(r(),a);throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("Unexpected decryption error")})}function I(a,b,c){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("WALogger").LOG(j());e=(yield c("WAWebCryptoLibraryUtilsApi").createSenderKeyDistributionMsg(e?y.loadSenderKeySessionDeprecatedLid:y.loadSenderKeySession,e?y.saveSenderKeySessionDeprecatedLid:y.saveSenderKeySession,d("WAJids").toGroupJid(a.toString({legacy:!0})),d("WAWebWidToJid").widToDeviceJid(b)));if(e.success)return d("WAByteArray").uint8ArrayToBuffer(e.value);d("WALogger").WARN(i(),e.error);throw c("err")(e.error)});return J.apply(this,arguments)}g.getCryptoLibModule=z;g.createSignalSession=a;g.decryptSignalProto=e;g.encryptSignalProto=f;g.getRemoteRegId=C;g.encryptSenderKeyMsgSignalProto=E;g.processSenderKeyDistributionMsg=G;g.decryptGroupSignalProto=H;g.getGroupSenderKeyInfo=I}),98);
__d("WAWebCryptoLibraryDbCallbacksApi",["Promise","WAByteArray","WAResultOrError","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","WAWebApiContact","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=!1,j=!0;function a(){var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebWidFactory").createDeviceWid(a);d("WAWebApiContact").checkPnToLidMapping([a],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_LOAD_SESSION);a=d("WAWebSignalCommonUtils").createSignalAddress(a,i);a=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSession(a));return(a=a)!=null?a:null});return function(b){return a.apply(this,arguments)}}(),c=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){g=d("WAWebWidFactory").createDeviceWid(a);d("WAWebApiContact").checkPnToLidMapping([g],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_HANDLE_NEW_SESSION);a=d("WAWebSignalCommonUtils").createSignalAddress(g,i);g=d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(g);return(h||(h=b("Promise"))).all([d("WAWebSignalProtocolStore").getSignalProtocolStore().storeSession(a,c),e&&d("WAWebSignalProtocolStore").getSignalProtocolStore().saveIdentity(g,d("WAByteArray").uint8ArrayToBuffer(e)),f!=null&&d("WAWebSignalProtocolStore").getSignalProtocolStore().removePreKey(f)]).then(function(){return d("WAResultOrError").makeResult()})});return function(b,c,d,e,f){return a.apply(this,arguments)}}(),e=function(a,b){b=d("WAWebWidFactory").createDeviceWid(b);d("WAWebApiContact").checkPnToLidMapping([b],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_LOAD_SENDER_KEY_SESSION);a=d("WAWebSignalCommonUtils").createSignalLikeSenderKeyName(a,b,i);return d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSenderKey(a).then(function(a){if(a==null)return d("WAResultOrError").makeError("errLoadSenderKeySession");a=a;return d("WAResultOrError").makeResult(a)})},f=function(a,b,c){b=d("WAWebWidFactory").createDeviceWid(b);d("WAWebApiContact").checkPnToLidMapping([b],d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_CRYPTO_LIBRARY_DB_CALLBACK_API_SAVE_SENDER_KEY_SESSION);a=d("WAWebSignalCommonUtils").createSignalLikeSenderKeyName(a,b,i);return d("WAWebSignalProtocolStore").getSignalProtocolStore().storeSenderKey(a,c)},g=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebSignalCommonUtils").createSignalAddress(d("WAWebWidFactory").createDeviceWid(a),j);a=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSession(a));return(a=a)!=null?a:null});return function(b){return a.apply(this,arguments)}}(),k=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){g=d("WAWebWidFactory").createDeviceWid(a);a=d("WAWebSignalCommonUtils").createSignalAddress(g,j);g=d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(g);return(h||(h=b("Promise"))).all([d("WAWebSignalProtocolStore").getSignalProtocolStore().storeSession(a,c),e&&d("WAWebSignalProtocolStore").getSignalProtocolStore().saveIdentity(g,d("WAByteArray").uint8ArrayToBuffer(e)),f!=null&&d("WAWebSignalProtocolStore").getSignalProtocolStore().removePreKey(f)]).then(function(){return d("WAResultOrError").makeResult()})});return function(b,c,d,e,f){return a.apply(this,arguments)}}(),l=function(a,b){a=d("WAWebSignalCommonUtils").createSignalLikeSenderKeyName(a,d("WAWebWidFactory").createDeviceWid(b),j);return d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSenderKey(a).then(function(a){if(a==null)return d("WAResultOrError").makeError("errLoadSenderKeySession");a=a;return d("WAResultOrError").makeResult(a)})},m=function(a,b,c){a=d("WAWebSignalCommonUtils").createSignalLikeSenderKeyName(a,d("WAWebWidFactory").createDeviceWid(b),j);return d("WAWebSignalProtocolStore").getSignalProtocolStore().storeSenderKey(a,c)};return{loadSession:a,handleNewSession:c,loadSenderKeySession:e,saveSenderKeySession:f,loadSessionDeprecatedLid:g,handleNewSessionDeprecatedLid:k,loadSenderKeySessionDeprecatedLid:l,saveSenderKeySessionDeprecatedLid:m,loadSignedPreKey:function(a){return d("WAWebSignalProtocolStore").getSignalProtocolStore().loadSignedPreKey(a).then(function(b){if(b==null)return null;var c=d("WASignalKeys").makeKeyPairFromArrayBuffers(b.pubKey,b.privKey);c=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:a,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:new Uint8Array(b.signature),timestamp:0});return d("WASignalOther").castToByteEncoded(c)})},loadOneTimePreKey:function(a){return d("WAWebSignalProtocolStore").getSignalProtocolStore().loadPreKey(a).then(function(b){if(b==null)return null;b=d("WASignalKeys").makeKeyPairFromArrayBuffers(b.pubKey,b.privKey);b=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:a,publicKey:d("WASignalKeys").serializePubKey(b),privateKey:b.privateKey});return d("WASignalOther").castToByteEncoded(b)})},getRegistrationInfo:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().getLocalRegistrationId()),b=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().getIdentityKeyPair());if(a==null||b==null)return;if(a&&b)return{regId:d("WASignalOther").castRegistrationId(a),staticKeyPair:d("WASignalKeys").makeKeyPairFromArrayBuffers(b.pubKey.slice(1),b.privKey)}});function c(){return a.apply(this,arguments)}return c}()}}g.getCryptoDbCallbacks=a}),98);
__d("WAWebCryptoLibrarySessionApi",["WALogger","WAWebCryptoLibrary"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["CryptoLibrarySignal::createGroupSenderSignalSession"]);h=function(){return a};return a}function a(a,b){b===void 0&&(b=!1);return d("WAWebCryptoLibrary").getRemoteRegId(a,b).then(function(a){return a==null?void 0:a.regId})}function b(a,b,c){var e;e={identity:new Uint8Array(a.identityKey),oneTimeKey:a.preKey&&{id:(e=a.preKey)==null?void 0:e.keyId,publicKey:((e=a.preKey)==null?void 0:e.publicKey)&&new Uint8Array((e=a.preKey)==null?void 0:e.publicKey)},regId:a.registrationId,signedKey:{id:a.signedPreKey.keyId,publicKey:new Uint8Array(a.signedPreKey.publicKey),signature:new Uint8Array(a.signedPreKey.signature)}};return d("WAWebCryptoLibrary").createSignalSession(b,e,c)}function c(a,b,c,e){d("WALogger").DEV(h());return d("WAWebCryptoLibrary").processSenderKeyDistributionMsg(a,b,c,e)}g.getRemoteRegId=a;g.createSignalSession=b;g.createGroupSenderSignalSession=c}),98);
__d("WAWebCryptoLibraryUtilsApi",["WACryptoPrimitives","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WATimeUtils","WAWebCryptoLibrary","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["extractIdentityKey: parse proto failed"]);h=function(){return a};return a}a=function(){function a(){}var c=a.prototype;c.createSenderKeyDistributionMsg=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield a(c,e));if(!f.success&&f.error==="errLoadSenderKeySession"){var g=(yield d("WASignalKeys").makeKeyPair());yield d("WAWebCryptoLibrary").getCryptoLibModule().rotateGroupSenderKey({saveSenderKeySession:b},c,e,g);f=(yield a(c,e))}if(f.success){b=f.value.senderKeyStates.slice(-1);if(b.length>0)return d("WAResultOrError").makeResult(d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(b[0])))}return d("WAResultOrError").makeError("errGetSenderKeyProto")});function c(b,c,d,e){return a.apply(this,arguments)}return c}();c.getSessionAliceBaseKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield b(a));return(b==null?void 0:b.aliceBaseKey)?d("WAResultOrError").makeResult(d("WASignalOther").toBuffer(b.aliceBaseKey)):d("WAResultOrError").makeError("errSessionExists")});function c(b,c){return a.apply(this,arguments)}return c}();c.extractIdentityKey=function(a){a=d("WASignalCipher").readContent(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var b=a.registrationId,c=a.signedPreKeyId,e=a.baseKey,f=a.identityKey;a=a.message;if(b==null||c==null||e==null||f==null||a==null)return d("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");d("WASignalOther").ensureSize(new Uint8Array(f),33);return d("WAResultOrError").makeResult(f)}catch(a){d("WALogger").WARN(h()).devConsole(a);return d("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}};c.verifySignature=function(a,b,c){a=d("WASignalSignatures").convertPublicKeyToSerializedPubKey(a);c=d("WASignalOther").ensureSize(c,64);return d("WASignalSignatures").verifyMsgSignalVariant(a,b,c)};c.signMsg=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=d("WASignalKeys").makeKeyPairFromArrayBuffers(a,b);b=(yield d("WASignalSignatures").signMsg(a,new Uint8Array(c)));return d("WASignalOther").toBuffer(b)});function c(b,c,d){return a.apply(this,arguments)}return c}();c.makePreKey=function(a){a=d("WASignalKeys").makePreKeys(a,1);a=a[0].plainObject;var b=a.id;a=a.keyPair;return{preKeyId:b,privKey:d("WASignalOther").toBuffer(a.privateKey),pubKey:d("WASignalOther").toBuffer(a.publicKey)}};c.makeSignedPreKey=function(a,b){a=d("WASignalKeys").makeKeyPairFromArrayBuffers(a.pubKey,a.privKey);b=d("WASignalSignatures").makeSignedPreKey(b,d("WATimeUtils").unixTimeMs(),a);return{preKeyId:b.id,signature:d("WASignalOther").toBuffer(b.signature),pubKey:d("WASignalOther").toBuffer(b.keyPair.publicKey),privKey:d("WASignalOther").toBuffer(b.keyPair.privateKey)}};c.makeKeyPair=function(){var a=d("WASignalKeys").makeKeyPair(),b=a.privateKey;a=a.publicKey;return{privKey:d("WASignalOther").toBuffer(b),pubKey:d("WASignalOther").toBuffer(a)}};return a}();a.prototype.verify=d("WACryptoPrimitives").verify;a.prototype.makeRegistrationId=d("WASignalOther").makeRegistrationId;a.prototype.makeSenderKeyId=d("WASignalOther").makeSenderKeyId;c=new a();e=c;g["default"]=e}),98);
__d("WAWebSignalProtocolStore",["WAWebSignalProtocolStoreUnifiedApi"],(function(a,b,c,d,e,f,g){function a(){return c("WAWebSignalProtocolStoreUnifiedApi")}function b(){return c("WAWebSignalProtocolStoreUnifiedApi")}function d(){c("WAWebSignalProtocolStoreUnifiedApi").switchToMemMode()}function e(){c("WAWebSignalProtocolStoreUnifiedApi").switchToPersistMode()}g.getSignalProtocolStore=a;g.getPersistSignalProtocolStore=b;g.enableMemSignalStore=d;g.enablePersistSignalStore=e}),98);
__d("WAWebProtocolStoreCommonApi",["WAWebSignalCommonUtils"],(function(a,b,c,d,e,f,g){function a(a){return a instanceof ArrayBuffer?d("WAWebSignalCommonUtils").bufferToStr(a):a}g.stringifyIdentityKey=a}),98);
__d("WASemaphore",["Promise","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){a===void 0&&(a=1),this.$1=0,this.$3=[],this.$2=a}var d=a.prototype;d.acquire=function(){var a=this;return new(h||(h=b("Promise")))(function(b,c){a.$4(b,c)})};d.availablePermits=function(){return this.$2-this.$1};d.$5=function(){this.$1--,this.$6()};d.$4=function(a,b){var d=this;if(this.$1<this.$2){this.$1++;var e=!1;a({release:function(){if(e)throw c("WAErr")("Permit has already been released");e=!0;d.$5()}})}else this.$7(a,b)};d.$7=function(a,b){this.$3.push([a,b])};d.$6=function(){if(this.$3.length===0)return;var a=this.$3.shift(),b=a[0];a=a[1];this.$4(b,a)};return a}();g.Semaphore=a}),98);
__d("WAWebSignalProtocolStoreCacheApi",["WALogger","WASemaphore","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]signalSnapshot: get dirty updates for\n  session: ","\n  senderKey: ","\n  identity: ",";\n  preKeyRemove: ","\n  sessionRemove: ","\n  identityRemove: ","\n"]);h=function(){return a};return a}a=function(){function a(){var a;this.RegistrationInfo=null;this.SignedPreKeyStore=new Map();this.PrekeyStore=new Map();this.SessionStore=new Map();this.IdentityStore=new Map();this.SenderKeyStore=new Map();this.Mutex={session:new((a=d("WASemaphore")).Semaphore)(),identity:new a.Semaphore(),senderKey:new a.Semaphore(),preKey:new a.Semaphore()};this.Dirty={session:new Set(),identity:new Set(),senderKey:new Set(),preKey:new Set()}}var b=a.prototype;b.$1=function(){var a=this,b=[],d=[];this.Dirty.session.forEach(function(e){var f=a.SessionStore.get(e);if(!f)return;!f.deleted?b.push({address:e,session:c("lodash").cloneDeep(f.session)}):d.push(e)});return{update:b,remove:d}};b.$2=function(){var a=this,b=[];this.Dirty.senderKey.forEach(function(d){var e=a.SenderKeyStore.get(d);if(e){var f=d.split("::");f.length===2&&b.push({senderKeyName:d,senderId:f[1],senderKey:c("lodash").cloneDeep(e)})}});return b};b.$3=function(){var a=this,b=[],c=[];this.Dirty.identity.forEach(function(d){var e=a.IdentityStore.get(d);if(!e)return;!e.deleted?b.push({identifier:d,identityKey:e.identityKey,rowId:e.rowId,sentAddonRowId:e.sentAddonRowId}):c.push(d)});return{update:b,remove:c}};b.$4=function(){var a=this,b=[];this.Dirty.preKey.forEach(function(c){var d=a.PrekeyStore.get(c);(d==null?void 0:d.deleted)&&b.push(parseInt(c,10))});return b};b.generateCacheUpdate=function(){var a=this.$3(),b=this.$1();b={sessionUpdate:b.update,sessionRemove:b.remove,identityUpdate:a.update,identityRemove:a.remove,senderKeyUpdate:this.$2(),preKeyRemove:this.$4()};i(b);return b};b.clearDirty=function(){this.Dirty={session:new Set(),identity:new Set(),senderKey:new Set(),preKey:new Set()}};b.clear=function(){this.RegistrationInfo=null,this.SignedPreKeyStore.clear(),this.PrekeyStore.clear(),this.SessionStore.clear(),this.IdentityStore.clear(),this.SenderKeyStore.clear(),this.clearDirty()};return a}();function i(a){d("WALogger").DEV(h(),a.sessionUpdate.map(function(a){return a.address}).join(",")||"[]",a.senderKeyUpdate.map(function(a){return a.senderKeyName}).join(",")||"[]",a.identityUpdate.map(function(a){return a.identifier}).join(",")||"[]",a.preKeyRemove.join(",")||"[]",a.sessionRemove.join(",")||"[]",a.identityRemove.join(",")||"[]").tags("unified-store")}g.SignalStoreCache=a}),98);
__d("WAWebSignalProtocolStoreUnifiedApi",["$InternalEnum","Promise","WALogger","WAWebApiContact","WAWebBackendApi","WAWebCryptoCurve25519","WAWebIdentityChangeApi","WAWebProtocolStoreCommonApi","WAWebSignalCommonUtils","WAWebSignalConvertApi","WAWebSignalProtocolStoreCacheApi","WAWebSignalStorageUtils","WAWebSignalStoreApi","WAWebSingleSignalSession","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]maybeCleanUpUnconvertedSession: delete unconverted session"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]updateIdentityRangeAfterEncryption: "," updated"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]updateIdentityRangeAfterEncryption: updates: "," to rowId: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]updateIdentityRangeAfterEncryption: start"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]flushBufferToDiskIfNotMemOnlyMode: done"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]flushBufferToDiskIfNotMemOnlyMode: lock complete"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]flushBufferToDiskIfNotMemOnlyMode: start"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]flushBufferToDiskIfNotMemOnlyMode: skip for memory mode"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]deleteAllCache"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal][storeSenderKey][unified] senderKeyName: "," keyId:"," chainCounter: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal][storeSenderKey][unified] senderKeyName: "," keyId:"," chainCounter: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]bulkCreateIdentity: store "," value(s) (new: ","): end"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Signal]bulkCreateIdentity: store "," value(s): start"]);u=function(){return a};return a}var v=b("$InternalEnum").Mirrored(["Persist","Memory"]);a=function(){function a(){this.Direction={SENDING:1,RECEIVING:2},this._cache=new(d("WAWebSignalProtocolStoreCacheApi").SignalStoreCache)(),this._mode=v.Persist}var e=a.prototype;e.getIdentityKeyPair=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;this._cache.RegistrationInfo||(this._cache.RegistrationInfo=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo()));return((a=this._cache.RegistrationInfo)==null?void 0:a.identityKeyPair)?d("WAWebCryptoCurve25519").toSignalCurveKeyPair(this._cache.RegistrationInfo.identityKeyPair):void 0});function c(){return a.apply(this,arguments)}return c}();e.getLocalRegistrationId=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;this._cache.RegistrationInfo||(this._cache.RegistrationInfo=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo()));return((a=this._cache.RegistrationInfo)==null?void 0:a.registrationId)||void 0});function c(){return a.apply(this,arguments)}return c}();e.isTrustedIdentity=function(a,c){return(h||(h=b("Promise"))).resolve(!0)};e._loadIdentityKeyImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)throw c("err")("Tried to get identity key for undefined/null key");if(!this._cache.IdentityStore.has(a)){var b=(yield d("WAWebSignalStoreApi").waSignalStore.getIdentityKeyWithRowId(a));this._cache.IdentityStore.set(a,b)}return((b=this._cache.IdentityStore.get(a))==null?void 0:b.identityKey)||void 0});function a(b){return a.apply(this,arguments)}return a}();e.loadIdentityKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.identity.acquire());try{return yield this._loadIdentityKeyImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._putIdentityImpl=function(a,b){this._cache.IdentityStore.set(a,{identityKey:b}),this._cache.Dirty.identity.add(a)};e.putIdentity=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield this._cache.Mutex.identity.acquire());try{this._putIdentityImpl(a,b)}finally{c.release()}});function c(b,c){return a.apply(this,arguments)}return c}();e._saveIdentity=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("WAWebProtocolStoreCommonApi").stringifyIdentityKey(b);var c=(yield this.loadIdentityKey(a));if(c&&c===b)return;else if(c){if(a===d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(d("WAWebUserPrefsMeUser").getMeUser()).toString()){d("WAWebBackendApi").frontendFireAndForget("handleSelfPrimaryIdentityChange",{});return}a!=null&&(yield d("WAWebIdentityChangeApi").handleNewIdentity(d("WAWebWidFactory").widFromSignalAddress(a),!1))}yield this.putIdentity(a,b)});function a(b,c){return a.apply(this,arguments)}return a}();e.saveIdentity=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)throw c("err")("Tried to put identity key for undefined/null key");yield this._saveIdentity(a,b);if(a!==d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(d("WAWebUserPrefsMeUser").getMeUser()).toString()&&!d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()){a=d("WAWebWidFactory").widFromSignalAddress(a);a=d("WAWebApiContact").getAlternateDeviceWid(d("WAWebWidFactory").createDeviceWidFromWid(a));a=a!=null?d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a).toString():null;a!=null&&(yield this._saveIdentity(a,b))}});function e(b,c){return a.apply(this,arguments)}return e}();e.getIdentityWithRowId=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)throw c("err")("Tried to get identity key for undefined/null key");yield this.loadIdentityKey(a);a=this._cache.IdentityStore.get(a);if(a==null||a.deleted!==void 0)return;return a});function d(b){return a.apply(this,arguments)}return d}();e.bulkGetIdentityWithRowId=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(a==null)throw c("err")("Tried to get identity key for undefined/null key");if(a.length===0)return[];yield this.bulkLoadIdentityKey(a);return a.map(function(a){a=b._cache.IdentityStore.get(a);if(a==null||a.deleted!==void 0)return;return a})});function d(b){return a.apply(this,arguments)}return d}();e._bulkLoadIdentityKeyImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(a==null)throw c("err")("Tried to get identity key for undefined/null key");if(a.length===0)return[];var e=new Array(a.length),f=[];a.forEach(function(a,c){if(b._cache.IdentityStore.has(a)){var d;e[c]=(d=b._cache.IdentityStore.get(a))==null?void 0:d.identityKey}else f.push({id:a,pos:c})});if(f.length>0){a=(yield d("WAWebSignalStoreApi").waSignalStore.bulkGetIdentityKeyWithRowId(f.map(function(a){return a.id})));a.forEach(function(a,c){c=f[c];b._cache.IdentityStore.set(c.id,a);e[c.pos]=a==null?void 0:a.identityKey})}return e});function a(b){return a.apply(this,arguments)}return a}();e.bulkLoadIdentityKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.identity.acquire());try{return yield this._bulkLoadIdentityKeyImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e.expandNewIdentitiesList=function(a){var b=new Map();a.forEach(function(a){b.set(a.identifier,{identifier:a.identifier,identityKey:a.identityKey})});a.forEach(function(a){var c=d("WAWebWidFactory").widFromSignalAddress(a.identifier);c=d("WAWebApiContact").getAlternateDeviceWid(d("WAWebWidFactory").createDeviceWidFromWid(c));if(c==null)return;c=d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(c).toString();b.set(c,{identifier:c,identityKey:a.identityKey})});return Array.from(b.values())};e._bulkCreateIdentityImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this;if(a==null)throw c("err")("Tried to bulk put identity key with undefined/null");d("WALogger").LOG(u(),a.length).tags("unified-store");yield d("WAWebSignalStorageUtils").getStorage().lock(["identity-store"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a.map(function(a){return a.identifier}),c=(yield e._bulkLoadIdentityKeyImpl(b));b=a.filter(function(a,b){return!c[b]});b.length>0&&!d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()&&(b=e.expandNewIdentitiesList(b),yield d("WAWebSignalStoreApi").waSignalStore.bulkPutIdentity(b),b.forEach(function(a){var b=a.identifier;a=a.identityKey;e._cache.IdentityStore.set(b,{identityKey:a})}));d("WALogger").LOG(t(),a.length,b.length).tags("unified-store")}))});function a(b){return a.apply(this,arguments)}return a}();e.bulkCreateIdentity=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.identity.acquire());try{yield this._bulkCreateIdentityImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._removeIdentityImpl=function(a){this._cache.IdentityStore.set(a,{deleted:!0}),this._cache.Dirty.identity.add(a)};e.removeIdentity=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return(h||(h=b("Promise"))).reject(c("err")("Tried to remove identity key for undefined/null key"));var d=(yield this._cache.Mutex.identity.acquire());try{yield this._removeIdentityImpl(a)}finally{d.release()}});function d(b){return a.apply(this,arguments)}return d}();e._loadPreKeyImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return void 0;if(!this._cache.PrekeyStore.has(a)){var b;b=(b=(yield d("WAWebSignalStoreApi").waSignalStore.getPreKeyById(a)))==null?void 0:b.keyPair;this._cache.PrekeyStore.set(a,{keyPair:b})}b=this._cache.PrekeyStore.get(a);return(b==null?void 0:b.keyPair)||void 0});function a(b){return a.apply(this,arguments)}return a}();e.loadPreKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.preKey.acquire());try{return yield this._loadPreKeyImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._removePreKeyImpl=function(a){if(a==null)return(h||(h=b("Promise"))).reject(c("err")("Tried to remove pre key without keyId"));this._cache.PrekeyStore.set(a,{deleted:!0});this._cache.Dirty.preKey.add(a);return(h||(h=b("Promise"))).resolve()};e.removePreKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.preKey.acquire());try{yield this._removePreKeyImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e.loadSignedPreKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return void 0;if(!this._cache.SignedPreKeyStore.has(a)){var b=(yield d("WAWebSignalStoreApi").waSignalStore.getSignedPreKeyById(a));b=b?{pubKey:b.keyPair.pubKey,privKey:b.keyPair.privKey,signature:b.signature}:null;this._cache.SignedPreKeyStore.set(a,b)}return this._cache.SignedPreKeyStore.get(a)||void 0});function c(b){return a.apply(this,arguments)}return c}();e._loadSessionImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return void 0;if(!this._cache.SessionStore.has(a)){var b=(yield d("WAWebSignalStoreApi").waSignalStore.getSession(a));this._cache.SessionStore.set(a,b?{session:b}:void 0)}return(yield d("WAWebSignalConvertApi").maybeConvertSession((b=this._cache.SessionStore.get(a))==null?void 0:b.session))||void 0});function a(b){return a.apply(this,arguments)}return a}();e.loadSession=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.session.acquire());try{return yield this._loadSessionImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._storeSessionImpl=function(a,b){if(a==null)throw c("err")("Tried to put session without identifier");this._cache.SessionStore.set(a,{session:b});this._cache.Dirty.session.add(a)};e.storeSession=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield this._cache.Mutex.session.acquire());try{this._storeSessionImpl(a,b)}finally{c.release()}});function c(b,c){return a.apply(this,arguments)}return c}();e._removeSessionImpl=function(a){if(a==null)throw c("err")("Tried to remove session without identifier");this._cache.SessionStore.set(a,{deleted:!0});this._cache.Dirty.session.add(a)};e.removeSession=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.session.acquire());try{this._removeSessionImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._containSessionsImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=[];for(var e of a)this._cache.SessionStore.has(e)||c.push(e);if(c.length>0){e=(yield d("WAWebSignalStoreApi").waSignalStore.bulkGetSession(c));e.forEach(function(a,d){d=c[d];b._cache.SessionStore.set(d,a?{session:a}:void 0)})}return a.map(function(a){a=b._cache.SessionStore.get(a);return a!=null&&!(a==null?void 0:a.deleted)})});function a(b){return a.apply(this,arguments)}return a}();e.containSessions=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.session.acquire());try{return yield this._containSessionsImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e._storeSenderKeyImpl=function(a,e){if(a==null)return(h||(h=b("Promise"))).reject(c("err")("Tried to put session without identifier"));if(!c("gkx")("26258"))if(Array.isArray(e==null?void 0:e.sessions)){var f=e.sessions[e.sessions.length-1];d("WALogger").DEV(s(),a,f==null?void 0:f.keyId,f==null?void 0:(f=f.chainKey)==null?void 0:f.counter)}else{f=e==null?void 0:(f=e.senderKeyStates)==null?void 0:f[0];d("WALogger").DEV(r(),a,f==null?void 0:f.senderKeyId,f==null?void 0:(f=f.senderKeyChainKey)==null?void 0:f.nextMsgIndex)}this._cache.SenderKeyStore.set(a,e);this._cache.Dirty.senderKey.add(a);return(h||(h=b("Promise"))).resolve()};e.storeSenderKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield this._cache.Mutex.senderKey.acquire());try{yield this._storeSenderKeyImpl(a,b)}finally{c.release()}});function c(b,c){return a.apply(this,arguments)}return c}();e._loadSenderKeyImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a==null)return void 0;if(!this._cache.SenderKeyStore.has(a)){var b=(yield d("WAWebSignalStoreApi").waSignalStore.getSenderKey(a));this._cache.SenderKeyStore.set(a,b)}return d("WAWebSignalConvertApi").maybeConvertSenderKey(this._cache.SenderKeyStore.get(a))||void 0});function a(b){return a.apply(this,arguments)}return a}();e.loadSenderKey=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.senderKey.acquire());try{return yield this._loadSenderKeyImpl(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();e.switchToMemMode=function(){this._mode=v.Memory};e.switchToPersistMode=function(){this._mode=v.Persist};e.generateSnapshot=function(){if(this._mode===v.Memory)return this._cache.generateCacheUpdate()};e.deleteAllCache=function(){d("WALogger").LOG(q()).tags("unified-store"),this._cache.clear()};e.flushBufferToDiskIfNotMemOnlyMode=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this._mode===v.Memory){d("WALogger").LOG(p()).tags("unified-store");return(h||(h=b("Promise"))).resolve()}d("WALogger").LOG(o()).tags("unified-store");var a=[yield this._cache.Mutex.identity.acquire(),yield this._cache.Mutex.session.acquire(),yield this._cache.Mutex.senderKey.acquire(),yield this._cache.Mutex.preKey.acquire()];d("WALogger").LOG(n()).tags("unified-store");var c=this._cache.generateCacheUpdate();try{yield d("WAWebSignalStorageUtils").getStorage().lock(["session-store","identity-store","prekey-store","senderkey-store"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.bulkPutSession(c.sessionUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkPutIdentityKeyWithRowId(c.identityUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkPutSenderKey(c.senderKeyUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkRemovePreKey(c.preKeyRemove),d("WAWebSignalStoreApi").waSignalStore.bulkRemoveSession(c.sessionRemove),d("WAWebSignalStoreApi").waSignalStore.bulkRemoveIdentity(c.identityRemove)])})),this._cache.clearDirty()}finally{a.forEach(function(a){return a.release()})}d("WALogger").LOG(m()).tags("unified-store")});function c(){return a.apply(this,arguments)}return c}();e._updateIdentityRangeAfterEncryptionImpl=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=this;d("WALogger").LOG(l()).tags("unified-store");yield this._bulkLoadIdentityKeyImpl(c);var f=[];c.forEach(function(c){var d=e._cache.IdentityStore.get(c);if(d&&!d.deleted&&(d[a]==null||d[a]>b)){d=babelHelpers["extends"]({},d);d[a]=b;e._cache.IdentityStore.set(c,d);e._cache.Dirty.identity.add(c);f.push(c)}});d("WALogger").DEV(k(),JSON.stringify(f),b).tags("unified-store");d("WALogger").LOG(j(),f.length).tags("unified-store")});function a(b,c,d){return a.apply(this,arguments)}return a}();e.updateIdentityRangeAfterEncryption=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=(yield this._cache.Mutex.identity.acquire());try{yield this._updateIdentityRangeAfterEncryptionImpl(a,b,c)}finally{d.release()}});function c(b,c,d){return a.apply(this,arguments)}return c}();e._maybeCleanUpUnconvertedSessionAfterEncryption=function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var c=this._cache.SessionStore.get(a);c&&d("WAWebSignalConvertApi").shouldConvertSession(c.session)&&(d("WALogger").LOG(i()).tags("unified-store"),this._removeSessionImpl(a));return(h||(h=b("Promise"))).resolve()};e.maybeCleanUpUnconvertedSession=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this._cache.Mutex.session.acquire());try{return yield this._maybeCleanUpUnconvertedSessionAfterEncryption(a)}finally{b.release()}});function c(b){return a.apply(this,arguments)}return c}();return a}();e=new a();g["default"]=e}),98);
__d("WAWebAdvSyncDeviceListApi",["Promise","WALogger","WAWebAdvHandlerApi","WAWebApiContact","WAWebApiDeviceList","WAWebDeviceListPk","WAWebGetIdentityKeysJob","WAWebPhashUtils","WAWebUserPrefsMeUser","WAWebUsync","WAWebUsyncUser","WAWebWidFactory","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncDeviceList: skipping "," out of "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncDeviceList: error ",": ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: sync my device list complete"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: sync my device list begin"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to sync device list with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: begin syncDeviceList for ",""]);n=function(){return a};return a}var o=new Map();function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.wids,f=a.context;a=a.phash;d("WALogger").DEV(n(),e.slice(0,3).join(",")+(e.length>3?"...":""));if(a!=null){var g=(yield d("WAWebApiDeviceList").getDeviceIds(e));g=g.map(function(a){return a==null?[]:a.devices.map(function(b){return d("WAWebWidFactory").createDeviceWidFromDeviceListPk(a.id,b.id,b.isHosted)})});g=c("lodash").flatMap(g,function(a){return a});g=(yield d("WAWebPhashUtils").phashV2(g));if(a===g)return}var i=new Set(),j=[];e.forEach(function(a){var b=o.get(d("WAWebDeviceListPk").createDeviceListPK(a));b?i.add(b):j.push(a)});if(j.length===0){yield (h||(h=b("Promise"))).all(Array.from(i));return}var k=r(j,f);j.map(function(a){o.set(d("WAWebDeviceListPk").createDeviceListPK(a),k)});yield (h||(h=b("Promise"))).all([k].concat(Array.from(i)))});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){try{var e=(yield d("WAWebApiDeviceList").getDeviceInfoForSync(a)),f=e.map(function(a){return a==null?[]:a.devices.map(function(b){return d("WAWebWidFactory").createDeviceWidFromDeviceListPk(a.id,b.id,b.isHosted)})}),g=(yield (h||(h=b("Promise"))).all(f.map(function(a){return a.length===0?"":d("WAWebPhashUtils").phashV2(a)})));f=a.map(function(a,b){return{id:a,hash:g[b],ts:(a=e[b])==null?void 0:a.timestamp,expectedTs:(a=e[b])==null?void 0:a.expectedTs}});return v(f,c)}catch(a){d("WALogger").ERROR(m(),a)}finally{a.map(function(a){o["delete"](d("WAWebDeviceListPk").createDeviceListPK(a))})}});return s.apply(this,arguments)}function a(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").DEV(l()),yield p({wids:d("WAWebUserPrefsMeUser").getMePNandLIDWids(),context:null,phash:null}),d("WALogger").DEV(k())});return t.apply(this,arguments)}function e(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield p({wids:a,context:null,phash:null});return d("WAWebApiDeviceList").getDeviceIds(a)});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.length===0)return;d("WAWebApiContact").checkPnToLidMapping(a.map(function(a){return a.id}),d("WAWebApiContact").CheckPnToLidMappingCaller.WAWEB_ADV_SYNC_DEVICE_LIST_SEND_DEVICE_SYNC_REQUEST);var e=new(d("WAWebUsync").USyncQuery)().withContext(b||"interactive").withDeviceProtocol();a.forEach(function(a){a.id.user!==0&&e.withUser(new(d("WAWebUsyncUser").USyncUser)().withId(a.id).withDeviceHash(String(a.hash)).withTs(a.ts).withExpectedTs(a.expectedTs))});b=(yield e.execute());if(b.error.all)throw c("err")("syncDeviceList: error "+b.error.all.errorCode+": "+b.error.all.errorText);b.error.devices&&d("WALogger").WARN(j(),b.error.devices.errorCode,b.error.devices.errorText);a=b.list.filter(function(a){return!("errorCode"in a.devices)});a=a.map(function(a){return{wid:a.id,devices:a.devices}});var f=a.filter(function(a){return(a=a.devices.keyIndex)==null?void 0:a.signedKeyIndexBytes}).map(function(a){return a.wid});d("WALogger").LOG(i(),b.list.length-f.length,b.list.length);yield d("WAWebGetIdentityKeysJob").getAndStoreIdentityKeys(f);return d("WAWebAdvHandlerApi").handleADVDeviceSyncResult(a)});return w.apply(this,arguments)}g.syncDeviceList=p;g.syncMyDeviceList=a;g.syncAndGetDeviceList=e}),98);
__d("WAWebDeleteLastAddOnsPreview",["WAWebApiChat","WAWebMsgKey","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set(a.map(function(a){return c("WAWebMsgKey").fromString(a).remote.toString()}));b=(yield d("WAWebShouldUpdateLastAddOnPreview").bulkGetChatLastAddOnPreviewMap(Array.from(b)));var e=new Map();b.forEach(function(b,c){a.includes(b==null?void 0:b.parentMsgKey)&&e.set(c,void 0)});yield d("WAWebApiChat").bulkUpdateChatLastAddOnPreview(e)});return h.apply(this,arguments)}g.deleteLastAddOnsPreview=a}),98);
__d("WAWebMessageInsertDebugPlaceholder",["WALogger","WAWebBackendApi","WAWebCmd","WAWebMessageProcessorCache","WAWebMessagingGatingUtils","WAWebMsgProcessingApiUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["_insertDebugPlaceholder: msgId::",", failed to insert with error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_insertDebugPlaceholder: msgId::",", could not parse message info"]);i=function(){return a};return a}function a(a){if(!d("WAWebMessagingGatingUtils").isMessageDropPlaceholderEnabled())return;void j(a)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.externalId,c=a.msgInfo,e=a.offline,f=a.nackReason;a=a.additionalInfo;if(c==null){d("WALogger").WARN(i(),b).tags("messaging");return}f=f.toString();a=a!=null?f+" "+a:f;f=babelHelpers["extends"]({},d("WAWebMsgProcessingApiUtils").generateBaseMsg(c),{type:d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER,kind:d("WAWebMsgType").MsgKind.DebugPlaceholder,body:a});try{yield d("WAWebMessageProcessorCache").messageProcessorCache.addMessages([{msg:f}],e!==!0),d("WAWebCmd").Cmd.isMainStreamReadyMd&&(yield d("WAWebBackendApi").frontendSendAndReceive("updateMessageUI",{chatId:f.id.remote,msg:f}))}catch(a){d("WALogger").WARN(h(),b,a).tags("messaging")}});return k.apply(this,arguments)}g.maybeInsertDebugPlaceholder=a}),98);
__d("WAWebMessagePostProcessBatcher",["Promise","WABatcher","WAWebBackendApi","WAWebMsgType","WAWebWorkerSafeBackendApi"],(function(a,b,c,d,e,f,g){var h,i={delayMs:1e3};a=function(){function a(){var a=this;this.$1=d("WABatcher").createSimpleBatcher(i,function(c){a.$2(c);return(h||(h=b("Promise"))).resolve([])})}var c=a.prototype;c.acceptMessage=function(a){return this.$1.accept(a)};c.runActiveBatches=function(){return this.$1.runActiveBatch().then(function(){})};c.$2=function(a){d("WAWebBackendApi").frontendFireAndForget("processOrphanReadReceipts",{msgIds:a.map(function(a){return a.id})});a=a.filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.PAYMENT&&a.subtype==="send"});a.length>0&&d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processOrphanPaymentNotifications",{msgs:a})};return a}();c=new a();g.messagePostProcessBatcher=c}),98);
__d("WAWebMessagePostprocessRenderable",["Promise","WALogger","WAWebBackendApi","WAWebBizUpdateVerifiedInfoAction","WAWebMessagePostProcessBatcher","WAWebUserPrefsMeUser","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] UI update completed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] UI update started"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrivacyModeChange: failed to update biz privacy status with error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["query contact info on new chat failed"]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.msgInfo,e=a.messageOverwriteOption,f=a.msgs,g=a.isOffline,k=a.shouldQueryContactInfo,l=a.latestPrivacyMode;d("WALogger").DEV(j());yield (h||(h=b("Promise"))).all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebBackendApi").frontendSendAndReceive("updateMessageUI",{chatId:a.id.remote,msg:a,messageOverwriteOption:e,preserveOrder:!0,isOffline:g}),void d("WAWebMessagePostProcessBatcher").messagePostProcessBatcher.acceptMessage(a),g||void d("WAWebMessagePostProcessBatcher").messagePostProcessBatcher.runActiveBatches()});return function(b){return a.apply(this,arguments)}}()));(k||l!=null)&&n(a);d("WALogger").DEV(i());return d("WAWebBackendApi").frontendSendAndReceive("updateUnattributedMessages",{messageInfo:c,messages:f})});return m.apply(this,arguments)}function n(a){var b=a.shouldQueryContactInfo,c=a.msgInfo,e=a.latestPrivacyMode;a=a.msgs;var f=c.chat;b&&d("WAWebBizUpdateVerifiedInfoAction").queryAndUpdateContactPropertiesOnNewChat(f)["catch"](function(a){d("WALogger").WARN(l())});!d("WAWebUserPrefsMeUser").isMeAccount(c.author)&&e!=null&&d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("updateBizPrivacyStatus",{msgIds:a.map(function(a){return a.id}),privacyMode:e})["catch"](function(a){d("WALogger").ERROR(k(),a)})}g.postprocessRenderableMessages=a}),98);
__d("WAWebWamEnumOfflineProcessRunReasons",[],(function(a,b,c,d,e,f){a=Object.freeze({PUSH_NOTIFICATION:1,PERIODIC_BACKGROUND_SYNC:2});f.OFFLINE_PROCESS_RUN_REASONS=a}),66);
__d("WAWebWamEnumOfflineProcessStages",[],(function(a,b,c,d,e,f){a=Object.freeze({PAGE_LOAD:1,SOCKET_CONNECT:2,OFFLINE_PREVIEW:3,PROCESSING:4,PROCESS_COMPLETE:5,PROCESS_INTERRUPTED:6});f.OFFLINE_PROCESS_STAGES=a}),66);
__d("WAWebWebcOfflineNotificationProcessWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumOfflineProcessRunReasons","WAWebWamEnumOfflineProcessStages"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcOfflineNotificationProcess:[4222,{currentOfflineProcessStage:[4,d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES],offlineProcessDecryptErrorCount:[5,a.TYPES.INTEGER],offlineProcessMailboxAge:[6,a.TYPES.INTEGER],offlineProcessMessageCount:[7,a.TYPES.INTEGER],offlineProcessNotificationCount:[8,a.TYPES.INTEGER],offlineProcessSessionId:[9,a.TYPES.STRING],offlineProcessStageTimestampMs:[10,a.TYPES.INTEGER],runReason:[12,d("WAWebWamEnumOfflineProcessRunReasons").OFFLINE_PROCESS_RUN_REASONS],swVersion:[11,a.TYPES.STRING]},[1,1,1],"regular"]},{WebcOfflineNotificationProcess:[]});g.WebcOfflineNotificationProcessWamEvent=b}),98);
__d("WAWebWamWorkerOfflineProcessReporter",["WAHex","WALogger","WAShiftTimer","WATimeUtils","WAWebBuildConstants","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsGeneral","WAWebUserPrefsMultiDevice","WAWebWamEnumOfflineProcessRunReasons","WAWebWamEnumOfflineProcessStages","WAWebWamOfflineResumeReporter","WAWebWebcOfflineNotificationProcessWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][worker] worker offline processing ends\n        ========= worker offline processing perf ==========\n        message: ","\n        receipt: ","\n        notification: ","\n        ProcessedMessage: ","\n        ProcessedNotification: ","\n        decryptError: ","\n        pageLoadT: 0\n        socketConnectT: ","\n        offlinePreviewT: ","\n        processCompleteT: ","\n        mailboxAge: ","\n        isInterrupted: ","\n        runReason: ","\n        ===================================================\n        "]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([" [offline-resume][worker] worker offline processing takes too long"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][worker] worker offline processing progress updates\n          ======= worker offline processing update ========\n          ProcessedMessage: ","\n          ProcessedNotification: ","\n          currentProcessingT: ","\n          =================================================\n         "]);j=function(){return a};return a}var k=1e4,l=12e4;a=function(){function a(){this.$7=null,this.$1=this.$12(),this.$2=d("WAWebWamEnumOfflineProcessRunReasons").OFFLINE_PROCESS_RUN_REASONS.PUSH_NOTIFICATION,this.pageLoadT=self.performance.now(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$8=0,this.$9=0,this.$10=0}var c=a.prototype;c.$12=function(){return""+d("WAHex").randomHex(4)+d("WATimeUtils").unixTimeWithoutClockSkewCorrection()};c.$13=function(a,b){b=new(d("WAWebWebcOfflineNotificationProcessWamEvent").WebcOfflineNotificationProcessWamEvent)({offlineProcessSessionId:this.$1,offlineProcessStageTimestampMs:b,currentOfflineProcessStage:a,swVersion:d("WAWebBuildConstants").VERSION_BASE,runReason:this.$2});(a===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING||a===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||a===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)&&this.$14(b);a===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||a===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED?void b.commitAndWaitForFlush(!0):b.commit()};c.$14=function(a){var b;a.offlineProcessMessageCount=d("WAWebWamOfflineResumeReporter").roundUp((b=this.$9)!=null?b:0,10);a.offlineProcessNotificationCount=d("WAWebWamOfflineResumeReporter").roundUp((b=this.$10)!=null?b:0,10);a.offlineProcessMailboxAge=d("WAWebWamOfflineResumeReporter").countDays((b=this.$6)!=null?b:0);a.offlineProcessDecryptErrorCount=(b=this.$8)!=null?b:0};c.$15=function(){var a=this;this.$7==null&&(this.$7=new(d("WAShiftTimer").ShiftTimer)(function(){if(a.$11!==d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING)return;var b=Math.floor(self.performance.now()-a.pageLoadT);d("WALogger").LOG(j(),a.$9,a.$10,b);if(b>l){d("WALogger").ERROR(i()).sendLogs("worker-offline-process-takes-too-long");return}a.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING,b);a.$15()}));this.$7.onOrAfter(k)};c.$16=function(){var a;this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING;(a=this.$7)==null?void 0:a.cancel();this.$15()};c.$17=function(a){a===void 0&&(a=-1),d("WALogger").LOG(h(),this.$3,this.$4,this.$5,this.$9,this.$10,this.$8,this.socketConnectT,this.offlinePreviewT,this.processCompleteT,a,this.$11===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,this.$2)};c.getCurrentStage=function(){return this.$11};c.updateOldestStanzaTime=function(a){(this.$6==null||this.$6>a)&&(this.$6=a)};c.updateOfflineCount=function(a){this.$3=a.message,this.$4=a.receipt,this.$5=a.notification};c.updateOfflineDecryptionErrorCount=function(a){this.$8=a};c.updateProcessedMessageCount=function(){d("WAWebRuntimeEnvironmentUtils").isWorker()&&(this.$9+=1)};c.updateProcessedNotificationCount=function(){d("WAWebRuntimeEnvironmentUtils").isWorker()&&(this.$10+=1)};c.logWorkerInitialized=function(a){this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PAGE_LOAD,this.$2=a,this.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PAGE_LOAD,0)};c.logSocketConnect=function(){this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.SOCKET_CONNECT;var a=Math.floor(self.performance.now()-this.pageLoadT);this.socketConnectT=a;this.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.SOCKET_CONNECT,a)};c.logOfflinePreview=function(){this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW;var a=Math.floor(self.performance.now()-this.pageLoadT);this.offlinePreviewT=a;this.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW,a);this.$16()};c.logProcessComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;if(this.$11===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||this.$11===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)return;this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE;(a=this.$7)==null?void 0:a.cancel();this.$7=null;a=d("WAWebWamOfflineResumeReporter").countDays(this.$6);yield d("WAWebUserPrefsMultiDevice").setRecentMailboxAgeDays(a);var b=Math.floor(self.performance.now()-this.pageLoadT);this.processCompleteT=b;this.$17(a);this.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE,b);void d("WAWebUserPrefsGeneral").setLastPushCompleteTimestamp(d("WATimeUtils").unixTimeMs())});function c(){return a.apply(this,arguments)}return c}();c.logProcessInterrupted=function(){var a;if(this.$11==null||this.$11===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||this.$11===d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)return;this.$11=d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED;(a=this.$7)==null?void 0:a.cancel();this.$7=null;a=Math.floor(self.performance.now()-this.pageLoadT);this.processCompleteT=a;this.$17();this.$13(d("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,a)};return a}();c=new a();g.WorkerOfflineResumeReporter=c}),98);
__d("WAWebMessageProcessDBPipeline",["Promise","WALogger","WAWebHandleOrphansForNewMsg","WAWebMessageProcessorCache","WAWebWamWorkerOfflineProcessReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessages write to DB from cache, failed with error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["process msgs orphans ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing messages in cache completed"]);k=function(){return a};return a}function a(a,c){return d("WAWebMessageProcessorCache").messageProcessorCache.addMessages(a.map(function(a){return{msg:a}}),c).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").DEV(k()),d("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedMessageCount(),c&&(d("WALogger").LOG(j(),a.length),yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebHandleOrphansForNewMsg").handleOrphansForNewMsg(a)})))}))["catch"](function(a){d("WALogger").ERROR(i(),a).tags("messaging").sendLogs("processRenderableMessages write to DB from cache, failed")})}g.processMsgDataDBPipeline=a}),98);
__d("WAWebGetGroupAddressingMode",["WAWebDBGroupsGroupMetadata","WAWebHandleMsgCommon","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isGroup())return;a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(a==null)return null;return a.isLidAddressingMode==null?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn:a.isLidAddressingMode?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid:d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map(),c=(yield d("WAWebDBGroupsGroupMetadata").bulkGetGroupMetadata(a));a.map(function(a,e){if(!a.isGroup()){b.set(a.toString(),null);return}e=c[e];e!=null?b.set(e.id,e.isLidAddressingMode===!0?d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid:d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn):b.set(a.toString(),null)});return b});return i.apply(this,arguments)}g.getGroupAddressingMode=a;g.bulkGetGroupAddressingMode=c}),98);
__d("WAWebMessageProcessorCache",["Promise","WALogger","WANullthrows","WAShiftTimer","WAWebABProps","WAWebDBCreateLidPnMappings","WAWebDBReportingTokenUtils","WAWebGetGroupAddressingMode","WAWebGroupDatabaseJob","WAWebGroupHandleAddressingModeMismatch","WAWebHandleMessageTypes.flow","WAWebPromiseQueue","WAWebSendOfflineDeliveryReceiptJob","WAWebSignalProtocolStore","WAWebSignalStorageUtils","WAWebSignalStoreApi","WAWebStoreMsgs","WAWebWamEnumMismatchOriginType","WAWebWidFactory","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: aggregated receipts sent for "," - ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: signal key store updated for "," - ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: messages added to table for "," - ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageProcessorCache: missing doneFn"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: creating snapshot for "," - "," messages"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: flushing due to max size reached: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][offline][message-cache]: adding to cache (current length: ",", next checkpoint index: ","): ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][online][message-cache]: flushing immediately"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message-cache]: flushing cache due to timeout"]);q=function(){return a};return a}function r(){return d("WAWebABProps").getABPropConfigValue("web_message_processing_cache_size")}function s(){return t()>0}function t(){return d("WAWebABProps").getABPropConfigValue("web_offline_message_processor_timeout_seconds")}a=function(){function a(){var a=this;this.cache=[];this.additionalInfoCache=[];this.checkpointQueue=new(d("WAWebPromiseQueue").PromiseQueue)();this.nextCheckpointIndex=0;this.checkpointPromises=new Map();this.flushImmediately=!1;this.snapshotTimer=new(d("WAShiftTimer").ShiftTimer)(function(){d("WALogger").LOG(q()),a.createSnapshot()})}var e=a.prototype;e.size=function(){return this.cache.length};e.addMessages=function(a,b){var c;b===void 0&&(b=!1);(c=this.cache).push.apply(c,a);c=this.$1();if(b){d("WALogger").DEV(p());this.flushImmediately=!0;this.createSnapshot();return c}this.flushImmediately=!1;d("WALogger").DEV(o(),this.cache.length,this.nextCheckpointIndex,a.map(function(a){var b;return a.msg!=null?"msg "+((b=a.msg)==null?void 0:(b=b.id)==null?void 0:b.toString()):"receipt "+(((b=a.receiptInfo)==null?void 0:b.externalId)||"")}));if(this.cache.length>=r()){d("WALogger").DEV(n(),this.cache.length);this.createSnapshot();return c}s()&&!this.snapshotTimer.isScheduled()&&this.snapshotTimer.onOrBefore(t()*1e3);return c};e.addAdditionalInfo=function(a,b){b===void 0&&(b=!1);this.additionalInfoCache.push(a);if(b){a=this.additionalInfoCache;this.additionalInfoCache=[];void this.$2(a)}};e.handleChangedAddressingMode=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=new Map();a.forEach(function(b){b=b.msg;if(b!=null&&b.id.remote.isGroup()){var a=b==null?void 0:b.groupAddressingMode;a!=null&&e.set(b.id.remote.toString(),a)}});var f=(yield d("WAWebGetGroupAddressingMode").bulkGetGroupAddressingMode(Array.from(e.keys()).map(d("WAWebWidFactory").createWid)));a=[];for(var g of e.entries()){var i=g[0],j=g[1];f.get(i)!==j&&a.push(d("WAWebWidFactory").createWid(i))}this.flushImmediately||(yield d("WAWebGroupDatabaseJob").bulkMarkGroupParticipantStaleJob(a));yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebGroupHandleAddressingModeMismatch").handleAddressingModeMismatch(a,{localAddressingMode:c("WANullthrows")(f.get(a.toString())),serverAddressingMode:c("WANullthrows")(e.get(a.toString())),mismatchOrigin:d("WAWebWamEnumMismatchOriginType").MISMATCH_ORIGIN_TYPE.INCOMING_GROUP_MESSAGE})}))});function e(b){return a.apply(this,arguments)}return e}();e.$1=function(){var a=this,d=this.nextCheckpointIndex;if(!this.checkpointPromises.has(d)){var e,f=function(a){return void 0};this.checkpointPromises.set(d,{promise:new(h||(h=b("Promise")))(function(a,b){e=a,f=b}),markCheckpointDone:function(b){a.checkpointPromises["delete"](c("justknobx")._("2434")?d:a.nextCheckpointIndex);if(b!=null){f(b);return}e()}})}return c("WANullthrows")(this.checkpointPromises.get(d)).promise};e.$3=function(a){var b=[];a.forEach(function(a){a=a.msg;a!=null&&b.push(a)});return d("WAWebStoreMsgs").storeMsgs(b)};e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.filter(function(a){return a.type===d("WAWebHandleMessageTypes.flow").MsgAdditionalInfoType.ReportingInfo}).map(function(a){return a.data});void d("WAWebDBReportingTokenUtils").handleAddReportingInfos(a)});function c(b){return a.apply(this,arguments)}return c}();e.createSnapshot=function(){var a,c=this,e=this.cache,f=this.additionalInfoCache;this.cache=[];this.additionalInfoCache=[];this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();var g=this.nextCheckpointIndex,n=g+e.length;this.nextCheckpointIndex=n;d("WALogger").LOG(m(),g,n);if(e.length===0)return;var o=(a=(a=this.checkpointPromises.get(g))==null?void 0:a.markCheckpointDone)!=null?a:function(a){d("WALogger").ERROR(l()).sendLogs("message-cache-missing-doneFn")},p=d("WAWebSignalProtocolStore").getSignalProtocolStore().generateSnapshot();this.checkpointQueue.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield (h||(h=b("Promise"))).all([c.$3(e),d("WAWebDBCreateLidPnMappings").flushLidPnMappingsToDb()]),d("WALogger").LOG(k(),g,n),p!=null&&(yield d("WAWebSignalStorageUtils").getStorage().lock(["session-store","identity-store","prekey-store","senderkey-store"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.bulkPutSession(p.sessionUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkPutIdentityKeyWithRowId(p.identityUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkPutSenderKey(p.senderKeyUpdate),d("WAWebSignalStoreApi").waSignalStore.bulkRemovePreKey(p.preKeyRemove),d("WAWebSignalStoreApi").waSignalStore.bulkRemoveSession(p.sessionRemove),d("WAWebSignalStoreApi").waSignalStore.bulkRemoveIdentity(p.identityRemove)])})),d("WALogger").LOG(j(),g,n)),yield d("WAWebSendOfflineDeliveryReceiptJob").sendAggregateOfflineReceipts(e),yield c.$2(f),d("WALogger").LOG(i(),g,n)}catch(a){o(a);return}o()}));d("WAWebABProps").getABPropConfigValue("lid_groups_handle_server_addressing_mode")&&void this.handleChangedAddressingMode(e)};return a}();e=new a();g.messageProcessorCache=e}),98);
__d("WAWebApiMessageInfoStore",["WAJids","WALogger","WAWebAck","WAWebModelStorageUtils","WAWebMsgKey","WAWebSchemaMessage","WAWebSchemaMessageInfo","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryMsgInfo: targetedMsgInfoKey: ",", ack count: ",", receiver: ",",\n        played: ",", read: ",", delivery: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageInfoStore: ",", ",":"," has been delivered"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageInfoStore: ",", ",":",": primary identity change after message has been delivered"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageInfoStore: ",", ",":",": companion identity changed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MessageInfoStore: missing record for ",", ",""]);l=function(){return a};return a}var m=[d("WAWebAck").ACK_STRING.PLAYED,d("WAWebAck").ACK_STRING.READ,d("WAWebAck").ACK_STRING.DELIVERY],n=Object.freeze({ELIGIBLE:"ELGIBLE",INELIGIBLE_RECORD_MISSING:"INELIGIBLE_RECORD_MISSING",INELIGIBLE_ALREADY_DELIVERED:"INELIGIBLE_ALREADY_DELIVERED",INELIGIBLE_NOT_MD:"INELIGIBLE_NOT_MD",INELIGIBLE_CHANGED_IDENTITY:"INELIGIBLE_CHANGED_IDENTITY"});function a(a){var c=new Map();a.forEach(function(a){var b=a.msgKey;a=a.receiverId;var e=d("WAWebWidFactory").toUserWid(a).toString();b=b.toString();var f=b+","+e;a=(a=a.device)!=null?a:d("WAJids").DEFAULT_DEVICE_ID;var g=c.get(f);!g?c.set(f,{msgKey:b,receiverUserJid:e,deviceDelivered:[],deviceNotDelivered:[a]}):g.deviceNotDelivered.push(a)});return d("WAWebModelStorageUtils").getStorage().lock(["message-info"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=Array.from(c.values()).map(function(a){return[a.msgKey,a.receiverUserJid]});a=(yield a.anyOf(["msgKey","receiverUserJid"],b));a.forEach(function(a){var b=a.msgKey+","+a.receiverUserJid,d=c.get(b);d&&c.set(b,babelHelpers["extends"]({},a,{deviceNotDelivered:[].concat(a.deviceNotDelivered,d.deviceNotDelivered)}))});return d("WAWebSchemaMessageInfo").getMessageInfoTable().bulkCreateOrReplace(Array.from(c.values()))});return function(b){return a.apply(this,arguments)}}())}function e(a,b,c,e){var f=d("WAWebWidFactory").toUserWid(b).toString(),g=b.device||0;return d("WAWebSchemaMessageInfo").getMessageInfoTable().get([a.toString(),f]).then(function(h){if(!h){d("WALogger").LOG(l(),a.toString(),f);return n.INELIGIBLE_RECORD_MISSING}else if(h.deviceNotDelivered.includes(g)){if(c!=null&&e>=c)return n.ELIGIBLE;if(b.device!=null&&b.device!==d("WAJids").DEFAULT_DEVICE_ID){d("WALogger").LOG(k(),a.toString(),f,g);return n.INELIGIBLE_CHANGED_IDENTITY}else if(h.delivery!=null){d("WALogger").LOG(j(),a.toString(),f,g);return n.INELIGIBLE_CHANGED_IDENTITY}return n.ELIGIBLE}d("WALogger").LOG(i(),a.toString(),f,g);return n.INELIGIBLE_ALREADY_DELIVERED})}function f(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p([a]));b=b.get(a.toString());if(!b)throw c("err")("No message info found for "+a.toString());return b});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a.map(function(a){return a.toString()}))),c=new Map(),e=new Map();for(var f=0;f<a.length;f++){var g,h=a[f].toString();g=(g=(g=b[f])==null?void 0:g.latestEditMsgKey)!=null?g:h;e.set(g,h);h=b[f]?b[f].count:null;c.set(g,{messageInfoRecords:[],ackReceiver:h})}g=(yield d("WAWebSchemaMessageInfo").getMessageInfoTable().anyOf(["msgKey"],Array.from(c.keys())));g.forEach(function(a){var b;(b=c.get(a.msgKey))==null?void 0:b.messageInfoRecords.push(a)});h=r(c);f=new Map();for(b of h){a=b[0];g=b[1];h=e.get(a);h!=null&&f.set(h,g)}return f});return q.apply(this,arguments)}function r(a){var b=new Map(),e=function(a){var e=a[0];a=a[1];var f=a.ackReceiver;a=a.messageInfoRecords;var g=0,i={delivery:[],deliveryRemaining:0,played:[],playedRemaining:0,read:[],readRemaining:0},j=!1;a.forEach(function(a){var b=d("WAWebWidFactory").createWid(a.receiverUserJid);if(d("WAWebUserPrefsMeUser").getMeUser().equals(b))return;s(a);for(var f=0;f<m.length;f++){var h=m[f],k=a[h];if(k!=null){i[h].push({id:b,t:k});k=c("WAWebWid").isGroup(c("WAWebMsgKey").fromString(e).remote);k&&h==="read"&&(b==null?void 0:b.isBot())&&(j=!0);if(k)break}}a.delivery!=null&&a.deliveryPrivacyMode!=null&&(i.deliveryPrivacyMode=a.deliveryPrivacyMode);g+=1});a=f!=null&&f!==0?f:g;j&&a++;d("WALogger").LOG(h(),e,f,a,i.played.length,i.read.length,i.delivery.length);i.playedRemaining=a-i.played.length;i.readRemaining=i.playedRemaining-i.read.length;i.deliveryRemaining=i.readRemaining-i.delivery.length;b.set(e,i)};for(a of a.entries())e(a);return b}function s(a){var b=a.read;b!=null&&(a.delivery==null||a.delivery>b)&&(a.delivery=b)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map(),c=(yield p(a));for(a of a){var e=c.get(a.toString());if(e==null)continue;var f=void 0;e.playedRemaining===0&&e.played.length>0?f=d("WAWebAck").ACK.PLAYED:e.readRemaining===0&&e.read.length>0?f=d("WAWebAck").ACK.READ:e.deliveryRemaining===0&&e.delivery.length>0&&(f=d("WAWebAck").ACK.RECEIVED);f!=null&&b.set(a.toString(),f)}return b});return u.apply(this,arguments)}g.RetryEligibilityResult=n;g.createOrMergeReceiptRecords=a;g.isRetryEligible=e;g.queryMsgInfo=f;g.queryMsgInfos=p;g.getHighestMsgAcks=t}),98);
__d("WAWebSchemaPeerReadReceipt",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey;function a(){d("WAWebOffdStorageUtils").getStorage().add("peer-read-receipt").version(d("WAWebOffdStorageUtils").getStorage().versions.version(2),[i("id"),h("msgKeys"),h("ts"),h("ack")]).view(function(a){return a})}function b(){return d("WAWebOffdStorageUtils").getStorage().table("peer-read-receipt")}g.addTable=a;g.getTable=b}),98);
__d("WAWebMessageReceiptBatcher",["Promise","WABatcher","WAJids","WALogger","WAPromiseMap","WAWebAck","WAWebApiMessageInfoStore","WAWebBackendApi","WAWebDBBulkGetRootMsgs","WAWebHandleMsgReceiptCommon","WAWebHandlePrivacyModeUpdateMsgAction","WAWebModelStorageUtils","WAWebMsgKey","WAWebSchemaMessage","WAWebSchemaMessageInfo","WAWebSchemaPeerReadReceipt","WAWebUserPrefsMeUser","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher]: process peer receipts batch: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_processOtherReceipts: failed to process privacy mode updates"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] process other receipts batch: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher]: receipt has unsupported ack type ",""]);l=function(){return a};return a}var m=Object.freeze((a={},a[(e=d("WAWebAck")).ACK.SENT]=e.ACK_STRING.DELIVERY,a[e.ACK.RECEIVED]=e.ACK_STRING.DELIVERY,a[e.ACK.READ]=e.ACK_STRING.READ,a[e.ACK.PLAYED]=e.ACK_STRING.PLAYED,a[e.ACK.INACTIVE]=e.ACK_STRING.INACTIVE,a)),n={delayMs:1e3};f=function(){function a(){var a=this;this.$1=d("WABatcher").createSimpleBatcher(n,function(b){return a.$2(b).then(function(){return[]})});this.$3=d("WABatcher").createSimpleBatcher(n,function(b){return a.$4(b).then(function(){return[]})})}var e=a.prototype;e.acceptPeerReceipt=function(a){return this.$1.accept(a)};e.acceptOtherReceipt=function(a){return this.$3.accept(a)};e.runActiveBatches=function(){return(h||(h=b("Promise"))).all([this.$1.runActiveBatch(),this.$3.runActiveBatch()]).then(function(){})};e.$5=function(a){var b=[];for(a of a){var e=a.ack,f=a.privacyMode,g=a.msgKeys,h=a.receiverId;e===d("WAWebAck").ACK.RECEIVED&&f!=null&&b.push({remote:h,deliveryPrivacyMode:f,msgKeys:g.map(function(a){return c("WAWebMsgKey").from(a)})})}return b};e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAPromiseMap").promiseMap(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebHandlePrivacyModeUpdateMsgAction").handlePrivacyModeTransition(a.remote,a.deliveryPrivacyMode),yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("updateBizPrivacyStatus",{msgIds:a.msgKeys,privacyMode:a.deliveryPrivacyMode})});return function(b){return a.apply(this,arguments)}}())});function c(b){return a.apply(this,arguments)}return c}();e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=this.$8(a);b=b.map(function(a){return c("WAWebMsgKey").from(a)}).filter(function(a){return a.remote.isGroup()||a.remote.isStatus()||a.remote.isBot()});b=(yield d("WAWebApiMessageInfoStore").getHighestMsgAcks(b));for(b of b.entries()){var e=b[0],f=b[1];a.set(e,f)}return a});function e(b,c){return a.apply(this,arguments)}return e}();e.$8=function(a){var b=new Map();for(a of a){var d=a.msgKeys,e=a.ack,f=a.isBotInvoke,g=a.isSender;for(d of d)if(c("WAWebMsgKey").from(d).remote.isUser()&&f!==!0&&g!==!0){var h;b.set(d,Math.max(e,(h=b.get(d))!=null?h:Number.NEGATIVE_INFINITY))}}return b};e.$9=function(a){var b=new Map();a.forEach(function(a){var c=a.ack,e=a.ts,f=a.receiverId;a=a.msgKeys;var g=f.isNewsletter()?f.toJid():d("WAWebWidFactory").toUserWid(f).toString(),h=(f=f.device)!=null?f:d("WAJids").DEFAULT_DEVICE_ID;a.forEach(function(a){var f=m[c.toString()];if(f==null){d("WALogger").WARN(l(),c);return}a=a+","+g;var i=b.get(a);if(!i){b.set(a,(a={},a[f]=e,a.deviceDelivered=new Set([h]),a))}else f!==m[d("WAWebAck").ACK.INACTIVE]&&(i[f]=q(i[f],e)),i.deviceDelivered.add(h)})});return Array.from(b,function(a){var b=a[0];a=a[1];b=b.split(",");var c=b[0];b=b[1];return[[c,b],a]})};e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=this.$9(a),g=Array.from(new Set(c("lodash").flatMap(a,function(a){return a.msgKeys}))),i=(yield d("WAWebModelStorageUtils").getStorage().lock(["message-info","message","chat"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var i=(yield (h||(h=b("Promise"))).all([d("WAWebSchemaMessageInfo").getMessageInfoTable().bulkGet(f.map(function(a){var b=a[0];a[1];return b})),d("WAWebDBBulkGetRootMsgs").bulkGetRootMsgs(g)])),j=i[0],l=i[1],m=new Map(g.map(function(a,b){return[a,l[b]]}));i=j.map(function(a,b){b=f[b];var c=b[0],d=c[0];c=c[1];b=b[1];if(!b)return null;if(!a)return{delivery:b.delivery,read:b.read,played:b.played,msgKey:d,receiverUserJid:c,deviceDelivered:Array.from(b.deviceDelivered),deviceNotDelivered:[]};var e=b.deviceDelivered;a.deviceDelivered.forEach(function(a){return e.add(a)});return{delivery:q(a.delivery,b.delivery),read:q(a.read,b.read),played:q(a.played,b.played),msgKey:a.msgKey,receiverUserJid:a.receiverUserJid,deviceDelivered:Array.from(e),deviceNotDelivered:a.deviceNotDelivered.filter(function(a){return!e.has(a)})}}).filter(Boolean);d("WALogger").DEV(k(),JSON.stringify(i));yield d("WAWebSchemaMessageInfo").getMessageInfoTable().bulkCreateOrReplace(i);j=(yield e.$7(a,g));i=Array.from(j.entries()).map(function(a){var b=a[0];a=a[1];var d=c("WAWebMsgKey").fromString(b);d=d.remote;if(d.isUser()||d.isGroup()||d.isStatus()){d=m.get(b);if(d==null)return;if(a>((b=d.ack)!=null?b:Number.NEGATIVE_INFINITY))return{id:d.id.toString(),ack:a}}}).filter(Boolean);return{ackUpdates:i,receiptMsgKeyToMsg:m}})));yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(i.ackUpdates);d("WAWebBackendApi").frontendFireAndForget("updateMsgModelAcks",{updates:i.ackUpdates.map(function(a){var b=a.id;a=a.ack;return{id:c("WAWebMsgKey").from(b),ack:a}})});d("WAWebBackendApi").frontendFireAndForget("updateMsgInfo",{updates:c("lodash").flatMap(a,function(a){var b=a.msgKeys,e=a.ack,f=a.ts,g=a.receiverId;return b.map(function(a){a=i.receiptMsgKeyToMsg.get(a);if(a==null)return;a=c("WAWebMsgKey").from(a.id);if(!a.fromMe)return;if(!(a.remote.isUser()||a.remote.isGroup()||a.remote.isStatus()))return;var b=d("WAWebWidFactory").toUserWid(g);if(b.equals(d("WAWebUserPrefsMeUser").getMeUser()))return;return{msgKey:a,ts:f,participant:b,ack:e}})}).filter(Boolean)});this.$6(this.$5(a))["catch"](function(){d("WALogger").ERROR(j())})});function e(b){return a.apply(this,arguments)}return e}();e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i(),JSON.stringify(a));var b=a.some(function(a){return!a.isOffline});if(b){yield d("WAPromiseMap").promiseMap(a,o);return}b=a.map(function(a){var b=a.ts,c=a.msgKeys;a=a.ack;return{ts:b,msgKeys:c,ack:a}});yield d("WAWebSchemaPeerReadReceipt").getTable().bulkCreate(b)});function c(b){return a.apply(this,arguments)}return c}();return a}();function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.msgKeys.map(function(a){return c("WAWebMsgKey").from(a)});if(a.remote.isStatus()){d("WAWebBackendApi").frontendFireAndForget("handleReadStatus",{msgKeys:b});return d("WAWebBackendApi").frontendSendAndReceive("updateMsgPeerAcks",{msgKeys:b,ack:d("WAWebAck").ACK.READ,t:a.ts})}if((a.remote.isUser()||a.remote.isGroup()||a.remote.isNewsletter())&&a.ack>=d("WAWebAck").ACK.RECEIVED)if(a.ack===d("WAWebAck").ACK.READ)return d("WAWebHandleMsgReceiptCommon").updateChatPeerRead(a.remote,b);else if(a.ack===d("WAWebAck").ACK.PLAYED)return d("WAWebBackendApi").frontendSendAndReceive("updateMsgPeerAcks",{msgKeys:b,ack:a.ack,t:a.ts})});return p.apply(this,arguments)}function q(a,b){if(a!=null&&b!=null)return Math.min(a,b);a=(a=a)!=null?a:b;return(b=a)!=null?b:void 0}e=new f();g.receiptBatcher=e}),98);
__d("WAWebMsgSyncTunnelTimeoutUtils",[],(function(a,b,c,d,e,f){function a(a){var b=[],c=null;function d(){c=self.performance.now()}function e(){if(c==null)return b[b.length-1];var d=self.performance.now();d=Math.floor(d-c);c=null;b.length>=a&&b.shift();b.push(d);return d}function f(){if(b.length===0)return 0;var a=b.reduce(function(a,b){return a+b},0);return a/b.length}function g(a){var b=f();return Math.floor(b*(1+a/100))}return{perfStart:d,perfEnd:e,getAverage:f,getAveragePlusNPercent:g,at:function(a){return(a=b.at(a))!=null?a:0}}}f.createPerformanceCache=a}),66);
__d("WAWebMsgSyncTunnelJobThrottler",["WALogger","WAWebMsgSyncTunnelTimeoutUtils","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," done in ",""]);a=function(){return b};return b}function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," failed ",", cache "," items preserved, error ",""]);h=function(){return a};return a}function e(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," start, cache size: ",""]);e=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," delayMs is ","ms, config: ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] set "," delayMs to ","ms"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] switch "," to debounce"]);k=function(){return a};return a}function f(a,e,f){var g=[],l=e.defaultTimeoutMs,m=d("WAWebMsgSyncTunnelTimeoutUtils").createPerformanceCache(3),n=!1;function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b===void 0&&(b=!1);if(g.length===0)return;if(n&&!b)return;n=!0;b=g;g=[];m.perfStart();try{yield f(b)}catch(c){g=b.concat(g),d("WALogger").WARN(h(),a,m.perfEnd(),b.length,c).sendLogs("msg-tunnel-"+a+"-failed",{sampling:.01})}n=!1;b=m.perfEnd();if(b==null)return;if(e.defaultTimeoutMs<b){var c=15;if(l>b){var i=m.getAveragePlusNPercent(c);if(i<b)return;r(i);return}b=m.getAveragePlusNPercent(c);if(l+100>=b)return;r(b)}});return p.apply(this,arguments)}var q=c("lodash").throttle(o,l,{leading:!1,trailing:!0,maxWait:e.maxWait});function r(b){var f=l;l=Math.min(b,(b=e.debounceThreshold)!=null?b:15e3);if(l===e.debounceThreshold){if(f===l)return;q.cancel();q=c("lodash").debounce(o,l,{leading:!1,trailing:!0,maxWait:e.maxWait});d("WALogger").LOG(k(),a)}else q.cancel(),q=c("lodash").throttle(o,l,{leading:!1,trailing:!0,maxWait:e.maxWait});d("WALogger").LOG(j(),a,l);l>12e3&&d("WALogger").WARN(i(),a,l,e.defaultTimeoutMs).sendLogs("msg-tunnel-"+a+"-exceeds-12s",{sampling:.01})}return{take:function(a){g.push(a),void q()},forceDrain:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o(!0),r(e.defaultTimeoutMs)});function c(){return a.apply(this,arguments)}return c}()}}g.createJobThrottler=f}),98);
__d("WAWebOfflineResumeTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Toastbar:"toastbar",ButterBar:"butterbar",None:"none"});c=b("$InternalEnum").Mirrored(["Blocking","NonBlocking","Worker"]);f.ResumeUIProgressBarType=a;f.ResumeType=c}),66);
__d("WAWebMsgSyncTunnelBatcher",["Promise","WALogger","WAWebABProps","WAWebAddonLogUtils","WAWebCmd","WAWebMessagePostprocessRenderable","WAWebMessageProcessDBPipeline","WAWebMsgSyncTunnelJobThrottler","WAWebOfflineHandler","WAWebOfflineResumeTypes.flow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed incoming addons processing"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed storing messages ",""]);j=function(){return a};return a}function a(){var a,c=d("WAWebMsgSyncTunnelJobThrottler").createJobThrottler("write-db",{defaultTimeoutMs:(a=d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_timeout_ms"))!=null?a:500,debounceThreshold:5e3},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_store_before_postprocess"))try{a=a.reduce(function(a,b){return a.concat(b.msgs)},[]);yield d("WAWebMessageProcessDBPipeline").processMsgDataDBPipeline(a,!0)}catch(a){d("WALogger").ERROR(j(),a).tags("messaging").sendLogs("msg-tunnel-storing-failure")}});return function(b){return a.apply(this,arguments)}}()),e=d("WAWebMsgSyncTunnelJobThrottler").createJobThrottler("update-ui",{defaultTimeoutMs:(a=d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_timeout_ms"))!=null?a:500,maxWait:5e3},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).allSettled(a.map(d("WAWebMessagePostprocessRenderable").postprocessRenderableMessages)));d("WAWebAddonLogUtils").hasSettledWithError(a)&&d("WALogger").ERROR(i()).tags("messaging").sendLogs("msg-tunnel-renderable-msgs-processing")});return function(b){return a.apply(this,arguments)}}()),f=function(a){e.take(a),c.take(a)},g=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c.forceDrain(),yield e.forceDrain()});return function(){return a.apply(this,arguments)}}(),k=function(){var a=d("WAWebOfflineHandler").OfflineMessageHandler.getResumeType();return a===d("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking?d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel"):!1};return{isEnabled:k,isActive:function(){return d("WAWebCmd").Cmd.isOfflineDeliveryEnd?!1:k()},accept:function(a){d("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_store_before_postprocess")||void d("WAWebMessageProcessDBPipeline").processMsgDataDBPipeline(a.msgs,!1),f(a)},drain:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield g()});function c(){return a.apply(this,arguments)}return c}()}}c=a();g.nonBlockingMsgsSyncTunnel=c}),98);
__d("WAWebProcessMatMessages",["WANullthrows","WAWebApiChat","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebPnhGatingUtils","WAWebWid","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[],f=[];a=a.filter(function(a){var b=c("WANullthrows")(a.id.remote,"message key must have a remote");b.isUser()?f.push(b):e.push(a);return b.isUser()});var g=a.filter(function(a){return a.subtype==="sender_revoke"}),h=[];g.forEach(function(a){a=a.protocolMessageKey;a&&(h.push(a),a.remote.isUser()&&f.push(a.remote))});var i=(yield d("WAWebApiChat").getMatChatBulk_DEPRECATED(f)),j=new Map();g.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.protocolMessageKey;if(b!=null){var d=(yield i.get(b.remote));if(d!=null&&!c("WAWebWid").equals(d,b.remote)){b=c("WAWebMsgKey").from({fromMe:b.fromMe,id:b.id,participant:b.participant,remote:d});j.set(a.id.id,b)}}});return function(b){return a.apply(this,arguments)}}());a.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=(yield i.get((b=a.id.remote)!=null?b:a.from)))!=null?b:a.id.remote;if(b.isSameAccount(a.id.remote)){e.push(a);return}var f=c("WAWebMsgKey").from({fromMe:a.id.fromMe,id:a.id.id,participant:a.id.participant,remote:b});if(a.subtype==="sender_revoke"){var g;e.push(babelHelpers["extends"]({},a,{id:f,kind:d("WAWebMsgType").MsgKind.ProtocolRevoke,protocolMessageKey:(g=j.get(a.id.id))!=null?g:a.protocolMessageKey,from:a.id.fromMe?a.from:b}))}else e.push(babelHelpers["extends"]({},a,{id:f,from:a.id.fromMe?a.from:b}));d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("incrementPnhCtwaDailyCount",{chatId:b})});return function(b){return a.apply(this,arguments)}}());return e});return h.apply(this,arguments)}function i(a,b,d){d=c("WAWebMsgKey").from({fromMe:d.fromMe,id:d.id,participant:d.participant,remote:b});a=c("WAWebMsgKey").from({fromMe:a.fromMe,id:a.id,participant:a.participant,remote:b});return{newMsgKey:a,newParentMsgKey:d}}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return n(a,"reactionParentKey")});return j.apply(this,arguments)}function f(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return n(a,"protocolMessageKey")});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return n(a,"pollUpdateParentKey")});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;e=(e=a.id.remote)!=null?e:a.from;if(!e.isUser())return a;var f=(yield d("WAWebApiChat").getMatChat_DEPRECATED(e)),g=a[b];if(f==null||g==null||!(g instanceof c("WAWebMsgKey"))||f.isSameAccount(e))return a;e=i(a.id,f,g);g=e.newMsgKey;e=e.newParentMsgKey;d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("incrementPnhCtwaDailyCount",{chatId:f});return babelHelpers["extends"]({},a,(g={id:g},g[b]=e,g.from=a.id.fromMe?a.from:f,g))});return o.apply(this,arguments)}function p(a){var b=new Set(),e=new Map();d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.forEach(function(a){var f=c("WANullthrows")(a.pollUpdateParentKey);a=d("WAWebMsgGetters").getOriginalSender(a);if(f!=null&&a!=null&&f.remote.isUser()&&!a.isSameAccount(f.remote)){a=c("WAWebMsgKey").from({fromMe:f.fromMe,id:f.id,participant:f.participant,remote:a});b.add(a.toString());e.set(f.toString(),a)}});return{matParentMsgKeys:b,alternateWidMap:e}}g.processRenderableMatMessages_DEPRECATED=a;g.processReactionMatMessages=e;g.processEditMatMessages=f;g.processPollUpdateMatMessages=l;g.processAddonMatMessages=n;g.getAlternateWidMapForPolls=p}),98);
__d("WAWebAddonPluginProcessor",["WANullthrows","WAWebAddonCrossWindowUtils","WAWebMessagePluginProcessAsAddonRegistry"],(function(a,b,c,d,e,f,g){function a(){var a=new Map();for(var b=c("WAWebMessagePluginProcessAsAddonRegistry"),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f.type;f=f.processor;f!=null&&a.set(g,f)}return a}var h=a();function b(){return h}function e(a){var b;typeof a==="string"?b=a:b=d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a);return c("WANullthrows")(h.get(b))}function f(a){return Boolean(h.get(a))}g.getAddonProcessorsMap=b;g.getAddonProcessor=e;g.hasAddonProcessor=f}),98);
__d("WAWebPluginCreateRegistryLookup",[],(function(a,b,c,d,e,f){function a(a){var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f;if(c){if(d>=a.length)break;f=a[d++]}else{d=a.next();if(d.done)break;f=d.value}f=f;var g=f.type;e=(e=f.subtype)!=null?e:null;var h=b.get(g);h==null&&(h=new Map(),b.set(g,h));h.set(e,f)}return function(a,c){return(a=b.get(a))==null?void 0:a.get((a=c)!=null?a:null)}}f.createMsgTypeRegistryLookup=a}),66);
__d("WAWebMessagePluginGenerateReportingTokenContent",["WAWebMessagePluginGenerateReportingTokenContentRegistry","WAWebMessagingGatingUtils","WAWebMsgType","WAWebPluginCreateRegistryLookup"],(function(a,b,c,d,e,f,g){var h=d("WAWebPluginCreateRegistryLookup").createMsgTypeRegistryLookup(c("WAWebMessagePluginGenerateReportingTokenContentRegistry"));function a(a){var b;return(b=h(a.type,a.subtype))==null?void 0:b.generateReportingTokenContent==null?void 0:b.generateReportingTokenContent(a)}function b(a,b){return!d("WAWebMessagingGatingUtils").isReportingTokenFromInclusionListEnabled()?a!==d("WAWebMsgType").MSG_TYPE.REACTION&&a!==d("WAWebMsgType").MSG_TYPE.REACTION_ENC&&a!==d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE&&a!==d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED&&a!==d("WAWebMsgType").MSG_TYPE.POLL_UPDATE:Boolean((a=h(a,b))==null?void 0:a.generateReportingTokenContent)}g.generateReportingTokenContent=a;g.isMsgTypeReportingTokenCompatible=b}),98);
__d("WAWebMessagePluginParseProtobuf",["WALogger","WAWebMessagePluginParseProtobufRegistry","WAWebMultipleMessageParserPluginParseProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseProtoPlugins: Matched more than 1 plugin types ",""]);h=function(){return a};return a}function a(a){var b=d("WAWebMultipleMessageParserPluginParseProtobuf").parseProtobufWithMultipleMessageParserPlugin(a),e=b.result;b=b.pluginsMatched;for(var f=c("WAWebMessagePluginParseProtobufRegistry"),g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;j=j(a);if(j!=null){var k;b.push(j.msgData.type+":"+((k=j.msgData.subtype)!=null?k:"null"));e==null&&(e=j)}}if(b.length>1){d("WALogger").ERROR(h(),b.join(",")).sendLogs("parse-protobuf-unexpected-plugin-match");return null}return e}g.parseProtobuf=a}),98);
__d("WAWebGenerateChatReportingTokenContent",[],(function(a,b,c,d,e,f){function a(a){a=new TextEncoder().encode((a=a.body)!=null?a:"");return self.crypto.getRandomValues(new Uint8Array(a.length))}f["default"]=a}),66);
__d("WAWebMessagePluginGenerateReportingTokenContentRegistry",["WAWebGenerateAudioOrPttReportingTokenContent","WAWebGenerateChatReportingTokenContent","WAWebGenerateDocumentReportingTokenContent","WAWebGenerateImageReportingTokenContent","WAWebGenerateInteractiveResponseReportingTokenContent","WAWebGeneratePtvReportingTokenContent","WAWebGenerateStickerReportingTokenContent","WAWebGenerateVideoReportingTokenContent"],(function(a,b,c,d,e,f,g){a=[{type:"album",subtype:void 0,generateReportingTokenContent:null},{type:"audio",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateAudioOrPttReportingTokenContent")},{type:"biz_content_placeholder",subtype:void 0,generateReportingTokenContent:null},{type:"buttons_response",subtype:void 0,generateReportingTokenContent:null},{type:"chat",subtype:"url",generateReportingTokenContent:c("WAWebGenerateChatReportingTokenContent")},{type:"chat",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateChatReportingTokenContent")},{type:"ciphertext",subtype:"bot_unavailable_fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:"fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:"hosted_unavailable_fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:void 0,generateReportingTokenContent:null},{type:"comment",subtype:void 0,generateReportingTokenContent:null},{type:"debug_placeholder",subtype:void 0,generateReportingTokenContent:null},{type:"document",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateDocumentReportingTokenContent")},{type:"event_creation",subtype:void 0,generateReportingTokenContent:null},{type:"event_edit_encrypted",subtype:void 0,generateReportingTokenContent:null},{type:"event_response",subtype:void 0,generateReportingTokenContent:null},{type:"groups_v4_invite",subtype:void 0,generateReportingTokenContent:null},{type:"hsm",subtype:void 0,generateReportingTokenContent:null},{type:"image",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateImageReportingTokenContent")},{type:"interactive",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateInteractiveResponseReportingTokenContent")},{type:"interactive_response",subtype:void 0,generateReportingTokenContent:null},{type:"keep_in_chat",subtype:void 0,generateReportingTokenContent:null},{type:"list",subtype:void 0,generateReportingTokenContent:null},{type:"list_response",subtype:void 0,generateReportingTokenContent:null},{type:"location",subtype:void 0,generateReportingTokenContent:null},{type:"multi_vcard",subtype:void 0,generateReportingTokenContent:null},{type:"native_flow",subtype:void 0,generateReportingTokenContent:null},{type:"newsletter_admin_invite",subtype:void 0,generateReportingTokenContent:null},{type:"notification_template",subtype:"contact_info_card",generateReportingTokenContent:null},{type:"order",subtype:void 0,generateReportingTokenContent:null},{type:"payment",subtype:"ciphertext",generateReportingTokenContent:null},{type:"payment",subtype:"futureproof",generateReportingTokenContent:null},{type:"payment",subtype:"invite",generateReportingTokenContent:null},{type:"payment",subtype:"request",generateReportingTokenContent:null},{type:"payment",subtype:"send",generateReportingTokenContent:null},{type:"pin_message",subtype:void 0,generateReportingTokenContent:null},{type:"pinned_message",subtype:void 0,generateReportingTokenContent:null},{type:"poll_creation",subtype:void 0,generateReportingTokenContent:null},{type:"poll_update",subtype:"poll_vote",generateReportingTokenContent:null},{type:"product",subtype:void 0,generateReportingTokenContent:null},{type:"protocol",subtype:"admin_revoke",generateReportingTokenContent:null},{type:"protocol",subtype:"bot_feedback",generateReportingTokenContent:null},{type:"protocol",subtype:"bot_memu_onboarding",generateReportingTokenContent:null},{type:"protocol",subtype:"bot_request_welcome",generateReportingTokenContent:null},{type:"protocol",subtype:"ephemeral_setting",generateReportingTokenContent:null},{type:"protocol",subtype:"ephemeral_sync_response",generateReportingTokenContent:null},{type:"protocol",subtype:"event_edit_decrypted",generateReportingTokenContent:null},{type:"protocol",subtype:"history_sync_notification",generateReportingTokenContent:null},{type:"protocol",subtype:"message_edit",generateReportingTokenContent:null},{type:"protocol",subtype:"sender_revoke",generateReportingTokenContent:null},{type:"protocol",subtype:"share_phone_number",generateReportingTokenContent:null},{type:"protocol",subtype:"status_mention_message",generateReportingTokenContent:null},{type:"ptt",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateAudioOrPttReportingTokenContent")},{type:"ptv",subtype:void 0,generateReportingTokenContent:c("WAWebGeneratePtvReportingTokenContent")},{type:"reaction",subtype:void 0,generateReportingTokenContent:null},{type:"reaction_enc",subtype:void 0,generateReportingTokenContent:null},{type:"request_phone_number",subtype:void 0,generateReportingTokenContent:null},{type:"revoked",subtype:"admin",generateReportingTokenContent:null},{type:"revoked",subtype:"sender",generateReportingTokenContent:null},{type:"sticker",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateStickerReportingTokenContent")},{type:"sticker_pack",subtype:void 0,generateReportingTokenContent:null},{type:"template_button_reply",subtype:void 0,generateReportingTokenContent:null},{type:"unknown",subtype:"payment_action_request_declined",generateReportingTokenContent:null},{type:"unknown",subtype:"payment_transaction_request_cancelled",generateReportingTokenContent:null},{type:"unknown",subtype:"phone",generateReportingTokenContent:null},{type:"unknown",subtype:"phone_only_feature",generateReportingTokenContent:null},{type:"unknown",subtype:void 0,generateReportingTokenContent:null},{type:"vcard",subtype:void 0,generateReportingTokenContent:null},{type:"video",subtype:void 0,generateReportingTokenContent:c("WAWebGenerateVideoReportingTokenContent")}];g["default"]=a}),98);
__d("WAWebAlbumsGatingUtils",["WAWebABProps","WAWebMessageAssociationGatingUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("album_v2_receiving_enabled")&&d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()}function b(){return d("WAWebABProps").getABPropConfigValue("album_v2_reactions_enabled")}g.isAlbumsReceivingEnabled=a;g.isAlbumsReactionEnabled=b}),98);
__d("WAWebAlbumsValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_MESSAGE_SECRET:"missing_message_secret",INVALID_MESSAGE_SECRET:"invalid_message_secret"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="AlbumValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.AlbumValidationErrorCode=a;g.AlbumValidationError=c}),98);
__d("WAWebAlbumsParseAlbumMessageProto",["WAWebAlbumsGatingUtils","WAWebAlbumsValidationError","WAWebMsgType","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a.msgContext;a=b.albumMessage;if(a==null)return null;if(!d("WAWebAlbumsGatingUtils").isAlbumsReceivingEnabled())return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.ALBUM}),contextInfo:null};a=a.contextInfo;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.ALBUM,kind:d("WAWebMsgType").MsgKind.Album});b=(b=b.messageContextInfo)==null?void 0:b.messageSecret;if(b==null)throw new(d("WAWebAlbumsValidationError").AlbumValidationError)(d("WAWebAlbumsValidationError").AlbumValidationErrorCode.MISSING_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(b.byteLength!==32)throw new(d("WAWebAlbumsValidationError").AlbumValidationError)(d("WAWebAlbumsValidationError").AlbumValidationErrorCode.INVALID_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID);return{msgData:c,contextInfo:a}}g["default"]=a}),98);
__d("WAWebEventsValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_MESSAGE_SECRET:"missing_message_secret",INVALID_MESSAGE_SECRET:"invalid_message_secret",EVENT_CREATION_INVALID_NAME:"event_creation_invalid_name",EVENT_CREATION_INVALID_DESCRIPTION:"event_creation_invalid_description",EVENT_CREATION_INVALID_CANCELED_STATUS:"event_creation_invalid_canceled_status",EVENT_CREATION_MISSING_DATE:"event_creation_missing_date",EVENT_CREATION_INVALID_LOCATION:"event_creation_invalid_location",EVENT_CREATION_MISSING_MESSAGE_SENDER:"event_creation_missing_message_sender",EVENT_CREATION_INVALID_END_TIME:"event_creation_invalid_end_time"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="EventCreationValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);e=b("$InternalEnum")({EVENT_RESPONSE_MISSING_MESSAGE_KEY:"event_response_missing_message_key",EVENT_RESPONSE_MISSING_ENC_IV:"event_response_missing_enc_iv",EVENT_RESPONSE_INVALID_SIZE_ENC_IV:"event_response_invalid_size_enc_iv",EVENT_RESPONSE_MISSING_ENC_PAYLOAD:"event_response_missing_enc_payload",EVENT_RESPONSE_MISSING_MESSAGE_SENDER:"event_response_missing_message_sender"});f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="EncryptedEventResponseValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);b=b("$InternalEnum")({EVENT_EDIT_MISSING_TARGET_MESSAGE_KEY:"event_edit_missing_target_message_key",EVENT_EDIT_MISSING_ENC_IV:"event_edit_missing_enc_iv",EVENT_EDIT_INVALID_SIZE_ENC_IV:"event_edit_invalid_size_enc_iv",EVENT_EDIT_MISSING_ENC_PAYLOAD:"event_edit_missing_enc_payload",EVENT_EDIT_MISSING_MESSAGE_SENDER:"event_edit_missing_message_sender",EVENT_EDIT_MISSING_EDITED_MESSAGE:"event_edit_missing_edited_message",EVENT_EDIT_MISSING_SENDER_TIMESTAMP:"event_edit_missing_sender_timestamp",EVENT_EDIT_PARENT_SENDER_MISMATCH:"event_edit_parent_sender_mismatch",EVENT_EDIT_INVALID_PROTOCOL_MESSAGE_TYPE:"event_edit_invalid_protocol_message_type",EVENT_EDIT_MISSING_MESSAGE_SECRET:"event_edit_missing_message_secret"});d=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="EncryptedEventEditValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.EventCreationValidationErrorCode=a;g.EventCreationValidationError=c;g.EncryptedEventResponseValidationErrorCode=e;g.EncryptedEventResponseValidationError=f;g.EncryptedEventEditValidationErrorCode=b;g.EncryptedEventEditValidationError=d}),98);
__d("WAWebEventsParseEventCreationMessageProto",["WALongInt","WAWebEventsGatingUtils","WAWebEventsValidationError","WAWebMsgType","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;var e=b.eventMessage;if(e==null)return null;if(!d("WAWebEventsGatingUtils").isEventsReceivingEnabled())return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.EVENT_CREATION}),contextInfo:null};var f=e.contextInfo,g=e.isCanceled,h=e.name,i=e.description,j=e.joinLink,k=e.startTime,l=e.endTime;e=e.location;k=d("WALongInt").maybeNumberOrThrowIfTooLarge(k);l=d("WALongInt").maybeNumberOrThrowIfTooLarge(l);if(h==null||h===""||h.length>d("WAWebEventsGatingUtils").getEventsNameLengthLimit())throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_INVALID_NAME,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(k==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_MISSING_DATE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(i!=null&&i.length>d("WAWebEventsGatingUtils").getEventsDescriptionLengthLimit())throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_INVALID_DESCRIPTION,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(g==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_INVALID_CANCELED_STATUS,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if((e==null?void 0:e.degreesLatitude)==null&&(e==null?void 0:e.degreesLongitude)!=null||(e==null?void 0:e.degreesLatitude)!=null&&(e==null?void 0:e.degreesLongitude)==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_INVALID_LOCATION,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(l!=null&&l<k)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_INVALID_END_TIME,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);h=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.EVENT_CREATION,kind:d("WAWebMsgType").MsgKind.EventCreation,eventName:h,eventDescription:i,eventJoinLink:j,eventStartTime:k,isEventCanceled:Boolean(g),eventLocation:e,eventEndTime:(c=l)!=null?c:void 0});if(a==="quoted"||a==="history_quoted"||a==="history")return{msgData:h,contextInfo:f};j=(i=b.messageContextInfo)==null?void 0:i.messageSecret;if(j==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.MISSING_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(j.byteLength!==32)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.INVALID_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID);return{msgData:h,contextInfo:f}}g["default"]=a}),98);
__d("WAWebBizContentPlaceholderMsgData.flow",["$InternalEnum"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MASK_LINKED_DEVICES:0});g.BizContentPlaceholderType=a}),98);
__d("WAWebParseBizContentPlaceholderProto",["WAWebBizContentPlaceholderMsgData.flow","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.placeholderMessage;if(b==null||b.type==null)return;b=h(b.type);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.BIZ_CONTENT_PLACEHOLDER,kind:d("WAWebMsgType").MsgKind.BizContentPlaceholder,bizContentPlaceholderType:b}),contextInfo:void 0}}function h(a){switch(a){case d("WAWebProtobufsE2E.pb").Message$PlaceholderMessage$PlaceholderType.MASK_LINKED_DEVICES:return d("WAWebBizContentPlaceholderMsgData.flow").BizContentPlaceholderType.MASK_LINKED_DEVICES}}g["default"]=a}),98);
__d("WAWebParseBotMemuOnboardingMessageProto",["WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;if(((b=b.protocolMessage)==null?void 0:b.type)!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.BOT_MEMU_ONBOARDING_MESSAGE)return;return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"bot_memu_onboarding"}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseBotRequestWelcomeMessageProto",["WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;if(((b=b.protocolMessage)==null?void 0:b.type)!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE)return;return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"bot_request_welcome"}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseGroupInviteMessageProto",["WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.groupInviteMessage;if(b==null)return;var c=b.caption,e=b.inviteCode,f=b.inviteExpiration,g=b.groupJid,h=b.groupName;b=b.contextInfo;a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.GROUPS_V4_INVITE,kind:d("WAWebMsgType").MsgKind.GroupsV4Invite,comment:c,inviteCode:e,inviteCodeExp:f==null?void 0:f.toString(),inviteGrp:g,inviteGrpName:h});return{msgData:a,contextInfo:b}}g["default"]=a}),98);
__d("WAWebParseListMessageProto",["WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.listMessage;if(b==null)return;var c=b.listType;if(c===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.SINGLE_SELECT||c===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST){c=a.businessOwnerJid;var e=a.productListItemCount;if(b.listType===d("WAWebProtobufsE2E.pb").Message$ListMessage$ListType.PRODUCT_LIST){var f;c=(f=b.productListInfo)==null?void 0:f.businessOwnerJid;e=(f=b.productListInfo)==null?void 0:f.productSections.reduce(function(a,b){return a+b.products.length},0)}f=babelHelpers["extends"]({},a,{businessOwnerJid:c,productListItemCount:e,type:d("WAWebMsgType").MSG_TYPE.LIST,kind:d("WAWebMsgType").MsgKind.List,list:b,footer:b.footerText})}else f=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown});return{msgData:f,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebMultiVcardMessageValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({EMPTY_LIST:"contacts_array_empty_list",INVALID_LIST_SIZE:"contacts_array_invalid_list_size"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="MultiVcardMessageValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.MultiVcardValidationErrorCode=a;g.MultiVcardMessageValidationError=c}),98);
__d("WAWebParseMultiVcardMessageProto",["WAWebMsgType","WAWebMultiVcardMessageValidationError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.contactsArrayMessage;if(b==null)return;var e=b.contacts,f=b.contextInfo;b=b.displayName;if((a==="relay"||a==="outgoing")&&(e==null||e.length===0))throw new(d("WAWebMultiVcardMessageValidationError").MultiVcardMessageValidationError)(d("WAWebMultiVcardMessageValidationError").MultiVcardValidationErrorCode.EMPTY_LIST,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);a=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.MULTI_VCARD,kind:d("WAWebMsgType").MsgKind.MultiVcard,vcardFormattedName:b,vcardList:Array.isArray(e)?e.map(function(a){return{displayName:a.displayName,vcard:a.vcard,isMultiVcard:!1}}):[]});return{msgData:a,contextInfo:f}}g["default"]=a}),98);
__d("WAWebParseOrderMessageProto",["WALongInt","WAWebE2EProtoParserApi","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.orderMessage;if(b==null)return;var c=b.thumbnail,e=b.message,f=b.orderId,g=b.itemCount,h=b.status,i=b.surface,j=b.sellerJid,k=b.orderTitle,l=b.token,m=b.totalAmount1000,n=b.totalCurrencyCode;b=b.contextInfo;c=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.ORDER,kind:d("WAWebMsgType").MsgKind.Order,thumbnail:d("WAWebE2EProtoParserApi").decodeBytes(c),message:e||"",orderId:f,itemCount:g||0,status:h,surface:i,sellerJid:j,orderTitle:k||"",token:l||"",totalAmount1000:d("WALongInt").numberOrThrowIfTooLarge((a=m)!=null?a:0),totalCurrencyCode:n,body:""});return{msgData:c,contextInfo:b}}g["default"]=a}),98);
__d("WAWebParsePaymentInviteMessageProto",["WALogger","WALongInt","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[payment-invite] render payment invite of type ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[payment-invite] parsePaymentInviteMessageProto: does not support novi transactions"]);i=function(){return a};return a}function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.paymentInviteMessage;if(b==null)return;if(b.serviceType===d("WAWebProtobufsE2E.pb").Message$PaymentInviteMessage$ServiceType.NOVI){d("WALogger").LOG(i());return{msgData:babelHelpers["extends"]({},a,{kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:null}}d("WALogger").LOG(h(),b.serviceType);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"invite",paymentExpiryTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(b.expiryTimestamp),paymentInviteServiceType:b.serviceType}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseProtocolHistorySyncNotificationMessageProto",["WAWebE2EProtoParserApi","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.protocolMessage;if(b==null)return;if(a!=="relay")return;if(b.type!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.HISTORY_SYNC_NOTIFICATION)return;a=b.historySyncNotification;if(a==null)return;var e={directPath:a.directPath,encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(a.fileEncSha256),filehash:d("WAWebE2EProtoParserApi").decodeBytes(a.fileSha256),mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(a.mediaKey),type:"md-msg-hist"};a=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"history_sync_notification",historySyncMetaData:{historySyncNotification:a,downloadOptions:e,progress:(b==null?void 0:(c=b.historySyncNotification)==null?void 0:c.progress)||0}});return{msgData:a,contextInfo:void 0}}g["default"]=a}),98);
__d("WAWebParseProtocolSharePhoneNumberMessageProto",["WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.protocolMessage;if(b==null)return;if(b.type!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.SHARE_PHONE_NUMBER)return;b=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"share_phone_number"});return{msgData:b,contextInfo:void 0}}g["default"]=a}),98);
__d("WAWebStatusGatingUtils",["WAWebABProps","WAWebPrimaryFeatures"],(function(a,b,c,d,e,f,g){var h=["\ud83d\ude0d","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude4f","\ud83d\udc4f","\ud83c\udf89","\ud83d\udcaf"],i=new Set(["\ud83d\ude0d","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude4f","\ud83d\udc4f","\ud83c\udf89","\ud83d\udcaf","\ud83d\udc4d","\u2764","\ud83d\ude0a","\ud83e\udd70","\ud83e\udd29","\ud83d\udc9a","\ud83e\udd23","\ud83d\ude06","\ud83d\udd25","\ud83d\ude4c","\ud83e\udd73","\ud83d\ude2d","\ud83d\ude14","\ud83e\udd7a","\ud83d\ude32","\ud83e\udd2f","\ud83d\ude21","\ud83d\ude24"]);function a(){try{var a=JSON.parse(d("WAWebABProps").getABPropConfigValue("status_reaction_emojis"));a=a.map(function(a){return String.fromCodePoint(a)}).filter(function(a){return i.has(a)});return a.length===0?h:a}catch(a){return h}}function j(){return d("WAWebPrimaryFeatures").primaryFeatureEnabled("post_status_in_companion")&&d("WAWebABProps").getABPropConfigValue("web_status_posting_enabled")}function b(){return j()&&d("WAWebABProps").getABPropConfigValue("web_status_posting_thumbnails_enabled")}function c(){return d("WAWebABProps").getABPropConfigValue("web_status_likes_receive_enabled")}function e(){return d("WAWebABProps").getABPropConfigValue("web_status_likes_send_enabled")}function f(){return d("WAWebABProps").getABPropConfigValue("status_poster_side_gating_enabled")}function k(){return d("WAWebABProps").getABPropConfigValue("status_mentions_receiver")}function l(){return d("WAWebABProps").getABPropConfigValue("status_mentions_in_chat_receiver")}function m(){return d("WAWebABProps").getABPropConfigValue("status_ranking_poster_side_gating_enabled")}g.statusQuickReplyEmojis=a;g.isStatusPostingEnabled=j;g.isStatusPostingThumbnailsEnabled=b;g.isStatusLikesReceiveEnabled=c;g.isStatusLikesSendEnabled=e;g.canCheckStatusLikesPosterGating=f;g.isStatusPrivateMentionsReceiveEnabled=k;g.isStatusMentionsInChatReceiveEnabled=l;g.canCheckStatusRankingPosterGating=m}),98);
__d("WAWebParseProtocolStatusMentionMessageProto",["WAWebMsgType","WAWebStatusGatingUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a.msgContext;if(!d("WAWebStatusGatingUtils").isStatusPrivateMentionsReceiveEnabled())return;a=b.statusMentionMessage;if(a==null||(a==null?void 0:a.message)==null)return;return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.PROTOCOL,futureproofSubtype:"status_mention_message"}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseRequestPhoneNumberMessageProto",["WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.requestPhoneNumberMessage;if(b==null)return;b=b.contextInfo;a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.REQUEST_PHONE_NUMBER,kind:d("WAWebMsgType").MsgKind.RequestPhoneNumber});return{msgData:a,contextInfo:b}}g["default"]=a}),98);
__d("WAWebStickerPackGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("receive_sticker_pack")}g.isStickerPackReceivingEnabled=a}),98);
__d("WAWebParseStickerPackMessageProto",["WAWebE2EProtoParserApi","WAWebMsgType","WAWebStickerPackGatingUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a.msgContext;a=b.stickerPackMessage;if(a==null)return null;if(!d("WAWebStickerPackGatingUtils").isStickerPackReceivingEnabled())return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.STICKER_PACK}),contextInfo:null};b=a.caption;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.STICKER_PACK,kind:d("WAWebMsgType").MsgKind.StickerPack,caption:b,filehash:d("WAWebE2EProtoParserApi").decodeBytes(a.fileSha256),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(a.fileEncSha256),mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(a.mediaKey),directPath:a.directPath,stickerPackId:a.stickerPackId});return{msgData:c,contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseVcardMessageProto",["WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.contactMessage;if(b==null)return;var c=b.contextInfo,e=b.displayName;b=b.vcard;a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.VCARD,kind:d("WAWebMsgType").MsgKind.Vcard,body:b,vcardFormattedName:e});return{msgData:a,contextInfo:c}}g["default"]=a}),98);
__d("WAWebPollsGatingUtils",["WAWebABProps","WAWebMobilePlatforms","WAWebNewsletterGatingUtils","WAWebPrimaryFeatures","WAWebWid"],(function(a,b,c,d,e,f,g){function h(){if(d("WAWebMobilePlatforms").isSMB()&&!d("WAWebABProps").getABPropConfigValue("parent_group_view_enabled_for_smb_on_web"))return!1;return!d("WAWebPrimaryFeatures").primaryFeatureEnabled("poll_creation_cag")?!1:d("WAWebABProps").getABPropConfigValue("poll_creation_cag_enabled")}function a(){return h()?!0:d("WAWebABProps").getABPropConfigValue("poll_receiving_cag_enabled")}function b(){return Math.min(d("WAWebABProps").getABPropConfigValue("poll_name_length"),500)}function e(){return 5e3}function f(){return Math.min(d("WAWebABProps").getABPropConfigValue("poll_option_length"),255)}function i(){return 2500}function j(){return Math.min(d("WAWebABProps").getABPropConfigValue("poll_option_count"),20)}function k(){return d("WAWebABProps").getABPropConfigValue("poll_result_details_view_enabled")}function l(){return d("WAWebABProps").getABPropConfigValue("polls_fast_follow_enabled")}function m(){return l()}function n(){return l()}function o(){return d("WAWebABProps").getABPropConfigValue("polls_single_option_control_enabled")}function p(a){return c("WAWebWid").isNewsletter(a)===!0?d("WAWebNewsletterGatingUtils").isNewsletterPollsSingleOptionEnabled():o()||d("WAWebABProps").getABPropConfigValue("polls_single_option_sender_control_enabled")}function q(a){return p(a)||d("WAWebABProps").getABPropConfigValue("polls_single_option_receiver_control_enabled")}function r(){return d("WAWebABProps").getABPropConfigValue("polls_notification_enabled")}g.isPollsCreationEnabledInCags=h;g.isPollsReceivingEnabledInCags=a;g.getMaxPollNameLength=b;g.getMaxPollNameLengthForIncomingMessages=e;g.getMaxPollOptionLength=f;g.getMaxPollOptionLengthForIncomingMessages=i;g.getMaxPollOptionCount=j;g.isPollResultDetailsViewEnabled=k;g.arePollsFastFollowsEnabled=l;g.isPrefillPollQuestionEnabled=m;g.isPollsCancellationPromptEnabled=n;g.isSingleOptionPollsSendingEnabled=p;g.isSingleOptionPollsReceivingEnabled=q;g.arePollsNotificationsEnabled=r}),98);
__d("WAWebPollsParsePollCreationMessageProto",["WALogger","WAWebMessageSecretErrorsWamEvent","WAWebMsgType","WAWebNewsletterIsNewsletterMsg","WAWebPollsGatingUtils","WAWebPollsValidationError","WAWebWamEnumE2eFailureReason","WAWebWamEnumMessageSecretAllowedType","WAWebWamEnumMessageSecretErrorType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["PollCreationValidationWarning: ",""]);h=function(){return a};return a}function a(a){var b=a.messageProtobuf,e=a.baseMessage;a=a.msgContext;var f=b.pollCreationMessage,g=b.pollCreationMessageV2,i=b.pollCreationMessageV3;f=(f=(f=f)!=null?f:g)!=null?f:i;var j=!c("WAWebNewsletterIsNewsletterMsg")({from:e.from,to:e.to});if(f==null)return null;if(f===g&&!d("WAWebPollsGatingUtils").isPollsReceivingEnabledInCags())return null;if(f===i&&!d("WAWebPollsGatingUtils").isSingleOptionPollsReceivingEnabled())return null;g=f.name;i=f.options;var k=f.selectableOptionsCount;f=f.contextInfo;if(g==null)throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.MISSING_NAME,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(g.length===0||g.length>d("WAWebPollsGatingUtils").getMaxPollNameLengthForIncomingMessages())throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.INVALID_NAME,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(a==="quoted"||a==="history_quoted"){a=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.POLL_CREATION,kind:d("WAWebMsgType").MsgKind.PollCreation,pollName:g,pollOptions:null,pollSelectableOptionsCount:null});return{msgData:a,contextInfo:f}}b=(a=b.messageContextInfo)==null?void 0:a.messageSecret;if(j&&b==null){new(d("WAWebMessageSecretErrorsWamEvent").MessageSecretErrorsWamEvent)({messageSecretAllowedList:d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.MISSING_MESSAGE_SECRET}).commit();throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.MISSING_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET)}if(j&&(b==null?void 0:b.byteLength)!==32){new(d("WAWebMessageSecretErrorsWamEvent").MessageSecretErrorsWamEvent)({messageSecretAllowedList:d("WAWebWamEnumMessageSecretAllowedType").MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:d("WAWebWamEnumMessageSecretErrorType").MESSAGE_SECRET_ERROR_TYPE.WRONG_LENGTH}).commit();throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.INVALID_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID)}if(i==null)throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.MISSING_OPTIONS,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(k==null)throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.MISSING_SELECTABLE_OPTIONS_COUNT,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);var l=new Set();a=i.map(function(a){a=a.optionName;if(a==null||a.length===0||a.length>d("WAWebPollsGatingUtils").getMaxPollOptionLengthForIncomingMessages())throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.INVALID_OPTION,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(l.has(a)){d("WALogger").WARN(h(),d("WAWebPollsValidationError").PollCreationValidationWarningCode.DUPLICATE_OPTIONS).tags("polls").sendLogs(d("WAWebPollsValidationError").PollCreationValidationWarningCode.DUPLICATE_OPTIONS);return null}var b=l.size;l.add(a);return{name:a,localId:b}}).filter(Boolean);if(a.length<2||a.length>d("WAWebPollsGatingUtils").getMaxPollOptionCount())throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.INVALID_OPTIONS_COUNT,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(k<0||k>a.length)throw new(d("WAWebPollsValidationError").PollCreationValidationError)(d("WAWebPollsValidationError").PollCreationValidationErrorCode.INVALID_SELECTABLE_OPTIONS_COUNT,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);j=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.POLL_CREATION,kind:d("WAWebMsgType").MsgKind.PollCreation,pollName:g,pollOptions:a,pollSelectableOptionsCount:k});return{msgData:j,contextInfo:f}}g["default"]=a}),98);
__d("WAWebAudioMessageProtoUtils",["WALogger","WAWebE2EProtoParserApi"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["fileLength is missing from msg type ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["seconds is 0 in msg type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["seconds is missing from msg type ",""]);j=function(){return a};return a}function a(a,b){if(!d("WAWebE2EProtoParserApi").shouldLogE2eProtoValidation(a,b))return;a=a.type;b.seconds==null?d("WALogger").LOG(j(),a).sendLogs(a+"-message-missing-seconds"):b.seconds===0&&d("WALogger").LOG(i(),a).sendLogs(a+"-message-incorrect-seconds");b.fileLength==null&&d("WALogger").LOG(h(),a).sendLogs(a+"-message-missing-fileLength")}function b(a){return a.byteLength>=64&&a.byteLength<=192}g.validateRequiredAudioProperties=a;g.validateWaveform=b}),98);
__d("WAWebLottieStickersGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_receiver_enabled")}g.isLottieStickerReceivingEnabled=a}),98);
__d("WAWebStickerMimeUtils",["WAWebLottieStickersGatingUtils"],(function(a,b,c,d,e,f,g){var h="application/was",i="image/webp";function a(){return d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled()?new Set([i,h]):new Set([i])}g.WhatsAppLottieStickerMimeType=h;g.getValidStickerMimeTypes=a}),98);
__d("WAWebMediaMessageGetValidatedProperties",["$InternalEnum","WALogger","WALongInt","WAWebHandleMsgError","WAWebMsgType","WAWebNewsletterIsNewsletterMsg","WAWebStickerMimeUtils","WAWebURLUtils","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid file length "," with a type "," for "," message"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected "," for "," message"]);i=function(){return a};return a}var j=b("$InternalEnum")({MISSING_MEDIA_KEY:"missing_media_key",INVALID_SHA256:"invalid_sha256",INVALID_ENC_SHA256:"invalid_enc_sha256",INVALID_URL:"invalid_url",INVALID_MIME_TYPE:"invalid_mime_type",INVALID_MEDIA_KEY:"invalid_media_key",INVALID_FILE_LENGTH:"invalid_file_length"}),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e){c=String(c)+" for "+a+" message";a=b.call(this,c,d,e)||this;a.name="MediaMessageValidationError";return a}return a}(d("WAWebHandleMsgError").MessageValidationError),l="audio/ogg; codecs=opus",m="audio/mp4",n="audio/mpeg",o="audio/aac",p="audio/amr",q="image/jpeg",r="image/png",s="image/webp",t="video/mp4",u="video/3gpp",v="video/",w="image/";function a(a){return x(a)||a.startsWith(w)}function x(a){return a.startsWith(v)}function y(a){var b,c;c=(b={},b[(c=d("WAWebMsgType")).MSG_TYPE.IMAGE]=new Set([q,r,s]),b[c.MSG_TYPE.STICKER]=d("WAWebStickerMimeUtils").getValidStickerMimeTypes(),b[c.MSG_TYPE.VIDEO]=new Set([t,u]),b[c.MSG_TYPE.AUDIO]=new Set([l,m,n,o,p]),b[c.MSG_TYPE.PTT]=new Set([l,m,n,o,p]),b);return c[a]}function z(a){a=c("WAWebURLUtils").hostname(a);return a.endsWith(".whatsapp.net")||a==="whatsapp.net"}var A=function(a){return a.id==null};function e(a,b,e,f){var g=a.mediaKey,l=a.fileSha256,m=a.fileEncSha256,n=a.fileLength,o=a.url;a=a.mimetype;e=e==="relay"||e==="outgoing";if(!e){return{mediaKey:g,fileSha256:l,fileEncSha256:m,fileLength:d("WALongInt").numberOrThrowIfTooLarge((e=n)!=null?e:0),url:o,mimetype:a}}if(A(b)){return{mediaKey:g,fileSha256:l,fileEncSha256:m,fileLength:d("WALongInt").numberOrThrowIfTooLarge((e=n)!=null?e:0),url:o,mimetype:a}}if(!c("WAWebNewsletterIsNewsletterMsg")({from:b.from,to:b.to})){if(g==null)throw new k(f,j.MISSING_MEDIA_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_KEY);if(g.byteLength!==32)throw new k(f,j.INVALID_MEDIA_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_KEY);if(m!=null&&m.byteLength!==32)throw new k(f,j.INVALID_ENC_SHA256,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_FILE_SHA256)}if((l==null?void 0:l.byteLength)!==32)throw new k(f,j.INVALID_SHA256,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_FILE_SHA256);if(o!=null&&(!c("WAWebURLUtils").isHttps(o)||!z(o)))throw new k(f,j.INVALID_URL,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_URL);if(a==null)throw new k(f,j.INVALID_MIME_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_MIME_TYPE);e=y(f);if(e!=null&&!e.has(a)){d("WALogger").LOG(i(),a,f);throw new k(f,j.INVALID_MIME_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_MIME_TYPE)}var p;f===d("WAWebMsgType").MSG_TYPE.STICKER?n!=null?(p=d("WALongInt").numberOrThrowIfTooLarge(n),b=p>=0):b=!0:f===d("WAWebMsgType").MSG_TYPE.DOCUMENT?n==null?b=!1:(p=d("WALongInt").numberOrThrowIfTooLarge(n),b=p>=0):n==null?b=!1:(p=d("WALongInt").numberOrThrowIfTooLarge(n),b=p>0);if(!b){d("WALogger").LOG(h(),n,typeof n,f);throw new k(f,j.INVALID_FILE_LENGTH,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_IMAGE_FILE_LENGTH,{sendLogs:f===d("WAWebMsgType").MSG_TYPE.IMAGE?.01:!0})}return{mediaKey:g,fileSha256:l,fileEncSha256:m,fileLength:p,url:o,mimetype:a}}g.MediaMessageValidationError=k;g.isMediaMimeType=a;g.isVideoMimeType=x;g.isWhatsAppSubdomain=z;g.getValidatedMediaMessageProperties=e}),98);
__d("WAWebPttParseAudioMessageProto",["WALongInt","WATimeUtils","WAWebAudioMessageProtoUtils","WAWebE2EProtoParserApi","WAWebMediaMessageGetValidatedProperties","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.audioMessage;if(b==null)return;var e=b.ptt;if(e===!0)return;e=b.contextInfo;var f=b.directPath,g=b.mimetype,h=b.seconds,i=b.mediaKeyTimestamp,j=b.streamingSidecar,k=b.waveform,l=b.backgroundArgb,m=b.viewOnce;a=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,c,a,d("WAWebMsgType").MSG_TYPE.AUDIO);var n=a.mediaKey,o=a.fileSha256,p=a.fileEncSha256,q=a.fileLength;a=a.url;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.AUDIO,kind:d("WAWebMsgType").MsgKind.Audio,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(a),directPath:f,mimetype:g,filehash:d("WAWebE2EProtoParserApi").decodeBytes(o),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(p),size:q,duration:""+(h||0),mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(n),mediaKeyTimestamp:i!=null?d("WALongInt").numberOrThrowIfTooLarge(i):d("WATimeUtils").unixTime(),streamingSidecar:j,waveform:k&&d("WAWebAudioMessageProtoUtils").validateWaveform(k)?new Uint8Array(k):void 0,backgroundColor:l,isViewOnce:m===!0});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(c,b);d("WAWebAudioMessageProtoUtils").validateRequiredAudioProperties(c,b);return{msgData:c,contextInfo:e}}g["default"]=a}),98);
__d("WAWebPttParsePttMessageProto",["WALongInt","WATimeUtils","WAWebAudioMessageProtoUtils","WAWebE2EProtoParserApi","WAWebMediaMessageGetValidatedProperties","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.audioMessage;if(b==null)return;var e=b.ptt;if(e!==!0)return;e=b.contextInfo;var f=b.directPath,g=b.mimetype,h=b.seconds,i=b.mediaKeyTimestamp,j=b.streamingSidecar,k=b.waveform,l=b.backgroundArgb,m=b.viewOnce;a=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,c,a,d("WAWebMsgType").MSG_TYPE.PTT);var n=a.mediaKey,o=a.fileSha256,p=a.fileEncSha256,q=a.fileLength;a=a.url;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.PTT,kind:d("WAWebMsgType").MsgKind.Ptt,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(a),directPath:f,mimetype:g,filehash:d("WAWebE2EProtoParserApi").decodeBytes(o),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(p),size:q,duration:""+(h||0),mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(n),mediaKeyTimestamp:i!=null?d("WALongInt").numberOrThrowIfTooLarge(i):d("WATimeUtils").unixTime(),streamingSidecar:j,waveform:k&&d("WAWebAudioMessageProtoUtils").validateWaveform(k)?new Uint8Array(k):void 0,backgroundColor:l,isViewOnce:m===!0});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(c,b);d("WAWebAudioMessageProtoUtils").validateRequiredAudioProperties(c,b);return{msgData:c,contextInfo:e}}g["default"]=a}),98);
__d("WABase64Sanitize",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["base64 sanitized due to extra whitespace"]);h=function(){return a};return a}function a(a){if(a==null)return null;var b=a.replace(/\s+$/,"");a!==b&&Math.random()<1e-5&&d("WALogger").WARN(h()).sendLogs("media-key-sanitize");return b}g["default"]=a}),98);
__d("WAWebStickersParseStickerMessageProto",["WABase64Sanitize","WALongInt","WATimeUtils","WAWebE2EProtoParserApi","WAWebLottieStickersGatingUtils","WAWebMediaMessageGetValidatedProperties","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage;a=a.msgContext;var f=b==null?void 0:b.lottieStickerMessage;f=f==null?void 0:(f=f.message)==null?void 0:f.stickerMessage;b=b==null?void 0:b.stickerMessage;if(f!=null){if(!d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled())return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.STICKER}),contextInfo:f==null?void 0:f.contextInfo};b=f}if(b==null)return;f=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,e,a,d("WAWebMsgType").MSG_TYPE.STICKER);a=f.mediaKey;var g=f.fileSha256,h=f.fileEncSha256;f=f.url;e=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.STICKER,kind:d("WAWebMsgType").MsgKind.Sticker,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(f),directPath:b.directPath||"",mimetype:b.mimetype||"",filehash:d("WAWebE2EProtoParserApi").decodeBytes(g),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(h),mediaKey:c("WABase64Sanitize")(d("WAWebE2EProtoParserApi").decodeBytes(a)),mediaKeyTimestamp:b.mediaKeyTimestamp!=null?d("WALongInt").numberOrThrowIfTooLarge(b.mediaKeyTimestamp):d("WATimeUtils").unixTime(),height:b.height||0,width:b.width||0,firstFrameLength:b.firstFrameLength,firstFrameSidecar:b.firstFrameSidecar,isAnimated:b.isAnimated,isLottie:b.isLottie,stickerSentTs:d("WALongInt").maybeNumberOrThrowIfTooLarge(b.stickerSentTs),isAvatar:b.isAvatar});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(e,b);return{msgData:e,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebMessagePluginParseProtobufRegistry",["WAWebAlbumsParseAlbumMessageProto","WAWebEventsParseEventCreationMessageProto","WAWebEventsParseEventEditEncryptedMessageProto","WAWebEventsParseEventResponseMessageProto","WAWebParseBizContentPlaceholderProto","WAWebParseBotFeedbackProtocolMessageProto","WAWebParseBotMemuOnboardingMessageProto","WAWebParseBotRequestWelcomeMessageProto","WAWebParseButtonsResponseMessageProto","WAWebParseCancelPaymentMessageProto","WAWebParseChatMessageProto","WAWebParseDeclinePaymentMessageProto","WAWebParseDocumentMessageProto","WAWebParseEncCommentMessageProto","WAWebParseEphemeralSyncResponseMessageProto","WAWebParseExtendedTextUrlChatMessageProto","WAWebParseGroupInviteMessageProto","WAWebParseHsmMessageProto","WAWebParseImageMessageProto","WAWebParseInteractiveMessageProto","WAWebParseInteractiveResponseMessageProto","WAWebParseKeepInChatMessageProto","WAWebParseListMessageProto","WAWebParseListResponseMessageProto","WAWebParseLocationMessageProto","WAWebParseMultiVcardMessageProto","WAWebParseNativeFlowButtonsMessageProto","WAWebParseNewsletterAdminInviteMessageProto","WAWebParseOrderMessageProto","WAWebParsePaymentInviteMessageProto","WAWebParsePinMessageProto","WAWebParseProductMessageProto","WAWebParseProtocolAdminRevokeMessageProto","WAWebParseProtocolEphemeralSettingMessageProto","WAWebParseProtocolHistorySyncNotificationMessageProto","WAWebParseProtocolMessageEditProto","WAWebParseProtocolSenderRevokeMessageProto","WAWebParseProtocolSharePhoneNumberMessageProto","WAWebParseProtocolStatusMentionMessageProto","WAWebParseRequestPaymentMessageProto","WAWebParseRequestPhoneNumberMessageProto","WAWebParseSendPaymentMessageProto","WAWebParseStickerPackMessageProto","WAWebParseTemplateButtonReplyMessageProto","WAWebParseVcardMessageProto","WAWebParseVideoMessageProto","WAWebPollsParsePollCreationMessageProto","WAWebPollsParsePollVoteMessageProto","WAWebPttParseAudioMessageProto","WAWebPttParsePttMessageProto","WAWebPtvParsePtvMessageProto","WAWebReactionsParseReactionEncMessageProto","WAWebReactionsParseReactionMessageProto","WAWebStickersParseStickerMessageProto"],(function(a,b,c,d,e,f,g){a=[c("WAWebAlbumsParseAlbumMessageProto"),c("WAWebEventsParseEventCreationMessageProto"),c("WAWebEventsParseEventEditEncryptedMessageProto"),c("WAWebEventsParseEventResponseMessageProto"),c("WAWebParseBizContentPlaceholderProto"),c("WAWebParseBotFeedbackProtocolMessageProto"),c("WAWebParseBotMemuOnboardingMessageProto"),c("WAWebParseBotRequestWelcomeMessageProto"),c("WAWebParseButtonsResponseMessageProto"),c("WAWebParseCancelPaymentMessageProto"),c("WAWebParseChatMessageProto"),c("WAWebParseDeclinePaymentMessageProto"),c("WAWebParseDocumentMessageProto"),c("WAWebParseEncCommentMessageProto"),c("WAWebParseEphemeralSyncResponseMessageProto"),c("WAWebParseExtendedTextUrlChatMessageProto"),c("WAWebParseGroupInviteMessageProto"),c("WAWebParseHsmMessageProto"),c("WAWebParseImageMessageProto"),c("WAWebParseInteractiveMessageProto"),c("WAWebParseInteractiveResponseMessageProto"),c("WAWebParseKeepInChatMessageProto"),c("WAWebParseListMessageProto"),c("WAWebParseListResponseMessageProto"),c("WAWebParseLocationMessageProto"),c("WAWebParseMultiVcardMessageProto"),c("WAWebParseNativeFlowButtonsMessageProto"),c("WAWebParseNewsletterAdminInviteMessageProto"),c("WAWebParseOrderMessageProto"),c("WAWebParsePaymentInviteMessageProto"),c("WAWebParsePinMessageProto"),c("WAWebParseProductMessageProto"),c("WAWebParseProtocolAdminRevokeMessageProto"),c("WAWebParseProtocolEphemeralSettingMessageProto"),c("WAWebParseProtocolHistorySyncNotificationMessageProto"),c("WAWebParseProtocolMessageEditProto"),c("WAWebParseProtocolSenderRevokeMessageProto"),c("WAWebParseProtocolSharePhoneNumberMessageProto"),c("WAWebParseProtocolStatusMentionMessageProto"),c("WAWebParseRequestPaymentMessageProto"),c("WAWebParseRequestPhoneNumberMessageProto"),c("WAWebParseSendPaymentMessageProto"),c("WAWebParseStickerPackMessageProto"),c("WAWebParseTemplateButtonReplyMessageProto"),c("WAWebParseVcardMessageProto"),c("WAWebParseVideoMessageProto"),c("WAWebPollsParsePollCreationMessageProto"),c("WAWebPollsParsePollVoteMessageProto"),c("WAWebPttParseAudioMessageProto"),c("WAWebPttParsePttMessageProto"),c("WAWebPtvParsePtvMessageProto"),c("WAWebReactionsParseReactionEncMessageProto"),c("WAWebReactionsParseReactionMessageProto"),c("WAWebStickersParseStickerMessageProto")];g["default"]=a}),98);
__d("WAWebMessagePluginProcessAsAddonRegistry",["WAWebAddonCommentMsgProcessor","WAWebEventEditAddonMessageProcessor","WAWebEventResponseAddonMessageProcessor","WAWebPinAddonMessageProcessor","WAWebPollVoteAddonMessageProcessor","WAWebReactionAddonMessageProcessor"],(function(a,b,c,d,e,f,g){a=[{type:"album",processor:null},{type:"audio",processor:null},{type:"biz_content_placeholder",processor:null},{type:"buttons_response",processor:null},{type:"chat",processor:null},{type:"chat",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"comment",processor:c("WAWebAddonCommentMsgProcessor")},{type:"debug_placeholder",processor:null},{type:"document",processor:null},{type:"event_creation",processor:null},{type:"event_edit_encrypted",processor:c("WAWebEventEditAddonMessageProcessor")},{type:"event_response",processor:c("WAWebEventResponseAddonMessageProcessor")},{type:"groups_v4_invite",processor:null},{type:"hsm",processor:null},{type:"image",processor:null},{type:"interactive",processor:null},{type:"interactive_response",processor:null},{type:"keep_in_chat",processor:null},{type:"list",processor:null},{type:"list_response",processor:null},{type:"location",processor:null},{type:"multi_vcard",processor:null},{type:"native_flow",processor:null},{type:"newsletter_admin_invite",processor:null},{type:"notification_template",processor:null},{type:"order",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"pin_message",processor:c("WAWebPinAddonMessageProcessor")},{type:"pinned_message",processor:null},{type:"poll_creation",processor:null},{type:"poll_update",processor:c("WAWebPollVoteAddonMessageProcessor")},{type:"product",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"ptt",processor:null},{type:"ptv",processor:null},{type:"reaction",processor:c("WAWebReactionAddonMessageProcessor")},{type:"reaction_enc",processor:c("WAWebReactionAddonMessageProcessor")},{type:"request_phone_number",processor:null},{type:"revoked",processor:null},{type:"revoked",processor:null},{type:"sticker",processor:null},{type:"sticker_pack",processor:null},{type:"template_button_reply",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"vcard",processor:null},{type:"video",processor:null}];g["default"]=a}),98);
__d("WAWebMultipleMessageParserPluginParseProtobuf",["WAWebMultipleMessageParserPluginParseProtobufRegistry"],(function(a,b,c,d,e,f,g){function a(a){var b=[],d;for(var e=c("WAWebMultipleMessageParserPluginParseProtobufRegistry"),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=h(a);if(h!=null){var i;b.push(h.msgData.type+":"+((i=h.msgData.subtype)!=null?i:"null"));d==null&&(d=h)}}return{result:d,pluginsMatched:b}}g.parseProtobufWithMultipleMessageParserPlugin=a}),98);
__d("WAWebMultipleMessageParserPluginParseProtobufRegistry",["WAWebParseHistorySyncProtocolMessageEditProto","WAWebParseNonNFMButtonsMessageProto","WAWebParseTemplateMessageProto"],(function(a,b,c,d,e,f,g){a=[c("WAWebParseHistorySyncProtocolMessageEditProto"),c("WAWebParseNonNFMButtonsMessageProto"),c("WAWebParseTemplateMessageProto")];g["default"]=a}),98);
__d("WAWebButtonsMessageProtoUtils",["WAWebE2EProtoUtils","WAWebMsgType","WAWebParseDocumentMessageProto","WAWebParseImageMessageProto","WAWebParseLocationMessageProto","WAWebParseVideoMessageProto","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.buttonsMessage,e=a.baseMessage,f=a.msgContext,g=b.documentMessage,h=b.imageMessage,i=b.locationMessage,j=b.videoMessage,k=b.contentText;a=b.footerText;var l=b.text;b=b.headerType;var m=function(){var a=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat,title:l==null?e.title:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(l),body:k==null?e.body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(k)});if(h){var b;return(b=(b=c("WAWebParseImageMessageProto")({messageProtobuf:{imageMessage:h},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(g){return(b=(b=c("WAWebParseDocumentMessageProto")({messageProtobuf:{documentMessage:g},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(i){return(b=(b=c("WAWebParseLocationMessageProto")({messageProtobuf:{locationMessage:babelHelpers["extends"]({},i,{name:void 0,address:void 0})},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(j){return(b=(b=c("WAWebParseVideoMessageProto")({messageProtobuf:{videoMessage:j},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}return a};m=m();return babelHelpers["extends"]({},m,{headerType:b,caption:k!=null?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(k):m.caption,footer:a!=null?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(a):m.footer})}function b(a,b,c){var e=a.documentMessage,f=a.imageMessage,g=a.locationMessage,h=a.videoMessage;if(b.isForwarded&&(e||f||g||h))return a;a={buttons:b.isForwarded===!0?void 0:b.dynamicReplyButtons,footerText:b.footer,contextInfo:c};e?(a.documentMessage=e,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.DOCUMENT,a.contentText=b.caption):f?(a.imageMessage=f,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.IMAGE,a.contentText=b.caption):g?(a.locationMessage=g,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.LOCATION,a.contentText=b.caption):h?(a.videoMessage=h,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.VIDEO,a.contentText=b.caption):b.title?(a.text=b.title,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.TEXT,a.contentText=b.body):(a.contentText=b.body,a.headerType=d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.EMPTY);return{buttonsMessage:a}}g.parseButtonsMessageProto=a;g.createDynamicReplyButtonsMessage=b}),98);
__d("WAWebMessageAssociation.flow",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["MEDIA_ALBUM"]);f.MessageAssociationType=a}),66);
__d("WAWebConvertAssociationTypeFromProto",["WAWebMessageAssociation.flow","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAWebMessageAssociation.flow").MessageAssociationType.cast(d("WAWebProtobufsE2E.pb").MessageAssociation$AssociationType.getName(a))}g.convertAssociationTypeFromProtoToClientSupportedAssociationType=a}),98);
__d("WAWebE2EProtoParserForCtwaContext",["WAWebABProps","WAWebBizGatingUtils","WAWebE2EProtoParserApi","WAWebLinkify"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.externalAdReply==null&&!d("WAWebABProps").getABPropConfigValue("wa_web_parse_always_show_ad_attribution"))return;var c={},e=b.alwaysShowAdAttribution,f=b.conversionSource,g=b.conversionData;e!=null&&(c.alwaysShowAdAttribution=e);f!=null&&(c.conversionSource=f);g!=null&&(c.conversionData=g);e=b.externalAdReply;if(e!=null){c.sourceUrl=e.sourceUrl;c.description=e.body;c.title=e.title;e.thumbnail!=null&&(c.thumbnail=d("WAWebE2EProtoParserApi").decodeBytes(e.thumbnail));c.thumbnailUrl=e.thumbnailUrl;c.mediaType=e.mediaType;c.mediaUrl=e.mediaUrl;f=d("WAWebLinkify").findLink(e.sourceUrl||"",!1,a.from);f!=null&&f.suspiciousCharacters!=null&&f.suspiciousCharacters.size!=null&&(c.isSuspiciousLink=f.suspiciousCharacters.size>0);e.adContextPreviewDismissed!=null&&d("WAWebBizGatingUtils").isHideAdContextIfSoftDismissed()&&(c.adContextPreviewDismissed=e.adContextPreviewDismissed)}Object.keys(c).length>0&&(a.ctwaContext=c)}g.parseCtwaContextProto=a}),98);
__d("WAWebMessageAssociationValidation",["$InternalEnum","WACustomError","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_PARENT_MESSAGE_KEY:"missing_parent_message_key",INVALID_PARENT_MESSAGE_KEY:"invalid_parent_message_key",MISSING_ASSOCIATION_TYPE:"missing_association_type",MISMATCH_SENDER:"mismatch_sender",UNSUPPORTED_ASSOCIATION_TYPE:"unsupported_association_type",INVALID_CHILD_MESSAGE:"invalid_child_message"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="MessageAssociationValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);e=b("$InternalEnum")({MESSAGE_ASSOCIATIONS_MISMATCH:"message_associations_mismatch"});f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b="errorCode: "+String(b);c!=null&&(b+=" comment: "+c);return a.call(this,b)||this}return b}(d("WACustomError").customError("MessageAssociationInfraError"));g.MessageAssociationValidationErrorCode=a;g.MessageAssociationValidationError=c;g.MessageAssociationInfraErrorCode=e;g.MessageAssociationInfraError=f}),98);
__d("WAWebViewOnceGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("view_once_sp_receiver")}function b(){return d("WAWebABProps").getABPropConfigValue("enable_soox_message_receiving")}function c(){return d("WAWebABProps").getABPropConfigValue("enable_soox_message_sending")}g.isViewOnceSunsetEnabled=a;g.isReceivingViewOnceV2Enabled=b;g.isSendingViewOnceV2Enabled=c}),98);
__d("WAWebE2EProtoParser",["WALogger","WANullthrows","WAWebBotGating","WAWebConvertAssociationTypeFromProto","WAWebE2EProtoParserForCtwaContext","WAWebE2EProtoUtils","WAWebMessageAssociationGatingUtils","WAWebMessageAssociationValidation","WAWebMessagePluginParseProtobuf","WAWebMsgKeyUtils","WAWebParseForwardedNewsletterMessageInfo","WAWebQuotedMessageProtoUtils","WAWebViewOnceGatingUtils","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseContextInfoProto: failed to parse forwarded newsletter info"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseContextInfoProto: payment not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["drop: not Message"]);j=function(){return a};return a}function k(a,b,c,e,f,g,h,i,k,l,o){a||d("WALogger").ERROR(j()).devConsole(a,b).sendLogs("null-message");var p=a.messageContextInfo;a=m(a,b,c,e,f,g,h,i,k,l,o);b=a.contextInfo;e=a.msgData;n(e,b,c,g);r(e,p);return e}function l(a,b){b=b==null?void 0:b.messageAssociation;if(b!=null&&d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()){var c=b.parentMessageKey;b=b.associationType;if(c==null)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.MISSING_PARENT_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(b==null)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.MISSING_ASSOCIATION_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);var e=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(c,a);if(e==null)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.INVALID_PARENT_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);e=d("WAWebMsgKeyUtils").equalSendersAddressingSensitive(e,a.id);if(!e)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.MISMATCH_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.ERROR_PARENT_CHILD_SENDER_JID_MISMATCH);return{associationType:b,parentMessageKey:c}}return null}function m(a,b,c,e,f,g,h,i,j,k,m){var n,o=a.viewOnceMessage,r=a.viewOnceMessageV2,s=a.viewOnceMessageV2Extension,t=a.ephemeralMessage,u=a.documentWithCaptionMessage,v=a.groupMentionedMessage,w=a.editedMessage,x=a.botInvokeMessage,y=l(b,a.messageContextInfo);e=d("WAWebMessagePluginParseProtobuf").parseProtobuf({messageProtobuf:a,baseMessage:b,msgContext:c,paymentInfo:e,quotedPaymentInfo:g,editAttr:i,bizInfo:h,finalLocation:f,rcat:j,bizSource:k,msgMeta:m,messageAssociation:y});if(e){if(y!=null&&(e==null?void 0:e.msgData.associationType)!==d("WAWebConvertAssociationTypeFromProto").convertAssociationTypeFromProtoToClientSupportedAssociationType(y.associationType))throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.INVALID_CHILD_MESSAGE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return e}v&&q(b,v,c);u&&q(b,u,c);o&&q(b,o,c);d("WAWebViewOnceGatingUtils").isViewOnceSunsetEnabled()&&(r&&q(b,r,c),s&&d("WAWebViewOnceGatingUtils").isReceivingViewOnceV2Enabled()&&q(b,s,c));t&&q(b,t,c);w&&q(b,w,c);g=a.deviceSentMessage;g&&p(b,g,c);x&&q(b,x,c);return{contextInfo:n,msgData:b}}function n(a,b,c,e){if(!b)return;o(a,b,c,e);d("WAWebE2EProtoParserForCtwaContext").parseCtwaContextProto(a,b)}function o(a,b,c,e){var f=b.quotedMessage,g=b.mentionedJid,j=b.groupMentions;if(f!=null&&d("WAWebE2EProtoUtils").isQuotedSupported(f)){var k=a.selectedCarouselCardIndex!=null;a.quotedMsg=d("WAWebQuotedMessageProtoUtils").parseQuotedMessage({quotedMsg:f,msgContext:c,isCarouselCardReply:k,contextInfo:b,targetMessageKey:a.id})}a.quotedMsg&&a.quotedMsg.type==="payment"&&e&&d("WALogger").LOG(i());a.quotedStanzaID=b.stanzaId;a.quotedParticipant=d("WAWebE2EProtoUtils").decodeJid(b.participant);a.quotedRemoteJid=d("WAWebE2EProtoUtils").decodeJid(b.remoteJid);a.quotedGroupSubject=d("WAWebE2EProtoUtils").decodeJid(b.groupSubject);a.quotedParentGroupJid=d("WAWebE2EProtoUtils").decodeJid(b.parentGroupJid);a.mentionedJidList=Array.isArray(g)?g.map(d("WAWebE2EProtoUtils").decodeJid):g;a.groupMentions=Array.isArray(j)?j.map(function(a){return{groupSubject:a.groupSubject,groupJid:d("WAWebE2EProtoUtils").decodeJid(a.groupJid)}}):j;a.isForwarded=b.isForwarded;a.forwardingScore=b.forwardingScore;b.expiration!=null&&(a.ephemeralDuration=b.expiration);b.ephemeralSettingTimestamp!=null&&(a.ephemeralSettingTimestamp=b.ephemeralSettingTimestamp);b.ephemeralSharedSecret!=null&&(a.ephemeralSharedSecret=b.ephemeralSharedSecret);f=b.disappearingMode;if(f!=null){c=d("WAWebE2EProtoUtils").protoToDisappearingModeInitiator(a,f);c!=null&&(a.disappearingModeInitiator=c);k=d("WAWebE2EProtoUtils").protoToDisappearingMode(a,f);k!=null&&(a.disappearingModeTrigger=k.disappearingModeTrigger,a.disappearingModeInitiatedByMe=k.initiatedByMe)}b.actionLink!=null&&(a.actionLink=b.actionLink);b.smbClientCampaignId!=null&&(a.smbClientCampaignId=b.smbClientCampaignId);if(b.forwardedNewsletterMessageInfo!=null)try{a.forwardedNewsletterMessageInfo=d("WAWebParseForwardedNewsletterMessageInfo").parseForwardedNewsletterMessageInfo(b.forwardedNewsletterMessageInfo)}catch(a){d("WALogger").ERROR(h()).devConsole(a).sendLogs("Failed to parse Forwarded Newsletter Message Info.")}}function p(a,b,c){var e=d("WAWebE2EProtoUtils").decodeJid(b.destinationJid);a.id.remote=e;a.to=e;Object.assign(a,k(b.message,a,c))}function q(a,b,d){Object.assign(a,k(c("WANullthrows")(b.message),a,d))}function r(a,b){var c;if(!b)return;b.messageSecret!=null&&(a.messageSecret=new Uint8Array(b.messageSecret));if(d("WAWebBotGating").isBotReceiveEnabled()&&(((c=a.id)==null?void 0:(c=c.participant)==null?void 0:c.isBot())||((c=a.id)==null?void 0:(c=c.remote)==null?void 0:c.isBot()))){(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.pluginType)!=null?a.botPluginType=b.botMetadata.pluginMetadata.pluginType:(b==null?void 0:(c=b.botMetadata)==null?void 0:c.pluginMetadata)!=null&&(a.botPluginMaybeParent=!0);(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.referenceIndex)!=null&&(a.botPluginReferenceIndex=b.botMetadata.pluginMetadata.referenceIndex);(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.provider)!=null&&(a.botPluginSearchProvider=b.botMetadata.pluginMetadata.provider);(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.searchProviderUrl)!=null&&(a.botPluginSearchUrl=b.botMetadata.pluginMetadata.searchProviderUrl);(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.thumbnailCdnUrl)!=null&&(a.botReelPluginThumbnailCdnUrl=b.botMetadata.pluginMetadata.thumbnailCdnUrl);(b==null?void 0:(c=b.botMetadata)==null?void 0:(c=c.pluginMetadata)==null?void 0:c.searchQuery)!=null&&(a.botPluginSearchQuery=b.botMetadata.pluginMetadata.searchQuery)}}g.parseMsgProto=k;g.validateMessageAssociationInMessageContextInfo=l;g.parseContextInfo=n;g.parseContextInfoProto=o;g.parseMessageContextInfoProto=r}),98);
__d("WAWebAddonProcessingError",["$InternalEnum","WAWebHandleMsgError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({MISSING_THREAD_MESSAGE_ID:"missing_thread_message_id",MISSING_THREAD_MESSAGE_SENDER_JID:"missing_thread_message_sender_jid"}),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a="type: "+a+", errorCode: "+String(c);c=b.call(this,a,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE)||this;c.name="PlaceholderValidationError";return c}return a}(d("WAWebHandleMsgError").MessageValidationError);a=function(a,b){var c=a.threadMsgId;a=a.threadMsgSenderJid;if(c==null)throw new i(b,h.MISSING_THREAD_MESSAGE_ID);else if(a==null)throw new i(b,h.MISSING_THREAD_MESSAGE_SENDER_JID);return{threadMsgId:c,threadMsgSenderJid:a}};g.validateMsgMeta=a}),98);
__d("WATrie",["WANullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this._children={},this._indices=[],a&&(this._data=a)}a.fromBackwardsStrings=function(b,c){return b.reduce(function(a,b,c){return a.addBackwardsString(b,c)},new a(c))._optimize()};var b=a.prototype;b.addBackwardsString=function(b,c){var d=b.length-1,e=this;while(d>=0){var f=b.charAt(d);e._addIndex(c);e=e.get(f)||e.set(f,new a());d--}e._addIndex(c);return this};a.fromForwardsStrings=function(b,c){return b.reduce(function(a,b,c){return a.addForwardsString(b,c)},new a(c))._optimize()};b.addForwardsString=function(b,c){var d=0,e=this;while(d<b.length){var f=b.charAt(d);e._addIndex(c);e=e.get(f)||e.set(f,new a());d++}e._addIndex(c);return this};b.set=function(a,b){this._children[a]=b;return b};b.get=function(a){return this._children[a]};b.getChildren=function(){var a=this;return Object.keys(this._children).map(function(b){return{prefix:b,node:c("WANullthrows")(a.get(b))}})};b.hasChildren=function(){return!h(this._children)};b.search=function(a){var b=this._data;if(!b)return[];var c=this;for(var d=0;d<a.length;d++){if(!c)break;var e=a[d];c=c.get(e)}if(!c)return[];e=c.getIndices();return e.map(function(a){return b[a]})};b._addIndex=function(a){this._indices.push(a)};b.getIndices=function(){var a=this._indices,b=Object.keys(this._children);return b.length===1&&this._indices.length===0?this._children[b[0]].getIndices():a};b._optimize=function(){var a=this;if(!this.hasChildren())return this;var b=Object.keys(this._children),c=this._children[b[0]]._indices;b.forEach(function(b){a._children[b]._optimize()});b.length===1&&this._indices.length===c.length&&(this._indices=[]);return this};b.testOnlyGetChildrenProperty=function(){return this._children};b.testOnlyGetIndicesProperty=function(){return this._indices};return a}();function h(a){for(a in a)return!1;return!0}g["default"]=a}),98);
__d("WAWebEmojiCompile",["WATrie","escapeRegex"],(function(a,b,c,d,e,f,g){function a(a){a=c("WATrie").fromForwardsStrings(a.sort(function(a,b){return b.length-a.length}).map(function(a){return""+a+i}));return h(null,a,null,0)}function h(a,b,d,e,f){var g=[],k=!1,l=f;if(l==null)if(a&&e===1){f=j.has(a);f&&(l=!0)}else a&&d&&e===2&&(l=j.has(d+a));b.getChildren().forEach(function(b){if(b.prefix===i){k=!0;return}g.push(h(b.prefix,b.node,a,e+1,l))});f=a===String.fromCodePoint(65039)&&d!=null&&!l?String.fromCodePoint(65039)+"?":c("escapeRegex")(a||"");b=g.length===0?"":"(?:"+g.join("|")+")";b&&k&&(b+="?");return""+f+b}var i="\n",j=new Set([String.fromCodePoint(169),String.fromCodePoint(174),String.fromCodePoint(8482),String.fromCodePoint(9823),String.fromCodePoint(9854),String.fromCodePoint(12336)]);g["default"]=a}),98);
__d("WAWebSpecialEmojisWithSkinTones",[],(function(a,b,c,d,e,f){a={"\ud83e\udd1d\ud83c\udffb":"\ud83e\udd1d","\ud83e\udd1d\ud83c\udffc":"\ud83e\udd1d","\ud83e\udd1d\ud83c\udffd":"\ud83e\udd1d","\ud83e\udd1d\ud83c\udffe":"\ud83e\udd1d","\ud83e\udd1d\ud83c\udfff":"\ud83e\udd1d","\ud83d\udc6f\ud83c\udffb":"\ud83d\udc6f","\ud83d\udc6f\ud83c\udffc":"\ud83d\udc6f","\ud83d\udc6f\ud83c\udffd":"\ud83d\udc6f","\ud83d\udc6f\ud83c\udffe":"\ud83d\udc6f","\ud83d\udc6f\ud83c\udfff":"\ud83d\udc6f","\ud83d\udc6f\ud83c\udffb\u200d\u2642":"\ud83d\udc6f\u200d\u2642","\ud83d\udc6f\ud83c\udffc\u200d\u2642":"\ud83d\udc6f\u200d\u2642","\ud83d\udc6f\ud83c\udffd\u200d\u2642":"\ud83d\udc6f\u200d\u2642","\ud83d\udc6f\ud83c\udffe\u200d\u2642":"\ud83d\udc6f\u200d\u2642","\ud83d\udc6f\ud83c\udfff\u200d\u2642":"\ud83d\udc6f\u200d\u2642"};f["default"]=a}),66);
__d("WAWebConvertToTextWithoutSpecialEmojis",["WAWebEmojiCompile","WAWebSpecialEmojisWithSkinTones"],(function(a,b,c,d,e,f,g){var h=null;function a(a){if(!h){var b=c("WAWebEmojiCompile")(Object.keys(c("WAWebSpecialEmojisWithSkinTones")));h=new RegExp("("+b+")","g")}h.lastIndex=0;return a.replace(h,function(a){return c("WAWebSpecialEmojisWithSkinTones")[a]})}g.convertToTextWithoutSpecialEmojis=a}),98);
__d("WAWebInteractiveResponseMessageType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NATIVE_FLOW:"native_flow"});c=a;f["default"]=c}),66);
__d("WAWebE2EProtoUtils",["invariant","WABase64","WAJids","WALogger","WALongInt","WANullthrows","WATypeUtils","WAWebABProps","WAWebAddonCrossWindowUtils","WAWebAddonProcessMsgsUtils","WAWebAddonProcessingError","WAWebApiContact","WAWebBackendApi","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBizGatingUtils","WAWebConvertToTextWithoutSpecialEmojis","WAWebDBGroupsGroupMetadata","WAWebEphemeralityTypes","WAWebHandleMsgCommon","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebInteractiveResponseMessageType","WAWebIsCagGroupCache","WAWebMobilePlatforms","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebUpdateDbForGroupActionApi","WAWebUserPrefsMeUser","WAWebVerifyProtobufMsgObjectKeys","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["url(deprecatedMms3Url) missing from msg type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fileEncSha256 missing from msg type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fileSha256 missing from msg type ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["directPath missing from msg type ",""]);l=function(){return a};return a}function m(a){if(d("WAWebABProps").getABPropConfigValue("web_unwrap_message_for_stanza_attributes")){var b;b=(b=d("WAWebVerifyProtobufMsgObjectKeys").getUnwrappedProtobufMessage(a))!=null?b:a}else b=a;if(b.ephemeralMessage){a=b.ephemeralMessage.message;return a?m(a):d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text}if(b.groupMentionedMessage){a=b.groupMentionedMessage.message;return a?m(a):d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text}if(b.botInvokeMessage){a=b.botInvokeMessage.message;return a?m(a):d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text}if(b.deviceSentMessage){a=b.deviceSentMessage.message;return a?m(a):d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text}if(b.reactionMessage||b.encReactionMessage)return d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.reaction;if(b.eventMessage||b.encEventResponseMessage||((a=b.secretEncryptedMessage)==null?void 0:a.secretEncType)===d("WAWebProtobufsE2E.pb").Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event;if(b.pollCreationMessage||b.pollCreationMessageV2||b.pollCreationMessageV3||b.pollUpdateMessage)return d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll;if(((a=b.extendedTextMessage)==null?void 0:a.matchedText)!=null&&b.extendedTextMessage.matchedText.trim()!=="")return d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.media;return Boolean(b.conversation)||b.extendedTextMessage||b.templateButtonReplyMessage||b.protocolMessage||b.interactiveMessage||b.keepInChatMessage||b.requestPhoneNumberMessage||b.editedMessage||b.pinInChatMessage||b.encCommentMessage||b.newsletterAdminInviteMessage?d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text:d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.media}function a(a){if(d("WAWebAddonCrossWindowUtils").getAddonProcessorType(a)===d("WAWebMsgType").MSG_TYPE.COMMENT){a=d("WAWebAddonProcessMsgsUtils").getParentMsgKey(a);var b=c("WANullthrows")(a.participant,"undefined participant");b=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(b));return{threadMsgId:a.id,threadMsgSenderLid:c("WANullthrows")(b,"undefined lid")}}}function e(a){if(d("WAWebABProps").getABPropConfigValue("web_unwrap_message_for_stanza_attributes")){var b;b=(b=d("WAWebVerifyProtobufMsgObjectKeys").getUnwrappedProtobufMessage(a))!=null?b:a}else b=a;return b.reactionMessage!=null||b.encReactionMessage!=null||((a=b.pollUpdateMessage)==null?void 0:a.vote)!=null||b.keepInChatMessage!=null||b.editedMessage!=null||b.pinInChatMessage!=null||b.protocolMessage!=null&&b.protocolMessage.type===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE||((a=b.botInvokeMessage)==null?void 0:(a=a.message)==null?void 0:(a=a.protocolMessage)==null?void 0:a.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE||((a=b.protocolMessage)==null?void 0:a.type)===d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE||b.encEventResponseMessage!=null||((a=b.secretEncryptedMessage)==null?void 0:a.secretEncType)===d("WAWebProtobufsE2E.pb").Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT?d("WAWebBackendJobs.flow").DecryptFailType.Hide:d("WAWebBackendJobs.flow").DecryptFailType.Show}function f(a,b){var e=a.fromMe,f=a.id,g=a.participant;a=a.remoteJid;g=(g=g)!=null?g:b==null?void 0:b.toString();e!=null&&a!=null&&f!=null||h(0,56276);b=g!=null&&d("WAWebWidFactory").isWidlike(g)?d("WAWebWidFactory").createWid(g):void 0;g=d("WAWebWidFactory").createWid(a);(g.isGroup()||g.isBroadcast())&&e&&(b=d("WAWebUserPrefsMeUser").getMaybeMeUser());return new(c("WAWebMsgKey"))({fromMe:e,id:f,participant:b,remote:d("WAWebWidFactory").createWid(a)})}function n(a){var b;return{fromMe:a.fromMe,id:a.id,participant:a.fromMe?void 0:(b=a.participant)==null?void 0:b.toString({legacy:!0}),remoteJid:a.remote.toString({legacy:!0})}}function o(a){return{paymentStatus:a.status,paymentTxnStatus:a.txnStatus,paymentCurrency:a.currency||"",paymentAmount1000:c("WANullthrows")(d("WALongInt").maybeNumberOrThrowIfTooLarge(a.amount1000)),paymentMessageReceiverJid:d("WAWebWidFactory").createWid(c("WANullthrows")(a.receiverJid)),paymentExpiryTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(a.expiryTimestamp),paymentTransactionTimestamp:c("WANullthrows")(d("WALongInt").maybeNumberOrThrowIfTooLarge(a.transactionTimestamp))}}function p(a){var b,c=["XUS","XDX","USDP"];b=(a==null?void 0:(b=a.primaryAmount)==null?void 0:b.currencyCode)||(a==null?void 0:a.currency);return c.includes(b==null?void 0:b.toUpperCase())?!0:!1}function q(a,b){return a.remote.isGroup()&&!((a=a.participant)==null?void 0:a.equals(d("WAWebUserPrefsMeUser").getMeUser()))&&!b.equals(d("WAWebUserPrefsMeUser").getMeUser())?!1:!0}function r(a,b){return a!=null||(b==null?void 0:b.nativeFlowName)!=null?!d("WAWebBizGatingUtils").nativeFlowMessagesEnabled()?!1:s(a,b):!0}function s(a,b){return(a!=null||(b==null?void 0:b.nativeFlowName)!=null)&&(b==null?void 0:b.nativeFlowName)!=null?a!=null&&c("WAWebInteractiveMessagesNativeFlowName").cast(b.nativeFlowName)===a:!0}function t(a){return a===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS||a===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS||a===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS||a===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD||a===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO}function u(a){var b;if(((b=a.interactiveMessage)==null?void 0:(b=b.nativeFlowMessage)==null?void 0:(b=b.buttons)==null?void 0:b.length)===1)return Z(a.interactiveMessage.nativeFlowMessage.buttons[0].name);if(((b=a.buttonsMessage)==null?void 0:(b=b.buttons)==null?void 0:b.length)===1){return Z((b=a.buttonsMessage.buttons[0].nativeFlowInfo)==null?void 0:b.name)}}var v=["novi_login","novi_report_transaction","novi_hub","novi_view_code","novi_view_transaction","novi_view_bank_detail","novi_view_card_detail","wa_payment_transaction_details","wa_payment_learn_more","wa_payment_fbpin_reset"];function w(a){return a.some(function(a){return a.nativeFlowInfo&&v.includes(a.nativeFlowInfo.name)||v.includes(a.buttonId)})}function x(a){switch(a){case c("WAWebInteractiveMessageType").NATIVE_FLOW:return d("WAWebBizGatingUtils").interactiveNativeFlowMessagesEnabled();case c("WAWebInteractiveMessageType").SHOPS_STOREFRONT:return d("WAWebBizGatingUtils").shopsInteractiveMessageEnabled();case c("WAWebInteractiveMessageType").CAROUSEL:return d("WAWebBizGatingUtils").carouselsEnabled()}}function y(a){switch(a){case c("WAWebInteractiveMessageType").NATIVE_FLOW:return"nativeFlowMessage";case c("WAWebInteractiveMessageType").SHOPS_STOREFRONT:return"shopStorefrontMessage";case c("WAWebInteractiveMessageType").CAROUSEL:return"carouselMessage"}}function z(a){for(var b of c("WAWebInteractiveMessageType").members())if(y(b)in a)return b;return null}function A(a,b){b=b==null?void 0:b.messageVersion;if(b==null||a==null)return!1;switch(a){case c("WAWebInteractiveMessageType").NATIVE_FLOW:return b<=1;case c("WAWebInteractiveMessageType").SHOPS_STOREFRONT:return b<=1;case c("WAWebInteractiveMessageType").CAROUSEL:return b<=1}}function B(a){switch(a){case c("WAWebInteractiveResponseMessageType").NATIVE_FLOW:return"nativeFlowResponseMessage"}}function C(a){for(var b of c("WAWebInteractiveResponseMessageType").members())if(B(b)in a)return b;return null}function D(a){switch(a){case c("WAWebInteractiveResponseMessageType").NATIVE_FLOW:return d("WAWebBizGatingUtils").interactiveNativeFlowResponseMessagesEnabled()}}function E(a,b,d){switch(a){case c("WAWebInteractiveResponseMessageType").NATIVE_FLOW:b=c("WANullthrows")(b.nativeFlowResponseMessage);var e=c("WANullthrows")(c("WAWebInteractiveMessagesNativeFlowName").cast(b.name)),f=c("WANullthrows")(b.version);if(f>1||!s(e,d))throw c("err")("Invalid message");return{name:e,version:f,type:a,paramsJson:c("WANullthrows")(b.paramsJson)}}}function F(a){return a.reactionMessage!=null?!1:!0}function G(a){return a!=null&&c("WAWebWid").isWid(a)?d("WAWebWidFactory").createWid(a):a}function H(a){if(a==null)return;c("WAWebWid").isWid(a)||h(0,64887);return d("WAWebWidFactory").createWid(a)}function I(a,b){if(!a)throw c("err")("getMsgKey: no message key is defined for protocol message");var d=a.id;if(d==null||d==="")throw c("err")("getMsgKey: no message id is defined for protocol message");return M(d,a,b)}function J(a,b){if(a==null)return;var c=a.id;if(c==null)return;return M(c,a,b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon)}function K(a,b){if(a==null)return;var c=a.id;if(c==null)return;return M(c,a,b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message)}function L(a,b,e){a=d("WAWebAddonProcessingError").validateMsgMeta(a,e);e=a.threadMsgId;a=a.threadMsgSenderJid;return new(c("WAWebMsgKey"))({id:e,fromMe:d("WAWebUserPrefsMeUser").isMeAccount(a),remote:b.chat,participant:a})}function M(a,b,e,f){var g,h,i;if(!(e==null?void 0:(g=e.id)==null?void 0:g.fromMe)){g=e.id.remote;var j=c("WAWebIsCagGroupCache").isCag(g);if(b.fromMe===!0){h=!1;i=e.author;if(j&&((j=i)==null?void 0:j.isLid())&&f!==d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon){j=d("WAWebApiContact").getPhoneNumber(e.author);j!=null&&(i=j)}}else{j=G(b.participant);!(j instanceof c("WAWebWid"))?h=!0:(h=d("WAWebUserPrefsMeUser").isMeAccount(j),(!g.isUser()||j.isBot())&&(h?i=j.isLid()?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser():i=j))}}else{h=Boolean(b.fromMe);g=G(b.remoteJid);if(b.fromMe===!0){if(g instanceof c("WAWebWid")&&!g.isUser()){j=c("WAWebIsCagGroupCache").isCag(g);j=j&&f!==d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon;j=j||!((f=e.author)==null?void 0:f.isLid())?d("WAWebUserPrefsMeUser").getMeUser():d("WAWebUserPrefsMeUser").getMeLidUser();i=j}}else i=G(b.participant)}e.type===d("WAWebMsgType").MSG_TYPE.REACTION&&g!=null&&(g instanceof c("WAWebWid")&&g.isBroadcast()&&!g.isStatus()||d("WAJids").interpretAndValidateJid(g.toString()).jidType==="broadcast")&&(g=G(b.participant),i=void 0);return new(c("WAWebMsgKey"))({id:a,fromMe:h,remote:g,participant:i})}function N(a){return a==null||a===""||d("WAWebMobilePlatforms").getMobilePlatform()===d("WAWebMobilePlatforms").PLATFORMS.ANDROID?a:d("WAWebConvertToTextWithoutSpecialEmojis").convertToTextWithoutSpecialEmojis(a)}function O(a){var b={fromMe:a.fromMe,id:a.id},c=P(a.remote);a=P(a.participant);d("WATypeUtils").isString(c)&&(b.remoteJid=c);d("WATypeUtils").isString(a)&&(b.participant=a);return b}function P(a){if(a instanceof c("WAWebWid"))return a.toString({legacy:!0});else if(d("WATypeUtils").isString(a))return a.replace(/@c.us$/,"@s.whatsapp.net");return void 0}function Q(a){return a!=null&&a!==""?d("WABase64").decodeB64(a):void 0}function R(a){var b=P(a.to);a={fromMe:!0,id:a.id.id};d("WATypeUtils").isString(b)&&(a.remoteJid=b);return a}function S(a,b,c){if(Boolean(b.viewOnce))return;b.directPath==null&&b.staticUrl==null&&d("WALogger").LOG(l(),a).sendLogs("outgoing-"+a+"-message-missing-direct-path");b.fileSha256==null&&d("WALogger").LOG(k(),a).sendLogs("outgoing-"+a+"-message-missing-file-sha");!c&&b.fileEncSha256==null&&d("WALogger").LOG(j(),a).sendLogs("outgoing-"+a+"-message-missing-file-enc-sha");b.url==null&&b.staticUrl==null&&!c&&d("WALogger").LOG(i(),a).sendLogs("outgoing-"+a+"-message-missing-mms3-url")}function T(a,b,c){var e,f,g;switch(a){case d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:e=d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.CHANGED_IN_CHAT;break;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe:e=d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_ME;break;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther:e=d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_OTHER;break;case d("WAWebEphemeralityTypes").DisappearingModeInitiator.BizUpgradeFbHosting:e=d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_OTHER;break}if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){if(b)switch(b){case d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.CHAT_SETTING;break;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.ACCOUNT_SETTING;break;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BULK_CHANGE;break;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.Unknown:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN;break;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN_GROUPS;break;case d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting:f=d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN;break}c!=null&&(g=c)}return{initiator:e,trigger:f,initiatedByMe:g}}function U(a,b){if(a.from==null)return;a=d("WAWebUserPrefsMeUser").isMeAccount(a.from);if(b.initiator==null)return;switch(b.initiator){case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.CHANGED_IN_CHAT:return d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat;case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_ME:return a?d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther;case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_OTHER:case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.BIZ_UPGRADE_FB_HOSTING:return a?d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe}}function V(a,b){if(!d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger"))return;a=d("WAWebUserPrefsMeUser").isMeAccount(a.from);var c=b.initiator,e=b.trigger,f=b.initiatedByMe;if(e!=null&&d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&e===d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING)return{disappearingModeTrigger:Y(e),initiatedByMe:a?f:!f};if(e!=null&&f!=null)return{disappearingModeTrigger:Y(e),initiatedByMe:a?f:!f};if(b.initiator==null)return;if(c!=null)switch(c){case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.CHANGED_IN_CHAT:return{disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings};case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_ME:return{disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:a};case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.BIZ_UPGRADE_FB_HOSTING:case d("WAWebProtobufsE2E.pb").DisappearingMode$Initiator.INITIATED_BY_OTHER:return{disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!a}}}function W(a,b){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(b)),e=c==null?void 0:c.disappearingModeInitiatedByMe;c!=null&&a!=null&&c.disappearingModeTrigger===d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups&&a!==d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups&&(void d("WAWebUpdateDbForGroupActionApi").syncDisappearingModeTriggerToDB(b,a),void d("WAWebBackendApi").frontendFireAndForget("syncEphemeralTriggerCollectionForGroup",{chatId:b,trigger:a}));if(e!=null)return{disappearingModeTrigger:a,disappearingModeInitiatedByMe:e}});return X.apply(this,arguments)}function Y(a){switch(a){case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.CHAT_SETTING:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.ACCOUNT_SETTING:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BULK_CHANGE:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.BulkChange;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING:return d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()?d("WAWebEphemeralityTypes").DisappearingModeTrigger.BizSupportFbHosting:d("WAWebEphemeralityTypes").DisappearingModeTrigger.Unknown;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN_GROUPS:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups;case d("WAWebProtobufsE2E.pb").DisappearingMode$Trigger.UNKNOWN:return d("WAWebEphemeralityTypes").DisappearingModeTrigger.Unknown}}function Z(a){switch(a){case"review_and_pay":return c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS;case"payment_info":return c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO;case"review_order":return c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS;case"payment_status":return c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS;case"payment_method":return c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD;case"open_webview":return c("WAWebInteractiveMessagesNativeFlowName").MESSAGE_WITH_LINK;case"message_with_link_status":return c("WAWebInteractiveMessagesNativeFlowName").MESSAGE_WITH_LINK_STATUS;case"cta_url":return c("WAWebInteractiveMessagesNativeFlowName").CTA_URL;case"cta_call":return c("WAWebInteractiveMessagesNativeFlowName").CTA_CALL;case"quick_reply":return c("WAWebInteractiveMessagesNativeFlowName").QUICK_REPLY;case"cta_catalog":return c("WAWebInteractiveMessagesNativeFlowName").CTA_CATALOG}}var $=function(a){return a};g.typeAttributeFromProtobuf=m;g.extractCommentTargetIdAndSenderLid=a;g.decryptFailAttributeFromProtobuf=e;g.protobufToMsgKey=f;g.msgKeyToProtobuf=n;g.parseMsgPaymentInfo=o;g.hasUnsupportedCurrency=p;g.isEitherSenderOrReceiverOfPaymentMessage=q;g.shouldParseNFM=r;g.isValidNativeFlowName=s;g.isOrderNativeFlow=t;g.getBizNativeFlowName=u;g.hasUnsupportedButtons=w;g.isInteractiveMessageTypeEnabled=x;g.getInteractiveMessageFieldNameForType=y;g.getInteractiveMessageTypeForProto=z;g.isSupportedInteractiveMessageVersion=A;g.getInteractiveResponseMessageFieldNameForType=B;g.getInteractiveResponseMessageTypeForProto=C;g.isInteractiveResponseMessageTypeEnabled=D;g.getInteractiveResponsePayload=E;g.isQuotedSupported=F;g.decodeJid=G;g.strictDecodeJid=H;g.getMsgKey=I;g.translateAddonMessageKeyToLocalReference=J;g.translateRegularMessageKeyToLocalReference=K;g.createMsgKeyFromThreadInfo=L;g.translateKeyToLocalReference=M;g.convertToTextWithoutSpecialEmojis=N;g.encodeKey=O;g.encodeJid=P;g.encodeBytes=Q;g.createMessageKey=R;g.validateOutgoingRequiredMediaProperties=S;g.disappearingModeInitiatorToProto=T;g.protoToDisappearingModeInitiator=U;g.protoToDisappearingMode=V;g.updateDisappearingModeForGroups=W;g.getNativeFlowNameByButtonName=Z;g.getMutableMessageProtobuf=$}),98);
__d("WAWebBizOrderDetailsParams",["$InternalEnum"],(function(a,b,c,d,e,f){e=b("$InternalEnum")({PIX_STATIC_CODE:"pix_static_code",PIX_DYNAMIC_CODE:"pix_dynamic_code",CARDS:"cards",PAYMENT_GATEWAY:"payment_gateway"});function a(a){return JSON.parse(a)}function c(a){return JSON.stringify(a)}function d(a){return JSON.stringify(a)}f.PaymentSettingType=e;f.parse=a;f.stringify=c;f.stringifyPaymentStatus=d}),66);
__d("WAWebOrderDetails",["WAWebBizOrderDetailsParams","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType","WAWebStateUtils","filterNulls"],(function(a,b,c,d,e,f,g){function h(a){var b=a==null?void 0:a.value;if(b==null)return;a=(a=a==null?void 0:a.offset)!=null?a:1;return parseFloat((b=b)!=null?b:0)/parseInt(a,10)}function i(a){return a==null?null:c("filterNulls")(a.map(function(a){return(a==null?void 0:a.type)!=null?babelHelpers["extends"]({type:a.type},a.payment_instruction!=null?{paymentInstruction:a.payment_instruction}:{}):null}))}var j=function(){return"custom-item"},k=function(a,b){var c;if(a!=="review_and_pay"&&a!=="payment_info"||b==null)return null;b=d("WAWebBizOrderDetailsParams").parse(b);var e=b.order,f=b.currency,g=b.reference_id,k=b.payment_configuration,l=b.external_payment_configurations,m=b.payment_settings,n=h(b.total_amount);c=(c=e==null?void 0:e.items)!=null?c:[];var o=c.map(function(a){var b;return{id:(b=(b=a==null?void 0:a.product_id)!=null?b:a==null?void 0:a.retailer_id)!=null?b:"",name:(b=a==null?void 0:a.name)!=null?b:"",amount:h(a==null?void 0:a.amount),quantity:parseInt((b=a==null?void 0:a.quantity)!=null?b:0,10),isCustomItem:(b=a==null?void 0:a.isCustomItem)!=null?b:(a==null?void 0:(b=a.retailer_id)==null?void 0:b.indexOf(j()))===0,isQuantitySet:(b=a==null?void 0:a.isQuantitySet)!=null?b:!0}}),p=o.reduce(function(a,b){return a+b.quantity},0);c=(c=c[0])==null?void 0:c.name;if(a==="payment_info"&&(m==null?void 0:m.length)===1&&m[0].type===d("WAWebBizOrderDetailsParams").PaymentSettingType.PIX_STATIC_CODE){var q=m[0][d("WAWebBizOrderDetailsParams").PaymentSettingType.PIX_STATIC_CODE];c=q.merchant_name}if(c==null||g==null||f==null||n==null)return null;q=h(e==null?void 0:e.shipping);var r=h(e==null?void 0:e.tax),s=h(e==null?void 0:e.discount);e=h(e==null?void 0:e.subtotal);l=i(l);return babelHelpers["extends"]({title:c,referenceId:g,currency:f,quantity:p,shipping:q,tax:r,discount:s,subtotal:e,totalAmount:n,items:o,payment_configuration:k,type:b.type},l!=null?{externalPaymentConfigurations:l}:{},{paymentSettings:m,buttonName:a})};a=function(a){return l(d("WAWebStateUtils").unproxy(a.safe()))};var l=function(a){var b;if(a.nativeFlowName!==c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS&&a.nativeFlowName!==c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO)return null;if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&((b=a.interactivePayload)==null?void 0:b.buttons)){b=a.interactivePayload.buttons[0];var e=b.name;b=b.buttonParamsJson;return k(e,b)}else if(a.type===d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW){b=((e=a.nativeFlowButtons)!=null?e:[])[0].nativeFlowInfo;return k(b==null?void 0:b.name,b==null?void 0:b.paramsJson)}};g.getCustomItemIdPrefix=j;g.paramsJsonToOrderInfo=k;g.getOrderInfoFromMsg=a;g.getOrderInfo=l}),98);
__d("WAWebNativeFlowValidation",["WAWebBizGatingUtils","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType","WAWebOrderDetails","WAWebOrderPaymentStatus","WAWebOrderStatus"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(a.nativeFlowName==null)return!1;switch(a.nativeFlowName){case c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO:return d("WAWebOrderDetails").getOrderInfo(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS:return d("WAWebOrderDetails").getOrderInfo(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS:return d("WAWebOrderStatus").getOrderStatusInfo(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS:return d("WAWebOrderPaymentStatus").getOrderPaymentStatusInfoFromNativeFlow(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD:return d("WAWebOrderPaymentStatus").getOrderPaymentStatusInfoFromNativeFlow(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").MESSAGE_WITH_LINK:return h(a)!==!1;case c("WAWebInteractiveMessagesNativeFlowName").MESSAGE_WITH_LINK_STATUS:return d("WAWebBizGatingUtils").isMessageWithLinkNfmEnabled();case c("WAWebInteractiveMessagesNativeFlowName").CTA_CALL:return d("WAWebBizGatingUtils").isInteractiveCtaMessageEnabled(c("WAWebInteractiveMessagesNativeFlowName").CTA_CALL,e,b)&&i(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").CTA_URL:return d("WAWebBizGatingUtils").isInteractiveCtaMessageEnabled(c("WAWebInteractiveMessagesNativeFlowName").CTA_URL,e,b)&&i(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").QUICK_REPLY:return d("WAWebBizGatingUtils").isInteractiveCtaMessageEnabled(c("WAWebInteractiveMessagesNativeFlowName").QUICK_REPLY,e,b)&&i(a)!=null;case c("WAWebInteractiveMessagesNativeFlowName").CTA_CATALOG:return d("WAWebBizGatingUtils").isInteractiveCtaMessageEnabled(c("WAWebInteractiveMessagesNativeFlowName").CTA_CATALOG,e,b)&&i(a)!=null}}function h(a){if(d("WAWebBizGatingUtils").isMessageWithLinkNfmEnabled()){if(a.nativeFlowName!==c("WAWebInteractiveMessagesNativeFlowName").MESSAGE_WITH_LINK||a.type!==d("WAWebMsgType").MSG_TYPE.INTERACTIVE||a.interactiveType!==c("WAWebInteractiveMessageType").NATIVE_FLOW||a.interactivePayload==null)return!1;a=a.interactivePayload;if((a==null?void 0:a.buttons)&&a.buttons.length>0){a=a.buttons[0];var b=a.name;a=a.buttonParamsJson;if(b==="open_webview"&&a!=null)return!0}}return!1}function i(a){var b;a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&(a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").QUICK_REPLY||a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").CTA_CALL||a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").CTA_URL||a.nativeFlowName===c("WAWebInteractiveMessagesNativeFlowName").CTA_CATALOG)&&((b=a.interactivePayload)==null?void 0:b.buttons)!=null&&a.interactivePayload.buttons.forEach(function(a){a=j(a);if(a)return!0});return!1}function j(a){return a.name==="cta_url"||a.name==="cta_call"||a.name==="cta_catalog"?!0:!1}g.isValidNativeFlowMessage=a}),98);
__d("WAWebParseNonNFMButtonsMessageProto",["WAWebButtonsMessageProtoUtils","WAWebE2EProtoUtils","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage,f=a.bizInfo;a=a.msgContext;b=b.buttonsMessage;if(b==null)return;var g=b.buttons;g=g===void 0?[]:g;var h=b.headerType,i=c("WAWebInteractiveMessagesNativeFlowName").cast(d("WAWebE2EProtoUtils").getBizNativeFlowName({buttonsMessage:b}));if(i!=null||(f==null?void 0:f.nativeFlowName)!=null)return;if(d("WAWebE2EProtoUtils").hasUnsupportedButtons(g))return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo};if(h===d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.UNKNOWN||!new Set(d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.members()).has(h))return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown}),contextInfo:b.contextInfo};i=d("WAWebButtonsMessageProtoUtils").parseButtonsMessageProto({buttonsMessage:b,baseMessage:e,msgContext:a});return g.length?{msgData:babelHelpers["extends"]({},i,{isDynamicReplyButtonsMsg:!0,dynamicReplyButtons:g}),contextInfo:b.contextInfo}:{msgData:i,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebTemplateButtonSubtype",[],(function(a,b,c,d,e,f){a={QUICK_REPLY:"quick_reply",CALL:"call",URL:"url"};f.TEMPLATE_BUTTON_SUBTYPE=a}),66);
__d("WAWebParseTemplateMessageProto",["WANullthrows","WAWebE2EProtoUtils","WAWebMsgType","WAWebParseDocumentMessageProto","WAWebParseImageMessageProto","WAWebParseInteractiveMessageProto","WAWebParseLocationMessageProto","WAWebParseVideoMessageProto","WAWebTemplateButtonSubtype"],(function(a,b,c,d,e,f,g){var h=3,i=function(a){var b="";a.callButton!=null?b=d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.CALL:a.quickReplyButton!=null?b=d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.QUICK_REPLY:a.urlButton!=null&&(b=d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL);return b},j=function(a){if(a.length>h)return!0;if(a.length>0){var b=i(a[0]);if(!a.slice(1).every(function(a){a=i(a);if(b===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.QUICK_REPLY)return a===b;if(b===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL||b===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.CALL)return a===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.URL||a===d("WAWebTemplateButtonSubtype").TEMPLATE_BUTTON_SUBTYPE.CALL}))return!0}return!1};function a(a){var b=a.messageProtobuf,e=a.baseMessage,f=a.msgContext;a=b.templateMessage;if(a==null)return;b=a.interactiveMessageTemplate;if(b)return k(e,f,b,a.templateId);b=(b=a.hydratedTemplate)!=null?b:c("WANullthrows")(a.hydratedFourRowTemplate);var g=b.documentMessage,h=b.imageMessage,i=b.locationMessage,l=b.videoMessage;a=b.hydratedButtons;var m=b.hydratedContentText,n=b.hydratedFooterText,o=b.hydratedTitleText;b=b.templateId;var p=function(){var a=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat},Boolean(m)&&{body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(m)});if(h){var b;return(b=(b=c("WAWebParseImageMessageProto")({messageProtobuf:{imageMessage:h},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(g){return(b=(b=c("WAWebParseDocumentMessageProto")({messageProtobuf:{documentMessage:g},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(i){return(b=(b=c("WAWebParseLocationMessageProto")({messageProtobuf:{locationMessage:i},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}if(l){return(b=(b=c("WAWebParseVideoMessageProto")({messageProtobuf:{videoMessage:l},baseMessage:e,msgContext:f}))==null?void 0:b.msgData)!=null?b:a}return a};if(j(a))return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:void 0};p=p();return{msgData:babelHelpers["extends"]({},p,{templateId:b,isFromTemplate:!0,caption:Boolean(m)?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(m):p.caption,footer:Boolean(n)?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(n):p.footer,title:Boolean(o)?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(o):p.title},a.length>0&&{hydratedButtons:a}),contextInfo:void 0}}function k(a,b,e,f){var g;g=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat},Boolean((g=e.body)==null?void 0:g.text)&&{body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis((g=e.body)==null?void 0:g.text)});a=(b=(e=c("WAWebParseInteractiveMessageProto")({messageProtobuf:{interactiveMessage:e},baseMessage:a,msgContext:b,bizSource:a.bizSource||""}))==null?void 0:e.msgData)!=null?b:g;return{msgData:babelHelpers["extends"]({},a,{templateId:f,isFromTemplate:!0,caption:a.caption,footer:a.footer,title:a.title}),contextInfo:void 0}}g["default"]=a}),98);
__d("WAWebQuotedMessageProtoUtils",["WALogger","WANullthrows","WAWebABProps","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed parsing quoted message: ",""]);h=function(){return a};return a}function i(a,b){var e=c("WANullthrows")(a.stanzaId,"quoted id"),f=c("WANullthrows")(d("WAWebE2EProtoUtils").strictDecodeJid(a.participant),"quotedParticipant is missing");a=(a=d("WAWebE2EProtoUtils").strictDecodeJid(a.remoteJid))!=null?a:b.remote;var g=d("WAWebUserPrefsMeUser").isMeAccount(f);e=new(c("WAWebMsgKey"))({id:e,fromMe:g,remote:a,participant:b.remote.isGroup()||(f==null?void 0:f.isBot())?f:void 0});g=babelHelpers["extends"]({id:e,type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(e,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message));return d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(g)}function j(a){var b=a.quotedMsg,c=a.msgContext,e=a.isCarouselCardReply;return d("WAWebE2EProtoParser").parseMsgProto(b,d("WAWebABProps").getABPropConfigValue("web_quoted_generate_msg_data")?i(a.contextInfo,a.targetMessageKey):{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN},c==="history"?"history_quoted":"quoted",null,null,null,null,null,null,e?"quoted_carousel_card":null)}function a(a){try{return j(a)}catch(a){d("WALogger").ERROR(h(),a).sendLogs("parse-quoted-msg-error");return null}}g.parseQuotedMessage=a}),98);
__d("WAWebApiActiveMessageRanges",["Promise","WALogger","WANullthrows","WASyncAction.pb","WAWebDBMsgUtils","WAWebSchemaActiveMessageRanges","asyncToGeneratorRuntime","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getRangesForChat failed with error: ",""]);i=function(){return a};return a}var j=new Map(),k={reset:function(){j=new Map()},removeRange:function(a,b){var c;(c=j.get(a))==null?void 0:c["delete"](b);return d("WAWebSchemaActiveMessageRanges").getActiveMessageRangesTable().remove([a,b])},createOrReplaceRange:function(a){var b=j.get(a.chatId);b==null&&(b=new Map(),j.set(a.chatId,b));b.set(a.action,a);return d("WAWebSchemaActiveMessageRanges").getActiveMessageRangesTable().createOrReplace(a)},bulkCreateOrReplaceRanges:function(a,c){c===void 0&&(c=!0);a.forEach(function(a){var b=j.get(a.chatId);b==null&&(b=new Map(),j.set(a.chatId,b));b.set(a.action,a)});return c?d("WAWebSchemaActiveMessageRanges").getActiveMessageRangesTable().bulkCreateOrReplace(a):(h||(h=b("Promise"))).resolve()},getRangesForChat:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=j.get(a);try{if(b==null){var c=(yield d("WAWebSchemaActiveMessageRanges").getActiveMessageRangesTable().anyOf(["chatId"],[a]));b=new Map(c.map(function(a){return[a.action,a]}));j.set(a,b)}}catch(a){d("WALogger").ERROR(i(),a)}return b?Array.from(b.values()):[]});function c(b){return a.apply(this,arguments)}return c}()};function l(a,b){switch(a){case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive,actionValue:c("WANullthrows")(b.archiveChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead,actionValue:c("WANullthrows")(b.markChatAsReadAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredKeepMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredKeepMedia,actionValue:c("WANullthrows")(b.clearChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredDeleteMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredDeleteMedia,actionValue:c("WANullthrows")(b.clearChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredKeepMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredKeepMedia,actionValue:c("WANullthrows")(b.clearChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredDeleteMedia,actionValue:c("WANullthrows")(b.clearChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatDeleteMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatDeleteMedia,actionValue:c("WANullthrows")(b.deleteChatAction)};case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatKeepMedia:return{action:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatKeepMedia,actionValue:c("WANullthrows")(b.deleteChatAction)};default:throw c("err")("unsupported action for message ranges: "+String(a))}}function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,c);var e=l(b,c);e=e.actionValue;e=((e=e.messageRange)==null?void 0:e.messages)||[];var f=(yield d("WAWebDBMsgUtils").filterReceivedMessagesInRange(a,e));e=Math.max(0,e.length-f.length);return k.createOrReplaceRange(babelHelpers["extends"]({chatId:a},l(b,c),{remainingMessages:e}))});return m.apply(this,arguments)}function e(a,b){return k.removeRange(a,b)}function f(a,b){b===void 0&&(b=!0);return k.bulkCreateOrReplaceRanges(a,b)}function n(a){return k.getRangesForChat(a)}function o(a,b){switch(a){case"archive":return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive;case"markChatAsRead":return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead;case"clearChat":if((b==null?void 0:b.deleteStarred)&&b.deleteMedia)return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredDeleteMedia;else if((b==null?void 0:b.deleteStarred)&&!b.deleteMedia)return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredKeepMedia;else if((b==null?void 0:b.deleteMedia)&&!b.deleteStarred)return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredDeleteMedia;return d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredKeepMedia;case"deleteChat":return(b==null?void 0:b.deleteMedia)?d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatDeleteMedia:d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatKeepMedia;default:throw c("err")("unsupported active message range action")}}g._cache=k;g.addActiveMessageRange=a;g.removeActiveMessageRange=e;g.bulkUpdateActiveMessageRanges=f;g.getActiveMessageRanges=n;g.getActiveRangeAction=o}),98);
__d("WAWebProtobufsMdStorageChatRowOpaqueData.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,IMAGE:1,VIDEO:2});c={};e={};f={};b={};c.internalSpec={draftMessage:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,e]};e.internalSpec={text:[1,d.TYPES.STRING],omittedUrl:[2,d.TYPES.STRING],ctwaContextLinkData:[3,d.TYPES.MESSAGE,b],ctwaContext:[4,d.TYPES.MESSAGE,f],timestamp:[5,d.TYPES.INT64]};f.internalSpec={conversionSource:[1,d.TYPES.STRING],conversionData:[2,d.TYPES.BYTES],sourceUrl:[3,d.TYPES.STRING],sourceId:[4,d.TYPES.STRING],sourceType:[5,d.TYPES.STRING],title:[6,d.TYPES.STRING],description:[7,d.TYPES.STRING],thumbnail:[8,d.TYPES.STRING],thumbnailUrl:[9,d.TYPES.STRING],mediaType:[10,d.TYPES.ENUM,a],mediaUrl:[11,d.TYPES.STRING],isSuspiciousLink:[12,d.TYPES.BOOL]};b.internalSpec={context:[1,d.TYPES.STRING],sourceUrl:[2,d.TYPES.STRING],icebreaker:[3,d.TYPES.STRING],phone:[4,d.TYPES.STRING]};g.ChatRowOpaqueData$DraftMessage$CtwaContextData$ContextInfoExternalAdReplyInfoMediaType=a;g.ChatRowOpaqueDataSpec=c;g.ChatRowOpaqueData$DraftMessageSpec=e;g.ChatRowOpaqueData$DraftMessage$CtwaContextDataSpec=f;g.ChatRowOpaqueData$DraftMessage$CtwaContextLinkDataSpec=b}),98);
__d("WAWebDBChatSerialization",["WAWebProtobufsMdStorageChatRowOpaqueData.pb","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){var h=["draftMessage"];function a(a){a=babelHelpers["extends"]({},a);i(a);return a}function i(a){var b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsMdStorageChatRowOpaqueData.pb").ChatRowOpaqueDataSpec,a.chatRowOpaqueData);h.forEach(function(c){(b==null?void 0:b[c])!=null&&(a[c]=b==null?void 0:b[c])})}function b(a){a=babelHelpers["extends"]({},a);j(a);return a}function j(a){var b={};h.forEach(function(c){b[c]=a[c],delete a[c]});var c=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsMdStorageChatRowOpaqueData.pb").ChatRowOpaqueDataSpec,b);a.chatRowOpaqueData=c.readBuffer()}g.deserializeChat=a;g.serializeChat=b}),98);
__d("WAWebApiChat",["Promise","WALogger","WATimeUtils","WAWeb-dexie","WAWebAck","WAWebApiContact","WAWebBackendApi","WAWebBusinessHSMTypes","WAWebChatThreadLogging","WAWebDBChatSerialization","WAWebDBMsgUtils","WAWebEphemeralityUtils","WAWebMiscErrors","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgType","WAWebPnhGatingUtils","WAWebSchemaChat","WAWebSchemaMessage","WAWebTrustedContactsUtils","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["chat with id "," is not found"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["createChatRecord: update chat table failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["reduceChatUnreadCount: could not find chat with id ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["removeUnreadMentionChat: could not find chats"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["addUnreadMentionChat: could not find chats"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["markMessageAndChatAsRead: chatId: ",", update acks for "," messages"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["markMessageAndChatAsRead: chatId: ",", update unread to ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["markMessageAndChatAsRead: lastReadRowId: ",", chatId: ",", keepChatUnread: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMarkChatAsReadSync: could not find chat with id ",""]);q=function(){return a};return a}var r=new Map(),s=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="CreateChatDuplicateError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield d("WAWebSchemaChat").getChatTable().create(babelHelpers["extends"]({id:a.toString()},b))}catch(a){if(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort)throw a;d("WALogger").ERROR(j()).verbose().devConsole(a);if(a instanceof c("WAWeb-dexie").ConstraintError)throw new s();throw c("err")("update chat table failed")}d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.isUser()&&Q(a)});return t.apply(this,arguments)}function e(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("WAWebSchemaChat").getChatTable().get(a.toString(),!1));if(e)return{unreadCount:e.unreadCount,timestamp:e.t};d("WALogger").ERROR(i(),a.toString());return(h||(h=b("Promise"))).reject(c("err")("Failed to find row in chat table"))});return u.apply(this,arguments)}function f(a){return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.get(a));if(c==null){d("WALogger").ERROR(q(),a);return}if(c.unreadCount===-1)return b.createOrMerge(a,{id:a,unreadCount:0,unreadMentionsOfMe:[],unreadMentionCount:0})});return function(a){return c.apply(this,arguments)}}())}function v(a){return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a)}function w(a){a=Array.from(a).map(function(a){var b=a[0];a=a[1];return{id:b,chatlistPreview:a,lastReactionPreview:void 0}});return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaMessage").getMessageTable().equals(["from","pendingReadReceipt"],[a,d("WAWebDBMsgUtils").PendingReadReceiptType.Message],{shouldDecrypt:!1}));return a.filter(function(a){return a.type!==d("WAWebMsgType").MSG_TYPE.UNKNOWN})});return y.apply(this,arguments)}function z(a,c,e){d("WALogger").DEV(p(),a,c,e);return d("WAWebModelStorageUtils").getStorage().lock(["message","chat"],function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){f[0];f=f[1];var g=(yield x(c)),i=[],j=0,k=[];g.forEach(function(b){b.hsmTag===d("WAWebBusinessHSMTypes").HSM_TAG_TYPE.AUTHENTICATION&&d("WAWebBackendApi").frontendFireAndForget("logOTPMessageReadActions",{msgRow:b});if(a==null||b.rowId!=null&&b.rowId>a){j++;if(d("WAWebMsgGetters").getIsImportantMessage(b)){var c={id:b.id,timestamp:b.t};k.push(c)}return}i.push({id:b.id,ack:Math.max(b.ack,d("WAWebAck").ACK.READ),pendingReadReceipt:null})});g=j===0&&e?-1:j;d("WALogger").DEV(o(),c,g);f=[f.merge(c,{id:c,unreadCount:g,unreadDividerOffset:0,unreadMentionsOfMe:k,unreadMentionCount:0})];i.length>0&&(d("WALogger").DEV(n(),c,i.length),f.push(d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(i).then(function(){return d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"msgRead",ts:d("WATimeUtils").unixTime(),chatId:d("WAWebWidFactory").createWid(c),readCount:i.length}])})));yield (h||(h=b("Promise"))).all(f)});return function(a){return f.apply(this,arguments)}}())}function A(a,c){return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b[0];b=Array.from(a.keys());if(b.length===0)return;b=(yield d("WAWebSchemaChat").getChatTable().bulkGet(b));if(!b||b.length===0){d("WALogger").ERROR(m());return}var e=[];b.forEach(function(b){if(b){var d=b.id.toString();b=(b=b.unreadMentionsOfMe)!=null?b:[];var f=a.get(d);f&&(b=b.concat(f));f={id:d,unreadMentionsOfMe:b};if(c){var g;g=(g=c.get(d))!=null?g:0;f={id:d,unreadMentionsOfMe:b,unreadMentionCount:g}}e.push(f)}});return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(e)});return function(a){return e.apply(this,arguments)}}())}function B(a){return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b[0];b=Array.from(a.keys());if(b.length===0)return;b=(yield d("WAWebSchemaChat").getChatTable().bulkGet(b));if(!b||b.length===0){d("WALogger").ERROR(l());return}var c=[];b.forEach(function(b){if(b){var d;d=(d=b.unreadMentionsOfMe)!=null?d:[];var e=a.get(b.id.toString());e&&(d=d.filter(function(a){return!e.includes(a.id)}));c.push({id:b.id.toString(),unreadMentionsOfMe:d})}});return d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(c)});return function(a){return c.apply(this,arguments)}}())}function C(a){return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(c){c=c[0];var d=Array.from(a.keys());if(d.length===0)return(h||(h=b("Promise"))).resolve();d=d.map(function(b){var c;c=(c=a.get(b))!=null?c:!1;return{id:b,archiveAtMentionViewedInDrawer:c}});return c.bulkCreateOrMerge(d)})}function D(a,c,e){c===void 0&&(c=1);e===void 0&&(e=!0);return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var f=(yield b.get(a));if(f==null){d("WALogger").ERROR(k(),a);return}var g=Math.max(f.unreadCount-c,0);f=(f=f.unreadDividerOffset)!=null?f:0;e&&(f+=c);return b.merge(a,{unreadCount:g,unreadDividerOffset:f})});return function(a){return f.apply(this,arguments)}}())}function E(){var a=d("WAWebTrustedContactsUtils").tokenExpirationCutoff(d("WAWebTrustedContactsUtils").TcTokenMode.Receiver);return d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.lessThan(["tcTokenTimestamp"],a));if(!c||c.length===0)return;c=c.map(function(a){return{id:a.id,tcToken:null,tcTokenTimestamp:null}});return b.bulkCreateOrMerge(c)});return function(a){return c.apply(this,arguments)}}())}function F(){var a=d("WAWebTrustedContactsUtils").tokenExpirationCutoff(d("WAWebTrustedContactsUtils").TcTokenMode.Receiver),c=[];return d("WAWebModelStorageUtils").getStorage().lock(["orphan-tc-token"],function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var d=(yield b.all());d.forEach(function(b){var d=b.tcTokenTimestamp;d!=null&&d<a&&c.push(b.chatId)});return b.bulkRemove(c)});return function(a){return d.apply(this,arguments)}}())}function G(a){return d("WAWebSchemaChat").getChatTable().get(a.toString(),!1)}function H(a){return d("WAWebSchemaChat").getChatTable().anyOf(["accountLid"],[a.toString()])}function I(a){return d("WAWebSchemaChat").getChatTable().bulkGet(a.map(function(a){return a.toString()}))}function J(){return d("WAWebSchemaChat").getChatTable().all().then(function(a){return a.map(function(a){return d("WAWebDBChatSerialization").deserializeChat(a)})})}function K(a){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isLid()){var b=(yield G(a));if(b!=null)return a;b=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(a));if(b!=null){var c=(yield G(b));if(c!=null)return b}return a}c=(yield G(a));if(c!=null&&!c.isDeprecated)return a;b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a));if(b!=null){c=(yield G(b));if(c)return b}return a});return L.apply(this,arguments)}function M(a){return N(a)}function N(a){var b=r.get(a.toString());if(b!=null)return b;b=K(a);r.set(a.toString(),b);return b}function O(a){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[];a=a.filter(function(a){return a.isUser()});a.map(function(a){var b=r.get(a.toString());b==null&&c.push(a)});var e=d("WAWebApiContact").getAlternateWidBulk_DEPRECATED(c);Array.from(e.keys()).map(function(a){return c.push(d("WAWebWidFactory").createWidFromWidLike(a))});if(c.length>0){var f=(yield I(c));f.forEach(function(a){if(a!=null){var c;c=(c=e.get(a.id.toString()))!=null?c:a.id.toString();!(a==null?void 0:a.isDeprecated)&&!r.has(c.toString())&&r.set(c.toString(),(h||(h=b("Promise"))).resolve(d("WAWebWidFactory").createWidFromWidLike(a.id)))}})}var g=new Map();a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield r.get(a.toString()));b!=null?g.set(a,b):g.set(a,a)});return function(b){return a.apply(this,arguments)}}());return g});return P.apply(this,arguments)}function Q(a){r.set(a.toString(),(h||(h=b("Promise"))).resolve(a));var c=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));c!=null&&r.set(c.toString(),(h||(h=b("Promise"))).resolve(a))}function R(a){var b=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));b!=null&&r["delete"](b.toString());r["delete"](a.toString())}function S(a){a.filter(function(a){return c("WAWebWid").isUser(a.id)&&!a.isDeprecated}).map(function(a){a=d("WAWebWidFactory").createWid(a.id);(!a.isLid()||r.get(a.toString())==null)&&r.set(a.toString(),(h||(h=b("Promise"))).resolve(a));var c=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));c!=null&&(c.isLid()||r.get(c.toString())==null)&&r.set(c.toString(),(h||(h=b("Promise"))).resolve(a))})}function T(a,b){b?R(a):Q(a)}function U(){r.clear()}function V(a){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return a.id.toString()}),c=(yield d("WAWebSchemaChat").getChatTable().bulkGet(b));b=a.map(function(a,b){a=a;if(c[b]!=null){b=c[b];var e=b.disappearingModeInitiatedByMe;b=b.disappearingModeTrigger;e!=null&&(a=babelHelpers["extends"]({},a,{disappearingModeInitiatedByMe:e}));b!=null&&(a=babelHelpers["extends"]({},a,{disappearingModeTrigger:d("WAWebEphemeralityUtils").getDisappearingModeTriggerFromString(b)}))}return a});return b});return W.apply(this,arguments)}g.matChatCache=r;g.CreateChatDuplicateError=s;g.createChatRecord=a;g.getChatMeta=e;g.updateChatForMarkAsReadSync=f;g.latestChatBulkUpdates=v;g.bulkUpdateChatLastAddOnPreview=w;g.queryPendingReadReceiptMsgRows=x;g.markMessageAndChatAsRead=z;g.addUnreadMentionChat=A;g.removeUnreadMentionChat=B;g.updateChatArchiveDrawer=C;g.reduceChatUnreadCount=D;g.pruneExpiredTcTokens=E;g.pruneExpiredOrphanTcTokens=F;g.getChatRecord=G;g.getChatRecordByAccountLid=H;g.bulkGetChats=I;g.getAllChatsDeserialized=J;g._getActiveChatWid_DEPRECATED=K;g.getMatChatIncomingMessage=M;g.getMatChat_DEPRECATED=N;g.getMatChatBulk_DEPRECATED=O;g.removeMatChatMapping_DEPRECATED=R;g.populateMatCacheBulk=S;g.updateDeprecatedChatMatCache_DEPRECATED=T;g.clearMatChatCache_DEPRECATED=U;g.injectAdditionalEphemeralInfoFromDB=V}),98);
__d("WAWebUpdateDuplicatedLidThread",["WALogger","WAWebApiChat","WAWebApiContact","WAWebSchemaChat","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateChatIsDeprecatedBulk: deprecating lid chats "]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateChatIsDeprecatedBulk - true: deprecated "," chats during offline resume"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["shouldDeprecateLidThread: called with deprecated chatid"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],e=a.filter(function(a){return a!=null&&c("WAWebWid").isLid(a.id)&&!a.isDeprecated}),f=d("WAWebApiContact").getAlternateWidBulkForLids_DEPRECATED(e.map(function(a){return a.id.toString()}));e.forEach(function(c){var d;d=l(c,(d=f.get(c.id.toString()))!=null?d:[],a);d&&b.push({id:c.id.toString(),isDeprecated:!0})});if(b.length===0)return;yield d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(b).then(function(){d("WALogger").LOG(i(),b.length),d("WALogger").WARN(h()).sendLogs("deprecating-lid-chat-pnh-ctwa-mat")})});return k.apply(this,arguments)}function l(a,b,e){if(!c("WAWebWid").isLid(a.id)||b.length===0)return!1;if(a.isDeprecated===!0){d("WALogger").WARN(j()).sendLogs("deprecating-lid-chat-pnh-ctwa-mat");return!0}b=b.some(function(a){return e.some(function(b){return(b==null?void 0:b.id)===a})});b&&d("WAWebApiChat").updateDeprecatedChatMatCache_DEPRECATED(d("WAWebWidFactory").createWid(a.id),!0);return b}g.updateDuplicatedLidThreadBulk=a;g.shouldDeprecateLidThread=l}),98);
__d("WAWebOffdStorageUpdateOfflinePeerReceipts",["Promise","WAJids","WALogger","WAWebAck","WAWebBackendApi","WAWebDBMsgUtils","WAWebMarkAddOnsAsReadJob","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKey","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSchemaMessage","WAWebSchemaPeerReadReceipt","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: getUpdatesForPeerReadReceipts: found "," pendingReadMessages"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: finish update add-on tables"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: finish update chat/message table"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: finish compute peer played updates"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: finish compute peer receipt updates"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePeerReceipts: unknown ack type: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: find "," peer receipts"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: updatePeerReceipts: start updatePeerReceipts"]);p=function(){return a};return a}function a(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"UpdatePeerReceipts_start");(a=d("WALogger")).DEV(p());var e=(yield d("WAWebSchemaPeerReadReceipt").getTable().all());a.DEV(o(),e.length);var f=[],g=[];e.forEach(function(a){a.ack===d("WAWebAck").ACK.READ?f.push(a):a.ack===d("WAWebAck").ACK.PLAYED?g.push(a):d("WALogger").WARN(n(),a.ack)});e=(yield r(f));var i=e.chatUpdates;e=e.ackUpdates;a.DEV(m());var q=new Map(e.map(function(a){return[a.id,a]}));e=u(g);e.forEach(function(a){var b=q.get(a.id);b==null?q.set(a.id,a):q.set(a.id,babelHelpers["extends"]({},b,{ack:a.ack}))});var s=Array.from(q.values());a.DEV(l());d("WAWebBackendApi").frontendFireAndForget("updateOfflinePeerReceipt",{chatUpdates:i.map(function(a){return{chatId:a.id,unreadCount:a.unreadCount,unreadMentionsOfMe:(a=a.unreadMentionsOfMe)!=null?a:[]}}),ackUpdates:s.map(function(a){return{msgKey:a.id,ack:a.ack}})});yield (h||(h=b("Promise"))).all([d("WAWebModelStorageUtils").getStorage().lock(["message","chat"],function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).all([c.bulkCreateOrMerge(s),a.bulkCreateOrMerge(i)])}).then(function(){d("WALogger").DEV(k())}),d("WAWebMarkAddOnsAsReadJob").markUnclassifiedAddOnsAsReadJob(Array.from(t(f)).map(function(a){return c("WAWebMsgKey").from(a)})).then(function(){d("WALogger").DEV(j())})]);return d("WAWebSchemaPeerReadReceipt").getTable().clear().then(function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"UpdatePeerReceipts_end")})});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=t(a),e=h(a);h=Array.from(e.keys());var f=(yield d("WAWebSchemaMessage").getMessageTable().anyOf(["from","pendingReadReceipt"],h.reduce(function(a,b){var c;a.push([b,d("WAWebDBMsgUtils").PendingReadReceiptType.Message]);((c=d("WAWebWidFactory").createWid(b))==null?void 0:c.isBot())&&a.push([b,d("WAWebDBMsgUtils").PendingReadReceiptType.MessageEdit]);return a},[]),{shouldDecrypt:!1}));d("WALogger").DEV(i(),f.length);f.forEach(function(a){return j(e.get(a.from),a)});f.forEach(function(a){return k(e.get(a.from),a)});a=l(f).concat(m(b));l=h.map(function(a){var b=e.get(a);return b!=null&&b.lastUnreadMsgRowId!=null?{id:a,unreadCount:b.unreadCount,unreadMentionsOfMe:b.unreadMentionsOfMe}:null}).filter(Boolean);return{chatUpdates:l,ackUpdates:a};function g(a){return c("WAWebMsgKey").fromString(a).remote.toString()}function h(a){return new Map(a.flatMap(function(a){return a.msgKeys}).map(g).filter(function(a){return a!==d("WAJids").STATUS_JID}).map(function(a){return[a,{unreadCount:0,lastUnreadMsgRowId:void 0,unreadMentionsOfMe:[],unreadMentionCount:0}]}))}function j(a,c){var d=c.rowId;c=c.id;if(a==null||d==null)return;b.has(c)&&(a.lastUnreadMsgRowId==null||d>a.lastUnreadMsgRowId)&&(a.lastUnreadMsgRowId=d)}function k(a,b){var c=b.rowId;if(a==null||c==null||a.lastUnreadMsgRowId==null)return;if(c>a.lastUnreadMsgRowId){a.unreadCount+=1;if(d("WAWebMsgGetters").getIsImportantMessage(b)){c={id:b.id,timestamp:b.t};a.unreadMentionsOfMe.push(c)}}}function l(a){return f.flatMap(function(a){var b=a.rowId,c=e.get(a.from);if(c==null||b==null||c.lastUnreadMsgRowId==null)return[];return b<=c.lastUnreadMsgRowId?[{id:a.id,ack:d("WAWebAck").ACK.READ,pendingReadReceipt:null}]:[]})}function m(a){return Array.from(a).filter(function(a){return g(a)===d("WAJids").STATUS_JID}).map(function(a){return{id:a,ack:d("WAWebAck").ACK.READ}})}});return s.apply(this,arguments)}function t(a){return new Set(a.flatMap(function(a){return a.msgKeys}))}function u(a){var b=new Set();a.forEach(function(a){a.ack===d("WAWebAck").ACK.PLAYED&&a.msgKeys.forEach(function(a){return b.add(a)})});return Array.from(b).map(function(a){return{id:a,ack:d("WAWebAck").ACK.PLAYED,pendingReadReceipt:null}})}g.updatePeerReceipts=a}),98);
__d("WAWebSchemaPendingDeviceSync",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addUserDefinedPrimaryKey;function a(){d("WAWebOffdStorageUtils").getStorage().add("pending-device-sync").version(d("WAWebOffdStorageUtils").getStorage().versions.version(4),[h("id")]).view(function(a){return a})}function b(){return d("WAWebOffdStorageUtils").getStorage().table("pending-device-sync")}g.addTable=a;g.getTable=b}),98);
__d("WAWebApiPendingDeviceSync",["WALogger","WAWebSchemaPendingDeviceSync","WAWebSyncDeviceAdvDeviceListJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["doPendingDeviceSync failed during RESUME_WITH_OPEN_TAB"]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield d("WAWebSchemaPendingDeviceSync").getTable().all());yield d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob(a.map(function(a){return d("WAWebWidFactory").createWid(a.id)}),null,null);yield d("WAWebSchemaPendingDeviceSync").getTable().bulkRemove(a.map(function(a){return a.id}))}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a)}});return i.apply(this,arguments)}function c(a){return d("WAWebSchemaPendingDeviceSync").getTable().bulkCreateOrMerge(a.map(function(a){return{id:a}}))}g.doPendingDeviceSync=a;g.addUserToPendingDeviceSync=c}),98);
__d("WAWebTimestampConversionUtils",["WALogger","WALongInt","WATimeUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: maybeMillisecondsToSeconds: messageTimestamp: "," too large to cast"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: maybeMillisecondsToSeconds: no need to adjust timestamp"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: maybeMillisecondsToSeconds: adjusting future timestamp"]);j=function(){return a};return a}function a(a){var b=a;try{d("WALongInt").numberOrThrowIfTooLarge(a)/d("WATimeUtils").unixTime()>10?(b=d("WALongInt").numberOrThrowIfTooLarge(a)/1e3,d("WALogger").LOG(j())):d("WALogger").LOG(i())}catch(b){d("WALogger").WARN(h(),a)}return b}g.maybeMillisecondsToSeconds=a}),98);
__d("WAWebActiveMessageRanges",["WALogger","WALongInt","WAWebApiActiveMessageRanges","WAWebHandleForMessageRangeEnums","WAWebSchemaActiveMessageRanges","WAWebTimestampConversionUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: last message timestamp was converted to seconds from ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: missing message range from row."]);i=function(){return a};return a}function j(a,b){var c,e;if(a==null){d("WALogger").WARN(i());return d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN}var f=a.messages;a=a.lastMessageTimestamp;c=d("WAWebTimestampConversionUtils").maybeMillisecondsToSeconds((c=a)!=null?c:0);c!==((e=a)!=null?e:0)&&d("WALogger").LOG(h(),a).sendLogs("syncd: last message timestamp was converted to seconds",{sampling:.01});if(b.t!=null&&b.t<d("WALongInt").numberOrThrowIfTooLarge(c))return d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_TIMESTAMP;e=b.id;for(a=f,c=Array.isArray(a),b=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(c){if(b>=a.length)break;f=a[b++]}else{b=a.next();if(b.done)break;f=b.value}f=f;f=f.key;if(f!=null&&e!=null&&f.id===e.id)return d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_ADDITIONAL}return d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN}function a(a,b){d("WAWebApiActiveMessageRanges").getActiveMessageRanges(a.remote.toString()).then(function(c){c.forEach(function(c){if([d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive,d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead].includes(c.action)&&j(c.actionValue.messageRange,{id:a,t:b})===d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN)return d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.remote.toString(),c.action)})})}g.rangeContainsMessage=j;g.checkAndRemoveActiveMessageRanges=a}),98);
__d("WAWebWamEnumCollection",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:1,REGULAR_LOW:2,REGULAR_HIGH:3,CRITICAL_BLOCK:4,CRITICAL_UNBLOCK_LOW:5});f.COLLECTION=a}),66);
__d("WAWebWamEnumMdSyncdCriticalEventCode",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE_RANGE_UNSET:1,MESSAGE_RANGE_LAST_SYSTEM_MESSAGE_TIMESTAMP_SET:2,MESSAGE_RANGE_MESSAGES_UNSET:3,MESSAGE_RANGE_MESSAGES_EMPTY:4,MESSAGE_RANGE_MESSAGES_CROSS_LIMIT:5,MESSAGE_RANGE_MESSAGE_KEY_UNSET:6,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_UNSET:7,MESSAGE_RANGE_MESSAGE_KEY_FROM_ME_UNSET:8,MESSAGE_RANGE_MESSAGE_KEY_STANZA_ID_UNSET:9,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_INVALID:10,MESSAGE_RANGE_MESSAGE_KEY_PARTICIPANT_UNSET:11,MALFORMED_PENDING_MUTATION:12,ACTION_INVALID_INDEX_DATA:13,MISSING_MUTATION_TO_REMOVE:14,LTHASH_INCONSISTENCY_ON_DAILY_CHECK:15,LTHASH_INCONSISTENCY_ON_SNAPSHOT_MAC_MISMATCH:16});f.MD_SYNCD_CRITICAL_EVENT_CODE=a}),66);
__d("WAWebMdCriticalEventWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCollection","WAWebWamEnumMdSyncdCriticalEventCode"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdCriticalEvent:[2746,{collection:[2,d("WAWebWamEnumCollection").COLLECTION],mdCriticalEventCode:[1,d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE]},[1,1,1],"regular"]},{MdCriticalEvent:[]});g.MdCriticalEventWamEvent=a}),98);
__d("WAWebSyncdUtils",["WASyncdActionUtils","WASyncdConst","WAWebMdCriticalEventWamEvent","WAWebWamEnumCollection"],(function(a,b,c,d,e,f,g){function a(a){return d("WASyncdActionUtils").buildIndex(d("WASyncdConst").Actions.Star,h(a))}function b(a){return h(a.id)}function h(a){var b=i(a);return[a.remote.toString({legacy:!0}),a.id,a.fromMe?"1":"0",b]}function i(a){var b="0";a.participant&&!a.remote.isUser()&&!a.fromMe&&(b=a.participant.toString({legacy:!0}));return b}function j(a){switch(a){case d("WASyncdConst").CollectionName.CriticalBlock:return d("WAWebWamEnumCollection").COLLECTION.CRITICAL_BLOCK;case d("WASyncdConst").CollectionName.CriticalUnblockLow:return d("WAWebWamEnumCollection").COLLECTION.CRITICAL_UNBLOCK_LOW;case d("WASyncdConst").CollectionName.Regular:return d("WAWebWamEnumCollection").COLLECTION.REGULAR;case d("WASyncdConst").CollectionName.RegularHigh:return d("WAWebWamEnumCollection").COLLECTION.REGULAR_HIGH;case d("WASyncdConst").CollectionName.RegularLow:return d("WAWebWamEnumCollection").COLLECTION.REGULAR_LOW}}function c(a,b){a=new(d("WAWebMdCriticalEventWamEvent").MdCriticalEventWamEvent)({mdCriticalEventCode:a});b!=null&&(a.collection=j(b));a.commit()}g.constructStarMsgKeyFromMsgKey=a;g.constructMsgKeySegments=b;g.constructMsgKeySegmentsFromMsgKey=h;g.extractParticipantForSync=i;g.collectionNameToMetric=j;g.uploadCriticalEventMetric=c}),98);
__d("WAWebHandleForMessageRange",["Promise","WALogger","WASyncAction.pb","WAWebActiveMessageRanges","WAWebAddonGatingUtils","WAWebApiActiveMessageRanges","WAWebHandleForMessageRangeEnums","WAWebMsgRangeContainmentHandlers","WAWebMsgType","WAWebSchemaActiveMessageRanges","WAWebSyncdDb","WAWebSyncdUtils","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessageContainment called with unknwon message range action action: ",""]);i=function(){return a};return a}var j=new Set(),k=function(a){return a.reduce(function(a,b){return new Set([].concat(Array.from(a),Array.from(b)))},new Set())};function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;switch(a.action){case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive:a.actionValue.archived?yield d("WAWebMsgRangeContainmentHandlers").handleForArchive(a,c):yield d("WAWebMsgRangeContainmentHandlers").handleForUnarchive(a,c);return j;case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.MarkChatAsRead:yield d("WAWebMsgRangeContainmentHandlers").handleForMarkAsReadUnread(a,c,!!a.actionValue.read);return j;case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatDeleteStarredKeepMedia:e=d("WAWebMsgRangeContainmentHandlers").handleForClearChat(a,c);return e?new Set([e]):j;case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.ClearChatKeepStarredKeepMedia:if(!(yield n(b.id))){e=d("WAWebMsgRangeContainmentHandlers").handleForClearChat(a,c);return e?new Set([e]):j}return j;case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatDeleteMedia:case d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.DeleteChatKeepMedia:e=d("WAWebMsgRangeContainmentHandlers").handleForDeleteChat(a,c);return e?new Set([e]):j}d("WALogger").WARN(i(),a.action);return j});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebSyncdUtils").constructStarMsgKeyFromMsgKey(a);a=(yield d("WAWebSyncdDb").getSyncAction(a));if(a){a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData).value;return(a==null?void 0:(a=a.starAction)==null?void 0:a.starred)||!1}return!1});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e===void 0&&(e=!0);if(d("WAWebMsgType").SYSTEM_MESSAGE_TYPES.includes(c.type))return j;a=(yield d("WAWebApiActiveMessageRanges").getActiveMessageRanges(a.toString()));a=a.map(function(a){return[a,d("WAWebActiveMessageRanges").rangeContainsMessage(a.actionValue.messageRange,c)]});var f=a.filter(function(a){a=a[1];return a===d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_ADDITIONAL}).map(function(a){a=a[0];return a});f.forEach(function(a){a.remainingMessages--});yield d("WAWebApiActiveMessageRanges").bulkUpdateActiveMessageRanges(f,e);f=a.map(function(a){var b=a[0];a=a[1];return l(b,c,a)});e=(yield (h||(h=b("Promise"))).all(f));return k(e)});return q.apply(this,arguments)}function r(a){if(d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(a.type))return!0;return a.type==="reaction"||a.type==="poll_update"?!0:!1}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map();a.forEach(function(a){if(d("WAWebMsgType").SYSTEM_MESSAGE_TYPES.includes(a.type)||r(a))return;var b=c.get(a.id.remote.toString());(b==null||b.t<a.t)&&c.set(a.id.remote.toString(),a)});yield (h||(h=b("Promise"))).all(Array.from(c.entries()).map(function(a){var b=a[0];a=a[1];return p(d("WAWebWidFactory").createWid(b),a)}))});return s.apply(this,arguments)}g.handleForActiveMessageRange=p;g.handleOfflineForMessageRange=a}),98);
__d("WAWebChatDbUpdatesApi",["WAWebBackendApi","WAWebSchemaChat","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a);a=a.map(function(a){return{id:d("WAWebWidFactory").createWid(a.id),archive:a.archive}});d("WAWebBackendApi").frontendFireAndForget("chatCollectionUpdate",{updates:a})});return h.apply(this,arguments)}g.setArchive=a}),98);
__d("WAWebMsgRangeContainmentHandlers",["WALogger","WAWebApiActiveMessageRanges","WAWebBackendApi","WAWebChatDbUpdatesApi","WAWebHandleForMessageRangeEnums","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleForArchive: Unarchiving chat due to an incoming message"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b===d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN){b=(yield d("WAWebUserPrefsMultiDevice").getArchiveV2EnabledSetting());var c=(yield d("WAWebUserPrefsMultiDevice").getUnarchiveChatsSetting());(!b||c)&&(d("WALogger").DEV(h()),d("WAWebChatDbUpdatesApi").setArchive([{id:a.chatId,archive:!1}]));yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.chatId,a.action)}});return i.apply(this,arguments)}function c(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){(b===d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN||a.remainingMessages===0)&&(yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.chatId,a.action))});return j.apply(this,arguments)}function e(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b===d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN?yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.chatId,a.action):a.remainingMessages===0&&(d("WAWebBackendApi").frontendFireAndForget("updateChatReadStatus",{id:d("WAWebWidFactory").createWid(a.chatId),read:c}),yield d("WAWebApiActiveMessageRanges").removeActiveMessageRange(a.chatId,a.action))});return k.apply(this,arguments)}function f(a,b){switch(b){case d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_TIMESTAMP:case d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_ADDITIONAL:return d("WAWebHandleForMessageRangeEnums").ActiveRangeHandlerAction.DropMessage;case d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN:return}}function l(a,b){switch(b){case d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_TIMESTAMP:case d("WAWebHandleForMessageRangeEnums").RangeContain.CONTAINS_BY_ADDITIONAL:return d("WAWebHandleForMessageRangeEnums").ActiveRangeHandlerAction.DropMessage;case d("WAWebHandleForMessageRangeEnums").RangeContain.DOES_NOT_CONTAIN:return}}g.handleForArchive=a;g.handleForUnarchive=c;g.handleForMarkAsReadUnread=e;g.handleForClearChat=f;g.handleForDeleteChat=l}),98);
__d("WAWebMessagingGatingUtils",["WAWebABProps","WAWebDBReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_send_invisible_msg_to_new_groups")}function b(){return d("WAWebABProps").getABPropConfigValue("web_send_invisible_msg_min_group_size")}function c(){return d("WAWebABProps").getABPropConfigValue("web_send_invisible_msg_max_group_size")}function e(){var a;return(a=d("WAWebABProps").getABPropConfigValue("group_size_bypassing_sampling"))!=null?a:1e5}function f(){return d("WAWebABProps").getABPropConfigValue("retry_receipt_error_code_enabled")}function h(){return d("WAWebABProps").getABPropConfigValue("web_device_sync_manager_group_enabled")}function i(){return n()>0}function j(){return d("WAWebABProps").getABPropConfigValue("rt_receive_reporting_tag")}function k(){return d("WAWebABProps").getABPropConfigValue("rt_sync_reporting_tag")}function l(){var a;return(a=d("WAWebABProps").getABPropConfigValue("rt_clean_reporting_tag"))!=null?a:d("WAWebDBReportingTokenUtils").DEFAULT_RT_CLEANUP_OLDER_THAN_DAYS}function m(){return d("WAWebABProps").getABPropConfigValue("rt_clean_reporting_token")}function n(){return d("WAWebABProps").getABPropConfigValue("rt_sender_reporting_token_version")}function o(){return d("WAWebABProps").getABPropConfigValue("rt_validate_reporting_token")}function p(){return d("WAWebABProps").getABPropConfigValue("rt_store_reporting_data")}function q(){return d("WAWebABProps").getABPropConfigValue("rt_send_reporting_data")}function r(){return d("WAWebABProps").getABPropConfigValue("rt_report_token_from_inclusion_list")}function s(){return d("WAWebABProps").getABPropConfigValue("web_inactive_receipts_v2")}function t(){return d("WAWebABProps").getABPropConfigValue("visible_message_drop_placeholder_enabled_internal_only")}function u(){return d("WAWebABProps").getABPropConfigValue("web_payment_notifications_ack_kick_fix_enabled")}function v(){return d("WAWebABProps").getABPropConfigValue("web_flush_message_cache_before_sending_preacks_enabled")}g.sendKeyDistributionMsgToNewGroups=a;g.sendKeyDistributionMsgMinGroupSize=b;g.sendKeyDistributionMsgMaxGroupSize=c;g.getGroupSizeBypassingSampling=e;g.isRetryReceiptErrorCodeEnabled=f;g.isDeviceSyncManagerGroupEnabled=h;g.isReportingTokenSendingEnabled=i;g.isReportingTokenReceivingEnabled=j;g.isReportingTagSyncingEnabled=k;g.getReportingTagCleanupDays=l;g.getReportingTokenCleanupDays=m;g.getSenderReportingTokenVersion=n;g.isReportingTokenValidationActionEnabled=o;g.isReportingDataStoringEnabled=p;g.isSendReportingDataEnabled=q;g.isReportingTokenFromInclusionListEnabled=r;g.isInactiveReceiptsV2Enabled=s;g.isMessageDropPlaceholderEnabled=t;g.isPaymentNotificationAckKickFixEnabled=u;g.isFlushMessageCacheBeforeSendingPreacksEnabled=v}),98);
__d("WAWebOrderPaymentStatus",["$InternalEnum","WAWebE2EProtoUtils","WAWebInteractiveMessageType","WAWebMsgType"],(function(a,b,c,d,e,f,g){var h=-1e3;a=b("$InternalEnum")({Pending:"pending",Captured:"captured"});e=b("$InternalEnum")({Confirm:"confirm",PaymentInstruction:"payment_instruction"});f=b("$InternalEnum")({CPI:"cpi",PIX:"pix"});var i=function(a){var b={};try{b=JSON.parse(a)}catch(a){return null}if(b==null)return null;a=b;b=a.reference_id;var c=a.payment_method;a=a.payment_status;return b==null||a==null&&c==null?null:{refId:b,paymentMethod:c,paymentStatus:a}},j=function(a){var b;if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&d("WAWebE2EProtoUtils").isOrderNativeFlow(a.nativeFlowName)&&((b=a.interactivePayload)==null?void 0:b.buttons)){b=a.interactivePayload;a=b.buttons[0].buttonParamsJson;if(a!=null)return i(a)}return null},k=function(a){var b;return a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&d("WAWebE2EProtoUtils").isOrderNativeFlow(a.nativeFlowName)&&((b=a.interactivePayload)==null?void 0:b.buttons)?a.interactivePayload.buttons[0]:null},l=function(a){a=k(a);if(a==null)return null;var b=a.name;a=a.buttonParamsJson;return b!=null&&a!=null?i(a):null};b=function(a,b){a=a.msgs.getModelsArray().slice(h);var e=null;a=a.findLast(function(a){if(a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.subtype==="phone_only_feature"&&a.quotedMsg!=null){var f;e=j(a.quotedMsg);if(((f=e)==null?void 0:f.refId)===b)return!0}else if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&d("WAWebE2EProtoUtils").isOrderNativeFlow(a.nativeFlowName)){e=l(a);if(((f=e)==null?void 0:f.refId)===b)return!0}return!1});return a!=null&&e!=null?e:null};g.OrderPaymentStatus=a;g.OrderPaymentMethod=e;g.OrderAcceptedPaymentMethods=f;g.paramsJsonToOrderPaymentInfo=i;g.getOrderPaymentStatusInfo=j;g.getOrderPaymentStatusInfoFromNativeFlow=l;g.findLastOrderPaymentStatusInfo=b}),98);
__d("WAWebOrderStatus",["$InternalEnum","WAWebBizGatingUtils","WAWebE2EProtoUtils","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType","WAWebOrderDetails"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({Pending:"pending",Processing:"processing",PartiallyShipped:"partially_shipped",Shipped:"shipped",Complete:"completed",Canceled:"canceled",PaymentRequested:"payment_requested",PreparingToShip:"preparing_to_ship",Delivered:"delivered"}),i=function(a){if(a==null)return null;try{a=JSON.parse(a);var b=a.order;a=a.reference_id;b=h.cast(b==null?void 0:b.status);return b==null||a==null?null:{refId:a,status:b}}catch(a){return null}},j=function(a){var b;if(!d("WAWebE2EProtoUtils").isOrderNativeFlow(a.nativeFlowName))return null;if(a.type===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&a.interactiveType===c("WAWebInteractiveMessageType").NATIVE_FLOW&&((b=a.interactivePayload)==null?void 0:b.buttons)){b=a.interactivePayload.buttons[0].buttonParamsJson;return i(b)}else if(a.type===d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW){a=((b=a.nativeFlowButtons)!=null?b:[])[0].nativeFlowInfo;return i(a==null?void 0:a.paramsJson)}};a=function(a,b){a=a.msgs.getModelsArray().slice(-1e3);a=(a=a.findLast(function(a){return[c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS,c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO].includes(a.nativeFlowName)&&((a=d("WAWebOrderDetails").getOrderInfo(a))==null?void 0:a.referenceId)===b}))==null?void 0:a.safe();return a};var k=function(a,b){a=a.msgs.getModelsArray().slice(-1e3);a=(a=a.findLast(function(a){return d("WAWebE2EProtoUtils").isOrderNativeFlow(a.nativeFlowName)&&((a=j(a))==null?void 0:a.refId)===b}))==null?void 0:a.safe();return a},l=function(){return d("WAWebBizGatingUtils").isOrderStatusM1Enabled()?h.PaymentRequested:h.Pending};e=function(a,b){a=k(a,b);b=a!=null?j(a):null;return(a=b==null?void 0:b.status)!=null?a:l()};g.OrderStatus=h;g.paramsJsonToOrderStatusInfo=i;g.getOrderStatusInfo=j;g.findOrderDetailsMessage=a;g.getDefaultOrderStatus=l;g.findOrderStatus=e}),98);
__d("WAWebPairList",["lodash"],(function(a,b,c,d,e,f,g){function a(a){return c("lodash").flatten(a.map(function(a){return[a[0],a[1]]}))}function b(a){if(a.length%2!==0)throw new RangeError("Flattened pairs come in 2, invalid list size to unflatten!");var b=[];for(var c=0;c<a.length;c++)b.push([a[c],a[++c]]);return b}g.flattenPairList=a;g.unFlattenPairList=b}),98);
__d("WAWebProfilePicConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Remove","Set"]);f.ProfilePicCommand=a}),66);
__d("WAWebGroupSystemMsg",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebApiParticipantStore","WAWebCommunityGatingUtils","WAWebContactSystemMsg","WAWebDBCommunity","WAWebDBGroupsGroupMetadata","WAWebGroupType","WAWebGroupsParticipantsApi","WAWebMsgKey","WAWebMsgType","WAWebPairList","WAWebProfilePicConstants","WAWebRequestMethodType","WAWebSchemaGroupMetadata","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["genIntegrityDelteteParentNotificationMsgs: missing parentGroupMetadata"]);i=function(){return a};return a}function j(a,b){var e,f=a.chatId;e=(e=(e=b.owner)!=null?e:a.author)!=null?e:d("WAWebUserPrefsMeUser").getMaybeMeUser();var g=b.participants.some(function(a){var b=a.isAdmin;a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)&&b}),h=f,i=!1,j=b.subject,k,l;if(b.defaultSubgroup===!0){var m;k="community_create";b.parentGroup&&(l=[b.parentGroup,b.subject]);e=(m=b.owner)!=null?m:a.author}else if(b.generalSubgroup===!0&&g&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){k="general_chat_add";l=["created",b.subject];e=(m=b.owner)!=null?m:a.author}else{e=(g=b.owner)!=null?g:a.author;m=b.membershipApprovalMode===!0?"true":"false";b.parentGroup&&b.participants.length===1&&d("WAWebCommunityGatingUtils").communityShortGroupCreationEnabled()?(l=[b.parentGroup,b.parentGroupSubject,b.subject,m],k="empty_subgroup_create"):k="create"}return{id:new(c("WAWebMsgKey"))({remote:h,fromMe:i,participant:e,id:C(a,k)}),author:e,body:j,from:f,recipients:[],subtype:k,t:(g=b.creation)!=null?g:a.ts,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,templateParams:l}}function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=c.participants.find(function(a){var b=a.isAdmin;a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)&&b});return(yield (h||(h=b("Promise"))).all([i(),k(),l(),m(),q()])).flat();function i(){return!e&&!g&&c.defaultSubgroup===!0&&c.incognito===!0?[d("WAWebContactSystemMsg").genNotificationMsg(c.id,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"cag_masked_thread_created",templateParams:[]})]:[]}function k(){return e?[]:[j(a,c)]}function l(){var b=c.ephemeralDuration;return a.author&&a.ts!=null&&b!=null&&b>0?[p(a.chatId,a.ts,a.author,b)]:[]}function m(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=[],f=c.defaultSubgroup,g=c.parentGroup;if(g!=null&&f!==!0&&!e){f={actionType:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK,groupDatas:[{id:g,subject:""}]};if((d("WAWebABProps").getABPropConfigValue("group_join_request_m0_anyone_can_join")||d("WAWebABProps").getABPropConfigValue("group_join_request_m2_setting"))&&!d("WAWebCommunityGatingUtils").communityPermissionsEnabled()){g=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));b.push(yield D(a,f.groupDatas,g))}}return b});return o.apply(this,arguments)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return f==null?[]:[yield n(a,f)]});return r.apply(this,arguments)}});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.parentGroupId;if(!a)return!1;a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return!a||a!=null&&(yield d("WAWebDBCommunity").getJoinedSubgroups(d("WAWebWidFactory").createWid(a.id))).length<=b?!0:!1});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.chatId,g=a.isAdmin;g=g===void 0?!1:g;var h=a.author&&d("WAWebWidFactory").toUserWid(a.author)||void 0,i=f,j=!1,k=null,m=[],n=h,o=b.actionType,p=null,q,r=b.parentGroupId;switch(b.actionType){case d("WAWebGroupType").GROUP_ACTIONS.SUBJECT:k=b.subject;break;case d("WAWebGroupType").GROUP_ACTIONS.MODIFY:m=b.participants.map(function(a){a=a.id;return a});break;case d("WAWebGroupType").GROUP_ACTIONS.ADD:if(b.reason===d("WAWebGroupType").ADD_REASON.INVITE)if(r&&b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)}))if(b.generalSubgroup===!0&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){var s;o="general_chat_add";p=["linked_group_join",(s=b.groupName)!=null?s:""]}else if(b.defaultSubgroup===!0){o="community_invite_rich";p=[r,(s=b.groupName)!=null?s:""]}else{o="sub_group_invite_rich";s=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(r));p=[r,(s=s==null?void 0:s.subject)!=null?s:""]}else o="invite";else if(b.reason===d("WAWebGroupType").ADD_REASON.LINKED_GROUP_JOIN)if(b.generalSubgroup===!0&&r!=null&&b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){o="general_chat_add";p=["linked_group_join",(s=b.groupName)!=null?s:""]}else o="linked_group_join";else if(b.reason===d("WAWebGroupType").ADD_REASON.AUTO_ADD)if(r){p=[r,(s=b.groupName)!=null?s:"",(s=b.contextGroupId)!=null?s:""];o="subgroup_admin_triggered_auto_add"}else{o="auto_add";if(yield l(b,2)){p=[b.parentGroupId,(s=b.groupName)!=null?s:""]}}else if(b.reason===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_ADMIN_ADD)if(r){o="community_participant_add_rich";p=[r,(s=b.groupName)!=null?s:""]}else{o="default_sub_group_admin_add";if(yield l(b,1)){p=[b.parentGroupId,(s=b.groupName)!=null?s:""]}}else if(b.reason===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE)o="default_sub_group_promote";else if(b.reason===d("WAWebGroupType").ADD_REASON.INVITE_AUTO_ADD)if(r&&Boolean(b.defaultSubgroup)&&b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})){p=[r,(s=b.groupName)!=null?s:"",(s=b.contextGroupId)!=null?s:""];o="subgroup_admin_triggered_invite_auto_add"}else o="invite_auto_add",b.contextGroupId&&(p=[b.contextGroupId,""],(yield l(b,2))?p.push("false"):p.push("true"));else if(b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&b.reason===d("WAWebGroupType").ADD_REASON.GENERAL_CHAT_AUTO_ADD&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled())o="general_chat_add",p=["general_chat_auto_add",b.groupName];else if(b.reason==null&&r&&b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&b.generalSubgroup===!0&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){o="general_chat_add";p=["",(s=b.groupName)!=null?s:""]}else if(r&&b.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})){s=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(r));p=[r,(r=s==null?void 0:s.subject)!=null?r:""];o=b.defaultSubgroup===!0?"community_participant_add_rich":"sub_group_participant_add_rich"}case d("WAWebGroupType").GROUP_ACTIONS.PROMOTE:case d("WAWebGroupType").GROUP_ACTIONS.DEMOTE:case d("WAWebGroupType").GROUP_ACTIONS.REMOVE:case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE:case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE:if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&b.reason===d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){o="default_sub_group_demote";break}m=b.participants.map(function(a){a=a.id;return a});m.length===1&&(n=m[0]);b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&m.length===1&&h===n&&(o="leave");break;case d("WAWebGroupType").GROUP_ACTIONS.INVITE_CODE:o="revoke_invite";break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD:o=b.isParentGroup===!0?"parent_group_description":"description";k=b.desc;break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE:o=b.isParentGroup===!0?"parent_group_description":"description";break;case d("WAWebGroupType").GROUP_ACTIONS.RESTRICT:p=[b.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];k=p[0];b.threshold!=null&&p.push(b.threshold);break;case d("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE:case d("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD:p=[b.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];k=p[0];break;case d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL:h&&(p=[""+b.duration,h]);break;case d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED:p=[b.type];k=p[0];break;case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK:case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_LINK:case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK:p=d("WAWebPairList").flattenPairList(b.groupDatas.map(function(a){return[a.id,a.subject]}));break;case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK:p=d("WAWebPairList").flattenPairList(b.groupDatas.map(function(a){return[a.id,a.subject]}));o="community_link_parent_group_rich";q="parentGroupLink";break;case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL:s=b.groupDatas[0];r=g?d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin:d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Regular;var t=b.membershipApprovalMode;p=[s.id,s.subject,r,t.toString()];q="parentGroupLinkMembershipApproval";break;case d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP:p=[b.communityTitle];break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:p=[b.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off,g?d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin:d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Regular];b.triggered==="server"&&(h=void 0);break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBER_ADD_MODE:if(!d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled"))break;s=b.memberAddMode;s!=null&&(p=[s===d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off]);break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:r=b.requests;b.requestMethod===d("WAWebRequestMethodType").RequestMethod.NonAdminAdd&&h!=null&&r.length>0?(p=[h.toJid()].concat(r.map(function(a){return a.toJid()})),o="created_membership_requests"):o="membership_approval_request";break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:p=[b.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];t=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));p.push(t?d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin:d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Regular);break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:p=[b.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:o="created_subgroup_suggestion";p=[b.subject];break;case d("WAWebGroupType").GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:o="general_chat_auto_add_disabled";p=[d("WAWebGroupType").GeneralChatAutoAddDisabledReasonEnum.Full];break;case d("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE:o="community_owner_update";p=[b.newOwner.toString()];m=[b.newOwner];break}return{id:new(c("WAWebMsgKey"))({remote:i,fromMe:j,participant:n,id:C(a,q)}),body:k?k:void 0,author:h,from:f,to:d("WAWebUserPrefsMeUser").getMeUser(),recipients:m.map(d("WAWebWidFactory").toUserWid)||[],subtype:o,t:(g=e)!=null?g:a.ts,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,templateParams:p?p:void 0}});return o.apply(this,arguments)}function e(a,b,e,f){var g=!1;return{type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,subtype:"picture",t:e,author:f,body:b===d("WAWebProfilePicConstants").ProfilePicCommand.Set?"set":"remove",recipients:[],from:a,to:d("WAWebUserPrefsMeUser").getMeUser(),id:new(c("WAWebMsgKey"))({remote:a,fromMe:g,id:c("WAWebMsgKey").newId_DEPRECATED()})}}function p(a,b,e,f){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,participant:e,id:c("WAWebMsgKey").newId_DEPRECATED()}),author:e,from:a,to:d("WAWebUserPrefsMeUser").getMeUser(),recipients:[],subtype:"ephemeral",t:b,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,templateParams:[""+f]}}function f(a,b){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,id:c("WAWebMsgKey").newId_DEPRECATED()}),from:a,to:d("WAWebUserPrefsMeUser").getMeUser(),recipients:[],subtype:"initial_pHash_mismatch",t:b,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2}}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c,e=[],f=a.chatId,g=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(f));if(g==null||g.isParentGroup===!1)return e;var i=(yield d("WAWebDBCommunity").getDefaultSubgroup(f)),j=(c=g==null?void 0:g.subject)!=null?c:"",k=d("WATimeUtils").unixTime();i!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(i))&&e.push(yield n({chatId:i,author:a.author,ts:k},{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:j}));yield (h||(h=b("Promise"))).all(((c=(yield d("WAWebDBCommunity").getJoinedSubgroups(d("WAWebWidFactory").createWid(g.id))))!=null?c:[]).filter(function(a){return!(i!=null&&i.equals(a))}).map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){e.push(yield n({chatId:b,author:a.author,ts:k},{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:j})),e.push(yield n({chatId:b,author:a.author,ts:k},{actionType:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK,groupDatas:[{id:f,subject:j}]}))});return function(a){return c.apply(this,arguments)}}()));return e});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=a.chatId,g=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(f));if(g==null){d("WALogger").ERROR(i());return[]}var j=(yield d("WAWebDBCommunity").getDefaultSubgroup(f));if(j!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(j))){e.push(yield n({chatId:j,author:void 0,ts:d("WATimeUtils").unixTime()},{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE,reason:d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT,groupDatas:[{id:f,subject:(c=g==null?void 0:g.subject)!=null?c:""}]}))}yield (h||(h=b("Promise"))).all(((a=(yield d("WAWebDBCommunity").getJoinedSubgroups(f)))!=null?a:[]).filter(function(a){return!(j!=null&&j.equals(a))}).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return e.push(yield n({chatId:a,author:void 0,ts:d("WATimeUtils").unixTime()},{actionType:d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK,groupDatas:[{id:f,subject:(a=g==null?void 0:g.subject)!=null?a:""}]}))});return function(b){return a.apply(this,arguments)}}()));return e});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId,e=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(c));if((e==null?void 0:e.isParentGroup)===!0){e=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(e&&(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE))return n(babelHelpers["extends"]({},a,{chatId:e}),babelHelpers["extends"]({},b,{isParentGroup:!0}))}return n(a,b)});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!c)return;var e=(yield d("WAWebGroupsParticipantsApi").getParticipants(c));e=Boolean(e==null?void 0:e.participants.find(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))}));if(!e)return;return n(babelHelpers["extends"]({},a,{chatId:c}),b)});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!(c&&b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION))return;return n(babelHelpers["extends"]({},a,{chatId:c}),b)});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebABProps").getABPropConfigValue("community_transfer_ownership_receiver"))return;var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!c)return;var e=(yield d("WAWebGroupsParticipantsApi").getParticipants(c));e=Boolean(e==null?void 0:e.participants.find(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))}));if(!e)return;return n(babelHelpers["extends"]({},a,{chatId:c}),b)});return B.apply(this,arguments)}function C(a,b){var d;d=(d=a.externalId)!=null?d:c("WAWebMsgKey").newId_DEPRECATED();b!=null&&(d=""+d+b);return""+d+((b=a.ts)!=null?b:"")}function D(a,b,c){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){f=(yield f(a.chatId));return n(babelHelpers["extends"]({},a,{isAdmin:e}),{actionType:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL,membershipApprovalMode:f,groupDatas:c});function f(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return(a=a==null?void 0:a.membershipApprovalMode)!=null?a:!1});return g.apply(this,arguments)}});return E.apply(this,arguments)}g.genMsgsForGroupCreation=a;g.genGroupNotificationMsg=n;g.genGroupPicChangeNotificationMsg=e;g.genInitialPhashMismatchMsg=f;g.generateDeleteParentNotificationMessages=q;g.genIntegrityDeleteParentNotificationMsgs=s;g.genDescriptionNotificationMsg=u;g.genAllowNonAdminSubGroupCreationNotificationMsg=w;g.genCreatedSubgroupSuggestionNotificationMsg=y;g.genCommunityOwnerUpdateNotificationMsg=A;g.genParentGroupLinkMembershipApprovalNotif=D}),98);
__d("WAWebReportingTokenValidationFailureWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumReportingTokenValidationFailureReason"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ReportingTokenValidationFailure:[5466,{editType:[1,d("WAWebWamEnumEditType").EDIT_TYPE],isLid:[5,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],isMessageRetry:[6,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[3,d("WAWebWamEnumMessageType").MESSAGE_TYPE],reportingTokenValidationFailureReason:[4,d("WAWebWamEnumReportingTokenValidationFailureReason").REPORTING_TOKEN_VALIDATION_FAILURE_REASON]},[1,1,1],"regular"]},{ReportingTokenValidationFailure:[]});g.ReportingTokenValidationFailureWamEvent=a}),98);
__d("WAWebWamReportingTokenMismatchReporter",["WAWebMessagingGatingUtils","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebReportingTokenValidationFailureWamEvent","WAWebWamMsgUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.msg,c=a.reason;a=a.isMessageRetry;if(!d("WAWebMessagingGatingUtils").isReportingTokenValidationActionEnabled())return;new(d("WAWebReportingTokenValidationFailureWamEvent").ReportingTokenValidationFailureWamEvent)({editType:d("WAWebMsgGetters").getWamEditType(b),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(b),messageType:d("WAWebWamMsgUtils").getWamMessageType(b),reportingTokenValidationFailureReason:c,isLid:d("WAWebMsgKeyUtils").isLidMsgKey(b.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message),isMessageRetry:a}).commit()}g.logReportingTokenValidationEvent=a}),98);
__d("WAWebWamEnumCoexStatusReplyPrivacyDisclaimerUserAction",[],(function(a,b,c,d,e,f){a=Object.freeze({DISPLAYED:1,TAPPED:2});f.COEX_STATUS_REPLY_PRIVACY_DISCLAIMER_USER_ACTION=a}),66);
__d("WAWebWamEnumCoexSysMsgInsertionChannel",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_OPEN:0,MESSAGE_RECEIVE:1,HISTORY_SYNC:2});f.COEX_SYS_MSG_INSERTION_CHANNEL=a}),66);
__d("WAWebWamEnumCoexSysMsgStateTransitionAttempt",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE_TO_HOSTED:0,HOSTED_TO_E2EE:1,HOSTED_TO_HOSTED:2});f.COEX_SYS_MSG_STATE_TRANSITION_ATTEMPT=a}),66);
__d("WAWebCoexPrivacySysMsgWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCoexStatusReplyPrivacyDisclaimerUserAction","WAWebWamEnumCoexSysMsgInsertionChannel","WAWebWamEnumCoexSysMsgStateTransitionAttempt"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CoexPrivacySysMsg:[5204,{coexStatusReplyPrivacyDisclaimerUserAction:[8,d("WAWebWamEnumCoexStatusReplyPrivacyDisclaimerUserAction").COEX_STATUS_REPLY_PRIVACY_DISCLAIMER_USER_ACTION],coexSysMsgBusinessId:[1,a.TYPES.STRING],coexSysMsgInsertionChannel:[9,d("WAWebWamEnumCoexSysMsgInsertionChannel").COEX_SYS_MSG_INSERTION_CHANNEL],coexSysMsgInsertionErrorCode:[2,a.TYPES.INTEGER],coexSysMsgInsertionErrorMsg:[3,a.TYPES.STRING],coexSysMsgInsertionSuccess:[4,a.TYPES.BOOLEAN],coexSysMsgIsSelf:[5,a.TYPES.BOOLEAN],coexSysMsgMultiDeviceId:[6,a.TYPES.INTEGER],coexSysMsgStateTransitionAttempt:[7,d("WAWebWamEnumCoexSysMsgStateTransitionAttempt").COEX_SYS_MSG_STATE_TRANSITION_ATTEMPT]},[1,1,1],"private",113760892]},{CoexPrivacySysMsg:[]});g.CoexPrivacySysMsgWamEvent=b}),98);
__d("WAWebBizCoexUtils",["WALogger","WATimeUtils","WAWebBizCoexGatingUtils","WAWebCoexPrivacySysMsgWamEvent","WAWebMsgKey","WAWebOfflineDeviceCache","WAWebOfflineHandler","WAWebSchemaChat","WAWebSyncDeviceAdvDeviceListJob","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWamEnumCoexSysMsgStateTransitionAttempt","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["comit coex system msg wam event failed with error: "," message: ",""]);h=function(){return a};return a}var i=99,j=["biz_account_type_is_hosted","biz_account_type_changed_to_hosted","biz_me_account_type_is_hosted","biz_me_account_type_is_hosted_transition"],k=new Set(),l=new Set();function a(a){return a.some(function(a){return a.isHosted()})}function e(a,b){if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||a==null)return;((a=a[0])==null?void 0:a.id)===i&&m(b)}function m(a){!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()?d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(a.toString(),null):void d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([a],null,null)}function f(a){return!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||a==null?!1:j.includes(a)}function n(a){if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return!1;return d("WAWebUserPrefsMultiDevice").getIsHostedMeAccountFromLocalStorage()||a.isHosted===!0?!0:!1}function o(a){try{var b;if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return;var e=d("WAWebUserPrefsMeUser").getMe(),f=(b=e==null?void 0:e.device)!=null?b:0;a.forEach(function(a){var b=a[0];a[1];a=c("WAWebMsgKey").fromString(b.id);var g={coexSysMsgInsertionSuccess:!0,coexSysMsgMultiDeviceId:f,coexSysMsgStateTransitionAttempt:d("WAWebWamEnumCoexSysMsgStateTransitionAttempt").COEX_SYS_MSG_STATE_TRANSITION_ATTEMPT.E2EE_TO_HOSTED};switch(b.subtype){case"biz_account_type_is_hosted":case"biz_account_type_changed_to_hosted":b=new(d("WAWebCoexPrivacySysMsgWamEvent").CoexPrivacySysMsgWamEvent)(g);b.coexSysMsgIsSelf=!1;b.coexSysMsgBusinessId=a.remote.user;b.commit();break;case"biz_me_account_type_is_hosted":case"biz_me_account_type_is_hosted_transition":a=new(d("WAWebCoexPrivacySysMsgWamEvent").CoexPrivacySysMsgWamEvent)(g);a.coexSysMsgIsSelf=!0;a.coexSysMsgBusinessId=(b=e==null?void 0:e.user)!=null?b:"";a.commit();break;default:break}})}catch(a){d("WALogger").ERROR(h(),a.name,a.message).verbose().devConsole(a).sendLogs("comit coex system msg wam event failed")}}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(k.has(a))return!1;var b=(yield d("WAWebSchemaChat").getChatTable().get(a,!1));k.add(a);return!b});return q.apply(this,arguments)}function r(a){k["delete"](a.toString())}function s(a){a=a.toString()+"_"+d("WATimeUtils").unixTime().toString();if(l.has(a))return!0;l.add(a);return!1}function t(){l.clear()}g.HOSTED_DEVICE_ID=i;g.fanoutListContainsHostedDevice=a;g.triggerUsyncForCoexDeviceAdd=e;g.triggerUsyncForCoexUpdate=m;g.isCoexSystemMsgType=f;g.isMeOrCurrentContactHosted=n;g.sendWamCoexPrivacySysMsgInsertSuccess=o;g.shouldCreateFallbackHostedAdvSystemMsgOnPlaceholder=p;g.deleteChatFromFallbackHostedAdvSystemMsgOnPlaceholderCache=r;g.shouldDedupInitialHostedSystemMsg=s;g.clearDedupInitialHostedSystemMsgCache=t}),98);
__d("WAWebParseBotFeedbackProtocolMessageProto",["WAWebBotTypes","WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.protocolMessage;if(b==null)return;var c=b.type;b=b.botFeedbackMessage;if(c!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.BOT_FEEDBACK_MESSAGE)return;if(b==null)return;c=b.messageKey;var e=b.kind;b=b.text;if(c==null)return;if(e==null)return;var f;switch(e){case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_POSITIVE:f=d("WAWebBotTypes").BotFeedbackKind.POSITIVE;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_GENERIC:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_GENERIC;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_HELPFUL:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_HELPFUL;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_INTERESTING:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_INTERESTING;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_ACCURATE:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_ACCURATE;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_SAFE:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_SAFE;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_OTHER:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_OTHER;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_REFUSED:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_REFUSED;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_NOT_VISUALLY_APPEALING;break;case d("WAWebProtobufsE2E.pb").Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:f=d("WAWebBotTypes").BotFeedbackKind.NEGATIVE_NOT_RELEVANT_TO_TEXT;break}if(f==null)return;return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"bot_feedback",protocolMessageKey:d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(c,a),botFeedbackKind:f,botFeedbackText:b}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseChatMessageProto",["WAWebE2EProtoUtils","WAWebMsgType","WAWebParseExtendedTextMessageProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;var e=b.conversation,f=b.extendedTextMessage;if(e==null&&f==null)return;if(e!=null)return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat,body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(e)}),contextInfo:void 0};if(d("WAWebParseExtendedTextMessageProtoUtils").isUrlExtendedTextMessage(f))return;return d("WAWebParseExtendedTextMessageProtoUtils").parseExtendedTextMessageProto({messageProtobuf:b,baseMessage:c,msgContext:a})}g["default"]=a}),98);
__d("WAWebParseExtendedTextUrlChatMessageProto",["WAWebMsgType","WAWebParseExtendedTextMessageProtoUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage,e=a.rcat;a=a.msgContext;var f=b.extendedTextMessage;if(f==null)return;if(!d("WAWebParseExtendedTextMessageProtoUtils").isUrlExtendedTextMessage(f))return;b=d("WAWebParseExtendedTextMessageProtoUtils").parseExtendedTextMessageProto({messageProtobuf:b,baseMessage:c,msgContext:a});a=babelHelpers["extends"]({},c,b==null?void 0:b.msgData,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat,subtype:"url",rcat:e});return{msgData:a,contextInfo:f==null?void 0:f.contextInfo}}g["default"]=a}),98);
__d("WAWebParseExtendedTextMessageProtoUtils",["WALongInt","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){return Boolean(a==null?void 0:a.matchedText)||Boolean(a==null?void 0:a.description)||Boolean(a==null?void 0:a.title)}function b(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.extendedTextMessage;if(b==null)return;var c=d("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$FontType,e;if((b==null?void 0:b.font)!=null)switch(b.font){case c.SYSTEM:case c.SYSTEM_TEXT:case c.FB_SCRIPT:case c.SYSTEM_BOLD:case c.MORNINGBREEZE_REGULAR:case c.CALISTOGA_REGULAR:case c.EXO2_EXTRABOLD:case c.COURIERPRIME_BOLD:e=b.font;break}c=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.CHAT,kind:d("WAWebMsgType").MsgKind.Chat,body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis((b==null?void 0:b.text)||""),matchedText:b==null?void 0:b.matchedText,description:b==null?void 0:b.description,title:b==null?void 0:b.title,thumbnail:d("WAWebE2EProtoParserApi").decodeBytes(b==null?void 0:b.jpegThumbnail)||"",richPreviewType:b==null?void 0:b.previewType,doNotPlayInline:b==null?void 0:b.doNotPlayInline,textColor:b==null?void 0:b.textArgb,backgroundColor:b==null?void 0:b.backgroundArgb,mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(b==null?void 0:b.mediaKey),mediaKeyTimestamp:(b==null?void 0:b.mediaKeyTimestamp)!=null?d("WALongInt").numberOrThrowIfTooLarge(b.mediaKeyTimestamp):a.mediaKeyTimestamp,thumbnailDirectPath:b==null?void 0:b.thumbnailDirectPath,thumbnailSha256:d("WAWebE2EProtoParserApi").decodeBytes(b==null?void 0:b.thumbnailSha256),thumbnailEncSha256:d("WAWebE2EProtoParserApi").decodeBytes(b==null?void 0:b.thumbnailEncSha256),thumbnailHeight:b==null?void 0:b.thumbnailHeight,thumbnailWidth:b==null?void 0:b.thumbnailWidth,inviteGrpType:(b==null?void 0:b.inviteLinkGroupTypeV2)!=null?d("WAWebE2EProtoParserApi").parseInviteGrpType(b==null?void 0:b.inviteLinkGroupTypeV2):a.inviteGrpType,font:e!=null?e:a.font});return{msgData:c,contextInfo:b==null?void 0:b.contextInfo}}g.isUrlExtendedTextMessage=a;g.parseExtendedTextMessageProto=b}),98);
__d("WAWebAddonCreateMsgProcessor",["WAWebAddonConstants"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{type:d("WAWebAddonConstants").AddonProcessorType.Regular})}function b(a){return babelHelpers["extends"]({},a,{type:d("WAWebAddonConstants").AddonProcessorType.DualEncrypted})}function c(a){return babelHelpers["extends"]({},a,{type:d("WAWebAddonConstants").AddonProcessorType.DualEncryptedWithMessageTraits})}g.createAddonMsgProcessor=a;g.createAddonMsgProcessorDualEncrypted=b;g.createAddonMessageProcessorDualEncryptedWithMessageTraits=c}),98);
__d("WAWebAddonCommentMsgProcessor",["Promise","WAWebAddonConstants","WAWebAddonCreateMsgProcessor","WAWebApiChat","WAWebBackendApi","WAWebCommentParseWebMsgInfoComment","WAWebCommentUtils","WAWebCommunityGatingUtils","WAWebDBCommentMessageSerialization","WAWebLastAddOnDBSerialization","WAWebMsgType","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=d("WAWebAddonCreateMsgProcessor").createAddonMessageProcessorDualEncryptedWithMessageTraits({isEnabled:function(){return d("WAWebCommunityGatingUtils").isCommentMessageReceiverEnabled()},convert:{fromHistorySyncMsg:function(a){if(d("WAWebCommunityGatingUtils").isCommentMessageHistorySyncReceiverEnabled()){a=d("WAWebCommentParseWebMsgInfoComment").parseWebMsgInfoComment(a);return(h||(h=b("Promise"))).resolve(a)}return(h||(h=b("Promise"))).resolve([])},toDualEncryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.CommentEncrypted?a:d("WAWebCommentUtils").commentMsgDataToEncCommentMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}(),toDualDecryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.CommentDecrypted?a:d("WAWebCommentUtils").encCommentMsgDataToCommentMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}()},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebBackendApi").frontendSendAndReceive("upsertCommentModelCollection",{comments:a.add,commentsToRemove:a.remove})});function c(b){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.parents;var c=[];for(a of a)if(a.kind===d("WAWebMsgType").MsgKind.CommentEncrypted){var e=(yield i.convert.toDualDecryptedMsgData(a,b.getForAddon(a)));c.push(e)}else c.push(a);return c});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.processMode,e=b.parents,f=b.existingPlaceholderKeys;if(c===d("WAWebAddonConstants").AddonProcessMode.SendRetry)return;yield d("WAWebShouldUpdateLastAddOnPreview").filterAndUpdateChatPreviews(a.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromCommentRowType(d("WAWebDBCommentMessageSerialization").dbRowFromCommentMessage(a))}));if(c===d("WAWebAddonConstants").AddonProcessMode.HistorySync)return;b=f.size>0?a.filter(function(a){return!f.has(a.id.toString())}):a;yield d("WAWebCommentUtils").updateReplyCount(b,e,[]);c=(yield d("WAWebCommentUtils").genChatIdToLastTimestamp(a));yield d("WAWebApiChat").latestChatBulkUpdates(c);d("WAWebBackendApi").frontendFireAndForget("updateChatToLatest",{chatIdToLatestUpdates:c})});function c(b,c){return a.apply(this,arguments)}return c}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebBackendApi").frontendFireAndForget("handleCommentNotification",{comments:a.add,revokes:a.remove})});function c(b){return a.apply(this,arguments)}return c}()});a=i;g["default"]=a}),98);
__d("WAWebCommentParseWebMsgInfoComment",["WALogger","WALongInt","WANullthrows","WAWebAddOnParseWebMsgInfo","WAWebCommentMsgDataConversion","WAWebMsgKeyUtils","WAWebMsgType","WAWebParseWebMessageInfoApi"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[parseWebMsgInfoComment] failed to parse comment revoke "," with error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[parseWebMsgInfoComment] has revoke stub ",", parameters ",""]);i=function(){return a};return a}function j(a){var b,e=a.webMsgInfo;a=a.isFromCag;b=e==null?void 0:(b=e.message)==null?void 0:b.commentMessage;var f=e==null?void 0:e.commentMetadata,g=[];if(e==null||(f==null?void 0:f.commentParentKey)==null)return g;a=c("WANullthrows")(d("WAWebAddOnParseWebMsgInfo").buildAddonMsgKey(e.key,a,e.participant));a=a.msgKey;var k=c("WANullthrows")(e.messageTimestamp),l;(b==null?void 0:b.message)!=null&&(l=d("WAWebCommentMsgDataConversion").extractCommentTextFromMessage(b.message));if(l==null){f=c("WANullthrows")(d("WAWebParseWebMessageInfoApi").buildMsgKey(e,c("WANullthrows")(f==null?void 0:f.commentParentKey)));f=f.msgKey;try{var m=d("WAWebParseWebMessageInfoApi").parseMsgStubProto(e,j);f=babelHelpers["extends"]({id:a,parentMsgKey:f},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{revokeAddonType:d("WAWebMsgType").MSG_TYPE.COMMENT,protocolMessageKey:m.protocolMessageKey,subtype:m.subtype,kind:d("WAWebMsgType").MsgKind.RevokedAddon,revokeTimestamp:d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(e.revokeMessageTimestamp)),type:d("WAWebMsgType").MSG_TYPE.REVOKED,t:d("WALongInt").numberOrThrowIfTooLarge(k)});g.push(f)}catch(a){d("WALogger").LOG(i(),Boolean(e.messageStubType),(m=e.messageStubParameters)==null?void 0:m.length);d("WALogger").ERROR(h(),e.key.id,a).sendLogs("parse-comment-revoke",{sampling:.01})}}else if(b!=null){f=c("WANullthrows")(b.targetMessageKey);m=c("WANullthrows")(d("WAWebParseWebMessageInfoApi").buildMsgKey(e,f));b=m.msgKey;g.push(babelHelpers["extends"]({id:a,parentMsgKey:b},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{body:l,type:d("WAWebMsgType").MSG_TYPE.COMMENT,read:!0,kind:d("WAWebMsgType").MsgKind.CommentDecrypted,t:d("WALongInt").numberOrThrowIfTooLarge(k)}))}return g}g.parseWebMsgInfoComment=j}),98);
__d("WAWebParseEncCommentMessageProto",["WAWebCommentMessageValidationError","WAWebCommunityGatingUtils","WAWebE2EProtoUtils","WAWebMsgType","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.encCommentMessage;if(b==null)return;if(!d("WAWebCommunityGatingUtils").isCommentMessageReceiverEnabled())return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.COMMENT}),contextInfo:null};var c=b.encIv,e=b.encPayload;b=b.targetMessageKey;if(c==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);b=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b,a);if(b==null)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.MISSING_COMMENT_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(c.byteLength!==12)throw new(d("WAWebCommentMessageValidationError").CommentMessageValidationError)(d("WAWebCommentMessageValidationError").CommentMessageValidationErrorCode.INVALID_COMMENT_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.COMMENT,kind:d("WAWebMsgType").MsgKind.CommentEncrypted,addonEncrypted:!0,encIv:c,encPayload:e,targetMessageKey:b}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebGenerateDocumentReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebMediaCleanFileName",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["cleanIncomingFilename:extension: ",""]);h=function(){return a};return a}function i(a){if(!a)return a;a=a.replace(/[\u202a-\u202e\u2066-\u2069\u200E\u200F\u061C]/g,"\ufffd");var b=a.split(".");if(b.length===1)return a;for(var c=b.length-1;c>0;c--){var d=b[c].trim();if(d.length)return b.slice(0,c).join(".")+"."+d}return a}function a(a){if(a==null)return a;var b=i(a);if(a!==b&&b){a=["bat","exe","cmd","com","lnk","pif","scr","vb","vbe","vbs","wsh","js","ps1","hta","sh","csh","msi","app","scpt","applescript","reg","vbe","wsf","sct"];var c=b.split(".");c=c.length>=2&&c.pop();a.includes(c)&&d("WALogger").LOG(h(),c||"").verbose()}return b}g.cleanFilename=i;g.cleanIncomingFilename=a}),98);
__d("WAWebServerPropConstants",[],(function(a,b,c,d,e,f){a=64;b=64;c=5e3;d=5;e=1500;f.MMS_VCARD_AUTODOWNLOAD_SIZE_KB=a;f.VCARD_AS_DOCUMENT_SIZE_KB=b;f.VCARD_MAX_SIZE_KB=c;f.MULTICAST_LIMIT_GLOBAL=d;f.PTT_PLAYBACK_SPEED_HIDE_DELAY=e}),66);
__d("WAWebParseDocumentMessageProto",["WALongInt","WATimeUtils","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMediaCleanFileName","WAWebMediaMessageGetValidatedProperties","WAWebMsgType","WAWebServerPropConstants"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.documentMessage;if(b==null)return;a=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,c,a,d("WAWebMsgType").MSG_TYPE.DOCUMENT);var e=a.mediaKey,f=a.fileSha256,g=a.fileEncSha256,h=a.fileLength;h=h===void 0?0:h;a=a.url;var i=d("WAWebMediaCleanFileName").cleanIncomingFilename(b.fileName||b.title),j=b.caption!=null&&b.caption!=="",k=j?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(b.caption):i;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.DOCUMENT,kind:d("WAWebMsgType").MsgKind.Document,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(a),directPath:b.directPath,mimetype:b.mimetype,filehash:d("WAWebE2EProtoParserApi").decodeBytes(f),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(g),size:h,pageCount:b.pageCount||0,mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(e),mediaKeyTimestamp:b.mediaKeyTimestamp!=null?d("WALongInt").numberOrThrowIfTooLarge(b.mediaKeyTimestamp):d("WATimeUtils").unixTime(),filename:i,isCaptionByUser:j,caption:k,body:d("WAWebE2EProtoParserApi").decodeBytes(b.jpegThumbnail)||"",isVcardOverMmsDocument:Boolean(b.contactVcard)&&h<=d("WAWebServerPropConstants").VCARD_MAX_SIZE_KB*1024,thumbnailDirectPath:b.thumbnailDirectPath,thumbnailSha256:d("WAWebE2EProtoParserApi").decodeBytes(b.thumbnailSha256),thumbnailEncSha256:d("WAWebE2EProtoParserApi").decodeBytes(b.thumbnailEncSha256),thumbnailHeight:b.thumbnailHeight,thumbnailWidth:b.thumbnailWidth});return{msgData:c,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebParseKeepInChatMessageProto",["WALongInt","WAWebE2EProtoUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.keepInChatMessage;if(b==null)return;var c=b.key,e=b.keepType;b=b.timestampMs;c=babelHelpers["extends"]({},a,{keptMessageKey:d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(c,a),type:d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT,kind:d("WAWebMsgType").MsgKind.KeepInChat,keepType:e,senderTimestampMs:d("WALongInt").maybeNumberOrThrowIfTooLarge(b)});return{msgData:c,contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseEphemeralSyncResponseMessageProto",["WALogger","WALongInt","WANullthrows","WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["EPHEMERAL_SYNC_RESPONSE msg does not contain all fields"]);h=function(){return a};return a}function a(a){var b=a.messageProtobuf,e=a.baseMessage;a=a.msgContext;b=b.protocolMessage;if(b==null||a!=="relay"||b.type!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE)return;a=b.ephemeralExpiration;var f=b.ephemeralSettingTimestamp,g=b.disappearingMode;if(a==null||f==null||g==null){d("WALogger").WARN(h()).devConsole({protocolMessage:b});return}var i;b.disappearingMode!=null&&(i=d("WAWebE2EProtoUtils").protoToDisappearingMode(b,b.disappearingMode));return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"ephemeral_sync_response",ephemeralDuration:a,ephemeralSettingTimestamp:d("WALongInt").numberOrThrowIfTooLarge(f),disappearingModeInitiator:c("WANullthrows")(d("WAWebE2EProtoUtils").protoToDisappearingModeInitiator(e,g)),disappearingModeTrigger:(b=i)==null?void 0:b.disappearingModeTrigger,disappearingModeInitiatedByMe:(a=i)==null?void 0:a.initiatedByMe}),contextInfo:null}}g["default"]=a}),98);
__d("WAArrayGroupBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Map();for(var d=0;d<a.length;d++){var e=b(a[d]),f=c.get(e);f==null?c.set(e,[a[d]]):f.push(a[d])}return Array.from(c.entries())}f.groupBy=a}),66);
__d("WAWebEventEditAddonMessageProcessor",["Promise","WAArrayGroupBy","WAWebAddonCreateMsgProcessor","WAWebDBProcessEditProtocolMsgs","WAWebEventsGatingUtils","WAWebGenerateEventEditSystemMessages","WAWebProcessEncryptedEventEditMsgs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;a=d("WAWebAddonCreateMsgProcessor").createAddonMsgProcessor({isEnabled:d("WAWebEventsGatingUtils").isEventsEditReceivingEnabled,convert:{fromHistorySyncMsg:function(){return(h||(h=b("Promise"))).resolve([])}},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.parents;a=(yield d("WAWebProcessEncryptedEventEditMsgs").processEncryptedEventEditMsgs(a,b));b=a.filter(function(a){return a.isLatest});yield d("WAWebDBProcessEditProtocolMsgs").updateMessageEditsLocally(a,b);if(d("WAWebEventsGatingUtils").isEventEditAndCancelSytemMessageEnabled()){a=d("WAArrayGroupBy").groupBy(b,function(a){return a.protocolMsg.id.remote.toString()});yield d("WAWebGenerateEventEditSystemMessages").generateEventEditSystemMessages(a)}return[]});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()});c=a;g["default"]=c}),98);
__d("WAWebCreateEncryptedEventResponseMsgData",["WANullthrows","WAWebAck","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebEventsValidationError","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebWamEnumE2eFailureReason","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=self.crypto.getRandomValues(new Uint8Array(12)),f={type:d("WAWebMsgType").MsgKind.EventResponseDecrypted,encode:{response:a.eventResponse,timestampMs:a.senderTimestampMs}},g=d("WAWebMsgGetters").getOriginalSender(b),h=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.EventResponseDecrypted,b);if(g==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);f=(yield d("WAWebAddonEncryption").encryptAddOn(f,{messageSecret:h,iv:e,stanzaId:b.id.id,originalMessageSender:g,addOnSender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a)))}));return babelHelpers["extends"]({id:a.id},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,kind:d("WAWebMsgType").MsgKind.EventResponseEncrypted,addonEncrypted:!0,t:Math.floor(a.senderTimestampMs/1e3),ack:(h=a.ack)!=null?h:d("WAWebAck").ACK.CLOCK,targetMessageKey:b.id,encPayload:f,encIv:e.buffer})});return h.apply(this,arguments)}g.createEncryptedEventResponseMsgData=a}),98);
__d("WAWebEventResponseMsgDataConversion",["WANullthrows","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b;return babelHelpers["extends"]({id:a.id},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,kind:d("WAWebMsgType").MsgKind.EventResponseDecrypted,parentMsgKey:a.parentMsgKey,eventResponse:c("WANullthrows")(a.responseProtobuf.response,"eventResponse"),senderTimestampMs:a.senderTimestampMs,t:(b=a.t)!=null?b:void 0,read:a.read,ack:(b=a.ack)!=null?b:void 0})}function b(a){var b;return babelHelpers["extends"]({id:a.id},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,kind:d("WAWebMsgType").MsgKind.EventResponseDecrypted,parentMsgKey:a.parentMsgKey,eventResponse:a.eventResponse,senderTimestampMs:a.senderTimestampMs,t:(b=a.t)!=null?b:void 0,read:a.read,ack:(b=a.ack)!=null?b:void 0})}function e(a){return{type:"event_response",msgKey:a.id.toString(),parentMsgKey:a.parentMsgKey.toString(),timestamp:a.senderTimestampMs,sender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a))).toString(),eventResponse:a.eventResponse}}g.protobufToEventResponseMsgData=a;g.eventResponseToEventResponseMsgData=b;g.eventResponseMsgDataToResponseData=e}),98);
__d("WAWebProcessEncryptedEventResponseMsgs",["Promise","WALogger","WALongInt","WANullthrows","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebEventResponseMsgDataConversion","WAWebEventsValidationError","WAWebMsgGetters","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","WAWebWamEnumE2eFailureReason","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing encrypted event response failed: ","\n",""],["Processing encrypted event response failed: ","\\n",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing encrypted event response failed: ",""]);j=function(){return a};return a}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=new Map();a.forEach(function(a){if(a.addonEncrypted){var b=c.getForAddon(a);f.set(a,b)}else e.push(a)});if(f.size===0)return e;a=(yield (h||(h=b("Promise"))).allSettled(Array.from(f.entries()).map(function(a){var b=a[0];a=a[1];return l(b,a)})));return e.concat(a.map(function(a){switch(a.status){case"fulfilled":return a.value;case"rejected":a=a.reason;if(a instanceof d("WAWebEventsValidationError").EventCreationValidationError||a instanceof d("WAWebEventsValidationError").EncryptedEventResponseValidationError){d("WALogger").ERROR(j(),a.code).sendLogs(a.code);return}d("WALogger").ERROR(i(),a.message,a.stack).sendLogs("unknown-error")}}).filter(Boolean))});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.encIv,f=a.encPayload,g=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.EventResponseEncrypted,b),h=d("WAWebMsgGetters").getOriginalSender(b),i=d("WAWebMsgGetters").getSender(a);if(i==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(h==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(f==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);f={type:d("WAWebMsgType").MsgKind.EventResponseEncrypted,encryptedAddOn:f};i=d("WAWebWidFactory").toUserWid(i);f=(yield d("WAWebAddonEncryption").decryptAddOn(f,{messageSecret:g,iv:e,stanzaId:b.id.id,originalMessageSender:h,addOnSender:i}));g=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").Message$EventResponseMessageSpec,f);return d("WAWebEventResponseMsgDataConversion").protobufToEventResponseMsgData({responseProtobuf:g,parentMsgKey:a.targetMessageKey,id:a.id,senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(g.timestampMs)),t:d("WAWebMsgGetters").getT(a),ack:(e=a.ack)!=null?e:null,read:d("WAWebUserPrefsMeUser").isMeAccount(i)})});return m.apply(this,arguments)}g.processEncryptedEventResponseMsgs=a;g.decryptEncryptedEventResponseMsg=l}),98);
__d("WAWebEventResponseAddonMessageProcessor",["WAWebAddonConstants","WAWebAddonCreateMsgProcessor","WAWebBackendApi","WAWebCreateEncryptedEventResponseMsgData","WAWebDBMarkFutureproofMessagesReparsed","WAWebEventResponseMsgDataConversion","WAWebEventsGatingUtils","WAWebEventsParseWebMsgInfoEventResponse","WAWebMsgType","WAWebPrepareEventResponsesToUpsert","WAWebProcessEncryptedEventResponseMsgs","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=d("WAWebAddonCreateMsgProcessor").createAddonMsgProcessorDualEncrypted({isEnabled:d("WAWebEventsGatingUtils").isEventsReceivingEnabled,convert:{fromHistorySyncMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebEventsParseWebMsgInfoEventResponse").parseWebMsgInfoEventResponses(a)});function c(b){return a.apply(this,arguments)}return c}(),toDualEncryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.EventResponseEncrypted?a:d("WAWebCreateEncryptedEventResponseMsgData").createEncryptedEventResponseMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}(),toDualDecryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.EventResponseDecrypted?a:d("WAWebProcessEncryptedEventResponseMsgs").decryptEncryptedEventResponseMsg(a,b)});function c(b,c){return a.apply(this,arguments)}return c}()},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebBackendApi").frontendSendAndReceive("upsertEventResponsesModelCollection",{eventResponses:a.add,eventResponsesToRemove:a.remove})});function c(b){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.parents;a=(yield d("WAWebProcessEncryptedEventResponseMsgs").processEncryptedEventResponseMsgs(a,b));b=(yield d("WAWebPrepareEventResponsesToUpsert").prepareEventResponsesToUpsert(a));return b});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.processMode;var c=a.map(d("WAWebEventResponseMsgDataConversion").eventResponseMsgDataToResponseData);yield d("WAWebShouldUpdateLastAddOnPreview").filterAndUpdateChatPreviews(c);if(b===d("WAWebAddonConstants").AddonProcessMode.HistorySync)return;b===d("WAWebAddonConstants").AddonProcessMode.OnlineReceive&&(yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a.map(function(a){return a.id.toString()})))});function c(b,c){return a.apply(this,arguments)}return c}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()});c=a;g["default"]=c}),98);
__d("WAWebEventEditDecryptedMsgDataConversion",["WALongInt","WANullthrows","WAWebE2EProtoUtils","WAWebEventsParseEventCreationMessageProto","WAWebEventsValidationError","WAWebMsgKeyUtils","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebProtobufsE2E.pb","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a,b){a=c("WANullthrows")(a.protocolMessage,"[Event][Edit] Missing protocol message");if(a.type!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_INVALID_PROTOCOL_MESSAGE_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.EDIT_TYPE_AND_PROTOCOL_MISMATCH);var e=d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(b),f=c("WANullthrows")(d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(a.key,e)),g=a.editedMessage;if(g==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_EDITED_MESSAGE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);a=d("WALongInt").maybeNumberOrThrowIfTooLarge(a.timestampMs);if(a==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_SENDER_TIMESTAMP,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);g=c("WANullthrows")(c("WAWebEventsParseEventCreationMessageProto")({messageProtobuf:babelHelpers["extends"]({},g,{messageContextInfo:{messageSecret:c("WANullthrows")(b.messageSecret).buffer}}),baseMessage:e,msgContext:"relay"}),"[Event][Edit] Failed to parse edited event fields");e=g.msgData;return babelHelpers["extends"]({},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Message),{id:b.id,t:Math.floor(c("WANullthrows")(a)/1e3),type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,subtype:"event_edit_decrypted",kind:d("WAWebMsgType").MsgKind.ProtocolEventEdit,latestEditSenderTimestampMs:a,latestEditMsgKey:b.id,protocolMessageKey:f,editMsgType:d("WAWebMsgType").MSG_TYPE.EVENT_CREATION,eventName:c("WANullthrows")(e==null?void 0:e.eventName),eventStartTime:c("WANullthrows")(e==null?void 0:e.eventStartTime),isEventCanceled:(g=e==null?void 0:e.isEventCanceled)!=null?g:!1,eventLocation:(a=e==null?void 0:e.eventLocation)!=null?a:void 0,eventDescription:(b=e==null?void 0:e.eventDescription)!=null?b:void 0,eventJoinLink:(f=e==null?void 0:e.eventJoinLink)!=null?f:void 0,eventEndTime:(g=e==null?void 0:e.eventEndTime)!=null?g:void 0})}g.protobufToEventEditDecryptedMsgData=a}),98);
__d("WAWebGenerateEventEditSystemMessages",["Promise","WANullthrows","WAWebBackendApi","WAWebDBProcessMessage","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a[0];a=a[1];var e=d("WAWebWidFactory").createWid(c);c=(yield (h||(h=b("Promise"))).all(a.map(function(a){var b=a.protocolMsg.latestEditSenderTimestampMs;if(b==null||d("WAWebMsgGetters").getIsFailed(a.protocolMsg))return;return j(e,b,a)}).filter(Boolean)));a=(yield d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:e,msgObjs:c,meta:{add:"after",isHistory:!1},processMessagesOrigin:"eventEditMessage"}));a&&(yield d("WAWebDBProcessMessage").storeMessages(c,e))});return function(b){return a.apply(this,arguments)}}()))});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f,g=e.editedMsgData,h=e.protocolMsg,i=d("WAWebUserPrefsMeUser").getMeUser(),j=c("WANullthrows")(d("WAWebMsgGetters").getSender(h));g={eventName:c("WANullthrows")(g==null?void 0:g.eventName),eventStartTime:c("WANullthrows")(g==null?void 0:g.eventStartTime),eventEndTime:g==null?void 0:g.eventEndTime,isEventCanceled:(f=g==null?void 0:g.isEventCanceled)!=null?f:!1,eventLocation:(f=g==null?void 0:g.eventLocation)!=null?f:void 0,eventDescription:(f=g==null?void 0:g.eventDescription)!=null?f:void 0,eventJoinLink:(f=g==null?void 0:g.eventJoinLink)!=null?f:void 0};return babelHelpers["extends"]({id:new(c("WAWebMsgKey"))({id:yield c("WAWebMsgKey").newId(),fromMe:d("WAWebUserPrefsMeUser").isMeAccount(j),remote:a,participant:j}),author:j,from:a,to:i,t:h.t,type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,subtype:"event_edit_decrypted",kind:d("WAWebMsgType").MsgKind.ProtocolEventEdit,editMsgType:d("WAWebMsgType").MSG_TYPE.EVENT_CREATION,latestEditMsgKey:h.latestEditMsgKey,latestEditSenderTimestampMs:b,protocolMessageKey:e.parentMsg.id},g)});return k.apply(this,arguments)}g.generateEventEditSystemMessages=a}),98);
__d("WAWebPrepareEventResponsesToUpsert",["WANullthrows","WAWebAddonDBTable","WAWebMaxPerGroup","WAWebMsgGetters","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return a.parentMsgKey.toString()+"-"+c("WANullthrows")(d("WAWebMsgGetters").getSender(a)).toString()}function i(a){return d("WAWebMaxPerGroup").maxPerGroup(a,function(a){return a.senderTimestampMs},h)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return[a.parentMsgKey,c("WANullthrows")(d("WAWebMsgGetters").getSender(a))]});a=i(a);b=(yield d("WAWebAddonDBTable").addonDBTable.bulkGetByParentAndSender(d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,b));var e=new Map();b.forEach(function(a){a.kind===d("WAWebMsgType").MsgKind.EventResponseDecrypted&&e.set(h(a),a)});var f=[];a.forEach(function(a){var b=e.get(h(a));if(b!=null&&b.senderTimestampMs>a.senderTimestampMs)return;var c=b!=null&&b.eventResponse===a.eventResponse;b=(b=b==null?void 0:b.read)!=null?b:!1;c=c&&b&&a.read!==b?babelHelpers["extends"]({},a,{read:!0}):a;f.push(c)});return f});return j.apply(this,arguments)}g.getNewestEventResponses=i;g.prepareEventResponsesToUpsert=a}),98);
__d("WAWebProcessEncryptedEventEditMsgs",["Promise","WALogger","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebAddonInfraError","WAWebDBProcessEditProtocolMsgs","WAWebEventEditDecryptedMsgDataConversion","WAWebEventsValidationError","WAWebLidMigrationUtils","WAWebMsgGetters","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebVerifyProtobufMsgObjectKeys","WAWebWamEnumE2eFailureReason","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing encrypted event edit failed: ","\n",""],["Processing encrypted event edit failed: ","\\n",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing encrypted event edit failed: ",""]);j=function(){return a};return a}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=new Map();a.forEach(function(a){if(a.kind!==d("WAWebMsgType").MsgKind.EventEditEncrypted)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.UnexpectedMsgType);var b=c.getForAddon(a);e.set(a,b)});if(e.size===0)return[];a=(yield (h||(h=b("Promise"))).allSettled(Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return l(b,a)})));return a.map(function(a){switch(a.status){case"fulfilled":return a.value;case"rejected":a=a.reason;if(a instanceof d("WAWebEventsValidationError").EventCreationValidationError||a instanceof d("WAWebEventsValidationError").EncryptedEventEditValidationError||a instanceof d("WAWebAddonEncryptionError").DualEncryptionValidationError){d("WALogger").ERROR(j(),a.code).sendLogs(a.code);return}d("WALogger").ERROR(i(),a.message,a.stack).sendLogs("event_edit_unknown_error")}}).filter(Boolean)});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.encIv,f=a.encPayload,g=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.EventEditEncrypted,b),h=d("WAWebMsgGetters").getOriginalSender(b),i=d("WAWebMsgGetters").getSender(a);if(i==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(h==null)throw new(d("WAWebEventsValidationError").EventCreationValidationError)(d("WAWebEventsValidationError").EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(f==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(!c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").toCommonAddressingMode(i,h)))throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_PARENT_SENDER_MISMATCH,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);f={type:d("WAWebMsgType").MsgKind.EventEditEncrypted,encryptedAddOn:f};i=d("WAWebWidFactory").toUserWid(i);f=(yield d("WAWebAddonEncryption").decryptAddOn(f,{messageSecret:g,iv:e,stanzaId:b.id.id,originalMessageSender:h,addOnSender:i}));g=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,f);h=d("WAWebEventEditDecryptedMsgDataConversion").protobufToEventEditDecryptedMsgData((e=d("WAWebVerifyProtobufMsgObjectKeys").getUnwrappedProtobufMessage(g))!=null?e:g,a);return d("WAWebDBProcessEditProtocolMsgs").generateMessageEdit(b,h)});return m.apply(this,arguments)}g.processEncryptedEventEditMsgs=a}),98);
__d("WAWebEventsParseWebMsgInfoEventResponse",["WALogger","WALongInt","WANullthrows","WAWebAddOnParseWebMsgInfo","WAWebEventResponseMsgDataConversion","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMsgInfoEventResponses failed with error "," "," and stack ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Failed to parse eventResponse with error ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.webMsgInfo,e=a.parsedWebMsgInfo,f=a.isFromCag;try{if(!(b==null?void 0:b.eventResponses)||!e||e.type!==d("WAWebMsgType").MSG_TYPE.EVENT_CREATION)return[];var g=e;return b.eventResponses.map(function(a){try{var b,e=(b=c("WANullthrows"))(a.eventResponseMessageKey,"eventResponseMessageKey"),h=b(a.eventResponseMessage,"eventResponseMessage");e=b(d("WAWebAddOnParseWebMsgInfo").buildAddonMsgKey(e,f));e=e.msgKey;return d("WAWebEventResponseMsgDataConversion").protobufToEventResponseMsgData({responseProtobuf:h,id:e,parentMsgKey:g.id,senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(b(h.timestampMs,"senderTimestampMs")),t:d("WAWebAddOnParseWebMsgInfo").getAddonServerTimestamp(a.timestampMs),ack:null,read:a.unread!==!0})}catch(a){d("WALogger").ERROR(i(),a.message).devConsole(a).sendLogs("parseWebMsgInfoEventResponses-responses-parse-error");return null}}).filter(Boolean)}catch(a){d("WALogger").ERROR(h(),a==null?void 0:a.name,a==null?void 0:a.code,a==null?void 0:a.stack).sendLogs("parseWebMsgInfoEventResponses-error");return[]}});return j.apply(this,arguments)}g.parseWebMsgInfoEventResponses=a}),98);
__d("WAWebEventsParseEventEditEncryptedMessageProto",["WAWebE2EProtoUtils","WAWebEventsGatingUtils","WAWebEventsValidationError","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a.msgContext;a=b.secretEncryptedMessage;b=b.messageContextInfo;if(a==null||a.secretEncType!==d("WAWebProtobufsE2E.pb").Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return;if(!d("WAWebEventsGatingUtils").isEventsEditReceivingEnabled())return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED}),contextInfo:null};var e=a.targetMessageKey,f=a.encPayload;a=a.encIv;e=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(e,c);if(e==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_TARGET_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(a==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(a.byteLength!==12)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_INVALID_SIZE_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(f==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if((b==null?void 0:b.messageSecret)==null)throw new(d("WAWebEventsValidationError").EncryptedEventEditValidationError)(d("WAWebEventsValidationError").EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_MESSAGE_SECRET,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED,kind:d("WAWebMsgType").MsgKind.EventEditEncrypted,encIv:a,encPayload:f,targetMessageKey:e}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebEventsParseEventResponseMessageProto",["WAWebE2EProtoUtils","WAWebEventsGatingUtils","WAWebEventsValidationError","WAWebMsgType","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.encEventResponseMessage;if(b==null)return null;if(!d("WAWebEventsGatingUtils").isEventsReceivingEnabled())return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE}),contextInfo:null};var c=b.eventCreationMessageKey,e=b.encPayload;b=b.encIv;c=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(c,a);if(c==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(b==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(b.byteLength!==12)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_INVALID_SIZE_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebEventsValidationError").EncryptedEventResponseValidationError)(d("WAWebEventsValidationError").EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE,kind:d("WAWebMsgType").MsgKind.EventResponseEncrypted,addonEncrypted:!0,encIv:b,encPayload:e,targetMessageKey:c}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebGenerateInteractiveResponseReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebParseButtonsResponseMessageProto",["WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.buttonsResponseMessage;if(b==null)return;if(b.type===d("WAWebProtobufsE2E.pb").Message$ButtonsResponseMessage$Type.DISPLAY_TEXT){var c=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.BUTTONS_RESPONSE,kind:d("WAWebMsgType").MsgKind.ButtonsResponse,selectedButtonId:b.selectedButtonId,body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(b.selectedDisplayText)});return{msgData:c,contextInfo:b.contextInfo}}return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown}),contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebParseHsmMessageProto",["WAWebE2EProtoUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.highlyStructuredMessage;if(b==null)return;b=(b=b.hydratedHsm)==null?void 0:b.hydratedTemplate;return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.HSM,kind:d("WAWebMsgType").MsgKind.Hsm,body:b?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(b.hydratedContentText):a.body}),contextInfo:void 0}}g["default"]=a}),98);
__d("WAWebParseInteractiveMessageProto",["WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebHandleMsgError","WAWebInteractiveMessageHeaderMediaType","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgKey","WAWebMsgType","WAWebNativeFlowValidation","WAWebParseDocumentMessageProto","WAWebParseImageMessageProto","WAWebParseVideoMessageProto","WAWebWamEnumE2eFailureReason","filterNulls"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage,f=a.bizInfo,g=a.bizSource;a=a.msgContext;b=b.interactiveMessage;if(b==null)return;var j=d("WAWebE2EProtoUtils").getInteractiveMessageTypeForProto(b);if(!j||!d("WAWebE2EProtoUtils").isInteractiveMessageTypeEnabled(j))return k(e,b);var l=b.body,m=b.footer,n=d("WAWebE2EProtoUtils").getInteractiveMessageFieldNameForType(j);l={type:d("WAWebMsgType").MSG_TYPE.INTERACTIVE,kind:d("WAWebMsgType").MsgKind.Interactive,caption:(l=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(l==null?void 0:l.text))!=null?l:"",interactiveType:j,interactivePayload:b[n],pmCampaignId:f==null?void 0:f.campaignId,bizSource:g};if(!d("WAWebE2EProtoUtils").isSupportedInteractiveMessageVersion(j,b[n]))return k(e,b);n=null;var o=b.carouselMessage;if(o!=null){n=i(e,o,a,f,g);if(n==null)return k(e,b)}if(j===c("WAWebInteractiveMessageType").NATIVE_FLOW){o=c("WAWebInteractiveMessagesNativeFlowName").cast(d("WAWebE2EProtoUtils").getBizNativeFlowName({interactiveMessage:b}));l=babelHelpers["extends"]({},l,{nativeFlowName:o});if(!d("WAWebE2EProtoUtils").isValidNativeFlowName(o,f)||!d("WAWebNativeFlowValidation").isValidNativeFlowMessage(l,g,e==null?void 0:(j=e.id)==null?void 0:j.fromMe))return k(e,b)}o=b.header!=null?h(b.header,e,a):void 0;return{msgData:babelHelpers["extends"]({},e,(f=o==null?void 0:o.headerMessage)!=null?f:{},l,{interactiveHeader:o==null?void 0:o.interactiveHeader,footer:m?d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(m.text):e.footer,carouselCardsParsed:(g=n)!=null?g:void 0}),contextInfo:b.contextInfo}}function h(a,b,e){var f=function(){if(a.imageMessage){var f;f=(f=c("WAWebParseImageMessageProto")({messageProtobuf:{imageMessage:a.imageMessage},baseMessage:b,msgContext:e}))==null?void 0:f.msgData;if(f&&f.kind!==d("WAWebMsgType").MsgKind.Image)throw new(d("WAWebHandleMsgError").MessageValidationError)("parseInteractiveHeaderMessageProto: header imageMessage is not an ImageMsgData",d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);else return{headerMessage:f,mediaType:d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.IMAGE}}if(a.documentMessage){return{headerMessage:(f=c("WAWebParseDocumentMessageProto")({messageProtobuf:{documentMessage:a.documentMessage},baseMessage:b,msgContext:e}))==null?void 0:f.msgData,mediaType:d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.DOCUMENT}}if(a.videoMessage){return{headerMessage:(f=c("WAWebParseVideoMessageProto")({messageProtobuf:{videoMessage:a.videoMessage},baseMessage:b,msgContext:e}))==null?void 0:f.msgData,mediaType:d("WAWebInteractiveMessageHeaderMediaType").InteractiveMessageHeaderMediaType.VIDEO}}};f=a.hasMediaAttachment===!0?f():void 0;return{headerMessage:f==null?void 0:f.headerMessage,interactiveHeader:{title:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(a.title),subtitle:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(a.subtitle),thumbnail:d("WAWebE2EProtoParserApi").decodeBytes(a.jpegThumbnail),hasMediaAttachment:Boolean(a.hasMediaAttachment),mediaType:f==null?void 0:f.mediaType}}}function i(a,b,d,e,f){b=b.cards.map(function(b){return j(b,a,d,e,f)});b=c("filterNulls")(b);return b.length===0?null:b}function j(a,b,e,f,g){var i=a.body,j=a.header,k=d("WAWebE2EProtoUtils").getInteractiveMessageTypeForProto(a);if(!k||!d("WAWebE2EProtoUtils").isInteractiveMessageTypeEnabled(k))return null;i=babelHelpers["extends"]({},j,{type:d("WAWebMsgType").MSG_TYPE.INTERACTIVE,kind:d("WAWebMsgType").MsgKind.Interactive,caption:(i=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(i==null?void 0:i.text))!=null?i:"",interactiveType:k,interactivePayload:a.nativeFlowMessage,pmCampaignId:f==null?void 0:f.campaignId,bizSource:g});k=j!=null?h(j,b,e):void 0;a=k==null?void 0:k.headerMessage;if(k==null||a==null)return null;f=babelHelpers["extends"]({},k.interactiveHeader,{title:null,subtitle:null});g=new(c("WAWebMsgKey"))({fromMe:a.id.fromMe,remote:a.id.remote,participant:a.id.participant,id:c("WAWebMsgKey").newId_DEPRECATED()});if(a.type===d("WAWebMsgType").MSG_TYPE.VIDEO)return babelHelpers["extends"]({},a,i,{id:g,interactiveHeader:f,footer:null,isCarouselCard:!0,parentMsgId:b.id.clone()});if(a.type===d("WAWebMsgType").MSG_TYPE.IMAGE)return babelHelpers["extends"]({},a,i,{id:g,interactiveHeader:f,footer:null,isCarouselCard:!0,parentMsgId:b.id.clone()})}function k(a,b){return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebParseInteractiveResponseMessageProto",["WAWebBizGatingUtils","WAWebE2EProtoUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.bizInfo;b=b.interactiveResponseMessage;if(b==null)return;var e=d("WAWebE2EProtoUtils").getInteractiveResponseMessageTypeForProto(b);if(!d("WAWebBizGatingUtils").interactiveNativeFlowResponseMessagesEnabled()||!e||!d("WAWebE2EProtoUtils").isInteractiveResponseMessageTypeEnabled(e))return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo};try{var f;return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.INTERACTIVE_RESPONSE,kind:d("WAWebMsgType").MsgKind.InteractiveResponse,body:(f=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis((f=b.body)==null?void 0:f.text))!=null?f:"",interactivePayload:d("WAWebE2EProtoUtils").getInteractiveResponsePayload(e,b,a)}),contextInfo:b.contextInfo}}catch(a){return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo}}}g["default"]=a}),98);
__d("WAWebParseListResponseMessageProto",["WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.listResponseMessage;if(b==null)return;if(b.listType===d("WAWebProtobufsE2E.pb").Message$ListResponseMessage$ListType.SINGLE_SELECT){var c=babelHelpers["extends"]({},b,{contextInfo:void 0}),e=b.title||"";b.description!=null&&b.description!==""&&(e+="\n"+b.description);a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.LIST_RESPONSE,kind:d("WAWebMsgType").MsgKind.ListResponse,listResponse:c,body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(e)});return{msgData:a,contextInfo:b.contextInfo}}}g["default"]=a}),98);
__d("WAWebParseNativeFlowButtonsMessageProto",["WAWebButtonsMessageProtoUtils","WAWebE2EProtoUtils","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType","WAWebNativeFlowValidation","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage,f=a.bizInfo,g=a.bizSource;a=a.msgContext;b=b.buttonsMessage;if(b==null)return;var h=b.buttons;h=h===void 0?[]:h;var i=b.headerType,j=c("WAWebInteractiveMessagesNativeFlowName").cast(d("WAWebE2EProtoUtils").getBizNativeFlowName({buttonsMessage:b}));if(j==null&&(f==null?void 0:f.nativeFlowName)==null)return;if(!d("WAWebE2EProtoUtils").shouldParseNFM(j,f)||d("WAWebE2EProtoUtils").hasUnsupportedButtons(h))return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo};if(i===d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.UNKNOWN||!new Set(d("WAWebProtobufsE2E.pb").Message$ButtonsMessage$HeaderType.members()).has(i))return{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:void 0}),contextInfo:b.contextInfo};f=d("WAWebButtonsMessageProtoUtils").parseButtonsMessageProto({buttonsMessage:b,baseMessage:e,msgContext:a});if(j==null)return;i=babelHelpers["extends"]({},f,{type:d("WAWebMsgType").MSG_TYPE.NATIVE_FLOW,kind:d("WAWebMsgType").MsgKind.NativeFlow,nativeFlowName:c("WAWebInteractiveMessagesNativeFlowName").cast(j),nativeFlowButtons:h});return!i.nativeFlowName||!d("WAWebNativeFlowValidation").isValidNativeFlowMessage(i,g)?{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b.contextInfo}:{msgData:i,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebParseTemplateButtonReplyMessageProto",["WAWebE2EProtoUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.templateButtonReplyMessage;if(b==null)return;a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.TEMPLATE_BUTTON_REPLY,kind:d("WAWebMsgType").MsgKind.TemplateButtonReply,body:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(b.selectedDisplayText),selectedIndex:b.selectedIndex,selectedId:b.selectedId,selectedCarouselCardIndex:b.selectedCarouselCardIndex});return{msgData:a,contextInfo:b.contextInfo}}g["default"]=a}),98);
__d("WAWebParseLocationMessageProto",["WALongInt","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMsgType"],(function(a,b,c,d,e,f,g){function h(a,b){var c;c=((c=a.name)!=null?c:"")||((c=a.address)!=null?c:"");a.name!=null&&a.name!==""&&a.address!=null&&a.address!==""&&(c=a.name+"\n"+a.address);var e=a.degreesLatitude!==void 0?a.degreesLatitude:void 0,f=a.degreesLongitude!==void 0?a.degreesLongitude:void 0;b=babelHelpers["extends"]({},b,{type:d("WAWebMsgType").MSG_TYPE.LOCATION,kind:d("WAWebMsgType").MsgKind.Location,loc:c,lat:e,lng:f,body:d("WAWebE2EProtoParserApi").decodeBytes(a.jpegThumbnail)||"",clientUrl:a.url});return{msgData:b,contextInfo:a.contextInfo}}function i(a,b,c){var e={};c&&(e={finalLat:c.degreesLatitude,finalLng:c.degreesLongitude,finalThumbnail:d("WAWebE2EProtoParserApi").decodeBytes(c.jpegThumbnail)||"",finalAccuracy:c.accuracyInMeters,finalSpeed:c.speedInMps,finalDegrees:c.degreesClockwiseFromMagneticNorth,finalTimeOffset:c.timeOffset});c=babelHelpers["extends"]({},b,e,{type:d("WAWebMsgType").MSG_TYPE.LOCATION,kind:d("WAWebMsgType").MsgKind.LocationLive,isLive:!0,lat:a.degreesLatitude,lng:a.degreesLongitude,body:d("WAWebE2EProtoParserApi").decodeBytes(a.jpegThumbnail)||"",accuracy:a.accuracyInMeters,speed:a.speedInMps,degrees:a.degreesClockwiseFromMagneticNorth,comment:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(a.caption),sequence:d("WALongInt").maybeNumberOrThrowIfTooLarge(a.sequenceNumber)});return{msgData:c,contextInfo:a.contextInfo}}function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.finalLocation;var d=b.locationMessage;b=b.liveLocationMessage;var e=null;d!=null&&(e=h(d,c));b!=null&&(e=i(b,c,a));return e}g["default"]=a}),98);
__d("WAWebAssociationProcessorConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({Regular:"Regular",WithDetachedMessages:"WithDetachedMessages"});f.AssociationProcessorType=a}),66);
__d("WAWebCreateAssociationProcessor",["WAWebAssociationProcessorConstants"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{processorType:d("WAWebAssociationProcessorConstants").AssociationProcessorType.Regular})}function b(a){return babelHelpers["extends"]({},a,{processorType:d("WAWebAssociationProcessorConstants").AssociationProcessorType.WithDetachedMessages})}g.createAssociationMsgProcessor=a;g.createAssociationMsgProcessorWithDetachedMessages=b}),98);
__d("WAWebAlbumAssociationProcessor",["WAWebCreateAssociationProcessor","WAWebMessageAssociation.flow","WAWebViewModeUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebCreateAssociationProcessor").createAssociationMsgProcessorWithDetachedMessages({type:d("WAWebMessageAssociation.flow").MessageAssociationType.MEDIA_ALBUM,viewMode:d("WAWebViewModeUtils").ViewModeType.MEDIA_ALBUM});b=a;g["default"]=b}),98);
__d("WAWebAssociationProcessor",["WAWebAlbumAssociationProcessor"],(function(a,b,c,d,e,f,g){var h=[c("WAWebAlbumAssociationProcessor")];function a(a){var b=a.associationType;return(a=h.find(function(a){return a.type===b}))!=null?a:null}function b(a){var b;return(b=h.find(function(b){return b.type===a}))!=null?b:null}g.getAssociationProcessor=a;g.getAssociationProcessorByAssociationType=b}),98);
__d("WAWebDBGetAssociatedMsgsByParentMsgKey",["WAWebSchemaMessageAssociation"],(function(a,b,c,d,e,f,g){function a(a){return h([a])}function h(a){return d("WAWebSchemaMessageAssociation").getMessageAssociationTable().anyOf(["parentMsgKey"],a.map(String))}g.getMessagesByParentMsgKey=a;g.bulkGetMessagesByParentMsgKey=h}),98);
__d("WAWebDBProcessAssociatedDetachedMessagesForNewMsg",["WALogger","WAWebAssociationProcessor","WAWebAssociationProcessorConstants","WAWebDBBulkUpdateViewMode","WAWebDBGetAssociatedMsgsByParentMsgKey","WAWebMessageAssociationGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAssociatedDetachedMsgsForNewMsg: updated view mode for "," messages"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAssociatedDetachedMsgsForNewMsg: association table is not in sync with the message table"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAssociatedDetachedMsgsForNewMsg: found detached associated messages"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled())return;a=(yield d("WAWebDBGetAssociatedMsgsByParentMsgKey").getMessagesByParentMsgKey(a.id));a.length&&d("WALogger").LOG(j()).devConsole({detachedMessages:a});var b=new Map();a.map(function(a){var c=d("WAWebAssociationProcessor").getAssociationProcessorByAssociationType(a.associationType),e=(c==null?void 0:c.processorType)===d("WAWebAssociationProcessorConstants").AssociationProcessorType.WithDetachedMessages;c&&e&&b.set(a.msgKey,c.viewMode)});var c=(yield d("WAWebDBBulkUpdateViewMode").bulkUpdateViewMode(b));c.length!==a.length&&d("WALogger").WARN(i()).sendLogs("association-table-not-in-sync-with-message-table");d("WALogger").DEV(h(),b.size).devConsole(c)});return k.apply(this,arguments)}g.processAssociatedDetachedMsgsForNewMsg=a}),98);
__d("WAWebProcessMessageAssociationMessages",["WALogger","WAWebAddonProcessMsgsUtils","WAWebAddonSortUtils","WAWebAssociationProcessor","WAWebAssociationProcessorConstants","WAWebMessageAssociationGatingUtils","WAWebMessageAssociationValidation","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["classifyAssociatedMsgs: processor not found for ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled())return;var b=(yield d("WAWebAddonProcessMsgsUtils").queryParentMsgs(a)),c=b[0];b=b[1];b=d("WAWebAddonSortUtils").collectValidAndOrphans(b,c);c=b.nonOrphans;b=b.orphans;a=c.length+b.length===a.length;if(!a)throw new(d("WAWebMessageAssociationValidation").MessageAssociationInfraError)(d("WAWebMessageAssociationValidation").MessageAssociationInfraErrorCode.MESSAGE_ASSOCIATIONS_MISMATCH);var e=[],f=[];b.forEach(function(a){var b=d("WAWebAssociationProcessor").getAssociationProcessor(a);b||d("WALogger").ERROR(h(),a.id.toString());(b==null?void 0:b.processorType)===d("WAWebAssociationProcessorConstants").AssociationProcessorType.WithDetachedMessages?f.push(a):e.push(a)});a=f.map(function(a){return babelHelpers["extends"]({},a,{viewMode:void 0})});return{orphanAssociatedMsgs:e,validAssociatedMsgs:[].concat(c,a),detachedAssociatedMsgs:a}});return i.apply(this,arguments)}g.classifyAssociatedMsgs=a}),98);
__d("WAWebMessageEditValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_PROTOCOL_KEY:"missing_protocol_key",MISSING_EDITED_MESSAGE:"missing_edited_message"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="MessageEditValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.MessageEditValidationErrorCode=a;g.MessageEditValidationError=c}),98);
__d("WAWebParseHistorySyncProtocolMessageEditProto",["WALogger","WALongInt","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebMessageEditGatingUtils","WAWebMessageEditValidationError","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseHistorySyncEditedMessageProto: error:",", stack: ",""]);h=function(){return a};return a}function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.protocolMessage;if(b==null||(b==null?void 0:b.type)!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT)return;if(a!=="history"&&a!=="history_quoted")return;try{if(!d("WAWebMessageEditGatingUtils").receiveTextEditEnabled())return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"message_edit",futureproofType:d("WAWebMsgType").MSG_TYPE.PROTOCOL,futureproofSubtype:"message_edit"}),contextInfo:null};c=babelHelpers["extends"]({},c,{latestEditSenderTimestampMs:d("WALongInt").maybeNumberOrThrowIfTooLarge(b.timestampMs),latestEditMsgKey:c.id});var e=b.editedMessage;if(e==null)throw new(d("WAWebMessageEditValidationError").MessageEditValidationError)(d("WAWebMessageEditValidationError").MessageEditValidationErrorCode.MISSING_EDITED_MESSAGE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);b=b.key;if(b==null)throw new(d("WAWebMessageEditValidationError").MessageEditValidationError)(d("WAWebMessageEditValidationError").MessageEditValidationErrorCode.MISSING_PROTOCOL_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);Object.assign(c,d("WAWebE2EProtoParser").parseMsgProto(e,c,a));c.id=d("WAWebE2EProtoUtils").protobufToMsgKey(b,c.author);return{msgData:c,contextInfo:null}}catch(a){d("WALogger").WARN(h(),a==null?void 0:a.name,a==null?void 0:a.stack).tags("messaging").sendLogs("parseHistorySyncEditedMessageProto: EditParseError");throw a}}g["default"]=a}),98);
__d("WAWebParseProtocolMessageEditProto",["WALogger","WALongInt","WANullthrows","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebFutureproofingEdit","WAWebMessageEditGatingUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseProtocolMessageEditProto: error:",", stack: ",""]);h=function(){return a};return a}function a(a){var b=a.messageProtobuf,c=a.baseMessage;a=a.msgContext;b=b.protocolMessage;if(b==null||(b==null?void 0:b.type)!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.MESSAGE_EDIT)return;if(a!=="relay"&&a!=="outgoing")return;try{a=(a=i(c,b))!=null?a:j(c,b);return!a?null:a}catch(a){d("WALogger").WARN(h(),a==null?void 0:a.name,a==null?void 0:a.stack).tags("messaging").sendLogs("parseProtocolMessageEditProto: EditParseError");throw a}}function i(a,b){var e;e=(e=(e=b.editedMessage)==null?void 0:(e=e.groupMentionedMessage)==null?void 0:e.message)!=null?e:b.editedMessage;var f=Boolean(e==null?void 0:e.conversation)||Boolean(e==null?void 0:e.extendedTextMessage);if(!f)return null;if(!d("WAWebMessageEditGatingUtils").receiveTextEditEnabled())return{msgData:d("WAWebFutureproofingEdit").futureproofEdit(a),contextInfo:null};f=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b.key,a);e=babelHelpers["extends"]({},d("WAWebE2EProtoParser").parseMsgProto(c("WANullthrows")(e),a),{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"message_edit",editMsgType:d("WAWebMsgType").MSG_TYPE.CHAT,latestEditSenderTimestampMs:d("WALongInt").maybeNumberOrThrowIfTooLarge(b.timestampMs),latestEditMsgKey:a.id,protocolMessageKey:f});return{msgData:e,contextInfo:null}}function j(a,b){var c;c=(c=(c=b.editedMessage)==null?void 0:(c=c.groupMentionedMessage)==null?void 0:c.message)!=null?c:b.editedMessage;var e,f,g;if(c==null?void 0:c.imageMessage)e=d("WAWebMsgType").MSG_TYPE.IMAGE,f=c.imageMessage.caption,g=c.imageMessage.contextInfo;else if(c==null?void 0:c.videoMessage)e=d("WAWebMsgType").MSG_TYPE.VIDEO,f=c.videoMessage.caption,g=c.videoMessage.contextInfo;else if(c==null?void 0:c.documentMessage)e=d("WAWebMsgType").MSG_TYPE.DOCUMENT,f=c.documentMessage.caption,g=c.documentMessage.contextInfo;else if(c==null?void 0:c.documentWithCaptionMessage){var h;e=d("WAWebMsgType").MSG_TYPE.DOCUMENT;f=(h=c.documentWithCaptionMessage)==null?void 0:(h=h.message)==null?void 0:(h=h.documentMessage)==null?void 0:h.caption;g=(h=c.documentWithCaptionMessage)==null?void 0:(c=h.message)==null?void 0:(h=c.documentMessage)==null?void 0:h.contextInfo}if(!e||f===""||f==null)return null;if(!d("WAWebMessageEditGatingUtils").receiveCaptionEditEnabled())return{msgData:d("WAWebFutureproofingEdit").futureproofEdit(a),contextInfo:null};c=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"message_edit",editMsgType:e,caption:f,latestEditSenderTimestampMs:d("WALongInt").maybeNumberOrThrowIfTooLarge(b.timestampMs),latestEditMsgKey:a.id,protocolMessageKey:d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b.key,a)});return{msgData:c,contextInfo:g}}g["default"]=a}),98);
__d("WAWebDBStoreNewsletterEncryptedMsgs",["WALogger","WAPromiseMap","WAWebDBStoreMessage","WAWebDBStoreMsgsUtils","WAWebModelStorageUtils","WAWebMsgKey","WAWebNewsletterDBUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter-store] Failed to store messages"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][storage] serverId is missing from message"]);i=function(){return a};return a}function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["message","chat"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e=e[0];var f=(yield d("WAWebDBStoreMsgsUtils").getLastRowId(e)),g=(yield d("WAPromiseMap").promiseMap(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e,g=a[0];a=a[1];e=(e=g.serverId)!=null?e:yield d("WAWebNewsletterDBUtils").getTemporaryServerId(g.to);if(e==null){d("WALogger").ERROR(i()).tags("newsletter").devConsole(g).sendLogs("newsletter-missing-serverId");return null}var h=c("WAWebMsgKey").fromString(g.id),j=d("WAWebDBStoreMessage").isPendingUnreadReceipt(h,g);g=d("WAWebDBStoreMessage").addMsgMetadataToMsgRow({msg:g,chatId:h.remote.toString(),hasLink:a,inChatMsgId:e,rowId:f+b+1,pendingReadReceipt:j});delete g.serverId;return g});return function(b,c){return a.apply(this,arguments)}}())).filter(Boolean);try{yield e.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(g)}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a)}});return function(a){return e.apply(this,arguments)}}())}g.storeEncryptedNewsletterMessages=a}),98);
__d("WAWebNewsletterDBConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Subscriber:0,Admin:1,Guest:2,Owner:3});f.NewsletterDBMembership=a}),66);
__d("WAWebNewsletterDBUtils",["WATimeUtils","WAWebApiChat","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebDBMsgUtils","WAWebJidToWid","WAWebMsgKey","WAWebMsgType","WAWebNewsletterDBConstants","WAWebSchemaMessage","WAWebSchemaNewsletterMetadata","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield d("WAWebApiChat").getChatRecord(d("WAWebJidToWid").newsletterJidToWid(a)))!=null});return h.apply(this,arguments)}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().get(a));return a==null||a.membershipType===d("WAWebNewsletterDBConstants").NewsletterDBMembership.Guest});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield i(a));return!a});return k.apply(this,arguments)}var l=Number.MAX_SAFE_INTEGER-1e4;function f(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("WAWebDBMessageUtils").craftInternalId(b,a);a=(yield d("WAWebSchemaMessage").getMessageTable().anyOf(["internalId"],[b]));b=a[0];return b==null?null:d("WAWebDBMessageSerialization").messageFromDbRow(b)});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=new Map(),e=new Map(a.map(function(a){return[d("WAWebDBMessageUtils").craftInternalId(b,a),a]}));a=(yield d("WAWebSchemaMessage").getMessageTable().anyOf(["internalId"],Array.from(e.keys())));a.forEach(function(a){if(a.internalId==null)return;var b=e.get(a.internalId);if(b==null)return;c.set(b,d("WAWebDBMessageSerialization").messageFromDbRow(a))});return c});return o.apply(this,arguments)}function p(a,b){b=b instanceof c("WAWebWid")?b:d("WAWebWidFactory").createWid(b);return new(c("WAWebMsgKey"))({remote:b,fromMe:!0,id:a.toString(10)})}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebDBMessageUtils").craftInternalId(a.toJid(),l);a=d("WAWebDBMessageUtils").endOfChat(a);b=(yield d("WAWebSchemaMessage").getMessageTable().between(["internalId"],b,a,{lowerInclusive:!0,upperInclusive:!1,limit:1,reverse:!0}));if(b.length===0)return l;if(b[0].internalId==null)return l;a=d("WAWebDBMessageUtils").getInChatMsgId(b[0].internalId);return Math.min(a+1,Number.MAX_SAFE_INTEGER)});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a.map(String)));a=a.filter(Boolean).map(function(a){return{id:a.id,viewed:!0}});yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(a)});return t.apply(this,arguments)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("WAWebDBMsgUtils").getMsgsByChatId(b));var e=d("WATimeUtils").unixTime();b=b.filter(function(a){return a.type===d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE}).map(function(a){return d("WAWebDBMessageSerialization").messageFromDbRow(a)});return b.filter(function(b){if(!b.from.equals(c))return!1;b=(b=b.newsletterAdminInviteInfo)!=null?b:{};var d=b.newsletterId;b=b.inviteExpiration;return d==null||b==null?!1:e<b&&a.equals(d)})});return v.apply(this,arguments)}g.doesNewsletterExistInStorage=a;g.isPreviewNewsletter=i;g.isSubscribedNewsletter=e;g.TEMPORARY_SERVER_ID_LOWER_BOUND=l;g.getMessageByServerId=f;g.bulkGetMessagesByServerIds=n;g.craftNewsletterMsgKeyFromServerId=p;g.getTemporaryServerId=q;g.updateMsgViewReceipt=s;g.getUnexpiredNewsletterAdminInviteMessageRecordsFromChat=u}),98);
__d("WAWebNewsletterAdminInviteMessageValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({MISSING_NEWSLETTER_JID:"newsletter_admin_invite_missing_newsletter_jid",MISSING_NEWSLETTER_NAME:"newsletter_admin_invite_missing_newsletter_name",MISSING_INVITE_EXPIRATION:"newsletter_admin_invite_missing_invite_expiration",INVALID_NEWSLETTER_JID:"newsletter_admin_invite_invalid_newsletter_jid"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="NewsletterAdminInviteMessageValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.NewsletterAdminInviteMessageValidationErrorCode=a;g.NewsletterAdminInviteMessageValidationError=c}),98);
__d("WAWebParseNewsletterAdminInviteMessageProto",["WATimeUtils","WAWebE2EProtoUtils","WAWebMsgType","WAWebNewsletterAdminInviteMessageValidationError","WAWebNewsletterGatingUtils","WAWebWamEnumE2eFailureReason","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.newsletterAdminInviteMessage;if(b==null)return;if(!d("WAWebNewsletterGatingUtils").isNewsletterCreationEnabled())return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE}),contextInfo:b.contextInfo};var c=b.caption,e=b.inviteExpiration,f=b.newsletterJid,g=b.newsletterName;b=b.contextInfo;if(f==null)throw new(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationError)(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_JID,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(g==null)throw new(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationError)(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_NAME,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationError)(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_JID,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);f=d("WAWebE2EProtoUtils").strictDecodeJid(f);if(f==null)throw new(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationError)(d("WAWebNewsletterAdminInviteMessageValidationError").NewsletterAdminInviteMessageValidationErrorCode.INVALID_NEWSLETTER_JID,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.NEWSLETTER_ADMIN_INVITE,kind:d("WAWebMsgType").MsgKind.NewsletterAdminInvite,newsletterAdminInviteInfo:{newsletterId:d("WAWebWidFactory").toNewsletterWid(f),newsletterName:g,inviteExpiration:d("WATimeUtils").castLongIntToUnixTime(e),inviteMessage:(a=c)!=null?a:"",pictureThumbnail:null}}),contextInfo:b}}g["default"]=a}),98);
__d("WAWebParseForwardedNewsletterMessageInfo",["WALogger","WAWebChatEntryPoint","WAWebE2EProtoUtils","WAWebProtobufsE2E.pb","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Did not receive content type from newsletter annotation"]);h=function(){return a};return a}function a(a){var b=a.newsletterJid,c=a.newsletterName;a=a.serverMessageId;b=d("WAWebE2EProtoUtils").strictDecodeJid(b);return{newsletterId:b!=null?d("WAWebWidFactory").toNewsletterWid(b):void 0,newsletterName:c,serverMessageId:a}}function b(a){var b;b=a==null?void 0:(b=a.newsletter)==null?void 0:b.contentType;if(b==null){var c;d("WALogger").WARN(h()).tags("newsletter-logging").devConsole(a).sendLogs("Missing content type in newsletter annotation");return(a==null?void 0:(c=a.newsletter)==null?void 0:c.serverMessageId)==null?d("WAWebChatEntryPoint").ChatEntryPoint.NewsletterLinkCard:d("WAWebChatEntryPoint").ChatEntryPoint.NewsletterPostLinkCard}return b===d("WAWebProtobufsE2E.pb").ContextInfo$ForwardedNewsletterMessageInfo$ContentType.LINK_CARD?a.shouldSkipConfirmation===!0?d("WAWebChatEntryPoint").ChatEntryPoint.NewsletterLinkCardButton:d("WAWebChatEntryPoint").ChatEntryPoint.NewsletterLinkCard:d("WAWebChatEntryPoint").ChatEntryPoint.NewsletterPostLinkCard}g.parseForwardedNewsletterMessageInfo=a;g.getChatEntryPointFromNewsletterLinkAnnotation=b}),98);
__d("WAWebDBProcessPaymentMessages",["WAWebDBMsgUtils","WAWebModelStorageUtils","WAWebMsgType","WAWebProtobufsWeb.pb","WAWebSchemaMessage","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[],e=[],f=a.map(function(a){return a.paymentRequestMessageKey?a.paymentRequestMessageKey.toString():""}).filter(function(a){return a!==""}),g=a.filter(function(a){return a.subtype==="payment_action_request_declined"||a.subtype==="payment_transaction_request_cancelled"}).map(function(a){return a.id.toString()});return d("WAWebModelStorageUtils").getStorage().lock(["message"],function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b[0];b=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(f.concat(g)));var h=new Map();b.forEach(function(a){a!=null&&h.set(a.id.toString(),a)});a.forEach(function(a){var b;b=(b=a.paymentRequestMessageKey)==null?void 0:b.toString();var f=h.get(b||"");if(f&&b!=null)if(a.subtype==="send"&&a.paymentTxnStatus!=null)c.push({id:b,paymentTxnStatus:a.paymentTxnStatus});else{var g=f.from.isGroup()?f.author:f.from;g=f.paymentMessageReceiverJid.equals(d("WAWebUserPrefsMeUser").getMeUser())?g:f.paymentMessageReceiverJid;a.subtype==="payment_action_request_declined"?c.push({id:b,paymentStatus:d("WAWebProtobufsWeb.pb").PaymentInfo$Status.REJECTED,paymentTxnStatus:d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_REJECTED}):a.subtype==="payment_transaction_request_cancelled"&&c.push({id:b,paymentStatus:d("WAWebProtobufsWeb.pb").PaymentInfo$Status.CANCELLED,paymentTxnStatus:d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELED});c.push({id:a.id.toString(),type:d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,templateParams:[g||"",f.paymentCurrency||"",String(f.paymentAmount1000)]})}else h.get(a.id.toString())&&!a.isMdHistoryMsg&&e.push(a.id.toString())});yield d("WAWebSchemaMessage").getMessageTable().bulkRemove(e);yield d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(c);return c});return function(a){return h.apply(this,arguments)}}())});return h.apply(this,arguments)}g.processPaymentMessages=a}),98);
__d("WAWebParseCancelPaymentMessageProto",["WAWebE2EProtoUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","err"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.cancelPaymentRequestMessage;if(b==null)return;b=b.key;if(b==null)return;b=h(b,a);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"payment_transaction_request_cancelled",paymentRequestMessageKey:b}),contextInfo:null}}function h(a,b){if(!a)throw c("err")("parseProtocolMessageProto: no message key is defined for cancel payment request message");var e=a.id;if(!e)throw c("err")("parseProtocolMessageProto: no message id is defined for cancel payment request message");var f=void 0;if(b.id.remote.isGroup()){f=b.id.participant;if(b.id.fromMe)f=d("WAWebE2EProtoUtils").decodeJid(b.from);else if(!((a=d("WAWebE2EProtoUtils").decodeJid(a.participant))==null?void 0:a.equals(d("WAWebUserPrefsMeUser").getMeUser())))return null}a=new(c("WAWebMsgKey"))({id:e,fromMe:b.id.fromMe,remote:b.id.remote,participant:f});return a}g["default"]=a}),98);
__d("WAWebParseDeclinePaymentMessageProto",["WAWebE2EProtoUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","err"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.declinePaymentRequestMessage;if(b==null)return;b=h(b.key,a);return{msgData:babelHelpers["extends"]({},a,{type:"unknown",kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"payment_action_request_declined",paymentRequestMessageKey:b}),contextInfo:null}}function h(a,b){if(!a)throw c("err")("parseProtocolMessageProto: no message key is defined for decline payment request message");var e=a.id;if(!e)throw c("err")("parseProtocolMessageProto: no message id is defined for decline payment request message");var f;if(b.id.remote.isGroup()){var g;if(b.id.fromMe||((g=d("WAWebE2EProtoUtils").decodeJid(a.participant))==null?void 0:g.equals(d("WAWebUserPrefsMeUser").getMeUser()))||b.subtype==="send")f=d("WAWebE2EProtoUtils").decodeJid(a.participant);else return null}g=new(c("WAWebMsgKey"))({fromMe:!b.id.fromMe,remote:b.id.remote,id:e,participant:f});return g}g["default"]=a}),98);
__d("WAWebParseRequestPaymentMessageProto",["WALogger","WALongInt","WANullthrows","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsWeb.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseRequestPaymentMessageProto: does not support novi transactions"]);h=function(){return a};return a}function a(a){var b,e=a.messageProtobuf,f=a.baseMessage,g=a.paymentInfo;a=a.msgContext;e=e.requestPaymentMessage;if(e==null)return;b=(b=e.noteMessage)==null?void 0:(b=b.extendedTextMessage)==null?void 0:b.contextInfo;if((g==null?void 0:g.futureproofed)||d("WAWebE2EProtoUtils").hasUnsupportedCurrency(g)){d("WALogger").LOG(h());return{msgData:babelHelpers["extends"]({},f,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"phone_only_feature"}),contextInfo:b}}var i=e.background,j=e.noteMessage,k=(j==null?void 0:j.extendedTextMessage)!=null||(j==null?void 0:j.conversation)!=null||(j==null?void 0:j.stickerMessage)!=null;j=j&&k?d("WAWebE2EProtoParser").parseMsgProto(j,{},a):void 0;a=g!=null?d("WAWebE2EProtoUtils").parseMsgPaymentInfo(g):{};if(e.amount==null)e.currencyCodeIso4217!=null&&a.paymentCurrency==null&&(a.paymentCurrency=e.currencyCodeIso4217),e.amount1000!=null&&a.paymentAmount1000==null&&(a.paymentAmount1000=d("WALongInt").numberOrThrowIfTooLarge(e.amount1000));else{e.amount.currencyCode!=null&&a.paymentCurrency==null&&(a.paymentCurrency=e.amount.currencyCode);if(e.amount.value!=null&&a.paymentAmount1000==null){g=e.amount;var l=g.offset==null||g.offset===0?1e3:g.offset;a.paymentAmount1000=parseFloat(g.value)*1e3/l}}e.requestFrom!=null&&(a==null?void 0:a.paymentMessageReceiverJid)==null&&(a.paymentMessageReceiverJid=d("WAWebE2EProtoUtils").decodeJid(e.requestFrom));((a==null?void 0:a.paymentStatus)==null||(a==null?void 0:a.paymentTxnStatus)==null)&&d("WAWebE2EProtoUtils").isEitherSenderOrReceiverOfPaymentMessage(f.id,c("WANullthrows")(a.paymentMessageReceiverJid))&&(a.paymentStatus=d("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING,a.paymentTxnStatus=d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT);e.expiryTimestamp!=null&&(a==null?void 0:a.paymentExpiryTimestamp)==null&&(a.paymentExpiryTimestamp=d("WALongInt").numberOrThrowIfTooLarge(e.expiryTimestamp));return!k?{msgData:babelHelpers["extends"]({},f,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"futureproof"},a,{paymentBackground:i}),contextInfo:b}:{msgData:babelHelpers["extends"]({},f,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"request"},a,{paymentBackground:i,paymentNoteMsg:j}),contextInfo:b}}g["default"]=a}),98);
__d("WAWebParseSendPaymentMessageProto",["WALogger","WAWebE2EProtoParser","WAWebE2EProtoUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPaymentRequestMessageKey: no message id is defined"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseSendPaymentMessageProto: does not support novi transactions"]);i=function(){return a};return a}function a(a){var b,c=a.messageProtobuf,e=a.baseMessage,f=a.paymentInfo;a=a.msgContext;c=c.sendPaymentMessage;if(c==null)return;b=(b=c.noteMessage)==null?void 0:(b=b.extendedTextMessage)==null?void 0:b.contextInfo;if((f==null?void 0:f.futureproofed)===!0||d("WAWebE2EProtoUtils").hasUnsupportedCurrency(f)){d("WALogger").LOG(i());return{msgData:babelHelpers["extends"]({},e,{type:"unknown",kind:d("WAWebMsgType").MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:b}}var g=c.background,h=c.noteMessage;c=c.requestMessageKey;var k=(h==null?void 0:h.extendedTextMessage)!=null||(h==null?void 0:h.conversation)!=null||(h==null?void 0:h.stickerMessage)!=null,l=k?"send":"futureproof";h=h&&k?d("WAWebE2EProtoParser").parseMsgProto(h,{},a):void 0;a=f!=null?d("WAWebE2EProtoUtils").parseMsgPaymentInfo(f):null;f=c?j(c,e.id,l):null;return!k?{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"futureproof"},a,{paymentBackground:g,paymentRequestMessageKey:f}),contextInfo:b}:{msgData:babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.PAYMENT,kind:d("WAWebMsgType").MsgKind.Payment,subtype:"send"},a,{paymentBackground:g,paymentRequestMessageKey:f,paymentNoteMsg:h}),contextInfo:b}}function j(a,b,e){if(!a)throw c("err")("getPaymentRequestMessageKey: no message key is defined");var f=a.id;if(!f)throw c("err")("getPaymentRequestMessageKey: no key id is defined");if(!b){d("WALogger").WARN(h());return null}var g;if(b.remote.isGroup()){var i;if(b.fromMe||((i=d("WAWebE2EProtoUtils").decodeJid(a.participant))==null?void 0:i.equals(d("WAWebUserPrefsMeUser").getMeUser()))||e==="send")g=d("WAWebE2EProtoUtils").decodeJid(a.participant);else return null}i=new(c("WAWebMsgKey"))({fromMe:!b.fromMe,remote:b.remote,id:f,participant:g});return i}g["default"]=a}),98);
__d("WAWebPinAddonMessageProcessor",["Promise","WAArrayGroupBy","WANullthrows","WATimeUtils","WAWebABProps","WAWebAddonConstants","WAWebAddonCreateMsgProcessor","WAWebBackendApi","WAWebDBMarkFutureproofMessagesReparsed","WAWebDBProcessMessage","WAWebMsgGetters","WAWebMsgType","WAWebPinMessageProcessor","WAWebPinMsgGatingUtils","WAWebPinMsgParseWebMsgInfoPinInChat","WAWebPinsDbSerialization","WAWebProtobufsE2E.pb","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=60*d("WATimeUtils").DAY_SECONDS;a=d("WAWebAddonCreateMsgProcessor").createAddonMsgProcessor({isEnabled:function(){return d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled()&&d("WAWebABProps").getABPropConfigValue("unified_pin_addon_infra_enabled")},convert:{fromHistorySyncMsg:function(a){a=d("WAWebPinMsgParseWebMsgInfoPinInChat").parseWebMsgInfoPinInChat(a.webMsgInfo,a.parsedWebMsgInfo);a=a.map(function(a){return d("WAWebPinsDbSerialization").deserializePinInChatMsgData(d("WAWebPinsDbSerialization").serializePinInChat(a))});return(h||(h=b("Promise"))).resolve(a)}},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.add;yield d("WAWebBackendApi").frontendSendAndReceive("updatePinCollection",{msgs:b,removeMsgs:a.remove})});function c(b){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.processMode,e=b.parents;return a.filter(function(a){var b;b=(b=a.pinExpiryDuration)!=null?b:0;if(c!==d("WAWebAddonConstants").AddonProcessMode.HistorySync){a=e.getForAddon(a);if(a.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION)return!0}return b<=i})});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=e.processMode;if(e===d("WAWebAddonConstants").AddonProcessMode.HistorySync)return;e=d("WAArrayGroupBy").groupBy(a,function(a){return a.id.remote.toString()});a=[d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a.map(function(a){return a.id.toString()}))].concat(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a[0];a=a[1];var f=d("WAWebWidFactory").createWid(e);e=(yield (h||(h=b("Promise"))).all(a.map(function(a){var b=d("WAWebMsgGetters").getT(a);if(a.pinMessageType!==d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.PIN_FOR_ALL||b==null||d("WAWebMsgGetters").getIsFailed(a))return;return d("WAWebPinMessageProcessor").genSystemMessage(f,b,c("WANullthrows")(d("WAWebMsgGetters").getSender(a)))}).filter(Boolean)));a=(yield d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:f,msgObjs:e,meta:{add:"after",isHistory:!1},processMessagesOrigin:"pinMessage"}));a&&(yield d("WAWebDBProcessMessage").storeMessages(e,f))});return function(b){return a.apply(this,arguments)}}()));yield (h||(h=b("Promise"))).all(a)});function e(b,c){return a.apply(this,arguments)}return e}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()});e=a;g["default"]=e}),98);
__d("WAWebPinMsgConstants",["$InternalEnum","WATimeUtils","err"],(function(a,b,c,d,e,f,g){f={INVALID:0,PIN:1,UNPIN:2};var h=b("$InternalEnum").Mirrored(["FiveSeconds","FifteenSeconds","OneMinute","OneDay","SevenDays","ThirtyDays"]);b=h.SevenDays;function a(a){switch(a){case h.FiveSeconds:return 5;case h.FifteenSeconds:return 15;case h.OneMinute:return d("WATimeUtils").MINUTE_SECONDS;case h.OneDay:return d("WATimeUtils").DAY_SECONDS;case h.SevenDays:return 7*d("WATimeUtils").DAY_SECONDS;case h.ThirtyDays:return 30*d("WATimeUtils").DAY_SECONDS}}function e(a){switch(a){case 5:return h.FiveSeconds;case 15:return h.FifteenSeconds;case d("WATimeUtils").MINUTE_SECONDS:return h.OneMinute;case d("WATimeUtils").DAY_SECONDS:return h.OneDay;case 7*d("WATimeUtils").DAY_SECONDS:return h.SevenDays;case 30*d("WATimeUtils").DAY_SECONDS:return h.ThirtyDays;default:throw c("err")("Unexpeded pin expiry duration")}}g.PIN_STATE=f;g.PinExpiryDurationOption=h;g.DEFAULT_PIN_EXPIRY_DURATION_OPTION=b;g.getPinExpiryDuration=a;g.getPinExpiryOption=e}),98);
__d("WAWebDBCRUDOperationsPinInChat",["WAWebModelStorageUtils","WAWebPinInChatSchema","WAWebPinMsgConstants","WAWebPinMsgGatingUtils","WAWebPinsDbSerialization","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e=new Map();c.forEach(function(a){var b=a.parentMsgKey;b=b;var c=e.get(b);(!c||(c==null?void 0:c.senderTimestampMs)<=a.senderTimestampMs)&&e.set(b,a)});return d("WAWebModelStorageUtils").getStorage().lock(["pinned-messages"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.anyOf(["chatId"],[a.toString()]));c.forEach(function(a){var b=a.parentMsgKey,c=e.get(b);c&&(c.senderTimestampMs<=a.senderTimestampMs&&e["delete"](b))});var f=new Map(c.map(function(a){return[a.parentMsgKey,a]}));e.forEach(function(a,b){f.set(b,a)});c=Array.from(f.values());c=c.filter(function(a){return a.pinType===d("WAWebPinMsgConstants").PIN_STATE.PIN}).sort(function(a,b){return b.senderTimestampMs-a.senderTimestampMs}).slice(d("WAWebPinMsgGatingUtils").getMaxPins());c.forEach(function(a){e.set(a.parentMsgKey,babelHelpers["extends"]({},a,{pinType:d("WAWebPinMsgConstants").PIN_STATE.UNPIN}))});c=Array.from(e.values());yield b.bulkCreateOrReplace(c);return c});return function(a){return c.apply(this,arguments)}}())}function c(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPinInChatSchema").getTable().get(a.toString()));return a==null?null:d("WAWebPinsDbSerialization").deserializePinInChat(a)});return h.apply(this,arguments)}g.createOrUpdatePinInChat=a;g.getPinInChatByParentKey=c}),98);
__d("WAWebPinMessageProcessor",["Promise","WANullthrows","WAWebBackendApi","WAWebDBCRUDOperationsPinInChat","WAWebDBMarkFutureproofMessagesReparsed","WAWebDBMsgUtils","WAWebDBProcessMessage","WAWebDBStoreMessageOrphans","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebPinsDbSerialization","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return a.pinParentKey}).filter(Boolean).map(function(a){return a.toString()});a=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(a));a=new Map(a.map(function(a){return[a.id.toString(),a]}));return a});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebDBStoreMessageOrphans").storeMessageOrphans(a,function(a){return c("WANullthrows")(a.pinParentKey)})});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=(yield i(e)),g=[],j=[];for(e of e){var l=f.get(c("WANullthrows")(e.pinParentKey).toString());!l?g.push(e):j.push(e)}yield (h||(h=b("Promise"))).all([b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(g.length===0)return;yield k(g);yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(g.map(function(a){return a.id.toString()}))})(),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j.length===0)return;var e=(yield d("WAWebBackendApi").frontendSendAndReceive("updatePinCollection",{msgs:j,removeMsgs:[]}));e&&(yield d("WAWebDBCRUDOperationsPinInChat").createOrUpdatePinInChat(a,e.map(function(a){return d("WAWebPinsDbSerialization").serializePinInChat(a)})),yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(e.map(function(a){return a.msgKey.toString()})));e=(yield (h||(h=b("Promise"))).all(j.map(function(b){return b.pinMessageType===d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.PIN_FOR_ALL?n(a,c("WANullthrows")(b.t),c("WANullthrows")(d("WAWebMsgGetters").getSender(b))):null}).filter(Boolean)));var f=(yield d("WAWebBackendApi").frontendSendAndReceive("processMultipleMessages",{chatId:a,msgObjs:e,meta:{add:"after",isHistory:!1},processMessagesOrigin:"pinMessage"}));f&&(yield d("WAWebDBProcessMessage").storeMessages(e,a))})()])});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("WAWebUserPrefsMeUser").getMeUser(),g=e.equals(f);return{id:new(c("WAWebMsgKey"))({id:yield c("WAWebMsgKey").newId(),fromMe:g,remote:a,participant:e}),author:e,from:a,to:f,recipients:[],t:b,type:d("WAWebMsgType").MSG_TYPE.PINNED_MESSAGE,kind:d("WAWebMsgType").MsgKind.PinnedMessage,templateParams:[e]}});return o.apply(this,arguments)}g.processPinMessages=a;g.genSystemMessage=n}),98);
__d("WAWebPinsDbSerialization",["WANullthrows","WAWebAddonConstants","WAWebAddonDBSerializationUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{msgKey:a.msgKey.toString(),parentMsgKey:a.parentMsgKey.toString(),chatId:a.chatId.toString(),sender:a.sender.toString()})}function b(a){return babelHelpers["extends"]({},a,{msgKey:c("WAWebMsgKey").fromString(a.msgKey),parentMsgKey:c("WAWebMsgKey").fromString(a.parentMsgKey),chatId:d("WAWebWidFactory").toChatWid(d("WAWebWidFactory").createWid(a.chatId)),sender:d("WAWebWidFactory").createUserWid(a.sender)})}function e(a){var b=d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a))).toString();return{msgKey:a.id.toString(),ack:a.ack,t:a.t,read:a.read,parentMsgKey:a.pinParentKey.toString(),senderTimestampMs:a.pinSenderTimestampMs,chatId:a.id.remote.toString(),sender:b,pinType:a.pinMessageType,pinExpiryDuration:a.pinExpiryDuration}}function f(a){var b=d("WAWebAddonDBSerializationUtils").extractAddonForUnifiedTable(a),c=b.base;b=b.addonProps;return babelHelpers["extends"]({},c,{rowType:d("WAWebAddonConstants").AddonMinimizedType.PinInChat,arbitraryIndex:a.id.remote.toString(),addonProps:b})}function h(a){var b=c("WAWebMsgKey").fromString(a.msgKey),e=a.addonProps;return babelHelpers["extends"]({id:b},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{type:d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE,kind:d("WAWebMsgType").MsgKind.PinInChat,ack:a.ack,t:a.t,read:a.read,pinParentKey:c("WAWebMsgKey").fromString(a.targetMsgKey),pinSenderTimestampMs:e.pinSenderTimestampMs,pinMessageType:(b=d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.cast(e.pinMessageType))!=null?b:d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNKNOWN_TYPE,pinExpiryDuration:e.pinExpiryDuration})}function i(a){var b=c("WAWebMsgKey").fromString(a.msgKey);b=d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon);var e=b.from,f=b.to;b=b.author;return{id:c("WAWebMsgKey").fromString(a.msgKey),from:e,to:f,author:b,type:d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE,kind:d("WAWebMsgType").MsgKind.PinInChat,ack:a.ack,t:a.t,read:a.read,pinSenderTimestampMs:a.senderTimestampMs,pinParentKey:c("WAWebMsgKey").fromString(a.parentMsgKey),pinMessageType:(e=d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.cast(a.pinType))!=null?e:d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNKNOWN_TYPE,pinExpiryDuration:a.pinExpiryDuration}}g.serializePinInChat=a;g.deserializePinInChat=b;g.serializePinInChatMsgData=e;g.pinInChatMsgDatIntoUnifiedAddonRow=f;g.unifiedAddonRowIntoPinInChatMsgData=h;g.deserializePinInChatMsgData=i}),98);
__d("WAWebPinMsgParseWebMsgInfoPinInChat",["WALogger","WALongInt","WANullthrows","WAWebAddOnParseWebMsgInfo","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMsgInfoPinInChat failed with error "," and stack ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseWebMsgInfoPinInChat: pinInChat sender should be a wid."]);i=function(){return a};return a}function a(a,b){var e=[];try{if(a==null||a.pinInChat==null)return e;if(b==null||b.pinInChat==null)return e;a=b.pinInChat;var f=a.key,g=a.type,j=a.senderTimestampMs,k=a.serverTimestampMs;a=a.messageAddOnContextInfo;f=c("WANullthrows")(d("WAWebAddOnParseWebMsgInfo").buildAddonMsgKey(c("WANullthrows")(f)));var l=f.msgKey;f=f.sender;if(f==null)d("WALogger").ERROR(i());else{e.push({msgKey:l,parentMsgKey:b.id,chatId:d("WAWebWidFactory").toChatWid(l.remote),senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(c("WANullthrows")(j)),t:(b=d("WAWebAddOnParseWebMsgInfo").getAddonServerTimestamp(k))!=null?b:void 0,pinType:c("WANullthrows")(g),sender:f,pinExpiryDuration:a==null?void 0:a.messageAddOnDurationInSecs})}}catch(a){d("WALogger").ERROR(h(),a==null?void 0:a.name,a==null?void 0:a.stack)}return e}g.parseWebMsgInfoPinInChat=a}),98);
__d("WAWebPinInChatValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({INVALID_PIN_IN_CHAT_EXPIRY_DURATION:"pin_in_chat_invalid_expiry_duration",INVALID_PIN_IN_CHAT_MSG_REMOTE:"pin_in_chat_invalid_msg_remote",MISSING_PARENT_MSG_KEY:"pin_in_chat_missing_parent_msg_key",MISSING_TYPE:"pin_in_chat_missing_type",MISSING_SENDER_TIMESTAMP:"pin_in_chat_missing_timestamp"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="PinInChatValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.PinInChatValidationErrorCode=a;g.PinInChatValidationError=c}),98);
__d("WAWebParsePinMessageProto",["WALongInt","WAWebE2EProtoUtils","WAWebMsgType","WAWebPinInChatValidationError","WAWebPinMsgGatingUtils","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;var c=b.pinInChatMessage;if(c==null)return;if(!d("WAWebPinMsgGatingUtils").isPinnedMessagesM1ReceiverEnabled())return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE}),contextInfo:null};var e=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(c.key,a);if(e==null)throw new(d("WAWebPinInChatValidationError").PinInChatValidationError)(d("WAWebPinInChatValidationError").PinInChatValidationErrorCode.MISSING_PARENT_MSG_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(a.id.remote.toString()!==e.remote.toString()&&!e.remote.isBroadcast())throw new(d("WAWebPinInChatValidationError").PinInChatValidationError)(d("WAWebPinInChatValidationError").PinInChatValidationErrorCode.INVALID_PIN_IN_CHAT_MSG_REMOTE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);b=(b=b.messageContextInfo)==null?void 0:b.messageAddOnDurationInSecs;if(b!=null&&b<0)throw new(d("WAWebPinInChatValidationError").PinInChatValidationError)(d("WAWebPinInChatValidationError").PinInChatValidationErrorCode.INVALID_PIN_IN_CHAT_EXPIRY_DURATION,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);var f=c.type;if(f==null)throw new(d("WAWebPinInChatValidationError").PinInChatValidationError)(d("WAWebPinInChatValidationError").PinInChatValidationErrorCode.MISSING_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);c=d("WALongInt").maybeNumberOrThrowIfTooLarge(c.senderTimestampMs);if(c==null)throw new(d("WAWebPinInChatValidationError").PinInChatValidationError)(d("WAWebPinInChatValidationError").PinInChatValidationErrorCode.MISSING_SENDER_TIMESTAMP,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE,kind:d("WAWebMsgType").MsgKind.PinInChat,pinParentKey:e,pinMessageType:f,pinSenderTimestampMs:c,pinExpiryDuration:b});return{msgData:a,contextInfo:null}}g["default"]=a}),98);
__d("WAWebPollVoteEncryptMsgData",["WANullthrows","WAWebAck","WAWebAddonEncryption","WAWebMsgGetters","WAWebMsgKeyUtils","WAWebMsgType","WAWebPollsProtobufConversion","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e,f,g=(f=c("WANullthrows"))((e=d("WAWebMsgGetters")).getPollOptions(b)),h=f(e.getMessageSecret(b),"Poll creation missing message secret"),i=f(e.getOriginalSender(b)),j=self.crypto.getRandomValues(new Uint8Array(12));g={type:d("WAWebMsgType").MsgKind.PollVoteDecrypted,encode:yield d("WAWebPollsProtobufConversion").protobufFromVote(a,g)};g=(yield d("WAWebAddonEncryption").encryptAddOn(g,{messageSecret:h,iv:j,stanzaId:b.id.id,originalMessageSender:i,addOnSender:d("WAWebWidFactory").toUserWid(f(e.getSender(a)))}));return babelHelpers["extends"]({id:a.id,type:d("WAWebMsgType").MSG_TYPE.POLL_UPDATE,kind:d("WAWebMsgType").MsgKind.PollVoteEncrypted,subtype:"poll_vote",addonEncrypted:!0,t:Math.floor(a.senderTimestampMs/1e3)},d("WAWebMsgKeyUtils").msgKeyToTargetInfo(a.id,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),{isNewMsg:!0,local:!0,ack:(h=a.ack)!=null?h:d("WAWebAck").ACK.CLOCK,pollUpdateParentKey:b.id,encPollVote:{encPayload:g,encIv:j.buffer},senderTimestampMs:a.senderTimestampMs})});return h.apply(this,arguments)}g.encryptPollVoteMsgData=a}),98);
__d("WAWebPollVoteAddonMessageProcessor",["Promise","WALogger","WAWebABProps","WAWebAddonConstants","WAWebAddonCreateMsgProcessor","WAWebAddonInfraError","WAWebAddonLogUtils","WAWebBackendApi","WAWebDBMarkFutureproofMessagesReparsed","WAWebLastAddOnDBSerialization","WAWebMsgType","WAWebPollVoteEncryptMsgData","WAWebPollsExtractVotes","WAWebPollsParseWebMsgInfoPollUpdates","WAWebPollsVoteDataUtils","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[pollVoteMsgProcessor] Failed to decrypt poll vote message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot decrypt poll vote message: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[pollVoteMsgProcessor] Decrypting poll vote message"]);k=function(){return a};return a}var l=d("WAWebAddonCreateMsgProcessor").createAddonMsgProcessorDualEncrypted({isEnabled:function(){return d("WAWebABProps").getABPropConfigValue("unified_poll_vote_addon_infra_enabled")},convert:{fromHistorySyncMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebPollsParseWebMsgInfoPollUpdates").parseWebMsgInfoPollUpdates(a).then(function(a){return a.map(d("WAWebPollsVoteDataUtils").voteDataToPollVoteMsgData)})});function c(b){return a.apply(this,arguments)}return c}(),toDualEncryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.PollVoteEncrypted?a:d("WAWebPollVoteEncryptMsgData").encryptPollVoteMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}(),toDualDecryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.PollVoteDecrypted?a:d("WAWebPollsExtractVotes").extractVote(a,b).then(d("WAWebPollsVoteDataUtils").voteDataToPollVoteMsgData)});function c(b,c){return a.apply(this,arguments)}return c}()},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return d("WAWebBackendApi").frontendSendAndReceive("upsertVotesModelCollection",{votes:a.add.map(d("WAWebPollsVoteDataUtils").pollVoteMsgDataToVoteData),votesToRemove:a.remove,restoredFromDb:b===d("WAWebAddonConstants").AddonProcessMode.Hydration||b===d("WAWebAddonConstants").AddonProcessMode.HistorySync})});function c(b,c){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=c.parents;var e=[],f=[];for(a of a)if(a.addonEncrypted){var g=c.getForAddon(a);if(g==null)throw new(d("WAWebAddonInfraError").AddonInfraError)(d("WAWebAddonInfraError").AddonInfraErrorCode.MissingParentMsg);f.push(l.convert.toDualDecryptedMsgData(a,g));d("WALogger").LOG(k()).sendLogs("unexpected encrypted poll vote",{sampling:.01})}else e.push(a);if(f.length!==0){g=(yield (h||(h=b("Promise"))).allSettled(f));for(c of g)c.status==="fulfilled"&&c.value.kind===d("WAWebMsgType").MsgKind.PollVoteDecrypted?e.push(c.value):d("WALogger").LOG(j(),c.reason);d("WAWebAddonLogUtils").hasSettledWithError(g)&&d("WALogger").ERROR(i()).tags("messagings","addons").sendLogs("poll-vote-decryption-error",{sampling:.01})}return e});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.processMode;yield d("WAWebShouldUpdateLastAddOnPreview").filterAndUpdateChatPreviews(a.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromVoteData(d("WAWebPollsVoteDataUtils").pollVoteMsgDataToVoteData(a),!1)}));if(b===d("WAWebAddonConstants").AddonProcessMode.HistorySync)return;b===d("WAWebAddonConstants").AddonProcessMode.OnlineReceive&&(yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a.map(function(a){return a.id.toString()})))});function c(b,c){return a.apply(this,arguments)}return c}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()});a=l;g["default"]=a}),98);
__d("WAWebDBPollsDeleteVotes",["Promise","WAWebDBMessageDelete","WAWebPollsVotesSchema","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPollsVotesSchema").getTable().anyOf(["parentMsgKey"],a));if(a.length===0)return;var c=a.map(function(a){return a.msgKey});a=a.map(function(a){return[a.parentMsgKey,a.sender]});c=(yield (h||(h=b("Promise"))).allSettled([d("WAWebDBMessageDelete").removeMessagesFromHistory(c),d("WAWebPollsVotesSchema").getTable().bulkRemove(a)]));for(a of c)if(a.status==="rejected")throw a.reason});return i.apply(this,arguments)}g.deleteVotesByParentMsgKeys=a}),98);
__d("WAWebDBPollsGetParentMessages",["WANullthrows","WAWebAddonProcessMsgsUtils","WAWebMsgType","WAWebPnhGatingUtils","WAWebProcessMatMessages","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set(a.map(i)),c=d("WAWebProcessMatMessages").getAlternateWidMapForPolls(a),e=c.matParentMsgKeys;c=c.alternateWidMap;e.forEach(function(a){b.add(a)});e=(yield d("WAWebAddonProcessMsgsUtils").queryAddonParentMsgs(a,null));a=e[0];e=e[1];var f=new Map(),g=[];for(e of e){var h=a.get(i(e));if(h==null&&d("WAWebPnhGatingUtils").isMatFullyEnabled()){var j=c.get(i(e));j!=null&&(h=a.get(j.id.toString()))}h==null||h.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN?g.push(e):f.set(e,h)}return{pollUpdateMsgsToParentMsgs:f,orphans:g}});return h.apply(this,arguments)}function i(a){return c("WANullthrows")(a.pollUpdateParentKey).toString()}g.getParentMessages=a}),98);
__d("WAWebPollsParseWebMsgInfoPollUpdates",["WALogger","WALongInt","WANullthrows","WAWebAddOnParseWebMsgInfo","WAWebMsgType","WAWebPollsCreateOptionLocalIdMap","WAWebPollsProtobufConversion","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMsgInfoPollUpdates failed with error "," and stack ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Failed to parse pollUpdate with error ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.webMsgInfo,e=a.parsedWebMsgInfo,f=a.isFromCag;try{if(b==null||b.pollUpdates==null)return[];if(e==null||e.type!==d("WAWebMsgType").MSG_TYPE.POLL_CREATION)return[];var g=e,j=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(g.pollOptions));return b.pollUpdates.map(function(a){try{var b,e=(b=c("WANullthrows"))(a.pollUpdateMessageKey),h=b(a.vote);e=b(d("WAWebAddOnParseWebMsgInfo").buildAddonMsgKey(e,f));var k=e.msgKey;e=e.sender;return d("WAWebPollsProtobufConversion").voteFromProtobuf({voteProtobuf:h,pollVoteMsgKey:k,parentMsgKey:g.id,sender:e,senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(b(a.senderTimestampMs)),t:d("WAWebAddOnParseWebMsgInfo").getAddonServerTimestamp(a.serverTimestampMs),optionLocalIdMap:j,ack:null,read:a.unread!==!0})}catch(a){d("WALogger").ERROR(i(),a).devConsole(a).sendLogs("parseWebMsgInfoPollUpdates-vote-parse-error");return null}}).filter(Boolean)}catch(a){d("WALogger").ERROR(h(),a==null?void 0:a.name,a==null?void 0:a.stack).sendLogs("parseWebMsgInfoPollUpdates-error");return[]}});return j.apply(this,arguments)}g.parseWebMsgInfoPollUpdates=a}),98);
__d("WAWebPollsParsePollVoteMessageProto",["WALongInt","WAWebE2EProtoUtils","WAWebMsgType","WAWebPollsValidationError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.pollUpdateMessage;if(!b)return null;var c=b.$$unknownFieldCount;c=c===void 0?0:c;var e=b.vote,f=b.senderTimestampMs;b=b.pollCreationMessageKey;if(c>0)return null;if(b==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_POLL_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);c=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b,a);if(c==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_POLL_MESSAGE_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(f==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_SENDER_TIMESTAMP,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_UPDATE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);b=e.encPayload;e=e.encIv;if(b==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_VOTE_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e==null)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.MISSING_VOTE_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(e.byteLength!==12)throw new(d("WAWebPollsValidationError").PollUpdateValidationError)(d("WAWebPollsValidationError").PollUpdateValidationErrorCode.INVALID_VOTE_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.POLL_UPDATE,kind:d("WAWebMsgType").MsgKind.PollVoteEncrypted,subtype:"poll_vote",addonEncrypted:!0,pollUpdateParentKey:c,encPollVote:{encPayload:b,encIv:e},senderTimestampMs:d("WALongInt").numberOrThrowIfTooLarge(f)}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebParseProductMessageProto",["WALongInt","WAWebMsgType","WAWebParseImageMessageProto"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage;a=a.msgContext;b=b.productMessage;if(b==null)return;var f=b.product,g=b.businessOwnerJid,h=b.body,i=b.footer;b=b.contextInfo;if(f==null)return;var j=f.productImage,k=f.productId,l=f.currencyCode,m=f.priceAmount1000,n=f.salePriceAmount1000,o=f.retailerId,p=f.url,q=f.productImageCount,r=f.title;f=f.description;var s={};if(j!=null){j=c("WAWebParseImageMessageProto")({messageProtobuf:{imageMessage:j},baseMessage:e,msgContext:a});if(j!=null){a=j.msgData;s={deprecatedMms3Url:a.deprecatedMms3Url,directPath:a.directPath,staticUrl:a.staticUrl,mimetype:a.mimetype,filehash:a.filehash,encFilehash:a.encFilehash,size:a.size,height:a.height,width:a.width,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,body:a.body,interactiveAnnotations:a.interactiveAnnotations,scanLengths:a.scanLengths,scansSidecar:a.scansSidecar,isViewOnce:a.isViewOnce,thumbnailDirectPath:a.thumbnailDirectPath,thumbnailSha256:a.thumbnailSha256,thumbnailEncSha256:a.thumbnailEncSha256}}}e=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.PRODUCT,kind:d("WAWebMsgType").MsgKind.Product,businessOwnerJid:g,productId:k,currencyCode:l,priceAmount1000:d("WALongInt").numberOrThrowIfTooLarge((j=m)!=null?j:0)||void 0,salePriceAmount1000:d("WALongInt").numberOrThrowIfTooLarge((a=n)!=null?a:0)||void 0,retailerId:o,url:p,productImageCount:q,title:r,description:f,caption:h,footer:i},s);return{msgData:e,contextInfo:b}}g["default"]=a}),98);
__d("WAWebParseProtocolEphemeralSettingMessageProto",["WAWebE2EProtoUtils","WAWebMsgType","WAWebProtobufsE2E.pb"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.protocolMessage;if(b==null)return;if(b.type!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SETTING)return;var c;b.disappearingMode!=null&&(c=d("WAWebE2EProtoUtils").protoToDisappearingMode(a,b.disappearingMode));a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"ephemeral_setting",ephemeralDuration:b.ephemeralExpiration,disappearingModeTrigger:(a=c)==null?void 0:a.disappearingModeTrigger,disappearingModeInitiatedByMe:(b=c)==null?void 0:b.initiatedByMe});return{msgData:a,contextInfo:void 0}}g["default"]=a}),98);
__d("WAWebGenerateAudioOrPttReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebGeneratePtvReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebPtvGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("ptv_receiving_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("ptv_autoplay_enabled")}function c(){var a=d("WAWebABProps").getABPropConfigValue("ptv_autoplay_loop_limit");return a===0?Infinity:a}function e(){return d("WAWebABProps").getABPropConfigValue("ptv_max_duration_seconds")}g.isPtvReceivingEnabled=a;g.isPtvAutoplayEnabled=b;g.getPtvAutoplayLoopLimit=c;g.getPtvMaxDurationSeconds=e}),98);
__d("WAWebPtvParsePtvMessageProto",["WALongInt","WATimeUtils","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMsgType","WAWebPtvGatingUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.ptvMessage;if(b==null)return;if(!d("WAWebPtvGatingUtils").isPtvReceivingEnabled())return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,kind:d("WAWebMsgType").MsgKind.Unknown,futureproofType:d("WAWebMsgType").MSG_TYPE.PTV}),contextInfo:b==null?void 0:b.contextInfo};var c=b.url,e=b.directPath,f=b.staticUrl,g=b.mimetype,h=b.caption,i=b.fileSha256,j=b.fileEncSha256,k=b.fileLength,l=b.height,m=b.width,n=b.mediaKey,o=b.mediaKeyTimestamp,p=b.jpegThumbnail,q=b.interactiveAnnotations,r=b.viewOnce,s=b.thumbnailDirectPath,t=b.thumbnailSha256,u=b.thumbnailEncSha256,v=b.contextInfo,w=b.gifPlayback,x=b.gifAttribution,y=b.seconds,z=b.streamingSidecar;a=babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PTV,kind:d("WAWebMsgType").MsgKind.Ptv,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(c),directPath:e,staticUrl:f||"",mimetype:g,caption:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(h),filehash:d("WAWebE2EProtoParserApi").decodeBytes(i),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(j),size:d("WALongInt").numberOrThrowIfTooLarge(k||0),height:l,width:m,mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(n),mediaKeyTimestamp:o!=null?d("WALongInt").numberOrThrowIfTooLarge(o):d("WATimeUtils").unixTime(),duration:""+(y||0),body:d("WAWebE2EProtoParserApi").decodeBytes(p)||"",interactiveAnnotations:q,isViewOnce:r===!0,thumbnailDirectPath:s,thumbnailSha256:d("WAWebE2EProtoParserApi").decodeBytes(t),thumbnailEncSha256:d("WAWebE2EProtoParserApi").decodeBytes(u),isGif:w,gifAttribution:x,streamingSidecar:z});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(a,b);return{msgData:a,contextInfo:v}}g["default"]=a}),98);
__d("WAWebReactAddonMessageProcessorUtils",["WANullthrows","WAWebAddonDBTable","WAWebCastToReactionMsg","WAWebMsgGetters","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return[a.reactionParentKey,c("WANullthrows")(d("WAWebMsgGetters").getSender(a))]}function i(a){return h(a).map(function(a){return a.toString()}).join("-")}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Map();a=a.map(h);a=(yield d("WAWebAddonDBTable").addonDBTable.bulkGetByParentAndSender(d("WAWebMsgType").MSG_TYPE.REACTION,a));for(a of a){var c=d("WAWebCastToReactionMsg").assertReactionMsgData(a),e=i(c);b.set(e,c.reactionTimestamp)}return function(a){a=i(a);return b.get(a)}});return j.apply(this,arguments)}g.createGetReactionTimestamp=a}),98);
__d("WAWebReactionEncryptMsgData",["WANullthrows","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebBackendApi","WAWebMsgGetters","WAWebMsgType","WAWebProcessBaseMsgInfo","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebBackendApi").frontendSendAndReceive("getGroupMetadata",{groupWid:a.id.remote}));if(e==null?void 0:e.isCag){var f;e=self.crypto.getRandomValues(new Uint8Array(12));var g={type:(f=d("WAWebMsgType")).MsgKind.ReactionDecrypted,encode:{text:a.reactionText,senderTimestampMs:a.reactionTimestamp}},h=d("WAWebAddonEncryptionError").getValidatedMessageSecret(f.MsgKind.ReactionDecrypted,b);g=(yield d("WAWebAddonEncryption").encryptAddOn(g,{messageSecret:h,iv:e,stanzaId:b.id.id,originalMessageSender:c("WANullthrows")(d("WAWebMsgGetters").getOriginalSender(b)),addOnSender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a)))}));return babelHelpers["extends"]({},d("WAWebProcessBaseMsgInfo").msgDataToBaseMsgInfo(a),{type:f.MSG_TYPE.REACTION_ENC,kind:f.MsgKind.ReactionEncrypted,targetMessageKey:b.id,encPayload:g,encIv:e.buffer})}return a});return h.apply(this,arguments)}g.encryptReactionMsgData=a}),98);
__d("WAWebReactionAddonMessageProcessor",["Promise","WALogger","WAWebABProps","WAWebAddonConstants","WAWebAddonCreateMsgProcessor","WAWebBackendApi","WAWebDBMarkFutureproofMessagesReparsed","WAWebLastAddOnDBSerialization","WAWebMsgType","WAWebReactAddonMessageProcessorUtils","WAWebReactionDataUtils","WAWebReactionEncryptMsgData","WAWebReactionGatingUtils","WAWebReactionsEncryption","WAWebReactionsParseWebMsgInfoReaction","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed decrypted enc reactions"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot decrypt reaction: ",""]);j=function(){return a};return a}function k(a){return!new Set([d("WAWebAddonConstants").AddonProcessMode.HistorySync,d("WAWebAddonConstants").AddonProcessMode.Hydration]).has(a)}a=d("WAWebAddonCreateMsgProcessor").createAddonMsgProcessorDualEncrypted({isEnabled:function(){return d("WAWebABProps").getABPropConfigValue("unified_reaction_addon_infra_enabled")},convert:{fromHistorySyncMsg:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebReactionsParseWebMsgInfoReaction").parseWebMsgInfoReaction(a.webMsgInfo,a.parsedWebMsgInfo).map(function(a){return d("WAWebReactionDataUtils").reactionRowToReactionMsgData(d("WAWebReactionDataUtils").webMsgInfoReactionTypeToReactionsRow(a))})});function c(b){return a.apply(this,arguments)}return c}(),toDualEncryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.ReactionEncrypted?a:d("WAWebReactionEncryptMsgData").encryptReactionMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}(),toDualDecryptedMsgData:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.kind===d("WAWebMsgType").MsgKind.ReactionDecrypted?a:d("WAWebReactionsEncryption").decryptReactionMsgData(a,b)});function c(b,c){return a.apply(this,arguments)}return c}()},updateCollection:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebBackendApi").frontendSendAndReceive("updateReactionCollection",{msgs:a.add,removeReactions:a.remove,allowNotifications:k(b)})});function c(b,c){return a.apply(this,arguments)}return c}(),beforeUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=c.parents,f=[];c=[];for(a of a)a.kind===d("WAWebMsgType").MsgKind.ReactionEncrypted?c.push(a):a.kind===d("WAWebMsgType").MsgKind.ReactionDecrypted&&f.push(a);yield (h||(h=b("Promise"))).allSettled(c.map(function(a){return d("WAWebReactionsEncryption").decryptReactionMsgData(a,e.getForAddon(a))})).then(function(a){for(var b of a)b.status==="fulfilled"&&b.value!=null?f.push(b.value):d("WALogger").LOG(j(),b.reason);a.some(function(a){return a.status==="rejected"})&&d("WALogger").WARN(i()).tags("messaging","addons").sendLogs("decrypt-enc-reaction-failed",{sampling:.01})});var g=(yield d("WAWebReactAddonMessageProcessorUtils").createGetReactionTimestamp(f));a=f.filter(function(a){var b=g(a);return b==null||b<a.reactionTimestamp});return a});function c(b,c){return a.apply(this,arguments)}return c}(),afterUpsert:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.processMode;yield d("WAWebShouldUpdateLastAddOnPreview").filterAndUpdateChatPreviews(a.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromReactionRowType(d("WAWebReactionDataUtils").reactionMsgDataToReactionRow(a))}));b===d("WAWebAddonConstants").AddonProcessMode.OnlineReceive&&(yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a.map(function(a){return a.id.toString()})))});function c(b,c){return a.apply(this,arguments)}return c}(),manageNotifications:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.processMode;if(!k(b)||!d("WAWebReactionGatingUtils").isReactionNotificationAddOnApiEnabled())return;d("WAWebBackendApi").frontendFireAndForget("handleReactionNotification",{reactions:a.add})});function c(b,c){return a.apply(this,arguments)}return c}()});c=a;g["default"]=c}),98);
__d("WAWebReactionEncMessageValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({INVALID_ENC_IV:"enc_reaction_invalid_iv",INVALID_ENC_PAYLOAD:"enc_reaction_invalid_payload",MISSING_TARGET_MSG_KEY:"enc_reaction_missing_target_msg_key",MISSING_MESSAGE_SECRET:"enc_reaction_missing_message_secret",MISSING_SENDER:"enc_reaction_missing_sender",MISSING_PARENT_MESSAGE:"enc_reaction_missing_parent_message",MISSING_PARENT_MESSAGE_SENDER:"enc_reaction_missing_parent_message_sender",DECRYPTION_FAILED:"enc_reaction_decryption_failed"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ReactionEncMessageValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.ReactionEncValidationErrorCode=a;g.ReactionEncMessageValidationError=c}),98);
__d("WAWebReactionsValidationError",["$InternalEnum","WAWebHandleMsgError"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({INVALID_REACTION_TEXT_LENGTH:"reaction_invalid_text_length",MISSING_PARENT_MSG_KEY:"reaction_missing_parent_msg_key",MISSING_TIMESTAMP:"reaction_missing_timestamp"});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ReactionValidationError",b)||babelHelpers.assertThisInitialized(c)}return b}(d("WAWebHandleMsgError").MessageValidationError);g.ReactionValidationErrorCode=a;g.ReactionValidationError=c}),98);
__d("WAWebReactionsEncryption",["WALongInt","WANullthrows","WAWebAddonEncryption","WAWebAddonEncryptionError","WAWebE2EProtoUtils","WAWebMsgGetters","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebReactionEncMessageValidationError","WAWebReactionsBEUtils","WAWebReactionsValidationError","WAWebWamEnumE2eFailureReason","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={type:d("WAWebMsgType").MsgKind.ReactionEncrypted,encryptedAddOn:a.encryptedReaction};b=(yield d("WAWebAddonEncryption").decryptAddOn(b,{messageSecret:a.messageSecret,iv:a.iv,stanzaId:a.stanzaId,originalMessageSender:a.originalMessageSender,addOnSender:a.reactionSender}));return d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").Message$ReactionMessageSpec,b)});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.targetMessageKey,f=a.encIv,g=a.encPayload,i=d("WAWebAddonEncryptionError").getValidatedMessageSecret(d("WAWebMsgType").MsgKind.ReactionEncrypted,b),j=d("WAWebMsgGetters").getOriginalSender(b);if(j==null)throw new(d("WAWebReactionEncMessageValidationError").ReactionEncMessageValidationError)(d("WAWebReactionEncMessageValidationError").ReactionEncValidationErrorCode.MISSING_PARENT_MESSAGE_SENDER,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);g={encryptedReaction:g,messageSecret:i,iv:f,stanzaId:b.id.id,originalMessageSender:j,reactionSender:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebMsgGetters").getSender(a)))};var k;try{k=(yield h(g))}catch(a){throw new(d("WAWebReactionEncMessageValidationError").ReactionEncMessageValidationError)(d("WAWebReactionEncMessageValidationError").ReactionEncValidationErrorCode.DECRYPTION_FAILED,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE)}f=(i=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(k.text))!=null?i:d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT;b=k.senderTimestampMs;if(b==null)throw new(d("WAWebReactionsValidationError").ReactionValidationError)(d("WAWebReactionsValidationError").ReactionValidationErrorCode.MISSING_TIMESTAMP,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.REACTION,kind:d("WAWebMsgType").MsgKind.ReactionDecrypted,reactionParentKey:e,reactionText:f,reactionTimestamp:d("WALongInt").numberOrThrowIfTooLarge(b),encPayload:void 0,encIv:void 0,read:!1})});return j.apply(this,arguments)}g.parseEncReaction=h;g.decryptReactionMsgData=a}),98);
__d("WABitArray",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=8;a=function(){function a(a){if(a<=0)throw c("WAErr")("BitArray:numBits should be positive");this.$1=a;this.$2=new Uint8Array(Math.ceil(this.$1/h))}var b=a.prototype;b.get=function(a){a=this.$3(a);var b=a[0];a=a[1];return Boolean(this.$2[b]>>a&1)};b.set=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]|=1<<a};b.unset=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]&=~(1<<a)};b.toggle=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]^=1<<a};b.clear=function(){this.$2=new Uint8Array(Math.ceil(this.$1/h))};b.toArray=function(){var a=[];for(var b=0;b<this.$1;b++)a.push(this.get(b));return a};b.toString=function(){return this.toArray().map(function(a){return a?"1":"0"}).join("")};b.$3=function(a){if(a<0||a>=this.$1)throw c("WAErr")("BitArray:index out of bounds");var b=Math.floor(a/h);a=a-b*h;return[b,a]};return a}();g["default"]=a}),98);
__d("WAOnceWithReset",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){var b=g,c=function(){if(b===g){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];b=a.call.apply(a,[this].concat(d))}return b};c.reset=function(){b=g};return c}f["default"]=a}),66);
__d("WAWebAnimatedEmojiGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("animated_emojis_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("remove_single_emoji_bubble_background_enabled")}function e(){return d("WAWebABProps").getABPropConfigValue("animated_emoji_set_1_enabled")}function f(){return!c("gkx")("26258")&&d("WAWebABProps").getABPropConfigValue("animated_emoji_final_set_enabled")}g.isAnimatedEmojiEnabled=a;g.isStaticSingleEmojiUIEnabled=b;g.isAnimatedEmojiSet1Enabled=e;g.isAnimatedEmojiFinalSetEnabled=f}),98);
__d("WAWebEmojiConst",["$InternalEnum","WAWebAnimatedEmojiGatingUtils","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){c=25;e={SMILEYS_PEOPLE:"SMILEYS_PEOPLE",ANIMALS_NATURE:"ANIMALS_NATURE",FOOD_DRINK:"FOOD_DRINK",ACTIVITY:"ACTIVITY",TRAVEL_PLACES:"TRAVEL_PLACES",OBJECTS:"OBJECTS",SYMBOLS:"SYMBOLS",FLAGS:"FLAGS"};f=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS"];var h={APPLE:"APPLE",WHATSAPP:"WHATSAPP"},i={small:20,large:32};b=b("$InternalEnum").Mirrored(["MEDIUM","LARGE","XLARGE","XLARGE_60"]);var j=[].concat(f,["VARIATION"]),k=["\u2764","\u2665",String.fromCodePoint(129294),String.fromCodePoint(128150),String.fromCodePoint(128420),String.fromCodePoint(128154),String.fromCodePoint(128156),String.fromCodePoint(128151),String.fromCodePoint(128147),String.fromCodePoint(128153),String.fromCodePoint(129293),String.fromCodePoint(128155),String.fromCodePoint(128149),String.fromCodePoint(129505),String.fromCodePoint(10084,65039,8205,128293),String.fromCodePoint(129653),String.fromCodePoint(129654),String.fromCodePoint(129655)],l=[String.fromCodePoint(128536),String.fromCodePoint(10084,65039),String.fromCodePoint(128175),String.fromCodePoint(128514),String.fromCodePoint(129315),String.fromCodePoint(128525),String.fromCodePoint(128522),String.fromCodePoint(128526),String.fromCodePoint(129321),String.fromCodePoint(128149),String.fromCodePoint(128521),String.fromCodePoint(10024)],m=[String.fromCodePoint(129671),String.fromCodePoint(128148),String.fromCodePoint(128079),String.fromCodePoint(128557),String.fromCodePoint(128545),String.fromCodePoint(129318,8205,9794,65039),String.fromCodePoint(128293),String.fromCodePoint(128591),String.fromCodePoint(128556),String.fromCodePoint(128517),String.fromCodePoint(129395),String.fromCodePoint(127881),String.fromCodePoint(128532),String.fromCodePoint(128588),String.fromCodePoint(128536),String.fromCodePoint(128546),String.fromCodePoint(129392),String.fromCodePoint(128536),String.fromCodePoint(128558),String.fromCodePoint(128077),String.fromCodePoint(128075),String.fromCodePoint(127922)],n={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_Clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v1_Enraged_face_1F621",AnimatedAsset1F926:"v1_Face_palm_1F926",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v2_Fire_1F525",AnimatedAsset1F64F:"v2_Folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v1_Grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v1_Party_1F973",AnimatedAsset1F389:"v2_Party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v1_ROFL_1F923",AnimatedAsset1F622:"v1_Sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v1_Smiling_face_with_hearts_1F970",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v1_Star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v1_Winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728"},o={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_iOS_clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v2_iOS_enraged_face_1F621",AnimatedAsset1F926:"v2_iOS_face_palm_man",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v1_Fire_1F525",AnimatedAsset1F64F:"v2_iOS_folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v2_iOS_grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v2_iOS_party",AnimatedAsset1F389:"v2_iOS_party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v2_iOS_rofl_1F923",AnimatedAsset1F622:"v2_iOS_sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v2_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v3_iOS_star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v2_iOS_winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728"};function p(a){a=[d("WAWebMobilePlatforms").PLATFORMS.IPAD,d("WAWebMobilePlatforms").PLATFORMS.IPHONE,d("WAWebMobilePlatforms").PLATFORMS.SMBI].includes(a)?o:n;return[[String.fromCodePoint(128536),""+a.AnimatedAsset1F618],[String.fromCodePoint(10084,65039),""+a.AnimatedAsset2764FE0F],[String.fromCodePoint(128175),""+a.AnimatedAsset1F4AF],[String.fromCodePoint(128514),""+a.AnimatedAsset1F602],[String.fromCodePoint(129315),""+a.AnimatedAsset1F923],[String.fromCodePoint(128525),""+a.AnimatedAsset1F60D],[String.fromCodePoint(128522),""+a.AnimatedAsset1F60A],[String.fromCodePoint(128526),""+a.AnimatedAsset1F60E],[String.fromCodePoint(129321),""+a.AnimatedAsset1F929],[String.fromCodePoint(128149),""+a.AnimatedAsset1F495],[String.fromCodePoint(128521),""+a.AnimatedAsset1F609],[String.fromCodePoint(127922),""+a.AnimatedAsset1F3B2],[String.fromCodePoint(129671),""+a.AnimatedAsset1FA87],[String.fromCodePoint(128148),""+a.AnimatedAsset1F494],[String.fromCodePoint(128079),""+a.AnimatedAsset1F44F],[String.fromCodePoint(128557),""+a.AnimatedAsset1F62D],[String.fromCodePoint(128545),""+a.AnimatedAsset1F621],[String.fromCodePoint(129318,8205,9794,65039),""+a.AnimatedAsset1F926],[String.fromCodePoint(128293),""+a.AnimatedAsset1F525],[String.fromCodePoint(128591),""+a.AnimatedAsset1F64F],[String.fromCodePoint(128556),""+a.AnimatedAsset1F62C],[String.fromCodePoint(128517),""+a.AnimatedAsset1F605],[String.fromCodePoint(129395),""+a.AnimatedAsset1F973],[String.fromCodePoint(127881),""+a.AnimatedAsset1F389],[String.fromCodePoint(128532),""+a.AnimatedAsset1F614],[String.fromCodePoint(128588),""+a.AnimatedAsset1F64C],[String.fromCodePoint(128546),""+a.AnimatedAsset1F622],[String.fromCodePoint(129392),""+a.AnimatedAsset1F970],[String.fromCodePoint(128558),""+a.AnimatedAsset1F62E],[String.fromCodePoint(128077),""+a.AnimatedAsset1F44D],[String.fromCodePoint(128075),""+a.AnimatedAsset1F44B],[String.fromCodePoint(10024),""+a.AnimatedAsset2728]]}function q(){var a=[];d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiSet1Enabled()&&(a=[].concat(a,l));d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiFinalSetEnabled()&&(a=[].concat(a,m));return a}function a(a){var b=q();a=p(a);a=a.filter(function(a){a=a[0];return b.includes(a)});return a}g.BUCKET_SIZE=c;g.CATEGORIES=e;g.ORDERED_CATEGORY_IDS=f;g.EMOJI_TYPE=h;g.EMOJI_WIDTH=i;g.LargeEmojiSize=b;g.CATEGORY_ORDERING=j;g.HEART_EMOJIS=k;g.getSupportedAnimatedEmojis=q;g.getSupportedAnimatedEmojisAssetIdsMapping=a}),98);
__d("WAWebGetEmojiPathExperimental",["gkx"],(function(a,b,c,d,e,f,g){d=""+window.location.origin;var h=c("gkx")("26258")?"https://web.whatsapp.com/emoji/v1":d+"/emoji/v1",i=15,j=1,k=2;function a(a,b,c){return l(a,c,b,"png")}function l(a,b,c,d){a=m(a);return n("single",c,b,a+"."+d)}function m(a){return Array.from(a).map(function(a){return a.codePointAt(0).toString(16).padStart(6,"0")}).join("_")}function b(a,b,c,d){return n("sprite",a,c,b+"."+d)}function n(a,b,c,d){return[h,i,j,k,a,b.toLowerCase().slice(0,1),c,d].join("/")}g.getGlyphExperimentalPath=a;g.getEmojiSpritesExperimentalPath=b}),98);
__d("objectEntries",[],(function(a,b,c,d,e,f){function a(a){return Object.entries(a)}f["default"]=a}),66);
__d("WAWebEmoji",["invariant","WABitArray","WANullthrows","WAOnceWithReset","WAWebABProps","WAWebEmojiCompile","WAWebEmojiConst","WAWebGetEmojiPathExperimental","lodash","objectEntries"],(function(a,b,c,d,e,f,g,h){var i="\u25a1",j="\u200d",k=["\ud83c\udffb","\ud83c\udffc","\ud83c\udffd","\ud83c\udffe","\ud83c\udfff"],l=new RegExp(k.join("|"),"g");b="\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1";var m="\ud83d\udc6d",n="\ud83d\udc6c",o="\ud83d\udc6b";e=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128104);f=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128105);var p=String.fromCodePoint(128104,8205,10084,65039,8205,128139,8205,128104),q=String.fromCodePoint(129489,8205,10084,65039,8205,128139,8205,129489),r=String.fromCodePoint(128143),s=String.fromCodePoint(128105,8205,10084,65039,8205,128104),t=String.fromCodePoint(128105,8205,10084,65039,8205,128105),u=String.fromCodePoint(128104,8205,10084,65039,8205,128104),v=String.fromCodePoint(129489,8205,10084,65039,8205,129489),w=String.fromCodePoint(128145),x=String.fromCodePoint(129309),y=new Set([b,m,n,o,e,f,p,r,s,t,u,w,x]),z=d("WAWebEmojiConst").HEART_EMOJIS.map(function(a){return a}),A=new Set(["\ufe00","\ufe01","\ufe02","\ufe03","\ufe04","\ufe05","\ufe06","\ufe07","\ufe08","\ufe09","\ufe0a","\ufe0b","\ufe0c","\ufe0d","\ufe0e","\ufe0f"]),B=[127950,65039].map(function(a){return String.fromCodePoint(a)}).join(""),C=[127950,8205,128960].map(function(a){return String.fromCodePoint(a)}).join(""),D=function(a){return a.replace(/\uFE0F/g,"")},E=c("lodash").memoize(function(a,b){function c(d){d===void 0&&(d=[]);if(d.length===b)return[d];var e=[];for(var f=0;f<a.length;f++){var g=[].concat(d);g.push(a[f]);e=e.concat(c(g))}return e}return c()},function(a,b){return a.toString()+b}),F=function(){function a(){var a=this,b;this.skinToneVariations=k;this.emojiRegex=function(){var b=a._createEmojiRegexIfNeeded();b.lastIndex=0;return b};this._createEmojiRegexIfNeeded=(b=c("WAOnceWithReset"))(function(){var b=a._getEmojiRegexSource();return new RegExp("("+b+")","g")});this.onlyEmojiRegex=function(){var b=a._createOnlyEmojiRegexIfNeeded();b.lastIndex=0;return b};this._createOnlyEmojiRegexIfNeeded=b(function(){var b=a._getEmojiRegexSource();return new RegExp("^("+b+")+$","g")});this.splitEmojis=function(b){return a.containsOnlyEmoji(b)===!1?null:b.split(a.emojiRegex()).filter(Boolean)};this.extractAllEmojis=function(b){return a.containsEmoji(b)===!1?null:Array.from(b.matchAll(a.emojiRegex())).filter(Boolean).map(function(a){return a[1]})};this.containsEmoji=function(b){return a.emojiRegex().test(b)};this.containsOnlyEmoji=function(b){return a.onlyEmojiRegex().test(b)};this.matchLargeEmojiPattern=function(b){if(b==null)return;if(b.length>50||b.includes(" "))return null;var c=a._getLargeEmojisRegex();c=c.exec(b);return c?c.filter(Boolean).slice(1):null};this.normalizeEmojiFromString=function(b){return a.normalizeEmoji(b)};this.normalizeEmoji=function(b){b=D(b);var c=a._getDerivedMaps();c=c.unqualifiedToNormalizedEmoji;return c.get(b)};this.normalizeAllEmojis=c("lodash").memoize(function(b){return b?b.replace(a.emojiRegex(),function(b,c){return A.has(c)?"":(b=a.normalizeEmoji(c))!=null?b:i}):""});this.getSkinToneVariant=function(b,c){var d=a._getBaseToSkinToneEmojis();d=d.get(b);if(d==null)return null;b=G(c);return d.get(b)};this._getDerivedMaps=b(function(){var b=a._getConfig(),d=b.orderedEmojis;b=b.legacyToEmoji;var e=new Map(),f=new Map(),g=new Map(),h=0;d.forEach(function(a,b){if(a===""||a==null)return;a=Array.isArray(a)?a:[a];a.forEach(function(a){f.set(a,b);var c=D(a);g.set(c,a)});e.set(b,h);h++});c("objectEntries")(b).forEach(function(a){var b=a[0];a=a[1];f.set(b,a);a=D(b);g.set(a,b)});return{emojiToGlyphId:f,glyphIdToIndex:e,unqualifiedToNormalizedEmoji:g}});this._getBaseToSkinToneEmojis=b(function(){var b=a._getDerivedMaps();b=b.emojiToGlyphId;var c=new Map(),d=function(){if(f){if(g>=e.length)return"break";h=e[g++]}else{g=e.next();if(g.done)return"break";h=g.value}var b=h,d=void 0,i=b.replace(l,function(a){d==null&&(d=[]);d.push(a);return""});if(d==null)return"continue";var k=d,p;i==="\ud83d\udc69"+j+"\ud83e\udd1d"+j+"\ud83d\udc69"?p=m:i==="\ud83d\udc68"+j+"\ud83e\udd1d"+j+"\ud83d\udc68"?p=n:i==="\ud83d\udc69"+j+"\ud83e\udd1d"+j+"\ud83d\udc68"?p=o:i===v?p=w:i===q?p=r:i===String.fromCodePoint(129777,8205,129778)?p=x:p=i;i=a.normalizeEmoji(p);if(i==null)return"continue";p=c.get(i);p==null&&(p=new Map(),p.set("",i),c.set(i,p));i=G(k);p.set(i,b)};_loop:for(var e=b.keys(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;b=d();switch(b){case"break":break _loop;case"continue":continue}}return c});this._getSkinToneEmojisToBase=b(function(){var b=new Map();for(var c=a._getBaseToSkinToneEmojis().entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f.values(),h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;b.set(j,g)}}return b});this._getEmojiRegexSource=b(function(){var b=a._getDerivedMaps();b=b.emojiToGlyphId;return c("WAWebEmojiCompile")([].concat(Array.from(b.keys()),Array.from(A)).filter(Boolean))});this._createLargeEmojisRegexIfNeeded=b(function(){var b=a._getEmojiRegexSource();return new RegExp("^("+b+")("+b+")?("+b+")?$")});this.getEmojisInCategory=function(b){return(b=a._getConfig().categorizedEmojis[b])!=null?b:[]};this._getEmojiToCategory=b(function(){var b=a._getConfig(),c=b.categorizedEmojis,e=new Map();Object.keys(c).forEach(function(b){var f=d("WAWebEmojiConst").CATEGORY_ORDERING.indexOf(b);c[b].forEach(function(b){b=a.normalizeEmoji(b);if(b==null)return;e.set(b,f)})});return e});this._applyGlyphTransformations=function(a){return d("WAWebABProps").getABPropConfigValue("custom_racing_emoji")&&a===B?C:a};this.getGlyphId=function(b){b=a.normalizeEmoji(b);if(b==null)return null;b=a._applyGlyphTransformations(b);var c=a._getDerivedMaps();c=c.emojiToGlyphId;return c.get(b)};this.getGlyphPath=function(b,c){b=a.normalizeEmojiFromString(b);if(b==null)return null;b=a._applyGlyphTransformations(b);var e=a._getDerivedMaps();e=e.emojiToGlyphId;e=e.get(b);return e==null?null:d("WAWebGetEmojiPathExperimental").getGlyphExperimentalPath(b,a._getConfig().emojiType,c)};this.getSpritesPath=function(a,b,c,e){return d("WAWebGetEmojiPathExperimental").getEmojiSpritesExperimentalPath(a,b,c,e)};this.isGlyphCached=function(b){b=a._getGlyphIndex(b);return a._getCachedGlyphs().get(b)};this.markGlyphCached=function(b){b=a._getGlyphIndex(b);a._getCachedGlyphs().set(b)};this._getCachedGlyphs=b(function(){return new(c("WABitArray"))(a._getGlyphCount())});this.getCssClasses=function(b,c){c===void 0&&(c="small");return["b"+a.getBucket(b),c==="small"?"emoji":"emojik",a._getConfig().emojiType===d("WAWebEmojiConst").EMOJI_TYPE.APPLE?"apple":"wa"].join(" ")};this.getStyle=function(b,c){c===void 0&&(c="small");b=a._getCoordinates(b,c);c=b.xpos;b=b.ypos;return{backgroundPosition:"-"+c+"px -"+b+"px"}};this.getBucket=function(b){b=a._getGlyphIndex(b);b=Math.floor(b/d("WAWebEmojiConst").BUCKET_SIZE);return""+b};this.getHeartEmojis=b(function(){return z.map(a.normalizeEmoji).filter(Boolean)});this._getLastBucketId=b(function(){var b=a._getGlyphCount();return b-b%d("WAWebEmojiConst").BUCKET_SIZE});this._getLastBucketCols=b(function(){return Math.floor(Math.sqrt(a._getGlyphCount()-a._getLastBucketId()))})}var b=a.prototype;b.configure=function(a){if(a===this._config)return;this._config=a;this.getHeartEmojis.reset();this._createEmojiRegexIfNeeded.reset();this._createLargeEmojisRegexIfNeeded.reset();this._createOnlyEmojiRegexIfNeeded.reset();this._getEmojiRegexSource.reset();this._getCachedGlyphs.reset();this._getSkinToneEmojisToBase.reset();this._getBaseToSkinToneEmojis.reset();this._getEmojiToCategory.reset();this._getLastBucketId.reset();this._getLastBucketCols.reset();this._getDerivedMaps.reset()};b._getConfig=function(){this._config!=null||h(0,56544);return this._config};b.isEmoji=function(a){return this.normalizeEmoji(a)!=null};b.getSkinToneBase=function(a){a=this.normalizeEmoji(a);return a==null?null:(a=this._getSkinToneEmojisToBase().get(a))!=null?a:null};b._getLargeEmojisRegex=function(){var a=this._createLargeEmojisRegexIfNeeded();a.lastIndex=0;return a};b._getGlyphCount=function(){var a=this._getDerivedMaps();a=a.glyphIdToIndex;return a.size};b._getCoordinates=function(a,b){a=this._getGlyphIndex(a);var c=a%d("WAWebEmojiConst").BUCKET_SIZE;a=a>=this._getLastBucketId()?this._getLastBucketCols():Math.floor(Math.sqrt(d("WAWebEmojiConst").BUCKET_SIZE));b=d("WAWebEmojiConst").EMOJI_WIDTH[b];var e=Math.floor(c/a);c=Math.floor(c%a);a=c*b;c=e*b;return{xpos:a,ypos:c,width:b}};b._getGlyphIndex=function(a){var b=this._getDerivedMaps();b=b.glyphIdToIndex;return c("WANullthrows")(b.get(a))};b.getEmojiAggregate=function(a){a=this.getNormalizedOrTofu(a);var b=this.getSkinToneBase(a);return(b=b)!=null?b:D(a)};b.getNormalizedOrTofu=function(a){var b=this.normalizeEmojiFromString(a);return!b?i:a};return a}();function G(a){return a.every(function(b){return b===a[0]})?a[0]:a.join("")}function a(a){return y.has(a)}F=new F();g.OPEN_BOX_CHAR=i;g.PEOPLE_HOLDING_HANDS=b;g.WOMEN_HOLDING_HANDS=m;g.MEN_HOLDING_HANDS=n;g.WOMAN_AND_MAN_HOLDING_HANDS=o;g.KISS_WOMAN_MAN=e;g.KISS_WOMAN_WOMAN=f;g.KISS_MAN_MAN=p;g.KISS=r;g.COUPLE_WITH_HEART_WOMAN_MAN=s;g.COUPLE_WITH_HEART_WOMAN_WOMAN=t;g.COUPLE_WITH_HEART_MAN_MAN=u;g.COUPLE_WITH_HEART=w;g.HANDSHAKE=x;g.getPermutations=E;g.isBaseMultiSkinToneEmoji=a;g.EmojiUtil=F}),98);
__d("WAWebDBGetReactions",["WAWebApiContact","WAWebEmoji","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebMsgKey","WAWebParseMsgKeyString","WAWebReactionsBEUtils","WAWebSchemaReactions","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSchemaReactions").getReactionsTable().equals(["parentMsgKey"],a));var b={reactions:[],reactionByMe:null},e=new Map();a.forEach(function(a){var f=a.reactionText,g=a.orphan;if(f!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&g!==1){g=d("WAWebEmoji").EmojiUtil.getEmojiAggregate(f);f=(f=e.get(g))!=null?f:[];e.set(g,[].concat(f,[a]));g=c("WAWebParseMsgKeyString")(a.msgKey);g.fromMe&&(b.reactionByMe=a)}});var f=b.reactionByMe?d("WAWebEmoji").EmojiUtil.getEmojiAggregate(b.reactionByMe.reactionText):"";e.forEach(function(a,c){var d=!1;c===f&&(d=!0);b.reactions.push({aggregateEmoji:c,senders:a,hasReactionByMe:d})});return b});return h.apply(this,arguments)}function e(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map();yield d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];b=(yield b.anyOf(["parentMsgKey"],a));b.forEach(function(a){var b=a.reactionText,e=a.orphan;if(b!==d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT&&e!==1){e=(b=c.get(a.parentMsgKey))!=null?b:[];e.push(a);c.set(a.parentMsgKey,e)}})});return function(a){return e.apply(this,arguments)}}());return c});return i.apply(this,arguments)}function f(a){return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(b){b=b[0];return b.anyOf(["parentMsgKey"],a)})}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e,f=a.parentMsgKey;a=a.senderUserJid;var g=[];b=(b=d("WAWebLidMigrationUtils").getAlternateMsgKey(c("WAWebMsgKey").from(f)))==null?void 0:b.toString();e=(e=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").createUserWid(a)))==null?void 0:e.toString();f=[f,b].filter(Boolean);b=[a,e].filter(Boolean);for(a of f)for(e of b)g.push([a,e]);f=(yield d("WAWebSchemaReactions").getReactionsTable().anyOf(["parentMsgKey","senderUserJid"],g,{limit:1}));return f[0]});return k.apply(this,arguments)}g.getReactions=a;g.getFilteredReactionsFromParentMsgs=e;g.getAllReactionsFromParentMsgs=f;g.existsReactionAddressingModeInsensitive=j}),98);
__d("WAWebDBCreateOrUpdateReactions",["WAWebApiContact","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c=new Map();a.forEach(function(a){d("WAWebUserPrefsMeUser").isSerializedWidMe(a.senderUserJid)&&(a.read=!0);var b=h(a),e=c.get(b);e?e.timestamp<=a.timestamp&&c.set(b,a):c.set(b,a)});return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=[],e=[];Array.from(c.values()).forEach(function(a){e.push([a.parentMsgKey,a.senderUserJid]);var b=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").createUserWid(a.senderUserJid));b!=null&&e.push([a.parentMsgKey,b.toString()])});var f=(yield a.anyOf(["parentMsgKey","senderUserJid"],e));f.forEach(function(a){var d=h(a),e=c.get(d);e&&(e.timestamp<=a.timestamp?c["delete"](d):e.senderUserJid!==a.senderUserJid&&b.push([a.parentMsgKey,a.senderUserJid]))});b.length>0&&(yield a.bulkRemove(b));yield a.bulkCreateOrReplace(Array.from(c.values()));return Array.from(c.values())});return function(b){return a.apply(this,arguments)}}())}function h(a){var b=d("WAWebWidFactory").createUserWid(a.senderUserJid),c=String(d("WAWebLidMigrationUtils").toPn(b));b=String(d("WAWebLidMigrationUtils").toLid(b));return a.parentMsgKey+","+c+","+b}g.createOrUpdateReactions=a}),98);
__d("WAWebDBProcessReactionsMsgs",["WAWebApiChat","WAWebBackendApi","WAWebDBCreateOrUpdateReactions","WAWebDBMarkFutureproofMessagesReparsed","WAWebLastAddOnDBSerialization","WAWebReactionsBEUtils","WAWebShouldUpdateLastAddOnPreview","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length>0){var b=(yield d("WAWebReactionsBEUtils").createReactionsRowFromMsg(a));b=(yield d("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions(b));d("WAWebReactionsBEUtils").updateHasReactionFromParent(b);a=a.map(function(a){return a.id.toString()});yield d("WAWebDBMarkFutureproofMessagesReparsed").markFutureproofMessagesReparsed(a);a=(yield d("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates(b.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromReactionRowType(a)})));yield d("WAWebApiChat").bulkUpdateChatLastAddOnPreview(a);d("WAWebBackendApi").frontendFireAndForget("updateChatLastAddOnPreview",{chatMap:a})}});return h.apply(this,arguments)}g.processReactionMsgs=a}),98);
__d("WAWebDeleteReactionsJob",["WALogger","WAWebDBDeleteReactions","WAWebDBMessageDelete","WAWebDefinePersistedJob","WAWebMsgKey","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Msg table for chat: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Msg table, reactionMsgKeys is undefined, parentMsgKeys length ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Reactions table returned undefined, parentMsgKeys length ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: Deleting reactions from Reactions table for chat: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: NOOP step for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted: deleteReaction persisted job started"]);m=function(){return a};return a}a=d("WAWebDefinePersistedJob").defineWebPersistedJob().step("deleteReactions",function(a){var b=a.chatId;a=a.parentMsgKeys;d("WALogger").LOG(m());d("WALogger").DEV(l(),b);return{chatId:b,parentMsgKeys:a}}).step("deleteReactionsFromReactionsTable",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatId;a=a.parentMsgKeys;d("WALogger").DEV(k(),b);b=(yield d("WAWebDBDeleteReactions").deleteReactionsByParentMessageKeys(a));if(!b){d("WALogger").LOG(j(),a.length);return[]}return b});return function(b){return a.apply(this,arguments)}}()).finalStep("deleteReactionsFromMessageTable",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.chatId;b=b.parentMsgKeys;var f=[];a||d("WALogger").LOG(i(),b.length);a.forEach(function(a){c("WAWebMsgKey").fromString(a).fromMe&&f.push(a)});f.length>0&&(d("WALogger").DEV(h(),e),yield d("WAWebDBMessageDelete").removeMessagesFromHistory(f));return a});return function(b,c){return a.apply(this,arguments)}}()).end();g.deleteReactions=a}),98);
__d("WAWebReactionsParseWebMsgInfoReaction",["WALogger","WANullthrows","WAWebAddOnParseWebMsgInfo","WAWebE2EProtoUtils","WAWebWid","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] parseWebMsgInfoReaction failed with error "," and stack ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseWebMsgInfoReaction:convertToTextWithoutSpecialEmojis reaction text is null."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseWebMsgInfoReaction: reaction sender should be a wid."]);j=function(){return a};return a}function a(a,b){var e=[];try{if(a==null||a.reactions==null)return e;if(b==null||b.reactions==null)return e;b.reactions.forEach(function(a){var f=a.key,g=a.senderTimestampMs,h=a.text;a=a.unread;h=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis((h=h)!=null?h:"");f=c("WANullthrows")(d("WAWebAddOnParseWebMsgInfo").buildAddonMsgKey(f));var k=f.msgKey;f=f.sender;f==null||!(f instanceof c("WAWebWid"))?d("WALogger").ERROR(j()):h==null?d("WALogger").ERROR(i()):e.push({id:k,reactionTimestamp:g,reactionText:h,reactionParentKey:b.id,sender:d("WAWebWidFactory").createWid(f.toString()),unread:k.fromMe?!1:a===!0})})}catch(a){d("WALogger").ERROR(h(),a==null?void 0:a.name,a==null?void 0:a.stack)}return e}g.parseWebMsgInfoReaction=a}),98);
__d("WAWebDBChangeOrphanStateReactions",["WAWebModelStorageUtils","WAWebSchemaReactions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["reactions"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=a.map(function(a){return[a,1]});c=(yield d("WAWebSchemaReactions").getReactionsTable().anyOf(["parentMsgKey","orphan"],c));c.forEach(function(a){a.orphan=0,a.orphanReason=void 0});yield b.bulkCreateOrReplace(c);return c});return function(a){return c.apply(this,arguments)}}())}g.changeOrphanStateReactions=a}),98);
__d("WAWebCheckUpdateOrphanReactions",["WALogger","WAWebAddonGatingUtils","WAWebAddonProcessMsgs","WAWebBackendApi","WAWebDBChangeOrphanStateReactions","WAWebMsgType","WAWebReactionDataUtils","WAWebStoreOrphans","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["checkUpdateForOrphanReactions: error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Updating reaction orphans"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebDBChangeOrphanStateReactions").changeOrphanStateReactions(a));d("WALogger").DEV(i()).tags("checkUpdateForOrphanReactions");if(d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(d("WAWebMsgType").MSG_TYPE.REACTION)){var b=(yield d("WAWebAddonProcessMsgs").processMsgsAndGetOrphans(a.map(function(a){return d("WAWebReactionDataUtils").reactionRowToReactionMsgData(a)})));b=b.orphans;yield d("WAWebStoreOrphans").storeOrphans(b)}else d("WAWebBackendApi").frontendFireAndForget("checkUpdateForOrphanReactions",{updatedRecords:a})}catch(a){d("WALogger").WARN(h(),a)}});return j.apply(this,arguments)}g.checkUpdateForOrphanReactions=a}),98);
__d("WAWebReactionsParseReactionEncMessageProto",["WAWebE2EProtoUtils","WAWebMsgType","WAWebReactionEncMessageValidationError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.encReactionMessage;if(b==null)return;var c=b.encIv,e=b.encPayload;b=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b.targetMessageKey,a);if(b==null)throw new(d("WAWebReactionEncMessageValidationError").ReactionEncMessageValidationError)(d("WAWebReactionEncMessageValidationError").ReactionEncValidationErrorCode.MISSING_TARGET_MSG_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);if(c==null)throw new(d("WAWebReactionEncMessageValidationError").ReactionEncMessageValidationError)(d("WAWebReactionEncMessageValidationError").ReactionEncValidationErrorCode.INVALID_ENC_IV,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);if(e==null)throw new(d("WAWebReactionEncMessageValidationError").ReactionEncMessageValidationError)(d("WAWebReactionEncMessageValidationError").ReactionEncValidationErrorCode.INVALID_ENC_PAYLOAD,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.REACTION_ENC,kind:d("WAWebMsgType").MsgKind.ReactionEncrypted,encIv:c,encPayload:e,targetMessageKey:b}),contextInfo:null}}g["default"]=a}),98);
__d("WAWebReactionsParseReactionMessageProto",["WALongInt","WAWebConstantsDeprecated","WAWebE2EProtoUtils","WAWebMsgType","WAWebReactionsBEUtils","WAWebReactionsValidationError","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf;a=a.baseMessage;b=b.reactionMessage;if(b==null)return;var c=h(b),e=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b.key,a);b=d("WALongInt").maybeNumberOrThrowIfTooLarge(b.senderTimestampMs);if(e==null)throw new(d("WAWebReactionsValidationError").ReactionValidationError)(d("WAWebReactionsValidationError").ReactionValidationErrorCode.MISSING_PARENT_MSG_KEY,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);if(b==null)throw new(d("WAWebReactionsValidationError").ReactionValidationError)(d("WAWebReactionsValidationError").ReactionValidationErrorCode.MISSING_TIMESTAMP,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.REACTION,kind:d("WAWebMsgType").MsgKind.ReactionDecrypted,reactionParentKey:e,reactionText:c,reactionTimestamp:b,read:!1}),contextInfo:null}}function h(a){a=a.text;if(a!=null&&a.length>c("WAWebConstantsDeprecated").REACTION_CONTENT_MAX_LENGTH)throw new(d("WAWebReactionsValidationError").ReactionValidationError)(d("WAWebReactionsValidationError").ReactionValidationErrorCode.INVALID_REACTION_TEXT_LENGTH,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_REACTION_TEXT);return(a=d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(a))!=null?a:d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT}g["default"]=a}),98);
__d("WAWebReactionDataUtils",["WANullthrows","WAWebMsgGetters","WAWebMsgKey","WAWebMsgKeyUtils","WAWebMsgType","WAWebReactionsBEUtils","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){var b=c("WAWebMsgKey").fromString(a.msgKey),e=d("WAWebMsgKeyUtils").msgKeyToTargetInfo(b,d("WAWebMsgKeyUtils").TranslateMsgKeyType.Addon),f=e.from,g=e.to;e=e.author;return{id:b,to:g,from:f,author:e,type:d("WAWebMsgType").MSG_TYPE.REACTION,kind:d("WAWebMsgType").MsgKind.ReactionDecrypted,reactionParentKey:c("WAWebMsgKey").fromString(a.parentMsgKey),reactionText:a.reactionText,reactionTimestamp:a.timestamp,t:(b=a.t)!=null?b:void 0,ack:(g=a.ack)!=null?g:void 0,read:(f=a.read)!=null?f:!1}}function b(a){var b;return{msgKey:a.id.toString(),parentMsgKey:a.reactionParentKey.toString(),senderUserJid:c("WANullthrows")(d("WAWebMsgGetters").getSender(a)).toString(),reactionText:a.reactionText,timestamp:a.reactionTimestamp,t:d("WAWebMsgGetters").getT(a),ack:(b=d("WAWebMsgGetters").getAck(a))!=null?b:void 0,orphan:0,read:a.read}}function e(a){var b=a.id,c=a.reactionTimestamp,e=a.reactionText,f=a.reactionParentKey,g=a.sender;a=a.unread;g=d("WAWebWidFactory").toUserWid(g);var h=0;return{msgKey:b.toString(),parentMsgKey:f.toString(),senderUserJid:g.toString(),reactionText:(b=e)!=null?b:d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT,timestamp:c,orphan:h,read:!a}}g.reactionRowToReactionMsgData=a;g.reactionMsgDataToReactionRow=b;g.webMsgInfoReactionTypeToReactionsRow=e}),98);
__d("WAWebReactionsBEUtils",["WALogger","WALongInt","WANullthrows","WAWebAddonQueryUtils","WAWebBotGenTypingIndicatorMsg","WAWebDBGetReactions","WAWebMessageAssociationConstants","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebPnhGatingUtils","WAWebSchemaMessage","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["createReactionsRowFromMsg: reactions not allowed for this message type ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["createReactionsRowFromMsg: sender or reactionMsg are null"]);i=function(){return a};return a}var j="",k=new Set([(f=d("WAWebMsgType")).MSG_TYPE.CIPHERTEXT,f.MSG_TYPE.REVOKED,f.MSG_TYPE.DEBUG,f.MSG_TYPE.DEBUG_PLACEHOLDER,f.MSG_TYPE.GP2,f.MSG_TYPE.NOTIFICATION,f.MSG_TYPE.NEWSLETTER_NOTIFICATION,f.MSG_TYPE.NOTIFICATION_TEMPLATE,f.MSG_TYPE.E2E_NOTIFICATION,f.MSG_TYPE.CALL_LOG]);function l(a){var b=a.type,c=a.subtype;a=a.futureproofType;if(b===d("WAWebMsgType").MSG_TYPE.UNKNOWN)return a!=null&&d("WAWebMessageAssociationConstants").orphanIneligibleFutureproofTypes.has(a);return k.has(b)||b===d("WAWebMsgType").MSG_TYPE.CHAT&&c===d("WAWebBotGenTypingIndicatorMsg").BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE?!1:!0}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],e=[];a.forEach(function(a){a&&e.push(a.reactionParentKey)});var f=new Map();d("WAWebPnhGatingUtils").isMatFullyEnabled()&&a.forEach(function(a){var b=a.reactionParentKey,g=d("WAWebMsgGetters").getOriginalSender(a);if(b!=null&&g!=null&&b.remote.isUser()&&!c("WAWebWid").equals(g,b.remote)){b=c("WAWebMsgKey").from({fromMe:b.fromMe,id:b.id,participant:b.participant,remote:g});e.push(b);f.set(a.reactionParentKey.remote,b.toString())}});var g=(yield d("WAWebAddonQueryUtils").getParentMsgsByMsgKey(e));a.forEach(function(a){var e;e=(e=a.author)!=null?e:a.from;if(!e||!a){d("WALogger").WARN(i());return}var k=g.get(a.reactionParentKey.toString());if(d("WAWebPnhGatingUtils").isMatFullyEnabled()&&!k){var m=f.get(a.reactionParentKey.remote);m!=null&&(k=g.get(m))}if(k&&!l(k)){d("WALogger").WARN(h(),k.type);return}m=d("WAWebWidFactory").toUserWid(e);k={msgKey:a.id.toString(),parentMsgKey:(k=(e=k)==null?void 0:e.id.toString())!=null?k:a.reactionParentKey.toString(),senderUserJid:m.toString(),reactionText:(e=a.reactionText)!=null?e:j,timestamp:a.reactionTimestamp,orphan:0,orphanReason:void 0,read:!1,t:c("WANullthrows")(d("WALongInt").maybeNumberOrThrowIfTooLarge(a.t))};b.push(k)});return b});return m.apply(this,arguments)}function e(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],c=[];a.forEach(function(a){var d=a.parentMsgKey,e=a.orphan;a=a.reactionText;if(e!==1)if(a!==j){e={id:d,hasReaction:!0};c.push(e)}else b.push(d)});var e=(yield d("WAWebDBGetReactions").getFilteredReactionsFromParentMsgs(b));b.forEach(function(a){var b=e.get(a);b=b&&b.length>0||!1;a={id:a,hasReaction:b};c.push(a)});return d("WAWebSchemaMessage").getMessageTable().bulkCreateOrMerge(c)});return n.apply(this,arguments)}g.REVOKED_REACTION_TEXT=j;g.canHaveReactions=l;g.createReactionsRowFromMsg=a;g.updateHasReactionFromParent=e}),98);
__d("WAWebParseProtocolAdminRevokeMessageProto",["WAWebAck","WAWebProtocolRevokeMessageUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage,e=a.editAttr,f=a.msgContext;a=a.msgMeta;if(e!==d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE)return;return d("WAWebProtocolRevokeMessageUtils").parseProtocolRevokeMessageProto({messageProtobuf:b,baseMessage:c,editAttr:e,msgContext:f,msgMeta:a})}g["default"]=a}),98);
__d("WAWebParseProtocolSenderRevokeMessageProto",["WAWebAck","WAWebProtocolRevokeMessageUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage,e=a.editAttr,f=a.msgContext;a=a.msgMeta;if(e!==d("WAWebAck").EDIT_ATTR.SENDER_REVOKE)return;return d("WAWebProtocolRevokeMessageUtils").parseProtocolRevokeMessageProto({messageProtobuf:b,baseMessage:c,editAttr:e,msgContext:f,msgMeta:a})}g["default"]=a}),98);
__d("WAWebProtocolRevokeMessageUtils",["WALogger","WAWebAck","WAWebE2EProtoUtils","WAWebHandleMsgError","WAWebHandleMsgMetaUtils","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebWamEnumE2eFailureReason"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseProtocolRevokeMessageProto: error:",", stack: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["missing a revoke message key "," (",") for "," from "," for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["found comment revoke"]);j=function(){return a};return a}var k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="ProtocolRevokeMessageValidationError",a)||babelHelpers.assertThisInitialized(c)}return a}(d("WAWebHandleMsgError").MessageValidationError);function a(a){var b=a.messageProtobuf,c=a.baseMessage,e=a.editAttr,f=a.msgContext;a=a.msgMeta;b=b.protocolMessage;if(b==null)return;var g=b.type;b=b.key;if(f!=="relay"&&g!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.EPHEMERAL_SETTING)return;if(g!==d("WAWebProtobufsE2E.pb").Message$ProtocolMessage$Type.REVOKE)return;((f=c.author)==null?void 0:f.isLid())&&d("WAWebHandleMsgMetaUtils").isCommentMsgMeta(a)?(d("WALogger").LOG(j()),f=d("WAWebE2EProtoUtils").translateAddonMessageKeyToLocalReference(b,c)):f=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(b,c);if(f==null){d("WALogger").LOG(i(),b==null?void 0:b.id,Boolean(b),c.id,c.author,g);throw new k("protocol_revoke_missing_key",d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER)}if(e===d("WAWebAck").EDIT_ATTR.ADMIN_REVOKE)a="admin_revoke";else if(e===d("WAWebAck").EDIT_ATTR.SENDER_REVOKE)a="sender_revoke";else throw new k("protocol_revoke_missing_edit_attr",d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);try{return{msgData:babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.ProtocolRevoke,subtype:a,protocolMessageKey:f}),contextInfo:null}}catch(a){d("WALogger").WARN(h(),a==null?void 0:a.name,a==null?void 0:a.stack).tags("messaging").sendLogs("ProtocolRevokeParseError");throw a}}g.ProtocolRevokeMessageValidationError=k;g.parseProtocolRevokeMessageProto=a}),98);
__d("WAWebGenerateImageReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebGenerateVideoReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebParseImageMessageProto",["WALongInt","WATimeUtils","WAWebAssociationProcessor","WAWebConvertAssociationTypeFromProto","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMediaMessageGetValidatedProperties","WAWebMessageAssociationGatingUtils","WAWebMessageAssociationValidation","WAWebMsgType","WAWebWamEnumE2eFailureReason","nullthrows"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,e=a.baseMessage,f=a.msgContext,g=a.messageAssociation;a=a.msgMeta;b=b.imageMessage;if(b==null)return;var h=b.directPath,i=b.staticUrl,j=b.mimetype,k=b.caption,l=b.height,m=b.width,n=b.mediaKeyTimestamp,o=b.jpegThumbnail,p=b.interactiveAnnotations,q=b.scanLengths,r=b.scansSidecar,s=b.viewOnce,t=b.thumbnailDirectPath,u=b.thumbnailSha256,v=b.thumbnailEncSha256,w=b.contextInfo,x=b.annotations;f=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,e,f,d("WAWebMsgType").MSG_TYPE.IMAGE);var y=f.mediaKey,z=f.fileSha256,A=f.fileEncSha256,B=f.fileLength;f=f.url;f=babelHelpers["extends"]({},e,{type:d("WAWebMsgType").MSG_TYPE.IMAGE,kind:d("WAWebMsgType").MsgKind.Image,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(f),directPath:h||"",staticUrl:i||"",mimetype:j||"",caption:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(k),filehash:d("WAWebE2EProtoParserApi").decodeBytes(z),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(A),size:B,height:l||0,width:m||0,mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(y),mediaKeyTimestamp:n!=null?d("WALongInt").numberOrThrowIfTooLarge(n):d("WATimeUtils").unixTime(),body:d("WAWebE2EProtoParserApi").decodeBytes(o)||"",interactiveAnnotations:(x==null?void 0:x.length)>0?x:p,scanLengths:q,scansSidecar:r,isViewOnce:s===!0,thumbnailDirectPath:t,thumbnailSha256:d("WAWebE2EProtoParserApi").decodeBytes(u),thumbnailEncSha256:d("WAWebE2EProtoParserApi").decodeBytes(v),statusMentioned:a==null?void 0:a.statusMentioned});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(f,b);if(g&&d("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()){h=d("WAWebE2EProtoUtils").translateRegularMessageKeyToLocalReference(g.parentMessageKey,e);i=d("WAWebConvertAssociationTypeFromProto").convertAssociationTypeFromProtoToClientSupportedAssociationType(g.associationType);if(i==null)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.UNSUPPORTED_ASSOCIATION_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);j=d("WAWebAssociationProcessor").getAssociationProcessorByAssociationType(i);if(j==null)throw new(d("WAWebMessageAssociationValidation").MessageAssociationValidationError)(d("WAWebMessageAssociationValidation").MessageAssociationValidationErrorCode.UNSUPPORTED_ASSOCIATION_TYPE,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);k=babelHelpers["extends"]({},f,{kind:"associatedImage",parentMsgKey:c("nullthrows")(h),associationType:i,viewMode:j==null?void 0:j.viewMode});return{msgData:k,contextInfo:w}}return{msgData:f,contextInfo:w}}g["default"]=a}),98);
__d("WAWebParseVideoMessageProto",["WALongInt","WATimeUtils","WAWebE2EProtoParserApi","WAWebE2EProtoUtils","WAWebMediaMessageGetValidatedProperties","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b=a.messageProtobuf,c=a.baseMessage,e=a.msgContext;a=a.msgMeta;b=b.videoMessage;if(b==null)return;var f=b.directPath,g=b.staticUrl,h=b.mimetype,i=b.caption,j=b.height,k=b.width,l=b.mediaKeyTimestamp,m=b.jpegThumbnail,n=b.interactiveAnnotations,o=b.viewOnce,p=b.thumbnailDirectPath,q=b.thumbnailSha256,r=b.thumbnailEncSha256,s=b.contextInfo,t=b.gifPlayback,u=b.gifAttribution,v=b.seconds,w=b.streamingSidecar,x=b.annotations;e=d("WAWebMediaMessageGetValidatedProperties").getValidatedMediaMessageProperties(b,c,e,d("WAWebMsgType").MSG_TYPE.VIDEO);var y=e.mediaKey,z=e.fileSha256,A=e.fileEncSha256,B=e.fileLength;e=e.url;c=babelHelpers["extends"]({},c,{type:d("WAWebMsgType").MSG_TYPE.VIDEO,kind:d("WAWebMsgType").MsgKind.Video,deprecatedMms3Url:d("WAWebE2EProtoParserApi").decodeUrl(e),directPath:f,staticUrl:g||"",mimetype:h,caption:d("WAWebE2EProtoUtils").convertToTextWithoutSpecialEmojis(i),filehash:d("WAWebE2EProtoParserApi").decodeBytes(z),encFilehash:d("WAWebE2EProtoParserApi").decodeBytes(A),size:B,height:j,width:k,mediaKey:d("WAWebE2EProtoParserApi").decodeBytes(y),mediaKeyTimestamp:l!=null?d("WALongInt").numberOrThrowIfTooLarge(l):d("WATimeUtils").unixTime(),duration:""+(v||0),body:d("WAWebE2EProtoParserApi").decodeBytes(m)||"",interactiveAnnotations:(x==null?void 0:x.length)>0?x:n,isViewOnce:o===!0,thumbnailDirectPath:p,thumbnailSha256:d("WAWebE2EProtoParserApi").decodeBytes(q),thumbnailEncSha256:d("WAWebE2EProtoParserApi").decodeBytes(r),isGif:t,gifAttribution:u,streamingSidecar:w,statusMentioned:a==null?void 0:a.statusMentioned});d("WAWebE2EProtoParserApi").validateRequiredMediaProperties(c,b);return{msgData:c,contextInfo:s}}g["default"]=a}),98);
__d("WAWebGenerateStickerReportingTokenContent",["WAWebReportingTokenUtils"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebReportingTokenUtils").getMediaReportingTokenContent(a)}g["default"]=a}),98);
__d("WAWebPrivacyModeSystemMsg",["$InternalEnum","WAWebHandleMsgTypes.flow"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["E2EE","BSP","FB","HOSTED_GROUP"]);function a(a){if(a==null||a.actualActors===d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.Self&&a.hostStorage===d("WAWebHandleMsgTypes.flow").HostStorageEnumType.OnPremise)return h.E2EE;else if(a.actualActors===d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.Capi)return h.HOSTED_GROUP;else if(a.hostStorage===d("WAWebHandleMsgTypes.flow").HostStorageEnumType.Facebook)return h.FB;return h.BSP}function c(a,b){if(a==null)return b;return b==null?a:a.privacyModeTs>b.privacyModeTs?a:b}function e(a,b){if(a==null&&b==null)return 0;if(b==null)return 1;return a==null?-1:a.privacyModeTs-b.privacyModeTs}function f(a){var b;b=(b=a.bizInfo)==null?void 0:b.verifiedName;return b==null?null:a.biz&&b.isApi===!0?b.privacyMode:null}g.ReducedPrivacyMode=h;g.getReducedPrivacyMode=a;g.getLatestPrivacyMode=c;g.comparePrivacyMode=e;g.getPrivacyModeFromQueryExistResponse=f}),98);
__d("WAWebBizCreateBizStateChangeNotificationMsgsAction",["Promise","WAWebContactSystemMsg","WAWebHandleSingleMsg","WAWebPrivacyModeSystemMsg","WAWebUserPrefsNotifications","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){c=l(c);e=l(e);c=[k(a,c,e),j(a,c,e)];yield (h||(h=b("Promise"))).all(c.map(function(b){return b?d("WAWebHandleSingleMsg").handleSingleMsg(a,b,"bizStateChangeNotification"):null}))});return i.apply(this,arguments)}function j(a,b,c){if(d("WAWebUserPrefsNotifications").getGlobalSecurityNotifications()!==!0)return;if(b===d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE&&c!==d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE)return d("WAWebContactSystemMsg").genEncryptNotificationMsg(a,"e2e_identity_unavailable")}function k(a,b,c){if(b===c)return;switch(c){case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:return d("WAWebContactSystemMsg").genEncryptNotificationMsg(a,"encrypt_now");case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:return d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"biz_privacy_mode_to_bsp");case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:return d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"biz_privacy_mode_to_fb");case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.HOSTED_GROUP:return d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"is_capi_hosted_group")}}function l(a){return d("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(a.isBusiness?a.privacyMode:null)}g["default"]=a}),98);
__d("WAWebApiVerifiedBusinessName",["$InternalEnum","WAWebHandleMsgTypes.flow","WAWebSchemaVerifiedBusinessName","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable().all()}var h=b("$InternalEnum").Mirrored(["Replace","Merge"]);function i(a){return d("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable().get(m(a))}function c(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=h.Replace);var e=d("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable();a=m(a);b=babelHelpers["extends"]({},b,{id:a});c===h.Replace?yield e.createOrReplace(b):yield e.createOrMerge(a,b)});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield i(a));return(a==null?void 0:a.privacyMode)==null?null:l(a.privacyMode)});return k.apply(this,arguments)}function l(a){var b=d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(a.actualActors),c=d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(a.hostStorage);return b==null||c==null?null:{actualActors:b,hostStorage:c,privacyModeTs:a.privacyModeTs}}function m(a){return a.isLid()?a.toString():a.user}g.getAllVerifiedNames=a;g.VerifiedBusinessNameUpdateType=h;g.getVerifiedBusinessNameRecord=i;g.createOrUpdateVerifiedBusinessName=c;g.getPrivacyMode=e;g.convertPrivacyModeFromStorageType=l}),98);
__d("WAWebBizUpdateVerifiedInfoAction",["WAWebApiVerifiedBusinessName","WAWebBackendApi","WAWebHandlePrivacyModeUpdateMsgAction","WAWebQueryExistsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.name,e=b.level,f=b.isApi,g=b.isSmb,h=b.serial;b=b.privacyMode;b!=null&&(yield d("WAWebHandlePrivacyModeUpdateMsgAction").handlePrivacyModeTransition(a,b,{bypassVerifiedNameUpdate:!0}));d("WAWebBackendApi").frontendFireAndForget("updateContactWithVerifiedName",{contactId:a,verifiedNameInfo:{id:a,name:c,level:e,isApi:f,isSmb:g,privacyMode:b}});yield d("WAWebApiVerifiedBusinessName").createOrUpdateVerifiedBusinessName(a,{level:e,serial:h,name:c,isApi:f,isSmb:g,privacyMode:b?{actualActors:b.actualActors,hostStorage:b.hostStorage,privacyModeTs:b.privacyModeTs}:null})});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebQueryExistsJob").queryWidExists(a));if(b==null)return;b=b.bizInfo;b&&(yield h(a,b.verifiedName))});return j.apply(this,arguments)}g.updateVerifiedInfo=h;g.queryAndUpdateContactPropertiesOnNewChat=a}),98);
__d("WAWebHandlePrivacyModeUpdateMsgAction",["Promise","WAWebApiChat","WAWebApiVerifiedBusinessName","WAWebBackendApi","WAWebBizCreateBizStateChangeNotificationMsgsAction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g;f===void 0&&(f={});if(!a.isUserNotPSA()||a.isCAPISupportAccount())return;var i=(yield j(a,f.chat));if(i==null)return;if(i.isBusiness===!1)return;if(i.privacyMode==null&&e==null)return;if(i.privacyMode!=null&&e!=null&&i.privacyMode.privacyModeTs>=e.privacyModeTs)return;f=f;f=f.bypassVerifiedNameUpdate;f=f===void 0?!1:f;g={isBusiness:(g=i.isBusiness)!=null?g:!1,privacyMode:i.privacyMode};i={isBusiness:!0,privacyMode:e};d("WAWebBackendApi").frontendFireAndForget("updateBusinessInfo",{contactId:a,businessInfo:{isBusiness:!0,isEnterprise:!0,privacyMode:e}});yield (h||(h=b("Promise"))).all([f?null:d("WAWebApiVerifiedBusinessName").createOrUpdateVerifiedBusinessName(a,{isApi:!0,isSmb:!1,privacyMode:e?{actualActors:e.actualActors,hostStorage:e.hostStorage,privacyModeTs:e.privacyModeTs}:null},d("WAWebApiVerifiedBusinessName").VerifiedBusinessNameUpdateType.Merge),c("WAWebBizCreateBizStateChangeNotificationMsgsAction")(a,g,i)])});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c!=null){var e=c.contact.isBusiness;return{isBusiness:e,privacyMode:e?c.contact.privacyMode:null}}e=(yield (h||(h=b("Promise"))).all([d("WAWebApiChat").getChatRecord(a),d("WAWebApiVerifiedBusinessName").getVerifiedBusinessNameRecord(a)]));c=e[0];a=e[1];if(c==null)return null;return a==null?{isBusiness:null}:{isBusiness:!0,privacyMode:a.privacyMode==null?null:d("WAWebApiVerifiedBusinessName").convertPrivacyModeFromStorageType(a.privacyMode)}});return k.apply(this,arguments)}g.handlePrivacyModeTransition=a;g.getChatInfo=j}),98);
__d("BlobFactory",["emptyFunction"],(function(a,b,c,d,e,f){var g;function h(){try{new a.Blob(),g=!0}catch(a){g=!1}}var i=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;a.Blob?c={getBlob:function(b,c){b=b||[];c=c||{};g===void 0&&h();if(g)return new a.Blob(b,c);else{var d=new i();for(var e=0;e<b.length;e++)d.append(b[e]);return d.getBlob(c.type)}},isSupported:b("emptyFunction").thatReturnsTrue}:c={getBlob:function(){},isSupported:b("emptyFunction").thatReturnsFalse};e.exports=c}),null);
__d("CometStyleXDarkTheme",[],(function(a,b,c,d,e,f){e.exports={"fds-black":"black","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"black","fds-blue-30":"black","fds-blue-40":"black","fds-blue-60":"black","fds-blue-70":"black","fds-blue-80":"black","fds-button-text":"black","fds-comment-background":"black","fds-dark-mode-gray-35":"black","fds-dark-mode-gray-50":"black","fds-dark-mode-gray-70":"black","fds-dark-mode-gray-80":"black","fds-dark-mode-gray-90":"black","fds-dark-mode-gray-100":"black","fds-gray-00":"black","fds-gray-05":"black","fds-gray-10":"black","fds-gray-20":"black","fds-gray-25":"black","fds-gray-30":"black","fds-gray-45":"black","fds-gray-70":"black","fds-gray-80":"black","fds-gray-90":"black","fds-gray-100":"black","fds-green-55":"black","fds-green-65":"black","fds-highlight":"black","fds-highlight-cell-background":"black","fds-primary-icon":"white","fds-primary-text":"white","fds-red-55":"black","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"black","fds-spectrum-blue-gray-tint-70":"black","fds-spectrum-cherry":"black","fds-spectrum-cherry-tint-70":"black","fds-spectrum-grape-tint-70":"black","fds-spectrum-grape-tint-90":"black","fds-spectrum-lemon-dark-1":"black","fds-spectrum-lemon-tint-70":"black","fds-spectrum-lime":"black","fds-spectrum-lime-tint-70":"black","fds-spectrum-orange-tint-70":"black","fds-spectrum-orange-tint-90":"black","fds-spectrum-seafoam-tint-70":"black","fds-spectrum-slate-dark-2":"black","fds-spectrum-slate-tint-70":"black","fds-spectrum-teal":"black","fds-spectrum-teal-dark-1":"black","fds-spectrum-teal-dark-2":"black","fds-spectrum-teal-tint-70":"black","fds-spectrum-teal-tint-90":"black","fds-spectrum-tomato":"black","fds-spectrum-tomato-tint-30":"black","fds-spectrum-tomato-tint-90":"black","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"black","fds-unified-gray-20":"black","fds-white":"black","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"black",accent:"hsl(214, 100%, 59%)","always-white":"white","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"rgba(255,255,255,0.1)","background-deemphasized":"rgba(255,255,255,0.1)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 100%, 59%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"#4599FF","border-focused":"#8A8D91","card-background":"#242526","card-background-flat":"#323436","comment-background":"#3A3B3C","comment-footer-background":"#4E4F50","dataviz-primary-1":"rgb(0,174,143)","disabled-button-background":"rgba(255, 255, 255, 0.2)","disabled-button-text":"rgba(255, 255, 255, 0.3)","disabled-icon":"rgba(255, 255, 255, 0.3)","disabled-text":"rgba(255, 255, 255, 0.3)",divider:"#3E4042","event-date":"#F3425F","fb-wordmark":"#FFFFFF","fb-logo":"#0866FF","filter-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(100%) opacity(30%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-primary-icon":"invert(89%) sepia(6%) hue-rotate(185deg)","filter-secondary-icon":"invert(62%) sepia(98%) saturate(12%) hue-rotate(175deg) brightness(90%) contrast(96%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(73%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(103.25%) hue-rotate(189deg) brightness(101%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-spinner-icon":"white","hero-banner-background":"#E85D07","hosted-view-selected-state":"rgba(45, 136, 255, 0.1)","highlight-bg":"rgba(24, 119, 242, .31)","hover-overlay":"rgba(255, 255, 255, 0.1)","inverse-text":"var(--always-white)","list-cell-chevron":"#B0B3B8","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(255, 255, 255, 0.05)","media-outer-border":"#33363A","media-pressed":"rgba(68, 73, 80, 0.35)","messenger-card-background":"#242526","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#18191A","overlay-alpha-80":"rgba(11, 11, 11, 0.8)","overlay-on-media":"rgba(0, 0, 0, 0.6)","nav-bar-background":"#242526","nav-bar-background-gradient":"linear-gradient(to top, #242526, rgba(36,37,38,.9), rgba(36,37,38,.7), rgba(36,37,38,.4), rgba(36,37,38,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #18191A, rgba(24,25,26,.9), rgba(24,25,26,.7), rgba(24,25,26,.4), rgba(24,25,26,0))",negative:"hsl(350, 87%, 55%)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"#E7F3FF","non-media-pressed":"rgba(68, 73, 80, 0.15)","non-media-pressed-on-dark":"rgba(255, 255, 255, 0.3)","notification-badge":"#e41e3f","placeholder-icon":"#8A8D91","placeholder-image":"rgb(164, 167, 171)","placeholder-text":"#8A8D91","placeholder-text-on-media":"rgba(255, 255, 255, 0.5)","popover-background":"#3E4042",positive:"#31A24C","positive-background":"#1F3520","press-overlay":"rgba(255, 255, 255, 0.2)","primary-button-background":"#2374E1","primary-button-icon":"#FFFFFF","primary-button-pressed":"#77A7FF","primary-button-text":"#FFFFFF","primary-deemphasized-button-background":"rgba(45, 136, 255, 0.2)","primary-deemphasized-button-pressed":"rgba(24, 119, 242, 0.2)","primary-deemphasized-button-pressed-overlay":"rgba(25, 110, 255, 0.15)","primary-deemphasized-button-text":"#2D88FF","primary-icon":"#E4E6EB","primary-text":"#E4E6EB","primary-text-on-media":"white","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(255, 255, 255, 0.2)","progress-ring-neutral-foreground":"#ffffff","progress-ring-on-media-background":"rgba(255, 255, 255, 0.2)","progress-ring-on-media-foreground":"#FFFFFF","progress-ring-blue-background":"rgba(45, 136, 255, 0.2)","progress-ring-blue-foreground":"hsl(214, 100%, 59%)","progress-ring-disabled-background":"rgba(122,125,130, 0.2)","progress-ring-disabled-foreground":"#7A7D82","rating-star-active":"#FF9831","scroll-thumb":"rgba(255, 255, 255, 0.3)","scroll-shadow":"0 1px 2px rgba(0, 0, 0, 0.1), 0 -1px rgba(255, 255, 255, 0.05) inset","secondary-button-background":"rgba(255,255,255,.1)","secondary-button-background-floating":"#4B4C4F","secondary-button-background-on-dark":"rgba(255, 255, 255, 0.4)","secondary-button-pressed":"rgba(0, 0, 0, 0.05)","secondary-button-stroke":"transparent","secondary-button-text":"#E4E6EB","secondary-icon":"#B0B3B8","secondary-text":"#B0B3B8","secondary-text-on-media":"rgba(255, 255, 255, 0.9)","section-header-text":"#BCC0C4","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.05)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(28, 43, 51, 0.6)","shadow-primary":"0px 0px 12px rgba(28, 43, 51, 0.1)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"#242526","switch-active":"hsl(214, 100%, 59%)","switch-inactive":"#3E4042","text-highlight":"rgba(24, 119, 242, 0.45)","input-background":"#242526","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#18191A","input-border-color":"#3E4042","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 100%, 59%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#FFFFFF","toast-background":"#242526","toast-text":"#FFFFFF","toast-text-link":"#4599FF","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"rgb(45, 136, 255)","toggle-active-icon":"#FFFFFF","toggle-active-text":"#FFFFFF","toggle-button-active-background":"#E6F2FF","tooltip-background":"rgba(11, 11, 11, 0.8)","tooltip-box-shadow":"0 2px 4px 0 var(--shadow-5)","popover-border-color":"transparent",wash:"#3E4042","web-wash":"#18191A",warning:"hsl(40, 89%, 52%)","chat-bubble-emphasis-ring-after":"white","chat-bubble-emphasis-ring-before":"black","chat-text-blockquote-color-background-line":"rgba(255, 255, 255, 0.19)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#303030","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(255, 255, 255, 0.12)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"56px","header-height":"56px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"6px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"40px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"8px","card-box-shadow":"0 12px 28px 0 var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"6px","dialog-corner-radius":"8px","glimmer-corner-radius":"8px","image-corner-radius":"4px","input-corner-radius":"6px","input-border-width":"1px","nav-list-cell-corner-radius":"8px","list-cell-corner-radius":"8px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"16px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-label-top":"22px","text-input-min-height":"64px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"6px","toast-container-max-width":"100%","toast-container-min-width":"288px","toast-container-padding-horizontal":"10px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"2px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","body-font-family":"Placeholder Font","body-font-size":"0.9375rem","body-font-weight":"400","body-line-height":"1.3333","body-emphasized-font-family":"Placeholder Font","body-emphasized-font-size":"0.9375rem","body-emphasized-font-weight":"600","body-emphasized-line-height":"1.3333","headline1-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline1-font-size":"1.75rem","headline1-font-weight":"700","headline1-line-height":"1.2143","headline2-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline2-font-size":"1.5rem","headline2-font-weight":"700","headline2-line-height":"1.25","headline3-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline3-font-size":"1.0625rem","headline3-font-weight":"700","headline3-line-height":"1.2941","meta-font-family":"Placeholder Font","meta-font-size":"0.8125rem","meta-font-weight":"400","meta-line-height":"1.3846","meta-emphasized-font-family":"Placeholder Font","meta-emphasized-font-size":"0.8125rem","meta-emphasized-font-weight":"600","meta-emphasized-line-height":"1.3846","primary-label-font-family":"Optimistic Display Medium, system-ui, sans-serif","primary-label-font-size":"1.0625rem","primary-label-font-weight":"500","primary-label-line-height":"1.2941","secondary-label-font-family":"Placeholder Font","secondary-label-font-size":"0.9375rem","secondary-label-font-weight":"500","secondary-label-line-height":"1.3333","tertiary-label-font-family":"Placeholder Font","tertiary-label-font-size":"0.6875rem","tertiary-label-font-weight":"500","tertiary-label-line-height":"1.4545","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-max-width":"700px","dialog-size-medium-width":"100%","dialog-size-small-max-width":"548px","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","glimmer-opacity-min":"0.25","glimmer-opacity-max":"1","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(235,245,255)","blue-tertiary":"rgb(4,59,114)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(226,255,152)","chartreuse-tertiary":"rgb(50,65,19)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(231,245,255)","cyan-tertiary":"rgb(15,63,93)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(92,87,210)","dataviz-secondary-2":"rgb(142,129,255)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(232,234,238)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(255,241,246)","fuschia-tertiary":"rgb(118,14,62)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(227,250,224)","green-tertiary":"rgb(26,68,27)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(255,239,254)","magenta-tertiary":"rgb(96,36,91)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(255,241,239)","orange-tertiary":"rgb(94,49,14)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(245,241,255)","purple-tertiary":"rgb(55,50,121)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(255,241,239)","red-tertiary":"rgb(118,22,27)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(227,247,241)","teal-tertiary":"rgb(10,68,56)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(255,246,161)","yellow-tertiary":"rgb(72,59,12)"}}),null);
__d("CometStyleXDefaultTheme",[],(function(a,b,c,d,e,f){e.exports={"fds-black":"#000000","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"#ECF3FF","fds-blue-30":"#AAC9FF","fds-blue-40":"#77A7FF","fds-blue-60":"#1877F2","fds-blue-70":"#2851A3","fds-blue-80":"#1D3C78","fds-button-text":"#444950","fds-comment-background":"#F2F3F5","fds-dark-mode-gray-35":"#CCCCCC","fds-dark-mode-gray-50":"#828282","fds-dark-mode-gray-70":"#4A4A4A","fds-dark-mode-gray-80":"#373737","fds-dark-mode-gray-90":"#282828","fds-dark-mode-gray-100":"#1C1C1C","fds-gray-00":"#F5F6F7","fds-gray-05":"#F2F3F5","fds-gray-10":"#EBEDF0","fds-gray-20":"#DADDE1","fds-gray-25":"#CCD0D5","fds-gray-30":"#BEC3C9","fds-gray-45":"#8D949E","fds-gray-70":"#606770","fds-gray-80":"#444950","fds-gray-90":"#303338","fds-gray-100":"#1C1E21","fds-green-55":"#00A400","fds-green-65":"#51CE70","fds-highlight":"#3578E5","fds-highlight-cell-background":"#ECF3FF","fds-primary-icon":"#1C1E21","fds-primary-text":"#1C1E21","fds-red-55":"#FA383E","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"#E4F0F6","fds-spectrum-blue-gray-tint-70":"#CFD1D5","fds-spectrum-cherry":"#F35369","fds-spectrum-cherry-tint-70":"#FBCCD2","fds-spectrum-grape-tint-70":"#DDD5F0","fds-spectrum-grape-tint-90":"#F4F1FA","fds-spectrum-lemon-dark-1":"#F5C33B","fds-spectrum-lemon-tint-70":"#FEF2D1","fds-spectrum-lime":"#A3CE71","fds-spectrum-lime-tint-70":"#E4F0D5","fds-spectrum-orange-tint-70":"#FCDEC5","fds-spectrum-orange-tint-90":"#FEF4EC","fds-spectrum-seafoam-tint-70":"#CAEEF9","fds-spectrum-slate-dark-2":"#89A1AC","fds-spectrum-slate-tint-70":"#EAEFF2","fds-spectrum-teal":"#6BCEBB","fds-spectrum-teal-dark-1":"#4DBBA6","fds-spectrum-teal-dark-2":"#31A38D","fds-spectrum-teal-tint-70":"#D2F0EA","fds-spectrum-teal-tint-90":"#F0FAF8","fds-spectrum-tomato":"#FB724B","fds-spectrum-tomato-tint-30":"#F38E7B","fds-spectrum-tomato-tint-90":"#FDEFED","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"#1455B0","fds-unified-gray-20":"#323436","fds-white":"#FFFFFF","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"#FFBA00",accent:"hsl(214, 89%, 52%)","always-white":"#FFFFFF","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"#F0F2F5","background-deemphasized":"#F0F2F5","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 89%, 52%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"#216FDB","border-focused":"#65676B","card-background":"#FFFFFF","card-background-flat":"#F7F8FA","comment-background":"#F0F2F5","comment-footer-background":"#F6F9FA","dataviz-primary-1":"rgb(0,174,143)","disabled-button-background":"#E4E6EB","disabled-button-text":"#BCC0C4","disabled-icon":"#BCC0C4","disabled-text":"#BCC0C4",divider:"#CED0D4","event-date":"#F3425F","fb-wordmark":"#0866FF","fb-logo":"#0866FF","filter-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(80%) sepia(6%) saturate(200%) saturate(120%) hue-rotate(173deg) brightness(98%) contrast(89%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-primary-icon":"invert(8%) sepia(10%) saturate(200%) saturate(200%) saturate(166%) hue-rotate(177deg) brightness(104%) contrast(91%)","filter-secondary-icon":"invert(39%) sepia(21%) saturate(200%) saturate(109.5%) hue-rotate(174deg) brightness(94%) contrast(86%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(30%) sepia(98%) saturate(200%) saturate(200%) saturate(200%) saturate(166.5%) hue-rotate(192deg) brightness(91%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-spinner-icon":"#65676B","hero-banner-background":"#FFFFFF","hosted-view-selected-state":"rgba(45, 136, 255, 0.1)","highlight-bg":"#E7F3FF","hover-overlay":"rgba(0, 0, 0, 0.05)","inverse-text":"var(--always-white)","list-cell-chevron":"#65676B","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(0, 0, 0, 0.1)","media-outer-border":"#FFFFFF","media-pressed":"rgba(68, 73, 80, 0.35)","messenger-card-background":"#FFFFFF","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#F0F2F5","overlay-alpha-80":"rgba(244, 244, 244, 0.8)","overlay-on-media":"rgba(0, 0, 0, 0.6)","nav-bar-background":"#FFFFFF","nav-bar-background-gradient":"linear-gradient(to top, #FFFFFF, rgba(255,255,255.9), rgba(255,255,255,.7), rgba(255,255,255,.4), rgba(255,255,255,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #F0F2F5, rgba(240,242,245.9), rgba(240,242,245,.7), rgba(240,242,245,.4), rgba(240,242,245,0))",negative:"hsl(350, 87%, 55%)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"#E7F3FF","non-media-pressed":"rgba(68, 73, 80, 0.15)","non-media-pressed-on-dark":"rgba(255, 255, 255, 0.3)","notification-badge":"#e41e3f","placeholder-icon":"#65676B","placeholder-image":"rgb(164, 167, 171)","placeholder-text":"#65676B","placeholder-text-on-media":"rgba(255, 255, 255, 0.5)","popover-background":"#FFFFFF",positive:"#31A24C","positive-background":"#DEEFE1","press-overlay":"rgba(0, 0, 0, 0.10)","primary-button-background":"#1B74E4","primary-button-icon":"#FFFFFF","primary-button-pressed":"#77A7FF","primary-button-text":"#FFFFFF","primary-deemphasized-button-background":"#E7F3FF","primary-deemphasized-button-pressed":"rgba(0, 0, 0, 0.05)","primary-deemphasized-button-pressed-overlay":"rgba(25, 110, 255, 0.15)","primary-deemphasized-button-text":"#1877F2","primary-icon":"#050505","primary-text":"#050505","primary-text-on-media":"#FFFFFF","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(0, 0, 0, 0.2)","progress-ring-neutral-foreground":"#000000","progress-ring-on-media-background":"rgba(255, 255, 255, 0.2)","progress-ring-on-media-foreground":"#FFFFFF","progress-ring-blue-background":"rgba(24, 119, 242, 0.2)","progress-ring-blue-foreground":"hsl(214, 89%, 52%)","progress-ring-disabled-background":"rgba(190,195,201, 0.2)","progress-ring-disabled-foreground":"#BEC3C9","rating-star-active":"#EB660D","scroll-thumb":"#BCC0C4","scroll-shadow":"0 1px 2px rgba(0, 0, 0, 0.1), 0 -1px rgba(0, 0, 0, 0.1) inset","secondary-button-background":"#E4E6EB","secondary-button-background-floating":"#ffffff","secondary-button-background-on-dark":"rgba(0, 0, 0, 0.4)","secondary-button-pressed":"rgba(0, 0, 0, 0.05)","secondary-button-stroke":"transparent","secondary-button-text":"#050505","secondary-icon":"#65676B","secondary-text":"#65676B","secondary-text-on-media":"rgba(255, 255, 255, 0.9)","section-header-text":"#4B4C4F","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.5)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(52, 72, 84, 0.05)","shadow-primary":"0px 5px 12px rgba(52, 72, 84, 0.2)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"#FFFFFF","switch-active":"hsl(214, 89%, 52%)","switch-inactive":"#CED0D4","text-highlight":"rgba(24, 119, 242, 0.2)","input-background":"#FFFFFF","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#F0F2F5","input-border-color":"#CED0D4","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 89%, 52%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#000000","toast-background":"#FFFFFF","toast-text":"#1C2B33","toast-text-link":"#216FDB","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"#E7F3FF","toggle-active-icon":"rgb(24, 119, 242)","toggle-active-text":"rgb(24, 119, 242)","toggle-button-active-background":"#E7F3FF","tooltip-background":"rgba(244, 244, 244, 0.8)","tooltip-box-shadow":"0 2px 4px 0 var(--shadow-5)","popover-border-color":"transparent",wash:"#E4E6EB","web-wash":"#F0F2F5",warning:"hsl(40, 89%, 52%)","chat-bubble-emphasis-ring-after":"black","chat-bubble-emphasis-ring-before":"white","chat-text-blockquote-color-background-line":"rgba(0, 0, 0, 0.12)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#F0F0F0","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(0, 0, 0, 0.03)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"56px","header-height":"56px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"6px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"40px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"8px","card-box-shadow":"0 12px 28px 0 var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"6px","dialog-corner-radius":"8px","glimmer-corner-radius":"8px","image-corner-radius":"4px","input-corner-radius":"6px","input-border-width":"1px","nav-list-cell-corner-radius":"8px","list-cell-corner-radius":"8px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"16px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-label-top":"22px","text-input-min-height":"64px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"6px","toast-container-max-width":"100%","toast-container-min-width":"288px","toast-container-padding-horizontal":"10px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"2px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","body-font-family":"Placeholder Font","body-font-size":"0.9375rem","body-font-weight":"400","body-line-height":"1.3333","body-emphasized-font-family":"Placeholder Font","body-emphasized-font-size":"0.9375rem","body-emphasized-font-weight":"600","body-emphasized-line-height":"1.3333","headline1-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline1-font-size":"1.75rem","headline1-font-weight":"700","headline1-line-height":"1.2143","headline2-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline2-font-size":"1.5rem","headline2-font-weight":"700","headline2-line-height":"1.25","headline3-font-family":"Optimistic Display Bold, system-ui, sans-serif","headline3-font-size":"1.0625rem","headline3-font-weight":"700","headline3-line-height":"1.2941","meta-font-family":"Placeholder Font","meta-font-size":"0.8125rem","meta-font-weight":"400","meta-line-height":"1.3846","meta-emphasized-font-family":"Placeholder Font","meta-emphasized-font-size":"0.8125rem","meta-emphasized-font-weight":"600","meta-emphasized-line-height":"1.3846","primary-label-font-family":"Optimistic Display Medium, system-ui, sans-serif","primary-label-font-size":"1.0625rem","primary-label-font-weight":"500","primary-label-line-height":"1.2941","secondary-label-font-family":"Placeholder Font","secondary-label-font-size":"0.9375rem","secondary-label-font-weight":"500","secondary-label-line-height":"1.3333","tertiary-label-font-family":"Placeholder Font","tertiary-label-font-size":"0.6875rem","tertiary-label-font-weight":"500","tertiary-label-line-height":"1.4545","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-max-width":"700px","dialog-size-medium-width":"100%","dialog-size-small-max-width":"548px","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","glimmer-opacity-min":"0.25","glimmer-opacity-max":"1","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(4,59,114)","blue-tertiary":"rgb(235,245,255)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(50,65,19)","chartreuse-tertiary":"rgb(226,255,152)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(15,63,93)","cyan-tertiary":"rgb(231,245,255)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(83,78,191)","dataviz-secondary-2":"rgb(103,96,228)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(51,51,52)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(118,14,62)","fuschia-tertiary":"rgb(255,241,246)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(26,68,27)","green-tertiary":"rgb(227,250,224)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(96,36,91)","magenta-tertiary":"rgb(255,239,254)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(94,49,14)","orange-tertiary":"rgb(255,241,239)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(55,50,121)","purple-tertiary":"rgb(245,241,255)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(118,22,27)","red-tertiary":"rgb(255,241,239)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(10,68,56)","teal-tertiary":"rgb(227,247,241)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(72,59,12)","yellow-tertiary":"rgb(255,246,161)"}}),null);
__d("StyleXSheet",["invariant","ExecutionEnvironment","Locale","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j="__fb-light-mode",k="__fb-dark-mode";function l(a,b){var c=[];c.push(a+" {");for(a in b){var d=b[a];c.push("  --"+a+": "+d+";")}c.push("}");return c.join("\n")}function m(){var a=document.createElement("style");a.setAttribute("type","text/css");a.setAttribute("data-styled","true");var b=document.head||document.getElementsByTagName("head")[0];b||h(0,2655);b.appendChild(a);return a}function n(){return window.CSS!=null&&window.CSS.supports!=null&&window.CSS.supports("--fake-var:0")}var o=/var\(--(.*?)\)/g;a=function(){function a(a){var b;this.tag=null;this.injected=!1;this.ruleForPriority=new Map();this.rules=[];this.rootTheme=a.rootTheme;this.rootDarkTheme=a.rootDarkTheme;this.isSlow=(b=a.isSlow)!=null?b:typeof location==="object"&&typeof location.search==="string"?location.search.includes("stylex-slow"):!1;this.supportsVariables=(b=a.supportsVariables)!=null?b:n();this.$1=d("Locale").isRTL();this.externalRules=new Set()}var b=a.prototype;b.getVariableMatch=function(){return o};b.isHeadless=function(){return this.tag==null||!(i||(i=c("ExecutionEnvironment"))).canUseDOM};b.getTag=function(){var a=this.tag;a!=null||h(0,11103);return a};b.getCSS=function(){return this.rules.join("\n")};b.getRulePosition=function(a){return this.rules.indexOf(a)};b.getRuleCount=function(){return this.rules.length};b.inject=function(){if(this.injected)return;this.injected=!0;if(!(i||(i=c("ExecutionEnvironment"))).canUseDOM){this.injectTheme();return}this.tag=m();this.injectTheme()};b.injectTheme=function(){if(c("gkx")("21106"))return;this.rootTheme!=null&&this.insert(l(":root, ."+j,this.rootTheme),0);this.rootDarkTheme!=null&&this.insert(l("."+k+":root, ."+k,this.rootDarkTheme),0)};b.__injectCustomThemeForTesting=function(a,b){b!=null&&this.insert(l(a,b),0)};b["delete"]=function(a){var b=this.rules.indexOf(a);b>=0||h(0,2656,a);this.rules.splice(b,1);if(this.isHeadless())return;a=this.getTag();if(this.isSlow)a.removeChild(a.childNodes[b+1]);else{a=a.sheet;a||h(0,2657);a.deleteRule(b)}};b.normalizeRule=function(a){var b=this.rootTheme;return this.supportsVariables||b==null?a:a.replace(o,function(a,c){return b[c]})};b.getInsertPositionForPriority=function(a){var b=this.ruleForPriority.get(a);if(b!=null)return this.rules.indexOf(b)+1;b=Array.from(this.ruleForPriority.keys()).sort(function(a,b){return b-a}).filter(function(b){return b>a?1:0});if(b.length===0)return this.getRuleCount();b=b.pop();return this.rules.indexOf(this.ruleForPriority.get(b))};b.insert=function(a,b,c){this.injected===!1&&this.inject();c=this.$1&&c!=null?c:a;if(this.externalRules.has(c.slice(0,c.indexOf("{")).trim()))return;if(this.rules.includes(c))return;a=this.normalizeRule(c);if(this.externalRules.has(a.slice(0,a.indexOf("{")).trim()))return;c=this.getInsertPositionForPriority(b);this.rules.splice(c,0,a);this.ruleForPriority.set(b,a);if(this.isHeadless())return;b=this.getTag();if(this.isSlow){var d=document.createTextNode(a);b.insertBefore(d,b.childNodes[c])}else{d=b.sheet;if(d!=null)try{d.insertRule(a,c)}catch(a){}}};return a}();a.LIGHT_MODE_CLASS_NAME=j;a.DARK_MODE_CLASS_NAME=k;g["default"]=a}),98);
__d("CometStyleXSheet",["CometStyleXDarkTheme","CometStyleXDefaultTheme","ExecutionEnvironment","StyleXSheet"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{rootDarkTheme:c("CometStyleXDarkTheme"),rootTheme:c("CometStyleXDefaultTheme")})||this}return b}(c("StyleXSheet"));b=new a();g.DARK_MODE_CLASS_NAME=c("StyleXSheet").DARK_MODE_CLASS_NAME;g.LIGHT_MODE_CLASS_NAME=c("StyleXSheet").LIGHT_MODE_CLASS_NAME;g.CometStyleXSheet=a;g.rootStyleSheet=b}),98);
__d("CurrentLocale",["IntlCurrentLocale"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return c("IntlCurrentLocale").code}};b=a;g["default"]=b}),98);
__d("DateConsts",[],(function(a,b,c,d,e,f){var g=1e3;c=60;d=60;e=24;var h=7,i=12,j=1e3,k=30.43,l=4.333,m=365.242,n=c*d,o=n*e,p=o*h,q=o*m,r=g*c,s=r*d,t=g*o,u=t*h,v=t*m,w={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6};Object.freeze(w);function a(a,b){return new Date(a,b,0).getDate()}function b(){return Date.now()/g}var x={instantRange:{since:-864e10,until:864e10+1}};f.MS_PER_SEC=g;f.SEC_PER_MIN=c;f.MIN_PER_HOUR=d;f.HOUR_PER_DAY=e;f.DAYS_PER_WEEK=h;f.MONTHS_PER_YEAR=i;f.US_PER_MS=j;f.AVG_DAYS_PER_MONTH=k;f.AVG_WEEKS_PER_MONTH=l;f.AVG_DAYS_PER_YEAR=m;f.SEC_PER_HOUR=n;f.SEC_PER_DAY=o;f.SEC_PER_WEEK=p;f.SEC_PER_YEAR=q;f.MS_PER_MIN=r;f.MS_PER_HOUR=s;f.MS_PER_DAY=t;f.MS_PER_WEEK=u;f.MS_PER_YEAR=v;f.DAYS=w;f.getDaysInMonth=a;f.getCurrentTimeInSeconds=b;f["private"]=x}),66);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var d=this,e;this.$2=[];this.callMessageHandler=function(a){return new(h||(h=b("Promise")))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods[%s] is not a functions",a.method);return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var f=this,g={},i=(e=a==null?void 0:a(g))!=null?e:{},j=babelHelpers["extends"]({},g);function k(a){j[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return f.callMessageHandler(b)},g[a]=function(){var b=f.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend[%s] is not a functions",a);return}return b.apply(f.$1,arguments)},i[a]==null&&(i[a]=g[a])}this.$1=j;if(a!=null){e=Object.keys(i);e.forEach(k);this.proxyMethods=i}else this.proxyMethods=new Proxy(i,{get:function(a,b){a=b;i[a]==null&&k(a);return i[a]}})}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("Keys",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BACKSPACE:8,TAB:9,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRAKET:221,SINGLE_QUOTE:222});f["default"]=a}),66);
__d("Log",[],(function(a,b,c,d,e,f){"use strict";var g=-1;b={DEBUG:3,INFO:2,WARNING:1,ERROR:0};c=function(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];var h=0,i=c.replace(/%s/g,function(){return String(e[h++])}),j=window.console;j&&g>=b&&j[a in j?a:"log"](i)};function a(a){g=a}d=c.bind(null,"debug",b.DEBUG);e=c.bind(null,"info",b.INFO);var h=c.bind(null,"warn",b.WARNING),i=c.bind(null,"error",b.ERROR);f.Level=b;f.log=c;f.setLevel=a;f.debug=d;f.info=e;f.warn=h;f.error=i}),66);
__d("MainPageUrl",["ExecutionEnvironment","FBLogger","SimpleHook"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new URL("http://undefined"),j=new(d("SimpleHook").SimpleHook)();function k(){var a;return(h||(h=c("ExecutionEnvironment"))).isInBrowser&&(i==null?void 0:(a=i.searchParams)==null?void 0:a.get("workerlog"))==="debug"}function a(a){try{k()&&c("FBLogger")("worker").debug("received url "+a);var b=new URL(a,i.href||"http://undefined");i.href!==b.href?(i.href=b.href,j.call(i)):k()&&c("FBLogger")("worker").debug("ignoring url: path didn't change in "+a)}catch(a){c("FBLogger")("worker").catching(a).warn("invalid url")}}typeof window==="object"&&typeof window.location==="object"&&typeof window.location.href==="string"&&a(window.location.href);g.mainPageUrl=i;g.onMainPageUrlChange=j;g.isWorkerLogEnabled=k;g.updateMainPageUrl=a}),98);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(d("SimpleHook").SimpleHook)(),k=new(d("SimpleHook").SimpleHook)(),l="/";function m(a,b){return""+a+l+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){j.call(this,a)};b.stop=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){k.call(this,a)};return a}();function a(){(i||(i=c("performance"))).mark&&(i||(i=c("performance"))).measure&&(j.add(function(a,b){(i||(i=c("performance"))).mark(a.fullname()+"_start")}),k.add(function(a,b){(i||(i=c("performance"))).measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=j;g.OnRangeStop=k;g.TIME_RANGE_LEVEL_SEPARATOR=l;g.rangeFullName=m;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("PerfFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744178");b=d("FalcoLoggerInternal").create("perf",a);e=b;g["default"]=e}),98);
__d("PerfXSharedFields",["CurrentLocale","Locale","SiteData"],(function(a,b,c,d,e,f,g){var h=typeof window!=="undefined"?window:self,i={addCommonValues:function(a){var b=h==null?void 0:h.navigator;try{b&&typeof b.hardwareConcurrency==="number"&&(a.num_cores=Math.floor(b.hardwareConcurrency)),b&&b.deviceMemory&&(a.ram_gb=b.deviceMemory),b&&b.connection&&(typeof b.connection.downlink==="number"&&(a.downlink_megabits=b.connection.downlink),typeof b.connection.effectiveType==="string"&&(a.effective_connection_type=b.connection.effectiveType),typeof b.connection.rtt==="number"&&(a.rtt_ms=b.connection.rtt))}catch(a){if(a.message!=="can't access dead object")throw a}a.client_push_phase=c("SiteData").push_phase;a.client_revision=c("SiteData").client_revision;c("SiteData").server_revision!=null&&(a.server_revision=c("SiteData").server_revision);a.locale=c("CurrentLocale").get();a.isRTL=Number(c("Locale").isRTL());return a},getCommonData:function(){var a={};i.addCommonValues(a);return a}};a=i;g["default"]=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("DoubleKeyMap").DoubleKeyMap)(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange$p_1=c;i.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange$p_1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange$p_1.point(this.fullname()+"_END",{timestamp:a}),i["delete"](this.$QPLRange$p_1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=i.get(this.$QPLRange$p_1,e))!=null?e:new a(b,this.$QPLRange$p_1,this)};return a}(d("NestedTimeRange").NestedTimeRange),k=new(d("DoubleKeyMap").DoubleKeyMap)(),l=new((b=d("SimpleHook")).SimpleHook)(),m=new b.SimpleHook(),n=new b.SimpleHook(),o=new b.SimpleHook(),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f,g){var i;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var j=(h||(h=d("QPLEvent"))).getMarkerId(a);i=b.call(this,"event_"+j)||this;i.event=a;i.instanceKey=c;i.$QPLEvent$p_1=e;i.isUserFlow=f;i.$QPLEvent$p_2=g;k.set(j,c,babelHelpers.assertThisInitialized(i));return i}var e=a.prototype;e.action=function(a){this.$QPLEvent$p_1=a;return this};e.getAction=function(){return this.$QPLEvent$p_1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onStart(this,a);l.call(this,a)};e.__onStop=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onStop(this,a);m.call(this,a);i.deleteAll(this);k["delete"]((h||(h=d("QPLEvent"))).getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=i.get(this,a))!=null?b:new j(a,this)};e.point=function(a,b){var c;b===void 0&&(b={});(c=this.$QPLEvent$p_2)==null?void 0:c.onPoint(this,a,b);n.call(this,a,b);return this};e.annotate=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onAnnotate(this,a);o.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b,c){var e;b===void 0&&(b=0);return(e=k.get((h||(h=d("QPLEvent"))).getMarkerId(a),b))!=null?e:new p(a,b,2,!1,c)}g.OnEventStart=l;g.OnEventStop=m;g.OnEventPoint=n;g.OnEventAnnotate=o;g.QPLEvent=p;g.event=a}),98);
__d("QPLTimestamp",[],(function(a,b,c,d,e,f){"use strict";function g(a){if(a===0)return"0";a=a.toFixed(6).split(".",2);var b=a[0];a=a[1];return b==="0"?a.replace(/^0+/,""):b+a}function a(a,b){b=b-a;return g(b)}f.timestampToSerializedNanoseconds=g;f.calculateDurationAsNanoseconds=a}),66);
__d("QPLUtils",["crc32"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("crc32")(a)>>>0}function a(a){return a!=null?h(a):0}g.unsignedCrc32=h;g.deriveInstanceKey=a}),98);
__d("QuickPerformanceLoggerTypes",[],(function(a,b,c,d,e,f){"use strict";a=1;b=3;f.EVENT_BASED_SAMPLING=a;f.USER_BASED_SAMPLING=b}),66);
__d("QPLCore",["QPLEvent","QPLTimestamp","QPLUtils","QuickPerformanceLoggerTypes","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,d){var e=b[a];if(!e||Object.entries(e).length===0)return null;var f={};Object.keys(e).forEach(function(a){var b=e[a];b==null||b.length===0?delete e[a]:d?f[a]=d(b):f[a]=b});return b={},b[a]=babelHelpers["extends"]({},c&&c[a],f),b}function j(a,b){if(a==null)return b;var c=babelHelpers["extends"]({},b,i("string",a,b),i("int",a,b,Math.trunc),i("double",a,b),i("bool",a,b),i("string_array",a,b),i("int_array",a,b,function(a){return a.map(Math.trunc)}),i("double_array",a,b),i("bool_array",a,b));Object.keys(c).forEach(function(a){var b=c[a];(b==null||Object.entries(b).length===0)&&delete c[a]});return Object.entries(c).length!==0?c:null}function k(a,b){var c={};o.isMarkerTracked(b)&&(c.tracked_for_loss=!0);typeof b.absoluteTimeOrigin==="number"&&(c.absolute_time_origin_ns=d("QPLTimestamp").timestampToSerializedNanoseconds(b.absoluteTimeOrigin));b=babelHelpers["extends"]({},a,c);return b}function l(a,b){if(!b)return a;var c={};b.string&&(c.annotations=b.string);b["int"]&&(c.annotations_int=b["int"]);b["double"]&&(c.annotations_double=b["double"]);b.bool&&(c.annotations_bool=b.bool);b.string_array&&(c.annotations_string_array=b.string_array);b.int_array&&(c.annotations_int_array=b.int_array);b.double_array&&(c.annotations_double_array=b.double_array);b.bool_array&&(c.annotations_bool_array=b.bool_array);return babelHelpers["extends"]({},a,c)}var m=new Map([[d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING,"random_sampling"],[d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING,"per_user"]]);function n(a,b){if(a===0)return!1;if(a<=1)return!0;return typeof b==="string"?d("QPLUtils").unsignedCrc32(b)%a===0:Math.random()*a<=1}var o=function(){function a(a){this.$2=1;this.$3=100;this.$4=new Map();this.$5=new Map();this.$6=null;this.$8=new Map();this.activeMarkers=new Map();this.$1=a;this.$7=a.logger;this.$5=(a=a.listenersWithMarker)!=null?a:new Map();this.$9=new Map()}var b=a.prototype;b.getMarker=function(a,b){a=this.$10((h||(h=d("QPLEvent"))).getMarkerId(a));if(!a)return null;a=a.get(b);return!a?null:a};b.isMarkerOn=function(a,b){b===void 0&&(b=0);a=this.$10((h||(h=d("QPLEvent"))).getMarkerId(a));if(!a)return!1;a=a.get(b);return!!a};a.isMarkerTracked=function(a){return a.trackedForLoss===!0||a.type===2};b.$10=function(a){return this.activeMarkers.get(a)};b.addMarker=function(a,b,c){var d=this.activeMarkers.get(a);d||(d=new Map(),this.activeMarkers.set(a,d));d.set(b,c)};b.deleteMarker=function(a,b){(a=this.activeMarkers.get(a))==null?void 0:a["delete"](b)};b.markerStart=function(b,c,e,f){c===void 0&&(c=0);e===void 0&&(e=this.currentTimestamp());f=f===void 0?{}:f;var g=f.cancelExisting;g=g===void 0?!1:g;var i=f.cancelOnUnload;i=i===void 0?!1:i;var j=f.trackedForLoss;j=j===void 0?!1:j;var k=f.type;k=k===void 0?1:k;var l=f.samplingBasis;l=l===void 0?null:l;var m=f.qplInternalDoNotUseAbsoluteTimeOrigin;f=f.timeoutMS;f=f===void 0?null:f;var n=this.getMarker(b,c);if(n){n=Math.round(e-n.timestamp);g&&(this.markerAnnotate(b,{string:{cancelType:"DUPLICATE_EVENT"},"int":{time_between_markers_ms:n}},{instanceKey:c}),this.markerEnd(b,4,c,e))}g=this.$11(b,l);n=g[0];l=g[1];g=g[2];var o={event:b,passesSampling:n,timestamp:e,sampleRate:l,samplingMethod:g,points:[],cancelOnUnload:i,trackedForLoss:j,type:k};typeof m==="number"&&(o.absoluteTimeOrigin=m);this.$4.forEach(function(a){a.onMarkerStart&&a.onMarkerStart(b,c,e)});this.$5.forEach(function(a){a.onMarkerStartWithMarker(b,c,e,o)});n&&(this.addMarker((h||(h=d("QPLEvent"))).getMarkerId(b),c,o),f!=null&&this.$12(b,c,f));n&&a.isMarkerTracked(o)&&this.$13({marker_id:27787271,action_id:51,sample_rate:1,annotations_int:{tracked_marker_id:(h||(h=d("QPLEvent"))).getMarkerId(b)},marker_type:1});n&&this.$4.forEach(function(a){a.onMarkerStarted&&a.onMarkerStarted(b,c,e)})};b.$14=function(a,b){var c=this.$9.get(a);c==null?void 0:c["delete"](b);(c==null?void 0:c.size)===0&&this.$9["delete"](a)};b.$15=function(a,b,c){this.$9.has(a)||this.$9.set(a,new Map());a=this.$9.get(a);a==null?void 0:a.set(b,c)};b.$16=function(a,b){var c,d;c=(c=this.$9.get(a))==null?void 0:c.get(b);if(!c)return;if(!((d=this.$1.runtimeAbstractionLayer)==null?void 0:d.clearTimeout))return;this.$1.runtimeAbstractionLayer.clearTimeout(c);this.$14(a,b)};b.$12=function(a,b,c){var e,f=this,g=(h||(h=d("QPLEvent"))).getMarkerId(a);this.$16(g,b);if(!((e=this.$1.runtimeAbstractionLayer)==null?void 0:e.setTimeout))return;e=(e=this.$1.runtimeAbstractionLayer)==null?void 0:e.setTimeout(function(){f.$4.forEach(function(c){c.onTimeoutEvent!=null&&c.onTimeoutEvent({event:a,instanceKey:b})}),f.$14(g,b),f.markerEnd(a,113,b)},c);this.$15(g,b,e)};b.markerAnnotate=function(a,b,c){c=c===void 0?{}:c;c=c.instanceKey;var d=c===void 0?0:c;this.$4.forEach(function(c){Object.keys(b).forEach(function(e){var f=b[e];if(!f)return;Object.keys(f).forEach(function(b){c.onAnnotation&&c.onAnnotation(a,d,b,f[b])})})});c=this.getMarker(a,d);if(!c)return;c.annotations=j(b,c.annotations)};b.markerPoint=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey,e=d===void 0?0:d,f=c.data;d=c.timestamp;var g=d===void 0?this.currentTimestamp():d;this.$4.forEach(function(c){c.onMarkerPoint&&c.onMarkerPoint(a,e,b,f,g)});c=this.getMarker(a,e);if(!c)return;d={name:b,timeSinceStart:Math.trunc(g-c.timestamp)};var h=j(f);h&&(d.data=h);c.points.push(d)};b.markerEnd=function(a,b,c,e){c===void 0&&(c=0);e===void 0&&(e=this.currentTimestamp());var f=this.getMarker(a,c);if(!f){this.$4.forEach(function(d){var f={durationMs:0};d.onMarkerEnd&&d.onMarkerEnd(b,a,c,e,f)});return}var g={marker_id:(h||(h=d("QPLEvent"))).getMarkerId(a),action_id:b,instance_id:c,sample_rate:f.sampleRate,method:m.get(f.samplingMethod),duration_ns:d("QPLTimestamp").calculateDurationAsNanoseconds(f.timestamp,e),points:f.points,metadata:{application_analytics:{time_since_qpl_module_init:e-this.$1.moduleLoadTimestamp}},marker_type:f.type,flags:1,unique_marker_id_debug_only:f.uniqueMarkerDebugId};g=l(g,f.annotations);var i=k(g,f);this.$4.forEach(function(d){var g={durationMs:f?e-f.timestamp:0,logData:i};d.onMarkerEnd&&d.onMarkerEnd(b,a,c,e,g)});f.passesSampling&&(f.timestampIsApproximate!==!0&&this.$13(i),this.$6===(h||(h=d("QPLEvent"))).getMarkerId(a)&&this.$1.onDebuggingIdEnded&&this.$1.onDebuggingIdEnded(),this.$16((h||(h=d("QPLEvent"))).getMarkerId(a),c));this.deleteMarker(h.getMarkerId(a),c)};b.markerDrop=function(a,b){b===void 0&&(b=0);this.deleteMarker((h||(h=d("QPLEvent"))).getMarkerId(a),b);var c=this.currentTimestamp();this.$4.forEach(function(d){d.onMarkerDrop&&d.onMarkerDrop(a,b,c)})};b.markEvent=function(a,b,c,e){e=e===void 0?{}:e;var f=e.timestamp,g=f===void 0?this.currentTimestamp():f,i=e.annotations;this.$4.forEach(function(b){b.onMarkEvent&&b.onMarkEvent({event:a,timestamp:g,annotations:i})});if((f=this.$1.quickLogConfigHelper)==null?void 0:f.isKillswitchOn())return;e=this.$11(a);f=e[0];var k=e[1];e=e[2];if(!f)return;f=j(typeof i==="function"?i():i);k={marker_id:(h||(h=d("QPLEvent"))).getMarkerId(a),action_id:51,instance_id:0,sample_rate:k,method:m.get(e),da_type:b,da_level:c,metadata:{application_analytics:{time_since_qpl_module_init:g-this.$1.moduleLoadTimestamp}},marker_type:1,flags:1};this.$13(l(k,f))};b.markerStartForJoin=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey;d=d===void 0?0:d;var e=c.cancelExisting;e=e===void 0?!1:e;var f=c.cancelOnUnload;f=f===void 0?!1:f;var g=c.trackedForLoss;g=g===void 0?!1:g;var h=c.type;h=h===void 0?1:h;var i=c.qplInternalDoNotUseAbsoluteTimeOrigin;i=i===void 0?null:i;var j=c.timeoutMS;j=j===void 0?null:j;var k=c.monotonicTimestamp;k=k===void 0?this.currentTimestamp():k;var l=c.absoluteTimeOriginMs;l=l===void 0?this.currentUnixTimestamp():l;var m=c.sourceIsPrimary;m=m===void 0?!1:m;var n=c.closeSession;c=c.unreliableSourceClockProcessId;this.markerStart(a,d,k,{cancelExisting:e,cancelOnUnload:f,trackedForLoss:g,type:h,samplingBasis:b,qplInternalDoNotUseAbsoluteTimeOrigin:i,timeoutMS:j});k="unreliable";c!=null&&(k+="_"+c);this.markerAnnotate(a,{string:(e={},e.join_id=b,e.qpl_join__source_clock=k,e.qpl__source="client_js",e),"int":(f={},f.qpl_join__absolute_time_origin_ms=l,f),bool:(g={},g.qpl_join__source_is_primary=m,g)},{instanceKey:d});if(n!=null){this.markerAnnotate(a,{"int":(h={},h.qpl_join__close_session_after_seconds=n,h)},{instanceKey:d})}};b.addAlignmentPointForJoin=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey;d=d===void 0?0:d;var e=c.requestId;e=e===void 0?"default_id":e;c=c.timestamp;c=c===void 0?this.currentTimestamp():c;b=this.$17(b);if(b==null)return;b=b+e;this.markerPoint(a,b,{instanceKey:d,timestamp:c})};b.dropAllMarkers=function(){this.activeMarkers.clear()};b.setAlwaysOnSampleRate=function(a,b){this.$8.set(a,b)};b.setDefaultSampleRate=function(a){this.$3=a};b.currentTimestamp=function(){return this.$1.monotonicNowMs()};b.currentUnixTimestamp=function(){return this.$1.unixNowMs()};b.enableDebug=function(a){this.$6=a};b.disableDebug=function(){this.$6=null};b.addListener=function(a){var b=this,c=this.$2++;this.$4.set(c,a);return{dispose:function(){b.$4["delete"](c)}}};b.$11=function(a,b){if(this.$1.unsampleAllEvents&&this.$1.unsampleAllEvents()||this.$6===(h||(h=d("QPLEvent"))).getMarkerId(a))return[!0,1,d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING];var c=(h||(h=d("QPLEvent"))).getSampleRate(a),e=h.getSamplingMethod(a);if(this.$8.get(a)==null&&c!==0&&e===d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING){var f;return[!0,(f=c)!=null?f:1,d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING]}f=(a=(f=this.$8.get(a))!=null?f:c)!=null?a:this.$3;a=(c=e)!=null?c:d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING;e=n(f,b);return[e,f,a]};b.$13=function(a){this.$4.forEach(function(b){b.onUploadEvent&&b.onUploadEvent(a)});var b=this.$1.decorateEventBeforeUpload?this.$1.decorateEventBeforeUpload(a):a;this.$1.sendEvent(a,b)};b.getActiveMarkerIds=function(a){var b=a.type,c=new Set();this.activeMarkers.forEach(function(a,d){a.forEach(function(a){if(a.type===b){c.add(d);return}})});return Array.from(c)};b.forEachMarkerInstance=function(a,b){a=this.$10(a);if(!a)return;for(var a=a.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];b(f,e.event)}};b.getMarkerStartTs=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;a=this.getMarker(a,b);if(!a)return;return a.timestamp};b.markerLogDebugPoints=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;var e=(h||(h=d("QPLEvent"))).getMarkerId(a);e=this.getMarker(a,b);if(!e)return;a=c("uuidv4")();e.uniqueMarkerDebugId=a};b.$17=function(a){switch(a){case 1:return"join_request_";case 0:return"join_request_";case 3:return"join_response_";case 2:return"join_response_";default:return null}};return a}();o.normalizeAnnotations=j;g["default"]=o}),98);
__d("QPLInspector",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=[],this.$2={}}var b=a.prototype;b.appendLog=function(a){for(var b in this.$2){if(!Object.prototype.hasOwnProperty.call(this.$2,b)||a.marker_id!==b)continue;this.$2[a.marker_id].forEach(function(b){return b(a)})}this.$1.push(a)};b.dumpLogs=function(){return this.$1};b.addListener=function(a,b){Object.prototype.hasOwnProperty.call(this.$2,a)||(this.$2[a]=[]),this.$2[a].push(b),this.$1.forEach(function(c){c.marker_id===a&&b(c)})};b.removeListener=function(a,b){b=this.$2[a].indexOf(b);b!==-1&&this.$2[a].splice(b,1)};return a}();b=new a();f["default"]=b}),66);
__d("USIDFlag",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({HTTP_HEADER_SESSION:"HH",LOCAL_STORAGE_FAILURE:"LSF",SERVER_GENERATED_SESSION:"SGS",SERVER_PARSE_FAILURE:"SPF",SESSION_STORAGE_FAILURE:"SSF",UNKNOWN_VERSION_FAILURE:"UVF",UNKOWN_DATA_FAILURE:"UDF"});c=a;f["default"]=c}),66);
__d("USIDUtils",["Cookie","Random","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4294967295,j=36,k="usidt",l="usida",m=1,n=6;function a(){var a=[];(h||(h=c("WebStorage"))).isLocalStorageQuotaExceeded()&&a.push("LSF");(h||(h=c("WebStorage"))).isSessionStorageQuotaExceeded()&&a.push("SSF");return a}function o(a){var b=Math.floor(Date.now()/1e3),c=Math.floor(d("Random").random()*i);a=a+Number(b&i).toString(j)+c.toString(j);return a}function p(a,b,c){if(a==null)return{ver:m,id:o(c)};a=a.getItem(b);if(a==null)return{ver:m,id:o(c)};b=JSON.parse(a);return b.ver!==m?{ver:m,id:o(c)}:b}function q(a,b,d){if(a==null)return;(h||(h=c("WebStorage"))).setItemGuarded(a,b,JSON.stringify(d))}function r(a,b){if(c("Cookie")==null)return{ver:m,id:o(b)};a=c("Cookie").get(a);if(a==null||a=="")return{ver:m,id:o(b)};var d;try{d=JSON.parse(a)}catch(b){d=JSON.parse(atob(a))}return d.ver!==m?{ver:m,id:o(b)}:d}function s(a,b){if(c("Cookie")==null)return;c("Cookie").set(a,btoa(JSON.stringify(b)))}function b(){var a=p((h||(h=c("WebStorage"))).getSessionStorageForRead(),k,"T");return a.id}function e(a){q((h||(h=c("WebStorage"))).getSessionStorage(),k,{ver:m,id:a})}function t(){var a,b=r(l,"A");return{id:b.id,time:(a=b.time)!=null?a:0,startTime:(a=b.startTime)!=null?a:0}}function f(a){s(l,{ver:m,id:a.id,time:a.time});var b=t();return b.id===a.id&&b.time===a.time}g.VERSION=n;g.getFlags=a;g.generateId=o;g.getExistingTabId=b;g.writeTabId=e;g.getExistingActivityInfo=t;g.writeActivityInfo=f}),98);
__d("USIDCore",["DateConsts","USIDUtils","asyncParams"],(function(a,b,c,d,e,f,g){"use strict";var h=30,i=d("DateConsts").MIN_PER_HOUR*5,j=2,k="__usid";function l(){return Math.floor(Date.now()/d("DateConsts").MS_PER_SEC)}a=function(){function a(a,b,c,e,f,g){this.$1=a;this.$2=b;this.$3=c;this.$8=e;this.$9=f;this.$4=g.activityTrigger;this.$5=((b=g.activityTimeoutInMin)!=null?b:h)*60;this.$6=((c=g.activityMaxTimeInMin)!=null?c:i)*60;this.$7=((e=g.activityCacheTimeoutInMin)!=null?e:j)*60;this.$10=0;d("USIDUtils").writeTabId(a);this.triggerActivity()}var b=a.prototype;b.getFlags=function(){return this.$9};b.getRequestVersion=function(){return this.$8};b.getSessionVersion=function(){return d("USIDUtils").VERSION};b.getTabId=function(){return this.$1};b.getPageId=function(){return this.$2};b.getTransitionId=function(){return this.$3};b.getActivityId=function(){var a=this.$11();return a.id};b.getActivityTimeOut=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=l();return this.$5-(b-a.time)};b.getActivityMaxTime=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=l();return this.$6-(b-a.startTime)};b.getSessionID=function(){return this.getTabId()+":"+this.getPageId()+":"+this.getTransitionId()+"-"+this.getActivityId()};b.serializeForRequest=function(){this.$4==="request"&&this.triggerActivity();return this.$12()};b.$12=function(){var a=this.getSessionVersion(),b=this.getSessionID(),c=this.getRequestVersion(),d=this.getFlags().join(",");return a+"-"+b+"-RV="+c+":F="+d};b.contextData=function(){return{usid_override:""}};b.$11=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=this.$13(a);b&&this.$14(a);return a};b.$14=function(a){a=d("USIDUtils").writeActivityInfo(a);a&&d("asyncParams").add(k,this.$12())};b.$13=function(a){var b=l();if(b-a.time>this.$5){a.id=d("USIDUtils").generateId("A");a.time=b;a.startTime=b;return!0}return!1};b.triggerActivity=function(){var a=l();if(a-this.$10>this.$7){var b=this.$11();b.time=a;this.$14(b);this.$10=a}};b.nextTransition=function(){this.triggerActivity(),this.$3++};return a}();g["default"]=a}),98);
__d("USID",["USIDCore","USIDMetadata","USIDUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=function(a){if(h!=null)return h;var b=d("USIDUtils").getExistingTabId(),e=c("USIDMetadata").page_id,f=c("USIDMetadata").transition_id,g=c("USIDMetadata").version,i=d("USIDUtils").getFlags();h=new(c("USIDCore"))(b,e,f,g,i,a);return h};a=function(){return i({activityTrigger:"request"})};b={init:i,get:a};g["default"]=b}),98);
__d("QuickPerformanceLogger",["Arbiter","Env","FBLogger","PerfFalcoEvent","PerfXSharedFields","Promise","QPLCore","QPLEvent","QPLInspector","Run","USID","WebStorage","cr:1984081","cr:686","gkx","performanceAbsoluteNow","performanceNavigationStart","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=typeof window!=="undefined"?window:self;function o(a){var b=c("PerfXSharedFields").getCommonData();b={memory_stats:{total_mem:b.ram_gb!=null?b.ram_gb*1073741824:null},network_stats:{downlink_megabits:b.downlink_megabits,network_subtype:b.effective_connection_type,rtt_ms:b.rtt_ms},sitedata_info:{client_push_phase:b.client_push_phase,client_revision:b.client_revision,server_revision:b.server_revision},locale_info:{locale:b.locale,isRTL:b.isRTL}};c("gkx")("20836")&&(b.workplace_info={is_gemini:c("gkx")("21050")});if(c("gkx")("21051")&&typeof n.__sapienzMetadataCallback__==="function"){var d=n.__sapienzMetadataCallback__();b.sapienz={request_id:String(d.requestId),config_name:String(d.configName)}}c("gkx")("21052")&&(b.usid={usid_override:c("USID").get().serializeForRequest()});return babelHelpers["extends"]({},a,{metadata:babelHelpers["extends"]({},a.metadata,b)})}function p(a,b,c){return{i:a,m:c,r:b}}function q(a,d){return new(m||(m=b("Promise")))(function(){var b=d||a;typeof n.__je2e_recordQPLMarker==="function"&&n.__je2e_recordQPLMarker(b);(i||(i=c("Env"))).enable_qplinspector===!0&&c("QPLInspector").appendLog(b);c("gkx")("21053")||c("gkx")("20935")||c("gkx")("21054")||c("gkx")("5679")?c("PerfFalcoEvent").logImmediately(function(){return b}):c("gkx")("2160")||c("gkx")("21055")||c("gkx")("1624")?c("PerfFalcoEvent").logCritical(function(){return b}):c("PerfFalcoEvent").log(function(){return b})})}function r(a){a=babelHelpers["extends"]({},a,{config_type:c("gkx")("21056")?"alpha_beta":"prod"});return o(a)}function s(){return(i||(i=c("Env"))).enable_qplinspector===!0||typeof n.__je2e_recordQPLMarker==="function"||c("gkx")("21057")}function t(){c("Arbiter").inform("qpl_debugger_finished")}var u=(j||(j=c("performanceAbsoluteNow")))();typeof n.__je2e_felabsTracePlugin_setQplInit==="function"&&n.__je2e_felabsTracePlugin_setQplInit((k||(k=c("performanceNow")))());var v={debug:function(a,b,c){},warn:function(a){c("FBLogger")("qpl").blameToPreviousDirectory().warn(a)}},w="qpl";a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this,{decorateEventBeforeUpload:r,unsampleAllEvents:s,onDebuggingIdEnded:t,monotonicNowMs:j||(j=c("performanceAbsoluteNow")),unixNowMs:j||(j=c("performanceAbsoluteNow")),moduleLoadTimestamp:u,logger:v,sendEvent:q,runtimeAbstractionLayer:{setTimeout:n.setTimeout,clearTimeout:n.clearTimeout},debugLoggingEnabled:(i||(i=c("Env"))).qpl_debug_logging})||this;var e=c("gkx")("21055")?c("gkx")("21058")?function(a){return d("Run").onBeforeUnload(a,!1)}:d("Run").onBeforeUnload:d("Run").onUnload;e(function(){b.$QuickPerformanceLogger$p_1(),b.$QuickPerformanceLogger$p_2(706,{respectUnloadPolicy:!0,timestamp:b.currentTimestamp()})});b.$QuickPerformanceLogger$p_3();b.initQplFlipperPlugin();b.initQplSapienzPlugin();return b}var f=e.prototype;f.$QuickPerformanceLogger$p_3=function(){var a=this,b=(l||(l=c("WebStorage"))).getSessionStorageForRead();if(!b){this.$QuickPerformanceLogger$p_4("#loadSavedState","sessionStorage is not available");return}var d=b.getItem(w);if(d==null)return;b.removeItem(w);b=JSON.parse(d);if(b==null){this.$QuickPerformanceLogger$p_4("#loadSavedState","Saved state failed to deserialize");return}if(b.markers==null||b.markers.length===0){this.$QuickPerformanceLogger$p_4("#loadSavedState","No saved markers found");return}b.markers.forEach(function(b){var c=b[0],d=b[1];b=b[2];a.addMarker(c,d,b);a.$QuickPerformanceLogger$p_4("#loadSavedState","Marker "+c+" (instanceKey: "+d+") resumed")})};f.$QuickPerformanceLogger$p_1=function(){var a=this,b=[];this.activeMarkers.forEach(function(a,c){a.forEach(function(a,d){a.resumeAfterNavigation===!0&&(delete a.resumeAfterNavigation,b.push([c,d,a]))})});if(b.length>0){var d={markers:b},e=(l||(l=c("WebStorage"))).getSessionStorage();e=l.setItemGuarded(e,w,JSON.stringify(d));e&&(b.forEach(function(b){var c=b[0],d=b[1];b=b[2];c=p(c,b.sampleRate,b.samplingMethod);a.markerEnd(c,96,d)}),this.$QuickPerformanceLogger$p_4("#storeSavedState","Failed to store saved state: "+e.message),c("FBLogger")("qpl").catching(e).warn("Failed to store QPL state: "+JSON.stringify(d,null,2)));b.forEach(function(b){var c=b[0];b=b[1];a.deleteMarker(c,b)})}};f.markerStoreBeforeNavigation=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;var c=(h||(h=d("QPLEvent"))).getMarkerId(a);a=this.getMarker(a,b);if(!a){this.$QuickPerformanceLogger$p_4("markerStoreBeforeNavigation","Failed to set marker to store on page unload. Could not find marker "+c+", instancekey="+b);return}a.resumeAfterNavigation=!0;this.$QuickPerformanceLogger$p_4("markerStoreBeforeNavigation","Set marker "+c+" to store on page unload, instancekey="+b)};f.markerStartFromNavStart=function(a,b,d){b===void 0&&(b=0);d=d===void 0?{}:d;var e=d.cancelExisting;e=e===void 0?!1:e;var f=d.cancelOnUnload;f=f===void 0?!1:f;var g=d.trackedForLoss;g=g===void 0?!1:g;var h=d.type;h=h===void 0?1:h;d=d.qplInternalDoNotUseConvertToTimeOnServer;var i=c("performanceNavigationStart")();d=typeof d==="function"?d(i):void 0;this.markerStart(a,b,i,{cancelExisting:e,cancelOnUnload:f,trackedForLoss:g,type:h,qplInternalDoNotUseAbsoluteTimeOrigin:d});if(c("performanceNavigationStart").isPolyfilled){i=this.getMarker(a,b);i&&(i.timestampIsApproximate=!0)}};f.markerStartForJoinFromNavStart=function(a,b,d){d=d===void 0?{}:d;var e=d.instanceKey;e=e===void 0?0:e;var f=d.cancelExisting;f=f===void 0?!1:f;var g=d.cancelOnUnload;g=g===void 0?!1:g;var h=d.trackedForLoss;h=h===void 0?!1:h;var i=d.type;i=i===void 0?1:i;var j=d.qplInternalDoNotUseConvertToTimeOnServer,k=d.absoluteTimeOriginMs,l=d.sourceIsPrimary;l=l===void 0?!1:l;var m=d.closeSession;d=d.unreliableSourceClockProcessId;var n=c("performanceNavigationStart")();j=typeof j==="function"?j(n):void 0;this.markerStartForJoin(a,b,{instanceKey:e,cancelExisting:f,cancelOnUnload:g,trackedForLoss:h,type:i,qplInternalDoNotUseAbsoluteTimeOrigin:j,monotonicTimestamp:n,absoluteTimeOriginMs:k,sourceIsPrimary:l,closeSession:m,unreliableSourceClockProcessId:d});if(c("performanceNavigationStart").isPolyfilled){b=this.getMarker(a,e);b&&(b.timestampIsApproximate=!0)}};f.$QuickPerformanceLogger$p_2=function(a,b){var c=this;b=b===void 0?{}:b;var d=b.timestamp,e=b.respectUnloadPolicy;this.activeMarkers.forEach(function(b,f){b.forEach(function(b,g){if(!e||b.cancelOnUnload===!0){b=p(f,b.sampleRate,b.samplingMethod);c.markerEnd(b,a,g,d)}})})};f.$QuickPerformanceLogger$p_4=function(a,b,c){v.debug(a,b,c)};f.initQplFlipperPlugin=function(){b("cr:686")!=null&&this.addListener(b("cr:686").qplFlipperPlugin.listener())};f.initQplSapienzPlugin=function(){b("cr:1984081")!=null&&this.addListener(b("cr:1984081").getQplSapienzListener())};return e}(c("QPLCore"));e=new a();f.exports=e}),34);
__d("ReactFbPropTypes",["FbtResultBase","warning"],(function(a,b,c,d,e,f){function a(a){var c=function(c,d,e,f,g,h,i){var j=d[e];if(j instanceof b("FbtResultBase"))return null;if(c)return a.isRequired(d,e,f,g,h,i);else return a(d,e,f,g,h,i)},d=c.bind(null,!1);d.isRequired=c.bind(null,!0);return d}f.wrapStringTypeChecker=a}),null);
__d("SubscriptionsHandler",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a.remove||a.reset||a.unsubscribe||a.cancel||a.dispose}function j(a){i(a).call(a)}a=function(){function a(){this.$1=[]}var b=a.prototype;b.addSubscriptions=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.every(i)||h(0,3659);this.$1!=null?this.$1=this.$1.concat(b):b.forEach(j)};b.engage=function(){this.$1==null&&(this.$1=[])};b.release=function(){this.$1!=null&&(this.$1.forEach(j),this.$1=null)};b.releaseOne=function(a){var b=this.$1;if(b==null)return;var c=b.indexOf(a);c!==-1&&(j(a),b.splice(c,1),b.length===0&&(this.$1=null))};return a}();g["default"]=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,(h||(h=c("ExecutionEnvironment"))).isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("TrustedTypesWebWorkerScriptURLPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createScriptURL:function(a){return a}};b=c("TrustedTypes").createPolicy("web-worker-url",a);d=b;g["default"]=d}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")((i||(i=b("Promise"))).resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new j(a),this.port2=new j(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=j;g.VirtualMessageChannel=a}),98);
__d("WAAlignChunkLengthsToMultipleOfAesBlockSize",[],(function(a,b,c,d,e,f){"use strict";function g(a){return parseInt((a+15)/16,10)*16}function a(a,b){var c=[],d=0,e=0,f=0;for(var h=0;h<a.length;++h){d+=a[h];if(h===a.length-1&&b!=null&&b>0){d>e?c.push(b-e):(c.pop(),c.push(b-f));break}else if(d>e){var i=g(d-e);f=e;c.push(i);e+=i}}return c}f.alignChunkSizeToMultipleAesBlockSize=g;f.alignChunkLengthsToMultipleOfAesBlockSize=a}),66);
__d("WAArrayInterleave",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[],d=a.length,e=b.length,f=Math.max(d,e);for(var g=0;g<f;g++)g<d&&c.push(a[g]),g<e&&c.push(b[g]);return c}f["default"]=a}),66);
__d("WACountries",[],(function(a,b,c,d,e,f){a={1:'[334,"[2-9]","($1) $2-$3"],[10,9]',20:'["Ah","[23]"],["Bg","1[35]|[4-6]|8[2468]|9[235-7]"],[334,"[89]"],[28,1],[10,5,8,9]',211:'[333,"[19]"],9',212:'[54,["5(29|38)","5(29|38)[89]"],1],[3222,"5[45]"],[45,"5(2[2-489]|3[5-9]|9)|892",1],[27,8,1],[36,"[5-7]",1],9',213:'[2222,"[1-4]"],[2322,9],[3222,"[5-8]"],[9,8]',216:"233,8",218:'[27,"[25-79]",1],9',220:'[34,"[2-9]"],7',221:'[2322,"[379]"],[3222,8],[3222,8],[2322,"[379]"],9',222:'[2222,"[2-48]"],8',223:'[2222,"[24-9]"],8',224:'[2222,3],[3222,"[67]"],[9,8]',225:'[2222,"[02-9]"],[8,10]',226:'[2222,"[025-7]"],8',227:'[233,"08"],[2222,"[0289]"],8',228:'[2222,"[279]"],8',229:'[2222,"[2689]"],[8,4]',230:'[34,"[2-46]|8[013]"],[44,5],[7,8]',231:'[133,"[45]"],[233,2],[234,"[23578]"],[7,9,8]',232:'[26,"[237-9]"],8',233:'[35,8],[234,"[235]"],[9,8]',234:'[223,78],["ACd","[12]|9(0[3-9]|[1-9])"],["BCc","[3-7]|8[2-9]"],["CCd","[7-9]"],["CDe","[78]"],["CEf","[78]"],[10,7,8,11,12,13,14]',235:'[2222,"[2679]"],8',236:'[2222,"[278]"],8',237:'[2222,88],[12222,"[26]"],[8,9]',238:'[322,"[2-59]"],7',239:'[34,"[29]"],7',240:'[333,"[235]"],[36,"[89]"],9',241:"[2222,0],8",242:'[3222,801],[144,8],[234,"[02]"],9',243:'[223,88],[25,"[1-6]"],[234,1],[333,"[89]"],[9,7]',244:'[333,"[29]"],9',245:'[34,40],[333,"[49]"],[7,9]',246:"[34,3],7",247:"5",248:'[133,"[246]"],7',249:'[234,"[19]"],9',250:'[2222,0],[333,2],[333,"[7-9]"],[9,8]',251:'[234,"[1-59]"],9',252:'[24,"8[125]"],[6,"[134]"],[16,"1|2[0-79]|3[0-46-8]|4[0-7]|59"],[17,"24|[67]"],[333,"[348]|64|79[0-8]|90"],["BA{5,7}","1|28|6[1-35-9]|799|9[2-9]"],[7,8,9,6]',253:'[2222,"[27]"],8',254:'["BA{5,7}","[24-6]"],[36,"[17]"],["CCd","[89]"],[9,7,8,10]',255:'[324,"[89]"],[234,"[24]"],[333,"[67]"],[9,7]',256:'[45,[202,2024]],[36,"[27-9]|4(6[45]|[7-9])"],[27,"[34]"],9',257:'[2222,"[2367]"],8',258:'["BCd","2|8[2-7]"],[333,8],[9,8]',260:'[333,"[28]"],9',261:'[2232,"[23]"],9',262:'[3222,"[268]"],9',263:'["CA{3,5}","2(0[45]|2[278]|[49]8)|3([09]8|17)|6([29]8|37|75)|[23][78]|(33|5[15]|6[68])[78]"],["ACA{2,4}","[49]"],[34,80],[27,["24|8[13-59]|(2[05-79]|39|5[45]|6[15-8])2","2(02[014]|4|[56]20|[79]2)|392|5(42|525)|6([16-8]21|52[013])|8[13-59]"]],[234,7],["CCd",["2(1[39]|2[0157]|[378]|[56][14])|3(12|29)","2(1[39]|2[0157]|[378]|[56][14])|3(123|29)"]],[46,8],["BA{3,5}","1|2(0[0-36-9]|12|29|[56])|3(1[0-689]|[24-6])|5([0236-9]|1[2-4])|6([013-59]|7[0-46-9])|(33|55|6[68])[0-69]|(29|3[09]|62)[0-79]"],["BCd","29[013-9]|39|54"],["DA{3,5}",["(25|54)8","258[23]|5483"]],[9,10,5,6,7,8]',264:'[233,88],["BCd",6],[333,87],[234,8],[9,8]',265:'[133,"1[2-9]"],[333,2],[234,3],[3222,"[17-9]"],[9,7]',266:"44,8",267:'[25,90],[34,"[2-6]"],[233,7],[8,7]',268:'[44,"[0237]"],[54,9],8',269:'[322,"[3478]"],7',27:'["Bd","8[1-4]"],["BCc","8[1-4]"],[333,860],[234,"[1-9]"],[5,6,7,8,9]',290:"[5,4]",291:'[133,"[178]"],7',297:'[34,"[25-9]"],7',298:'[6,"[2-9]"],6',299:"222,6",30:'[244,"21|7"],[46,"2(2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])"],[334,"[2689]"],10',31:'["CA{4,7}","[89]0"],[27,66],[18,6],[333,"1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],[234,"[1-57-9]"],[9,10,11,7,8]',32:'[323,"(80|9)0"],[1322,"[239]|4[23]"],[2222,"[15-8]"],[3222,4],[8,9]',33:'[3222,8],[12222,"[1-79]"],9',34:'[333,"[89]00"],[3222,"[5-9]"],9',350:"[35,2],8",351:'[234,"2[12]"],[333,"[236-9]"],9',352:'[23,"2(0[2-689]|[2-9])|[3-57]|8(0[2-9]|[13-9])|9(0[89]|[2-579])"],[222,"2(0[2-689]|[2-9])|[3-57]|8(0[2-9]|[13-9])|9(0[89]|[2-579])"],[223,"20[2-689]"],["BBBb","2([0367]|4[3-8])"],[323,"80[01]|90[015]"],[2223,20],[333,6],["BBBBb","2([0367]|4[3-8])"],["BBBA{1,5}","[3-57]|8[13-9]|9(0[89]|[2-579])|(2|80)[2-9]"],[9,4,5,6,7,8,10,11]',353:'[25,"2[24-9]|47|58|6[237-9]|9[35-9]"],[35,"[45]0"],["AdD",1],["BCd","[2569]|4[1-69]|7[14]"],[333,70],[333,81],[234,"[78]"],[433,1],[2134,8],[244,4],[9,7,8,10]',354:'[34,"[4-9]"],[333,3],[7,9]',355:'["Cd","80|9"],[134,"4[2-6]"],[233,"[2358][2-5]|4"],[35,"[23578]"],[234,6],[9,7,8]',356:'[44,"[2357-9]"],8',357:'[26,"[257-9]"],8',358:'[5,"75[12]"],["AA{4,9}","[2568][1-8]|3(0[1-9]|[1-9])|9"],[6,11],["CA{3,7}","([12]0|7)0|[368]"],["BA{4,8}","[12457]"],[6,7,8,9,10,11,12,5]',359:'[6,1],[1122,2],[34,"43[1-6]|70[1-9]"],["ACd",2],["BCc","[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],[323,"(70|8)0"],[332,"43[1-7]|7"],["BCd","[48]|9[08]"],[333,9],[9,6,7,8]',36:'[134,1],["BCd","[2-9]"],[9,8]',370:'[134,"52[0-79]"],[323,"[7-9]"],[26,"37|4([15]|6[1-8])"],[35,"[3-6]"],8',371:'[233,"[269]|8[01]"],8',372:'[34,["[369]|4[3-8]|5([0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5([02]|1([0-8]|95)|5[0-478]|6(4[0-4]|5[1-589]))|7[1-9]"]],["Dd",["[45]|8(00|[1-4])","[45]|8(00[1-9]|[1-4])"]],[224,7],[433,80],[7,8,10]',373:'[35,"[89]"],[233,"22|3"],[323,"[25-7]"],8',374:'[323,"[89]0"],[35,"2|3[12]"],[26,"1|47"],[26,"[3-9]"],8',375:'[2322,["17[0-3589]|2[4-9]|[34]","17([02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"$1 $2-$3-$4"],[3222,["1(5[24]|6[235]|7[467])|2(1[246]|2[25]|3[26])","1(5[24]|6(2|3[04-9]|5[0346-9])|7([46]|7[37-9]))|2(1[246]|2[25]|3[26])"],"$1 $2-$3-$4"],[423,["1(5[169]|6[3-5]|7[179])|2(1[35]|2[34]|3[3-5])","1(5[169]|6(3[1-3]|4|5[125])|7(1[3-9]|7[0-24-6]|9[2-7]))|2(1[35]|2[34]|3[3-5])"],"$1 $2-$3"],["[89]BCD","8[01]|9"],["82ADD",82],["800;C",800],["800;BA{2,4}",800],[9,6,7,8,10,11]',376:'[33,"[135-9]"],[44,1],[333,6],[6,9,8]',377:'[332,8],[233,4],[2222,"[39]"],[12222,6],[8,9]',378:'[2222,"[5-7]"],[46,0,"($1) $2"],[2222,"[5-7]"],[46,0],[8,10]',379:"[9,10,11,6,7,8]",380:'[333,["6[12][29]|(3[1-8]|4[136-8]|5[12457]|6[49])2|(56|65)[24]","6[12][29]|(35|4[1378]|5[12457]|6[49])2|(56|65)[24]|(3[1-46-8]|46)2[013-9]"]],[234,["4[45][0-5]|5(0|6[37])|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]","4[45][0-5]|5(0|6(3[14-7]|7))|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]"]],[45,"[3-6]"],["CCd","[89]"],[9,10]',381:'["CA{3,9}","(2[389]|39)0|[7-9]"],["BA{5,10}","[1-36]"],[8,9,10,6,7,11,12]',382:'["BCd","[2-9]"],8',383:'[35,"[89]"],[233,"[2-4]"],[333,"[23]"],[8,9]',385:'["BBc","6[01]"],["CBc",8],[143,1],["BCd","[67]"],["BCd",9],["BCd","[2-5]"],[333,8],[8,9,7]',386:'["BA{3,6}","8[09]|9"],[35,"59|8"],[233,"[37][01]|4[0139]|51|6"],[1322,"[1-57]"],[8,6,7]',387:'[233,"6[1-356]|[7-9]"],[233,"[3-5]","$1 $2-$3"],[2223,6],[8,9]',389:'[134,2],[233,"[347]"],[3122,"[58]"],8',39:'[6,"1(1|92)"],["BA{4,6}","0[26]"],["CA{3,6}",["0[13-57-9][0159]|8(03|4[17]|9[245])","0[13-57-9][0159]|8(03|4[17]|9(2|[45][0-4]))"]],["DA{2,6}","0([13-579][2-46-8]|8[236-8])"],[44,894],["BdD","0[26]|5"],["CCd","1[4679]|[38]"],["CdD","0[13-57-9][0159]"],[245,"0[26]"],[434,0],["CDe",3],[9,10,11,6,7,8]',40:'[33,["2[3-6]","2[3-6].9"]],[24,"219|31"],[234,"[23]1"],[333,"[237-9]"],[9,6]',41:'[333,"8[047]|90"],[2322,"[2-79]|81"],[32322,8],9',420:'[333,"[2-8]|9[015-7]"],[2333,9],[3333,9],9',421:'["ABd",21],["BBc",["[3-5][1-8]1","[3-5][1-8]1[67]"]],[1332,2,"$1/$2 $3 $4"],[2322,"[3-5]","$1/$2 $3 $4"],[333,"[689]"],[43,[909,9090]],[9,6,7]',423:'[322,"[237-9]"],[234,69],[333,6],[7,9]',43:'["AA{3,12}","1(11|[2-9])"],[32,517],["BA{3,5}","5[079]"],[6,1],["CA{3,10}","(31|4)6|51|6(5[0-3579]|[6-9])|7(20|32|8)|[89]"],["DA{3,9}","[2-467]|5[2-6]"],["BCd",5],["BDA{4,7}",5],[10,11,12,13,4,5,6,7,8,9]',44:'[34,[800,8001,80011,800111,8001111]],[322,[845,8454,84546,845464]],[36,800],["Ee",["1(38|5[23]|69|76|94)","1((38|69)7|5(24|39)|768|946)","1(3873|5(242|39[4-6])|(697|768)[347]|9467)"]],["Df","1([2-69][02-9]|[78])"],[244,["[25]|7(0|6[024-9])","[25]|7(0|6([04-9]|2[356]))"]],[46,7],[334,"[1389]"],[10,7,9]',45:'[2222,"[2-9]"],8',46:'["BcB",20],[34,"9(00|39|44)"],[232,"[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],["AcBB",8],["CcB","1[2457]|2([247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6([125689]|4[02-57]|7[0-2])|9([125-8]|3[02-5]|4[0-3])"],["CcC","9(00|39|44)"],["BcBB","1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],[2322,7],[1332,8],[3222,"[13-5]|2([247-9]|5[0138])|6([124-689]|7[0-2])|9([125-8]|3[02-5]|4[0-3])"],[3223,9],[32322,"[26]"],[9,13,6,7,8]',47:'[323,"[489]"],[2222,"[235-7]"],8',48:'[223,["(1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["CBc",64],[333,"39|45|5[0137]|6[0469]|7[02389]|8[08]"],[2322,"1[2-8]|[2-8]|9[145]"],[9,7]',49:'["BA{3,13}","3[02]|40|[68]9"],["CA{3,12}",["2(0[1-389]|1[124]|2[18]|3[14])|3([35-9][15]|4[015])|906|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(0[1-389]|12[0-8])|3([35-9][15]|4[015])|906|2([13][14]|2[18])|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"]],["DA{2,11}",["[24-6]|3([3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(3(0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(2[135]|4[13578]|9[1346])|5(0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(2[1-7]|4[145]|6[1-5]|7[1-4])|8(21|3[1468]|6|7[1467]|8[136])|9(0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(47|60)[1356]|3(3[46]|46|5[49])[1246]|3[4579]3[1357]"]],[34,138],["EA{2,10}",3],["CA{5,11}",181],["CAA{4,10}","1(3|80)|9"],["Ch","1[67]"],["CA{7,12}",8],[56,[185,1850,18500]],[344,7],[47,"18[68]"],[56,"15[0568]"],[47,"15[1279]"],[38,18],["CBh","1(6[023]|7)"],[427,"15[279]"],[328,15],[10,11,5,6,7,8,9,12,13,14,15]',500:"5",501:'[34,"[2-8]",1],[1343,0,1],[7,11]',502:'[44,"[2-7]"],[434,1],[8,11]',503:'[44,"[267]"],[34,"[89]"],[344,"[89]"],[8,7,11]',504:'[44,"[237-9]",1],8',505:'[44,"[125-8]"],8',506:'[44,"[24-7]|8[3-9]"],[334,"[89]",1],[8,10]',507:'[34,"[1-57-9]",1],[44,6,1],[7,8]',508:'[222,"[45]"],6',509:'[224,"[2-489]"],8',51:'[35,80],[17,1],[26,"[4-8]"],[333,9],[9,8]',52:'[244,"33|5[56]|81"],[334,"[2-9]"],[1244,"1(33|5[56]|81)"],[1334,1],[10,11]',53:'["BA{4,6}","2[1-4]|[34]"],["Ag",7],[17,5],[8,6,7]',54:'[424,["2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(2[24-9]|3[1-59]|47)","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5[56][46]|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(4[35][56]|58[45]|8([38]5|54|76))[4-6]","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|58|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|54(4|5[13-7]|6[89])|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(454|85[56])[46]|3(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2-$3"],[244,1,"$1 $2-$3"],[334,"[23]","$1 $2-$3"],[334,"[68]",1],[1424,["9(2[2-469]|3[3-578])","9(2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(2[24-9]|3[1-59]|47)","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5([56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4[35][56]|58[45]|8([38]5|54|76))[4-6]","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|5(4[46]|8)|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|5(4(4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2 $3-$4"],[1244,91,"$1 $2 $3-$4"],[1334,9,"$1 $2 $3-$4"],[10,11]',55:'[54,"9([1-9]|0[1-9])",1],[244,"[1-9][1-9]","$1 $2-$3"],[254,"([14689][1-9]|2[12478]|3[1-578]|5[1-5]|7[13-579])9","$1 $2-$3"],["[3589]00;cD","[3589]00"],[10,11,9]',56:'[234,"1([03-589]|21)|[29]0|78"],[54,21],[234,44],[144,"2[23]"],[144,"9[2-9]"],[234,"3[2-5]|[47]|5[1-3578]|6[13-57]|8(0[1-9]|[1-9])"],["CCd","60|8"],["600;CBC",60],["1230;CD",1],[54,219],[9,11]',57:'[17,"1[2-79]|[25-8]|(18|4)[2-9]"],[37,3],[137,["1(80|9)","1(800|9)"]],[10,8,11]',58:'[37,"[24589]",1],10',590:'["[56]90;BD",-1,"$1 $2-$3"],9',591:'[17,"[23]|4[46]"],[8,"[67]"],[324,8],[8,9]',592:'[34,"[2-46-9]"],7',593:'[134,"[2-7]",1],[234,9],["DCd",1],[9,8,10,11]',594:'[3222,"[56]"],9',595:'["CA{3,6}","[2-9]0"],[25,"[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],["Ce","2[279]|3[13-5]|4[359]|5|6[347]|7[46-8]|85"],["BCd","[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],[234,87],[36,9],[333,"[2-8]"],[9,7,8]',596:'[3222,"[56]"],9',597:'[222,56,1],[33,"[2-5]",1],[34,"[6-8]",1],[7,6]',598:'[34,"8|90"],[233,9],[44,"[24]"],[8,7]',599:'[34,"[3467]"],[134,"9[4-8]"],[7,8]',60:'[134,"[4-79]","$1-$2 $3"],["BCd","1([0249]|[367][2-9]|8[1-9])|8","$1-$2 $3"],[144,3,"$1-$2 $3"],[1324,"1[36-8]",1],[334,15,"$1-$2 $3"],[244,1,"$1-$2 $3"],[9,10,8]',61:'[34,[180,1802]],["Dd",19],["BCA{2,4}",16],[333,"14|[45]"],[144,"[2378]"],[433,"1(30|[89])"],[9,7,10]',62:'[133,15],["BA{5,9}","2[124]|[36]1"],["CA{5,7}",800],["CA{5,8}","[2-79]"],["CdC","8[1-35-9]",1],["CA{6,8}",1],[334,804],[3133,80],["CDe",8,1],[2434,0],[9,10,11,12,7,8]',63:'[15,2],[134,2],["DA{4,6}",["3(23|39|46)|4(2[3-6]|[35]9|4[26]|76)|544|88[245]|(52|64|86)2","3(230|397|461)|4(2(35|[46]4|51)|396|4(22|63)|59[347]|76[15])|5(221|446)|642[23]|8(622|8([24]2|5[13]))"]],[54,["346|4(27|9[35])|883","3469|4(279|9(30|56))|8834"]],[234,"[3-7]|8[2-8]"],[334,"[89]"],[434,1],["DbCD",1],[10,6,8,9,11,12,13]',64:'[323,"[89]0"],[134,"24|[346]|7[2-57-9]|9[2-9]","$1-$2 $3"],["CCd","2(10|74)|[59]|80"],["BdD","2[028]"],["BCA{3,5}","2([169]|7[0-35-9])|7|86"],[8,9,10]',65:'[44,"[369]|8[1-9]"],[334,8],[443,7],[434,1],[8,10,11]',66:'[134,2],["BCd","14|[3-9]"],[433,1],[9,8,10]',670:'[34,"[2-489]"],[44,7],[8,7]',672:"[24,1],[15,3],6",673:'[34,"[2-578]"],7',674:'[34,"[458]"],7',675:'[34,"18|[2-69]|85"],[44,"[78]"],[8,7]',676:'[23,"[2-4]|50|6[09]|7[0-24-69]|8[05]",1],[43,0],[34,"[5-8]"],[7,5]',677:'[25,"7|8[4-9]|9([1-8]|9[0-8])"],[7,5]',678:'[34,"[579]"],[7,5]',679:'[34,"[235-9]|45"],[434,0],[7,11]',680:'[34,"[2-9]"],7',681:'[222,"[4-8]"],6',682:'[23,"[2-8]"],5',683:"[34,8],[7,4]",685:'[5,"[2-6]"],["CA{3,7}",8],[25,7],[6,7,5]',686:"[8,5]",687:'[222,"[2-57-9]","$1.$2.$3"],6',688:"[6,7,5]",689:'[222,44],[2222,"[48]"],[8,6]',690:"[4,5,6,7]",691:'[34,"[39]"],7',692:'[34,"[2-6]",1],7',7:'[4222,["7(1[0-8]|2[1-9])","7(1([0-6]2|7|8[27])|2(1[23]|[2-9]2))","7(1([0-6]2|7|8[27])|2(13[03-69]|62[013-9]))|72[1-57-9]2"]],[5122,["7(1[0-68]|2[1-9])","7(1([06][3-6]|[18]|2[35]|[3-5][3-5])|2([13][3-5]|[24-689]|7[457]))","7(1(0([356]|4[023])|[18]|2(3[013-9]|5)|3[45]|43[013-79]|5(3[1-8]|4[1-7]|5)|6(3[0-35-9]|[4-6]))|2(1(3[178]|[45])|[24-689]|3[35]|7[457]))|7(14|23)4[0-8]|71(33|45)[1-79]"]],[334,7],[3322,"[3489]","$1 $2-$3-$4"],10',81:'[44,["007","0077","00777","00777[01]"],1],[333,"(12|57|99)0",1],[414,["1(26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(76|97)|746|8(3[89]|47|51|63)|9(49|80|9[16])","1(267|3(7[247]|9[278])|466|5(47|58|64)|6(3[245]|48|5[4-68]))|499[2468]|5(76|97)9|7468|8(3(8[78]|96)|477|51[24]|636)|9(496|802|9(1[23]|69))|1(45|58)[67]","1(267|3(7[247]|9[278])|466|5(47|58|64)|6(3[245]|48|5[4-68]))|499[2468]|5(769|979[2-69])|7468|8(3(8[78]|96[2457-9])|477|51[24]|636[2-57-9])|9(496|802|9(1[23]|69))|1(45|58)[67]"],1],[234,60,1],[144,["[36]|4(2[09]|7[01])","[36]|4(2(0|9[02-69])|7(0[019]|1))"],1],[234,["1(1|5[45]|77|88|9[69])|2(2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4([28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(2[124589]|3[279]|49|6[0-24-689]|7[0-468]|8[68]|9[019])|9([23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(1|5(4[018]|5[017])|77|88|9[69])|2(2([127]|3[014-9])|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|9[19])|62|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(2|3[045]|4[0-369]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9[0-2469])|49|6([0-24]|5[0-3589]|9[01459])|7[0-468]|8[68])|9([23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9([1289]|3[34]|4[0178]))|(49|55|83)[29]|(264|837)[016-9]|2(57|93)[015-9]|(47[59]|59[89]|8(6[68]|9))[019]","1(1|5(4[018]|5[017])|77|88|9[69])|2(2[127]|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|9(17|99))|6(2|4[016-9])|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9[0169])|3([29]|7([017-9]|6[6-8]))|49|6([0-24]|5([0-389]|5[23])|6([01]|9[178])|9[0145])|7[0-468]|8[68])|9(4[15]|5[138]|7[156]|8[189]|9([1289]|3(31|4[357])|4[0178]))|(8294|96)[1-3]|2(57|93)[015-9]|(223|8699)[014-9]|(48|8292|9[23])[1-9]|(47[59]|59[89]|8(68|9))[019]","1(1|5(4[018]|5[017])|77|88|9[69])|2(2[127]|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|7[015-9]|9(17|99))|6(2|4[016-9])|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17|3[015-9]))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9([019]|4[1-3]|6([0-47-9]|5[01346-9])))|3([29]|7([017-9]|6[6-8]))|49|6([0-24]|5([0-389]|5[23])|6([01]|9[178])|9[0145])|7[0-468]|8[68])|9(4[15]|5[138]|6[1-3]|7[156]|8[189]|9([1289]|3(31|4[357])|4[0178]))|(223|8699)[014-9]|(48|829(2|66)|9[23])[1-9]|(47[59]|59[89]|8(68|9))[019]"],1],[324,["[14]|[29][2-9]|5[3-9]|7[2-4679]|8([246-9]|3[3-8]|5[2-9])","[14]|[29][2-9]|5[3-9]|7[2-4679]|8([246-9]|3([3-6][2-9]|7|8[2-5])|5[2-9])"],1],["DBd","007",1],[424,"008",1],[334,800,1],[244,"[2579]|80",1],["DCd",0,1],["DDe",0,1],["DEf",0,1],["DFg",0,1],[10,8,9,11,12,13,14,15,16,17]',82:'[5,["1[016-9]1","1[016-9]11","1[016-9]114"]],["Bd","(3[1-3]|[46][1-4]|5[1-5])1",1],[44,1,1],["AdD",2,1],[234,"60|8",1],["BdD","[1346]|5[1-5]",1],[244,"[57]",1],[533,["003","0030"]],[254,5,1],["EdD",0],[5234,0],[9,10,5,6,8,12,13,14]',84:'[244,"2[48]"],["69Ae",69],[343,"2[0-35-79]"],["[89]ACBB","8(8|9[89])|9"],["1[2689]ACD","1([26]|8[68]|99)"],["[3578]ACD","[357]|8[1-5]"],["86[89];CC","86[89]"],["1[89]00;A{4,6}",["1[89]0","1[89]00"]],[9,10,8]',850:"[233,8],[134,2],[334,1],[10,8]",852:'["CA{2,5}",[900,9003]],[44,"[2-7]|8[1-4]|9(0[1-9]|[1-8])"],[333,8],[3233,9],[8,9]',853:'[44,"[268]"],8',855:'["BCd","[1-9]"],[433,1],[8,9,10]',856:'[233,"2[13]|3[14]|[4-8]"],[2223,3],[2233,2],[10,8,9]',86:'["Bf",["(10|2[0-57-9])[19]","(10|2[0-57-9])(10|9[56])","(10|2[0-57-9])(100|9[56])"]],[34,["[1-9]","1[1-9]|26|[3-9]|(10|2[0-57-9])([0-8]|9[0-47-9])","1[1-9]|26|[3-9]|(10|2[0-57-9])([02-8]|1(0[1-9]|[1-9])|9[0-47-9])"]],[44,"16[08]"],["Cf",["3([157]|35|49|9[1-68])|4([17]|2[179]|6[47-9]|8[23])|5([1357]|2[37]|4[36]|6[1-46]|80)|6(3[1-5]|6[0238]|9[12])|7(01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(4[35]|59|85)[1-9]","(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[1-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))[19]","85[23](10|95)|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))(10|9[56])","85[23](100|95)|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))(100|9[56])"]],[44,["[1-9]","1[1-9]|26|[3-9]|(10|2[0-57-9])([0-8]|9[0-47-9])","26|3([0268]|9[079])|4([049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6([0-24578]|6[14-79]|9[03-9])|7(0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8([046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(0[0457]|1[08]|[268]|4[024-9])|(34|85[23])[0-8]|(1|58)[1-9]|(63|95)[06-9]|(33|85[23]9)[0-46-9]|(10|2[0-57-9]|3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))([0-8]|9[0-47-9])","26|3([0268]|3[0-46-9]|4[0-8]|9[079])|4([049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6([0-24578]|3[06-9]|6[14-79]|9[03-9])|7(0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8([046]|1[01459]|2[0-489]|5(0|[23]([02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(1|58|85[23]10)[1-9]|(10|2[0-57-9])([0-8]|9[0-47-9])|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))([02-8]|1(0[1-9]|[1-9])|9[0-47-9])"]],[334,"(4|80)0"],[244,["10|2([02-57-9]|1[1-9])","10|2([02-57-9]|1[1-9])","10[0-79]|2([02-57-9]|1[1-79])|(10|21)8(0[1-9]|[1-9])"]],[334,"3([3-59]|7[02-68])|4([26-8]|3[3-9]|5[2-9])|5(3[03-9]|[468]|7[028]|9[2-46-9])|6|7([0-247]|3[04-9]|5[0-4689]|6[2368])|8([1-358]|9[1-7])|9([013479]|5[1-5])|([34]1|55|79|87)[02-9]"],["Ch",9],[434,80],[344,"[3-578]"],[344,"1[3-9]"],[2334,"[12]"],[11,7,8,9,10,12]',880:'["BA{4,6}","31[5-7]|[459]1",1],["CA{3,7}","3([67]|8[013-9])|4(6[168]|7|[89][18])|5(6[128]|9)|6(28|4[14]|5)|7[2-589]|8(0[014-9]|[12])|9[358]|(3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(44|66)[01346-9]",1],["DA{3,6}","[13-9]",1],["Ah",2,1],[10,6,7,8,9]',886:'["AdD","[25][2-8]|[346]|7[1-9]|8[237-9]"],[234,"[258]"],[333,9],[244,7],[9,8]',90:'[313,444],[334,"512|8[0589]|90"],[3322,["5([0-59]|61)","5([0-59]|616)","5([0-59]|6161)"]],[3322,"[24][1-8]|3[1-9]"],[10,7]',91:'[8,["5(0|2[23]|3[03]|[67]1|88)","5(0|2(21|3)|3(0|3[23])|616|717|888)","5(0|2(21|3)|3(0|3[23])|616|717|8888)"]],["De",[180,1800]],[334,140],[244,["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79([1-6]|7[19])|80([2-4]|6[0-589])","11|2[02]|33|4[04]|79([124-6]|3([02-9]|1[0-24-9])|7(1|9[1-6]))|80([2-4]|6[0-589])"]],[334,["1(2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(12|[2-4]1|5[17]|6[13]|80)|7(12|3[134]|4[47]|61|88)|8(16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(43|59|75)[15]|(1[59]|29|67|72)[14]","1(2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|[578]1|9[15])|6([2-4]1|5[17]|6[13]|7[14]|80)|7(12|(2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(70[2-6]|84[235-7]|91[3-7])|(1(29|60|8[06])|261|(55|61)2|7(31|4[47])|8(16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(12([2-6]|7[0-8])|[2-4]1|5[17]|6[13]|7[14]|80)|7(12|(2[14]|5[15])[2-6]|3171|61[346]|88([2-7]|82))|8(70[2-6]|84([2356]|7[19])|91([3-6]|7[19]))|73[134][2-6]|(1(29|60|8[06])|261|552|788[01])[2-7]|(74[47]|8(16|2[014]|3[126]|6[136]|7[78]|83))([2-6]|7[19])"]],[433,["1([2-479]|5[0235-9])|[2-5]|6(1[1358]|2[2457-9]|3[2-5]|[4-8])|7(1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1([2-479]|5[0235-9])|[2-5]|6(1[1358]|2([2457]|84|95)|3([2-4]|55)|[4-8])|7(1([013-8]|9[6-9])|28[6-8]|3(17|2[0-49]|9[2-57])|4(1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(2[1-3]|9[0-6])|6(0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1([2-479]|5([0236-9]|5[013-9]))|[2-5]|6(1[1358]|2([2457]|84|95)|3([2-4]|55)|[4-8])|7(1([013-8]|9[6-9])|3179)|807(1|9[1-3])|(1552|7(28[6-8]|3(2[0-49]|9[2-57])|4(1[2-4]|[29][0-7]|3[0-8]|[56].|8[0-24-7])|5(2[1-3]|9[0-6])|6(0[5689]|2[5-9]|3[02-8]|4.|5[0-367])|70[13-7]))[2-7]"]],[55,"[6-9]"],["DA{2,4};D",["1(6|8[06])","1(6|8[06]0)"]],[2343,0],[4333,18],[10,8,9,11,12,13]',92:'[332,"[89]0"],[45,1],["Bh","(2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],["Cg",["2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(2[3-8]|98)|(2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"]],[55,58],[37,3],[2333,"2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],[3333,"[24-9]"],[10,8,9]',93:'[234,"[2-7]"],9',94:'[234,7],[333,"[1-689]"],9',95:'[123,"16|2"],[223,"[45]|6(0[23]|[1-689]|7[235-7])|7([0-4]|5[2-7])|8[1-6]"],["ACd","[12]"],["BCd","[4-7]|8[1-35]"],["ACA{4,6}","9(2[0-4]|[35-9]|4[137-9])"],[144,2],[334,8],[1333,92],[154,9],[8,9,10,6,7]',960:'[34,"[3467]|9[14-9]",1],[334,"[89]"],[7,10]',961:'[133,"[13-69]|7([2-57]|62|8[0-7]|9[04-9])|8[02-9]"],[233,"[7-9]"],[7,8]',962:'[134,"[2356]|87"],["Cf","[89]"],[27,70],[144,7],[9,8]',963:'["BCd","[1-5]"],[333,9],[9,8]',964:'[134,1],["BCd","[2-6]"],[334,7],[8,10,9]',965:'["Dd","[169]|2([235]|4[1-35-9])|52"],[35,"[25]"],[8,7]',966:'[45,9],[234,1],[234,5],["CCd",81],[334,8],[9,8,10]',967:'["ACd","[1-6]|7[24-68]"],[333,7],[9,7,8]',968:'["CA{4,6}","[58]"],[26,2],[44,"[79]"],[8,7,9]',970:'[134,"[2489]"],[333,5],[433,1],[9,8,10]',971:'["CA{2,9}",800],["CA{2,9}","60|8"],[134,"[236]|[479][2-8]"],[315,"[479]"],[234,5],[9,5,6,7,8,10,11,12]',972:'[43,125,1],[422,121,1],[134,"[2-489]",1],[234,"[57]",1],[433,12,1],[46,159,1],[1333,"1[7-9]",1],["CbCD",15,"$1-$2 $3-$4"],[9,7,8,10,11,12]',973:'[44,"[13679]|8[047]"],8',974:'[34,"2[126]|8"],[44,"[3-7]"],[8,7]',975:'[133,"[2-68]|7[246]"],[8,7]',976:'[224,"[12]1"],[44,"[57-9]"],["Cf","[12]2[1-3]"],["Df",["[12](27|3[2-8]|4[2-68]|5[1-4689])","[12](27|3[2-8]|4[2-68]|5[1-4689])[0-3]"]],["Ee","[12]"],[8,9,10]',977:'[17,"1[2-6]",1],[26,"[1-8]|9([1-69]|7[15-9])",1],[37,9,1],[10,8]',98:'["Be","(1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],["CCd",9],[244,"[1-8]"],[10,6,7]',992:'[612,[331,3317]],[324,"[34]7|91[78]"],[414,3],[234,"[457-9]"],9',993:'[2222,12,"$1 $2-$3-$4"],[3122,"[1-5]","$1 $2-$3-$4"],[26,6],8',994:'[3222,9],[2322,["[12]|365","[12]|365","[12]|365([0-46-9]|5[0-35-9])"]],[2322,"[3-8]"],9',995:'[333,70],[2322,32],[3222,"[57]"],[3222,"[348]"],9',996:'[45,"3(1[346]|[24-79])"],[333,"[235-79]"],["CCAc",8],[9,10]',998:'[2322,"[679]"],9'};f["default"]=a}),66);
__d("WACryptoPkcs7",["WACryptoDependencies","WAErr"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=new Uint8Array(1);do d("WACryptoDependencies").getCrypto().getRandomValues(b);while(b[0]===0);h(a,b[0])}function b(a){var b=new Uint8Array(1);d("WACryptoDependencies").getCrypto().getRandomValues(b);h(a,(b[0]&15)+1)}function h(a,b){for(var c=0;c<b;c++)a.writeUint8(b)}function e(a){if(a.length===0)throw c("WAErr")("unpadPkcs7 given empty bytes");var b=a[a.length-1];if(b>a.length)throw c("WAErr")("unpadPkcs7 given "+a.length+" bytes, but pad is "+b);return new Uint8Array(a.buffer,a.byteOffset,a.length-b)}g.writeRandomPad=a;g.writeRandomPadMax16=b;g.writePad=h;g.unpadPkcs7=e}),98);
__d("WADepthFirstTraversal",[],(function(a,b,c,d,e,f){"use strict";function g(a,b,c){var d=b(a);d.forEach(function(a){return g(a,b,c)});c(a)}f["default"]=g}),66);
__d("WAGlobals",["WAErr","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}var i=null;function a(a){i=a}function j(){if(i==null)throw c("WAErr")("WaMsgr api called before set");return i}function k(){var a;return(a=j().myJids)==null?void 0:a.deviceJid}function b(){var a;return(a=j().myJids)==null?void 0:a.userJid}function e(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(k())}function f(){return j().config}function l(){return j().dependencies}var m="WAOneQueue is not defined";function n(){var a=j().waOneQueue;if(a==null){d("WALogger").ERROR(h(),m);throw c("WAErr")(m)}return a}function o(){return j().hmacKey}g.setGlobals=a;g.getMyDeviceJid=k;g.getMyUserJid=b;g.isPeerDevice=e;g.getConfig=f;g.getDependencies=l;g.getWaOneQueue=n;g.getHMACKey=o}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a,b="";try{a={}.Worker}catch(a){}g["default"]=a?function(c,d,e,f,g){var h=!1,i=new a(c+b,{eval:!0}).on("error",function(a){return g(a,null)}).on("message",function(a){return g(null,a)}).on("exit",function(a){a&&!h&&g(new Error("exited with code "+a),null)});i.postMessage(e,f);i.terminate=function(){h=!0;return a.prototype.terminate.call(i)};return i}:function(a,b,c,d,e){setImmediate(function(){return e(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});a=function(){};return{terminate:a,postMessage:a}}}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=Uint8Array,c=Uint16Array,d=Uint32Array,e=new b([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new b([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g=new b([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(a,b){var e=new c(31);for(var f=0;f<31;++f)e[f]=b+=1<<a[f-1];a=new d(e[30]);for(var f=1;f<30;++f)for(b=e[f];b<e[f+1];++b)a[b]=b-e[f]<<5|f;return[e,a]},i=h(e,2),j=i[0],m=i[1];j[28]=258,m[258]=28;i=h(f,0);var n=i[0],o=i[1],p=new c(32768);for(h=0;h<32768;++h){i=(h&43690)>>>1|(h&21845)<<1;i=(i&52428)>>>2|(i&13107)<<2;i=(i&61680)>>>4|(i&3855)<<4;p[h]=((i&65280)>>>8|(i&255)<<8)>>>1}var q=function(a,b,d){var e=a.length,f=0,g=new c(b);for(;f<e;++f)++g[a[f]-1];var h=new c(b);for(f=0;f<b;++f)h[f]=h[f-1]+g[f-1]<<1;if(d){g=new c(1<<b);d=15-b;for(f=0;f<e;++f)if(a[f]){var i=f<<4|a[f],j=b-a[f],k=h[a[f]-1]++<<j;for(j=k|(1<<j)-1;k<=j;++k)g[p[k]>>>d]=i}}else{g=new c(e);for(f=0;f<e;++f)a[f]&&(g[f]=p[h[a[f]-1]++]>>>15-a[f])}return g},r=new b(288);for(h=0;h<144;++h)r[h]=8;for(h=144;h<256;++h)r[h]=9;for(h=256;h<280;++h)r[h]=7;for(h=280;h<288;++h)r[h]=8;var s=new b(32);for(h=0;h<32;++h)s[h]=5;var t=q(r,9,0),u=q(r,9,1),v=q(s,5,0),w=q(s,5,1),x=function(a){var b=a[0];for(var c=1;c<a.length;++c)a[c]>b&&(b=a[c]);return b},y=function(a,b,c){var d=b/8|0;return(a[d]|a[d+1]<<8)>>(b&7)&c},z=function(a,b){var c=b/8|0;return(a[c]|a[c+1]<<8|a[c+2]<<16)>>(b&7)},aa=function(a){return(a/8|0)+(a&7&&1)},A=function(a,e,f){(e==null||e<0)&&(e=0);(f==null||f>a.length)&&(f=a.length);var g=new(a instanceof c?c:a instanceof d?d:b)(f-e);g.set(a.subarray(e,f));return g},B=function(a,c,d){var h=a.length;if(!h||d&&!d.l&&h<5)return c||new b(0);var i=!c||d,k=!d||d.i;d||(d={});c||(c=new b(h*3));var l=function(a){var d=c.length;if(a>d){d=new b(Math.max(d*2,a));d.set(c);c=d}},m=d.f||0,o=d.p||0,p=d.b||0,r=d.l,s=d.d,t=d.m,v=d.n,B=h*8;do{if(!r){d.f=m=y(a,o,1);var C=y(a,o+1,3);o+=3;if(!C){var D=aa(o)+4,E=a[D-4]|a[D-3]<<8,F=D+E;if(F>h){if(k)throw"unexpected EOF";break}i&&l(p+E);c.set(a.subarray(D,F),p);d.b=p+=E,d.p=o=F*8;continue}else if(C==1)r=u,s=w,t=9,v=5;else if(C==2){E=y(a,o,31)+257;F=y(a,o+10,15)+4;C=E+y(a,o+5,31)+1;o+=14;var G=new b(C),H=new b(19);for(var I=0;I<F;++I)H[g[I]]=y(a,o+I*3,7);o+=F*3;F=x(H);var J=(1<<F)-1;H=q(H,F,1);for(var I=0;I<C;){F=H[y(a,o,J)];o+=F&15;var D=F>>>4;if(D<16)G[I++]=D;else{F=0;var K=0;D==16?(K=3+y(a,o,3),o+=2,F=G[I-1]):D==17?(K=3+y(a,o,7),o+=3):D==18&&(K=11+y(a,o,127),o+=7);while(K--)G[I++]=F}}D=G.subarray(0,E);K=G.subarray(E);t=x(D);v=x(K);r=q(D,t,1);s=q(K,v,1)}else throw"invalid block type";if(o>B){if(k)throw"unexpected EOF";break}}i&&l(p+131072);J=(1<<t)-1;H=(1<<v)-1;C=o;for(;;C=o){F=r[z(a,o)&J];G=F>>>4;o+=F&15;if(o>B){if(k)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(G<256)c[p++]=G;else if(G==256){C=o,r=null;break}else{E=G-254;if(G>264){var I=G-257;D=e[I];E=y(a,o,(1<<D)-1)+j[I];o+=D}F=s[z(a,o)&H];G=F>>>4;if(!F)throw"invalid distance";o+=F&15;K=n[G];if(G>3){D=f[G];K+=z(a,o)&(1<<D)-1,o+=D}if(o>B){if(k)throw"unexpected EOF";break}i&&l(p+131072);F=p+E;for(;p<F;p+=4)c[p]=c[p-K],c[p+1]=c[p+1-K],c[p+2]=c[p+2-K],c[p+3]=c[p+3-K];p=F}}d.l=r,d.p=C,d.b=p;r&&(m=1,d.m=t,d.d=s,d.n=v)}while(!m);return p==c.length?c:A(c,0,p)},C=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8},D=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8;a[b+2]|=c>>>16},E=function(a,d){var e=[];for(var f=0;f<a.length;++f)a[f]&&e.push({s:f,f:a[f]});a=e.length;var g=e.slice();if(!a)return[L,0];if(a==1){var h=new b(e[0].s+1);h[e[0].s]=1;return[h,1]}e.sort(function(a,b){return a.f-b.f});e.push({s:-1,f:25001});h=e[0];var i=e[1],j=0,k=1,l=2;e[0]={s:-1,f:h.f+i.f,l:h,r:i};while(k!=a-1)h=e[e[j].f<e[l].f?j++:l++],i=e[j!=k&&e[j].f<e[l].f?j++:l++],e[k++]={s:-1,f:h.f+i.f,l:h,r:i};h=g[0].s;for(var f=1;f<a;++f)g[f].s>h&&(h=g[f].s);var m=new c(h+1);i=F(e[k-1],m,0);if(i>d){var f=0;j=0;l=i-d;h=1<<l;g.sort(function(a,b){return m[b.s]-m[a.s]||a.f-b.f});for(;f<a;++f){e=g[f].s;if(m[e]>d)j+=h-(1<<i-m[e]),m[e]=d;else break}j>>>=l;while(j>0){k=g[f].s;m[k]<d?j-=1<<d-m[k]++-1:++f}for(;f>=0&&j;--f){e=g[f].s;m[e]==d&&(--m[e],++j)}i=d}return[new b(m),i]},F=function(a,b,c){return a.s==-1?Math.max(F(a.l,b,c+1),F(a.r,b,c+1)):b[a.s]=c},G=function(a){var b=a.length;while(b&&!a[--b]);var d=new c(++b),e=0,f=a[0],g=1,h=function(a){d[e++]=a};for(var i=1;i<=b;++i)if(a[i]==f&&i!=b)++g;else{if(!f&&g>2){for(;g>138;g-=138)h(32754);g>2&&(h(g>10?g-11<<5|28690:g-3<<5|12305),g=0)}else if(g>3){h(f),--g;for(;g>6;g-=6)h(8304);g>2&&(h(g-3<<5|8208),g=0)}while(g--)h(f);g=1;f=a[i]}return[d.subarray(0,e),b]},H=function(a,b){var c=0;for(var d=0;d<b.length;++d)c+=a[d]*b[d];return c},I=function(a,b,c){var d=c.length;b=aa(b+2);a[b]=d&255;a[b+1]=d>>>8;a[b+2]=a[b]^255;a[b+3]=a[b+1]^255;for(var e=0;e<d;++e)a[b+e+4]=c[e];return(b+4+d)*8},J=function(a,b,d,h,i,j,k,l,m,n,o){C(b,o++,d);++i[256];d=E(i,15);var p=d[0];d=d[1];var u=E(j,15),w=u[0];u=u[1];var x=G(p),y=x[0];x=x[1];var z=G(w),aa=z[0];z=z[1];var A=new c(19);for(var B=0;B<y.length;++B)A[y[B]&31]++;for(var B=0;B<aa.length;++B)A[aa[B]&31]++;var F=E(A,7),J=F[0];F=F[1];var K=19;for(;K>4&&!J[g[K-1]];--K);var L=n+5<<3,M=H(i,r)+H(j,s)+k;i=H(i,p)+H(j,w)+k+14+3*K+H(A,J)+(2*A[16]+3*A[17]+7*A[18]);if(L<=M&&L<=i)return I(b,o,a.subarray(m,m+n));C(b,o,1+(i<M)),o+=2;if(i<M){j=q(p,d,0),k=p,A=q(w,u,0),L=w;a=q(J,F,0);C(b,o,x-257);C(b,o+5,z-1);C(b,o+10,K-4);o+=14;for(var B=0;B<K;++B)C(b,o+3*B,J[g[B]]);o+=3*K;m=[y,aa];for(n=0;n<2;++n){i=m[n];for(var B=0;B<i.length;++B){M=i[B]&31;C(b,o,a[M]),o+=J[M];M>15&&(C(b,o,i[B]>>>5&127),o+=i[B]>>>12)}}}else j=t,k=r,A=v,L=s;for(var B=0;B<l;++B)if(h[B]>255){M=h[B]>>>18&31;D(b,o,j[M+257]),o+=k[M+257];M>7&&(C(b,o,h[B]>>>23&31),o+=e[M]);d=h[B]&31;D(b,o,A[d]),o+=L[d];d>3&&(D(b,o,h[B]>>>5&8191),o+=f[d])}else D(b,o,j[h[B]]),o+=k[h[B]];D(b,o,j[256]);return o+k[256]},K=new d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L=new b(0),M=function(a,g,h,i,j,k){var l=a.length,n=new b(i+l+5*(1+Math.ceil(l/7e3))+j),p=n.subarray(i,n.length-j),q=0;if(!g||l<8)for(var r=0;r<=l;r+=65535){var s=r+65535;s<l?q=I(p,q,a.subarray(r,s)):(p[r]=k,q=I(p,q,a.subarray(r,l)))}else{s=K[g-1];g=s>>>13;s=s&8191;var t=(1<<h)-1,u=new c(32768),v=new c(t+1),w=Math.ceil(h/3),x=2*w;h=function(b){return(a[b]^a[b+1]<<w^a[b+2]<<x)&t};var y=new d(25e3),z=new c(288),B=new c(32),C=0,D=0,r=0,E=0,F=0,G=0;for(;r<l;++r){var H=h(r),M=r&32767,N=v[H];u[M]=N;v[H]=M;if(F<=r){var O=l-r;if((C>7e3||E>24576)&&O>423){q=J(a,p,0,y,z,B,D,E,G,r-G,q);E=C=D=0,G=r;for(var P=0;P<286;++P)z[P]=0;for(var P=0;P<30;++P)B[P]=0}var Q=2,R=0,ba=s,S=M-N&32767;if(O>2&&H==h(r-S)){H=Math.min(g,O)-1;var ca=Math.min(32767,r);O=Math.min(258,O);while(S<=ca&&--ba&&M!=N){if(a[r+Q]==a[r+Q-S]){var T=0;for(;T<O&&a[r+T]==a[r+T-S];++T);if(T>Q){Q=T,R=S;if(T>H)break;T=Math.min(S,T-2);var da=0;for(var P=0;P<T;++P){var U=r-S+P+32768&32767,V=u[U];V=U-V+32768&32767;V>da&&(da=V,N=U)}}}M=N,N=u[M];S+=M-N+32768&32767}}if(R){y[E++]=268435456|m[Q]<<18|o[R];V=m[Q]&31;U=o[R]&31;D+=e[V]+f[U];++z[257+V];++B[U];F=r+Q;++C}else y[E++]=a[r],++z[a[r]]}}q=J(a,p,k,y,z,B,D,E,G,r-G,q);!k&&q&7&&(q=I(p,q+1,L))}return A(n,0,i+aa(q)+j)},N=function(){var a=new Int32Array(256);for(var b=0;b<256;++b){var c=b,d=9;while(--d)c=(c&1&&-306674912)^c>>>1;a[b]=c}return a}(),O=function(){var a=-1;return{p:function(b){var c=a;for(var d=0;d<b.length;++d)c=N[c&255^b[d]]^c>>>8;a=c},d:function(){return~a}}},P=function(){var a=1,b=0;return{p:function(c){var d=a,e=b,f=c.length;for(var g=0;g!=f;){var h=Math.min(g+2655,f);for(;g<h;++g)e+=d+=c[g];d=(d&65535)+15*(d>>16),e=(e&65535)+15*(e>>16)}a=d,b=e},d:function(){a%=65521,b%=65521;return(a&255)<<24|a>>>8<<16|(b&255)<<8|b>>>8}}},Q=function(a,b,c,d,e){return M(a,b.level==null?6:b.level,b.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):12+b.mem,c,d,!e)},R=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},ba=function(b,c,a){var d=b();b=b.toString();b=b.slice(b.indexOf("[")+1,b.lastIndexOf("]")).replace(/ /g,"").split(",");for(var e=0;e<d.length;++e){var f=d[e],g=b[e];if(typeof f=="function"){c+=";"+g+"=";var h=f.toString();if(f.prototype)if(h.indexOf("[native code]")!=-1){var i=h.indexOf(" ",8)+1;c+=h.slice(i,h.indexOf("(",i))}else{c+=h;for(i in f.prototype)c+=";"+g+".prototype."+i+"="+f.prototype[i].toString()}else c+=h}else a[g]=f}return[c,a]},S=[],ca=function(a){var e=[];for(var f in a)(a[f]instanceof b||a[f]instanceof c||a[f]instanceof d)&&e.push((a[f]=new a[f].constructor(a[f])).buffer);return e},T=function(c,d,e,f){var b;if(!S[e]){var g="",h={},i=c.length-1;for(var j=0;j<i;++j)b=ba(c[j],g,h),g=b[0],h=b[1];S[e]=ba(c[i],g,h)}b=R({},S[e][1]);return a["default"](S[e][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+d.toString()+"}",e,b,ca(b),f)},da=function(){return[b,c,d,e,f,g,j,n,u,w,p,q,x,y,z,aa,A,B,za,ha,ia]},U=function(){return[b,c,d,e,f,g,m,o,t,r,v,s,p,K,L,q,C,D,E,F,G,H,I,J,aa,A,M,Q,wa,ha]},V=function(){return[ma,pa,Z,O,N]},ea=function(){return[na,oa]},fa=function(){return[qa,Z,P]},ga=function(){return[ra]},ha=function(a){return postMessage(a,[a.buffer])},ia=function(a){return a&&a.size&&new b(a.size)},ja=function(a,b,c,d,e,f){var g=T(c,d,e,function(b,a){g.terminate(),f(b,a)});g.postMessage([a,b],b.consume?[a.buffer]:[]);return function(){g.terminate()}},W=function(a){a.ondata=function(a,b){return postMessage([a,b],[a.buffer])};return function(b){return a.push(b.data[0],b.data[1])}},ka=function(a,b,c,d,e){var f,g=T(a,d,e,function(a,c){a?(g.terminate(),b.ondata.call(b,a)):(c[1]&&g.terminate(),b.ondata.call(b,a,c[0],c[1]))});g.postMessage(c);b.push=function(a,c){if(f)throw"stream finished";if(!b.ondata)throw"no stream handler";g.postMessage([a,f=c],[a.buffer])};b.terminate=function(){g.terminate()}},X=function(a,b){return a[b]|a[b+1]<<8},Y=function(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24)>>>0},la=function(a,b){return Y(a,b)+Y(a,b+4)*4294967296},Z=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},ma=function(a,b){var c=b.filename;a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:b.level==9?2:0,a[9]=3;b.mtime!=0&&Z(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3));if(c){a[3]=8;for(b=0;b<=c.length;++b)a[b+10]=c.charCodeAt(b)}},na=function(a){if(a[0]!=31||a[1]!=139||a[2]!=8)throw"invalid gzip data";var b=a[3],c=10;b&4&&(c+=a[10]|(a[11]<<8)+2);for(var d=(b>>3&1)+(b>>4&1);d>0;d-=!a[c++]);return c+(b&2)},oa=function(a){var b=a.length;return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0},pa=function(a){return 10+(a.filename&&a.filename.length+1||0)},qa=function(a,b){b=b.level;b=b==0?0:b<6?1:b==9?3:2;a[0]=120,a[1]=b<<6|(b?32-2*b:1)},ra=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sa(a,b){!b&&typeof a=="function"&&(b=a,a={});this.ondata=b;return a}var ta=function(){function a(a,b){!b&&typeof a=="function"&&(b=a,a={}),this.ondata=b,this.o=a||{}}a.prototype.p=function(a,b){this.ondata(Q(a,this.o,0,0,!b),b)};a.prototype.push=function(a,b){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=b;this.p(a,b||!1)};return a}();l.Deflate=ta;var ua=function(){function a(a,b){ka([U,function(){return[W,ta]}],this,sa.call(this,a,b),function(a){a=new ta(a.data);onmessage=W(a)},6)}return a}();l.AsyncDeflate=ua;function va(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U],function(a){return ha(wa(a.data[0],a.data[1]))},0,c)}l.deflate=va;function wa(a,b){return Q(a,b||{},0,0)}l.deflateSync=wa;var $=function(){function a(a){this.s={},this.p=new b(0),this.ondata=a}a.prototype.e=function(a){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var c=this.p.length,d=new b(c+a.length);d.set(this.p),d.set(a,c),this.p=d};a.prototype.c=function(a){this.d=this.s.i=a||!1;a=this.s.b;var b=B(this.p,this.o,this.s);this.ondata(A(b,a,this.s.b),this.d);this.o=A(b,this.s.b-32768),this.s.b=this.o.length;this.p=A(this.p,this.s.p/8|0),this.s.p&=7};a.prototype.push=function(a,b){this.e(a),this.c(b)};return a}();l.Inflate=$;var xa=function(){function a(a){this.ondata=a,ka([da,function(){return[W,$]}],this,0,function(){var a=new $();onmessage=W(a)},7)}return a}();l.AsyncInflate=xa;function ya(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da],function(a){return ha(za(a.data[0],ia(a.data[1])))},1,c)}l.inflate=ya;function za(a,b){return B(a,b)}l.inflateSync=za;var Aa=function(){function a(a,b){this.c=O(),this.l=0,this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);this.l+=a.length;a=Q(a,this.o,this.v&&pa(this.o),b&&8,!b);this.v&&(ma(a,this.o),this.v=0);b&&(Z(a,a.length-8,this.c.d()),Z(a,a.length-4,this.l));this.ondata(a,b)};return a}();l.Gzip=Aa;l.Compress=Aa;i=function(){function a(a,b){ka([U,V,function(){return[W,ta,Aa]}],this,sa.call(this,a,b),function(a){a=new Aa(a.data);onmessage=W(a)},8)}return a}();l.AsyncGzip=i;l.AsyncCompress=i;function Ba(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,V,function(){return[Ca]}],function(a){return ha(Ca(a.data[0],a.data[1]))},2,c)}l.gzip=Ba;l.compress=Ba;function Ca(a,b){b||(b={});var c=O(),d=a.length;c.p(a);a=Q(a,b,pa(b),8);var e=a.length;return ma(a,b),Z(a,e-8,c.d()),Z(a,e-4,d),a}l.gzipSync=Ca;l.compressSync=Ca;var Da=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){a=this.p.length>3?na(this.p):4;if(a>=this.p.length&&!b)return;this.p=this.p.subarray(a),this.v=0}if(b){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}$.prototype.c.call(this,b)};return a}();l.Gunzip=Da;var Ea=function(){function a(a){this.ondata=a,ka([da,ea,function(){return[W,$,Da]}],this,0,function(){var a=new Da();onmessage=W(a)},9)}return a}();l.AsyncGunzip=Ea;function Fa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ea,function(){return[Ga]}],function(a){return ha(Ga(a.data[0]))},3,c)}l.gunzip=Fa;function Ga(a,c){return B(a.subarray(na(a),-8),c||new b(oa(a)))}l.gunzipSync=Ga;var Ha=function(){function a(a,b){this.c=P(),this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);a=Q(a,this.o,this.v&&2,b&&4,!b);this.v&&(qa(a,this.o),this.v=0);b&&Z(a,a.length-4,this.c.d());this.ondata(a,b)};return a}();l.Zlib=Ha;h=function(){function a(a,b){ka([U,fa,function(){return[W,ta,Ha]}],this,sa.call(this,a,b),function(a){a=new Ha(a.data);onmessage=W(a)},10)}return a}();l.AsyncZlib=h;function Ia(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,fa,function(){return[Ja]}],function(a){return ha(Ja(a.data[0],a.data[1]))},4,c)}l.zlib=Ia;function Ja(a,b){b||(b={});var c=P();c.p(a);a=Q(a,b,2,4);return qa(a,b),Z(a,a.length-4,c.d()),a}l.zlibSync=Ja;var Ka=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){if(this.p.length<2&&!b)return;this.p=this.p.subarray(2),this.v=0}if(b){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}$.prototype.c.call(this,b)};return a}();l.Unzlib=Ka;var La=function(){function a(a){this.ondata=a,ka([da,ga,function(){return[W,$,Ka]}],this,0,function(){var a=new Ka();onmessage=W(a)},11)}return a}();l.AsyncUnzlib=La;function Ma(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ga,function(){return[Na]}],function(a){return ha(Na(a.data[0],ia(a.data[1])))},5,c)}l.unzlib=Ma;function Na(a,b){return B((ra(a),a.subarray(2,-4)),b)}l.unzlibSync=Na;var Oa=function(){function a(a){this.G=Da,this.I=$,this.Z=Ka,this.ondata=a}a.prototype.push=function(a,c){if(!this.ondata)throw"no stream handler";if(!this.s){if(this.p&&this.p.length){var d=new b(this.p.length+a.length);d.set(this.p),d.set(a,this.p.length)}else this.p=a;if(this.p.length>2){var e=this;d=function(){e.ondata.apply(e,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(d):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(d):new this.Z(d);this.s.push(this.p,c);this.p=null}}else this.s.push(a,c)};return a}();l.Decompress=Oa;i=function(){function a(a){this.G=Ea,this.I=xa,this.Z=La,this.ondata=a}a.prototype.push=function(a,b){Oa.prototype.push.call(this,a,b)};return a}();l.AsyncDecompress=i;function Pa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return a[0]==31&&a[1]==139&&a[2]==8?Fa(a,b,c):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?ya(a,b,c):Ma(a,b,c)}l.decompress=Pa;function Qa(a,b){return a[0]==31&&a[1]==139&&a[2]==8?Ga(a,b):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?za(a,b):Na(a,b)}l.decompressSync=Qa;var Ra=function(a,c,d,e){for(var f in a){var g=a[f],h=c+f;g instanceof b?d[h]=[g,e]:Array.isArray(g)?d[h]=[g[0],R(e,g[1])]:Ra(g,h+"/",d,e)}},Sa=typeof TextEncoder!="undefined"&&new TextEncoder(),Ta=typeof TextDecoder!="undefined"&&new TextDecoder(),Ua=0;try{Ta.decode(L,{stream:!0}),Ua=1}catch(a){}var Va=function(a){for(var b="",c=0;;){var d=a[c++],e=(d>127)+(d>223)+(d>239);if(c+e>a.length)return[b,A(a,c-1)];!e?b+=String.fromCharCode(d):e==3?(d=((d&15)<<18|(a[c++]&63)<<12|(a[c++]&63)<<6|a[c++]&63)-65536,b+=String.fromCharCode(55296|d>>10,56320|d&1023)):e&1?b+=String.fromCharCode((d&31)<<6|a[c++]&63):b+=String.fromCharCode((d&15)<<12|(a[c++]&63)<<6|a[c++]&63)}};Ba=function(){function a(a){this.ondata=a,Ua?this.t=new TextDecoder():this.p=L}a.prototype.push=function(a,c){if(!this.ondata)throw"no callback";c=!!c;if(this.t){this.ondata(this.t.decode(a,{stream:!0}),c);if(c){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var d=new b(this.p.length+a.length);d.set(this.p);d.set(a,this.p.length);a=Va(d);d=a[0];a=a[1];if(c){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(d,c)};return a}();l.DecodeUTF8=Ba;h=function(){function a(a){this.ondata=a}a.prototype.push=function(a,b){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Wa(a),this.d=b||!1)};return a}();l.EncodeUTF8=h;function Wa(a,c){if(c){var d=new b(a.length);for(var e=0;e<a.length;++e)d[e]=a.charCodeAt(e);return d}if(Sa)return Sa.encode(a);d=a.length;var f=new b(a.length+(a.length>>1)),g=0,h=function(a){f[g++]=a};for(var e=0;e<d;++e){if(g+5>f.length){var i=new b(g+8+(d-e<<1));i.set(f);f=i}i=a.charCodeAt(e);i<128||c?h(i):i<2048?(h(192|i>>6),h(128|i&63)):i>55295&&i<57344?(i=65536+(i&1023<<10)|a.charCodeAt(++e)&1023,h(240|i>>18),h(128|i>>12&63),h(128|i>>6&63),h(128|i&63)):(h(224|i>>12),h(128|i>>6&63),h(128|i&63))}return A(f,0,g)}l.strToU8=Wa;function Xa(a,b){if(b){b="";for(var c=0;c<a.length;c+=16384)b+=String.fromCharCode.apply(null,a.subarray(c,c+16384));return b}else if(Ta)return Ta.decode(a);else{c=Va(a);b=c[0];a=c[1];if(a.length)throw"invalid utf-8 data";return b}}l.strFromU8=Xa;var Ya=function(a){return a==1?3:a<6?2:a==9?1:0},Za=function(a,b){return b+30+X(a,b+26)+X(a,b+28)},$a=function(a,b,c){var d=X(a,b+28),e=Xa(a.subarray(b+46,b+46+d),!(X(a,b+8)&2048));d=b+46+d;var f=Y(a,b+20);c=c&&f==4294967295?ab(a,d):[f,Y(a,b+24),Y(a,b+42)];f=c[0];var g=c[1];c=c[2];return[X(a,b+10),f,g,e,d+X(a,b+30)+X(a,b+32),c]},ab=function(a,b){for(;X(a,b)!=1;b+=4+X(a,b+2));return[la(a,b+12),la(a,b+4),la(a,b+20)]},bb=function(a){var b=0;if(a)for(var c in a){var d=a[c].length;if(d>65535)throw"extra field too long";b+=d+4}return b},cb=function(b,c,d,e,f,g,h,i){var a=e.length,j=d.extra,k=i&&i.length,l=bb(j);Z(b,c,h!=null?33639248:67324752),c+=4;h!=null&&(b[c++]=20,b[c++]=d.os);b[c]=20,c+=2;b[c++]=d.flag<<1|(g==null&&8),b[c++]=f&&8;b[c++]=d.compression&255,b[c++]=d.compression>>8;f=new Date(d.mtime==null?Date.now():d.mtime);var m=f.getFullYear()-1980;if(m<0||m>119)throw"date not in range 1980-2099";Z(b,c,m<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),c+=4;g!=null&&(Z(b,c,d.crc),Z(b,c+4,g),Z(b,c+8,d.size));Z(b,c+12,a);Z(b,c+14,l),c+=16;h!=null&&(Z(b,c,k),Z(b,c+6,d.attrs),(Z(b,c+10,h),c+=14));b.set(e,c);c+=a;if(l)for(m in j){f=j[m];g=f.length;Z(b,c,+m);Z(b,c+2,g);b.set(f,c+4),c+=4+g}k&&(b.set(i,c),c+=k);return c},db=function(a,b,c,d,e){Z(a,b,101010256),Z(a,b+8,c),Z(a,b+10,c),Z(a,b+12,d),Z(a,b+16,e)},eb=function(){function a(a){this.filename=a,this.c=O(),this.size=0,this.compression=0}a.prototype.process=function(a,b){this.ondata(null,a,b)};a.prototype.push=function(a,b){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(a);this.size+=a.length;b&&(this.crc=this.c.d());this.process(a,b||!1)};return a}();l.ZipPassThrough=eb;Ia=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ta(b,function(a,b){c.ondata(null,a,b)});this.compression=8;this.flag=Ya(b.level)}a.prototype.process=function(a,b){try{this.d.push(a,b)}catch(a){this.ondata(a,null,b)}};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.ZipDeflate=Ia;i=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ua(b,function(a,b,d){c.ondata(a,b,d)});this.compression=8;this.flag=Ya(b.level);this.terminate=this.d.terminate}a.prototype.process=function(a,b){this.d.push(a,b)};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.AsyncZipDeflate=i;Pa=function(){function a(a){this.ondata=a,this.u=[],this.d=1}a.prototype.add=function(c){var d=this;if(this.d&2)throw"stream finished";var e=Wa(c.filename),a=e.length,f=c.comment,g=f&&Wa(f);f=a!=c.filename.length||g&&f.length!=g.length;var h=a+bb(c.extra)+30;if(a>65535)throw"filename too long";a=new b(h);cb(a,0,c,e,f);var i=[a],j=function(){for(var a=0,b=i;a<b.length;a++){var c=b[a];d.ondata(null,c,!1)}i=[]},k=this.d;this.d=0;var l=this.u.length,m=R(c,{f:e,u:f,o:g,t:function(){c.terminate&&c.terminate()},r:function(){j();if(k){var a=d.u[l+1];a?a.r():d.d=1}k=1}}),n=0;c.ondata=function(a,e,f){if(a)d.ondata(a,e,f),d.terminate();else{n+=e.length;i.push(e);if(f){a=new b(16);Z(a,0,134695760);Z(a,4,c.crc);Z(a,8,n);Z(a,12,c.size);i.push(a);m.c=n,m.b=h+n+16,m.crc=c.crc,m.size=c.size;k&&m.r();k=1}else k&&j()}};this.u.push(m)};a.prototype.end=function(){var a=this;if(this.d&2){if(this.d&1)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){if(!(a.d&1))return;a.u.splice(-1,1);a.e()},t:function(){}});this.d=3};a.prototype.e=function(){var c=0,d=0,e=0;for(var f=0,a=this.u;f<a.length;f++){var g=a[f];e+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0)}a=new b(e+22);for(var f=0,h=this.u;f<h.length;f++){var g=h[f];cb(a,c,g,g.f,g.u,g.c,d,g.o);c+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0),d+=g.b}db(a,c,this.u.length,e,d);this.ondata(null,a,!0);this.d=2};a.prototype.terminate=function(){for(var b=0,a=this.u;b<a.length;b++){var c=a[b];c.t()}this.d=2};return a}();l.Zip=Pa;function fb(a,c,d){d||(d=c,c={});if(typeof d!="function")throw"no callback";var e={};Ra(a,"",e,c);var f=Object.keys(e),g=f.length,h=0,i=0,j=g,k=new Array(g),l=[],m=function(){for(var a=0;a<l.length;++a)l[a]()},n=function(){var a=new b(i+22),c=h,e=i-h;i=0;for(var f=0;f<j;++f){var g=k[f];try{var l=g.c.length;cb(a,i,g,g.f,g.u,l);var m=30+g.f.length+bb(g.extra),n=i+m;a.set(g.c,n);cb(a,h,g,g.f,g.u,l,i,g.m),h+=16+m+(g.m?g.m.length:0),i=n+l}catch(a){return d(a,null)}}db(a,h,k.length,e,c);d(null,a)};g||n();a=function(b){var c=f[b],a=e[c],j=a[0],o=a[1],p=O(),q=j.length;p.p(j);var r=Wa(c),s=r.length,t=o.comment,u=t&&Wa(t),v=u&&u.length,w=bb(o.extra),x=o.level==0?0:8;a=function(a,e){if(a)m(),d(a,null);else{a=e.length;k[b]=R(o,{size:q,crc:p.d(),c:e,f:r,m:u,u:s!=c.length||u&&t.length!=v,compression:x});h+=30+s+w+a;i+=76+2*(s+w)+(v||0)+a;--g||n()}};s>65535&&a("filename too long",null);if(!x)a(null,j);else if(q<16e4)try{a(null,wa(j,o))}catch(b){a(b,null)}else l.push(va(j,o,a))};for(c=0;c<j;++c)a(c);return m}l.zip=fb;function gb(c,d){d||(d={});var e={},f=[];Ra(c,"",e,d);c=0;d=0;for(var g in e){var a=e[g],h=a[0];a=a[1];var i=a.level==0?0:8,j=Wa(g),k=j.length,l=a.comment,m=l&&Wa(l),n=m&&m.length,o=bb(a.extra);if(k>65535)throw"filename too long";var p=i?wa(h,a):h,q=p.length,r=O();r.p(h);f.push(R(a,{size:h.length,crc:r.d(),c:p,f:j,m:m,u:k!=g.length||m&&l.length!=n,o:c,compression:i}));c+=30+k+o+q;d+=76+2*(k+o)+(n||0)+q}a=new b(d+22);h=c;r=d-c;for(p=0;p<f.length;++p){var j=f[p];cb(a,j.o,j,j.f,j.u,j.c.length);m=30+j.f.length+bb(j.extra);a.set(j.c,j.o+m);cb(a,c,j,j.f,j.u,j.c.length,j.o,j.m),c+=16+m+(j.m?j.m.length:0)}db(a,c,f.length,r,h);return a}l.zipSync=gb;var hb=function(){function a(){}a.prototype.push=function(a,b){this.ondata(null,a,b)};a.compression=0;return a}();l.UnzipPassThrough=hb;Qa=function(){function a(){var a=this;this.i=new $(function(b,c){a.ondata(null,b,c)})}a.prototype.push=function(a,b){try{this.i.push(a,b)}catch(c){this.ondata(c,a,b)}};a.compression=8;return a}();l.UnzipInflate=Qa;Ba=function(){function a(a,b){var c=this;b<32e4?this.i=new $(function(a,b){c.ondata(null,a,b)}):(this.i=new xa(function(a,b,d){c.ondata(a,b,d)}),this.terminate=this.i.terminate)}a.prototype.push=function(a,b){this.i.terminate&&(a=A(a,0)),this.i.push(a,b)};a.compression=8;return a}();l.AsyncUnzipInflate=Ba;h=function(){function a(a){this.onfile=a,this.k=[],this.o={0:hb},this.p=L}a.prototype.push=function(a,c){var d=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var e=Math.min(this.c,a.length),f=a.subarray(0,e);this.c-=e;this.d?this.d.push(f,!this.c):this.k[0].push(f);a=a.subarray(e);if(a.length)return this.push(a,c)}else{f=0;var g=0;e=void 0;var h=void 0;!this.p.length?h=a:!a.length?h=this.p:(h=new b(this.p.length+a.length),(h.set(this.p),h.set(a,this.p.length)));var i=h.length,j=this.c;a=j&&this.d;var k=function(){var a=Y(h,g);if(a==67324752){f=1,e=g;l.d=null;l.c=0;var b=X(h,g+6),c=X(h,g+8),k=b&2048;b=b&8;var m=X(h,g+26),n=X(h,g+28);if(i>g+30+m+n){var o=[];l.k.unshift(o);f=2;var p=Y(h,g+18),q=Y(h,g+22),r=Xa(h.subarray(g+30,g+=30+m),!k);p==4294967295?(m=b?[-2]:ab(h,g),p=m[0],q=m[1]):b&&(p=-1);g+=n;l.c=p;var s,t={name:r,compression:c,start:function(){if(!t.ondata)throw"no callback";if(!p)t.ondata(null,L,!0);else{var a=d.o[c];if(!a)throw"unknown compression type "+c;s=p<0?new a(r):new a(r,p,q);s.ondata=function(c,b,a){t.ondata(c,b,a)};for(var a=0,b=o;a<b.length;a++){var e=b[a];s.push(e,!1)}d.k[0]==o&&d.c?d.d=s:s.push(L,!0)}},terminate:function(){s&&s.terminate&&s.terminate()}};p>=0&&(t.size=p,t.originalSize=q);l.onfile(t)}return"break"}else if(j)if(a==134695760){e=g+=12+(j==-2&&8),f=3,l.c=0;return"break"}else if(a==33639248){e=g-=4,f=3,l.c=0;return"break"}},l=this;for(;g<i-4;++g){var m=k();if(m==="break")break}this.p=L;if(j<0){m=f?h.subarray(0,e-12-(j==-2&&8)-(Y(h,e-16)==134695760&&4)):h.subarray(0,g);a?a.push(m,!!f):this.k[+(f==2)].push(m)}if(f&2)return this.push(h.subarray(g),c);this.p=h.subarray(g)}if(c){if(this.c)throw"invalid zip file";this.p=null}};a.prototype.register=function(a){this.o[a.compression]=a};return a}();l.Unzip=h;function ib(a,c){if(typeof c!="function")throw"no callback";var d=[],e=function(){for(var a=0;a<d.length;++a)d[a]()},f={},g=a.length-22;for(;Y(a,g)!=101010256;--g)if(!g||a.length-g>65558){c("invalid zip file",null);return}var h=X(a,g+8);h||c(null,{});var i=h,j=Y(a,g+16),k=j==4294967295;if(k){g=Y(a,g-12);if(Y(a,g)!=101075792){c("invalid zip file",null);return}i=h=Y(a,g+32);j=Y(a,g+48)}g=function(g){g=$a(a,j,k);var i=g[0],l=g[1],m=g[2],n=g[3],o=g[4];g=g[5];g=Za(a,g);j=o;o=function(a,b){a?(e(),c(a,null)):(f[n]=b,--h||c(null,f))};if(!i)o(null,A(a,g,g+l));else if(i==8){g=a.subarray(g,g+l);if(l<32e4)try{o(null,za(g,new b(m)))}catch(a){o(a,null)}else d.push(ya(g,{size:m},o))}else o("unknown compression type "+i,null)};for(var l=0;l<i;++l)g(l);return e}l.unzip=ib;function jb(c){var d={},e=c.length-22;for(;Y(c,e)!=101010256;--e)if(!e||c.length-e>65558)throw"invalid zip file";var f=X(c,e+8);if(!f)return{};var g=Y(c,e+16),h=g==4294967295;if(h){e=Y(c,e-12);if(Y(c,e)!=101075792)throw"invalid zip file";f=Y(c,e+32);g=Y(c,e+48)}for(e=0;e<f;++e){var a=$a(c,g,h),i=a[0],j=a[1],k=a[2],l=a[3],m=a[4];a=a[5];a=Za(c,a);g=m;if(!i)d[l]=A(c,a,a+j);else if(i==8)d[l]=za(c.subarray(a,a+j),new b(k));else throw"unknown compression type "+i}return d}l.unzipSync=jb}var o=!1;function p(){o||(o=!0,n());return m.exports}function a(a){switch(a){case void 0:return p()}}e.exports=a}),null);
__d("fflate",["fflate-0.6.10"],(function(a,b,c,d,e,f){e.exports=b("fflate-0.6.10")()}),null);
__d("WAGzip",["Promise","WAErr","fflate"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.$GzipWrapper2=[];c.ondata=function(a,b){c.$GzipWrapper2.push(a);if(!b)return;var d=0;c.$GzipWrapper2.forEach(function(a){d+=a.length});var e=new Uint8Array(d),f=0;c.$GzipWrapper2.forEach(function(a){e.set(a,f),f+=a.length});c.$GzipWrapper1=e};return c}var e=a.prototype;e.push=function(a,e){if(this.$GzipWrapper1!=null)throw c("WAErr")("Tried to push chunk to compressor after final block");a instanceof Uint8Array?b.prototype.push.call(this,a,e):a instanceof ArrayBuffer?b.prototype.push.call(this,new Uint8Array(a),e):b.prototype.push.call(this,d("fflate").strToU8(a),e)};e.result=function(){if(this.$GzipWrapper1==null)throw c("WAErr")("Tried to access result before adding final block");return this.$GzipWrapper1};return a}(d("fflate").Gzip);function a(a){a===void 0&&(a={});return new i(a)}function j(a){return d("fflate").decompressSync(a)}function e(a){return(h||(h=b("Promise"))).resolve(j(a))}g.GzipWrapper=i;g.createDeflate=a;g.inflate=j;g.gzipInflate=e}),98);
__d("WAHash",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=new WeakMap(),i=0;function a(a){if(a===null)return"null";switch(typeof a){case"undefined":return"undefined";case"number":return"n:"+a;case"string":return"s:"+a;case"boolean":return"b:"+a.toString();case"object":var b=h.get(a);b==null&&(b=i++,h.set(a,b));return"o:"+b;default:throw c("WAErr")("Unsupported type")}}g["default"]=a}),98);
__d("WAHashStringToNumber",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return Math.abs(b)}f.hashStringToNumber=a}),66);
__d("WAInflatePhoneRegex",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;typeof a==="number"?b=String(a).split("").map(function(a){return".".repeat(Number(a))}).join(")("):b=a.replace(/;|[a-zA-Z]+/g,function(a){return a===";"?")(":a.split("").map(function(a){a=a.charCodeAt(0);return a>=97?".".repeat(a-96)+"?":".".repeat(a-64)}).join(")(")});return"("+b+")"}f.inflatePhoneRegex=a}),66);
__d("WAIsMediaKeyReusable",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=2*d("WATimeUtils").DAY_SECONDS;function a(a){var b=Math.floor(Math.random()*d("WATimeUtils").DAY_SECONDS);return a!=null&&d("WATimeUtils").happenedWithin(a,h+b)}g.MMS_MEDIA_KEY_TTL=h;g.isMediaKeyReusable=a}),98);
__d("WAIterableOperators",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";function* a(a){for(a of a)yield a}function* b(a,b){var c=0;for(a of a)yield b(a,c),c++}function* d(a,b,d){d===void 0&&(d=1);if(d===0)throw c("WAErr")("Step can't be zero.");if(d>0){if(a>b)return;for(var e=a;e<b;e+=d)yield e}else{if(a<b)return;for(e=a;e>b;e+=d)yield e}}function* e(a,b){var c=0;for(a of a)b(a,c)&&(yield a),c++}function* f(a,b){if(b<0)throw c("WAErr")("Count must be a positive integer");var d=0;for(a of a){if(d>=b)return;yield a;d++}}function h(a){for(a of a)return a;return void 0}g.iteratorFromArray=a;g.mapIterator=b;g.rangeIterator=d;g.filterIterator=e;g.takeIterator=f;g.first=h}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";d=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo","preview","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":return a;default:return null}}function b(a){switch(a){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":case"ReceiverFetch":case"Raven":return null;default:return c("WAAssertUnreachable")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);
__d("WAMediaConnParser",["WADeprecatedWapParser","WAServerMediaType"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("WADeprecatedWapParser"))("mediaConnParser",function(a){a=a.child("media_conn");var b=j(a);return{hosts:b,authToken:a.attrString("auth"),authTokenExpiryTs:a.attrFutureTime("auth_ttl"),routesExpiryTs:a.attrFutureTime("ttl"),maxBuckets:a.attrInt("max_buckets"),maxManualRetry:(b=a.maybeAttrInt("max_manual_retry",0,4))!=null?b:3,maxAutoDownloadRetry:(b=a.maybeAttrInt("max_auto_download_retry",0,4))!=null?b:3}});function h(a){var b;return!a.hasAttr("fallback_hostname")?void 0:{domain:a.attrString("fallback_hostname"),"class":a.maybeAttrString("fallback_class"),ip4:(b=a.maybeAttrString("fallback_ip4"))!=null?b:void 0,ip6:(b=a.maybeAttrString("fallback_ip6"))!=null?b:void 0}}function i(a){var b;return{domain:a.attrString("hostname"),fallback:h(a),uploadable:k(a,"upload"),downloadable:k(a,"download"),isFallback:a.maybeAttrString("type")==="fallback",downloadBuckets:(b=(b=a.maybeChild("download_buckets"))==null?void 0:b.mapChildren(function(a){return parseInt(a.tag(),10)}))!=null?b:[],"class":a.maybeAttrString("class"),ip4:(b=a.maybeAttrString("ip4"))!=null?b:void 0,ip6:(b=a.maybeAttrString("ip6"))!=null?b:void 0}}function j(a){return a.mapChildrenWithTag("host",i)}function k(a,b){if(a.hasChild(b))return a.child(b).mapChildren(function(a){a=a.tag();return d("WAServerMediaType").castToServerMediaType(a)}).filter(Boolean);else return d("WAServerMediaType").SERVER_MEDIA}g.mediaConnParser=a}),98);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(a,b,c,d,e,f){"use strict";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting"]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function a(a){m.DEV(l());if(!n(a)){m.DEV(k());return[]}var b=[],c=2,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j(),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(i());return[]}switch(e){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":f===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&(e="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(f===d("WAProgressiveJpegMarkers").MARKER_PREFIX)e="READ_MARKER_SECOND_BYTE";else if(f===d("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(f===d("WAProgressiveJpegMarkers").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(h());return[]}else o(f)?(s=!0,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(t&&u(),f===d("WAProgressiveJpegMarkers").MARKERS.SOS&&(t=!0),q(f)?e="READ_SIZE_FIRST_BYTE":e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA");break;case"READ_SIZE_FIRST_BYTE":e="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":c+=g*256;c+=f;c-=2;e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)return!1;return a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOF2&&a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOI?!1:!0}function o(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF2||a===d("WAProgressiveJpegMarkers").MARKERS.SOF6||a===d("WAProgressiveJpegMarkers").MARKERS.SOF10||a===d("WAProgressiveJpegMarkers").MARKERS.SOF14}function p(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF0||a===d("WAProgressiveJpegMarkers").MARKERS.SOF1||a===d("WAProgressiveJpegMarkers").MARKERS.SOF3||a===d("WAProgressiveJpegMarkers").MARKERS.SOF5||a===d("WAProgressiveJpegMarkers").MARKERS.SOF7||a===d("WAProgressiveJpegMarkers").MARKERS.JPG||a===d("WAProgressiveJpegMarkers").MARKERS.SOF9||a===d("WAProgressiveJpegMarkers").MARKERS.SOF11||a===d("WAProgressiveJpegMarkers").MARKERS.SOF13||a===d("WAProgressiveJpegMarkers").MARKERS.SOF15}function q(a){if(a===d("WAProgressiveJpegMarkers").MARKERS.TEM)return!1;return a>=d("WAProgressiveJpegMarkers").MARKERS.RST0&&a<=d("WAProgressiveJpegMarkers").MARKERS.RST7?!1:a!==d("WAProgressiveJpegMarkers").MARKERS.EOI&&a!==d("WAProgressiveJpegMarkers").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a[d];b.push(e-c);c=e}return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);
__d("WAMediaUtils",["Promise","WACryptoDependencies","WAErr","WAGlobals","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a.buffer}function j(a){return a}function a(){return i()}function k(a){return a}function l(a){return a}function e(a){return a}function f(a){return a}function m(a){return a}function n(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,k=a.serverMediaType,m=a.downloadableThumbnail,n=a.filename,o=a.progressiveJpegDetails;a=a.size;return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f,mediaKeyTimestamp:g==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(g)),sidecar:h&&l(h),objectId:i,fbid:j,downloadableThumbnail:m&&u(m),serverMediaType:k,filename:n,progressiveJpegDetails:o&&v(o),size:a==null?void 0:d("WALongInt").numberOrThrowIfTooLarge(a)}}function o(a){var b=a.fileSha256,c=a.fileEncSha256,e=a.mediaKey,f=a.directPath,g=a.mediaKeyTimestamp,h=a.serverMediaType,i=a.objectId,j=a.fbid,k=a.downloadableThumbnail,l=a.filename,m=a.progressiveJpegDetails;a=a.size;b=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:b,fileEncSha256:c,mediaKey:e,directPath:f,mediaKeyTimestamp:g,serverMediaType:h,objectId:i,fbid:j,downloadableThumbnail:k,filename:l,progressiveJpegDetails:m,size:a});return b.readByteArray()}function p(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function q(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{directPath:b})).readByteArray()}function r(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{downloadableThumbnail:babelHelpers["extends"]({},a.downloadableThumbnail,{directPath:b})})).readByteArray()}function s(a,b){a=babelHelpers["extends"]({},a,{fbid:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function t(a,b){a=babelHelpers["extends"]({},a,{objectId:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function u(a){if(a==null)return null;a.$$unknownFieldCount;var b=a.directPath,c=a.objectId,e=babelHelpers.objectWithoutPropertiesLoose(a,["$$unknownFieldCount","directPath","objectId"]);return babelHelpers["extends"]({},e,{directPath:b,objectId:c,mediaKey:a.mediaKey&&j(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function v(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})}}function w(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails,i=a.size,l=a.lastDownloadAttemptTimestamp,m=a.sidecar,n=a.directPath,o=a.objectId;a=babelHelpers.objectWithoutPropertiesLoose(a,["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"]);var p=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(p={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})});return babelHelpers["extends"]({},a,{objectId:o,directPath:n,sidecar:m,serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&j(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&k(f),progressiveJpegDetails:p,downloadableThumbnail:g&&u(g),size:d("WALongInt").maybeNumberOrThrowIfTooLarge(i),lastDownloadAttemptTimestamp:l==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(l))})}function x(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("WAErr")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof a))};e.onerror=function(){var a;d((a=e.error)!=null?a:c("WAErr")("blobToArrayBuffer got unknown error"))};e.readAsArrayBuffer(a)})}function y(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;case"preview":b="image/jpeg";break;case"document":b=d("WAGlobals").getConfig().isOctetStreamAttachmentMimeTypeEnabled()===!0?"application/octet-stream":"application/pdf";break;case"xma-image":b="image/jpeg";break;default:throw c("WAErr")("Unsupported server media type: "+a)}return b}var z=function(){return"TransformStream"in self};g.createMediaKey=i;g.castToMediaKey=j;g.createUploadToken=a;g.castToUploadToken=k;g.castToStreamingSidecar=l;g.castToDirectPath=e;g.stringToDeliveryObjectId=f;g.stringToBackupEntFbid=m;g.mediaEntryDataToRawData=n;g.rawDataToMediaEntry=o;g.encodeMediaEntryForUpload=p;g.encodeMediaEntryWithUpdatedPath=q;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=r;g.encodeMediaEntryWithUpdatedFbid=s;g.encodeMediaEntryWithUpdatedObjectId=t;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=u;g.decodeMediaEntryData=w;g.blobToArrayBuffer=x;g.getMimeTypeFromServerMediaType=y;g.isTransformStreamSupported=z}),98);
__d("routeBuilderUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.split("/");return a.filter(function(a){return a!==""}).map(function(a){var b=a.split(/{|}/);if(b.length<3)return{isToken:!1,part:a};else{a=b[0];var c=b[1];b=b[2];var d=c[0]==="?",e=c[d?1:0]==="*";c=c.substring((d?1:0)+(e?1:0));return{isToken:!0,optional:d,catchAll:e,prefix:a,suffix:b,token:c}}})}f.getPathParts=a}),66);
__d("jsRouteBuilder",["ConstUriUtils","FBLogger","routeBuilderUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="#";function a(a,b,e,f,g){g===void 0&&(g=!1);var i=d("routeBuilderUtils").getPathParts(a);function j(j){try{var k=f!=null?babelHelpers["extends"]({},f,j):(j=j)!=null?j:{},l={};j="";var m=!1;j=i.reduce(function(a,c){if(!c.isToken)return a+"/"+c.part;else{var d,e=c.optional,f=c.prefix,g=c.suffix;c=c.token;if(e&&m)return a;d=(d=k[c])!=null?d:b[c];if(d==null&&e){m=!0;return a}if(d==null)throw new Error("Missing required template parameter: "+c);if(d==="")throw new Error("Required template parameter is an empty string: "+c);l[c]=!0;return a+"/"+f+d+g}},"");a.slice(-1)==="/"&&(j+="/");j===""&&(j="/");var n=d("ConstUriUtils").getUri(j);for(var o in k){var p=k[o];!l[o]&&p!=null&&n!=null&&(e!=null&&e.has(o)?p!==!1&&(n=n.addQueryParam(o,null)):n=n.addQueryParam(o,p))}return[n,j]}catch(b){p=b==null?void 0:b.message;o=c("FBLogger")("JSRouteBuilder").blameToPreviousFrame().blameToPreviousFrame();g&&(o=o.blameToPreviousFrame());o.mustfix("Failed building URI for base path: %s message: %s",a,p);return[null,h]}}return{buildUri:function(a){a=(a=j(a)[0])!=null?a:d("ConstUriUtils").getUri(h);if(a==null)throw new Error("Not even the fallback URL parsed validly!");return a},buildUriNullable:function(a){return j(a)[0]},buildURL:function(a){a=j(a);var b=a[0];a=a[1];return(b=b==null?void 0:b.toString())!=null?b:a},buildURLStringDEPRECATED:function(a){a=j(a);var b=a[0];a=a[1];return(b=b==null?void 0:b.toString())!=null?b:a},getPath:function(){return a}}}g["default"]=a}),98);
__d("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker_v1/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("getWorkerInitScriptSPINParams",["SiteData","StaticSiteData","objectEntries"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,b,d,e=(b=c("SiteData"))[(d=c("StaticSiteData")).spin_mhenv_key];d=babelHelpers["extends"]((a={},a[d.hs_key]=b.haste_session,a[d.spin_rev_key]=b[d.spin_rev_key],a[d.spin_branch_key]=b[d.spin_branch_key],a[d.spin_time_key]=b[d.spin_time_key],a),Boolean(e)?(b={},b[c("StaticSiteData").spin_mhenv_key]=e,b):null);return new Map(c("objectEntries")(d))}g["default"]=a}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","getWorkerInitScriptSPINParams","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e,f;for(var g=arguments.length,h=new Array(g>2?g-2:0),i=2;i<g;i++)h[i-2]=arguments[i];var j=(d=b==null?void 0:b.logImportScriptsErrors)!=null?d:!1,k=(e=b==null?void 0:b.name)!=null?e:a.name,l=new window.URL(a.url,window.location.href).href;if(l==null){var m=new Error("Can't start up worker without a resource url.");m.stack;throw m}var n=c("nullthrows")((f=c("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(c("getWorkerInitScriptSPINParams")()))==null?void 0:f.toString()),o=new Worker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(n),{name:k});o.postMessage({bundleUrl:l,initArgs:h,isDev:!1,resource:a,logImportScriptsErrors:j,type:"sr-init"});return o}g.createDedicatedWebWorker=a}),98);
__d("qpl",["QPLHasteSupportDataStorage","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};a={_:function(a,b){var d=h[b];if(d==null){var e=c("QPLHasteSupportDataStorage").get(b);e==null?(c("recoverableViolation")("Failed to find a Haste-supplied config for the QPL event "+("identified by token `"+b+"`."),"staticresources"),d={i:a}):d=babelHelpers["extends"]({i:a},e);h[b]=d}return d}};b=a;g["default"]=b}),98);
__d("WorkerMessagePortLogging",["MainPageUrl","QLogEvent","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.random()<.1,i=20,j=100,k=50;function a(){return d("MainPageUrl").isWorkerLogEnabled()||d("MainPageUrl").mainPageUrl.searchParams.get("worker_log")===1}var l=0;function m(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),l++)}function b(a,b,c){c===void 0&&(c=!1);if(b==null||!h)return;var d=b.sendDelayHighPrecision,e=b.sendTimestamp,f=b.sendDateTime,g=b.receiveTimestamp,l=b.receiveDateTime,n=m();n.startFromTime();var o=n.range("SEND_DELAY");o.start(e);o.stop(g);o=n.range("SEND_DELAY_LOW_PRECISION");o.start(f);o.stop(l);o=Math.abs(e-f);e=Math.abs(g-l);n.annotate({string:{port_name:a},"int":{send_delay:d,send_drift:o,receive_drift:e},bool:{send_delay_above_max:d!=null&&d>i,send_drift_above_max:o>j,receive_drift_above_max:e>j}});if(c){f=n.range("ROUND_TRIP");f.start(b.sendTimestamp);f.stop(b.receiveTimestamp);g=b.receiveTimestamp-b.sendTimestamp;n.annotate({"int":{round_trip:g},bool:{round_trip_above_max:g>k}})}n.stop()}g.isWorkerLogEnabled=a;g.logMessageTiming=b}),98);
__d("WorkerMessagePort",["Deferred","FBLogger","MainPageUrl","Promise","PromiseAnnotate","SimpleHook","VirtualMessageChannel","WorkerMessagePortLogging","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var e=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return e.onMessageHandler(k(a.data))});this.$2.addEventListener("error",function(a){return e.onError.call(a)});this.onPostMessage.add(function(a){m(a,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(j||(j=c("performanceAbsoluteNow")))()})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendDateTime,f=a.sendTimestamp,g=(j||(j=c("performanceAbsoluteNow")))(),h=Date.now();a.receiveTimestamp=g;a.receiveDateTime=h;a.sendDelayHighPrecision=g-f;a.sendDelayLowPrecision=h-b;d("WorkerMessagePortLogging").logMessageTiming(e.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(i||(i=b("Promise")))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function o(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this,e,f)||this;var j=o(babelHelpers.assertThisInitialized(g)),k=new(c("Deferred"))();e=k.getPromise();j.addMessageListener("endpoint_started",function(a){k.resolve(a);var b=n(a);j.postMessage({endpoint:a.endpoint,startSendTimestamp:b==null?void 0:b.sendTimestamp,targetEndpoint:g.name,type:"endpoint_started_received"})});f=j.onMessageOnce("endpoint_started_received",function(){return!0});void (h||(h=d("PromiseAnnotate"))).setDisplayName(e,"endpoint_started");void h.setDisplayName(f,"endpoint_started_received");j.postMessage({endpoint:g.name,type:"endpoint_started"});c("promiseDone")(e,function(a){a=n(a);d("WorkerMessagePortLogging").logMessageTiming(g.name,a)});c("promiseDone")(f,function(a){a=n(a);a!=null&&d("WorkerMessagePortLogging").logMessageTiming(g.name,a,!0)});g.fullyConnected=(i||(i=b("Promise"))).race([e,f]).then(function(){return babelHelpers.assertThisInitialized(g)});return g}return e}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=o;g.WorkerSyncedMessagePort=e}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},l=1e4,m=0,n=5,o=n+1,p=function(){function a(a){var b=self.WeakRef;b&&(this.$1=new b(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),q=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={"function":{serialize:function(a,b){b=o++;i.$WorkerFuncChannel1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new p(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1["delete"](a)})};var k=i.__remoteInternalFunc(m,a);typeof jest===typeof void 0&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2["delete"](c))});a.length>0?k(a):i.$WorkerFuncChannel2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel2.size)},l);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>n||this.$WorkerFuncChannel1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(i||(i=b("Promise")))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),j=e.__onPostOutMessage(d);j!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||x.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});x.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function s(a,b,d,e){x.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new r(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),x.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return s(c,function(){return new q(function(b){return a},c,null,d)},a,b)}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function u(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new r(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){x.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new t(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),x.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function v(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new q(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return u(v(a,c,d,e),b)}var w=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return(i||(i=b("Promise"))).resolve()};return a}(),x=new w();function f(a,b,c){x.activate(a,b,c)}g.TransferableTransformer=k;g.WorkerFuncChannel=q;g.exportChannelOnPort=s;g.exportChannel=a;g.importChannelOnPort=u;g.makeChannel=v;g.importChannel=e;g.activateChannels=f}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=(h||(h=c("performanceAbsoluteNow")))());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:(h||(h=c("performanceAbsoluteNow")))()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=(h||(h=c("performanceAbsoluteNow")))());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){i.setMessagePort(a)}function b(a){i.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("WAMediaWasmWorkerClient",["Promise","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""]);q=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["initiated."]);a=function(){return b};return b}var r=1e4,s=d("WATagsLogger").TAGS(["WAMediaWasmWorkerClient"]);c=d("WorkerBundleResource").createDedicatedWebWorker(c("WAMediaWasmWorkerResource"));var t=new(d("WorkerMessagePort").WorkerSyncedMessagePort)(c,"WAMediaWasmWorker");d("WorkerClient").init(t);s.DEV(a());t.addMessageListener("log",function(a){var b=a.logType;a=a.message;switch(b){case"dev":s.DEV(q(),a);break;case"error":s.ERROR(p(),a);break;default:b}});function e(a){var b=a.input;a=a.eventFlow;return z({operation:"webpCheck",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function f(a){var b=a.input;a=a.eventFlow;return z({operation:"mp4CheckAndRepair",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function u(a){var b=a.imageData,c=a.quality,e=a.useHdScanConfig;a=a.eventFlow;return z({operation:"progressiveJpegEncode",input:d("WAByteArray").uint8ArrayToBuffer(b.data),height:b.height,width:b.width,quality:c,useHdScanConfig:e},a)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,c=a.quality,d=a.useHdScanConfig;a=a.eventFlow;var e=(yield b.arrayBuffer());return z({operation:"progressiveJpegEncodeWithFile",input:e,fileName:b.name,fileType:b.type,quality:c,useHdScanConfig:d},a)});return w.apply(this,arguments)}function x(a){t.postMessage({type:"prewarm",operation:a})}var y=function(){var a=0;return function(){return++a}}();function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=y();s.LOG(n(),c);b==null?void 0:b.addPoint("get-connected-worker-port");var e=(yield B());if(!e.success){b==null?void 0:b.addPoint("get-connected-worker-port-falied",{string:{workerPortFailure:e.error}});return e}b==null?void 0:b.addPoint("get-connected-worker-port-succeeded");e=e.value;var f=e.onMessageOnce("mediaOperationResponse",function(a){return a.requestId===c}),g=a.input?[a.input]:void 0;e.postMessage(babelHelpers["extends"]({},a,{requestId:c,type:"mediaOperationRequest"}),g);b==null?void 0:b.addPoint("sent-request-to-media-worker");e=(yield f);b==null?void 0:b.addPoint("received-response-from-media-worker");s.LOG(m(),c,e.output.success);if(e.output.success)return d("WAResultOrError").makeResult(e.output.value);s.ERROR(l(),c,e.output.error.errorMessage);return d("WAResultOrError").makeError(e.output.error.errorType)});return A.apply(this,arguments)}function B(){return d("WAPromiseTimeout").promiseTimeout(t.fullyConnected,r).then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError)return d("WAResultOrError").makeError("worker-connection-timeout");s.ERROR(o(),a);return d("WAResultOrError").makeError("worker-connection-runtime-error")})}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.file,e=a.maxDimension,f=a.thumbnailBlobByteSizeLimitBytes;a=a.thumbnailQualityPercentageWhenAboveByteSizeLimit;var g=y();s.LOG(k(),g);var l=(yield B());if(!l.success)return l;l=l.value;var m=l.onMessageOnce("mediaGenerateImageThumbnailResponse",function(a){return a.requestId===g}),n=(yield c.arrayBuffer()),o=n?[n]:void 0;l.postMessage({input:n,fileName:c.name,fileType:c.type,maxDimension:e,requestId:g,thumbnailBlobByteSizeLimitBytes:f,thumbnailQualityPercentageWhenAboveByteSizeLimit:a,type:"mediaGenerateImageThumbnailRequest"},o);l=(yield m);s.LOG(j(),g,l.output.success);if(l.output.success)return d("WAResultOrError").makeResult(l.output.value);s.ERROR(i(),g,l.output.error.errorMessage);return(h||(h=b("Promise"))).reject(l.output.error.errorMessage)});return D.apply(this,arguments)}g.webpCheckInWorker=e;g.mp4CheckAndRepairInWorker=f;g.progressiveJpegEncodeInWorker=u;g.progressiveJpegEncodeInWorkerWithFile=v;g.prewarmMediaWasmWorker=x;g.generateImageThumbnailInWorker=C}),98);
__d("WAMemoizeConditionally",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){var c=function c(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=b?b.apply(this,e):e[0];if(g==null)return a.apply(this,e);var h=c.cache;if(h.has(g))return h.get(g);var i=a.apply(this,e);c.cache=h.set(g,i)||h;return i};c.cache=new(g.Cache||Map)();return c}g.Cache=Map;f["default"]=g}),66);
__d("shallowEqual",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;function h(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function a(a,b){if(h(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!g.call(b,c[d])||!h(a[c[d]],b[c[d]]))return!1;return!0}f["default"]=a}),66);
__d("WAMemoizeOne",["shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=c("shallowEqual"));var d=null,e=function(c){d==null||!b(d.params,c)?d={params:c,result:a.call(this,c)}:d.params=c;return d.result};e.clear=function(){d=null};return e}g["default"]=a}),98);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(a,b,c,d,e,f,g){var h=function(){function a(a){this.$1=d("WorkerBundleResource").createDedicatedWebWorker(c("WAWebOpusRecorderWorkerResource"));this.$1.onmessage=(a=a)!=null?a:null}var b=a.prototype;b.getWorker=function(){return this.$1};b.postMessage=function(a,b){a={type:"message",message:a};this.$1.postMessage(a,b)};b.addEventListener=function(a,b){this.$1.addEventListener(a,b)};b.removeEventListener=function(a,b){this.$1.addEventListener(a,b)};return a}();function a(){return new h()}function b(a){return new h(a)}g.WAOpusRecorderWorkerClient=h;g.getOpusEncoderWorker=a;g.getOpusDecoderWorker=b}),98);
__d("WAPhoneUtils",["WACountries","WAInflatePhoneRegex","WAJids","WAPhoneFindCC"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=function(){function a(a){var b;if(Array.isArray(a)){b=a[0];var c=a[1];c!=null&&c!==-1&&(Array.isArray(c)||(c=[c]),this.$3=c.map(function(a){return new RegExp("^("+a+")")}));this.$2=a[2]}else b=a;this.$1=new RegExp("^"+d("WAInflatePhoneRegex").inflatePhoneRegex(b)+"$")}var b=a.prototype;b.testAndFormat=function(a){if(!this.$1.test(a)||!this.$4(a))return;if(typeof this.$2==="string")return a.replace(this.$1,this.$2);a=this.$1.exec(a);if(a==null)return;return a.slice(1).join(this.$2!=null?"-":" ")};b.$4=function(a){return!this.$3||this.$3.some(function(b){return b.test(a)})};return a}(),j={};function k(a){if(j[a]!=null)return j[a];var b=c("WACountries")[a]!=null?JSON.parse("["+c("WACountries")[a]+"]"):null;if(b==null)return null;var d=b.pop();return j[a]={lengths:d,formats:b.map(function(a){return new i(a)})}}function l(a){var b=a.length>0&&a[0]==="+";b=b?a.substring(1):a;a=d("WAPhoneFindCC").findCC(b);if(!a)return b;b=b.substring(a.length);var c=k(a);if(!c)return"+"+a+" "+b;c=c.formats;for(var e=0;e<c.length;e++){var f=c[e].testAndFormat(b);if(f!=null&&f!=="")return"+"+a+" "+f}return"+"+a+" "+b}function m(a){var b=h.get(a);b==null&&(b=l(a),h.set(a,b));return b}var n=/^\+*[\d ()]+$/;function a(a){return n.test(a)}function b(a,b){if(!/^\d+$/.test(b))return!1;a=k(a);return!a?!1:typeof a.lengths==="number"?a.lengths===b.length:a.lengths.includes(b.length)}function e(a){return m(d("WAJids").phoneNumberFromJid(a))}g.compileCountryRegexes=k;g.formatPhone=m;g.isPotentiallyPhoneNumber=a;g.isPotentiallyValid=b;g.formattedPhoneNumber=e}),98);
__d("WAPriorityQueue",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$2=a,this.$1=[],this.$3(b)}var b=a.prototype;b.size=function(){return this.$1.length};b.$3=function(a){var b=this;(a==null?void 0:a.length)&&a.forEach(function(a){b.push(a)})};b.$4=function(a,b){var c=this.$1[b];this.$1[b]=this.$1[a];this.$1[a]=c};b.$5=function(a){a===void 0&&(a=0);if(a===0)return;var b=this.$6(a),c=b*2+1,d=b*2+2,e=this.$1.length;if(a>=e)return;a=this.$7(b);var f=b;if(c<e){var g=this.$7(c);a>g&&(f=c,a=g)}if(d<e){c=this.$7(d);a>c&&(f=d)}f!==b&&(this.$4(f,b),this.$5(b))};b.$8=function(a){a===void 0&&(a=0);var b=a*2+1,c=a*2+2,d=this.$1.length;if(a>=d)return;var e=this.$7(a),f=a;if(b<d){var g=this.$7(b);e>g&&(f=b,e=g)}if(c<d){g=this.$7(c);e>g&&(f=c)}f!==a&&this.$4(f,a);b<d&&this.$8(b);c<d&&this.$8(c)};b.$7=function(a){return this.$2(this.$1[a])};b.$6=function(a){if(a%2===0)return(a-2)/2;else return(a-1)/2};b.push=function(a){this.$1.push(a);a=this.$1.length-1;this.$5(a)};b.pull=function(){var a=this.$1.shift();this.heapify();return a};b.heapify=function(){this.$8(0)};b.peek=function(){return this.$1[0]};return a}();f["default"]=a}),66);
__d("WAPromiseCache",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){this.promise=a,this.lastUsedTime=this.createdTime=+Date.now()};a=function(){function a(a,b){var c=b.maxCached;c=c===void 0?10:c;var d=b.maxAge;d=d===void 0?Infinity:d;b=b.shouldCache;this.$1={};this.$2=c;this.$3=d;this.$4=a;this.$5=b}var b=a.prototype;b.getOrRun=function(a){var b=this,c=this.$1;if(this.$3!==Infinity){var d=Date.now()-this.$3,e=Object.keys(c);for(var f=0;f<e.length;f++){var h=e[f];c[h].createdTime<d&&delete c[h]}}var i=c[a];if(i){i.lastUsedTime=+Date.now();return i.promise}var j=Object.keys(c);if(j.length>=this.$2){var k,l;for(var m=0;m<j.length;m++){var n=j[m],o=c[n];(l==null||o.lastUsedTime<l)&&(l=o.lastUsedTime,k=n)}k!=null&&delete c[k]}for(var p=arguments.length,q=new Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];var s=this.$4.apply(void 0,[a].concat(q));c[a]=new g(s);s.then(function(c){var d=b.$5;d&&b.$1[a]===s&&!d(c)&&delete b.$1[a]})["catch"](function(){b.$1[a]===s&&delete b.$1[a]});return s};b.isCached=function(a){var b=this.$1;b=b[a];if(b){a=!0;if(this.$3!==Infinity){var c=Date.now()-this.$3;a=b.createdTime>=c}return a&&Boolean(b)}return!1};return a}();f["default"]=a}),66);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b("Promise"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b("Promise"))).reject(a)}}f.promiseCallSync=a}),66);
__d("WAPttComposerScaleWaveform",["invariant"],(function(a,b,c,d,e,f,g,h){function a(a,b){if(b===a.length)return a;if(b===0)return[];if(a.length===0)return new Array(b).fill(0);return b>a.length?i(a,b):j(a,b)}function i(a,b){b>a.length||h(0,75746,b,a.length);var c;if(a.length===1)c=0;else{var d=(b-a.length)/(a.length-1);c=1/(1+d)}d=[];b>=1&&d.push(a[0]);for(var e=1;e<b-1;e++){var f=e*c,g=Math.floor(f),i=f-g;d.push(k(a[g],a[Math.ceil(f)],i))}b>=2&&d.push(a[a.length-1]);return d}function j(a,b){b<a.length||h(0,75747,b,a.length);var c=[];b=b/a.length;var d=0,e=0,f=0;for(var a=a,g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;d+=j;f+=1;e+=b;e>=1&&(c.push(d/f),f=0,d=0,e-=1)}f>0&&c.push(d/f);return c}function k(a,b,c){return a+(b-a)*c}g["default"]=a}),98);
__d("WAQplUploader",["WALogger","WAPromiseDelays","WAPromiseRetryLoop","WAQplTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader uploadChunk, retriable error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",", count ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, error during upload session, error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader upload session failed, error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, done upload."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, uploading "," rows"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, upload triggered, attempt ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sleeping prior to start for "," ms"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, start"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sleeping between uploads for "," ms"]);q=function(){return a};return a}var r={minTimeout:1e3,maxTimeout:1e4,retries:5,type:"exponential"},s=100,t={MAX_COUNT:4,MIN_DELAY:1*1e3*60,MAX_DELAY:15*1e3*60},u=5*60,v=24*60*60,w,x,y;function a(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){w=b.healthLogger;x=b.storageApi;if(y)return;d("WALogger").DEV(p());y={sendEvents:a.sendEvents,isQplEnabled:a.isQplEnabled,startDelayInMs:1e3*((b=a.startDelayInSeconds)!=null?b:u),intervalInMs:1e3*((b=a.intervalInSeconds)!=null?b:v),minRetryDelayInMs:1e3*((b=a.minRetryDelayInSeconds)!=null?b:t.MIN_DELAY),maxRetryDelayInMs:1e3*((b=a.maxRetryDelayInSeconds)!=null?b:t.MAX_DELAY),maxRetryAttemptsCount:(b=a.maxRetryAttemptsCount)!=null?b:t.MAX_COUNT};d("WALogger").DEV(o(),y.startDelayInMs);yield d("WAPromiseDelays").delayMs(y.startDelayInMs);yield D();A()});return z.apply(this,arguments)}function c(){return D()}function A(){d("WALogger").DEV(q(),y.intervalInMs),setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield D(),A()}),y.intervalInMs)}function B(){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=y.minRetryDelayInMs+Math.floor(Math.random()*(y.maxRetryDelayInMs-y.minRetryDelayInMs));yield d("WAPromiseDelays").delayMs(a)});return C.apply(this,arguments)}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a===void 0&&(a=0);if(!((b=y)==null?void 0:b.isQplEnabled()))return;d("WALogger").DEV(n(),a);try{b=(yield x.getRowCount());d("WALogger").DEV(m(),b);var c=0;while(c<b){var e=(yield x.getFromBottom(s));yield F(e);var f=e[0].id||0,g=e[e.length-1].id||0;yield x.deleteRange(f,g);c+=e.length}d("WALogger").DEV(l())}catch(b){d("WALogger").DEV(k(),b);if(a<y.maxRetryAttemptsCount)yield B(),D(a+1);else{d("WALogger").ERROR(j(),b).verbose().devConsole(b).sendLogs("QPL Uploader upload session failed");(f=w)==null?void 0:f.errorUploadingChunk(b)}}});return E.apply(this,arguments)}function F(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"QplUploadChunk",timer:{algo:{type:r.type,first:r.minTimeout},max:r.maxTimeout},code:function(b){var c=a[0].id,e=a[a.length-1].id;d("WALogger").DEV(i(),c,e,a.length);return y.sendEvents(a).then(function(){b()})["catch"](function(a){if(a instanceof d("WAQplTypes").QplServerStatusCodeError)switch(a.statusCode){case 500:d("WALogger").WARN(h(),a.message);break;default:b();break}throw a})}});b.start();yield b.promise()});return G.apply(this,arguments)}g.start=a;g.forceQplUpload=c}),98);
__d("WASmaxMixinGroupExhaustiveError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="SmaxMixinGroupExhaustiveError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxMixinGroupExhaustiveError=a}),66);
__d("WASmaxOutChatstateComposingMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasComposingMediaAudio;a=d("WASmaxJsx").smax("chatstate",null,d("WASmaxJsx").smax("composing",{media:d("WASmaxAttrs").OPTIONAL_LITERAL("audio",a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeComposingMixin=a}),98);
__d("WASmaxOutChatstatePausedMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("chatstate",null,d("WASmaxJsx").smax("paused",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePausedMixin=a}),98);
__d("WASmaxOutChatstateComposingOrPausedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutChatstateComposingMixin","WASmaxOutChatstatePausedMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.composing)return d("WASmaxOutChatstateComposingMixin").mergeComposingMixin(a,b.composing);if(b.isPaused)return d("WASmaxOutChatstatePausedMixin").mergePausedMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeComposingOrPausedMixinGroup=a}),98);
__d("WASmaxOutChatstateInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.testConfig;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("test",{config:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInternalTestMixin=a}),98);
__d("WASmaxOutChatstateClientNotificationRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutChatstateComposingOrPausedMixinGroup","WASmaxOutChatstateInternalTestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.chatstateTo,c=a.internalTestMixinArgs;a=a.composingOrPausedMixinGroupArgs;b=d("WASmaxOutChatstateComposingOrPausedMixinGroup").mergeComposingOrPausedMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutChatstateInternalTestMixin").mergeInternalTestMixin,d("WASmaxJsx").smax("chatstate",{to:d("WAWap").JID(b)}),c),a);return b}g.makeClientNotificationRequest=a}),98);
__d("WASmaxChatstateClientNotificationRPC",["WAComms","WASmaxOutChatstateClientNotificationRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutChatstateClientNotificationRequest").makeClientNotificationRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendClientNotificationRPC=a}),98);
__d("WASendChatStateProtocol",["WALogger","WASmaxChatstateClientNotificationRPC"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendChatStateProtocol Sending "," to ",""]);h=function(){return a};return a}function a(a,b){d("WALogger").LOG(h(),b,a);var c;b==="idle"?c={isPaused:!0}:(b,c={composing:{hasComposingMediaAudio:b==="recording_audio"}});return d("WASmaxChatstateClientNotificationRPC").sendClientNotificationRPC({chatstateTo:a,composingOrPausedMixinGroupArgs:c})}g.sendChatStateProtocol=a}),98);
__d("WASmaxOutPresenceAvailabilityRequest",["WASmaxAttrs","WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.presenceType;a=a.presenceName;b=d("WASmaxJsx").smax("presence",{type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return b}g.makeAvailabilityRequest=a}),98);
__d("WASmaxPresenceAvailabilityRPC",["WAComms","WASmaxOutPresenceAvailabilityRequest","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=d("WASmaxOutPresenceAvailabilityRequest").makeAvailabilityRequest(a);e.next=3;return b("regeneratorRuntime").awrap(d("WAComms").castSmaxStanza(c));case 3:case"end":return e.stop()}},null,this)}g.sendAvailabilityRPC=a}),98);
__d("WASendPresenceStatusProtocol",["WASmaxPresenceAvailabilityRPC"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.status;a=a.name;return d("WASmaxPresenceAvailabilityRPC").sendAvailabilityRPC({presenceType:b,presenceName:a})}g.sendPresenceStatusProtocol=a}),98);
__d("WASmaxInGroupsIQErrorNotAllowedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-allowed");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",405);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAllowedMixin=a}),98);
__d("WASmaxInGroupsIQErrorParentLinkedGroupsParticipantsResourceLimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","linked-groups-participants-resource-limit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",412);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorParentLinkedGroupsParticipantsResourceLimitMixin=a}),98);
__d("WASmaxInGroupsIQErrorResourceConstraintMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","resource-constraint");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorResourceConstraintMixin=a}),98);
__d("WASmaxInGroupsIQErrorResourceLimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","resource-limit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",419);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorResourceLimitMixin=a}),98);
__d("WASmaxInGroupsParentGroupMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrGroupJid(a,"parent_group_jid");return!a.success?a:d("WAResultOrError").makeResult({parentGroupJid:a.value})}g.parseParentGroupMixin=a}),98);
__d("WASmaxInMessagePublishAckAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","3");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckAdminEditMixin=a}),98);
__d("WASmaxInMessagePublishAckAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","8");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckAdminRevokeMixin=a}),98);
__d("WASmaxInMessagePublishAckMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","1");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckMessageEditMixin=a}),98);
__d("WASmaxInMessagePublishAckMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","2");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckMessagePinMixin=a}),98);
__d("WASmaxInMessagePublishEnums",[],(function(a,b,c,d,e,f){a={CBP:"CBP",NBP:"NBP"};b={delivery:"delivery",no_optimization:"no_optimization"};c={"false":"false","true":"true"};d={lid:"lid",pn:"pn"};f.ENUM_CBP_NBP=a;f.ENUM_DELIVERY_NOOPTIMIZATION=b;f.ENUM_FALSE_TRUE=c;f.ENUM_LID_PN=d}),66);
__d("WASmaxInMessagePublishAckPaidConversationMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"delivery_context");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"optimization_goal",d("WASmaxInMessagePublishEnums").ENUM_DELIVERY_NOOPTIMIZATION);return!b.success?b:d("WAResultOrError").makeResult({optimizationGoal:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"source_url");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"referral");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"source_url",i);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"source_type");return!a.success?a:d("WAResultOrError").makeResult({sourceType:a.value,sourceUrl:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"origin");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"referral",j);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"type");return!a.success?a:d("WAResultOrError").makeResult({type:a.value,referral:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(b.value,"delivery_context",h);if(!a.success)return a;var c=d("WASmaxParseUtils").optionalChildWithTag(b.value,"origin",k);if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(b.value,"paid_convo_id");if(!e.success)return e;var f=d("WASmaxParseUtils").attrStringEnum(b.value,"pricing_model",d("WASmaxInMessagePublishEnums").ENUM_CBP_NBP);if(!f.success)return f;var g=d("WASmaxParseUtils").attrStringEnum(b.value,"billable",d("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);if(!g.success)return g;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"expiration_timestamp",0,void 0);if(!i.success)return i;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"pricing_category");return!b.success?b:d("WAResultOrError").makeResult({bizPaidConvoId:e.value,bizPricingModel:f.value,bizBillable:g.value,bizExpirationTimestamp:i.value,bizPricingCategory:b.value,bizDeliveryContext:a.value,bizOrigin:c.value})}g.parseAckPaidConversationBizDeliveryContext=h;g.parseAckPaidConversationBizOriginReferralSourceUrl=i;g.parseAckPaidConversationBizOriginReferral=j;g.parseAckPaidConversationBizOrigin=k;g.parseAckPaidConversationMixin=a}),98);
__d("WASmaxInMessagePublishAckRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","7");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckRevokeMixin=a}),98);
__d("WASmaxInMessagePublishServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"franking");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"reporting_tag");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,16,128);return!a.success?a:d("WAResultOrError").makeResult({frankingReportingTagElementValue:a.value})}g.parseServerFrankingTagMixin=a}),98);
__d("WASmaxInMessagePublishAckMixin",["WAResultOrError","WASmaxInMessagePublishAckAdminEditMixin","WASmaxInMessagePublishAckAdminRevokeMixin","WASmaxInMessagePublishAckMessageEditMixin","WASmaxInMessagePublishAckMessagePinMixin","WASmaxInMessagePublishAckPaidConversationMixin","WASmaxInMessagePublishAckRevokeMixin","WASmaxInMessagePublishServerFrankingTagMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"class","message");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var e=d("WASmaxInMessagePublishAckMessageEditMixin").parseAckMessageEditMixin(a),f=d("WASmaxInMessagePublishAckAdminEditMixin").parseAckAdminEditMixin(a),g=d("WASmaxInMessagePublishAckMessagePinMixin").parseAckMessagePinMixin(a),h=d("WASmaxInMessagePublishAckAdminRevokeMixin").parseAckAdminRevokeMixin(a),i=d("WASmaxInMessagePublishAckRevokeMixin").parseAckRevokeMixin(a),j=d("WASmaxInMessagePublishAckPaidConversationMixin").parseAckPaidConversationMixin(a);a=d("WASmaxInMessagePublishServerFrankingTagMixin").parseServerFrankingTagMixin(a);return d("WAResultOrError").makeResult({"class":c.value,t:b.value,ackMessageEditMixin:e.success?e.value:null,ackAdminEditMixin:f.success?f.value:null,ackMessagePinMixin:g.success?g.value:null,ackAdminRevokeMixin:h.success?h.value:null,ackRevokeMixin:i.success?i.value:null,ackPaidConversationMixin:j.success?j.value:null,serverFrankingTagMixin:a.success?a.value:null})}g.parseAckMixin=a}),98);
__d("WASmaxInMessagePublishApplicationNegativeAckMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"application_error",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({applicationError:b.value})}g.parseApplicationNegativeAckMixin=a}),98);
__d("WASmaxInMessagePublishMessageNackRetryAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"backoff",0,86400);return!b.success?b:d("WAResultOrError").makeResult({backoff:b.value})}g.parseMessageNackRetryAttributesMixin=a}),98);
__d("WASmaxInMessagePublishNegativeAckMixin",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishApplicationNegativeAckMixin","WASmaxInMessagePublishMessageNackRetryAttributesMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").attrString(a,"error");if(!c.success)return c;b=d("WASmaxInMessagePublishAckMixin").parseAckMixin(a,b);if(!b.success)return b;var e=d("WASmaxInMessagePublishApplicationNegativeAckMixin").parseApplicationNegativeAckMixin(a);a=d("WASmaxInMessagePublishMessageNackRetryAttributesMixin").parseMessageNackRetryAttributesMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({error:c.value},b.value,{applicationNegativeAckMixin:e.success?e.value:null,messageNackRetryAttributesMixin:a.success?a.value:null}))}g.parseNegativeAckMixin=a}),98);
__d("WASmaxInPreKeysDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"device-identity");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytes(a.value);return!a.success?a:d("WAResultOrError").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);
__d("WASmaxInPreKeysEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateDeviceJid,a.validateDeviceJid],typeName:"DeviceJid|DeviceJid"};c={validators:[a.validateDeviceJid,a.validateDeviceJid,a.validateInteropDeviceJid,a.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"};e={validators:[a.validateDeviceJid,a.validateDomainJid],typeName:"DeviceJid|DomainJid"};f={validators:[a.validateUserJid,a.validateUserJid],typeName:"UserJid|UserJid"};g.DEVICEJID_DEVICEJID=b;g.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=c;g.DEVICEJID_DOMAINJID=e;g.USERJID_USERJID=f}),98);
__d("WASmaxInPreKeysIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInPreKeysIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInPreKeysIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",400,499);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);
__d("WASmaxInPreKeysIQErrorNoValidJIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNoValidJIDMixin=a}),98);
__d("WASmaxInPreKeysRequestErrorsFetch",["WAResultOrError","WASmaxInPreKeysIQErrorBadRequestMixin","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNoValidJIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInPreKeysIQErrorNoValidJIDMixin").parseIQErrorNoValidJIDMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorNoValidJID",value:c.value});var e=d("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[b,c,e])}g.parseRequestErrorsFetch=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrorsFetch:b.value}))}g.parseFetchKeyBundlesResponseRequestError=a}),98);
__d("WASmaxInPreKeysIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",500,599);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);
__d("WASmaxInPreKeysIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInPreKeysServerErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackServerMixin","WASmaxInPreKeysIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:b.value});var c=d("WASmaxInPreKeysIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[b,c])}g.parseServerErrors=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseFetchKeyBundlesResponseServerError=a}),98);
__d("WASmaxInPreKeysIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInPreKeysResponsePaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"padding");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(b.value,0,524288);return!a.success?a:d("WAResultOrError").makeResult({paddingElementValue:a.value})}g.parseResponsePaddingMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"code",500,599);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorFallbackMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,b.value,"code",500);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorMixin=a}),98);
__d("WASmaxInPreKeysKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!a.success?a:d("WAResultOrError").makeResult({elementValue:a.value})}g.parseKeyDataMixin=a}),98);
__d("WASmaxInPreKeysIdentityKeyMixin",["WASmaxInPreKeysKeyDataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"identity");if(!a.success)return a;a=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:a}g.parseIdentityKeyMixin=a}),98);
__d("WASmaxInPreKeysKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"type");if(!a.success)return a;a=d("WASmaxParseUtils").contentLiteralBytes(a.value,new Uint8Array([5]));return!a.success?a:d("WAResultOrError").makeResult({typeElementValue:a.value})}g.parseKeyTypeMixin=a}),98);
__d("WASmaxInPreKeysKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"id");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,3,3);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseKeyIDMixin=a}),98);
__d("WASmaxInPreKeysPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"key");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!a.success)return a;b=d("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;a=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:d("WAResultOrError").makeResult({keyIdKeyIDMixin:b.value,keyValueKeyDataMixin:a.value})}g.parsePreKeyMixin=a}),98);
__d("WASmaxInPreKeysRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"registration");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,4,4);return!a.success?a:d("WAResultOrError").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);
__d("WASmaxInPreKeysSignedPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"skey");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!c.success)return c;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"signature");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!a.success)return a;b=d("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;c=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(c.value);return!c.success?c:d("WAResultOrError").makeResult({skeySignatureElementValue:a.value,skeyIdKeyIDMixin:b.value,skeyValueKeyDataMixin:c.value})}g.parseSignedPreKeyMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_cloud_api","true");if(!c.success)return c;var e=d("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(a);if(!e.success)return e;var f=d("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(a),g=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(a);if(!g.success)return g;var h=d("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(a),i=d("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(a);if(!i.success)return i;a=d("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({t:b.value,isCloudApi:c.value},e.value,{keyTypeMixin:f.success?f.value:null},g.value,{preKeyMixin:h.success?h.value:null},i.value,{deviceIdentityMixin:a.success?a.value:null}))}g.parseFetchKeyBundlesUserSuccessMixin=a}),98);
__d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin","WASmaxInPreKeysFetchKeyBundlesUserErrorMixin","WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin").parseFetchKeyBundlesUserSuccessMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserSuccess",value:b.value});var c=d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin").parseFetchKeyBundlesUserErrorMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserError",value:c.value});var e=d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin").parseFetchKeyBundlesUserErrorFallbackMixin(a);return e.success?d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserErrorFallback",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UserSuccess","UserError","UserErrorFallback"],[b,c,e])}g.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysResponsePaddingMixin","WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"jid",d("WASmaxInPreKeysEnums").DEVICEJID_DEVICEJID);if(!b.success)return b;a=d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;b=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d("WASmaxInPreKeysResponsePaddingMixin").parseResponsePaddingMixin(a);c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"user",0,1e5,h);return!c.success?c:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{responsePaddingMixin:a.success?a.value:null,listUser:c.value}))}g.parseFetchKeyBundlesResponseSuccessListUser=h;g.parseFetchKeyBundlesResponseSuccess=a}),98);
__d("WASmaxInUserNoticeIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInUserNoticeIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInUserNoticeGetDisclosuresResponseClientError",["WAResultOrError","WASmaxInUserNoticeIQErrorBadRequestMixin","WASmaxInUserNoticeIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInUserNoticeIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(c.value);if(!c.success)return c;a=d("WASmaxInUserNoticeIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorBadRequestMixin:c.value},a.value))}g.parseGetDisclosuresResponseClientError=a}),98);
__d("WASmaxInUserNoticeIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInUserNoticeStageMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notice");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"id",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"stage",0,1e3);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,stage:a.value})}g.parseStageMixin=a}),98);
__d("WASmaxInUserNoticeGetDisclosuresResponseClientSuccess",["WAResultOrError","WASmaxInUserNoticeIQResultResponseMixin","WASmaxInUserNoticeStageMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"notice");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"version",1,void 0);if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(a,"type",0,void 0);if(!e.success)return e;a=d("WASmaxInUserNoticeStageMixin").parseStageMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({t:b.value,version:c.value,type:e.value},a.value))}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInUserNoticeIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!c.success)return c;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"notice",0,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,{notice:b.value}))}g.parseGetDisclosuresResponseClientSuccessNotice=h;g.parseGetDisclosuresResponseClientSuccess=a}),98);
__d("WASmaxInUserNoticeIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInUserNoticeGetDisclosuresResponseServerError",["WAResultOrError","WASmaxInUserNoticeIQErrorInternalServerErrorMixin","WASmaxInUserNoticeIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInUserNoticeIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInUserNoticeIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseGetDisclosuresResponseServerError=a}),98);
__d("WASmaxInUserNoticeSetResponseClientError",["WAResultOrError","WASmaxInUserNoticeIQErrorBadRequestMixin","WASmaxInUserNoticeIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInUserNoticeIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(c.value);if(!c.success)return c;a=d("WASmaxInUserNoticeIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorBadRequestMixin:c.value},a.value))}g.parseSetResponseClientError=a}),98);
__d("WASmaxInUserNoticeSetResponseServerError",["WAResultOrError","WASmaxInUserNoticeIQErrorInternalServerErrorMixin","WASmaxInUserNoticeIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInUserNoticeIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInUserNoticeIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseSetResponseServerError=a}),98);
__d("WASmaxInUserNoticeSetResponseSuccess",["WAResultOrError","WASmaxInUserNoticeIQResultResponseMixin","WASmaxInUserNoticeStageMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"notice");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;a=d("WASmaxInUserNoticeStageMixin").parseStageMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({t:b.value},a.value))}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optionalChildWithTag(a,"notice",h);if(!c.success)return c;a=d("WASmaxInUserNoticeIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{notice:c.value}))}g.parseSetResponseSuccessNotice=h;g.parseSetResponseSuccess=a}),98);
__d("WASmaxOutGroupsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutGroupsBaseSetGroupMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTo;a=d("WASmaxOutGroupsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").GROUP_JID(a),xmlns:"w:g2"}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseSetGroupMixin=a}),98);
__d("WASmaxOutGroupsParentGroupMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyParentGroupJid;a=d("WASmaxJsx").smax("smax$any",{parent_group_jid:d("WAWap").GROUP_JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeParentGroupMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"media"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeMediaMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePollCreationMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"creation"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollCreationMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePollVoteMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"vote"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollVoteMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeReactionMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"reaction"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeReactionMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"text"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeTextMixin=a}),98);
__d("WASmaxOutMessagePublishRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"7"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRevokeMixin=a}),98);
__d("WASmaxOutPreKeysClientRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),xmlns:"encrypt",to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientRequestMixin=a}),98);
__d("WASmaxOutPreKeysFetchKeyBundlesRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.userJid;a=a.hasUserReasonIdentity;b=d("WASmaxJsx").smax("user",{jid:d("WAWap").JID(b),reason:d("WASmaxAttrs").OPTIONAL_LITERAL("identity",a)});return b}function a(a){a=a.userArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"get"},d("WASmaxJsx").smax("key",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,1e5))));return a}g.makeFetchKeyBundlesRequestKeyUser=h;g.makeFetchKeyBundlesRequest=a}),98);
__d("WASmaxOutPreKeysRegistrationIDMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.registrationElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("registration",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRegistrationIDMixin=a}),98);
__d("WASmaxOutUserNoticeBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutUserNoticeBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutUserNoticeGetDisclosuresRequest",["WASmaxJsx","WASmaxOutUserNoticeBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.getUserDisclosuresT;a=d("WASmaxOutUserNoticeBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"tos"},d("WASmaxJsx").smax("get_user_disclosures",{t:d("WAWap").INT(a)})));return a}g.makeGetDisclosuresRequest=a}),98);
__d("WASmaxOutUserNoticeStageMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.noticeId;a=a.noticeStage;b=d("WASmaxJsx").smax("notice",{id:d("WAWap").INT(b),stage:d("WAWap").INT(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeStageMixin=a}),98);
__d("WASmaxOutUserNoticeSetRequest",["WASmaxJsx","WASmaxOutUserNoticeBaseIQSetRequestMixin","WASmaxOutUserNoticeStageMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.stageMixinArgs;a=d("WASmaxOutUserNoticeBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"tos"},d("WASmaxOutUserNoticeStageMixin").mergeStageMixin(d("WASmaxJsx").smax("notice",null),a)));return a}g.makeSetRequest=a}),98);
__d("WASmaxPreKeysFetchKeyBundlesRPC",["WAComms","WASmaxInPreKeysFetchKeyBundlesResponseRequestError","WASmaxInPreKeysFetchKeyBundlesResponseServerError","WASmaxInPreKeysFetchKeyBundlesResponseSuccess","WASmaxOutPreKeysFetchKeyBundlesRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutPreKeysFetchKeyBundlesRequest").makeFetchKeyBundlesRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess").parseFetchKeyBundlesResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"FetchKeyBundlesResponseSuccess",value:g.value});case 7:h=d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError").parseFetchKeyBundlesResponseRequestError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"FetchKeyBundlesResponseRequestError",value:h.value});case 10:i=d("WASmaxInPreKeysFetchKeyBundlesResponseServerError").parseFetchKeyBundlesResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"FetchKeyBundlesResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchKeyBundles",{Success:g,RequestError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendFetchKeyBundlesRPC=a}),98);
__d("WASmaxUserNoticeGetDisclosuresRPC",["WAComms","WASmaxInUserNoticeGetDisclosuresResponseClientError","WASmaxInUserNoticeGetDisclosuresResponseClientSuccess","WASmaxInUserNoticeGetDisclosuresResponseServerError","WASmaxOutUserNoticeGetDisclosuresRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutUserNoticeGetDisclosuresRequest").makeGetDisclosuresRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInUserNoticeGetDisclosuresResponseClientSuccess").parseGetDisclosuresResponseClientSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetDisclosuresResponseClientSuccess",value:g.value});case 7:h=d("WASmaxInUserNoticeGetDisclosuresResponseClientError").parseGetDisclosuresResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetDisclosuresResponseClientError",value:h.value});case 10:i=d("WASmaxInUserNoticeGetDisclosuresResponseServerError").parseGetDisclosuresResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetDisclosuresResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetDisclosures",{ClientSuccess:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetDisclosuresRPC=a}),98);
__d("WASmaxUserNoticeSetRPC",["WAComms","WASmaxInUserNoticeSetResponseClientError","WASmaxInUserNoticeSetResponseServerError","WASmaxInUserNoticeSetResponseSuccess","WASmaxOutUserNoticeSetRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutUserNoticeSetRequest").makeSetRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInUserNoticeSetResponseSuccess").parseSetResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"SetResponseSuccess",value:g.value});case 7:h=d("WASmaxInUserNoticeSetResponseClientError").parseSetResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"SetResponseClientError",value:h.value});case 10:i=d("WASmaxInUserNoticeSetResponseServerError").parseSetResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"SetResponseServerError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Set",{Success:g,ClientError:h,ServerError:i}));case 14:case"end":return j.stop()}},null,this)}g.sendSetRPC=a}),98);
__d("WAStorageEstimator",["Promise","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return navigator.storage!=null&&typeof navigator.storage.estimate==="function"?navigator.storage.estimate().then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){return d("WAResultOrError").makeError({type:"runtime-error",runtimeError:a})}):(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError({type:"not-support"}))}g.estimateStorage=a}),98);
__d("WAUnicodeUtils",["WAStringz"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3,i=.5;function a(a,b){return j(a||"",0,b)}function b(a){return d("WAStringz").length(a||"")}function j(a,b,c){if(a==null||a==="")return"";b=b||0;c=c==null?Infinity:c;if(b===0&&c===Infinity)return a;return a.length>=h&&c/a.length<=i?l(a,b,c):d("WAStringz").substring(a,b,c)}function k(a,b,c){a=a||"";b=b||0;c=c==null?Infinity:c;return a.length>=h&&c/a.length<=i?m(a,b,c):d("WAStringz").toArray(a).slice(b,c)}function c(a,b){b===void 0&&(b=0);if(a.codePointAt)return a.codePointAt(b);var c=a.charCodeAt(b);if(c>=55296&&c<=56319){a=a.charCodeAt(b+1);a>=56320&&a<=57343&&(c=65536+(c-55296<<10)+(a-56320))}return c}function e(a,b){if(b==null)return a;if(encodeURI(a).length<=b)return a;var c=0,d=k(a),e=d.length;for(var f=0;f<e;f++){var g=d[f];g=encodeURI(g).length;if(c+g>b)return j(a,0,f);c+=g}return a}function l(a,b,c){b=new RegExp(d("WAStringz").astralRange);var e="",f,g=0;do f=b.exec(a),f&&(e+=f[0]),g++;while(f&&g<c);return e}function m(a,b,c){b=new RegExp(d("WAStringz").astralRange);var e=[],f;do f=b.exec(a),f&&e.push(f[0]);while(f&&e.length<c);return e}g.firstNCodepoints=a;g.numCodepoints=b;g.substring=j;g.toArray=k;g.codePointAt=c;g.firstNEncodedBytes=e}),98);
__d("WAWeb-opus-recorder-player",["Promise","WABinary","WALogger","WAOpusRecorderWorkerClient","WAWebFileUtils"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""]);i=function(){return a};return a}var j="audio/wav",k,l=0;function m(){l++;return k?k:new window.AudioContext()}function n(){l--,l===0&&k&&(k.close&&k.close(),k=void 0)}a=function(){function a(a){this.oggBlob=a}var c=a.prototype;c.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)};c.oggBlobToWAVBlob=function(a,c){var e=this;c===void 0&&(c=2);var f=c;return new(h||(h=b("Promise")))(function(b){var c=function(a){if(a.data==null){var c=function(a){h.forEach(function(b){b=b[a]||b[0];for(var c=0;c<b.length;c++)k.push(b[c])})};for(var d=0;d<f;d++)c(d);c=e.encodeWAV(k,l,f);d=new Blob([c.readByteArray()],{type:j});n();b(d)}else h.push(a.data),f=h[0].length},g=d("WAOpusRecorderWorkerClient").getOpusDecoderWorker(c),h=[],k=[],l=m();c={outputBufferSampleRate:l.sampleRate,bufferLength:4096};g.postMessage({command:"decode-init",config:c});d("WAWebFileUtils").blobToArrayBuffer(a).then(function(a){g.postMessage({command:"decode",pages:new Uint8Array(a)}),g.postMessage({command:"decode-done"})})["catch"](function(a){d("WALogger").WARN(i(),a).devConsole(a)})})};c.encodeWAV=function(a,b,c){var e=new(d("WABinary").Binary)(void 0,!0);e.ensureCapacity(44+a.length*2);e.writeString("RIFF");e.writeUint32(36+a.length*2);e.writeString("WAVE");e.writeString("fmt ");e.writeUint32(16);e.writeUint16(1);e.writeUint16(c);e.writeUint32(b.sampleRate);e.writeUint32(b.sampleRate*c*2);e.writeUint16(c*2);e.writeUint16(16);e.writeString("data");e.writeUint32(a.length*2);for(b=0;b<a.length;b++){c=Math.max(-1,Math.min(a[b],1));c*=c>0?32767:32768;e.writeInt16(Math.floor(c))}return e};return a}();g["default"]=a}),98);
__d("WAWebABPropsGlobals",["WAWebWamGlobals"],(function(a,b,c,d,e,f,g){c=new Set();var h=new Set();function a(){d("WAWebWamGlobals").Global.set({expoKey:Array.from(h).join(",")})}function b(a){d("WAWebWamGlobals").Global.set({abKey2:a})}g.accessedConfigs=c;g.exposureKeys=h;g.updateGlobalExpoKey=a;g.updateGlobalABKey=b}),98);
__d("WAWebApiAbPropConfig",["Promise","WALogger","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropConfig","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid ABProps config name"]);i=function(){return a};return a}function a(){return d("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return d("WAWebSchemaAbPropConfig").getAbpropConfigsTable().all().then(function(a){return a})})}function j(a,b,c){if(a==null||b==null)return c;else if(b==="bool")return a==="1"||a==="True"||a==="true";else if(b==="int")return parseInt(a,10);else if(b==="float")return parseFloat(a);return a}function e(a){var e=d("WAWebABPropsConfigs").ABPropConfigs[a];if(e==null){d("WALogger").ERROR(i()).verbose().sendLogs("invalid ABProps config name: "+a);return(h||(h=b("Promise"))).reject(c("err")("invalid ABProps config name"))}var f=e[0],g=e[1];a=e[2];e=e[3];var k=a;return d("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return d("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(f)).then(function(a){a=a?j(a.configValue,g,k):k;return a})})}function f(a){return d("WAWebModelStorageUtils").getStorage().lock(["abpropConfigs"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield b.all()),e=new Map();c.forEach(function(a){(a.configExpoKey!=null||a.overriddenConfigValue!=null)&&e.set(a.configCode,{configCode:a.configCode,configValue:a.configValue,configExpoKey:a.configExpoKey,hasAccessed:a.hasAccessed,overriddenConfigValue:a.overriddenConfigValue})});c=!1;var f=[];a.forEach(function(a,b){var g=!1,h=e.get(String(b));if(h){var i=h.configExpoKey;i!=null&&a.configExpoKey!==i?(d("WAWebABPropsGlobals").exposureKeys["delete"](i),c=!0,d("WAWebABPropsGlobals").accessedConfigs["delete"](b)):i!=null&&(g=h.hasAccessed)}f.push({configCode:String(b),configValue:a.configValue,configExpoKey:a.configExpoKey,hasAccessed:g,overriddenConfigValue:h==null?void 0:h.overriddenConfigValue})});c&&d("WAWebABPropsGlobals").updateGlobalExpoKey();yield b.clear();yield b.bulkCreate(f)});return function(a){return c.apply(this,arguments)}}())}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(a)));if(b==null||(b==null?void 0:b.hasAccessed)===!0)return;yield d("WAWebSchemaAbPropConfig").getAbpropConfigsTable().merge(String(a),{hasAccessed:!0})});return l.apply(this,arguments)}g.getABPropConfigs=a;g.parseConfigValue=j;g.getConfigValue=e;g.updateABPropConfigs=f;g.setConfigAccessed=k}),98);
__d("WAWebABPropsCache",["WALogger","WAWebABProps","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebApiAbPropConfig","WAWebRuntimeEnvironmentUtils","cr:4941","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops] configs need to be initialized before its first access, config name: ",""]);h=function(){return a};return a}var i=new Map(),j=!1,k;function a(a){k==null&&(k={},Object.keys(d("WAWebABPropsConfigs").ABPropConfigs).forEach(function(a){var b=d("WAWebABPropsConfigs").ABPropConfigs[a];b=b[0];k[b]=a}),Object.freeze(k));return k[a]}function e(){d("WAWebABProps").setGetABPropConfigValueImpl(l)}function l(a){var e=d("WAWebABPropsConfigs").ABPropConfigs[a],f=e[0],g=e[1],i=e[2];e=e[3];e=i;if(!c("gkx")("26258")&&!d("WAWebRuntimeEnvironmentUtils").isWorker()&&b("cr:4941")){i=new(b("cr:4941"))(window.location.search);i=i.get(a);if(i!=null&&i!=="")return d("WAWebApiAbPropConfig").parseConfigValue(i,g,e)}if(!j){d("WAWebABProps").usedBeforeInitializationConfigs.includes(a)||d("WALogger").WARN(h(),a);return e}return m(f)}function m(a){if(i.get(a)&&!d("WAWebABPropsGlobals").accessedConfigs.has(a)){var b;b=(b=i.get(a))==null?void 0:b.configExpoKey;b!=null&&!d("WAWebABPropsGlobals").exposureKeys.has(b)&&(d("WAWebABPropsGlobals").exposureKeys.add(b),d("WAWebABPropsGlobals").updateGlobalExpoKey());d("WAWebABPropsGlobals").accessedConfigs.add(a);self.setTimeout(function(){return d("WAWebApiAbPropConfig").setConfigAccessed(a)},0)}b=i.get(a);return!c("gkx")("26258")&&(b==null?void 0:b.overriddenConfigValue)!=null?b.overriddenConfigValue:b==null?void 0:b.configValue}function f(){return Array.from(i.values())}function n(a){var b=!1;a.forEach(function(a){i.set(a.configCode,a),a.hasAccessed===!0&&(d("WAWebABPropsGlobals").accessedConfigs.add(a.configCode),a.configExpoKey!=null&&(d("WAWebABPropsGlobals").exposureKeys.add(a.configExpoKey),b=!0))});b&&d("WAWebABPropsGlobals").updateGlobalExpoKey();j=!0}function o(){i.clear(),d("WAWebABPropsGlobals").accessedConfigs.clear(),d("WAWebABPropsGlobals").exposureKeys.clear(),j=!1}g.getABPropConfigNameFromCode=a;g.initializeABPropsCache=e;g.getAllABPropConfigs=f;g.bulkCreateOrReplaceABPropConfigs=n;g.clearABPropConfigs=o}),98);
__d("WAWebWebcRawPlatformsWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcRawPlatforms:[2416,{webcRawPlatform:[1,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{WebcRawPlatforms:[]});g.WebcRawPlatformsWamEvent=a}),98);
__d("WAWebConnModel",["WALogger","WAWebBaseModel","WAWebL10N","WAWebL10NConstants","WAWebMobilePlatforms","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamEnumPlatformType","WAWebWamGlobals","WAWebWebcRawPlatformsWamEvent","gkx","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Conn: platform change: ",""]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.id=d("WAWebBaseModel").prop(),e.ref=d("WAWebBaseModel").prop(),e.refTTL=d("WAWebBaseModel").prop(),e.refId=d("WAWebBaseModel").prop(),e.wid=d("WAWebBaseModel").prop(),e.connected=d("WAWebBaseModel").prop(),e.protoVersion=d("WAWebBaseModel").prop(),e.clientToken=d("WAWebBaseModel").prop(),e.serverToken=d("WAWebBaseModel").prop(),e.secret=d("WAWebBaseModel").prop(),e.isResponse=d("WAWebBaseModel").prop(),e.lc=d("WAWebBaseModel").prop(),e.lg=d("WAWebBaseModel").prop(),e.locales=d("WAWebBaseModel").prop(),e.is24h=d("WAWebBaseModel").prop(),e.platform=d("WAWebBaseModel").prop(),e.phone=d("WAWebBaseModel").prop(),e.tos=d("WAWebBaseModel").prop(),e.smbTos=d("WAWebBaseModel").prop(0),e.pushname=d("WAWebBaseModel").prop(),e.blockStoreAdds=d("WAWebBaseModel").session(!1),e.meReadyTriggered=d("WAWebBaseModel").session(!1),e.refExpiry=d("WAWebBaseModel").derived(function(){return Date.now()+this.refTTL},["ref","refTTL"]),e.locale=d("WAWebBaseModel").derived(function(){return this.formatLocale(this.lg,this.lc)},["lg","lc"]),e.localesList=d("WAWebBaseModel").derived(function(){return!this.locales||!this.locales.length?!this.lg?[]:[[this.lg,this.lc]]:this.locales.split(",").reduce(function(a,b){b=b.split("-");var c=b[0];b=b[1];if(!c)return a;a.push([c,b]);return a},[])},["locales","lg","lc"]),e.allLocales=d("WAWebBaseModel").derived(function(){var a=this;return c("lodash").uniq(this.localesList.map(function(b){var c=b[0];b=b[1];return a.formatLocale(c,b)})).filter(Boolean)},["localesList"]),e.allLanguages=d("WAWebBaseModel").derived(function(){return c("lodash").uniq(this.localesList.map(function(a){var b=a[0];a[1];return b}))},["localesList"]),e.platformField=d("WAWebBaseModel").derived(function(){if(this.platform==="wp7")return d("WAWebWamEnumPlatformType").PLATFORM_TYPE.WP;else if(this.platform)return d("WAWebWamEnumPlatformType").PLATFORM_TYPE[this.platform.toUpperCase()]||d("WAWebWamEnumPlatformType").PLATFORM_TYPE.UNKNOWN;return d("WAWebWamEnumPlatformType").PLATFORM_TYPE.UNKNOWN},["platform"]),e.tosShowCallNotification=d("WAWebBaseModel").derived(function(){return!0},["tos"]),e.isSMB=d("WAWebBaseModel").derived(function(){return this.platform===d("WAWebMobilePlatforms").PLATFORMS.SMBA||this.platform===d("WAWebMobilePlatforms").PLATFORMS.SMBI},["platform"]),b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.initialize=function(){var a=this;d("WAWebBaseModel").BaseModel.prototype.initialize.call(this);this.listenTo(this,"change:locale",function(a,b){c("WAWebL10N").setLocale(b,d("WAWebL10NConstants").L10N_PRIORITY.PHONE,!1)});this.listenTo(this,"change:phone",function(){i(a.phone)});this.listenTo(this,"change:platform",this.$ConnImpl1)};e["delete"]=function(){d("WAWebUserPrefsGeneral").setPushname(),this.clear()};e.canSetMyPushname=function(){return!this.isSMB};e.$ConnImpl1=function(){d("WALogger").LOG(h(),this.platform),this.platform&&d("WAWebWamGlobals").Global.set({webcPhonePlatform:this.platformField}),c("gkx")("26259")&&new(d("WAWebWebcRawPlatformsWamEvent").WebcRawPlatformsWamEvent)({webcRawPlatform:this.platform}).commit()};e.formatLocale=function(a,b){return!a?null:b?a.toLowerCase()+"-"+b.toUpperCase():a.toLowerCase()};e.shouldSaveToCache=function(){return!!d("WAWebUserPrefsMeUser").getMe()&&!!this.id};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="conn";function i(a){a===void 0&&(a={});var b=a,c=b.mcc;b=b.mnc;c&&typeof c==="string"&&(c=parseInt(c,10));b&&typeof b==="string"&&(b=parseInt(b,10));d("WAWebWamGlobals").Global.set({mcc:c!=null?c:null,mnc:b!=null?b:null,webcPhoneDeviceManufacturer:a.device_manufacturer||null,webcPhoneDeviceModel:a.device_model||null,webcPhoneOsBuildNumber:a.os_build_number||null,webcPhoneOsVersion:a.os_version||null,webcPhoneAppVersion:a.wa_version||null})}b=d("WAWebBaseModel").defineModel(a);e=new b({id:"1"});g.Conn=e}),98);
__d("WAWebABPropsSaga",["WAWebABProps","WAWebConnModel","gkx"],(function(a,b,c,d,e,f,g){function h(a){return!c("gkx")("26258")?d("WAWebABProps").getABPropConfigValue(a):!d("WAWebConnModel").Conn.isSMB&&d("WAWebABProps").getABPropConfigValue(a)}function a(){return h("saga_enabled")}function b(){return h("saga_copy")}function e(){return h("saga_v1_enabled")}function f(){return h("saga_v1_reengagement_enabled")}function i(){return h("saga_v1_nux_enabled")}function j(){return d("WAWebABProps").getABPropConfigValue("support_message_feedback_enabled")}function k(){return h("chat_with_support_cta")}g.getIsSagaEnabled=a;g.getIsSagaCopyEnabled=b;g.getIsSagaV1Enabled=e;g.getIsSagaV1ReengagementEnabled=f;g.getIsSagaV1NuxEnabled=i;g.getSagaFeedbackEnabled=j;g.getChatWithSupportTextEnabled=k}),98);
__d("WAWebBaseJSHaltDetector",["WALogger","WAWebEventEmitter"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection restarted"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection stopped"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection started"]);j=function(){return a};return a}var k="js_halt",l="clock_change_backwards";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$BaseJsHaltDetector1=b;d.$BaseJsHaltDetector2=c;return d}var c=b.prototype;c.startDetection=function(){var a=this;if(this.$BaseJsHaltDetector3)return;var b=Date.now();this.$BaseJsHaltDetector3=self.setInterval(function(){var c=Date.now(),d=c-b-a.$BaseJsHaltDetector1;d>a.$BaseJsHaltDetector2?a.trigger(k,d):d<-a.$BaseJsHaltDetector2&&a.trigger(l,d);b=c},this.$BaseJsHaltDetector1);d("WALogger").LOG(j())};c.stopDetection=function(){if(!this.$BaseJsHaltDetector3)return;self.clearInterval(this.$BaseJsHaltDetector3);this.$BaseJsHaltDetector3=null;d("WALogger").LOG(i())};c.restartDetection=function(){this.stopDetection(),this.startDetection(),d("WALogger").LOG(h())};return b}(c("WAWebEventEmitter"));g.JS_HALT_EVENT=k;g.CLOCK_CHANGE_BACKWARDS_EVENT=l;g.BaseJsHaltDetector=a}),98);
__d("WAWebAlphaRegex",[],(function(a,b,c,d,e,f){a=new RegExp("[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]");f["default"]=a}),66);
__d("WAWebContactGetters",["WAMd5","WATimeUtils","WAWebAlphaRegex","WAWebBusinessProfileTypes","WAWebContactComparator","WAWebGetters","WAWebGettersCaches","WAWebL10N","WAWebUserPrefsMeUser","WAWebWid"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createContactsCache});b=a.field;e=a.computed;f=a.unsafeIdentityGetter;a=f;f=b("id");var h=b("pushname"),i=b("isBusiness"),j=b("verifiedLevel"),k=b("verifiedName"),l=b("name"),m=b("forcedBusinessUpdateFromServer"),n=b("isContactSyncCompleted"),o=b("type"),p=b("requestedPnTimestamp"),q=b("shortName"),r=b("isEnterprise"),s=b("isSmb"),t=b("labels"),u=b("statusMute"),v=b("privacyMode"),w=b("isHosted");b=b("businessProfile");var x=e(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return c&&e!==d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?a:b},[h,i,j,k]),y=e(function(a){a=a[0];return a||""},[h]),z=e(function(a){var b=a[0];a=a[1];return b!==d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?null:a?c("WAWebL10N").accentFold(a):null},[j,k]),A=/^[^0-9]+$/,B=e(function(a){var b=a[0],e=a[1],f=a[2];a=a[3];function g(a){a=a.toLowerCase();var b=c("WAWebAlphaRegex").exec(a);if(b&&b.index===0||b&&A.test(a.slice(b.index))){a=b[0];b=c("WAWebL10N").removeAccents(a);return d("WAWebContactComparator").getCollator().compare(b,a)?a:b}return"#"}if(b)return g(b);if(f===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&e)return g(e);return a!=null&&a!==""?"~":"#"},[l,k,j,x]),C=e(function(a){a=a[0];return d("WAWebUserPrefsMeUser").isMeAccount(a)},[f]),D=e(function(a){a=a[0];return c("WAWebWid").isUser(a)},[f]),E=e(function(a){a=a[0];return c("WAWebWid").isGroup(a)},[f]),F=e(function(a){a=a[0];return c("WAWebWid").isBroadcast(a)},[f]),G=e(function(a){a=a[0];return c("WAWebWid").isNewsletter(a)},[f]),H=e(function(a){a=a[0];return c("WAWebWid").isPSA(a)},[f]),I=e(function(a){a=a[0];return c("WAWebWid").isIAS(a)},[f]),J=e(function(a){a=a[0];return c("WAWebWid").isSupportAccount(a)},[f]),K=e(function(a){a=a[0];return c("WAWebWid").isCAPISupportAccount(a)},[f]);o=e(function(a){var b=a[0];a=a[1];return b&&a==="in"},[D,o]);var L=e(function(a){var b=a[0];a=a[1];return!!(b&&(a==null?void 0:a.length))},[D,l]),M=e(function(a){var b=a[0],c=a[1];a=a[2];return!a&&b&&c!==d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[i,j,L]),N=e(function(a){var b=a[0],c=a[1];a=a[2];return a?null:b||c},[l,x,M]),O=e(function(a){var b=a[0];a=a[1];return b?c("WAMd5")((a.user||"")+"WA_ADD_NOTIF"):null},[D,f]),P=e(function(a){var b=a[0];a=a[1];return b?c("WAWebWid").user(a):null},[D,f]),Q=e(function(a){a=a[0];return a==null||a+d("WATimeUtils").DAY_SECONDS<d("WATimeUtils").unixTime()},[p]),R=e(function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4];a=a[5];return g||b&&c===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&(e===f||!e||a.isBot())},[i,j,l,k,J,f]),S=e(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b&&c===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&Boolean(e)&&e!==a},[i,j,l,k]),T=e(function(a){var b=a[0];a=a[1];return b&&a===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[i,j]),U=e(function(a){var b=a[0];a=a[1];return b&&(a===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH||a===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.LOW)},[i,j]);m=e(function(a){var b=a[0];a=a[1];return!b&&!a},[m,n]);n=e(function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=a[4];return b&&Boolean(d)&&e&&c!==d&&!a.isBot()},[i,l,k,L,f]);e=e(function(a){var b=a[0];a=a[1];return b&&a===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[i,j]);g.getContactUnsafe=a;g.getId=f;g.getPushname=h;g.getIsBusiness=i;g.getVerifiedLevel=j;g.getVerifiedName=k;g.getName=l;g.getRequestedPnTimestamp=p;g.getShortName=q;g.getIsEnterprise=r;g.getIsSmb=s;g.getLabels=t;g.getStatusMute=u;g.getPrivacyMode=v;g.getIsHosted=w;g.getBusinessProfile=b;g.getNotifyName=x;g.getPremiumMessageName=y;g.getSearchVerifiedName=z;g.getHeader=B;g.getIsMe=C;g.getIsUser=D;g.getIsGroup=E;g.getIsBroadcast=F;g.getIsNewsletter=G;g.getIsPSA=H;g.getIsIAS=I;g.getIsSupportAccount=J;g.getIsCAPISupportAccount=K;g.getIsWAContact=o;g.getIsMyContact=L;g.getIsNonVerified=M;g.getMentionName=N;g.getUserhash=O;g.getUserid=P;g.getCanRequestPhoneNumber=Q;g.getShowBusinessCheckmarkAsPrimary=R;g.getShowBusinessCheckmarkAsSecondary=S;g.getShowBusinessCheckmarkInChatlist=T;g.getIsDisplayNameApproved=U;g.getShouldForceBusinessUpdate=m;g.getShowBiz3pBotVerifiedNameAsSecondary=n;g.getShowAsMetaVerified=e}),98);
__d("WAWebContactComparator",["WAWebBusinessProfileTypes","WAWebCmd","WAWebContactGetters","WAWebL10NConstants"],(function(a,b,c,d,e,f,g){var h;b();d("WAWebCmd").Cmd.on("set_collator",b);function i(a){if(a.name)return a.name;return a.verifiedLevel===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&a.verifiedName?a.verifiedName:void 0}c=function(a,b){var c,e,f,g,j,k;c=(c=i(a))!=null?c:"";e=(e=i(b))!=null?e:"";f=(f=d("WAWebContactGetters").getHeader(a))!=null?f:"";g=(g=d("WAWebContactGetters").getHeader(b))!=null?g:"";j=(j=d("WAWebContactGetters").getNotifyName(a))!=null?j:"";k=(k=d("WAWebContactGetters").getNotifyName(b))!=null?k:"";a=a.id.toString();b=b.id.toString();if(!c&&e)return 1;else if(c&&!e)return-1;else if(c&&e&&f&&g){f=h.compare(f,g);return f===0?h.compare(c,e):f}else if(!j&&k)return 1;else if(j&&!k)return-1;else if(j&&k)return h.compare(j,k);else if(a&&b)return a.localeCompare(b);return-1};function a(){return h}function b(a){var b;a===void 0&&(a=d("WAWebL10NConstants").DEFAULT_LOCALE);if((b=self.Intl)==null?void 0:b.Collator){var c=self.Intl.Collator([a],{sensitivity:"base"});h={compare:function(a,b){try{return c.compare(a,b)}catch(a){return 0}}}}else h={compare:function(a,b){return a.localeCompare(b)}}}g.ContactComparator=c;g.getCollator=a}),98);
__d("WAWebWidFormat",["fbt","WAJids","WALogger","WAPhoneUtils","WATypeUtils","WAWebL10N","WAWebUsernameGatingUtils","WAWebWid","WAWebWidFactory","gkx","lodash"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["widToFormattedUser should not receive lid string"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["widToFormattedUser should not receive lid wid"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["GetUnknownNumber: unexpected unknown number displayed for wid: ",""]);k=function(){return a};return a}var l=c("lodash").memoize(function(a){return a==="Server"?a:d("WAPhoneUtils").formatPhone(a)});function m(a){return c("WAWebL10N").isRTL()?c("WAWebL10N").isolateLTR(l(a)):l(a)}function n(a){d("WAWebUsernameGatingUtils").shouldLogUnknownNumberError()&&d("WALogger").ERROR(k(),a==null?void 0:a.toLogString());return h._("__JHASH__b2xl6w52cts__JHASH__").toString()}function a(a){if(a instanceof c("WAWebWid")){if(a.isLid()){d("WALogger").WARN(j());return c("gkx")("26258")?n(a):a.toString()}return m(a.user)}else if(d("WATypeUtils").isString(a)){if(a.endsWith(d("WAJids").LID_DOMAIN)){d("WALogger").WARN(i());return c("gkx")("26258")?n(d("WAWebWidFactory").createUserWid(a)):a}return m(a.split("@")[0])}return""}g.getUnknownNumber=n;g.widToFormattedUser=a}),226);
__d("fbs",["fbt","invariant","FbtHooks","FbtPureStringResult"],(function(a,b,c,d,e,f,g,h){var i;a={};c=babelHelpers["extends"]({},g,{_param:function(a,c,d){typeof c==="string"||c instanceof b("FbtPureStringResult")||h(0,11709,c,typeof c);return g._param(a,c,d)},_plural:function(a,c,d){d==null||typeof d==="string"||d instanceof b("FbtPureStringResult")||h(0,47119,d,typeof d);return g._plural(a,c,d)},_wrapContent:function(a,c,d,e){a=typeof a==="string"?[a]:a;var f=(i||(i=b("FbtHooks"))).getErrorListener({hash:d,translation:c});return i.getFbsResult({contents:a,errorListener:f,extraOptions:e,patternHash:d,patternString:c})},cachedResults:a});d=c;e.exports=d}),null);
__d("WAWebFrontendContactGetters",["fbt","WAWebABProps","WAWebBusinessProfileTypes","WAWebConnModel","WAWebContactGetters","WAWebGetters","WAWebGettersCaches","WAWebL10N","WAWebUsernameGatingUtils","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWid","WAWebWidFormat","fbs"],(function(a,b,c,d,e,f,g,h){b=d("WAWebGetters").createGetterFactories({root:(a=d("WAWebContactGetters")).getContactUnsafe,createCache:d("WAWebGettersCaches").createFrontendContactsCache});e=b.field;f=b.computed;b=e("phoneNumber");var i=e("displayNameLID"),j=e("locale"),k=e("pendingAction"),l=e("isContactBlocked"),m=e("shareOwnPn"),n=e("businessProfile"),o=e("commonGroups"),p=e("verificationBinary"),q=e("verificationString"),r=e("businessCatalog"),s=e("textStatusString"),t=e("textStatusEmoji"),u=e("textStatusEphemeralDuration"),v=e("textStatusLastUpdateTime"),w=e("textStatusExpiryTs");e=e("username");var x=f(function(a){a=a[0];return a!=null&&a.length>0?{displayName:"@"+a,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.USERNAME}:null},[e]);x=f(function(a){a=a[0];return a!=null?a.displayName:null},[x]);i=f(function(a){var b=a[0],c=a[1],e=a[2];a=a[3];if(b!=null)return{displayName:d("WAWebWidFormat").widToFormattedUser(b),type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER};if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&e!=null)return{displayName:e,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.USERNAME};return c!=null?{displayName:c,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.MASKED_PHONE_NUMBER}:{displayName:d("WAWebWidFormat").getUnknownNumber(a),type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PLACEHOLDER}},[b,i,x,a.getId]);var y=f(function(a){a=a[0];return a.displayName},[i]),z=f(function(a){var b=a[0];a=a[1];return b!=null&&b!==""?{displayName:b,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:a},[a.getName,i]);z=f(function(a){a=a[0];return a.displayName},[z]);i=f(function(a){var b=a[0];a=a[1];return c("WAWebWid").isLid(b)?a:{displayName:d("WAWebWidFormat").widToFormattedUser(b),type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER}},[a.getId,i]);var A=f(function(a){a=a[0];return a.displayName},[i]),B=f(function(a){var b=a[0],e=a[1],f=a[2];a=a[3];if(f&&d("WAWebConnModel").Conn.pushname)return{displayName:d("WAWebConnModel").Conn.pushname,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PUSHNAME};if(c("WAWebWid").isPSA(b))return{displayName:c("fbs")._("__JHASH__8HYf1Fxz_sn__JHASH__").toString(),type:null};return e!=null&&e!==""?{displayName:e,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:a},[a.getId,a.getMentionName,a.getIsMe,i]),C=f(function(a){a=a[0];return a.displayName},[B]),D=f(function(a){a=a[0];return a.type},[B]),E=f(function(a){var b=a[0],e=a[1],f=a[2],g=a[3];a[4];if(c("WAWebWid").isPSA(f))return{displayName:c("fbs")._("__JHASH__8HYf1Fxz_sn__JHASH__").toString(),type:null};if(c("WAWebWid").isSupportAccount(f))return{displayName:c("WAWebL10N").accentFold("WhatsApp Support"),type:null};if(g){f=h._("__JHASH__4ViUEJMvZBQ__JHASH__",[h._param("nameOrPhoneNumber",(a=b)!=null?a:e)]);return{displayName:c("WAWebL10N").accentFold(f.toString()),type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}}return b!=null?{displayName:c("WAWebL10N").accentFold(b),type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:null},[a.getName,A,a.getId,a.getIsMe,j]);E=f(function(a){a=a[0];return a!=null?a.displayName:null},[E]);var F=f(function(a){var b=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6];a[7];if(!e)return{displayName:"",type:null};if(j)return{displayName:c("fbs")._("__JHASH__IBzirFr1ZJs__JHASH__").toString(),type:null};if(c("WAWebWid").isPSA(e))return{displayName:c("fbs")._("__JHASH__8HYf1Fxz_sn__JHASH__").toString(),type:null};if(c("WAWebWid").isSupportAccount(e))return{displayName:"WhatsApp Support",type:null};if(b)return{displayName:b,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME};if(f===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&g)return{displayName:g,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME};return i?{displayName:h,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER}:{displayName:"",type:null}},[a.getName,a.getId,a.getVerifiedLevel,a.getVerifiedName,A,a.getIsUser,a.getIsMe,j]),G=f(function(a){a=a[0];return a.displayName},[F]),H=f(function(a){var b=a[0],d=a[1],e=a[2],f=a[3];a[4];if(!e)return{displayName:"",type:null};if(f)return{displayName:c("fbs")._("__JHASH__IBzirFr1ZJs__JHASH__").toString(),type:null};if(b!=null)return{displayName:b,type:null};a=d.displayName;return{displayName:a&&a.replace(/\s/g," "),type:d.type}},[a.getShortName,F,a.getId,a.getIsMe,j]);H=f(function(a){a=a[0];return a.displayName},[H]);var I=f(function(a){var b=a[0],d=a[1],e=a[2],f=a[3];a[4];if(!e)return{displayName:"",type:null};if(f)return{displayName:c("fbs")._("__JHASH__IBzirFr1ZJs__JHASH__").toString(),type:null};if(b!=null&&b!=="")return{displayName:b,type:null};a=d.displayName;e=d.type;return{displayName:a,type:e}},[a.getShortName,F,a.getId,a.getIsMe,j]);I=f(function(a){a=a[0];return a.displayName},[I]);var J=f(function(a){var b=a[0];a=a[1];if(b)return!d("WAWebABProps").getABPropConfigValue("web_display_name_for_enterprise_biz_vlevel_low_killswitch");else if(a)return!d("WAWebABProps").getABPropConfigValue("web_display_name_for_biz_vlevel_low_killswitch");return!1},[a.getIsEnterprise,a.getIsSmb]);i=f(function(a){var b=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6];a[7];if(!e)return{displayName:"",type:null};if(c("WAWebWid").isPSA(e))return{displayName:c("fbs")._("__JHASH__8HYf1Fxz_sn__JHASH__").toString(),type:null};if(c("WAWebWid").isSupportAccount(e))return{displayName:"WhatsApp Support",type:null};if(b)return{displayName:b,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME};if(f===d("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&g)return{displayName:g,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME};return j&&i&&g?{displayName:g,type:d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME}:h},[a.getName,a.getId,a.getVerifiedLevel,a.getVerifiedName,i,a.getIsDisplayNameApproved,J,j]);a=f(function(a){a=a[0];return a.displayName},[i]);g.getPhoneNumber=b;g.getPendingAction=k;g.getIsContactBlocked=l;g.getShareOwnPn=m;g.getBusinessProfile=n;g.getCommonGroups=o;g.getVerificationBinary=p;g.getVerificationString=q;g.getBusinessCatalog=r;g.getTextStatusString=s;g.getTextStatusEmoji=t;g.getTextStatusEphemeralDuration=u;g.getTextStatusLastUpdateTime=v;g.getTextStatusExpiryTs=w;g.getUsername=e;g.getFormattedUsername=x;g.getPnForLid=y;g.getUserDisplayNameForLid=z;g.getFormattedPhone=A;g.getDisplayNameAndType=B;g.getDisplayName=C;g.getDisplayNameType=D;g.getSearchName=E;g.getFormattedNameAndType=F;g.getFormattedName=G;g.getFormattedShortNameWithNonBreakingSpaces=H;g.getFormattedShortName=I;g.getFormattedUserAndType=i;g.getFormattedUser=a}),226);
__d("WAWebClock",["fbt","$InternalEnum","WALogger","WATimeUtils","WAWeb-moment","WAWebContactGetters","WAWebEventEmitter","WAWebFrontendContactGetters","WAWebL10N","WAWebL10NConstants","WAWebL10nGetRenderedLocale","WAWebUserPrefsLocales","err"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Setting large clockskew: ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Intl.DateTimeFormat().resolvedOptions().timeZone does not exist"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Intl.DateTimeFormat().resolvedOptions().timeZone is ",""]);k=function(){return a};return a}var l=1e3*60,m=1e3,n=["fi","id","ms","ms-my"],o="America/Belem",p="America/Porto_Velho",q="skew_change",r="hour24_format_change",s=-1,t=b("$InternalEnum")({DeviceTimeFormat:2,PhoneTimeFormat:1,LocaleTimeFormat:0});a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$ClockImpl1=!1;b.skewMS=0;b.skew=0;if(Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions){var c=Intl.DateTimeFormat().resolvedOptions().timeZone;c?d("WALogger").LOG(k(),c):d("WALogger").LOG(j());switch(c){case"America/Sao_Paulo":b.timeZoneHardCode=o;break;case"America/Campo_Grande":case"America/Cuiaba":b.timeZoneHardCode=p;break}}b.initIs24HourBasedOnLocale();return b}var e=b.prototype;e.getIs24Hour=function(){return this.$ClockImpl1};e.setIs24Hour=function(a,b){if(b===t.LocaleTimeFormat)return;if(a==null)return;var c=this.getIs24Hour();b===t.DeviceTimeFormat?d("WAWebUserPrefsLocales").setDeviceHour24(a):b===t.PhoneTimeFormat&&d("WAWebUserPrefsLocales").setPhoneHour24(a);if(b===t.PhoneTimeFormat&&d("WAWebUserPrefsLocales").getDeviceHour24()!=null)return;this.$ClockImpl1=a;c!==a&&this.trigger(r)};e.initIs24HourBasedOnLocale=function(){var a=d("WAWebUserPrefsLocales").getDeviceHour24(),b=d("WAWebUserPrefsLocales").getPhoneHour24();a!=null?this.setIs24Hour(a,t.DeviceTimeFormat):b!=null?this.setIs24Hour(b,t.PhoneTimeFormat):this.$ClockImpl1=d("WAWebL10NConstants").LOCALES_THAT_PREFER_24HOUR_TIME.has(c("WAWebL10N").getNormalizedLocale())};e.setSkew=function(a){Math.abs(a)>l&&d("WALogger").LOG(i(),a);var b=this.skewMS;this.skewMS=a;this.skew=Math.round(a/1e3);Math.abs(b-this.skewMS)>m&&this.trigger(q)};e.getSkew=function(){return this.skew};e.convertGlobalToLocalUnixTime=function(a){return a+this.skew};e.timePassedFromNowMoment=function(a,b){b=b.omitSuffix;return c("WAWeb-moment").unix(a).fromNow(b)};e.timePassedFromNowIntl=function(a,b){b=b.style;var d=c("WAWeb-moment")();a=c("WAWeb-moment").unix(a);var e=a.diff(d,"days"),f=a.diff(d,"hours"),g=a.diff(d,"minutes");a=a.diff(d,"seconds");d=c("WAWebL10N").getNormalizedLocale();d=new Intl.RelativeTimeFormat(d,{style:b});if(e!==0)return d.format(e,"day");if(f!==0)return d.format(f,"hour");return g!==0?d.format(g,"minute"):d.format(a,"second")};e.relativeStr=function(a){a=a+this.skew;return a>=c("WAWeb-moment")().startOf("day").unix()?this.$ClockImpl2(a):this.$ClockImpl3(a,!1)};e.relativeDateStr=function(a){return this.$ClockImpl3(a+this.skew,!1)};e.relativeDateAndTimeStr=function(a){return this.$ClockImpl3(a+this.skew,!0)};e.monthStr=function(a){a=a+this.skew;var b=a*1e3;if(a>=c("WAWeb-moment")().startOf("month").unix()&&a<=c("WAWeb-moment")().endOf("month").unix())return h._("__JHASH__xAsYZX-8Awt__JHASH__");return a>=c("WAWeb-moment")().startOf("year").unix()&&a<=c("WAWeb-moment")().endOf("year").unix()?Intl.DateTimeFormat(c("WAWeb-moment").locale(),{month:"long"}).format(b):Intl.DateTimeFormat(c("WAWeb-moment").locale(),{month:"long",year:"numeric"}).format(b)};e.timeStr=function(a){var b=this.getIs24Hour();if(this.shouldUseIntlDateTimeFormat()){var d=(a+this.skew)*1e3,e={hour12:!b,hour:"numeric",minute:"numeric"},f={year:"numeric",month:"numeric",day:"numeric"};this.timeZoneHardCode!=null&&(e=babelHelpers["extends"]({},e,{timeZone:this.timeZoneHardCode}),f=babelHelpers["extends"]({},f,{timeZone:this.timeZoneHardCode}));e=Intl.DateTimeFormat(c("WAWeb-moment").locale(),e).format(d);f=Intl.DateTimeFormat(c("WAWeb-moment").locale(),f).format(d);return e+", "+f}return c("WAWeb-moment").unix(a+this.skew).format(b?"HH"+this.$ClockImpl4()+"mm, l":"LT, l")};e.timestampStr=function(a){return this.$ClockImpl2(a+this.skew)};e.timestampStrFormat=function(){return this.getIs24Hour()?"HH"+this.$ClockImpl4()+"mm":"LT"};e.timestampHour=function(a){a=a+this.skew;a=c("WAWeb-moment").unix(a).hour();return!this.getIs24Hour()?a%12:a};e.textStatusExpiryStr=function(a){a=a+this.skew;var b=this.$ClockImpl2(a);a=this.$ClockImpl3(a,!1);return h._("__JHASH__WONyEbdw5q0__JHASH__",[h._param("date",a),h._param("time",b)])};e.newsletterDescriptionCreatedStr=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__xeLD_ksmiQ0__JHASH__",[h._param("time",c)]);else if(b===1)return h._("__JHASH__g-zJgHX7QAn__JHASH__",[h._param("time",c)]);else if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__J9VEpk1h8MQ__JHASH__",[h._param("day",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH__QBwKhg6QOJt__JHASH__",[h._param("date",b),h._param("time",c)])};e.createdStr=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__80QVjnsA-lG__JHASH__",[h._param("time",c)]);if(b===1)return h._("__JHASH__c61_L22ZH4b__JHASH__",[h._param("time",c)]);if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__ComS_3iI8aF__JHASH__",[h._param("day",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH__0vqUZLFwjWK__JHASH__",[h._param("date",b),h._param("time",c)])};e.addedStr=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__xM4GR33t3ru__JHASH__",[h._param("time",c)]);if(b===1)return h._("__JHASH__ZQ79uR-iCDl__JHASH__",[h._param("time",c)]);if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__kcg8GXSw7k9__JHASH__",[h._param("day",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH__-SFu59XctXf__JHASH__",[h._param("date",b),h._param("time",c)])};e.updatedStr=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__zV15hZv4xVB__JHASH__",[h._param("time",c)]);if(b===1)return h._("__JHASH__GGmUvo6lTlM__JHASH__",[h._param("time",c)]);if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__SPRUzKzw0Kc__JHASH__",[h._param("day",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH__l7LQ4Xsm3Yw__JHASH__",[h._param("date",b),h._param("time",c)])};e.groupCreatedByStr=function(a,b,c){var d=this.daysDeltaAbs(a),e=a+this.skew,f=this.$ClockImpl2(e);if(d===0)return c?h._("__JHASH__zFlNA515JMF__JHASH__",[h._param("time",f)]):h._("__JHASH__qUqnCdXCdou__JHASH__",[h._param("name",b),h._param("time",f)]);if(d===1)return c?h._("__JHASH__xorlAvjx87D__JHASH__",[h._param("time",f)]):h._("__JHASH__K2eOtkn-VVC__JHASH__",[h._param("name",b),h._param("time",f)]);if(d<7){d=this.$ClockImpl5(a);return c?h._("__JHASH__q31Bfkc98qe__JHASH__",[h._param("on_day",d),h._param("time",f)]):h._("__JHASH__gQLbtChcrOG__JHASH__",[h._param("name",b),h._param("on_day",d),h._param("time",f)])}a=this.$ClockImpl3(e,!1);return c?h._("__JHASH__fW00EInGjkz__JHASH__",[h._param("date",a),h._param("time",f)]):h._("__JHASH__TDynpaLhvZx__JHASH__",[h._param("name",b),h._param("date",a),h._param("time",f)])};e.createdByOnDateStr=function(a,b){a=this.$ClockImpl6(a);if(b)if(d("WAWebContactGetters").getIsMe(b))return h._("__JHASH__SlUTmTDYuLj__JHASH__",[h._param("date",a)]);else if(d("WAWebContactGetters").getIsMyContact(b))return h._("__JHASH__370MO9S-82u__JHASH__",[h._param("name",d("WAWebFrontendContactGetters").getFormattedName(b)),h._param("date",a)]);return h._("__JHASH__K37AWfx_GJR__JHASH__",[h._param("date",a)])};e.groupCreatedStr=function(a,b,c){if(a==null||isNaN(a))return c||b==null||b===""?null:h._("__JHASH__MwM-7CJTZMf__JHASH__",[h._param("name",b)]);var d=this.daysDeltaAbs(a),e=a+this.skew;if(d===0)return c||b==null||b===""?h._("__JHASH__Q-W6Mr6u3fN__JHASH__"):h._("__JHASH__D2M0wj_1hXs__JHASH__",[h._param("name",b)]);if(d===1)return c||b==null||b===""?h._("__JHASH__TBVPPrPCSzJ__JHASH__"):h._("__JHASH__WcFaboIKqcu__JHASH__",[h._param("name",b)]);if(d<7){d=this.$ClockImpl5(a);return c||b==null||b===""?h._("__JHASH__PyEKNMJIdAG__JHASH__",[h._param("on_day",d)]):h._("__JHASH__F9as4txnkcM__JHASH__",[h._param("on_day",d),h._param("name",b)])}a=this.$ClockImpl3(e,!1);return c||b==null||b===""?h._("__JHASH__Z8rbk6Sh8bX__JHASH__",[h._param("date",a)]):h._("__JHASH__8Enk2EqzwoZ__JHASH__",[h._param("date",a),h._param("name",b)])};e.suggestedOnDateStr=function(a){a=c("WAWeb-moment").unix(a).format("l");return h._("__JHASH__FTiDH6Qwy6E__JHASH__",[h._param("date",a)])};e.communityCreatedByStr=function(a,b,c){var d=this.daysDeltaAbs(a),e=a+this.skew,f=this.$ClockImpl2(e);if(d===0)return c?h._("__JHASH__Vtk1KRo9Q9D__JHASH__",[h._param("time",f)]):h._("__JHASH__Q6nBL3-Qal5__JHASH__",[h._param("name",b),h._param("time",f)]);if(d===1)return c?h._("__JHASH__5g2VxqVZukQ__JHASH__",[h._param("time",f)]):h._("__JHASH__3-TNc5MnKaD__JHASH__",[h._param("name",b),h._param("time",f)]);if(d<7){d=this.$ClockImpl5(a);return c?h._("__JHASH__QDJ5erUwFYS__JHASH__",[h._param("on-day",d),h._param("time",f)]):h._("__JHASH__t3iXMJ48Ueb__JHASH__",[h._param("name",b),h._param("on-day",d),h._param("time",f)])}a=this.$ClockImpl3(e,!1);return c?h._("__JHASH__31AeWhMf9P6__JHASH__",[h._param("date",a),h._param("time",f)]):h._("__JHASH__6NY5Jxwxdw3__JHASH__",[h._param("name",b),h._param("date",a),h._param("time",f)])};e.statusTimePassedString=function(a){try{return this.timePassedFromNowIntl(a,{style:"long"})}catch(b){return this.timePassedFromNowMoment(a,{omitSuffix:!1})}};e.$ClockImpl5=function(a){a=a+this.skew;a=c("WAWeb-moment").unix(a);switch(a.day()){case 0:return h._("__JHASH__U6NnROdOGDw__JHASH__");case 1:return h._("__JHASH__aTk6T0oLPoN__JHASH__");case 2:return h._("__JHASH__HGXvFCRy3A4__JHASH__");case 3:return h._("__JHASH__xsMGChOztg4__JHASH__");case 4:return h._("__JHASH__gusZwRy8TwU__JHASH__");case 5:return h._("__JHASH__EGyUsOxsELS__JHASH__");case 6:return h._("__JHASH__CFy0Sl5tpBb__JHASH__");default:throw c("err")("Unexpected day number")}};e.untilStr=function(a){if(a===s)return h._("__JHASH__OCt3i8YXKoP__JHASH__");var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__5vSXmV5kSAG__JHASH__",[h._param("time",c)]);if(b===1)return h._("__JHASH__Dujo9Oh7-HU__JHASH__",[h._param("time",c)]);if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__8jw5nNPE57v__JHASH__",[h._param("day",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH___R_FnYnvU6h__JHASH__",[h._param("date",b),h._param("time",c)])};e.lastSeenStr=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;var c=this.$ClockImpl2(a);if(b===0)return h._("__JHASH__UnAAaORzvyk__JHASH__",[h._param("time",c)]);if(b===1)return h._("__JHASH__lh6EFR34ANw__JHASH__",[h._param("time",c)]);if(b<7){b=this.$ClockImpl3(a,!1);return h._("__JHASH__tETtwXQbntU__JHASH__",[h._param("date",b),h._param("time",c)])}b=this.$ClockImpl3(a,!1);return h._("__JHASH__MqyRMbfuO_I__JHASH__",[h._param("date",b),h._param("time",c)])};e.daysDeltaAbs=function(a,b){a=a;a=c("WAWeb-moment").unix(a).startOf("day");b=b===void 0?c("WAWeb-moment")().startOf("day"):c("WAWeb-moment").unix(b).startOf("day");b=b.diff(a,"days");return Math.abs(b)};e.durationStr=function(a){a=typeof a==="string"?parseInt(a,10):a;var b=c("WAWeb-moment").utc(a*1e3);if(b.isValid()){a=a<d("WATimeUtils").HOUR_SECONDS?"m:ss":"H:mm:ss";return b.format(a)}return""};e.timeLeftStr=function(a){var b=Math.floor(a/(3600*24));if(b>0){var c=h._("__JHASH__1DU5I25OpOS__JHASH__",[h._plural(b),h._param("days",b)]);return h._("__JHASH__-abl645rRIr__JHASH__",[h._plural(b),h._param("time",c)])}b=Math.floor(a/3600);if(b>0){c=h._("__JHASH__uszxxh3U3N3__JHASH__",[h._plural(b),h._param("hours",b)]);return h._("__JHASH__-abl645rRIr__JHASH__",[h._plural(b),h._param("time",c)])}b=Math.floor(a/60);if(b>0){c=h._("__JHASH___Sj29QMireu__JHASH__",[h._plural(b),h._param("minutes",b)]);return h._("__JHASH__-abl645rRIr__JHASH__",[h._plural(b),h._param("time",c)])}b=h._("__JHASH__SIHw6S4k9BA__JHASH__",[h._plural(a),h._param("seconds",a)]);return h._("__JHASH__-abl645rRIr__JHASH__",[h._plural(a),h._param("time",b)])};e.paymentTimestampStr=function(a){a=a+this.skew;a=c("WAWeb-moment").unix(a);var b=a.startOf("day");b=c("WAWeb-moment")().startOf("day").diff(b,"days");if(b===0)return h._("__JHASH__LPvEl--D7qQ__JHASH__");else if(b===1)return h._("__JHASH__8owokNCxtW9__JHASH__");else if(b<7)switch(a.day()){case 0:default:return h._("__JHASH__OnTOQqhx8qG__JHASH__");case 1:return h._("__JHASH__pTmaywUHH2a__JHASH__");case 2:return h._("__JHASH__x_uaEXYhSHy__JHASH__");case 3:return h._("__JHASH__EKMAdaO4OFy__JHASH__");case 4:return h._("__JHASH__CWnVu6jnVNi__JHASH__");case 5:return h._("__JHASH__g7sbskYKrAc__JHASH__");case 6:return h._("__JHASH__wZvuEMl-n9B__JHASH__")}else{b=a.format("MMMM d");return h._("__JHASH__g9zSxFpe7Wk__JHASH__",[h._param("date",b)])}};e.pastParticipantOnDateAtTime=function(a,b){var c=this.daysDeltaAbs(a);a=a+this.skew;var d=this.$ClockImpl2(a);if(c===0)return h._("__JHASH__QtYefCAtfKn__JHASH__",[h._param("action",b),h._param("time",d)]);if(c===1)return h._("__JHASH__oH-nQ8zLz83__JHASH__",[h._param("action",b),h._param("time",d)]);c=this.$ClockImpl3(a,!1);return h._("__JHASH__XP20I08o1Qm__JHASH__",[h._param("action",b),h._param("date",c),h._param("time",d)])};e.membershipApprovalRequestSectionDate=function(a){var b=this.daysDeltaAbs(a);a=a+this.skew;if(b===0)return h._("__JHASH__aMR4ADepQkN__JHASH__");return b===1?h._("__JHASH__3FT9NyjNGxM__JHASH__"):c("WAWeb-moment").unix(a).format("LL")};e.dsaDisplayDate=function(a){if(this.shouldUseIntlDateTimeFormat()){var b=(a+this.skew)*1e3,d={year:"numeric",month:"short",day:"numeric"};return Intl.DateTimeFormat(c("WAWeb-moment").locale(),d).format(b)}return c("WAWeb-moment").unix(a+this.skew).format("ll")};e.periodCoveredDateStr=function(a,b){b=c("WAWeb-moment").unix(b);a=c("WAWeb-moment").unix(a);var d=this.$ClockImpl7();return a.format(d)+" - "+b.format(d)};e.$ClockImpl7=function(){switch(d("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale()){case"de_DE":case"sk_SK":return"Do MMM";default:return"DD MMM"}};e.$ClockImpl2=function(a){var b=this.getIs24Hour();if(this.shouldUseIntlDateTimeFormat()){var d={hour12:!b,hour:"numeric",minute:"numeric"};this.timeZoneHardCode!=null&&(d=babelHelpers["extends"]({},d,{timeZone:this.timeZoneHardCode}));d=Intl.DateTimeFormat(c("WAWeb-moment").locale(),d).format(a*1e3);return b?d.replace(/^24/,"00"):d.replace(/^0/,"12")}return c("WAWeb-moment").unix(a).format(this.timestampStrFormat())};e.$ClockImpl6=function(a){if(this.shouldUseIntlDateTimeFormat()){var b={year:"numeric",month:"numeric",day:"numeric"};this.timeZoneHardCode!=null&&(b=babelHelpers["extends"]({},b,{timeZone:this.timeZoneHardCode}));b=Intl.DateTimeFormat(c("WAWeb-moment").locale(),b).format(a*1e3);return b}return c("WAWeb-moment").unix(a).format("l")};e.$ClockImpl3=function(a,b){var d=c("WAWeb-moment")().startOf("day"),e=c("WAWeb-moment").unix(a).startOf("day");d=d.diff(e,"days");e=this.$ClockImpl2(a);if(d===0)return b?h._("__JHASH__YDF7-BL9JNd__JHASH__",[h._param("time",e)]):h._("__JHASH__dLrWpDLIFUA__JHASH__");if(d===1)return b?h._("__JHASH__lfdJMYY9zty__JHASH__",[h._param("time",e)]):h._("__JHASH__3TVP-xyGsWv__JHASH__");if(!b&&Math.abs(d)<7)return c("WAWeb-moment").unix(a).format("dddd");d=this.$ClockImpl6(a);return b?h._("__JHASH__HqHAfvdfydE__JHASH__",[h._param("date",d),h._param("time",e)]):d};e.$ClockImpl4=function(){var a=c("WAWeb-moment").locale();return n.includes(a)?".":":"};e.shouldUseIntlDateTimeFormat=function(){return Intl.DateTimeFormat&&!d("WAWebL10NConstants").LOCALE_DATE_TIME_CUSTOMIZATIONS[c("WAWeb-moment").locale()]&&!d("WAWebL10NConstants").SHOULD_USE_MOMENT_LOCALE_FORMAT.has(c("WAWeb-moment").locale())};return b}(c("WAWebEventEmitter"));e=new a();g.SKEW_CHANGE_EVENT=q;g.HOUR24_FORMAT_CHANGE_EVENT=r;g.MUTE_ALWAYS_EXPIRATION_SENTINEL=s;g.TimeFormatSource=t;g.Clock=e}),226);
__d("WAWebJSHaltDetector",["WAWebBaseJSHaltDetector"],(function(a,b,c,d,e,f,g){a=3e3;b=1e4;c=new(d("WAWebBaseJSHaltDetector").BaseJsHaltDetector)(b,a);c.startDetection();g.DEFAULT_THRESHOLD=a;g.jsHaltDetector=c}),98);
__d("WAWebAlarm",["WALogger","WATimeUtils","WAWebBaseJSHaltDetector","WAWebClock","WAWebJSHaltDetector","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Alarm:setTimeout:Cannot set alarm in the past."]);h=function(){return a};return a}var i=Math.pow(2,31)-1;a=function(){function a(){var a=this;this.$1=new Map();var b=function(){a.$1.size>0&&a.$2()};d("WAWebJSHaltDetector").jsHaltDetector.on(d("WAWebBaseJSHaltDetector").JS_HALT_EVENT,b);d("WAWebJSHaltDetector").jsHaltDetector.on(d("WAWebBaseJSHaltDetector").CLOCK_CHANGE_BACKWARDS_EVENT,b);d("WAWebClock").Clock.on(d("WAWebClock").SKEW_CHANGE_EVENT,this.$3.bind(this))}var b=a.prototype;b.setLocalTimeout=function(a,b,c){return this.$4(!1,a,b,c)};b.setGlobalTimeout=function(a,b,c){return this.$4(!0,a,b,c)};b.clearTimeout=function(a){if(!a)return;var b=this.$1.get(a);if(!b)return;self.clearTimeout(b.timeoutId);this.$1["delete"](a)};b.$4=function(a,b,e,f){var g=this;f&&this.clearTimeout(f);var j=f||c("lodash").uniqueId("alarm_timer_");f=e-this.$5(a);var k=Math.min(f,i);if(f<0){d("WALogger").LOG(h());b();return j}f=self.setTimeout(function(){e-g.$5(a)<d("WAWebJSHaltDetector").DEFAULT_THRESHOLD?(g.$1["delete"](j),b()):g.$4(a,b,e,j)},k);k={isGlobal:a,fn:b,expiration:e,timeoutId:f};this.$1.set(j,k);return j};b.$2=function(){var a=this,b=new Map(this.$1);b.forEach(function(b,c){var d=b.isGlobal,e=b.fn;b=b.expiration;b<a.$5(d)?(a.clearTimeout(c),e()):a.$4(d,e,b,c)})};b.$3=function(){var a=this,b=new Map(this.$1);b.forEach(function(b,c){var d=b.isGlobal,e=b.fn;b=b.expiration;if(!d)return;a.$4(d,e,b,c)})};b.$5=function(a){a===void 0&&(a=!1);return(a?d("WATimeUtils").unixTime():d("WATimeUtils").unixTimeWithoutClockSkewCorrection())*1e3};return a}();b=new a();e=b;g["default"]=e}),98);
__d("WAWebApiBusinessProfile",["WALogger","WAWebBotTypes","WAWebSchemaBusinessProfile","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: commands parsing failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: commands are not an array"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: prompts parsing failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: prompts are not an array"]);k=function(){return a};return a}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaBusinessProfile").getBusinessProfileTable().get(a)});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield l(a));return!a?null:p(a)});return n.apply(this,arguments)}function c(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=q(a);yield d("WAWebSchemaBusinessProfile").getBusinessProfileTable().createOrMerge(a.id,a)});return o.apply(this,arguments)}function p(a){var b=a.commandsDescription,c=d("WAWebWidFactory").createWid(a.id),e=d("WAWebBotTypes").BizBotAutomatedType.cast(a.automatedType),f=d("WAWebBotTypes").BotWelcomeMsgProtocolModeType.cast(a.welcomeMsgProtocolMode),g;if(a.prompts!=null)try{g=JSON.parse(a.prompts),Array.isArray(g)||(g=null,d("WALogger").ERROR(k()).sendLogs("businessProfileFromDbRow: prompts are not an array"))}catch(a){d("WALogger").ERROR(j()).sendLogs("businessProfileFromDbRow: prompts parsing failed")}var l;if(a.commands!=null)try{l=JSON.parse(a.commands),Array.isArray(l)||(l=null,d("WALogger").ERROR(i()).sendLogs("businessProfileFromDbRow: commands are not an array"))}catch(a){d("WALogger").ERROR(h()).sendLogs("businessProfileFromDbRow: commands parsing failed")}return{id:c,automatedType:e,welcomeMsgProtocolMode:f,prompts:g,commands:l,commandsDescription:b}}function q(a){var b=a.commandsDescription,c=a.id.toString(),d;a.automatedType&&(d=a.automatedType);var e;a.welcomeMsgProtocolMode&&(e=a.welcomeMsgProtocolMode);var f=a.prompts?JSON.stringify(a.prompts):void 0;a=a.commands?JSON.stringify(a.commands):void 0;return{id:c,automatedType:d,welcomeMsgProtocolMode:e,prompts:f,commandsDescription:b,commands:a}}g.getBusinessProfileRow=l;g.getBusinessProfileRecord=a;g.createOrMergeBusinessProfileRecord=c;g.businessProfileFromDbRow=p}),98);
__d("WAWebWorkerStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="worker-storage",k=null;function a(){var a=new(c("WAWebIdb"))(j);k=new(d("WAWebStorage").Storage)(a)}function e(){k!=null||h(0,56324);return k}function f(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[worker-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebWorkerStorageVersionUngated",[],(function(a,b,c,d,e,f){a=1;f.versionToRollout=a}),66);
__d("WAWebWorkerStorageVersions",["WAWebWorkerStorageUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebWorkerStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebWorkerStorageUtils").getStorage().versions.version(1)}g.localStorageCreateTable=a;g.deferredMessagesStorageCreateTable=b}),98);
__d("WAWebSchemaDeferredMessagesStorage",["WAWebStorageMutationBuilder","WAWebStorageSchema","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addEncryptedColumn,j=c.addUserDefinedPrimaryKey;function a(){d("WAWebWorkerStorageUtils").getStorage().add("deferred_messages").version(d("WAWebWorkerStorageVersions").deferredMessagesStorageCreateTable(),[j("id"),h("type"),i("plaintext",d("WAWebStorageSchema").ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),h("info"),h("paymentInfo"),h("bizInfo")]).view(function(a){return{id:a.id,type:a.type,plaintext:a.plaintext,info:a.info,paymentInfo:a.paymentInfo,bizInfo:a.bizInfo}}).useDbMsgEncKeyForEncryptedCol(!0)}function b(){return d("WAWebWorkerStorageUtils").getStorage().table("deferred_messages")}g.addTable=a;g.getTable=b}),98);
__d("WAWebApiDeferredMessagesStorage",["WAWebSchemaDeferredMessagesStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebSchemaDeferredMessagesStorage").getTable().all().then(function(a){return a.map(function(a){return{id:a.id,type:a.type,plaintext:a.plaintext,info:a.info,paymentInfo:a.paymentInfo,bizInfo:a.bizInfo}})})}function c(a){var c=a.map(function(a){return{id:a.id,type:a.type,plaintext:a.plaintext,info:a.info,paymentInfo:a.paymentInfo,bizInfo:a.bizInfo}});return d("WAWebWorkerStorageUtils").getStorage().lock(["deferred_messages"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];yield a.bulkCreateOrReplace(c)});return function(b){return a.apply(this,arguments)}}())}function e(a){return d("WAWebSchemaDeferredMessagesStorage").getTable().remove(a)}function f(){return d("WAWebSchemaDeferredMessagesStorage").getTable().clear()}a={getDeferredMessages:a,updateDeferredMessages:c,deleteDeferredMessage:e,clearDeferredMessages:f};g["default"]=a}),98);
__d("WAWebSchemaLocalStorage",["WAWebStorageMutationBuilder","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebWorkerStorageUtils").getStorage().add("local_storage").version(d("WAWebWorkerStorageVersions").localStorageCreateTable(),[i("key"),h("value")]).view(function(a){return{key:a.key,value:a.value}})}function b(){return d("WAWebWorkerStorageUtils").getStorage().table("local_storage")}g.addTable=a;g.getTable=b}),98);
__d("WAWebApiLocalStorage",["WAWebSchemaLocalStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaLocalStorage").getTable().get(a).then(function(a){return a==null?void 0:a.value})}function c(a){var c=a.map(function(a){return{key:a.key,value:a.value}});return d("WAWebWorkerStorageUtils").getStorage().lock(["local_storage"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];yield a.clear();yield a.bulkCreateOrReplace(c)});return function(b){return a.apply(this,arguments)}}())}function e(){return d("WAWebSchemaLocalStorage").getTable().clear()}g.getLocalStorageValue=a;g.updateLocalStorage=c;g.clearLocalStorage=e}),98);
__d("WAWebApiOrphanTcToken",["WAWebSchemaOrphanTcToken"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable().remove(a)}function b(a){return d("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable().get(a)}function c(a,b){return d("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable().createOrMerge(a,babelHelpers["extends"]({chatId:a},b))}g.removeOrphanTcToken=a;g.getOrphanTcToken=b;g.createOrUpdateOrphanTcToken=c}),98);
__d("WAWebApiPeerMessageStore",["WAWebMsgKey","WAWebSchemaPeerMessage","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){a=a.map(function(a){a.kind;var b=babelHelpers.objectWithoutPropertiesLoose(a,["kind"]);return babelHelpers["extends"]({},b,{id:String(a.id),to:String(a.to),subtype:String(a.subtype)})});d("WAWebSchemaPeerMessage").getPeerMessageTable().bulkCreate(a)}function b(a){var b=d("WAWebSchemaPeerMessage").getPeerMessageTable();a=new(c("WAWebMsgKey"))({fromMe:!0,remote:d("WAWebUserPrefsMeUser").getMeUser(),id:a});return b.remove(a.toString())}g.storePeerMessages=a;g.deletePeerMessage=b}),98);
__d("WAWebAssetLoaderDpiChangeDispatch",[],(function(a,b,c,d,e,f){var g={LOW:"low",HIGH:"high"};a=window.matchMedia("\n    only screen and (-webkit-min-device-pixel-ratio: 2),\n    only screen and (min-device-pixel-ratio: 2),\n    only screen and (min-resolution: 2dppx)\n");var h={RES:g,currentRes:a.matches?g.HIGH:g.LOW};b=function(a){a=a.matches?g.HIGH:g.LOW;if(a===h.currentRes)return;h.currentRes=a;a=document.createEvent("Event");a.initEvent("dpichange",!0,!0);window.dispatchEvent(a)};a.addListener(b);c=h;f["default"]=c}),66);
__d("WAWebAssetLoaderDynamicStyle",["WACamelCase","lodash"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.rules={},this.styleSheet=this.createStyleSheet(a)}var b=a.prototype;b.createStyleSheet=function(a){a=a||c("lodash").uniqueId("dynamic-style-");var b=document.createElement("style");b.id=a;b.type="text/css";document.head&&document.head.appendChild(b);b=b.sheet;return b};b.addRule=function(a,b){var c=this.styleSheet.cssRules.length;b=Object.entries(b).map(function(a){var b=a[0];a=a[1];return b+": "+a+";"}).join(" ");this.styleSheet.insertRule(a+" { "+b+" }",c);this.rules[a]=this.styleSheet.cssRules[c];return this.rules[a]};b.updateRule=function(a,b){var d=this.rules[a];c("lodash").forOwn(b,function(a,b){d.style[c("WACamelCase")(b)]=a});return d};b.setRule=function(a,b){var c=this.rules[a];return c?this.updateRule(a,b):this.addRule(a,b)};return a}();g["default"]=a}),98);
__d("WAWebAssetToLoad",[],(function(a,b,c,d,e,f){a=function(){function a(a,b,c){this.retryCount=0,this.asset=a,this.resolution=b,this.priority=c}var b=a.prototype;b.getLoadUrlPromise=function(){return this.$3};b.setLoadUrlPromise=function(a,b){this.$3=a,this.$5=b};b.abortLoadUrlPromise=function(){var a;(a=this.$5)==null?void 0:a.abort()};b.getConsumerPromise=function(){return this.$1};b.setConsumerPromise=function(a){this.$1=a};b.getConsumerPromiseResolve=function(){return this.$2};b.setConsumerPromiseResolve=function(a,b){this.$2=a,this.$4=b};b.abortConsumerPromise=function(){var a;(a=this.$4)==null?void 0:a.abort()};return a}();f["default"]=a}),66);
__d("WAWebEmojiAssetLoader",["WAWebEmoji","WAWebEmojiConst","WAWebMobilePlatforms","lodash"],(function(a,b,c,d,e,f,g){var h=c("lodash").memoize(function(a,b){var e=new Map();a=i(a);b=b[a];var f=b.SELECTOR;b=Math.ceil(c("lodash").uniq(c("lodash").values(b.UNICODE_TO_EMOJI)).length/d("WAWebEmojiConst").BUCKET_SIZE);for(var g=0;g<b;g+=1){var h="emoji-"+f+"-b"+g,j=40;e.set(h,{id:h,selectors:[".emoji."+f+".b"+g,".emojik."+f+".b"+g],low:{webp:(h=d("WAWebEmoji")).EmojiUtil.getSpritesPath(a,g,j,"webp"),"default":h.EmojiUtil.getSpritesPath(a,g,40,"png")},high:{"default":h.EmojiUtil.getSpritesPath(a,g,64,"png"),webp:h.EmojiUtil.getSpritesPath(a,g,64,"webp")}})}return e});function i(a){switch(a){case d("WAWebMobilePlatforms").PLATFORMS.IPHONE:case d("WAWebMobilePlatforms").PLATFORMS.SMBI:case d("WAWebMobilePlatforms").PLATFORMS.IPAD:return d("WAWebEmojiConst").EMOJI_TYPE.APPLE;default:return d("WAWebEmojiConst").EMOJI_TYPE.WHATSAPP}}function a(a){return function(b){return h(b,a)}}g.getEmojiTypeFromPlatform=i;g.emojiAssetMapCreator=a}),98);
__d("WAWebPonyfillsMediaError",[],(function(a,b,c,d,e,f){a=window.MediaError||{MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4};b=a;f["default"]=b}),66);
__d("WAWebWamEnumWebcMediaLoadResultCode",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:0,SILENCE:1,ZEROWIDTH:2});f.WEBC_MEDIA_LOAD_RESULT_CODE=a}),66);
__d("WAWebWebcMediaLoadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcMediaLoadResultCode"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcMediaLoad:[1202,{webcMediaLoadResult:[2,d("WAWebWamEnumWebcMediaLoadResultCode").WEBC_MEDIA_LOAD_RESULT_CODE],webcMediaLoadT:[1,d("WAWebWamCodegenUtils").TYPES.TIMER]},[1,1,1],"regular"]},{WebcMediaLoad:[]});g.WebcMediaLoadWamEvent=a}),98);
__d("WAWebMediaLoad",["Promise","WACustomError","WAFilteredCatch","WALogger","WAPromiseDelays","WAPromiseTimeout","WAWeb-opus-recorder-player","WAWebMimeTypes","WAWebMiscErrors","WAWebPonyfillsMediaError","WAWebUA","WAWebWamEnumWebcMediaLoadResultCode","WAWebWebcMediaLoadWamEvent","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video load error, currentTime=",". duration=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video #"," dimensions are not defined. Video readyState: ",". Video width: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video #"," successful"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["unable to load video #"," ("," bytes)"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video.onerror #",": ","\n Blob info -> size:",", type: ",""],["MediaLoad:video.onerror #",": ","\\n Blob info -> size:",", type: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video.oncanplaythrough #",". Metadata loaded: ",". Video width: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video.onloadedmetadata #",". Video ready: ",". Video width: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaLoad:video called (#",")"]);q=function(){return a};return a}var r=3e5,s=new Audio().canPlayType("audio/ogg"),t=0,u=(h||(h=b("Promise"))).resolve();function v(a){if(!a||!a.error)return null;var b=a.error;a=Object.keys(c("WAWebPonyfillsMediaError"));a=(a=a.find(function(a){return c("WAWebPonyfillsMediaError")[a]===b.code}))!=null?a:"UNKNOWN CODE "+b.code;var d=b.message;d=d!=null&&~d.indexOf(":")?d.split(":")[0]:"";return d?a+": "+d:a}function w(a,e){e===void 0&&(e=!0);var f;return new(h||(h=b("Promise")))(function(b,g){f=new Image();var h=/^(?:data|blob):/.test(a);e&&!h&&f.setAttribute("crossOrigin","anonymous");f.onload=b;f.onabort=function(){g(c("err")("loadImage onabort"))};f.onerror=function(a){g(new(d("WAWebMiscErrors").InvalidImageFileType)("Image tag load error"))};f.src=a}).then(function(){return f})}function a(a){return w(a).then(function(a){if(a&&a.naturalWidth>0)return{img:a,fullWidth:a.naturalWidth,fullHeight:a.naturalHeight};throw new(d("WAWebMiscErrors").MediaLoadError)("image loaded with zero width")})["catch"](function(){throw new(d("WAWebMiscErrors").MediaLoadError)("unable to render image")})}function x(a){var b=u.then(function(){return y(a)});u=d("WAPromiseTimeout").promiseTimeout(b,1e3).then(function(){},function(){});return b}function y(a){var c=new(d("WAWebWebcMediaLoadWamEvent").WebcMediaLoadWamEvent)(),e=null,f,g,i=++t;function r(){f&&e&&(document.body&&document.body.removeChild(e),e=null)}var s=!0,u=new(h||(h=b("Promise")))(function(b,c){d("WALogger").LOG(q(),i);var h=!1,j=!1;f=document.createElement("video");f.setAttribute("crossOrigin","anonymous");f.volume=0;f.muted=!0;f.playsinline=!0;var k=function(){j&&h&&b()};f.onloadedmetadata=function(){d("WALogger").LOG(p(),i,j,f.videoWidth),f.onloadedmetadata=null,h=!0,k()};f.oncanplaythrough=function(){d("WALogger").LOG(o(),i,h,f.videoWidth),f.oncanplaythrough=null,f.onseeked=function(){j=!0,f.onseeked=null,k()},f.currentTime=0};f.onerror=function(){var b=f.error?f.error.message:"no error message";d("WALogger").WARN(n(),i,String(b),a.size,a.type);b=v(f);c(new(d("WAWebMiscErrors").UnableToPlayVideoError)(b))};f.src=g=window.URL.createObjectURL(a);if(d("WAWebUA").UA.isSafari){e=document.createElement("div");var l=e;l.style="opacity: 0.004";l.appendChild(f);document.body&&document.body.appendChild(l)}f.load();f.currentTime=1})["finally"](function(){s=!1});self.setTimeout(function(){r(),s&&(d("WALogger").WARN(m(),i,a.size),new(d("WAWebWebcMediaLoadWamEvent").WebcMediaLoadWamEvent)({webcMediaLoadResult:d("WAWebWamEnumWebcMediaLoadResultCode").WEBC_MEDIA_LOAD_RESULT_CODE.SILENCE}).commit())},8e3);var w=2e4,x=10;u=d("WAPromiseTimeout").promiseTimeout(u,w).then(function(){return d("WAPromiseDelays").delayMs(x)}).then(function(){c.markWebcMediaLoadT();d("WALogger").LOG(l(),i);f.pause();if(f.videoWidth>0){c.webcMediaLoadResult=d("WAWebWamEnumWebcMediaLoadResultCode").WEBC_MEDIA_LOAD_RESULT_CODE.SUCCESS;c.commit();return{video:f,fullWidth:f.videoWidth,fullHeight:f.videoHeight,duration:f.duration}}else if(f.duration>0){d("WALogger").WARN(k(),i,f.readyState,f.videoWidth);throw new(d("WAWebMiscErrors").MediaUnsupportedError)("video loaded with duration but no dims")}else{c.webcMediaLoadResult=d("WAWebWamEnumWebcMediaLoadResultCode").WEBC_MEDIA_LOAD_RESULT_CODE.ZEROWIDTH;c.commit();throw new(d("WAWebMiscErrors").MediaLoadError)("video loaded with zero width")}})["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(a){d("WALogger").ERROR(j(),f.currentTime,f.duration).sendLogs("video-load-timeout",{sampling:.01});throw a}))["finally"](function(){r(),f&&(f.onloadedmetadata=null,f.onloadeddata=null,f.oncanplaythrough=null,f.ontimeupdate=null,f.onerror=null),g&&window.URL.revokeObjectURL(g)});u["catch"](function(){z(f)});return u}function e(a){return x(a).then(function(a){var b=a.video,c=a.fullWidth,d=a.fullHeight;a=a.duration;z(b);return{width:c,height:d,duration:a}})}function z(a){try{a.pause(),a.src="",a.load()}catch(a){d("WALogger").ERROR(i(),String(a)).devConsole(a).sendLogs("dispose-video-error")}}function f(a,e){e=e||a.type;if(d("WAWebMimeTypes").isOpus(e)&&!s){if(a.size<=r){e=new(c("WAWeb-opus-recorder-player"))(a);return e.generateBlob()}return(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").TranscodeBlobTooLargeError)())}return(h||(h=b("Promise"))).resolve(a)}g.canPlayOgg=s;g.loadImage=w;g.image=a;g.loadVideo=x;g.videoWidthHeightDuration=e;g.disposeVideo=z;g.transcode=f}),98);
__d("WAWebFeatureDetectionDetectWebpSupport",["Promise","WAPromiseTimeout","WAWebMediaLoad","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",j=d("WAPromiseTimeout").promiseTimeout(new(h||(h=b("Promise")))(function(a){d("WAWebMediaLoad").loadImage(i).then(function(b){return a(b.height===2)})}),5e3)["catch"](function(){return!1}),k=null;function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(k!=null)return(h||(h=b("Promise"))).resolve(k);var a=(yield j);k=a;return a});return l.apply(this,arguments)}function c(){return k}g.detectWebpSupport=a;g.getCachedWebpSupport=c}),98);
__d("WAWebHttpErrors",["WACustomError","gkx"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("HttpNetworkError"));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="HttpTimedOutError",b)||babelHelpers.assertThisInitialized(c)}return b}(a);e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d,e){e=!c("gkx")("26258")&&(e==null?void 0:e.url)!=null?d+": "+b+" "+e.url:d+": "+b;d=a.call(this,e)||this;d.status=b;return d}return b}(d("WACustomError").customError("HttpStatusCodeError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){d=!c("gkx")("26258")&&(d==null?void 0:d.url)!=null?b+": "+d.url:b;return a.call(this,d)||this}return b}(d("WACustomError").customError("HttpInvalidResponseError"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,"mmsDownload: filehash mismatch",b)||this;b.name="MmsDownloadFilehashMismatchError";return b}return b}(f);g.HttpNetworkError=a;g.HttpTimedOutError=b;g.HttpStatusCodeError=e;g.HttpInvalidResponseError=f;g.MmsDownloadFilehashMismatchError=d}),98);
__d("WAWebWamEnumMediaPickerOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT_PHOTO_LIBRARY:1,CAMERA_TAB_CAPTURE:2,FORWARD:3,PASTE:4,SHARE_EXTENSION:5,EXPORT:6,MENU_CAMERA_CAPTURE:7,EXTERNAL_CAMERA:8,LINK_PREVIEW_DOWNLOAD:9,CAMERA_TAB_MEDIA_STRIP:10,CAMERA_TAB_PHOTO_LIBRARY:11,CHAT_BUTTON_CAMERA_CAPTURE:12,CHAT_BUTTON_CAMERA_MEDIA_STRIP:13,CHAT_BUTTON_CAMERA_PHOTO_LIBRARY:14,STATUS_TAB_CAMERA_CAPTURE:15,STATUS_TAB_CAMERA_MEDIA_STRIP:16,STATUS_TAB_CAMERA_PHOTO_LIBRARY:17,STATUS_REPLY_CAMERA_CAPTURE:18,STATUS_REPLY_CAMERA_MEDIA_STRIP:19,STATUS_REPLY_CAMERA_PHOTO_LIBRARY:20,MENU_CAMERA_PHOTO_LIBRARY:21,CHAT_GIF_INAPP:22,CHAT_GIF_EXTERNAL:23,STATUS_REPLY_GIF_INAPP:24,STATUS_REPLY_GIF_EXTERNAL:25,SMB_QUICK_REPLY_EDIT:26,SMB_QUICK_REPLY_SEND:27,MEDIA_BROWSER:28,CHAT_QUICK_EDIT:29,CAMERA_TAB_GIF:30,STATUS_TAB_GIF:31,PAYMENT_COMPOSER:32,PHOTO_RECEIVED:33,PHOTO_RECEIVED_GALLERY:34,AD_CREATION:35,EXTERNAL_DROP:36,IN_APP_BROWSER:37,PREMIUM_MESSAGE_COMPOSER:38,DOCUMENT_PICKER:39,IN_APP_BUG_REPORTING:40,STICKER_TRAY_CREATE_STICKER:41,STICKER_TRAY_EDIT_STICKER:42,STICKER_MESSAGE_CREATE_YOUR_OWN:43,STICKER_MESSAGE_EDIT_STICKER:44,MEDIA_VIEWER_CREATE_STICKER:45,STATUS_NEWSLETTER_CARD:46,CUTOUT_IMAGE_EDIT_STICKER:47,STICKER_TRAY_CREATE_STICKER_CAPTURE:48,THUNDERSTORM_IN_APP_PHOTO_LIBRARY:49,TRANSPARENT_IMAGE_EDIT_STICKER:50,BUSINESS_FLOWS:51,SYSTEM_INTENT:52,SMB_CATALOG_CAMERA:53,SMB_CATALOG_VIDEO_UPLOAD:54,STATUS_MENTION_RESHARE:55,MY_STATUS_FAB_CAMERA_CAPTURE:56,MY_STATUS_FAB_CAMERA_MEDIA_STRIP:57,STATUS_TAB_FAB_CAMERA_CAPTURE:58,STATUS_TAB_FAB_CAMERA_MEDIA_STRIP:59,HOME_TOOLBAR_CHATS_CAMERA_CAPTURE:60,HOME_TOOLBAR_CHATS_CAMERA_MEDIA_STRIP:61,HOME_TOOLBAR_CHATS_CAMERA_PHOTO_LIBRARY:62,HOME_TOOLBAR_STATUS_CAMERA_CAPTURE:63,HOME_TOOLBAR_STATUS_CAMERA_MEDIA_STRIP:64,HOME_TOOLBAR_STATUS_CAMERA_PHOTO_LIBRARY:65,HOME_TOOLBAR_CALLS_CAMERA_CAPTURE:66,HOME_TOOLBAR_CALLS_CAMERA_MEDIA_STRIP:67,HOME_TOOLBAR_CALLS_CAMERA_PHOTO_LIBRARY:68,HOME_TOOLBAR_COMMUNITY_CAMERA_CAPTURE:69,HOME_TOOLBAR_COMMUNITY_CAMERA_MEDIA_STRIP:70,HOME_TOOLBAR_COMMUNITY_CAMERA_PHOTO_LIBRARY:71,STATUS_TAB_SELF_POG_CAMERA_MEDIA_STRIP:72,STATUS_TAB_SELF_POG_CAMERA_CAPTURE:73,CHATS_TAB_CAMERA_MEDIA_STRIP:74,CHATS_TAB_CAMERA_CAPTURE:75,SELF_POG_ON_STATUS_VIEWER:76});f.MEDIA_PICKER_ORIGIN_TYPE=a}),66);
__d("WAWebMediaGatingUtils",["WAWebABProps","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebServerPropConstants","WAWebServerPropsModel","WAWebStateUtils","WAWebWamEnumMediaPickerOriginType"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isNewsletter()&&!d("WAWebNewsletterGatingUtils").isNewsletterMediaAlbumUploadEnabled())return 1;b=d("WAWebABProps").getABPropConfigValue("media_picker_select_limit");return a<=b?b:d("WAWebABProps").getABPropConfigValue("media_picker_select_limit_new")}function b(a){return a.isNewsletter()?d("WAWebNewsletterGatingUtils").isNewsletterMediaAlbumUploadEnabled():!0}function c(){return d("WAWebABProps").getABPropConfigValue("web_native_fetch_media_download")}function e(){return d("WAWebABProps").getABPropConfigValue("web_store_quota_manager_enabled")}function f(){return d("WAWebABProps").getABPropConfigValue("web_original_photo_quality_upload_enabled")}function h(){return d("WAWebABProps").getABPropConfigValue("enable_receiving_hd_photo_quality")}function i(){return d("WAWebABProps").getABPropConfigValue("web_sticky_hd_photo_setting_enabled")}function j(){return d("WAWebABProps").getABPropConfigValue("web_hd_media_global_setting_enabled")}function k(a){return a*1024*1024}function l(a,b,c){if(b===d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.STATUS_TAB_CAMERA_PHOTO_LIBRARY)return k(d("WAWebABProps").getABPropConfigValue("default_status_media_limit_mb"));switch(a){case"audio":return k(d("WAWebABProps").getABPropConfigValue("default_audio_limit_mb"));case"document":return c===!0?d("WAWebServerPropConstants").VCARD_MAX_SIZE_KB*1024:d("WAWebServerPropsModel").getMaxFilesSizeServerProp();case"video":return k(d("WAWebABProps").getABPropConfigValue("default_video_limit_mb"));case"image":case"sticker":return k(d("WAWebABProps").getABPropConfigValue("default_media_limit_mb"));default:a;return k(d("WAWebABProps").getABPropConfigValue("default_media_limit_mb"))}}function m(a){if(d("WAWebStateUtils").unproxy(a).isNewsletter){a=new Set([d("WAWebMsgType").MSG_TYPE.IMAGE,d("WAWebMsgType").MSG_TYPE.VIDEO]);d("WAWebNewsletterGatingUtils").isNewsletterStickerSendingEnabled()&&a.add(d("WAWebMsgType").MSG_TYPE.STICKER);d("WAWebNewsletterGatingUtils").isNewsletterAudioFileSendingEnabled()&&a.add(d("WAWebMsgType").MSG_TYPE.AUDIO);return a}return d("WAWebMsgType").ALL_MSG_TYPES_SET}function n(){return typeof self.BigInt==="function"}function o(a){a=a.type.startsWith("video/");return a&&n()&&d("WAWebABProps").getABPropConfigValue("web_wasm_worker_enabled_www")}function p(){return d("WAWebABProps").getABPropConfigValue("web_larger_link_previews")}g.getMaxNumberSelectableMedia=a;g.supportsMultipleUploads=b;g.isNativeFetchEnabled=c;g.isStoreQuotaManagerEnabled=e;g.isSendHQPhotoEnabled=f;g.isReceiveHQPhotoEnabled=h;g.isStickyHQPhotoSettingEnabled=i;g.isHDMediaGlobalSettingEnabled=j;g.getUploadLimit=l;g.getSupportedMediaTypesForChat=m;g.shouldUseWasmMediaWorkerForFile=o;g.shouldUseLargeHQPreviewInComposer=p}),98);
__d("WAWebHttpExtendedFetchWithStreams",["WAWebMediaGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return"fetch"in self&&"ReadableStream"in self&&(a==="get"||a==null)&&d("WAWebMediaGatingUtils").isNativeFetchEnabled()}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.onHeadersReceived,d=b.onProgress,e=b.onData;b.timeout;b=babelHelpers.objectWithoutPropertiesLoose(b,["onHeadersReceived","onProgress","onData","timeout"]);a=(yield self.fetch(a,b));var f=a.headers;c==null?void 0:c(f);if(d==null&&e==null||b.method!=="get"&&b.method!=null)return a;c=f.get("Content-Length");b=c!=null?Number.parseInt(c,10):null;c=(f=a.clone().body)==null?void 0:f.getReader();i(c,{onProgress:d,onData:e},{contentLength:b});return a});return h.apply(this,arguments)}function i(a,b,c){if(a==null)return;var d=0;return new ReadableStream({start:function(e){f();function f(){a.read().then(function(a){var g=a.done;a=a.value;if(g||!(a instanceof Uint8Array))return e.close();d+=a.byteLength;g=new ProgressEvent("progress",{total:c.contentLength,lengthComputable:c.contentLength!=null,loaded:d});b.onData==null?void 0:b.onData(g,a.buffer);b.onProgress==null?void 0:b.onProgress(g);e.enqueue(a);f()})["catch"](function(){e.close()})}}})}g.canUseExtendedFetchWithStreams=a;g.extendedFetchWithStreams=c}),98);
__d("WAWebHttpParseHeaders",[],(function(a,b,c,d,e,f){function a(a){return(a||"").trim().toLowerCase().split("\n").reduce(function(a,b){if(!b.trim())return a;var c=b.indexOf(":"),d=b.substr(0,c).trim();b=b.substr(c+1).trim().replace(/;$/,"");a[d]?Array.isArray(a[d])?a[d].push(b):a[d]+=", "+b:a[d]=b;return a},{})}f["default"]=a}),66);
__d("WAWebPonyfillsSymbol",[],(function(a,b,c,d,e,f){c="Symbol"in window?Symbol:(b=a=function(){},a.iterator="@@iterator",b);f["default"]=c}),66);
__d("WAWebPonyfillsHeaders",["WAIterableOperators","WAWebPonyfillsSymbol"],(function(a,b,c,d,e,f,g){var h;b="Headers"in window&&Headers?Headers:(a=(h=typeof c("WAWebPonyfillsSymbol")==="function"?c("WAWebPonyfillsSymbol").iterator:"@@iterator",function(){function a(b){var d=this;this.$1={};if(b instanceof a){var e=function(){if(g){if(h>=f.length)return"break";i=f[h++]}else{h=f.next();if(h.done)return"break";i=h.value}var a=i,b=a[0];a=a[1];a=a.split(", ");a.forEach(function(a){d.append(b,a)})};for(var f=b.entries(),g=Array.isArray(f),h=0,f=g?f:f[typeof c("WAWebPonyfillsSymbol")==="function"?c("WAWebPonyfillsSymbol").iterator:"@@iterator"]();;){var i,j=e();if(j==="break")break}}else if(typeof b==="object"){j=function(a){var c=b[a];c=c.split(", ");c.forEach(function(b){d.append(a,b)})};for(e in b)j(e)}}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();a in this.$1?this.$1[a].push(b):this.$1[a]=[b]};b["delete"]=function(a){a=a.toLowerCase();delete this.$1[a]};b.entries=function(){var a=this,b=Object.keys(this.$1).map(function(b){return[b,a.get(b)||""]});return d("WAIterableOperators").iteratorFromArray(b)};b.get=function(a){a=a.toLowerCase();return a in this.$1?this.$1[a].join(", "):null};b.has=function(a){a=a.toLowerCase();return a in this.$1};b.keys=function(){return d("WAIterableOperators").mapIterator(this.entries(),function(a){a=a[0];return a})};b.set=function(a,b){a=a.toLowerCase();this.$1[a]=[b]};b.values=function(){return d("WAIterableOperators").mapIterator(this.entries(),function(a){a[0];a=a[1];return a})};b[h]=function(){return this.entries()};b.toString=function(){return"[Object Headers]"};return a}()),a);g["default"]=b}),98);
__d("WAWebHttpExtendedFetch",["$InternalEnum","Promise","WAAbortError","WAArrayBufferUtils","WAWebHttpErrors","WAWebHttpExtendedFetchWithStreams","WAWebHttpParseHeaders","WAWebPonyfillsHeaders","asyncToGeneratorRuntime","err","w3c-domcore-errors"],(function(a,b,c,d,e,f,g){var h,i=b("$InternalEnum")({UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4});function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b={});try{return d("WAWebHttpExtendedFetchWithStreams").canUseExtendedFetchWithStreams(b.method)?yield d("WAWebHttpExtendedFetchWithStreams").extendedFetchWithStreams(a,b):yield k(a,b)}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR)throw new(d("WAAbortError").AbortError)();if(a instanceof d("WAWebHttpErrors").HttpNetworkError)throw a;throw new(d("WAWebHttpErrors").HttpNetworkError)(a.message)}});return j.apply(this,arguments)}function k(a,e){e===void 0&&(e={});return new(h||(h=b("Promise")))(function(f,g){var j;if((j=e.signal)==null?void 0:j.aborted){g(new(d("w3c-domcore-errors").DOMException)("AbortError"));return}var k=new XMLHttpRequest();if(e.signal){var l=e.signal;l.addEventListener("abort",function a(){l.removeEventListener("abort",a),k.onreadystatechange=function(){},k.abort(),g(new(d("w3c-domcore-errors").DOMException)("AbortError"))})}j=e;var m=j.onProgress,n=j.onData;if(m!=null||n){(((j=e.method)==null?void 0:j.toLowerCase())==="post"&&k.upload!=null?k.upload:k).onprogress=function(a){n&&n(a,k.responseText),m&&m(a)}}j=e;var o=j.onHeadersReceived;k.onreadystatechange=function(){if(k.readyState===i.UNSENT){g(c("err")("fetch error: not sent"));return}else if(k.readyState===i.HEADERS_RECEIVED&&o!=null){o(new(c("WAWebPonyfillsHeaders"))(c("WAWebHttpParseHeaders")(k.getAllResponseHeaders())));return}else if(k.readyState===i.DONE){if(k.status==null){g(c("err")("fetch error: no status"));return}if(k.status===0||k.status>=12e3){g(c("err")("fetch error: unexpected status "+k.status));return}f(r())}};k.onerror=function(){return g(c("err")("fetch error: error"))};k.ontimeout=function(){g(new(d("WAWebHttpErrors").HttpTimedOutError)("fetch error: timedout"))};k.withCredentials=e.credentials==="include";e.timeout!=null&&(k.timeout=e.timeout);k.open(e.method||"get",a.toString(),!0);j=new(c("WAWebPonyfillsHeaders"))(e.headers||{});for(var p of j.keys()){var q=j.get(p);q!=null&&k.setRequestHeader(p,q)}n?k.overrideMimeType("text/plain; charset=x-user-defined"):k.responseType="arraybuffer";k.send(e.body||null);function r(){var a=new(c("WAWebPonyfillsHeaders"))(c("WAWebHttpParseHeaders")(k.getAllResponseHeaders()));return babelHelpers["extends"]({ok:200<=k.status&&k.status<300,statusText:k.statusText,status:k.status,url:k.responseURL},s(),{blob:function(){return(h||(h=b("Promise"))).resolve(new Blob([k.response],{type:a.get("content-type")||""}))},clone:r,headers:a})}function s(){return n?{text:function(){return(h||(h=b("Promise"))).resolve(k.responseText)},json:function(){return(h||(h=b("Promise"))).resolve(JSON.parse(k.responseText))},arrayBuffer:function(){return d("WAArrayBufferUtils").largeStringToArrayBuffer(k.responseText)}}:{text:function(){return t()},json:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield t());return JSON.parse(a)});function c(){return a.apply(this,arguments)}return c}(),arrayBuffer:function(){return k.response}}}function t(){return(h||(h=b("Promise"))).resolve(String.fromCharCode.apply(String,Array.from(new Uint8Array(k.response))))}})}g.extendedFetch=a;g.sharedFetch=k}),98);
__d("WAWebLoadAssetUrl",["WACustomError","WANullthrows","WAWebFeatureDetectionDetectWebpSupport","WAWebHttpExtendedFetch","WAWebNetworkStatus","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={DEFAULT:"default",WEBP:"webp"},i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){d=b.call(this,"Failed to load url. StatusCode: "+c+". Duration: "+d+" ms")||this;d.url=a;d.statusCode=c;return d}return a}(d("WACustomError").customError("LoadUrlError"));function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebFeatureDetectionDetectWebpSupport").detectWebpSupport()),e=a.asset;a=a.resolution;b=b&&e[a][h.WEBP]?h.WEBP:h.DEFAULT;return c("WANullthrows")(e[a][b])});return k.apply(this,arguments)}function a(a){var e=new AbortController(),f=j(a).then(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("WAWebNetworkStatus").waitIfOffline({signal:e.signal});var f=Date.now(),g=(yield d("WAWebHttpExtendedFetch").extendedFetch(b,{signal:e.signal})),h=a.getConsumerPromiseResolve();if(g.ok&&h)h(b);else throw new i(b,g.status,Date.now()-f)});return function(a){return f.apply(this,arguments)}}());a.setLoadUrlPromise(f,e);return f}g.LoadUrlError=i;g.getSupportedImageFormatUrl=j;g.loadUrl=a}),98);
__d("WAWebWamEnumWebcAssetCacheTypeCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNCACHED:0,IDB:1,SW:2});f.WEBC_ASSET_CACHE_TYPE_CODE=a}),66);
__d("WAWebWebcAssetLoadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcAssetCacheTypeCode"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcAssetLoad:[1358,{webcAssetCacheType:[4,d("WAWebWamEnumWebcAssetCacheTypeCode").WEBC_ASSET_CACHE_TYPE_CODE],webcAssetFromCache:[2,a.TYPES.BOOLEAN],webcAssetLoadT:[3,a.TYPES.TIMER],webcAssetName:[1,a.TYPES.STRING],webcAssetSize:[5,a.TYPES.NUMBER]},[1,1,1],"regular"]},{WebcAssetLoad:[]});g.WebcAssetLoadWamEvent=b}),98);
__d("WAWebAssetLoader",["invariant","Promise","WAAbortError","WABackoffUtils","WALogger","WANullthrows","WAPriorityQueue","WAPromiseRaceAbort","WAWebAssetLoaderDpiChangeDispatch","WAWebAssetLoaderDynamicStyle","WAWebAssetToLoad","WAWebEmoji","WAWebEmojiAssetLoader","WAWebEmojiConst","WAWebLoadAssetUrl","WAWebWamEnumWebcAssetCacheTypeCode","WAWebWebcAssetLoadWamEvent","asyncToGeneratorRuntime","cr:5624","err","gkx","lodash"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Asset: "," failed. Retrying... ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dev-only: Failed to load asset "," with status ",". This might cause emojis to not show, this likely happens because emoji hashes changed. Rebuilding should fix the issue"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Asset load cancelled by more recent request: ","-",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["AssetLoader:loadEmojis cancelled by more recent request."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["AssetLoader:loadEmojis complete in ","ms"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["AssetLoader: loadEmoji Cancelled by more recent request: ","-",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["AssetLoader:loadInitialAssets cancelled by more recent request."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["AssetLoader:loadInitialAssets complete in ","ms"]);r=function(){return a};return a}var s={INITIAL_EMOJI_LOAD:1,INITIAL_ASSET_LOAD:2,THEME_ASSET_LOAD:2,HELP_ANIMATED_DOODLE:2,LAZY_LOAD_EMOJI:2,NOTIFICATION_ICON:2};a=function(){function a(a){var b=this;a===void 0&&(a=90);this._assetStyle=new(c("WAWebAssetLoaderDynamicStyle"))("asset-style");this._requestedAssets={};this._loadingDataMap={};this._getEmojiForPlatform=null;this._currentResolution=c("WAWebAssetLoaderDpiChangeDispatch").currentRes;this._currentlyLoadingCount=0;this._queue=new(c("WAPriorityQueue"))(function(a){return-a.priority});this._hasLoggedDecrementBelowZero=!1;this.loadAssetsForCurrentDpi=function(){var a=c("WAWebAssetLoaderDpiChangeDispatch").currentRes,e=b._currentResolution;if(a===e)return;b._currentResolution=a;Object.keys(b._requestedAssets).forEach(function(a){b._cancelLoad(a,e)});b._loadAssets(c("lodash").values(b._requestedAssets),s.INITIAL_EMOJI_LOAD,{forceCheck:!1})["catch"](d("WAAbortError").catchAbort(function(){}))};this._maxConcurrentRequests=a}var e=a.prototype;e.initEmojiAsset=function(a){this._getEmojiForPlatform=a};e.loadInitialAssets=function(a){var b=new(d("WAWebWebcAssetLoadWamEvent").WebcAssetLoadWamEvent)({webcAssetName:"initial-assets",webcAssetFromCache:!1,webcAssetCacheType:d("WAWebWamEnumWebcAssetCacheTypeCode").WEBC_ASSET_CACHE_TYPE_CODE.UNCACHED});this._loadAssets(a,s.INITIAL_ASSET_LOAD,{estimateStorage:!0}).then(function(){b.markWebcAssetLoadT();b.commit();var a=b.webcAssetLoadT;d("WALogger").LOG(r(),a)})["catch"](d("WAAbortError").catchAbort(function(){d("WALogger").LOG(q())}))};e.loadEmoji=function(a,e){if(this._getEmojiForPlatform&&this._currentPlatform){var f=this._getEmojiForPlatform(this._currentPlatform);a=d("WAWebEmoji").EmojiUtil.getBucket(a);var g=this._getEmojiPrefix(),h=f.get(g+"b"+a),j=this._currentResolution;return h?this.loadAsset(h,e,!1)["catch"](d("WAAbortError").catchAbort(function(){d("WALogger").LOG(p(),h.id,j);return void 0})):(i||(i=b("Promise"))).reject(c("err")("The given emoji glyph id was not found"))}return(i||(i=b("Promise"))).reject(c("err")("emojiForPlatform or currentPlatform are not set"))};e.loadEmojis=function(){var a=c("WANullthrows")(this._currentPlatform);this._getEmojiForPlatform!=null||h(0,56365);a=Array.from(this._getEmojiForPlatform(a).values());var b=new(d("WAWebWebcAssetLoadWamEvent").WebcAssetLoadWamEvent)({webcAssetName:"emojis",webcAssetFromCache:!1,webcAssetCacheType:d("WAWebWamEnumWebcAssetCacheTypeCode").WEBC_ASSET_CACHE_TYPE_CODE.UNCACHED});this._loadAssets(a,s.INITIAL_EMOJI_LOAD,{estimateStorage:!0}).then(function(){b.markWebcAssetLoadT();b.commit();var a=b.webcAssetLoadT;d("WALogger").LOG(o(),a)})["catch"](d("WAAbortError").catchAbort(function(){d("WALogger").LOG(n())}))};e.loadAsset=function(a,e,f){var g=this;f===void 0&&(f=!0);var h=a.id,j=c("WAWebAssetLoaderDpiChangeDispatch").currentRes,k=this._requestedAssets[h];if(k&&!c("lodash").isEqual(a,k)){k=["Attempted to load an asset using an already used ID"];return(i||(i=b("Promise"))).reject(c("err")(k.join("\n")))}this._requestedAssets[h]=a;this._loadingDataMap[h]=this._loadingDataMap[h]||{};k=j==="high"?"low":"high";this._cancelLoad(h,k);k=this._loadingDataMap[h][j];if(k&&!f)return k.promise;var l=new(c("WAWebAssetToLoad"))(a,j,e);f=new AbortController();var n=f.signal;e=this._buildPromise(l,f).then(function(b){if(n.aborted)throw new(d("WAAbortError").AbortError)();var c=a.selectors;c&&g._assetStyle.setRule(""+c.join(", "),{"background-image":"url('"+b+"')"});return b})["catch"](function(a){var b=g._loadingDataMap[h][j],c=o!==b;c||(g._loadingDataMap[h][j]=null);if(a.name===d("WAAbortError").ABORT_ERROR){d("WALogger").LOG(m(),h,j);if(c&&b)return b.promise}throw a});l.setConsumerPromise(e);var o={promise:e,abort:function(a){g._abortUrlPromise(l,a)}};this._loadingDataMap[h][j]=o;k&&k.abort(!1);this._startLoad();return e};e._buildPromise=function(a,d){var e=this,f=new(i||(i=b("Promise")))(function(b){a.setConsumerPromiseResolve(b,d),e._queue.push(a)});return c("WAPromiseRaceAbort")(f,d.signal)};e._startLoad=function(){var a=this;if(this._currentlyLoadingCount>=this._maxConcurrentRequests)return;var b=function(b){var e=a._queue.pull();if(!e)return{v:void 0};a._currentlyLoadingCount+=1;d("WAWebLoadAssetUrl").loadUrl(e).then(function(){a._decrementCurrentlyLoadingCount(),a._startLoad()})["catch"](d("WAAbortError").catchAbort(function(){a._decrementCurrentlyLoadingCount(),a._startLoad()}))["catch"](function(b){a._decrementCurrentlyLoadingCount();if(!c("gkx")("26258")&&b instanceof d("WAWebLoadAssetUrl").LoadUrlError&&(b.statusCode===404||b.statusCode===429)){d("WALogger").WARN(l(),b.url,b.statusCode);return}e.retryCount+=1;var f=d("WABackoffUtils").expBackoff(e.retryCount,12e4,1e3,.1);self.setTimeout(function(){a._queue.push(e),a._startLoad()},f);a._startLoad();d("WAWebLoadAssetUrl").getSupportedImageFormatUrl(e).then(function(a){a=a.split("/");d("WALogger").WARN(k(),a[a.length-1],b.toString()).devConsole(b)})})};for(var e=0;e<this._maxConcurrentRequests-this._currentlyLoadingCount;e++){var f=b(e);if(typeof f==="object")return f.v}};e._abortUrlPromise=function(a,b){b===void 0&&(b=!0);var c=a.getLoadUrlPromise();if(c){a.abortLoadUrlPromise();c=a.getConsumerPromise();b&&c&&a.abortConsumerPromise()}this._startLoad()};e._cancelLoad=function(a,b){var c;c=(c=this._loadingDataMap[a])==null?void 0:c[b];if(!c)return;this._loadingDataMap[a][b]=null;c.abort(!0)};e.setPlatform=function(a){var b=this,c=this._currentPlatform;if(a===c)return;this._currentPlatform=a;c=d("WAWebEmojiAssetLoader").getEmojiTypeFromPlatform(a);c=c===d("WAWebEmojiConst").EMOJI_TYPE.APPLE?d("WAWebEmojiConst").EMOJI_TYPE.WHATSAPP:d("WAWebEmojiConst").EMOJI_TYPE.APPLE;var e=c===d("WAWebEmojiConst").EMOJI_TYPE.APPLE?"emoji-apple-":"emoji-wa-";Object.keys(this._requestedAssets).forEach(function(a){if(!a.startsWith(e))return;b._cancelLoad(a,"high");b._cancelLoad(a,"low")});if(this._getEmojiForPlatform==null)return;c=Array.from(this._getEmojiForPlatform(a).values());this._loadAssets(c,s.INITIAL_EMOJI_LOAD,{forceCheck:!1})};e._getEmojiPrefix=function(){var a=d("WAWebEmojiAssetLoader").getEmojiTypeFromPlatform(this._currentPlatform);return a===d("WAWebEmojiConst").EMOJI_TYPE.APPLE?"emoji-apple-":"emoji-wa-"};e._loadAssets=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e){var f=this,g=(e==null?void 0:e.forceCheck)!==!1;e=(e==null?void 0:e.estimateStorage)===!0;a=(yield (i||(i=b("Promise"))).all(a.map(function(a){return f.loadAsset(a,d,g)})));c("gkx")("26262")&&b("cr:5624")&&b("cr:5624")({keep:c("lodash").values(this._requestedAssets),estimateStorage:e});return a});function a(b,c,d){return a.apply(this,arguments)}return a}();e._decrementCurrentlyLoadingCount=function(){this._currentlyLoadingCount<=0&&!this._hasLoggedDecrementBelowZero&&(this._hasLoggedDecrementBelowZero=!0,d("WALogger").ERROR(j()).sendLogs("Tried to decrease _loadingCount below zero, would have been negative.")),this._currentlyLoadingCount=Math.max(0,this._currentlyLoadingCount-1)};return a}();g.LOAD_PRIORITY=s;g.AssetLoaderImpl=a}),98);
__d("WAWebAssetLoaderSingleton",["WAWebAssetLoader","gkx"],(function(a,b,c,d,e,f,g){var h=new(d("WAWebAssetLoader").AssetLoaderImpl)();window.addEventListener("dpichange",function(){h.loadAssetsForCurrentDpi()});c("gkx")("26258")||(window.AssetLoader=h);g.AssetLoader=h}),98);
__d("WAWebBizCoexOfflineICDCHandledCache",["WAWebCmd"],(function(a,b,c,d,e,f,g){var h=new Set();function a(a){h.add(a)}function b(a){h["delete"](a)}function c(a){return h.has(a)}d("WAWebCmd").Cmd.on("offline_delivery_end",function(){h.clear()});g.addToOfflineBizHostedSenderICDCProcessedCache=a;g.removeFromOfflineBizHostedSenderICDCProcessedCache=b;g.hasOfflineBizHostedSenderICDCProcessedForSender=c}),98);
__d("WAWebMsmsgMsgSecretCache",["WAWebCmd"],(function(a,b,c,d,e,f,g){a=function(){function a(){var a=this;this.cache=new Map();d("WAWebCmd").Cmd.on("logout",function(){return a.clearCache()})}var b=a.prototype;b.addMsmsgMsgSecretToCache=function(a,b){this.cache.set(a,b)};b.getMsmsgMsgSecretFromCache=function(a){return this.cache.get(a)};b.clearCache=function(){this.cache=new Map()};return a}();b=new a();g.msmsgMsgSecretCache=b}),98);
__d("WAWebBotMessageSecret",["WABinary","WACryptoAesGcm","WACryptoHkdf","WALogger","WANullthrows","WAWebDBMessageSerialization","WAWebLidMigrationUtils","WAWebMsgKey","WAWebMsmsgMsgSecretCache","WAWebProtobufsE2E.pb","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptMsmsgBotMessage: fallback to botEditTargetId: ",""]);h=function(){return a};return a}var i=32,j="Bot Message";function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new(d("WABinary").Binary)(a).readByteArray();a=(yield d("WACryptoHkdf").extractAndExpand(new Uint8Array(a),j,i));return a});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return b.msgInfo.author.isFbidBot()?p(a,b):n(a,b)});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.msgMeta,f=b.msgInfo;a=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,a);var g=e.targetSenderJid?d("WAWebUserPrefsMeUser").isMeAccount(e.targetSenderJid):!0;g={fromMe:g,remote:(g=e.targetChatJid)!=null?g:f.chat,id:c("WANullthrows")(e.targetId,"decryptMsmsgBotMessage: targetId")};f.chat.isGroup()&&(g.participant=e.targetSenderJid);g=(yield r(g));e=d("WAWebWidToJid").widToUserJid((e=e.targetSenderJid)!=null?e:d("WAWebUserPrefsMeUser").assertGetMeUser());var i=d("WAWebWidToJid").widToUserJid(c("WANullthrows")(f.author,"decryptMsmsgBotMessage: author")),j=c("WANullthrows")(a.encIv,"decryptMsmsgBotMessage: encIv");a=c("WANullthrows")(a.encPayload,"decryptMsmsgBotMessage: encPayload");try{f=f.externalId;var k=(yield t(f,e,i,g));k=(yield d("WACryptoAesGcm").gcmDecrypt(k,j,a,f+"\0"+i))}catch(l){d("WALogger").LOG(h(),l);b=c("WANullthrows")((f=b.msgBotInfo)==null?void 0:f.botEditTargetId,"decryptMsmsgBotMessage: botEditTargetId");f=(yield t(b,e,i,g));k=(yield d("WACryptoAesGcm").gcmDecrypt(f,j,a,b+"\0"+i))}return k});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e,f=b.msgMeta;b=b.msgInfo;var g=c("WANullthrows")(d("WAWebUserPrefsMeUser").getMaybeMeLidUser(),"decryptMsmsgFbidBotMessage: meLidUser");e=(e=f.targetSenderJid)!=null?e:g;g={fromMe:d("WAWebUserPrefsMeUser").isMeAccount(e),remote:b.chat,id:c("WANullthrows")(f.targetId,"decryptMsmsgFbidBotMessage: targetId")};if(b.chat.isGroup()){g.participant=(f=d("WAWebLidMigrationUtils").toPn(e))!=null?f:e}f=(yield r(g));g=b.externalId;b=d("WAWebWidToJid").widToUserJid(c("WANullthrows")(b.author,"decryptMsmsgFbidBotMessage: author"));e=(yield t(g,d("WAWebWidToJid").widToUserJid(e),b,f));f=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,a);a=f.encIv;f=f.encPayload;e=(yield d("WACryptoAesGcm").gcmDecrypt(e,c("WANullthrows")(a,"decryptMsmsgFbidBotMessage: encIv"),c("WANullthrows")(f,"decryptMsmsgFbidBotMessage: encPayload"),g+"\0"+b));return e});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new(c("WAWebMsgKey"))(a).toString();var b=d("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(a);if(b==null){a=(yield d("WAWebSchemaMessage").getMessageTable().get(a));b=d("WAWebDBMessageSerialization").messageFromDbRow(c("WANullthrows")(a,"decryptMsmsgBotMessage: targetMsg")).messageSecret}return k(c("WANullthrows")(b,"decryptMsmsgBotMessage: decryptSecretBase"))});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=d("WABinary").Binary.build(a,b,c).readBuffer();b=(yield d("WACryptoHkdf").extractAndExpand(new Uint8Array(e),a,i));return b});return u.apply(this,arguments)}g.genBotMsgSecretFromMsgSecret=k;g.decryptMsmsgBotMessage=a}),98);
__d("WAWebBotSystemMsg",["WAWebBackendApi","WAWebBotGating","WAWebCmd","WAWebContactSystemMsg","WAWebMsgType","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new Map();function a(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"bot_init",templateParams:[]})}function c(a,b){if(d("WAWebBotGating").isBotEnabled()&&!b.id.isBot()&&a.botMessageSecret!=null&&b.hasCreatedBotInvokeSystemMsg!==!0&&((a=a.invokedBotWid)==null?void 0:a.isBot())){a=j(b.id);return a}return null}function e(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBotGating").isBotReceiveEnabled()&&(yield l(a))!==!0&&!a.isBot()){var b=j(a);h.set(a.toJid(),!0);return b}return null});return i.apply(this,arguments)}function j(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"bot_invoke_disclaimer",templateParams:[]})}function f(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_bot_1p_disclosure",templateParams:[]})}function k(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_bot_3p_disclosure",templateParams:[]})}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=null;if(d("WAWebCmd").Cmd.isMainStreamReadyMd){var c=(yield d("WAWebBackendApi").frontendSendAndReceive("getChat",{chatId:a}));c&&(b=c.hasCreatedBotInvokeSystemMsg);return b}c=(yield d("WAWebSchemaChat").getChatTable().get(a.toString()));b=c==null?void 0:c.hasCreatedBotInvokeSystemMsg;h.set(a.toJid(),b);return b});return m.apply(this,arguments)}d("WAWebCmd").Cmd.on("logout",function(){h=new Map()});g.genBotInitSystemMsg=a;g.getMaybeSysMsgForBotInvoke=c;g.createSysMsgForIncomingBotInvoke=e;g.genBizBot1pDisclosureMessage=f;g.genBizBot3pDisclosureMessage=k}),98);
__d("WAWebBotTosIds",["WAWebABProps"],(function(a,b,c,d,e,f,g){var h="20230901",i="20230902",j="20240216",k="20231027";a=new Set([h,i,j]);b=function(){var a=d("WAWebABProps").getABPropConfigValue("ai_pdfn_tos_shortcut_notice_id").trim();a=a!=null&&a!==""?a:h;return a};c=function(){var a=d("WAWebABProps").getABPropConfigValue("ai_pdfn_tos_shortcut_notice_id").trim();a=a!=null&&a!==""?a:j;return a};e=function(){var a=d("WAWebABProps").getABPropConfigValue("ai_pdfn_tos_invoke_notice_id").trim();a=a!=null&&a!==""?a:i;return a};f=function(){return k};g.supportedTosNoticeIds=a;g.getBotAgentTosId=b;g.getBotShortcutTosId=c;g.getBotInvokeTosId=e;g.getBizBotTosId=f}),98);
__d("WAWebGetUserDisclosuresQueryJob",["WASmaxUserNoticeGetDisclosuresRPC","WATimeUtils","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WATimeUtils").unixTime();a=(yield d("WASmaxUserNoticeGetDisclosuresRPC").sendGetDisclosuresRPC({getUserDisclosuresT:a}));switch(a.name){case"GetDisclosuresResponseClientSuccess":return a.value.notice;case"GetDisclosuresResponseClientError":var b=a.value.errorIQErrorBadRequestMixin,c=b.code;b=b.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),b);case"GetDisclosuresResponseServerError":c=a.value.errorIQErrorInternalServerErrorMixin;b=c.code;a=c.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(b),a)}});return h.apply(this,arguments)}g.queryAllUserDisclosures=a}),98);
__d("WAWebGetUserDisclosuresJob",["WAJobOrchestratorTypes","WAWebGetUserDisclosuresQueryJob","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getAllUserDisclosures",function(){return d("WAWebGetUserDisclosuresQueryJob").queryAllUserDisclosures()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.getAllUserDisclosures=a}),98);
__d("WAWebTosJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWebBackendErrors","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h=7200,i=259200,j=86400,k=new(c("WADeprecatedWapParser"))("tosNotices",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("tos");var b={refresh:a.attrInt("refresh"),notice:[]};a.forEachChildWithTag("notice",function(a){var c=a.maybeAttrString("state")!=="false";a=a.attrString("id");b.notice.push({id:a,state:c})});(b.refresh>i||b.refresh<h)&&(b.refresh=j);return b});function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{xmlns:"tos",id:b.generateId(),type:"get",to:b.S_WHATSAPP_NET},b.wap("request",null,a.map(function(a){return d("WAWap").wap("notice",{id:d("WAWap").CUSTOM_STRING(a)})})));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,k));if(a.success)return a.result;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("gkx")("26258")){var b,e=new(c("WADeprecatedWapParser"))("tosNoticesDebug",function(){});b=(b=d("WAWap")).wap("iq",{xmlns:"tos",id:b.generateId(),type:"set",to:b.S_WHATSAPP_NET},b.wap("delete",{id:a}));yield d("WADeprecatedSendIq").deprecatedSendIq(b,e)}});return m.apply(this,arguments)}function f(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=new(c("WADeprecatedWapParser"))("tosNoticesSet",function(){});b=(b=d("WAWap")).wap("iq",{xmlns:"tos",id:b.generateId(),type:"set",to:b.S_WHATSAPP_NET},b.wap("request",{type:"session_update"},a.map(function(a){return d("WAWap").wap("notice",{id:d("WAWap").CUSTOM_STRING(a)})})));yield d("WADeprecatedSendIq").deprecatedSendIq(b,e)});return n.apply(this,arguments)}g.DEFAULT_TOS_REFRESH_INTERVAL=j;g.queryTosState=a;g.deleteTosState=e;g.updateTosState=f}),98);
__d("WAWebGetUserDisclosuresAction",["WAWebGetUserDisclosuresJob","WAWebTosJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=5;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebGetUserDisclosuresJob").getAllUserDisclosures());a=a.map(function(a){return{id:a.id.toString(),state:a.stage===h}});return{refresh:d("WAWebTosJob").DEFAULT_TOS_REFRESH_INTERVAL,notice:a}});return i.apply(this,arguments)}g.getUserDisclosuresAction=a}),98);
__d("WAWebTos",["Promise","WACustomError","WAExponentialBackoff","WALogger","WAPromiseDelays","WAWebBackendErrors","WAWebBizGatingUtils","WAWebBotGating","WAWebBotTosIds","WAWebEventEmitter","WAWebGetUserDisclosuresAction","WAWebNewsletterGatingUtils","WAWebTosJob","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager server session state update failed, error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager server session state update failed, retriable error: ",", failCount ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, fetch state for: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, trigger change event"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, saving notice ",", state ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, non recoverable error, exiting"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, will retry in "," ms"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager state pull failed, error: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager query failed, retriable error: ",", failCount ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager, run"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["ToS state manager unrecognized user notice id: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected error when getting notice id state: ",""]);t=function(){return a};return a}var u="20210210",v=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"Unknown user notice id: "+a)||this}return a}(d("WACustomError").customError("UnknownUserNoticeIdError")),w={minTimeout:1e3,maxTimeout:16e3,retries:5,signal:new AbortController().signal};a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c._disclosureNoticeIds=[],c.botTosFetched=!1,c._refreshInterval=d("WAWebTosJob").DEFAULT_TOS_REFRESH_INTERVAL*1e3,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f._getTosNoticeIds=function(){var a=[];d("WAWebBizGatingUtils").tosFetchEnabled()&&a.push(u);d("WAWebBotGating").isBotEnabled()&&(this.botTosFetched=!0,a.push(d("WAWebBotTosIds").getBotAgentTosId(),d("WAWebBotTosIds").getBotInvokeTosId()),d("WAWebBotGating").isBotShortcutEntryPointEnabled()&&a.push(d("WAWebBotTosIds").getBotShortcutTosId()));(d("WAWebBotGating").isBizBot1pEnabled()||d("WAWebBotGating").isBizBot3pEnabled())&&a.push(d("WAWebBotTosIds").getBizBotTosId());return a};f._getAllNoticeIds=function(){var a=this._getTosNoticeIds().concat(this._disclosureNoticeIds);return a};f._addDisclosureNoticeIds=function(a){a=new Set(this._disclosureNoticeIds.concat(a));this._disclosureNoticeIds=Array.from(a)};f.getState=function(a){try{var b=this._getStoreKey(a);b=c("WAWebUserPrefsStore").getUser(b);b=typeof b==="string"&&(b==="UNKNOWN"||b==="NOT_ACCEPTED"||b==="ACCEPTED")?b:"UNKNOWN";return b}catch(b){b instanceof v||d("WALogger").ERROR(t(),a).tags("tos-manager").sendLogs("Unexpected error when getting notice id state").devConsole(b);return"UNKNOWN"}};f.setState=function(a,b){this._disclosureNoticeIds.includes(a)||x()&&this._getTosNoticeIds().includes(a)?(c("WAWebUserPrefsStore").setUser(this._getStoreKey(a),b),this.trigger("change")):d("WALogger").WARN(s(),a)};f.run=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(!x()&&!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return;try{yield d("WAExponentialBackoff").exponentialBackoff(w,function(a,c){d("WALogger").DEV(r());return b._query()["catch"](function(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError)switch(b.statusCode){case 500:d("WALogger").WARN(q(),b.message,c);return a(b)}throw b})})}catch(a){d("WALogger").ERROR(p(),a).verbose().devConsole(a).sendLogs("ToS state manager run failed");if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===500)d("WALogger").DEV(o(),this._refreshInterval);else{d("WALogger").DEV(n());return}}if((a==null?void 0:a.singleRun)===!0)return;if(this._getNoticeIdsToRun(this._getAllNoticeIds()).length>0){a=d("WAWebUserPrefsMeUser").getMaybeMeUser();yield d("WAPromiseDelays").delayMs(this._refreshInterval);d("WAWebUserPrefsMeUser").getMaybeMeUser()===a&&void this.run()}});function c(b){return a.apply(this,arguments)}return c}();f._query=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;if(!d("WAWebUserPrefsMeUser").getMaybeMeUser())return;var e=(yield (h||(h=b("Promise"))).all([this._tosQuery(),this._disclosuresQuery()])),f=e[0];e=e[1];this._refreshInterval=Math.min(f.refresh,e.refresh)*1e3;f=f.notice.concat(e.notice);var g=new Set(this._getAllNoticeIds());e=!1;f.filter(function(a){return g.has(a.id)}).forEach(function(b){var f=b.state?"ACCEPTED":"NOT_ACCEPTED",g=a._getStoreKey(b.id);c("WAWebUserPrefsStore").getUser(g)!==f&&(d("WALogger").DEV(m(),b.id,f),c("WAWebUserPrefsStore").setUser(g,f),e=!0)});c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.TOS_STATE_FETCH_ITERATION,d("WAWebBizGatingUtils").tosFetchIteration());e&&(d("WALogger").DEV(l()),this.trigger("change"))});function a(){return a.apply(this,arguments)}return a}();f._getEmptyTosNoticeData=function(){return{refresh:d("WAWebTosJob").DEFAULT_TOS_REFRESH_INTERVAL,notice:[]}};f._tosQuery=function(){if(!x())return(h||(h=b("Promise"))).resolve(this._getEmptyTosNoticeData());var a=this._getNoticeIdsToRun(this._getTosNoticeIds());if(a.length>0){d("WALogger").DEV(k(),a);return d("WAWebTosJob").queryTosState(a)}return(h||(h=b("Promise"))).resolve(this._getEmptyTosNoticeData())};f._disclosuresQuery=function(){d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&this.populateTosManagerNewsletterIds();return this._disclosureNoticeIds.length===0?(h||(h=b("Promise"))).resolve(this._getEmptyTosNoticeData()):d("WAWebGetUserDisclosuresAction").getUserDisclosuresAction()};f._getNoticeIdsToRun=function(a){var b=this,e=parseInt(c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.TOS_STATE_FETCH_ITERATION),10)||0;if(d("WAWebBizGatingUtils").tosFetchIteration()>e)return a;var f=a.map(function(a){return b.getState(a)});return a.filter(function(a,b){return f[b]!=="ACCEPTED"})};f._getStoreKey=function(a){var b=new Set(this._getAllNoticeIds());if(b.has(a))return"TOS_STATE_"+a;throw new v(a)};f.maybeUpdateServer=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;if(x())try{var e=new Set(a);yield d("WAExponentialBackoff").exponentialBackoff(w,function(a,f){var g=c._getAcceptedNoticeIds(e);return g.length>0?d("WAWebTosJob").updateTosState(g)["catch"](function(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError&&b.statusCode===500){d("WALogger").WARN(j(),b.message,f);return a(b)}throw b}):(h||(h=b("Promise"))).resolve()})}catch(a){d("WALogger").ERROR(i(),a).verbose().devConsole(a).sendLogs("ToS state manager server session state update failed")}});function c(b){return a.apply(this,arguments)}return c}();f._getAcceptedNoticeIds=function(a){var b=this;if(d("WAWebUserPrefsMeUser").getMaybeMeUser()){var c=this._getTosNoticeIds().map(function(a){return b.getState(a)});return this._getTosNoticeIds().filter(function(b,d){return c[d]==="ACCEPTED"&&a.has(b)})}return[]};f.resetAllState=function(){var a=this;this._getAllNoticeIds().forEach(function(b){c("WAWebUserPrefsStore").setUser(a._getStoreKey(b),void 0)});void d("WAWebTosJob").deleteTosState(u)};f.resetState=function(a){c("WAWebUserPrefsStore").setUser(this._getStoreKey(a),void 0),void d("WAWebTosJob").deleteTosState(a)};f.populateTosManagerNewsletterIds=function(){this._addDisclosureNoticeIds([d("WAWebNewsletterGatingUtils").getNewsletterConsumerTos(),d("WAWebNewsletterGatingUtils").getNewsletterProducerTos(),d("WAWebNewsletterGatingUtils").getNewsletterAdminInviteTos()])};return e}(c("WAWebEventEmitter"));function x(){return d("WAWebBizGatingUtils").tosFetchEnabled()||d("WAWebBotGating").isBizBot1pEnabled()||d("WAWebBotGating").isBizBot3pEnabled()}e=new a();g.TOS_3_ID=u;g.TosManager=e}),98);
__d("WAWebSetUserDisclosureStageQueryJob",["Promise","WASmaxUserNoticeSetRPC","WAWebBackendErrors","WAWebTos","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i={5:"ACCEPTED","-1":"UNKNOWN"};function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e={stageMixinArgs:{noticeId:a,noticeStage:c}};e=(yield d("WASmaxUserNoticeSetRPC").sendSetRPC(e));switch(e.name){case"SetResponseSuccess":c=i[c];d("WAWebTos").TosManager.setState(a.toString(),c);return(h||(h=b("Promise"))).resolve(!0);case"SetResponseClientError":a=e.value.errorIQErrorBadRequestMixin;c=a.code;a=a.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a);case"SetResponseServerError":c=e.value.errorIQErrorInternalServerErrorMixin;a=c.code;e=c.text;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),e)}});return j.apply(this,arguments)}g.SetUserDisclosureStageQueryJob=a}),98);
__d("WAWebSetUserDisclosureStageJob",["WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSetUserDisclosureStageQueryJob"],(function(a,b,c,d,e,f,g){function a(a,b){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("setUserDisclosureStage",function(){return d("WAWebSetUserDisclosureStageQueryJob").SetUserDisclosureStageQueryJob(a,b)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}g.setUserDisclosureStage=a}),98);
__d("WAWebSetUserDisclosureStageAction",["WAWebSetUserDisclosureStageJob"],(function(a,b,c,d,e,f,g){var h=5;function a(a){return d("WAWebSetUserDisclosureStageJob").setUserDisclosureStage(a,h)}g.acceptUserDisclosureAction=a}),98);
__d("WAWebBotTos",["WATimeUtils","WAWebBotGating","WAWebBotTosIds","WAWebBotTypes","WAWebSetUserDisclosureStageAction","WAWebTos","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h="BIZ_BOT_TOS_DISMISSED_AT";function a(){return i()||j()||k()}function i(){return d("WAWebTos").TosManager.getState(d("WAWebBotTosIds").getBotAgentTosId())==="ACCEPTED"}function j(){return d("WAWebTos").TosManager.getState(d("WAWebBotTosIds").getBotInvokeTosId())==="ACCEPTED"}function k(){return d("WAWebTos").TosManager.getState(d("WAWebBotTosIds").getBotShortcutTosId())==="ACCEPTED"}function e(a){if(a===d("WAWebBotTypes").BizBotType.BIZ_1P&&!d("WAWebBotGating").isBizBotConsentRequired()||l())return!0;a=c("WAWebUserPrefsStore").getUser(h);if(typeof a!=="number")return!1;var b=d("WAWebBotGating").bizBotConsentDismissalCooldown();if(b<0)return!0;return b===0?!1:d("WATimeUtils").unixTime()-a<b}function l(){return d("WAWebTos").TosManager.getState(d("WAWebBotTosIds").getBizBotTosId())==="ACCEPTED"}function f(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebSetUserDisclosureStageAction").acceptUserDisclosureAction(Number(d("WAWebBotTosIds").getBotAgentTosId()))});return m.apply(this,arguments)}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebSetUserDisclosureStageAction").acceptUserDisclosureAction(Number(d("WAWebBotTosIds").getBotInvokeTosId()))});return o.apply(this,arguments)}function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebSetUserDisclosureStageAction").acceptUserDisclosureAction(Number(d("WAWebBotTosIds").getBotShortcutTosId()))});return q.apply(this,arguments)}function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebSetUserDisclosureStageAction").acceptUserDisclosureAction(Number(d("WAWebBotTosIds").getBizBotTosId()))});return s.apply(this,arguments)}function t(){u(d("WATimeUtils").unixTime())}function u(a){c("WAWebUserPrefsStore").setUser(h,a)}g.hasSeenBotTos=a;g.hasSeenAgentTos=i;g.hasSeenInvokeTos=j;g.hasSeenShortcutTos=k;g.hasSeenBizBotTos=e;g.hasAcceptedBizBotTos=l;g.markSeenAgentTos=f;g.markSeenInvokeTos=n;g.markSeenShortcutTos=p;g.acceptBizBotTos=r;g.dismissBizBotTos=t;g.setBizBotTosDismissalTime=u}),98);
__d("stylex-inject",["CometStyleXSheet","gkx"],(function(a,b,c,d,e,f,g){var h=!1;function a(a,b,e){e===void 0&&(e=null),!h&&c("gkx")("20935")&&a.indexOf("@keyframes")===-1&&(h=!0),d("CometStyleXSheet").rootStyleSheet.insert(a,b,e)}g["default"]=a}),98);
__d("stylex-runtime",["styleq"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return new Error("'stylex."+a+"' should never be called at runtime. It should be compiled away by '@stylexjs/babel-plugin'")},j=function(a){return i("types."+a)};function k(){var a=this;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];if(q.props)return q.props.call(a,c);var f=(h||(h=d("styleq"))).styleq(c),g=f[0],i=f[1],j={};g!=null&&g!==""&&(j.className=g);i!=null&&Object.keys(i).length>0&&(j.style=i);return j}function a(){var a=k.apply(void 0,arguments),b=a.className,c=a.style,d={};b!=null&&b!==""&&(d["class"]=b);c!=null&&Object.keys(c).length>0&&(d.style=Object.keys(c).map(function(a){return a+":"+c[a]+";"}).join(""));return d}function b(a){if(q.create!=null){var b=q.create;return b(a)}throw i("create")}function c(a){if(q.defineVars)return q.defineVars(a);throw i("defineVars")}var l=function(a,b){if(q.createTheme)return q.createTheme(a,b);throw i("createTheme")},m=function(a){if(q.include)return q.include(a);throw i("include")};b=b;c=c;l=l;m=m;var n={angle:function(a){throw j("angle")},color:function(a){throw j("color")},url:function(a){throw j("url")},image:function(a){throw j("image")},integer:function(a){throw j("integer")},lengthPercentage:function(a){throw j("lengthPercentage")},length:function(a){throw j("length")},percentage:function(a){throw j("percentage")},number:function(a){throw j("number")},resolution:function(a){throw j("resolution")},time:function(a){throw j("time")},transformFunction:function(a){throw j("transformFunction")},transformList:function(a){throw j("transformList")}},o=function(a){if(q.keyframes)return q.keyframes(a);throw i("keyframes")},p=function(){if(q.firstThatWorks)return q.firstThatWorks.apply(q,arguments);throw i("firstThatWorks")};function e(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=(h||(h=d("styleq"))).styleq(b),f=e[0];return f}e.props=k;e.attrs=a;e.create=b;e.defineVars=c;e.createTheme=l;e.include=m;e.keyframes=o;e.firstThatWorks=p;e.types=n;var q={};function f(a,b){a==="types"?Object.assign(n,b):q[a]=b}e=e;g.props=k;g.attrs=a;g.create=b;g.defineVars=c;g.createTheme=l;g.include=m;g.types=n;g.keyframes=o;g.firstThatWorks=p;g.__monkey_patch__=f;g.legacyMerge=e}),98);
__d("stylex",["CometStyleXSheet","ExecutionEnvironment","gkx","stylex-inject","stylex-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;!c("gkx")("21107")&&!(i||(i=c("ExecutionEnvironment"))).isInWorker&&d("CometStyleXSheet").rootStyleSheet.injectTheme();function j(a){a=a.reverse();var b={};while(a.length){var c=a.pop();if(Array.isArray(c)){for(var d=c.length-1;d>=0;d--)a.push(c[d]);continue}d=c;if(d!=null&&typeof d==="object")for(c in d){var e=d[c];if(typeof e==="string")b[c]=e;else if(typeof e==="object"){var f;b[c]=(f=b[c])!=null?f:{};Object.assign(b[c],e)}}}return b}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return j(b)}function b(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return(h||(h=d("stylex-runtime"))).legacyMerge(b)}b.compose=a;b.create=(h||(h=d("stylex-runtime"))).legacyMerge.create;b.include=h.legacyMerge.include;b.firstThatWorks=h.legacyMerge.firstThatWorks;b.inject=c("stylex-inject");b.keyframes=h.legacyMerge.keyframes;b.props=h.legacyMerge.props;b.defineVars=h.legacyMerge.defineVars;b.createTheme=h.legacyMerge.createTheme;e=b;g["default"]=e}),102);
__d("WAWebFlexStyles",[],(function(a,b,c,d,e,f,g){var h={displayFlex:{display:"x78zum5",$$css:!0},displayInlineFlex:{display:"x3nfvp2",$$css:!0}},i={nowrap:{flexWrap:"xozqiw3",$$css:!0},wrap:{flexWrap:"x1a02dak",$$css:!0},wrapReverse:{flexWrap:"x8hhl5t",$$css:!0}},j={auto:{alignSelf:"x1oa3qoh",$$css:!0},start:{alignSelf:"xqcrz7y",$$css:!0},center:{alignSelf:"xamitd3",$$css:!0},end:{alignSelf:"xpvyfi4",$$css:!0},stretch:{alignSelf:"xkh2ocl",$$css:!0},baseline:{alignSelf:"xoi2r2e",$$css:!0}},k={auto:{justifySelf:"x12fk4p8",$$css:!0},start:{justifySelf:"xwldb3t",$$css:!0},center:{justifySelf:"x7v7x1q",$$css:!0},end:{justifySelf:"x15bdqvn",$$css:!0},stretch:{justifySelf:"xuy72oy",$$css:!0}},l={start:{justifyContent:"x1nhvcw1",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},end:{justifyContent:"x13a6bvl",$$css:!0},all:{justifyContent:"x1qughib",$$css:!0},around:{justifyContent:"x1l1ennw",$$css:!0},evenly:{justifyContent:"xaw8158",$$css:!0},stretch:{justifyContent:"x1szn6h9",$$css:!0}},m={horizontal:{flexDirection:"x1q0g3np",$$css:!0},vertical:{flexDirection:"xdt5ytf",$$css:!0},horizontalReverse:{flexDirection:"x15zctf7",$$css:!0},verticalReverse:{flexDirection:"x3ieub6",$$css:!0}},n={center:{alignItems:"x6s0dn4",$$css:!0},start:{alignItems:"x1cy8zhl",$$css:!0},end:{alignItems:"xuk3077",$$css:!0},stretch:{alignItems:"x1qjc9v5",$$css:!0},baseline:{alignItems:"x1pha0wt",$$css:!0}};function a(a){var b=a.basis,c=a.order,d=a.grow,e=a.shrink;return{xstyle:[a.flex===!0&&h.displayFlex,a.inline===!0&&h.displayInlineFlex,a.wrap!=null&&i[a.wrap],a.alignSelf!=null&&j[a.alignSelf],a.justifySelf!=null&&k[a.justifySelf],a.flex===!0&&[a.align!=null&&n[a.align],a.justify!=null&&l[a.justify],a.direction!=null&&m[a.direction]]],inline:{flexBasis:typeof b==="string"||b==null?b:b+"px",flexGrow:d,flexShrink:e,order:c}}}g.getFlexStyles=a}),98);
__d("WAWebStructureStyles",[],(function(a,b,c,d,e,f,g){var h={0:{paddingTop:"xexx8yu",$$css:!0},2:{paddingTop:"x1nn3v0j",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0},24:{paddingTop:"x1p5oq8j",$$css:!0},32:{paddingTop:"x1miatn0",$$css:!0},40:{paddingTop:"x13zrc24",$$css:!0},48:{paddingTop:"x4i7bpe",$$css:!0}},i={0:{paddingEnd:"x4uap5",$$css:!0},2:{paddingEnd:"xg83lxy",$$css:!0},4:{paddingEnd:"x150jy0e",$$css:!0},8:{paddingEnd:"x1sxyh0",$$css:!0},12:{paddingEnd:"xn6708d",$$css:!0},16:{paddingEnd:"x1pi30zi",$$css:!0},20:{paddingEnd:"xc73u3c",$$css:!0},24:{paddingEnd:"xxbr6pl",$$css:!0},32:{paddingEnd:"xqmdsaz",$$css:!0},40:{paddingEnd:"xbxaen2",$$css:!0},48:{paddingEnd:"xs022h5",$$css:!0}},j={0:{paddingBottom:"x18d9i69",$$css:!0},2:{paddingBottom:"x1120s5i",$$css:!0},4:{paddingBottom:"xjkvuk6",$$css:!0},8:{paddingBottom:"xwib8y2",$$css:!0},12:{paddingBottom:"xsag5q8",$$css:!0},16:{paddingBottom:"x1l90r2v",$$css:!0},20:{paddingBottom:"xx6bls6",$$css:!0},24:{paddingBottom:"xwxc41k",$$css:!0},32:{paddingBottom:"x1gan7if",$$css:!0},40:{paddingBottom:"x1t1ogtf",$$css:!0},48:{paddingBottom:"x1sgudl8",$$css:!0}},k={0:{paddingStart:"xkhd6sd",$$css:!0},2:{paddingStart:"x1h0ha7o",$$css:!0},4:{paddingStart:"x1e558r4",$$css:!0},8:{paddingStart:"xurb0ha",$$css:!0},12:{paddingStart:"x1ye3gou",$$css:!0},16:{paddingStart:"x1swvt13",$$css:!0},20:{paddingStart:"x5ib6vp",$$css:!0},24:{paddingStart:"xbbxn1n",$$css:!0},32:{paddingStart:"x1xfsgkm",$$css:!0},40:{paddingStart:"x1u72gb5",$$css:!0},48:{paddingStart:"x8aayfw",$$css:!0}},l={0:{marginTop:"xdj266r",$$css:!0},2:{marginTop:"xr9ek0c",$$css:!0},4:{marginTop:"x1gslohp",$$css:!0},8:{marginTop:"x1xmf6yo",$$css:!0},12:{marginTop:"x14vqqas",$$css:!0},16:{marginTop:"xw7yly9",$$css:!0},20:{marginTop:"x1sy10c2",$$css:!0},24:{marginTop:"xqui205",$$css:!0},32:{marginTop:"xg87l8a",$$css:!0},40:{marginTop:"x1tfhste",$$css:!0},48:{marginTop:"xx4vt8u",$$css:!0}},m={0:{marginEnd:"x11i5rnm",$$css:!0},2:{marginEnd:"xfs2ol5",$$css:!0},4:{marginEnd:"xw3qccf",$$css:!0},8:{marginEnd:"x1emribx",$$css:!0},12:{marginEnd:"xq8finb",$$css:!0},16:{marginEnd:"xktsk01",$$css:!0},20:{marginEnd:"x1h5jrl4",$$css:!0},24:{marginEnd:"xqmxbcd",$$css:!0},32:{marginEnd:"x1gja9t",$$css:!0},40:{marginEnd:"x1m39q7l",$$css:!0},48:{marginEnd:"xzy4u6w",$$css:!0}},n={0:{marginBottom:"xat24cr",$$css:!0},2:{marginBottom:"xjpr12u",$$css:!0},4:{marginBottom:"x12nagc",$$css:!0},8:{marginBottom:"x1e56ztr",$$css:!0},12:{marginBottom:"xod5an3",$$css:!0},16:{marginBottom:"x1yztbdb",$$css:!0},20:{marginBottom:"xieb3on",$$css:!0},24:{marginBottom:"x1hq5gj4",$$css:!0},32:{marginBottom:"x1iymm2a",$$css:!0},40:{marginBottom:"x14ler8",$$css:!0},48:{marginBottom:"x13ihpsm",$$css:!0}},o={0:{marginStart:"x1mh8g0r",$$css:!0},2:{marginStart:"x12mruv9",$$css:!0},4:{marginStart:"xsgj6o6",$$css:!0},8:{marginStart:"x1i64zmx",$$css:!0},12:{marginStart:"x16n37ib",$$css:!0},16:{marginStart:"x1d52u69",$$css:!0},20:{marginStart:"xmn8rco",$$css:!0},24:{marginStart:"xmupa6y",$$css:!0},32:{marginStart:"x8vdgqj",$$css:!0},40:{marginStart:"x540dpk",$$css:!0},48:{marginStart:"xmx666k",$$css:!0}},p={0:{rowGap:"xxs79tx",$$css:!0},2:{rowGap:"x1dbijih",$$css:!0},4:{rowGap:"x1r0jzty",$$css:!0},8:{rowGap:"x3pnbk8",$$css:!0},12:{rowGap:"xp1r0qw",$$css:!0},16:{rowGap:"xgpatz3",$$css:!0},20:{rowGap:"x1kb72lq",$$css:!0},24:{rowGap:"x1na6gtj",$$css:!0},32:{rowGap:"xi32cqo",$$css:!0},40:{rowGap:"xe93d63",$$css:!0},48:{rowGap:"xputb5m",$$css:!0}},q={0:{columnGap:"x1o1pmfc",$$css:!0},2:{columnGap:"x1ned7t2",$$css:!0},4:{columnGap:"x17zd0t2",$$css:!0},8:{columnGap:"xfex06f",$$css:!0},12:{columnGap:"xtqikln",$$css:!0},16:{columnGap:"x40hh3e",$$css:!0},20:{columnGap:"x18hwk67",$$css:!0},24:{columnGap:"x1qgv0r9",$$css:!0},32:{columnGap:"xjbmbcv",$$css:!0},40:{columnGap:"x1wh94ac",$$css:!0},48:{columnGap:"xwaa2ar",$$css:!0}};function r(a){switch(a){case 0:return"0";case 2:return"2";case 4:return"4";case 8:return"8";case 12:return"12";case 16:return"16";case 20:return"20";case 24:return"24";case 32:return"32";case 40:return"40";case 48:return"48"}}function s(a){if(a==null)return;return h[r(a)]}function t(a){if(a==null)return;return i[r(a)]}function u(a){if(a==null)return;return j[r(a)]}function v(a){if(a==null)return;return k[r(a)]}function w(a){if(a==null)return;return l[r(a)]}function x(a){if(a==null)return;return m[r(a)]}function y(a){if(a==null)return;return n[r(a)]}function z(a){if(a==null)return;return o[r(a)]}function A(a){return a!=null?p[r(a)]:null}function B(a){return a!=null?q[r(a)]:null}function C(a){a=D(a);if(a!=null)return[A(a[0]),B(a[1])]}function D(a){if(a==null)return;a=Array.isArray(a)?[].concat(a):[a];switch(a.length){case 1:return[a[0],a[0],a[0],a[0]];case 2:return[a[0],a[1],a[0],a[1]];case 3:return[a[0],a[1],a[2],a[1]];case 4:return[a[0],a[1],a[2],a[3]]}}function E(a){a=D(a);if(a!=null)return[s(a[0]),t(a[1]),u(a[2]),v(a[3])]}function F(a){a=D(a);if(a!=null)return[w(a[0]),x(a[1]),y(a[2]),z(a[3])]}function a(a){return[E(a.padding),F(a.margin),s(a.paddingTop),t(a.paddingEnd),u(a.paddingBottom),v(a.paddingStart),w(a.marginTop),x(a.marginEnd),y(a.marginBottom),z(a.marginStart),C(a.gap),A(a.rowGap),B(a.columnGap)]}g.getStructureStyles=a}),98);
__d("minBy",[],(function(a,b,c,d,e,f){var g=function(a,b){return a-b};function a(a,b,c){c=c||g;var d=void 0,e=null;for(var a=a,f=Array.isArray(a),h=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;var j=b(i);(e===null||c(j,e)<0)&&(d=i,e=j)}return d}f["default"]=a}),66);
__d("maxBy",["minBy"],(function(a,b,c,d,e,f,g){var h=function(a,b){return a-b};function a(a,b,d){var e=d||h;return c("minBy")(a,b,function(a,b){return e(b,a)})}g["default"]=a}),98);
__d("WAWebUim",["$InternalEnum","Keys","WALogger","gkx","lodash","maxBy"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[uim] non-escapable item cannot be dismissed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[uim] ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[uim] request dismiss: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[uim] Attempting to set multiple UIM tree roots. Expecting only one."]);k=function(){return a};return a}var l=b("$InternalEnum").Mirrored(["ACTIVE","PASSIVE","INACTIVE","DEAD"]),m=b("$InternalEnum").Mirrored(["LIFECYCLE","UIM_INTERACTION"]);a=function(){function a(){this.verbose=!c("gkx")("26258")}var b=a.prototype;b.setTop=function(a){var b;a&&(a.lastActive=Date.now());a&&this.$1!==a&&a.getState()!==l.INACTIVE&&a.getState()!==l.DEAD&&a.shouldRequestFocus&&a.requestFocus();a&&(a.shouldRequestFocus=!0);((b=this.$1)==null?void 0:b.popable)&&window.removeEventListener("wheel",n.maybePreventScroll,{passive:!1,capture:!0});(a==null?void 0:a.popable)&&window.addEventListener("wheel",n.maybePreventScroll,{passive:!1,capture:!0});this.$1=a};b.getTop=function(){return this.$1};b.refocusTopUie=function(){var a=this;self.setTimeout(function(){a.$1!=null&&document.activeElement===document.body&&a.$1.requestFocus()},0)};return a}();var n=function(){a.maybePreventScroll=function(b){var c;c=(c=a.Manager.getTop())==null?void 0:c.getNode();b.target instanceof HTMLElement&&(c&&!c.contains(b.target)&&(b.preventDefault(),b.stopPropagation()))};function a(b,c){this.shouldRequestFocus=!0,this.parent=c||this,c||(a.Manager.root&&d("WALogger").ERROR(k()).sendLogs("multiple-uim-roots",{sampling:.01}),a.Manager.root=this),this.displayName=b.displayName,this.popable=b.popable,this.escapable=b.escapable,this.requestFocus=b.requestFocus,this.$2=b.requestDismiss,this.getNode=b.getNode,this.dismissOnWindowResize=b.dismissOnWindowResize,this.children=[],this.setState(b.uimState)}var b=a.prototype;b.getState=function(){return this.$1};b.setState=function(b){switch(b){case l.ACTIVE:this.lastActive=Date.now();a.Manager.setTop(this);break;case l.PASSIVE:this.lastActive=Date.now();this.$1!==l.ACTIVE&&a.Manager.setTop(a.findMostRecentlyActiveFocusable());break;case l.INACTIVE:this.$1&&this.$1!==b&&a.Manager.setTop(a.findMostRecentlyActiveFocusable());break;case l.DEAD:break}this.$1=b};b.activate=function(){this.setState(this.$1)};b.branch=function(b){b=new a(b,this);this.children.push(b);a.pprint();return b};b.pop=function(b,d){var e=this;b===void 0&&(b=m.UIM_INTERACTION);d===void 0&&(d=!0);if(this.getState()===l.DEAD)return;this.$3(this.children,b);c("lodash").remove(this.parent.children,function(a){return a===e});b=a.findMostRecentlyActiveFocusable(this);b&&(b.shouldRequestFocus=d);a.Manager.setTop(b);a.pprint()};b.requestDismiss=function(a,b){d("WALogger").LOG(j(),this.displayName),this.$2(a,b)};b.$3=function(a,b){var c=this;a.forEach(function(a){a.setState(l.DEAD),a.requestDismiss(b),c.$3(a.children,b)})};a.findMostRecentlyActiveFocusable=function(b){var c=a.Manager.root;if(!c)return;return o(c,b,function(a){a=a.getState();return a===l.ACTIVE||a===l.PASSIVE})};a.findMostRecentlyActiveDismissable=function(b){var c=a.Manager.root;if(!c)return;return o(c,b,function(a){return a.getState()===l.ACTIVE})||o(c,b,function(a){return a.getState()===l.PASSIVE})};a.pprint=function(b){if(!b&&!a.Manager.verbose)return;b=a.Manager.root;if(!b)return;d("WALogger").LOG(i(),x(b,[]))};return a}();n.State=l;n.Manager=new a();function o(a,b,d){if(!a.children.length)return a;a=a.children.filter(function(a){return a!==b}).map(function(a){return o(a,b,d)}).concat([a]).filter(Boolean).filter(d);return c("maxBy")(a,function(a){return a.lastActive})}var p="\u25b6",q="\u2502",r="\u2514\u2500\u2500",s="\u2514\u2500\u252c",t="\u251c\u2500\u2500",u="\u251c\u2500\u252c";function v(a){switch(a){case l.ACTIVE:return"A";case l.PASSIVE:return"P";case l.INACTIVE:return"I";case l.DEAD:return"D"}}function w(a,b,c,d){var e;c&&d?e=u:c&&!d?e=t:!c&&d?e=s:e=r;a===n.Manager.root&&(e=p);c=a.displayName;a===n.Manager.getTop()&&(c=c+" \u2b25");a="("+v(a.getState())+")"+(d?"\n":"");return""+b.join("")+e+" "+c+" "+a}function x(a,b,c){var d=w(a,b,c,!!a.children.length);return d+a.children.map(function(d,e){var f=c;e=e<a.children.length-1;f=f?b.concat([q+" "]):b.concat(["  "]);return x(d,f,e)}).join("\n")}window.addEventListener("keydown",function(a){if(a.keyCode!==c("Keys").ESC)return;var b=n.Manager.getTop();b=(b==null?void 0:b.getState())===l.ACTIVE?B(b)||b:n.findMostRecentlyActiveDismissable();if(!b)return;b.escapable?(a.stopPropagation(),a.preventDefault(),b.requestDismiss(m.UIM_INTERACTION)):d("WALogger").LOG(h(),b.displayName)},{capture:!0});var y=new WeakSet();window.addEventListener("resize",function(){if(c("gkx")("26256"))return;var a=n.Manager.getTop();a=(a==null?void 0:a.getState())===l.ACTIVE?a:n.findMostRecentlyActiveDismissable();(a==null?void 0:a.dismissOnWindowResize)&&(a==null?void 0:a.escapable)&&!y.has(a)&&(a.requestDismiss(m.UIM_INTERACTION),y.add(a))});var z=null;window.addEventListener("mousedown",function(a){z=null;if(!a.screenX||!a.screenY)return;var b=A(n.Manager.getTop(),a);b&&a.button===2?b.requestDismiss(m.UIM_INTERACTION):z=b},{capture:!0});window.addEventListener("mouseup",function(a){if(!a.screenX||!a.screenY){z=null;return}var b=A(n.Manager.getTop(),a);b&&b===z&&self.setTimeout(function(){return b.requestDismiss(m.UIM_INTERACTION,a)},0);z=null},{capture:!0});function A(a,b){a=a&&a.getState()===l.ACTIVE&&a.popable?a:n.findMostRecentlyActiveDismissable();if(!a||!a.popable)return null;var c=a.getNode();return c&&b.target instanceof Node&&c.contains(b.target)?null:a}function B(a){if(!a)return null;for(var b=a.children,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=B(e);if(e)return e}return a.getState()===l.ACTIVE?a:null}g.UIMState=l;g.DismissReason=m;g.UIM=n}),98);
__d("mergeRefs",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return function(a){b.forEach(function(b){if(b==null)return;if(typeof b==="function"){b(a);return}if(typeof b==="object"){b.current=a;return}c("recoverableViolation")("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(b),"comet_ui")})}}g["default"]=a}),98);
__d("useMergeRefs",["mergeRefs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return i(function(){return c("mergeRefs").apply(void 0,b)},[].concat(b))}g["default"]=a}),98);
__d("useWAWebStableCallback",["react"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a){var b=j(a);b.current=a;a=i(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return b.current==null?void 0:b.current.apply(b,c)},[]);return a}g["default"]=a}),98);
__d("useWAWebOnUnmount",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useEffect;function a(a){var b=c("useWAWebStableCallback")(a);i(function(){return b},[b])}g["default"]=a}),98);
__d("WAWebKeyboardHotKeys.react",["WALogger","WAWebUim","lodash","react","stylex","useMergeRefs","useWAWebOnUnmount"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid HotKey Key: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid HotKey Key: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid HotKey Modifier: ",""]);m=function(){return a};return a}var n=j||c("react"),o=(h||(h=d("react"))).useRef,p={alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},q=c("lodash").values(p),r="+",s={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,ins:45,del:46,meta:224},t={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+"};b=n.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.component;e=e===void 0?"div":e;var f=a.handlers,g=a.children,h=a.xstyle,j=a.onFocus,k=j===void 0?function(a){}:j;j=a.onBlur;var l=j===void 0?function(a){}:j,m=a.onKeyDown;j=babelHelpers.objectWithoutPropertiesLoose(a,["component","handlers","children","xstyle","onFocus","onBlur","onKeyDown"]);var p=o(!1),q=o(null);a=c("useMergeRefs")(b,q);c("useWAWebOnUnmount")(function(){if(p.current){var a=document.activeElement;q.current===a&&d("WAWebUim").UIM.Manager.refocusTopUie()}});b=function(a){m!=null&&m(a);if(!f)return;Object.keys(f).forEach(function(b){var c=f[b];if(c==null)return;b=w(b);var d=b[0];if(!t[d])return;v(b,a)&&c(a)})};var r=function(a){if(!f)return;Object.keys(f).forEach(function(b){var c=f[b];if(c==null)return;b=w(b);var d=b[0];if(t[d])return;v(b,a)&&c(a)})},s=function(a){p.current=!0,k(a)},u=function(a){p.current=!1,l(a)},x=f&&Object.keys(f).some(function(a){return f[a]!=null});return n.jsx(e,babelHelpers["extends"]({ref:a,tabIndex:"-1",onKeyPress:x?r:null,onKeyDown:x?b:null,className:(i||(i=c("stylex")))(h)},j,{onFocus:s,onBlur:u,children:g}))}a.displayName=a.name+" [from "+f.id+"]";function v(a,b){var c=a[0],d=a[1];return c!==b.which?!1:q.every(function(a){return d&&a===d?b.getModifierState(d):!b.getModifierState(a)})}function w(a){a=a.toLowerCase().split(r);var b=a[0];a=a[1];u[b]&&(b=u[b]);u[a]&&(a=u[a]);var c=b,e;a?(c=a,e=p[b],e===void 0?d("WALogger").WARN(m(),b):c===void 0&&d("WALogger").WARN(l(),a)):c===void 0&&d("WALogger").WARN(k(),b);return[s[c]||c.charCodeAt(0),e]}g.SpecialKeyMap=s;g.HotKeys=b}),98);
__d("WAWebKeyboardIsKeyActivation",["WAWebKeyboardHotKeys.react"],(function(a,b,c,d,e,f,g){var h=new Set([d("WAWebKeyboardHotKeys.react").SpecialKeyMap.enter,d("WAWebKeyboardHotKeys.react").SpecialKeyMap.space]);function a(a){var b=0,c=a.charCode;a=a.keyCode;c!=null&&c!==0?b=c:a!=null&&a!==0&&(b=a);return h.has(b)}g["default"]=a}),98);
__d("useWAWebHandlerProps",["WAWebKeyboardIsKeyActivation"],(function(a,b,c,d,e,f,g){function a(a){var b={onMouseLeave:a.onMouseLeave,onMouseEnter:a.onMouseEnter};if(typeof a.role==="string"){var d;b.role=a.role;a.disabled!==!0&&(b.onClick=a.onClick,b.onBlur=a.onBlur,b.onFocus=a.onFocus,b.onClick!=null&&(b.onKeyPress=function(a){c("WAWebKeyboardIsKeyActivation")(a)&&(a.stopPropagation(),a.preventDefault(),a.currentTarget.click())}));b.tabIndex=(d=a.tabIndex)!=null?d:0;b.disabled=(d=a.disabled)!=null?d:void 0;b["aria-disabled"]=b.disabled}return b}g.useHandlerProps=a}),98);
__d("WAWebBox.react",["WAWebFlexStyles","WAWebStructureStyles","react","stylex","useWAWebHandlerProps"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={ellipsis:{overflowX:"x6ikm8r",overflowY:"x10wlt62",textOverflow:"xlyipyv",$$css:!0},nowrap:{whiteSpace:"xuxw1ft",$$css:!0},wrap:{whiteSpace:"x126k92a",$$css:!0},initial:{whiteSpace:"xti2ec1",$$css:!0}};function l(a){return{"aria-label":a.ariaLabel,"aria-pressed":a.ariaPressed,"aria-checked":a.ariaChecked}}b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.as;e=e===void 0?"div":e;var f=a.labelFor,g=a.testid;g=a.textWrap;var h=a.xstyle,m=a.style,n=a.dir,o=a.title,p=a.children,q=d("WAWebFlexStyles").getFlexStyles(a),r=d("WAWebStructureStyles").getStructureStyles(a),s=d("useWAWebHandlerProps").useHandlerProps(a);a=l(a);var t;e==="label"&&(t=f);return j.jsx(e,babelHelpers["extends"]({ref:b,className:(i||(i=c("stylex")))([q.xstyle,r,g!=null&&k[g],h]),style:babelHelpers["extends"]({},m,q.inline),dir:n,title:o,"data-testid":void 0,htmlFor:t},a,s,{children:p}))}a.displayName=a.name+" [from "+f.id+"]";g.Box=b}),98);
__d("WAWebBrokerConnectionManager",["invariant","WANullthrows","WAPromiseTimeout","WAResolvable","err"],(function(a,b,c,d,e,f,g,h){var i=5e3;a=function(){function a(){}var b=a.prototype;b.init=function(){this.$1=null;this.$2=new(d("WAResolvable").Resolvable)();return d("WAPromiseTimeout").promiseTimeout(this.$2.promise,i)};b.isConnected=function(){return this.$1!=null};b.getPort=function(){return this.$1};b.waitForConnection=function(){var a;return c("WANullthrows")((a=this.$2)==null?void 0:a.promise,"ConnectionManager Initialization Promise")};b.connectVia=function(a){if(!this.isConnected())this.$2||h(0,56329),this.$1=a,this.$2.resolve();else throw c("err")("Connection already established")};return a}();b=new a();g["default"]=b}),98);
__d("WAWebBrokerProtocolTypes.flow",[],(function(a,b,c,d,e,f){a="@@handshake";b="@@invoke";c="@@response";f.HANDSHAKE_COMMAND=a;f.INVOCATION_COMMAND=b;f.RESPONSE_COMMAND=c}),66);
__d("WAWebBrokerProtocolHandshake",["invariant","WAWebBrokerProtocolTypes.flow"],(function(a,b,c,d,e,f,g,h){function a(a){return{__command:d("WAWebBrokerProtocolTypes.flow").HANDSHAKE_COMMAND,__port:a}}function b(a){if(a!=null&&a.__command!=null&&a.__command===d("WAWebBrokerProtocolTypes.flow").HANDSHAKE_COMMAND&&a.__port!=null){a.__port instanceof MessagePort||h(0,56355);a=a.__port;return a}}g.buildHandshakePayload=a;g.extractPortFromHandshakePayload=b}),98);
__d("WAWebInvocationId",[],(function(a,b,c,d,e,f){var g=1;function a(){return g++}function b(a){if(a!=null&&typeof a==="number")return a}f.genInvocationId=a;f.extractInvocationId=b}),66);
__d("WAWebBrokerProtocolInvocation",["invariant","WAWebBrokerProtocolTypes.flow","WAWebInvocationId"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.invocationId,c=a.method;a=a.args;return{__id:b,__command:d("WAWebBrokerProtocolTypes.flow").INVOCATION_COMMAND,__method:c,__args:a}}function b(a){if(a!=null&&a.__command===d("WAWebBrokerProtocolTypes.flow").INVOCATION_COMMAND){a.__id||h(0,56278);var b=d("WAWebInvocationId").extractInvocationId(a.__id);b!=null&&a.__method&&typeof a.__method==="string"&&a.__id&&a.__args&&Array.isArray(a.__args)||h(0,56275);a=a;var c=a.__method;a=a.__args;return{method:c,args:a,invocationId:b}}}g.buildInvocationPayload=a;g.unwrapInvocationPayload=b}),98);
__d("WAWebBrokerProtocolResponse",["invariant","WAWebBrokerProtocolTypes.flow","WAWebInvocationId"],(function(a,b,c,d,e,f,g,h){function a(a,b){return{__id:a,__command:d("WAWebBrokerProtocolTypes.flow").RESPONSE_COMMAND,__result:b}}function b(a){if(a!=null&&a.__command===d("WAWebBrokerProtocolTypes.flow").RESPONSE_COMMAND){a.__id!=null||h(0,56278);var b=d("WAWebInvocationId").extractInvocationId(a.__id);b!=null&&Object.prototype.hasOwnProperty.call(a,"__result")||h(0,56331);a=a;a=a.__result;return{result:a,invocationId:b}}}g.buildResponsePayload=a;g.unwrapResponsePayload=b}),98);
__d("WAWebClassnames",[],(function(a,b,c,d,e,f){function g(a){var b=[];a.forEach(function(a){a!=null&&typeof a==="object"?Object.keys(a).forEach(function(c){a[c]&&b.push(c)}):b.push(a)});return b.join(" ")}function a(){var a=[];for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){Array.isArray(b)?a.push(g(b)):b!=null&&typeof b==="object"?Object.keys(b).forEach(function(c){b[c]&&a.push(c)}):a.push(b)});return a.join(" ").trim()}f.classnamesConvertMeToStylexPlease=a}),66);
__d("WAWebFlexItem.react",["WAWebClassnames","WAWebStructureStyles","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={flexItem:{flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",flexBasis:"xdl72j9",order:"x1g77sc7",minWidth:"xeuugli",minHeight:"x2lwn1j",$$css:!0},displayFlex:{display:"x78zum5",$$css:!0},displayInlineFlex:{display:"x3nfvp2",$$css:!0}},l={nowrap:{flexWrap:"xozqiw3",$$css:!0},wrap:{flexWrap:"x1a02dak",$$css:!0},wrapReverse:{flexWrap:"x8hhl5t",$$css:!0}},m={auto:{alignSelf:"x1oa3qoh",$$css:!0},start:{alignSelf:"xqcrz7y",$$css:!0},center:{alignSelf:"xamitd3",$$css:!0},end:{alignSelf:"xpvyfi4",$$css:!0},stretch:{alignSelf:"xkh2ocl",$$css:!0},baseline:{alignSelf:"xoi2r2e",$$css:!0}},n={auto:{justifySelf:"x12fk4p8",$$css:!0},start:{justifySelf:"xwldb3t",$$css:!0},center:{justifySelf:"x7v7x1q",$$css:!0},end:{justifySelf:"x15bdqvn",$$css:!0},stretch:{justifySelf:"xuy72oy",$$css:!0}};b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.testid;e=a.align;e=e===void 0?"auto":e;var f=a.justify;f=f===void 0?"auto":f;var g=a.as;g=g===void 0?"div":g;var h=a.basis,o=a.xstyle,p=a.children,q=a.order,r=a.grow,s=a.shrink,t=a.style,u=a.tabIndex,v=a["data-tab"],w=a.wrap;w=w===void 0?"nowrap":w;var x=a.inline,y=a.isFlexContainer,z=a.className,A=a["aria-label"],B=a.role,C=a.id,D={};typeof h==="string"?D.flexBasis=h:h!=null&&(D.flexBasis=h+"px");r!=null&&(D.flexGrow=r);s!=null&&(D.flexShrink=s);q!=null&&(D.order=q);h=d("WAWebStructureStyles").getStructureStyles(a);return j.jsx(g,{id:C,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((i||(i=c("stylex")))(k.flexItem,y===!0&&k.displayFlex,x===!0&&k.displayInlineFlex,l[w],m[e],n[f],h,o),z),"data-testid":void 0,ref:b,style:babelHelpers["extends"]({},t,D),tabIndex:u,"data-tab":v,"aria-label":A,role:B,children:p})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebFlex.react",["WAWebFlexItem.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={flex:{minWidth:"xeuugli",minHeight:"x2lwn1j",$$css:!0}},k={start:{justifyContent:"x1nhvcw1",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},end:{justifyContent:"x13a6bvl",$$css:!0},all:{justifyContent:"x1qughib",$$css:!0},around:{justifyContent:"x1l1ennw",$$css:!0},evenly:{justifyContent:"xaw8158",$$css:!0},stretch:{justifyContent:"x1szn6h9",$$css:!0}},l={horizontal:{flexDirection:"x1q0g3np",$$css:!0},vertical:{flexDirection:"xdt5ytf",$$css:!0},horizontalReverse:{flexDirection:"x15zctf7",$$css:!0},verticalReverse:{flexDirection:"x3ieub6",$$css:!0}},m={center:{alignItems:"x6s0dn4",$$css:!0},start:{alignItems:"x1cy8zhl",$$css:!0},end:{alignItems:"xuk3077",$$css:!0},stretch:{alignItems:"x1qjc9v5",$$css:!0},baseline:{alignItems:"x1pha0wt",$$css:!0}},n=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var d=a.align;d=d===void 0?"start":d;var e=a.alignSelf,f=a.justify;f=f===void 0?"start":f;var g=a.justifySelf,h=a.direction,n=a.className,o=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["align","alignSelf","justify","justifySelf","direction","className","xstyle"]);return i.jsx(c("WAWebFlexItem.react"),babelHelpers["extends"]({className:n,xstyle:[j.flex,k[f],l[h],m[d],o],align:e,justify:g,isFlexContainer:!0,ref:b},a))}a.displayName=a.name+" [from "+f.id+"]";e=i.forwardRef(b);function b(a,b){a=babelHelpers["extends"]({},a);return i.jsx(n,babelHelpers["extends"]({},a,{direction:"horizontal",ref:b,children:a.children}))}b.displayName=b.name+" [from "+f.id+"]";a=i.forwardRef(d);function d(a,b){a=babelHelpers["extends"]({},a);return i.jsx(n,babelHelpers["extends"]({},a,{direction:"vertical",ref:b,children:a.children}))}d.displayName=d.name+" [from "+f.id+"]";g.FlexItem=c("WAWebFlexItem.react");g.FlexContainer=n;g.FlexRow=e;g.FlexColumn=a}),98);
__d("WAWebSpinner.react",["react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={accent:{stroke:"xfwxex3",$$css:!0},container:{animationName:"x1e112to",animationDuration:"x1c74tu6",animationTimingFunction:"x1esw782",animationIterationCount:"xa4qsjk",zIndex:"xhtitgo",$$css:!0},"default":{stroke:"x63s2mu",$$css:!0},wdsSecondaryLighter:{stroke:"xqq92yc",$$css:!0},highlight:{stroke:"x1s7or02",$$css:!0},progress:{stroke:"x9ss0fe",$$css:!0},"in":{stroke:"x1yzj2yw",$$css:!0},noop:{visibility:"xnpuxes",$$css:!0},out:{stroke:"x14t83b7",$$css:!0},rounded:{strokeLinecap:"x1owpc8m",$$css:!0},square:{strokeLinecap:"x37uqsb",$$css:!0},path:{animationName:"xu41xpa",animationDuration:"xmg6eyc",animationTimingFunction:"x4hg4is",animationIterationCount:"xa4qsjk",strokeDasharray:"xbla1kb",strokeDashoffset:"x1b0o3cz",$$css:!0},solidwhite:{stroke:"xaccaqi",$$css:!0},white:{stroke:"x12iiw5v",$$css:!0},rotate:{transform:"x9tu13d",transformOrigin:"x1bndym7",$$css:!0},transparent:{stroke:"xmy28x3",$$css:!0},incoming:{stroke:"xwvnpb2",$$css:!0},outgoing:{stroke:"xkf4ue8",$$css:!0}},l=20;function m(a){if(a==null)return null;var b=Math.ceil(2*l*Math.PI);return{strokeDasharray:b+" "+b,strokeDashoffset:b-a/100*b}}function n(a,b){if(a==null)return null;a=Math.max(Math.min(a,b),0);return a*100/b}function o(a){var b=a.color,d=a.outgoingMsg,e=a.progress,f=a.stroke,g=a.strokeLinecap;g=g===void 0?"round":g;a=a.viewBoxSide;return j.jsx("circle",{style:m(e),className:(i||(i=c("stylex")))(g==="round"&&k.rounded,g==="square"&&k.square,e==null&&k.path,typeof b!=="string"?b:k[b],d===!1&&k["in"],d===!0&&k.out),cx:a/2,cy:a/2,r:l,fill:"none",strokeWidth:f})}o.displayName=o.name+" [from "+f.id+"]";b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var d=a.size;d=d===void 0?65:d;var e=a.stroke;e=e===void 0?4:e;var f=a.strokeLinecap;f=f===void 0?"round":f;var g=a.progressContainerColor;g=g===void 0?"default":g;var h=a.xstyle,m=a.color;m=m===void 0?"default":m;var p=a.outgoingMsg,q=a.max;q=q===void 0?100:q;var r=a.value;a=a.testid;a=a===void 0?"loading-spinner":a;a=n(r,q);r=2*l+e;q="0 0 "+r+" "+r;return j.jsx("span",{ref:b,"data-testid":void 0,children:j.jsxs("svg",{className:(i||(i=c("stylex")))(a==null&&k.container||k.rotate,h),width:d,height:d,viewBox:q,role:"status",children:[a!=null?j.jsx(o,{viewBoxSide:r,stroke:e,strokeLinecap:f,outgoingMsg:p,color:g,progress:100}):null,j.jsx(o,{progress:a,viewBoxSide:r,stroke:e,strokeLinecap:f,outgoingMsg:p,color:m})]})})}a.displayName=a.name+" [from "+f.id+"]";g.RADIUS=l;g.Spinner=b}),98);
__d("WAWebUISpacing",[],(function(a,b,c,d,e,f,g){a={paddingTopAuto:{paddingTop:"x39aoup",$$css:!0},paddingEndAuto:{paddingEnd:"x1dwsriz",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottomAuto:{paddingBottom:"x1wydec0",$$css:!0},paddingStartAuto:{paddingStart:"xn85ks9",paddingLeft:null,paddingRight:null,$$css:!0},paddingVertAuto:{paddingTop:"x39aoup",paddingBottom:"x1wydec0",$$css:!0},paddingHorizAuto:{paddingStart:"xn85ks9",paddingLeft:null,paddingRight:null,paddingEnd:"x1dwsriz",$$css:!0},paddingAllAuto:{paddingTop:"x39aoup",paddingEnd:"x1dwsriz",paddingBottom:"x1wydec0",paddingStart:"xn85ks9",$$css:!0},paddingTop0:{paddingTop:"xexx8yu",$$css:!0},paddingEnd0:{paddingEnd:"x4uap5",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom0:{paddingBottom:"x18d9i69",$$css:!0},paddingStart0:{paddingStart:"xkhd6sd",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert0:{paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0},paddingHoriz0:{paddingStart:"xkhd6sd",paddingLeft:null,paddingRight:null,paddingEnd:"x4uap5",$$css:!0},paddingAll0:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},paddingTop1:{paddingTop:"x4p5aij",$$css:!0},paddingEnd1:{paddingEnd:"x19um543",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom1:{paddingBottom:"x1j85h84",$$css:!0},paddingStart1:{paddingStart:"x1m6msm",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert1:{paddingTop:"x4p5aij",paddingBottom:"x1j85h84",$$css:!0},paddingHoriz1:{paddingStart:"x1m6msm",paddingLeft:null,paddingRight:null,paddingEnd:"x19um543",$$css:!0},paddingAll1:{paddingTop:"x4p5aij",paddingEnd:"x19um543",paddingBottom:"x1j85h84",paddingStart:"x1m6msm",$$css:!0},paddingTop2:{paddingTop:"x1nn3v0j",$$css:!0},paddingEnd2:{paddingEnd:"xg83lxy",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom2:{paddingBottom:"x1120s5i",$$css:!0},paddingStart2:{paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert2:{paddingTop:"x1nn3v0j",paddingBottom:"x1120s5i",$$css:!0},paddingHoriz2:{paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,paddingEnd:"xg83lxy",$$css:!0},paddingAll2:{paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",$$css:!0},paddingTop3:{paddingTop:"xyqdw3p",$$css:!0},paddingEnd3:{paddingEnd:"x10ogl3i",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom3:{paddingBottom:"xg8j3zb",$$css:!0},paddingStart3:{paddingStart:"x1k2j06m",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert3:{paddingTop:"xyqdw3p",paddingBottom:"xg8j3zb",$$css:!0},paddingHoriz3:{paddingStart:"x1k2j06m",paddingLeft:null,paddingRight:null,paddingEnd:"x10ogl3i",$$css:!0},paddingAll3:{paddingTop:"xyqdw3p",paddingEnd:"x10ogl3i",paddingBottom:"xg8j3zb",paddingStart:"x1k2j06m",$$css:!0},paddingTop4:{paddingTop:"x1iorvi4",$$css:!0},paddingEnd4:{paddingEnd:"x150jy0e",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom4:{paddingBottom:"xjkvuk6",$$css:!0},paddingStart4:{paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},paddingHoriz4:{paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,paddingEnd:"x150jy0e",$$css:!0},paddingAll4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},paddingTop5:{paddingTop:"x123j3cw",$$css:!0},paddingEnd5:{paddingEnd:"x1mpkggp",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom5:{paddingBottom:"xs9asl8",$$css:!0},paddingStart5:{paddingStart:"x1t2a60a",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert5:{paddingTop:"x123j3cw",paddingBottom:"xs9asl8",$$css:!0},paddingHoriz5:{paddingStart:"x1t2a60a",paddingLeft:null,paddingRight:null,paddingEnd:"x1mpkggp",$$css:!0},paddingAll5:{paddingTop:"x123j3cw",paddingEnd:"x1mpkggp",paddingBottom:"xs9asl8",paddingStart:"x1t2a60a",$$css:!0},paddingTop6:{paddingTop:"x1yrsyyn",$$css:!0},paddingEnd6:{paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom6:{paddingBottom:"x10b6aqq",$$css:!0},paddingStart6:{paddingStart:"x16hj40l",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert6:{paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",$$css:!0},paddingHoriz6:{paddingStart:"x16hj40l",paddingLeft:null,paddingRight:null,paddingEnd:"xsyo7zv",$$css:!0},paddingAll6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},paddingTop7:{paddingTop:"xm7lytj",$$css:!0},paddingEnd7:{paddingEnd:"x2qib4z",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom7:{paddingBottom:"x1ykpatu",$$css:!0},paddingStart7:{paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert7:{paddingTop:"xm7lytj",paddingBottom:"x1ykpatu",$$css:!0},paddingHoriz7:{paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,paddingEnd:"x2qib4z",$$css:!0},paddingAll7:{paddingTop:"xm7lytj",paddingEnd:"x2qib4z",paddingBottom:"x1ykpatu",paddingStart:"xcu9agk",$$css:!0},paddingTop8:{paddingTop:"x1y1aw1k",$$css:!0},paddingEnd8:{paddingEnd:"x1sxyh0",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom8:{paddingBottom:"xwib8y2",$$css:!0},paddingStart8:{paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},paddingHoriz8:{paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",$$css:!0},paddingAll8:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},paddingTop9:{paddingTop:"x96k8nx",$$css:!0},paddingEnd9:{paddingEnd:"xpvbz4a",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom9:{paddingBottom:"xdvlbce",$$css:!0},paddingStart9:{paddingStart:"xohu8s8",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert9:{paddingTop:"x96k8nx",paddingBottom:"xdvlbce",$$css:!0},paddingHoriz9:{paddingStart:"xohu8s8",paddingLeft:null,paddingRight:null,paddingEnd:"xpvbz4a",$$css:!0},paddingAll9:{paddingTop:"x96k8nx",paddingEnd:"xpvbz4a",paddingBottom:"xdvlbce",paddingStart:"xohu8s8",$$css:!0},paddingTop10:{paddingTop:"x889kno",$$css:!0},paddingEnd10:{paddingEnd:"x1iji9kk",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom10:{paddingBottom:"x1a8lsjc",$$css:!0},paddingStart10:{paddingStart:"x1sln4lm",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert10:{paddingTop:"x889kno",paddingBottom:"x1a8lsjc",$$css:!0},paddingHoriz10:{paddingStart:"x1sln4lm",paddingLeft:null,paddingRight:null,paddingEnd:"x1iji9kk",$$css:!0},paddingAll10:{paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm",$$css:!0},paddingTop12:{paddingTop:"xz9dl7a",$$css:!0},paddingEnd12:{paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom12:{paddingBottom:"xsag5q8",$$css:!0},paddingStart12:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},paddingHoriz12:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",$$css:!0},paddingAll12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},paddingTop13:{paddingTop:"x1d0ri9u",$$css:!0},paddingEnd13:{paddingEnd:"xho0xa1",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom13:{paddingBottom:"x1ug4tga",$$css:!0},paddingStart13:{paddingStart:"x1vobaek",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert13:{paddingTop:"x1d0ri9u",paddingBottom:"x1ug4tga",$$css:!0},paddingHoriz13:{paddingStart:"x1vobaek",paddingLeft:null,paddingRight:null,paddingEnd:"xho0xa1",$$css:!0},paddingAll13:{paddingTop:"x1d0ri9u",paddingEnd:"xho0xa1",paddingBottom:"x1ug4tga",paddingStart:"x1vobaek",$$css:!0},paddingTop14:{paddingTop:"xyinxu5",$$css:!0},paddingEnd14:{paddingEnd:"xmns6w2",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom14:{paddingBottom:"x1g2khh7",$$css:!0},paddingStart14:{paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert14:{paddingTop:"xyinxu5",paddingBottom:"x1g2khh7",$$css:!0},paddingHoriz14:{paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,paddingEnd:"xmns6w2",$$css:!0},paddingAll14:{paddingTop:"xyinxu5",paddingEnd:"xmns6w2",paddingBottom:"x1g2khh7",paddingStart:"xpkgp8e",$$css:!0},paddingTop15:{paddingTop:"xqy66fx",$$css:!0},paddingEnd15:{paddingEnd:"x14uny0o",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom15:{paddingBottom:"xr1496l",$$css:!0},paddingStart15:{paddingStart:"xvpee5o",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert15:{paddingTop:"xqy66fx",paddingBottom:"xr1496l",$$css:!0},paddingHoriz15:{paddingStart:"xvpee5o",paddingLeft:null,paddingRight:null,paddingEnd:"x14uny0o",$$css:!0},paddingAll15:{paddingTop:"xqy66fx",paddingEnd:"x14uny0o",paddingBottom:"xr1496l",paddingStart:"xvpee5o",$$css:!0},paddingTop16:{paddingTop:"xyamay9",$$css:!0},paddingEnd16:{paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom16:{paddingBottom:"x1l90r2v",$$css:!0},paddingStart16:{paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},paddingHoriz16:{paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,paddingEnd:"x1pi30zi",$$css:!0},paddingAll16:{paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",$$css:!0},paddingTop18:{paddingTop:"x109j2v6",$$css:!0},paddingEnd18:{paddingEnd:"x1ou2tus",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom18:{paddingBottom:"x1hhzuzn",$$css:!0},paddingStart18:{paddingStart:"x1egjynq",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert18:{paddingTop:"x109j2v6",paddingBottom:"x1hhzuzn",$$css:!0},paddingHoriz18:{paddingStart:"x1egjynq",paddingLeft:null,paddingRight:null,paddingEnd:"x1ou2tus",$$css:!0},paddingAll18:{paddingTop:"x109j2v6",paddingEnd:"x1ou2tus",paddingBottom:"x1hhzuzn",paddingStart:"x1egjynq",$$css:!0},paddingTop20:{paddingTop:"x1cnzs8",$$css:!0},paddingEnd20:{paddingEnd:"xc73u3c",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom20:{paddingBottom:"xx6bls6",$$css:!0},paddingStart20:{paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0},paddingHoriz20:{paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",$$css:!0},paddingAll20:{paddingTop:"x1cnzs8",paddingEnd:"xc73u3c",paddingBottom:"xx6bls6",paddingStart:"x5ib6vp",$$css:!0},paddingTop24:{paddingTop:"x1p5oq8j",$$css:!0},paddingEnd24:{paddingEnd:"xxbr6pl",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom24:{paddingBottom:"xwxc41k",$$css:!0},paddingStart24:{paddingStart:"xbbxn1n",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert24:{paddingTop:"x1p5oq8j",paddingBottom:"xwxc41k",$$css:!0},paddingHoriz24:{paddingStart:"xbbxn1n",paddingLeft:null,paddingRight:null,paddingEnd:"xxbr6pl",$$css:!0},paddingAll24:{paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",$$css:!0},paddingTop25:{paddingTop:"x9tmck8",$$css:!0},paddingEnd25:{paddingEnd:"xl521sm",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom25:{paddingBottom:"x156go17",$$css:!0},paddingStart25:{paddingStart:"x9mfa4r",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert25:{paddingTop:"x9tmck8",paddingBottom:"x156go17",$$css:!0},paddingHoriz25:{paddingStart:"x9mfa4r",paddingLeft:null,paddingRight:null,paddingEnd:"xl521sm",$$css:!0},paddingAll25:{paddingTop:"x9tmck8",paddingEnd:"xl521sm",paddingBottom:"x156go17",paddingStart:"x9mfa4r",$$css:!0},paddingTop28:{paddingTop:"x7sb2j6",$$css:!0},paddingEnd28:{paddingEnd:"xhepvqq",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom28:{paddingBottom:"x84yb8i",$$css:!0},paddingStart28:{paddingStart:"x7ggn4r",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert28:{paddingTop:"x7sb2j6",paddingBottom:"x84yb8i",$$css:!0},paddingHoriz28:{paddingStart:"x7ggn4r",paddingLeft:null,paddingRight:null,paddingEnd:"xhepvqq",$$css:!0},paddingAll28:{paddingTop:"x7sb2j6",paddingEnd:"xhepvqq",paddingBottom:"x84yb8i",paddingStart:"x7ggn4r",$$css:!0},paddingTop30:{paddingTop:"x9orja2",$$css:!0},paddingEnd30:{paddingEnd:"x6x52a7",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom30:{paddingBottom:"xbaz6xv",$$css:!0},paddingStart30:{paddingStart:"xxpdul3",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert30:{paddingTop:"x9orja2",paddingBottom:"xbaz6xv",$$css:!0},paddingHoriz30:{paddingStart:"xxpdul3",paddingLeft:null,paddingRight:null,paddingEnd:"x6x52a7",$$css:!0},paddingAll30:{paddingTop:"x9orja2",paddingEnd:"x6x52a7",paddingBottom:"xbaz6xv",paddingStart:"xxpdul3",$$css:!0},paddingTop32:{paddingTop:"x1miatn0",$$css:!0},paddingEnd32:{paddingEnd:"xqmdsaz",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom32:{paddingBottom:"x1gan7if",$$css:!0},paddingStart32:{paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert32:{paddingTop:"x1miatn0",paddingBottom:"x1gan7if",$$css:!0},paddingHoriz32:{paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",$$css:!0},paddingAll32:{paddingTop:"x1miatn0",paddingEnd:"xqmdsaz",paddingBottom:"x1gan7if",paddingStart:"x1xfsgkm",$$css:!0},paddingTop36:{paddingTop:"xijc0j3",$$css:!0},paddingEnd36:{paddingEnd:"x11eofan",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom36:{paddingBottom:"xq1608w",$$css:!0},paddingStart36:{paddingStart:"x12wi22r",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert36:{paddingTop:"xijc0j3",paddingBottom:"xq1608w",$$css:!0},paddingHoriz36:{paddingStart:"x12wi22r",paddingLeft:null,paddingRight:null,paddingEnd:"x11eofan",$$css:!0},paddingAll36:{paddingTop:"xijc0j3",paddingEnd:"x11eofan",paddingBottom:"xq1608w",paddingStart:"x12wi22r",$$css:!0},paddingTop40:{paddingTop:"x13zrc24",$$css:!0},paddingEnd40:{paddingEnd:"xbxaen2",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom40:{paddingBottom:"x1t1ogtf",$$css:!0},paddingStart40:{paddingStart:"x1u72gb5",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert40:{paddingTop:"x13zrc24",paddingBottom:"x1t1ogtf",$$css:!0},paddingHoriz40:{paddingStart:"x1u72gb5",paddingLeft:null,paddingRight:null,paddingEnd:"xbxaen2",$$css:!0},paddingAll40:{paddingTop:"x13zrc24",paddingEnd:"xbxaen2",paddingBottom:"x1t1ogtf",paddingStart:"x1u72gb5",$$css:!0},paddingTop48:{paddingTop:"x4i7bpe",$$css:!0},paddingEnd48:{paddingEnd:"xs022h5",paddingLeft:null,paddingRight:null,$$css:!0},paddingBottom48:{paddingBottom:"x1sgudl8",$$css:!0},paddingStart48:{paddingStart:"x8aayfw",paddingLeft:null,paddingRight:null,$$css:!0},paddingVert48:{paddingTop:"x4i7bpe",paddingBottom:"x1sgudl8",$$css:!0},paddingHoriz48:{paddingStart:"x8aayfw",paddingLeft:null,paddingRight:null,paddingEnd:"xs022h5",$$css:!0},paddingAll48:{paddingTop:"x4i7bpe",paddingEnd:"xs022h5",paddingBottom:"x1sgudl8",paddingStart:"x8aayfw",$$css:!0},marginTopAuto:{marginTop:"xr1yuqi",$$css:!0},marginEndAuto:{marginEnd:"xkrivgy",marginLeft:null,marginRight:null,$$css:!0},marginBottomAuto:{marginBottom:"x4ii5y1",$$css:!0},marginStartAuto:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,$$css:!0},marginVertAuto:{marginTop:"xr1yuqi",marginBottom:"x4ii5y1",$$css:!0},marginHorizAuto:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,marginEnd:"xkrivgy",$$css:!0},marginAllAuto:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},marginTop0:{marginTop:"xdj266r",$$css:!0},marginEnd0:{marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},marginBottom0:{marginBottom:"xat24cr",$$css:!0},marginStart0:{marginStart:"x1mh8g0r",marginLeft:null,marginRight:null,$$css:!0},marginVert0:{marginTop:"xdj266r",marginBottom:"xat24cr",$$css:!0},marginHoriz0:{marginStart:"x1mh8g0r",marginLeft:null,marginRight:null,marginEnd:"x11i5rnm",$$css:!0},marginAll0:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},marginTop1:{marginTop:"xvijh9v",$$css:!0},marginEnd1:{marginEnd:"xhhsvwb",marginLeft:null,marginRight:null,$$css:!0},marginBottom1:{marginBottom:"x1ty9z65",$$css:!0},marginStart1:{marginStart:"xgzva0m",marginLeft:null,marginRight:null,$$css:!0},marginVert1:{marginTop:"xvijh9v",marginBottom:"x1ty9z65",$$css:!0},marginHoriz1:{marginStart:"xgzva0m",marginLeft:null,marginRight:null,marginEnd:"xhhsvwb",$$css:!0},marginAll1:{marginTop:"xvijh9v",marginEnd:"xhhsvwb",marginBottom:"x1ty9z65",marginStart:"xgzva0m",$$css:!0},marginTop2:{marginTop:"xr9ek0c",$$css:!0},marginEnd2:{marginEnd:"xfs2ol5",marginLeft:null,marginRight:null,$$css:!0},marginBottom2:{marginBottom:"xjpr12u",$$css:!0},marginStart2:{marginStart:"x12mruv9",marginLeft:null,marginRight:null,$$css:!0},marginVert2:{marginTop:"xr9ek0c",marginBottom:"xjpr12u",$$css:!0},marginHoriz2:{marginStart:"x12mruv9",marginLeft:null,marginRight:null,marginEnd:"xfs2ol5",$$css:!0},marginAll2:{marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",$$css:!0},marginTop3:{marginTop:"x7r5mf7",$$css:!0},marginEnd3:{marginEnd:"xeyog9w",marginLeft:null,marginRight:null,$$css:!0},marginBottom3:{marginBottom:"xahult9",$$css:!0},marginStart3:{marginStart:"x1w4ip6v",marginLeft:null,marginRight:null,$$css:!0},marginVert3:{marginTop:"x7r5mf7",marginBottom:"xahult9",$$css:!0},marginHoriz3:{marginStart:"x1w4ip6v",marginLeft:null,marginRight:null,marginEnd:"xeyog9w",$$css:!0},marginAll3:{marginTop:"x7r5mf7",marginEnd:"xeyog9w",marginBottom:"xahult9",marginStart:"x1w4ip6v",$$css:!0},marginTop4:{marginTop:"x1gslohp",$$css:!0},marginEnd4:{marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},marginBottom4:{marginBottom:"x12nagc",$$css:!0},marginStart4:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,$$css:!0},marginVert4:{marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0},marginHoriz4:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",$$css:!0},marginAll4:{marginTop:"x1gslohp",marginEnd:"xw3qccf",marginBottom:"x12nagc",marginStart:"xsgj6o6",$$css:!0},marginTop5:{marginTop:"x1ok221b",$$css:!0},marginEnd5:{marginEnd:"x1t4t16n",marginLeft:null,marginRight:null,$$css:!0},marginBottom5:{marginBottom:"xu06os2",$$css:!0},marginStart5:{marginStart:"x8j4wrb",marginLeft:null,marginRight:null,$$css:!0},marginVert5:{marginTop:"x1ok221b",marginBottom:"xu06os2",$$css:!0},marginHoriz5:{marginStart:"x8j4wrb",marginLeft:null,marginRight:null,marginEnd:"x1t4t16n",$$css:!0},marginAll5:{marginTop:"x1ok221b",marginEnd:"x1t4t16n",marginBottom:"xu06os2",marginStart:"x8j4wrb",$$css:!0},marginTop6:{marginTop:"x1k70j0n",$$css:!0},marginEnd6:{marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,$$css:!0},marginBottom6:{marginBottom:"xzueoph",$$css:!0},marginStart6:{marginStart:"x1mnrxsn",marginLeft:null,marginRight:null,$$css:!0},marginVert6:{marginTop:"x1k70j0n",marginBottom:"xzueoph",$$css:!0},marginHoriz6:{marginStart:"x1mnrxsn",marginLeft:null,marginRight:null,marginEnd:"x1w0mnb",$$css:!0},marginAll6:{marginTop:"x1k70j0n",marginEnd:"x1w0mnb",marginBottom:"xzueoph",marginStart:"x1mnrxsn",$$css:!0},marginTop7:{marginTop:"x1rhet7l",$$css:!0},marginEnd7:{marginEnd:"x1hwekxz",marginLeft:null,marginRight:null,$$css:!0},marginBottom7:{marginBottom:"xwoyzhm",$$css:!0},marginStart7:{marginStart:"xnfveip",marginLeft:null,marginRight:null,$$css:!0},marginVert7:{marginTop:"x1rhet7l",marginBottom:"xwoyzhm",$$css:!0},marginHoriz7:{marginStart:"xnfveip",marginLeft:null,marginRight:null,marginEnd:"x1hwekxz",$$css:!0},marginAll7:{marginTop:"x1rhet7l",marginEnd:"x1hwekxz",marginBottom:"xwoyzhm",marginStart:"xnfveip",$$css:!0},marginTop8:{marginTop:"x1xmf6yo",$$css:!0},marginEnd8:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,$$css:!0},marginBottom8:{marginBottom:"x1e56ztr",$$css:!0},marginStart8:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,$$css:!0},marginVert8:{marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",$$css:!0},marginHoriz8:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",$$css:!0},marginAll8:{marginTop:"x1xmf6yo",marginEnd:"x1emribx",marginBottom:"x1e56ztr",marginStart:"x1i64zmx",$$css:!0},marginTop9:{marginTop:"xzbgwbi",$$css:!0},marginEnd9:{marginEnd:"x1ffeobu",marginLeft:null,marginRight:null,$$css:!0},marginBottom9:{marginBottom:"xfitlp5",$$css:!0},marginStart9:{marginStart:"x1cxxrxm",marginLeft:null,marginRight:null,$$css:!0},marginVert9:{marginTop:"xzbgwbi",marginBottom:"xfitlp5",$$css:!0},marginHoriz9:{marginStart:"x1cxxrxm",marginLeft:null,marginRight:null,marginEnd:"x1ffeobu",$$css:!0},marginAll9:{marginTop:"xzbgwbi",marginEnd:"x1ffeobu",marginBottom:"xfitlp5",marginStart:"x1cxxrxm",$$css:!0},marginTop10:{marginTop:"x1anpbxc",$$css:!0},marginEnd10:{marginEnd:"xmo9yow",marginLeft:null,marginRight:null,$$css:!0},marginBottom10:{marginBottom:"xyorhqc",$$css:!0},marginStart10:{marginStart:"x17adc0v",marginLeft:null,marginRight:null,$$css:!0},marginVert10:{marginTop:"x1anpbxc",marginBottom:"xyorhqc",$$css:!0},marginHoriz10:{marginStart:"x17adc0v",marginLeft:null,marginRight:null,marginEnd:"xmo9yow",$$css:!0},marginAll10:{marginTop:"x1anpbxc",marginEnd:"xmo9yow",marginBottom:"xyorhqc",marginStart:"x17adc0v",$$css:!0},marginTop12:{marginTop:"x14vqqas",$$css:!0},marginEnd12:{marginEnd:"xq8finb",marginLeft:null,marginRight:null,$$css:!0},marginBottom12:{marginBottom:"xod5an3",$$css:!0},marginStart12:{marginStart:"x16n37ib",marginLeft:null,marginRight:null,$$css:!0},marginVert12:{marginTop:"x14vqqas",marginBottom:"xod5an3",$$css:!0},marginHoriz12:{marginStart:"x16n37ib",marginLeft:null,marginRight:null,marginEnd:"xq8finb",$$css:!0},marginAll12:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},marginTop13:{marginTop:"xk9mzb7",$$css:!0},marginEnd13:{marginEnd:"x11jkl0l",marginLeft:null,marginRight:null,$$css:!0},marginBottom13:{marginBottom:"x1sfzahb",$$css:!0},marginStart13:{marginStart:"x182zwpg",marginLeft:null,marginRight:null,$$css:!0},marginVert13:{marginTop:"xk9mzb7",marginBottom:"x1sfzahb",$$css:!0},marginHoriz13:{marginStart:"x182zwpg",marginLeft:null,marginRight:null,marginEnd:"x11jkl0l",$$css:!0},marginAll13:{marginTop:"xk9mzb7",marginEnd:"x11jkl0l",marginBottom:"x1sfzahb",marginStart:"x182zwpg",$$css:!0},marginTop14:{marginTop:"x1hmvnq2",$$css:!0},marginEnd14:{marginEnd:"xr12ei9",marginLeft:null,marginRight:null,$$css:!0},marginBottom14:{marginBottom:"x1u7kmwd",$$css:!0},marginStart14:{marginStart:"xwycmqc",marginLeft:null,marginRight:null,$$css:!0},marginVert14:{marginTop:"x1hmvnq2",marginBottom:"x1u7kmwd",$$css:!0},marginHoriz14:{marginStart:"xwycmqc",marginLeft:null,marginRight:null,marginEnd:"xr12ei9",$$css:!0},marginAll14:{marginTop:"x1hmvnq2",marginEnd:"xr12ei9",marginBottom:"x1u7kmwd",marginStart:"xwycmqc",$$css:!0},marginTop15:{marginTop:"xcxhlts",$$css:!0},marginEnd15:{marginEnd:"x1jqylkn",marginLeft:null,marginRight:null,$$css:!0},marginBottom15:{marginBottom:"x1fqp7bg",$$css:!0},marginStart15:{marginStart:"x13ibhcj",marginLeft:null,marginRight:null,$$css:!0},marginVert15:{marginTop:"xcxhlts",marginBottom:"x1fqp7bg",$$css:!0},marginHoriz15:{marginStart:"x13ibhcj",marginLeft:null,marginRight:null,marginEnd:"x1jqylkn",$$css:!0},marginAll15:{marginTop:"xcxhlts",marginEnd:"x1jqylkn",marginBottom:"x1fqp7bg",marginStart:"x13ibhcj",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0},marginEnd16:{marginEnd:"xktsk01",marginLeft:null,marginRight:null,$$css:!0},marginBottom16:{marginBottom:"x1yztbdb",$$css:!0},marginStart16:{marginStart:"x1d52u69",marginLeft:null,marginRight:null,$$css:!0},marginVert16:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",$$css:!0},marginHoriz16:{marginStart:"x1d52u69",marginLeft:null,marginRight:null,marginEnd:"xktsk01",$$css:!0},marginAll16:{marginTop:"xw7yly9",marginEnd:"xktsk01",marginBottom:"x1yztbdb",marginStart:"x1d52u69",$$css:!0},marginTop18:{marginTop:"xhrpt6u",$$css:!0},marginEnd18:{marginEnd:"xpdqn1h",marginLeft:null,marginRight:null,$$css:!0},marginBottom18:{marginBottom:"x1c436fg",$$css:!0},marginStart18:{marginStart:"x1sliqq",marginLeft:null,marginRight:null,$$css:!0},marginVert18:{marginTop:"xhrpt6u",marginBottom:"x1c436fg",$$css:!0},marginHoriz18:{marginStart:"x1sliqq",marginLeft:null,marginRight:null,marginEnd:"xpdqn1h",$$css:!0},marginAll18:{marginTop:"xhrpt6u",marginEnd:"xpdqn1h",marginBottom:"x1c436fg",marginStart:"x1sliqq",$$css:!0},marginTop20:{marginTop:"x1sy10c2",$$css:!0},marginEnd20:{marginEnd:"x1h5jrl4",marginLeft:null,marginRight:null,$$css:!0},marginBottom20:{marginBottom:"xieb3on",$$css:!0},marginStart20:{marginStart:"xmn8rco",marginLeft:null,marginRight:null,$$css:!0},marginVert20:{marginTop:"x1sy10c2",marginBottom:"xieb3on",$$css:!0},marginHoriz20:{marginStart:"xmn8rco",marginLeft:null,marginRight:null,marginEnd:"x1h5jrl4",$$css:!0},marginAll20:{marginTop:"x1sy10c2",marginEnd:"x1h5jrl4",marginBottom:"xieb3on",marginStart:"xmn8rco",$$css:!0},marginTop24:{marginTop:"xqui205",$$css:!0},marginEnd24:{marginEnd:"xqmxbcd",marginLeft:null,marginRight:null,$$css:!0},marginBottom24:{marginBottom:"x1hq5gj4",$$css:!0},marginStart24:{marginStart:"xmupa6y",marginLeft:null,marginRight:null,$$css:!0},marginVert24:{marginTop:"xqui205",marginBottom:"x1hq5gj4",$$css:!0},marginHoriz24:{marginStart:"xmupa6y",marginLeft:null,marginRight:null,marginEnd:"xqmxbcd",$$css:!0},marginAll24:{marginTop:"xqui205",marginEnd:"xqmxbcd",marginBottom:"x1hq5gj4",marginStart:"xmupa6y",$$css:!0},marginTop25:{marginTop:"x1e1m7ul",$$css:!0},marginEnd25:{marginEnd:"xm7vg67",marginLeft:null,marginRight:null,$$css:!0},marginBottom25:{marginBottom:"x1ibc7va",$$css:!0},marginStart25:{marginStart:"x1cf2tqg",marginLeft:null,marginRight:null,$$css:!0},marginVert25:{marginTop:"x1e1m7ul",marginBottom:"x1ibc7va",$$css:!0},marginHoriz25:{marginStart:"x1cf2tqg",marginLeft:null,marginRight:null,marginEnd:"xm7vg67",$$css:!0},marginAll25:{marginTop:"x1e1m7ul",marginEnd:"xm7vg67",marginBottom:"x1ibc7va",marginStart:"x1cf2tqg",$$css:!0},marginTop28:{marginTop:"xjv05ge",$$css:!0},marginEnd28:{marginEnd:"xqmgo2j",marginLeft:null,marginRight:null,$$css:!0},marginBottom28:{marginBottom:"x1chd833",$$css:!0},marginStart28:{marginStart:"x1iedhe",marginLeft:null,marginRight:null,$$css:!0},marginVert28:{marginTop:"xjv05ge",marginBottom:"x1chd833",$$css:!0},marginHoriz28:{marginStart:"x1iedhe",marginLeft:null,marginRight:null,marginEnd:"xqmgo2j",$$css:!0},marginAll28:{marginTop:"xjv05ge",marginEnd:"xqmgo2j",marginBottom:"x1chd833",marginStart:"x1iedhe",$$css:!0},marginTop30:{marginTop:"x11fxgd9",$$css:!0},marginEnd30:{marginEnd:"x5th0yj",marginLeft:null,marginRight:null,$$css:!0},marginBottom30:{marginBottom:"x4n8cb0",$$css:!0},marginStart30:{marginStart:"x8zvzrc",marginLeft:null,marginRight:null,$$css:!0},marginVert30:{marginTop:"x11fxgd9",marginBottom:"x4n8cb0",$$css:!0},marginHoriz30:{marginStart:"x8zvzrc",marginLeft:null,marginRight:null,marginEnd:"x5th0yj",$$css:!0},marginAll30:{marginTop:"x11fxgd9",marginEnd:"x5th0yj",marginBottom:"x4n8cb0",marginStart:"x8zvzrc",$$css:!0},marginTop32:{marginTop:"xg87l8a",$$css:!0},marginEnd32:{marginEnd:"x1gja9t",marginLeft:null,marginRight:null,$$css:!0},marginBottom32:{marginBottom:"x1iymm2a",$$css:!0},marginStart32:{marginStart:"x8vdgqj",marginLeft:null,marginRight:null,$$css:!0},marginVert32:{marginTop:"xg87l8a",marginBottom:"x1iymm2a",$$css:!0},marginHoriz32:{marginStart:"x8vdgqj",marginLeft:null,marginRight:null,marginEnd:"x1gja9t",$$css:!0},marginAll32:{marginTop:"xg87l8a",marginEnd:"x1gja9t",marginBottom:"x1iymm2a",marginStart:"x8vdgqj",$$css:!0},marginTop36:{marginTop:"xseo6mj",$$css:!0},marginEnd36:{marginEnd:"x1krglpp",marginLeft:null,marginRight:null,$$css:!0},marginBottom36:{marginBottom:"xvl6max",$$css:!0},marginStart36:{marginStart:"x1lpp0xw",marginLeft:null,marginRight:null,$$css:!0},marginVert36:{marginTop:"xseo6mj",marginBottom:"xvl6max",$$css:!0},marginHoriz36:{marginStart:"x1lpp0xw",marginLeft:null,marginRight:null,marginEnd:"x1krglpp",$$css:!0},marginAll36:{marginTop:"xseo6mj",marginEnd:"x1krglpp",marginBottom:"xvl6max",marginStart:"x1lpp0xw",$$css:!0},marginTop40:{marginTop:"x1tfhste",$$css:!0},marginEnd40:{marginEnd:"x1m39q7l",marginLeft:null,marginRight:null,$$css:!0},marginBottom40:{marginBottom:"x14ler8",$$css:!0},marginStart40:{marginStart:"x540dpk",marginLeft:null,marginRight:null,$$css:!0},marginVert40:{marginTop:"x1tfhste",marginBottom:"x14ler8",$$css:!0},marginHoriz40:{marginStart:"x540dpk",marginLeft:null,marginRight:null,marginEnd:"x1m39q7l",$$css:!0},marginAll40:{marginTop:"x1tfhste",marginEnd:"x1m39q7l",marginBottom:"x14ler8",marginStart:"x540dpk",$$css:!0},marginTop48:{marginTop:"xx4vt8u",$$css:!0},marginEnd48:{marginEnd:"xzy4u6w",marginLeft:null,marginRight:null,$$css:!0},marginBottom48:{marginBottom:"x13ihpsm",$$css:!0},marginStart48:{marginStart:"xmx666k",marginLeft:null,marginRight:null,$$css:!0},marginVert48:{marginTop:"xx4vt8u",marginBottom:"x13ihpsm",$$css:!0},marginHoriz48:{marginStart:"xmx666k",marginLeft:null,marginRight:null,marginEnd:"xzy4u6w",$$css:!0},marginAll48:{marginTop:"xx4vt8u",marginEnd:"xzy4u6w",marginBottom:"x13ihpsm",marginStart:"xmx666k",$$css:!0}};b=a.paddingTopAuto;c=a.paddingEndAuto;d=a.paddingBottomAuto;e=a.paddingStartAuto;f=a.paddingVertAuto;var h=a.paddingHorizAuto,i=a.paddingAllAuto,j=a.paddingTop0,k=a.paddingEnd0,l=a.paddingBottom0,m=a.paddingStart0,n=a.paddingVert0,o=a.paddingHoriz0,p=a.paddingAll0,q=a.paddingTop1,r=a.paddingEnd1,s=a.paddingBottom1,t=a.paddingStart1,u=a.paddingVert1,v=a.paddingHoriz1,w=a.paddingAll1,x=a.paddingTop2,y=a.paddingEnd2,z=a.paddingBottom2,A=a.paddingStart2,B=a.paddingVert2,C=a.paddingHoriz2,D=a.paddingAll2,E=a.paddingTop3,F=a.paddingEnd3,G=a.paddingBottom3,H=a.paddingStart3,I=a.paddingVert3,J=a.paddingHoriz3,K=a.paddingAll3,L=a.paddingTop4,M=a.paddingEnd4,N=a.paddingBottom4,O=a.paddingStart4,P=a.paddingVert4,Q=a.paddingHoriz4,R=a.paddingAll4,S=a.paddingTop5,T=a.paddingEnd5,U=a.paddingBottom5,V=a.paddingStart5,W=a.paddingVert5,X=a.paddingHoriz5,Y=a.paddingAll5,Z=a.paddingTop6,$=a.paddingEnd6,aa=a.paddingBottom6,ba=a.paddingStart6,ca=a.paddingVert6,da=a.paddingHoriz6,ea=a.paddingAll6,fa=a.paddingTop7,ga=a.paddingEnd7,ha=a.paddingBottom7,ia=a.paddingStart7,ja=a.paddingVert7,ka=a.paddingHoriz7,la=a.paddingAll7,ma=a.paddingTop8,na=a.paddingEnd8,oa=a.paddingBottom8,pa=a.paddingStart8,qa=a.paddingVert8,ra=a.paddingHoriz8,sa=a.paddingAll8,ta=a.paddingTop9,ua=a.paddingEnd9,va=a.paddingBottom9,wa=a.paddingStart9,xa=a.paddingVert9,ya=a.paddingHoriz9,za=a.paddingAll9,Aa=a.paddingTop10,Ba=a.paddingEnd10,Ca=a.paddingBottom10,Da=a.paddingStart10,Ea=a.paddingVert10,Fa=a.paddingHoriz10,Ga=a.paddingAll10,Ha=a.paddingTop12,Ia=a.paddingEnd12,Ja=a.paddingBottom12,Ka=a.paddingStart12,La=a.paddingVert12,Ma=a.paddingHoriz12,Na=a.paddingAll12,Oa=a.paddingTop13,Pa=a.paddingEnd13,Qa=a.paddingBottom13,Ra=a.paddingStart13,Sa=a.paddingVert13,Ta=a.paddingHoriz13,Ua=a.paddingAll13,Va=a.paddingTop14,Wa=a.paddingEnd14,Xa=a.paddingBottom14,Ya=a.paddingStart14,Za=a.paddingVert14,$a=a.paddingHoriz14,ab=a.paddingAll14,bb=a.paddingTop15,cb=a.paddingEnd15,db=a.paddingBottom15,eb=a.paddingStart15,fb=a.paddingVert15,gb=a.paddingHoriz15,hb=a.paddingAll15,ib=a.paddingTop16,jb=a.paddingEnd16,kb=a.paddingBottom16,lb=a.paddingStart16,mb=a.paddingVert16,nb=a.paddingHoriz16,ob=a.paddingAll16,pb=a.paddingTop18,qb=a.paddingEnd18,rb=a.paddingBottom18,sb=a.paddingStart18,tb=a.paddingVert18,ub=a.paddingHoriz18,vb=a.paddingAll18,wb=a.paddingTop20,xb=a.paddingEnd20,yb=a.paddingBottom20,zb=a.paddingStart20,Ab=a.paddingVert20,Bb=a.paddingHoriz20,Cb=a.paddingAll20,Db=a.paddingTop24,Eb=a.paddingEnd24,Fb=a.paddingBottom24,Gb=a.paddingStart24,Hb=a.paddingVert24,Ib=a.paddingHoriz24,Jb=a.paddingAll24,Kb=a.paddingTop25,Lb=a.paddingEnd25,Mb=a.paddingBottom25,Nb=a.paddingStart25,Ob=a.paddingVert25,Pb=a.paddingHoriz25,Qb=a.paddingAll25,Rb=a.paddingTop28,Sb=a.paddingEnd28,Tb=a.paddingBottom28,Ub=a.paddingStart28,Vb=a.paddingVert28,Wb=a.paddingHoriz28,Xb=a.paddingAll28,Yb=a.paddingTop30,Zb=a.paddingEnd30,$b=a.paddingBottom30,ac=a.paddingStart30,bc=a.paddingVert30,cc=a.paddingHoriz30,dc=a.paddingAll30,ec=a.paddingTop32,fc=a.paddingEnd32,gc=a.paddingBottom32,hc=a.paddingStart32,ic=a.paddingVert32,jc=a.paddingHoriz32,kc=a.paddingAll32,lc=a.paddingTop36,mc=a.paddingEnd36,nc=a.paddingBottom36,oc=a.paddingStart36,pc=a.paddingVert36,qc=a.paddingHoriz36,rc=a.paddingAll36,sc=a.paddingTop40,tc=a.paddingEnd40,uc=a.paddingBottom40,vc=a.paddingStart40,wc=a.paddingVert40,xc=a.paddingHoriz40,yc=a.paddingAll40,zc=a.paddingTop48,Ac=a.paddingEnd48,Bc=a.paddingBottom48,Cc=a.paddingStart48,Dc=a.paddingVert48,Ec=a.paddingHoriz48,Fc=a.paddingAll48,Gc=a.marginTopAuto,Hc=a.marginEndAuto,Ic=a.marginBottomAuto,Jc=a.marginStartAuto,Kc=a.marginVertAuto,Lc=a.marginHorizAuto,Mc=a.marginAllAuto,Nc=a.marginTop0,Oc=a.marginEnd0,Pc=a.marginBottom0,Qc=a.marginStart0,Rc=a.marginVert0,Sc=a.marginHoriz0,Tc=a.marginAll0,Uc=a.marginTop1,Vc=a.marginEnd1,Wc=a.marginBottom1,Xc=a.marginStart1,Yc=a.marginVert1,Zc=a.marginHoriz1,$c=a.marginAll1,ad=a.marginTop2,bd=a.marginEnd2,cd=a.marginBottom2,dd=a.marginStart2,ed=a.marginVert2,fd=a.marginHoriz2,gd=a.marginAll2,hd=a.marginTop3,id=a.marginEnd3,jd=a.marginBottom3,kd=a.marginStart3,ld=a.marginVert3,md=a.marginHoriz3,nd=a.marginAll3,od=a.marginTop4,pd=a.marginEnd4,qd=a.marginBottom4,rd=a.marginStart4,sd=a.marginVert4,td=a.marginHoriz4,ud=a.marginAll4,vd=a.marginTop5,wd=a.marginEnd5,xd=a.marginBottom5,yd=a.marginStart5,zd=a.marginVert5,Ad=a.marginHoriz5,Bd=a.marginAll5,Cd=a.marginTop6,Dd=a.marginEnd6,Ed=a.marginBottom6,Fd=a.marginStart6,Gd=a.marginVert6,Hd=a.marginHoriz6,Id=a.marginAll6,Jd=a.marginTop7,Kd=a.marginEnd7,Ld=a.marginBottom7,Md=a.marginStart7,Nd=a.marginVert7,Od=a.marginHoriz7,Pd=a.marginAll7,Qd=a.marginTop8,Rd=a.marginEnd8,Sd=a.marginBottom8,Td=a.marginStart8,Ud=a.marginVert8,Vd=a.marginHoriz8,Wd=a.marginAll8,Xd=a.marginTop9,Yd=a.marginEnd9,Zd=a.marginBottom9,$d=a.marginStart9,ae=a.marginVert9,be=a.marginHoriz9,ce=a.marginAll9,de=a.marginTop10,ee=a.marginEnd10,fe=a.marginBottom10,ge=a.marginStart10,he=a.marginVert10,ie=a.marginHoriz10,je=a.marginAll10,ke=a.marginTop12,le=a.marginEnd12,me=a.marginBottom12,ne=a.marginStart12,oe=a.marginVert12,pe=a.marginHoriz12,qe=a.marginAll12,re=a.marginTop13,se=a.marginEnd13,te=a.marginBottom13,ue=a.marginStart13,ve=a.marginVert13,we=a.marginHoriz13,xe=a.marginAll13,ye=a.marginTop14,ze=a.marginEnd14,Ae=a.marginBottom14,Be=a.marginStart14,Ce=a.marginVert14,De=a.marginHoriz14,Ee=a.marginAll14,Fe=a.marginTop15,Ge=a.marginEnd15,He=a.marginBottom15,Ie=a.marginStart15,Je=a.marginVert15,Ke=a.marginHoriz15,Le=a.marginAll15,Me=a.marginTop16,Ne=a.marginEnd16,Oe=a.marginBottom16,Pe=a.marginStart16,Qe=a.marginVert16,Re=a.marginHoriz16,Se=a.marginAll16,Te=a.marginTop18,Ue=a.marginEnd18,Ve=a.marginBottom18,We=a.marginStart18,Xe=a.marginVert18,Ye=a.marginHoriz18,Ze=a.marginAll18,$e=a.marginTop20,af=a.marginEnd20,bf=a.marginBottom20,cf=a.marginStart20,df=a.marginVert20,ef=a.marginHoriz20,ff=a.marginAll20,gf=a.marginTop24,hf=a.marginEnd24,jf=a.marginBottom24,kf=a.marginStart24,lf=a.marginVert24,mf=a.marginHoriz24,nf=a.marginAll24,of=a.marginTop25,pf=a.marginEnd25,qf=a.marginBottom25,rf=a.marginStart25,sf=a.marginVert25,tf=a.marginHoriz25,uf=a.marginAll25,vf=a.marginTop28,wf=a.marginEnd28,xf=a.marginBottom28,yf=a.marginStart28,zf=a.marginVert28,Af=a.marginHoriz28,Bf=a.marginAll28,Cf=a.marginTop30,Df=a.marginEnd30,Ef=a.marginBottom30,Ff=a.marginStart30,Gf=a.marginVert30,Hf=a.marginHoriz30,If=a.marginAll30,Jf=a.marginTop32,Kf=a.marginEnd32,Lf=a.marginBottom32,Mf=a.marginStart32,Nf=a.marginVert32,Of=a.marginHoriz32,Pf=a.marginAll32,Qf=a.marginTop36,Rf=a.marginEnd36,Sf=a.marginBottom36,Tf=a.marginStart36,Uf=a.marginVert36,Vf=a.marginHoriz36,Wf=a.marginAll36,Xf=a.marginTop40,Yf=a.marginEnd40,Zf=a.marginBottom40,$f=a.marginStart40,ag=a.marginVert40,bg=a.marginHoriz40,cg=a.marginAll40,dg=a.marginTop48,eg=a.marginEnd48,fg=a.marginBottom48,gg=a.marginStart48,hg=a.marginVert48,ig=a.marginHoriz48;a=a.marginAll48;var jg={topAuto:b,endAuto:c,bottomAuto:d,startAuto:e,vertAuto:f,horizAuto:h,allAuto:i,top0:j,end0:k,bottom0:l,start0:m,vert0:n,horiz0:o,all0:p,top1:q,end1:r,bottom1:s,start1:t,vert1:u,horiz1:v,all1:w,top2:x,end2:y,bottom2:z,start2:A,vert2:B,horiz2:C,all2:D,top3:E,end3:F,bottom3:G,start3:H,vert3:I,horiz3:J,all3:K,top4:L,end4:M,bottom4:N,start4:O,vert4:P,horiz4:Q,all4:R,top5:S,end5:T,bottom5:U,start5:V,vert5:W,horiz5:X,all5:Y,top6:Z,end6:$,bottom6:aa,start6:ba,vert6:ca,horiz6:da,all6:ea,top7:fa,end7:ga,bottom7:ha,start7:ia,vert7:ja,horiz7:ka,all7:la,top8:ma,end8:na,bottom8:oa,start8:pa,vert8:qa,horiz8:ra,all8:sa,top9:ta,end9:ua,bottom9:va,start9:wa,vert9:xa,horiz9:ya,all9:za,top10:Aa,end10:Ba,bottom10:Ca,start10:Da,vert10:Ea,horiz10:Fa,all10:Ga,top12:Ha,end12:Ia,bottom12:Ja,start12:Ka,vert12:La,horiz12:Ma,all12:Na,top13:Oa,end13:Pa,bottom13:Qa,start13:Ra,vert13:Sa,horiz13:Ta,all13:Ua,top14:Va,end14:Wa,bottom14:Xa,start14:Ya,vert14:Za,horiz14:$a,all14:ab,top15:bb,end15:cb,bottom15:db,start15:eb,vert15:fb,horiz15:gb,all15:hb,top16:ib,end16:jb,bottom16:kb,start16:lb,vert16:mb,horiz16:nb,all16:ob,top18:pb,end18:qb,bottom18:rb,start18:sb,vert18:tb,horiz18:ub,all18:vb,top20:wb,end20:xb,bottom20:yb,start20:zb,vert20:Ab,horiz20:Bb,all20:Cb,top24:Db,end24:Eb,bottom24:Fb,start24:Gb,vert24:Hb,horiz24:Ib,all24:Jb,top25:Kb,end25:Lb,bottom25:Mb,start25:Nb,vert25:Ob,horiz25:Pb,all25:Qb,top28:Rb,end28:Sb,bottom28:Tb,start28:Ub,vert28:Vb,horiz28:Wb,all28:Xb,top30:Yb,end30:Zb,bottom30:$b,start30:ac,vert30:bc,horiz30:cc,all30:dc,top32:ec,end32:fc,bottom32:gc,start32:hc,vert32:ic,horiz32:jc,all32:kc,top36:lc,end36:mc,bottom36:nc,start36:oc,vert36:pc,horiz36:qc,all36:rc,top40:sc,end40:tc,bottom40:uc,start40:vc,vert40:wc,horiz40:xc,all40:yc,top48:zc,end48:Ac,bottom48:Bc,start48:Cc,vert48:Dc,horiz48:Ec,all48:Fc},kg={topAuto:Gc,endAuto:Hc,bottomAuto:Ic,startAuto:Jc,vertAuto:Kc,horizAuto:Lc,allAuto:Mc,top0:Nc,end0:Oc,bottom0:Pc,start0:Qc,vert0:Rc,horiz0:Sc,all0:Tc,top1:Uc,end1:Vc,bottom1:Wc,start1:Xc,vert1:Yc,horiz1:Zc,all1:$c,top2:ad,end2:bd,bottom2:cd,start2:dd,vert2:ed,horiz2:fd,all2:gd,top3:hd,end3:id,bottom3:jd,start3:kd,vert3:ld,horiz3:md,all3:nd,top4:od,end4:pd,bottom4:qd,start4:rd,vert4:sd,horiz4:td,all4:ud,top5:vd,end5:wd,bottom5:xd,start5:yd,vert5:zd,horiz5:Ad,all5:Bd,top6:Cd,end6:Dd,bottom6:Ed,start6:Fd,vert6:Gd,horiz6:Hd,all6:Id,top7:Jd,end7:Kd,bottom7:Ld,start7:Md,vert7:Nd,horiz7:Od,all7:Pd,top8:Qd,end8:Rd,bottom8:Sd,start8:Td,vert8:Ud,horiz8:Vd,all8:Wd,top9:Xd,end9:Yd,bottom9:Zd,start9:$d,vert9:ae,horiz9:be,all9:ce,top10:de,end10:ee,bottom10:fe,start10:ge,vert10:he,horiz10:ie,all10:je,top12:ke,end12:le,bottom12:me,start12:ne,vert12:oe,horiz12:pe,all12:qe,top13:re,end13:se,bottom13:te,start13:ue,vert13:ve,horiz13:we,all13:xe,top14:ye,end14:ze,bottom14:Ae,start14:Be,vert14:Ce,horiz14:De,all14:Ee,top15:Fe,end15:Ge,bottom15:He,start15:Ie,vert15:Je,horiz15:Ke,all15:Le,top16:Me,end16:Ne,bottom16:Oe,start16:Pe,vert16:Qe,horiz16:Re,all16:Se,top18:Te,end18:Ue,bottom18:Ve,start18:We,vert18:Xe,horiz18:Ye,all18:Ze,top20:$e,end20:af,bottom20:bf,start20:cf,vert20:df,horiz20:ef,all20:ff,top24:gf,end24:hf,bottom24:jf,start24:kf,vert24:lf,horiz24:mf,all24:nf,top25:of,end25:pf,bottom25:qf,start25:rf,vert25:sf,horiz25:tf,all25:uf,top28:vf,end28:wf,bottom28:xf,start28:yf,vert28:zf,horiz28:Af,all28:Bf,top30:Cf,end30:Df,bottom30:Ef,start30:Ff,vert30:Gf,horiz30:Hf,all30:If,top32:Jf,end32:Kf,bottom32:Lf,start32:Mf,vert32:Nf,horiz32:Of,all32:Pf,top36:Qf,end36:Rf,bottom36:Sf,start36:Tf,vert36:Uf,horiz36:Vf,all36:Wf,top40:Xf,end40:Yf,bottom40:Zf,start40:$f,vert40:ag,horiz40:bg,all40:cg,top48:dg,end48:eg,bottom48:fg,start48:gg,vert48:hg,horiz48:ig,all48:a};g.paddingTopAuto=b;g.paddingEndAuto=c;g.paddingBottomAuto=d;g.paddingStartAuto=e;g.paddingVertAuto=f;g.paddingHorizAuto=h;g.paddingAllAuto=i;g.paddingTop0=j;g.paddingEnd0=k;g.paddingBottom0=l;g.paddingStart0=m;g.paddingVert0=n;g.paddingHoriz0=o;g.paddingAll0=p;g.paddingTop1=q;g.paddingEnd1=r;g.paddingBottom1=s;g.paddingStart1=t;g.paddingVert1=u;g.paddingHoriz1=v;g.paddingAll1=w;g.paddingTop2=x;g.paddingEnd2=y;g.paddingBottom2=z;g.paddingStart2=A;g.paddingVert2=B;g.paddingHoriz2=C;g.paddingAll2=D;g.paddingTop3=E;g.paddingEnd3=F;g.paddingBottom3=G;g.paddingStart3=H;g.paddingVert3=I;g.paddingHoriz3=J;g.paddingAll3=K;g.paddingTop4=L;g.paddingEnd4=M;g.paddingBottom4=N;g.paddingStart4=O;g.paddingVert4=P;g.paddingHoriz4=Q;g.paddingAll4=R;g.paddingTop5=S;g.paddingEnd5=T;g.paddingBottom5=U;g.paddingStart5=V;g.paddingVert5=W;g.paddingHoriz5=X;g.paddingAll5=Y;g.paddingTop6=Z;g.paddingEnd6=$;g.paddingBottom6=aa;g.paddingStart6=ba;g.paddingVert6=ca;g.paddingHoriz6=da;g.paddingAll6=ea;g.paddingTop7=fa;g.paddingEnd7=ga;g.paddingBottom7=ha;g.paddingStart7=ia;g.paddingVert7=ja;g.paddingHoriz7=ka;g.paddingAll7=la;g.paddingTop8=ma;g.paddingEnd8=na;g.paddingBottom8=oa;g.paddingStart8=pa;g.paddingVert8=qa;g.paddingHoriz8=ra;g.paddingAll8=sa;g.paddingTop9=ta;g.paddingEnd9=ua;g.paddingBottom9=va;g.paddingStart9=wa;g.paddingVert9=xa;g.paddingHoriz9=ya;g.paddingAll9=za;g.paddingTop10=Aa;g.paddingEnd10=Ba;g.paddingBottom10=Ca;g.paddingStart10=Da;g.paddingVert10=Ea;g.paddingHoriz10=Fa;g.paddingAll10=Ga;g.paddingTop12=Ha;g.paddingEnd12=Ia;g.paddingBottom12=Ja;g.paddingStart12=Ka;g.paddingVert12=La;g.paddingHoriz12=Ma;g.paddingAll12=Na;g.paddingTop13=Oa;g.paddingEnd13=Pa;g.paddingBottom13=Qa;g.paddingStart13=Ra;g.paddingVert13=Sa;g.paddingHoriz13=Ta;g.paddingAll13=Ua;g.paddingTop14=Va;g.paddingEnd14=Wa;g.paddingBottom14=Xa;g.paddingStart14=Ya;g.paddingVert14=Za;g.paddingHoriz14=$a;g.paddingAll14=ab;g.paddingTop15=bb;g.paddingEnd15=cb;g.paddingBottom15=db;g.paddingStart15=eb;g.paddingVert15=fb;g.paddingHoriz15=gb;g.paddingAll15=hb;g.paddingTop16=ib;g.paddingEnd16=jb;g.paddingBottom16=kb;g.paddingStart16=lb;g.paddingVert16=mb;g.paddingHoriz16=nb;g.paddingAll16=ob;g.paddingTop18=pb;g.paddingEnd18=qb;g.paddingBottom18=rb;g.paddingStart18=sb;g.paddingVert18=tb;g.paddingHoriz18=ub;g.paddingAll18=vb;g.paddingTop20=wb;g.paddingEnd20=xb;g.paddingBottom20=yb;g.paddingStart20=zb;g.paddingVert20=Ab;g.paddingHoriz20=Bb;g.paddingAll20=Cb;g.paddingTop24=Db;g.paddingEnd24=Eb;g.paddingBottom24=Fb;g.paddingStart24=Gb;g.paddingVert24=Hb;g.paddingHoriz24=Ib;g.paddingAll24=Jb;g.paddingTop25=Kb;g.paddingEnd25=Lb;g.paddingBottom25=Mb;g.paddingStart25=Nb;g.paddingVert25=Ob;g.paddingHoriz25=Pb;g.paddingAll25=Qb;g.paddingTop28=Rb;g.paddingEnd28=Sb;g.paddingBottom28=Tb;g.paddingStart28=Ub;g.paddingVert28=Vb;g.paddingHoriz28=Wb;g.paddingAll28=Xb;g.paddingTop30=Yb;g.paddingEnd30=Zb;g.paddingBottom30=$b;g.paddingStart30=ac;g.paddingVert30=bc;g.paddingHoriz30=cc;g.paddingAll30=dc;g.paddingTop32=ec;g.paddingEnd32=fc;g.paddingBottom32=gc;g.paddingStart32=hc;g.paddingVert32=ic;g.paddingHoriz32=jc;g.paddingAll32=kc;g.paddingTop36=lc;g.paddingEnd36=mc;g.paddingBottom36=nc;g.paddingStart36=oc;g.paddingVert36=pc;g.paddingHoriz36=qc;g.paddingAll36=rc;g.paddingTop40=sc;g.paddingEnd40=tc;g.paddingBottom40=uc;g.paddingStart40=vc;g.paddingVert40=wc;g.paddingHoriz40=xc;g.paddingAll40=yc;g.paddingTop48=zc;g.paddingEnd48=Ac;g.paddingBottom48=Bc;g.paddingStart48=Cc;g.paddingVert48=Dc;g.paddingHoriz48=Ec;g.paddingAll48=Fc;g.marginTopAuto=Gc;g.marginEndAuto=Hc;g.marginBottomAuto=Ic;g.marginStartAuto=Jc;g.marginVertAuto=Kc;g.marginHorizAuto=Lc;g.marginAllAuto=Mc;g.marginTop0=Nc;g.marginEnd0=Oc;g.marginBottom0=Pc;g.marginStart0=Qc;g.marginVert0=Rc;g.marginHoriz0=Sc;g.marginAll0=Tc;g.marginTop1=Uc;g.marginEnd1=Vc;g.marginBottom1=Wc;g.marginStart1=Xc;g.marginVert1=Yc;g.marginHoriz1=Zc;g.marginAll1=$c;g.marginTop2=ad;g.marginEnd2=bd;g.marginBottom2=cd;g.marginStart2=dd;g.marginVert2=ed;g.marginHoriz2=fd;g.marginAll2=gd;g.marginTop3=hd;g.marginEnd3=id;g.marginBottom3=jd;g.marginStart3=kd;g.marginVert3=ld;g.marginHoriz3=md;g.marginAll3=nd;g.marginTop4=od;g.marginEnd4=pd;g.marginBottom4=qd;g.marginStart4=rd;g.marginVert4=sd;g.marginHoriz4=td;g.marginAll4=ud;g.marginTop5=vd;g.marginEnd5=wd;g.marginBottom5=xd;g.marginStart5=yd;g.marginVert5=zd;g.marginHoriz5=Ad;g.marginAll5=Bd;g.marginTop6=Cd;g.marginEnd6=Dd;g.marginBottom6=Ed;g.marginStart6=Fd;g.marginVert6=Gd;g.marginHoriz6=Hd;g.marginAll6=Id;g.marginTop7=Jd;g.marginEnd7=Kd;g.marginBottom7=Ld;g.marginStart7=Md;g.marginVert7=Nd;g.marginHoriz7=Od;g.marginAll7=Pd;g.marginTop8=Qd;g.marginEnd8=Rd;g.marginBottom8=Sd;g.marginStart8=Td;g.marginVert8=Ud;g.marginHoriz8=Vd;g.marginAll8=Wd;g.marginTop9=Xd;g.marginEnd9=Yd;g.marginBottom9=Zd;g.marginStart9=$d;g.marginVert9=ae;g.marginHoriz9=be;g.marginAll9=ce;g.marginTop10=de;g.marginEnd10=ee;g.marginBottom10=fe;g.marginStart10=ge;g.marginVert10=he;g.marginHoriz10=ie;g.marginAll10=je;g.marginTop12=ke;g.marginEnd12=le;g.marginBottom12=me;g.marginStart12=ne;g.marginVert12=oe;g.marginHoriz12=pe;g.marginAll12=qe;g.marginTop13=re;g.marginEnd13=se;g.marginBottom13=te;g.marginStart13=ue;g.marginVert13=ve;g.marginHoriz13=we;g.marginAll13=xe;g.marginTop14=ye;g.marginEnd14=ze;g.marginBottom14=Ae;g.marginStart14=Be;g.marginVert14=Ce;g.marginHoriz14=De;g.marginAll14=Ee;g.marginTop15=Fe;g.marginEnd15=Ge;g.marginBottom15=He;g.marginStart15=Ie;g.marginVert15=Je;g.marginHoriz15=Ke;g.marginAll15=Le;g.marginTop16=Me;g.marginEnd16=Ne;g.marginBottom16=Oe;g.marginStart16=Pe;g.marginVert16=Qe;g.marginHoriz16=Re;g.marginAll16=Se;g.marginTop18=Te;g.marginEnd18=Ue;g.marginBottom18=Ve;g.marginStart18=We;g.marginVert18=Xe;g.marginHoriz18=Ye;g.marginAll18=Ze;g.marginTop20=$e;g.marginEnd20=af;g.marginBottom20=bf;g.marginStart20=cf;g.marginVert20=df;g.marginHoriz20=ef;g.marginAll20=ff;g.marginTop24=gf;g.marginEnd24=hf;g.marginBottom24=jf;g.marginStart24=kf;g.marginVert24=lf;g.marginHoriz24=mf;g.marginAll24=nf;g.marginTop25=of;g.marginEnd25=pf;g.marginBottom25=qf;g.marginStart25=rf;g.marginVert25=sf;g.marginHoriz25=tf;g.marginAll25=uf;g.marginTop28=vf;g.marginEnd28=wf;g.marginBottom28=xf;g.marginStart28=yf;g.marginVert28=zf;g.marginHoriz28=Af;g.marginAll28=Bf;g.marginTop30=Cf;g.marginEnd30=Df;g.marginBottom30=Ef;g.marginStart30=Ff;g.marginVert30=Gf;g.marginHoriz30=Hf;g.marginAll30=If;g.marginTop32=Jf;g.marginEnd32=Kf;g.marginBottom32=Lf;g.marginStart32=Mf;g.marginVert32=Nf;g.marginHoriz32=Of;g.marginAll32=Pf;g.marginTop36=Qf;g.marginEnd36=Rf;g.marginBottom36=Sf;g.marginStart36=Tf;g.marginVert36=Uf;g.marginHoriz36=Vf;g.marginAll36=Wf;g.marginTop40=Xf;g.marginEnd40=Yf;g.marginBottom40=Zf;g.marginStart40=$f;g.marginVert40=ag;g.marginHoriz40=bg;g.marginAll40=cg;g.marginTop48=dg;g.marginEnd48=eg;g.marginBottom48=fg;g.marginStart48=gg;g.marginVert48=hg;g.marginHoriz48=ig;g.marginAll48=a;g.uiPadding=jg;g.uiMargin=kg}),98);
__d("useWAWebFocusState",["react","react-gui-use-focus","react-gui-use-focus-visibility"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useState;function a(){var a=i(!1),b=a[0];a=a[1];var c=d("react-gui-use-focus-visibility").useFocusVisibility();a=d("react-gui-use-focus").useFocus({onFocusChange:a});b=b&&c;return[a,b]}g["default"]=a}),98);
__d("WAWebWDSButton",["WAWebFlex.react","WAWebFlexItem.react","WAWebFlexStyles","WAWebSpinner.react","WAWebUISpacing","react","stylex","useMergeRefs","useWAWebFocusState"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).forwardRef,m={button:{position:"x1n2onr6",display:"x1rg5ohu",fontWeight:"xk50ysn",fontSize:"x1f6kntn",lineHeight:"xyesn5m",whiteSpace:"x126k92a",borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopColor:"x1v8p93f",borderEndColor:"xogb00i",borderBottomColor:"x16stqrj",borderStartColor:"x1ftr3km",outlineOffset:"x1hl8ikr",transitionProperty:"xfagghw",transitionDuration:"x9dyr19",transitionTimingFunction:"x9lcvmn",$$css:!0},hover:{":hover_boxShadow":"xv52azi",$$css:!0},disabled:{cursor:"x1h6gzvc",boxShadow:"x1gnnqk1",":hover_cursor":"xercxcz",":hover_boxShadow":"x1wtrbu5",$$css:!0},focused:{outline:"x1hrmx9x",$$css:!0},nowrap:{whiteSpace:"xuxw1ft",$$css:!0},stretch:{display:"x1lliihq",width:"xh8yej3",$$css:!0}},n=k.forwardRef(a);function a(a,b){var e=a.themeStyles,f=a.testid;f=a.children;var g=a.disabled,h=a.onClick,j=a.nowrap;j=j===void 0?!0:j;var l=a.stretch,n=a.spinner,o=a.shadowOnHover;o=o===void 0?!0:o;var p=a.buttonType,q=a.icon,r=a.iconXstyle,s=a.width,t=a.ariaLabel,u=a.ariaRoleDescription;a=babelHelpers.objectWithoutPropertiesLoose(a,["themeStyles","testid","children","disabled","onClick","nowrap","stretch","spinner","shadowOnHover","buttonType","icon","iconXstyle","width","ariaLabel","ariaRoleDescription"]);var v=c("useWAWebFocusState")(),w=v[0];v=v[1];b=c("useMergeRefs")(b,w);w=d("WAWebFlexStyles").getFlexStyles(a);return k.jsx("button",{disabled:g,"aria-disabled":g,"data-testid":void 0,onClick:h,className:(i||(i=c("stylex")))([d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.horiz24,[m.button,e.button],w.xstyle,v===!0&&[m.focused,e.focused],g===!0&&m.disabled,j===!0&&m.nowrap,l===!0&&m.stretch,o===!0&&m.hover]),ref:b,style:babelHelpers["extends"]({},w.inline,{width:s}),type:p,"aria-label":t,"aria-roledescription":u,children:k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:[k.jsxs(d("WAWebFlex.react").FlexRow,{testid:void 0,justify:"center",align:"center",gap:8,grow:1,children:[q!=null&&k.jsx(q,{height:16,iconXstyle:r}),f]}),n===!0&&k.jsx(c("WAWebFlexItem.react"),{testid:void 0,xstyle:d("WAWebUISpacing").uiPadding.start8,children:k.jsx(d("WAWebSpinner.react").Spinner,{color:g===!0?"default":e.spinner,size:16})})]})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){return l(function(b,c){return k.jsx(n,babelHelpers["extends"]({},b,{ref:c,themeStyles:a}))})}a={button:{color:"xbtce8p",backgroundColor:"x14v0smp",":hover_backgroundColor":"xo8ufso",":disabled_color":"xcjl5na",":disabled_backgroundColor":"x1k3x3db",$$css:!0},spinner:{stroke:"x1upul9f",$$css:!0}};a=b(a);var o={button:{color:"x1jrnqrx",borderTopColor:"xiuubft",borderEndColor:"xa2vszz",borderBottomColor:"xx5tys9",borderStartColor:"x5iuykv",backgroundColor:"xlwc9sh",":hover_color":"x12bbwn8",":disabled_color":"xcjl5na",":disabled_borderTopColor":"xnk0c1z",":disabled_borderEndColor":"x4b7akx",":disabled_borderBottomColor":"x1ao7u56",":disabled_borderStartColor":"xhsoqjx",":disabled_backgroundColor":"x1kwr8ib",$$css:!0},spinner:{stroke:"x48xnh9",$$css:!0}};o=b(o);var p={button:{color:"x1ijsw6v",backgroundColor:"x2gxsfk",":hover_color":"xhbeork",":hover_backgroundColor":"xsqkqsz",":disabled_color":"xcjl5na",":disabled_backgroundColor":"x182k0kv",$$css:!0},spinner:{stroke:"x48xnh9",$$css:!0}};p=b(p);var q={button:{paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",color:"x1jrnqrx",":hover_color":"x12bbwn8",":hover_boxShadow":"x1wtrbu5",":disabled_color":"xcjl5na",$$css:!0},spinner:{stroke:"x48xnh9",$$css:!0}};q=b(q);var r={button:{color:"x1fk166o",backgroundColor:"x1qd5adx",":hover_backgroundColor":"x17dtpw8",":disabled_color":"xcjl5na",":disabled_backgroundColor":"x1k3x3db",$$css:!0},focused:{outlineColor:"x1sfp6qd",$$css:!0},spinner:{stroke:"xrn1f1u",$$css:!0}};r=b(r);var s={button:{color:"x3hrd46",borderTopColor:"xiuubft",borderEndColor:"xa2vszz",borderBottomColor:"xx5tys9",borderStartColor:"x5iuykv",backgroundColor:"xlwc9sh",":hover_color":"xnpzmh2",":disabled_color":"xcjl5na",":disabled_borderTopColor":"xnk0c1z",":disabled_borderEndColor":"x4b7akx",":disabled_borderBottomColor":"x1ao7u56",":disabled_borderStartColor":"xhsoqjx",":disabled_backgroundColor":"x1kwr8ib",$$css:!0},focused:{outlineColor:"x1q371fa",$$css:!0},spinner:{stroke:"xah28ul",$$css:!0}};b=b(s);var t={horizontal:{columnGap:"x40hh3e",$$css:!0},vertical:{rowGap:"xgpatz3",$$css:!0}};function e(a){var b=a.direction;a=babelHelpers.objectWithoutPropertiesLoose(a,["direction"]);var c;switch(b){case"horizontal":case"horizontalReverse":c=t.horizontal;break;case"vertical":case"verticalReverse":c=t.vertical;break}return k.jsx(d("WAWebFlex.react").FlexContainer,babelHelpers["extends"]({xstyle:c,direction:b},a))}e.displayName=e.name+" [from "+f.id+"]";g.WDSButtonPrimary=a;g.WDSButtonSecondary=o;g.WDSButtonPlainWhite=p;g.WDSButtonSimplified=q;g.WDSButtonPrimaryDestructive=r;g.WDSButtonSecondaryDestructive=b;g.ButtonGroup=e}),98);
__d("WAWebButton.react",["WAWebWDSButton","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function j(a){switch(a){case"primary":case"strong-primary":return d("WAWebWDSButton").WDSButtonPrimary;case"secondary":return d("WAWebWDSButton").WDSButtonSecondary;case"plain-white":return d("WAWebWDSButton").WDSButtonPlainWhite;case"solidWarning":return d("WAWebWDSButton").WDSButtonPrimaryDestructive;case"warning":case"warning-secondary":return d("WAWebWDSButton").WDSButtonSecondaryDestructive;case"simplified":case"strong":return d("WAWebWDSButton").WDSButtonSimplified}}b=i.forwardRef(a);function a(a,b){var c=a.buttonType,d=a.children,e=a.disabled,f=a.nowrap,g=a.onClick,h=a.spinner,k=a.stretch,l=a.testid;l=a.type;a=l===void 0?"primary":l;l=j(a);return i.jsx(l,{ref:b,testid:void 0,children:d,disabled:e,onClick:g,nowrap:f,spinner:h,stretch:k,buttonType:c})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebCRUDOperationsNewsletterMyVotes",["Promise","WALogger","WAWebModelStorageUtils","WAWebNewsletterDBUtils","WAWebSchemaNewsletterMyVotes","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[createOrUpdateMyVote] Invalid newsletter jid ",""]);i=function(){return a};return a}function j(a){return d("WAWebModelStorageUtils").getStorage().lock(["newsletter-my-votes"],function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];if(!c("WAWebWid").isNewsletter(a.chatJid)){d("WALogger").WARN(i(),a.chatJid);return}b;var e=(yield l(a.chatJid,a.msgServerId));if(e!=null&&e.serverTimestampMs>a.serverTimestampMs)return;yield b.createOrReplace(a)});return function(a){return e.apply(this,arguments)}}())}function a(a){return d("WAWebModelStorageUtils").getStorage().lock(["newsletter-my-votes"],function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];b;var d=new Map(),e=a.map(function(a){if(!c("WAWebWid").isNewsletter(a.chatJid))return;d.set(a.chatJid+"-"+a.msgServerId,a);return[a.chatJid,a.msgServerId]}).filter(Boolean);e=(yield b.anyOf(["chatJid","msgServerId"],e));e.forEach(function(a){var b=a.chatJid+"-"+a.msgServerId,c=d.get(b);c!=null&&c.serverTimestampMs<a.serverTimestampMs&&d["delete"](b)});yield b.bulkCreateOrReplace(Array.from(d.values()))});return function(a){return d.apply(this,arguments)}}())}function e(a,b){return d("WAWebSchemaNewsletterMyVotes").getTable().remove([a,b])}var k=100;function l(a,c){return!Number.isSafeInteger(c)||c<k||c>=d("WAWebNewsletterDBUtils").TEMPORARY_SERVER_ID_LOWER_BOUND?(h||(h=b("Promise"))).resolve(null):d("WAWebSchemaNewsletterMyVotes").getTable().get([a,c])}function f(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield l(a.chatJid,a.msgServerId));if(b==null)return;yield j(babelHelpers["extends"]({},b,a))});return m.apply(this,arguments)}g.createOrUpdateMyVote=j;g.bulkCreateOrUpdateMyVotes=a;g.deleteMyVote=e;g.getMyVote=l;g.updateMyVote=f}),98);
__d("WAWebChatEphemeralExemptionCache",[],(function(a,b,c,d,e,f){a=function(){function a(){this.chatEphemeralExemptionMap=new Map()}var b=a.prototype;b.has=function(a){return this.chatEphemeralExemptionMap.has(a)};b.get=function(a){return(a=this.chatEphemeralExemptionMap.get(a))!=null?a:null};b.add=function(a,b){this.chatEphemeralExemptionMap.set(a,b)};b.clear=function(){this.chatEphemeralExemptionMap.clear()};return a}();b=new a();f["default"]=b}),66);
__d("WAWebChatOriginTypes",[],(function(a,b,c,d,e,f){a=new Set(["createChat","createChatOnNewMsg","debugOpenChatFlow","debugConvertToLidChat","debugCreateChat","jest","updateDeviceTableApi","fixturesChatFactory","securityCodeApi","restoreMessagesForChat","processUnreadMessage","loadLastMessagesFromDb","processPreviewMessageInChat","historyMsgHandlerAction","updateMessageUIAction","msgCollectionFindQuery","msgCollectionGetStarred","msgCollectionGetEvents","msgCollectionGetMessagesById","msgCollectionQueryVCard","msgCollectionIncrementalStarredUpdate","msgCollectionQueryMedia","msgCollectionSearch","msgCollectionGetContext","username_change_notification","username_contactless_search"]);b=new Set(["username_change_notification","username_contactless_search"]);f.VALID_LID_ORIGINS=a;f.VALID_USERNAME_ORIGINS=b}),66);
__d("WAWebKeyboardContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a({isKeyboardUser:!1,setIsKeyboardUser:function(){}});g["default"]=b}),98);
__d("WAWebUseIsKeyboardUser",["WAWebKeyboardContext","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useContext;function a(){return i(c("WAWebKeyboardContext"))}g["default"]=a}),98);
__d("WAWebClickable.react",["$InternalEnum","WAWebClassnames","WAWebKeyboardIsKeyActivation","WAWebUseIsKeyboardUser","react","stylex","useMergeRefs"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useRef,m=b("$InternalEnum").Mirrored(["Default","Image"]),n={imageFocus:{":focus_borderTopStartRadius":"xvmu2xp",":focus_borderTopEndRadius":"x16ngqik",":focus_borderBottomEndRadius":"x1vlmnad",":focus_borderBottomStartRadius":"x12oeec4",":focus_boxShadow":"xsbtyp8",":focus_filter":"x1cm50aa",$$css:!0},defaultFocus:{":focus_borderTopStartRadius":"xvmu2xp",":focus_borderTopEndRadius":"x16ngqik",":focus_borderBottomEndRadius":"x1vlmnad",":focus_borderBottomStartRadius":"x12oeec4",":focus_boxShadow":"xsbtyp8",$$css:!0}};e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.as;e=e===void 0?"div":e;var f=a.onClick,g=a.dataTestId;g=a.className;var h=a.children,j=a.inlineStyle,o=a.preventDefaultKeyboard,p=o===void 0?!1:o;o=a.xstyle;e=e;var q=c("WAWebUseIsKeyboardUser")();q=q.isKeyboardUser;var r=l(null);b=c("useMergeRefs")(b,r);var s=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)&&f){var b;(b=r.current)==null?void 0:b.click();p&&a.preventDefault()}},t,u,v,w,x,y;if(f){var z;t=(z=a.role)!=null?z:"button";u=a.ariaLabel;v=(z=a.tabIndex)!=null?z:0;w=(z=a.focusTheme)!=null?z:m.Default;x=a.title;y=a["data-tab"]}return k.jsx(e,{onClick:f,role:t,tabIndex:v,"data-testid":void 0,"aria-label":u,title:x,"data-tab":y,ref:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(g,(i||(i=c("stylex")))(o,q&&m.Default===w&&n.defaultFocus,q&&m.Image===w&&n.imageFocus)),onKeyDown:s,style:j,children:h})}a.displayName=a.name+" [from "+f.id+"]";b=e;g.FocusTheme=m;g.Clickable=b}),98);
__d("WAWebCompatibility",["WAWebModernizr"],(function(a,b,c,d,e,f,g){var h="animation",i="transition";function a(a,b){var c,e=d("WAWebModernizr").getModernizr();if(a.indexOf(h)===0){c=a.substring(h.length);var f=e?e.prefixed(h):h;return j(f,h,c)}else if(a.indexOf(i)===0){c=a.substring(i.length);f=e?e.prefixed(i):i;return j(f,i,c)}return e.prefixed(a,b,!1)||a}function j(a,b,c){var d=a.toLowerCase().indexOf(b),e=a.slice(0,d).toLowerCase();return a.indexOf(b)===0?e+a.slice(d)+c.toLowerCase():e+a.slice(d)+c}g.compatPrefix=a}),98);
__d("WAWebFbtCommon",["fbt","err"],(function(a,b,c,d,e,f,g,h){var i={WhatsApp:function(){return h._("__JHASH__8FnQiGCU0cZ__JHASH__")},"WhatsApp Web":function(){return h._("__JHASH__Ble0GykrsjR__JHASH__")},"WhatsApp for Desktop":function(){return h._("__JHASH__i5YHkS2gqwR__JHASH__")},BETA:function(){return h._("__JHASH__5lk1d0Kzlru__JHASH__")},Message:function(){return h._("__JHASH__px9QxJJJ77K__JHASH__")},Block:function(){return h._("__JHASH__cF6ZN_TJlBb__JHASH__")},Report:function(){return h._("__JHASH__01-F89WUyRW__JHASH__")},Next:function(){return h._("__JHASH__vRWsqOUoPca__JHASH__")},Cancel:function(){return h._("__JHASH__JomY4EcHzcJ__JHASH__")},Close:function(){return h._("__JHASH__MluKGl4ExfF__JHASH__")},Continue:function(){return h._("__JHASH__W-f9s-29pjX__JHASH__")},Unblock:function(){return h._("__JHASH___EbhNXdETcW__JHASH__")},"Learn more":function(){return h._("__JHASH__ofSKbj4p0iW__JHASH__")},"Archive instead":function(){return h._("__JHASH__3N0IoHfMf6y__JHASH__")},"Try again":function(){return h._("__JHASH__qnKrjacRQZc__JHASH__")},Search:function(){return h._("__JHASH__iGqQJ4Ediub__JHASH__")},Undo:function(){return h._("__JHASH__WNjbF_NufjN__JHASH__")},Ok:function(){return h._("__JHASH__jfS2UYgLkw0__JHASH__")},OK:function(){return h._("__JHASH__0fTkBdoJkur__JHASH__")},"GOT IT":function(){return h._("__JHASH__hvpXlCIOxfk__JHASH__")},Unfollow:function(){return h._("__JHASH__oxlbFnQU7GK__JHASH__")},"Untitled Channel":function(){return h._("__JHASH__4T0Gc-4XQyT__JHASH__")},Admin:function(){return h._("__JHASH__GD6YAS4e7Bl__JHASH__")},"In Your Contacts":function(){return h._("__JHASH__HDnCDAfXSOj__JHASH__")},"In your contacts":function(){return h._("__JHASH__bjKsjXwDIwY__JHASH__")},"Search name or number":function(){return h._("__JHASH__GIMBITBn0nq__JHASH__")},"Not in your contacts":function(){return h._("__JHASH__VxtSU3IAlJC__JHASH__")},"No results found":function(){return h._("__JHASH__YAwYkWHb9oV__JHASH__")},"Request review":function(){return h._("__JHASH__RSaLV9cWzRO__JHASH__")},Followers:function(){return h._("__JHASH__qpK9qiHmzb3__JHASH__")},"Try Again":function(){return h._("__JHASH__riT9KFcSRXN__JHASH__")},"End-to-end encrypted":function(){return h._("__JHASH__nI4iCuHWHaE__JHASH__")},"Leave Group":function(){return h._("__JHASH__4UuwozywR5c__JHASH__")},"Exit Group":function(){return h._("__JHASH__BA0mOGeOyXA__JHASH__")},"Exit Community":function(){return h._("__JHASH__nykgp7dyzm___JHASH__")},"Report to WhatsApp":function(){return h._("__JHASH__4pBw7PKB2Wx__JHASH__")},Archive:function(){return h._("__JHASH__3ShPmxkDjGN__JHASH__")},Add:function(){return h._("__JHASH__zNsCZyppTxA__JHASH__")}};function a(a){var b=i[a];if(b)return b();throw c("err")("Unknown FbtCommon string "+a)}g["default"]=a}),226);
__d("WAWebDomAttrToData",["WACamelCase"],(function(a,b,c,d,e,f,g){function a(a){return c("WACamelCase")(a.replace(/^data-/,""))}g["default"]=a}),98);
__d("WAWebDomElementMatches",[],(function(a,b,c,d,e,f){var g=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function a(a,b){return!(a instanceof HTMLElement)?!1:g.call(a,b)}f["default"]=a}),66);
__d("WAWebCopyPasteCopyable.react",["WAWebClassnames","WAWebDomAttrToData","WAWebDomElementMatches","WAWebURLUtils","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="copyable-text",l="."+k,m="data-plain-text",n=c("WAWebDomAttrToData")(m),o="data-pre-plain-text",p=c("WAWebDomAttrToData")(o),q="data-app-text-template",r=c("WAWebDomAttrToData")(q);function a(a){return a instanceof HTMLElement&&c("WAWebDomElementMatches")(a,l)}function b(a){return a.dataset[p]}function e(a){return a.dataset[n]}function s(a){return a.dataset[r]}function t(a){var b=Array.from(a.querySelectorAll(l));return b.filter(function(a){return!b.some(function(b){return b!==a&&b.contains(a)})})}function u(a){return j.jsx("code",babelHelpers["extends"]({},F(a)))}u.displayName=u.name+" [from "+f.id+"]";function v(a){return j.jsx("del",babelHelpers["extends"]({},F(a)))}v.displayName=v.name+" [from "+f.id+"]";function w(a){return j.jsx("div",babelHelpers["extends"]({},F(a)))}w.displayName=w.name+" [from "+f.id+"]";function x(a){return j.jsx("em",babelHelpers["extends"]({},F(a)))}x.displayName=x.name+" [from "+f.id+"]";var y=j.forwardRef(z);function z(a,b){var c=a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["forwardedRef"]);a=F(a);return j.jsx("img",babelHelpers["extends"]({ref:(c=c)!=null?c:b},a,{tabIndex:a.onClick?0:-1,alt:(c=a.alt)!=null?c:""}))}z.displayName=z.name+" [from "+f.id+"]";function A(a){a=F(a);var b=a.href;return b&&!c("WAWebURLUtils").hasValidUrlScheme(b)?j.jsx("span",{}):j.jsx("a",babelHelpers["extends"]({},a))}A.displayName=A.name+" [from "+f.id+"]";function B(a){return j.jsx("span",babelHelpers["extends"]({},F(a)))}B.displayName=B.name+" [from "+f.id+"]";function C(a){return j.jsx("strong",babelHelpers["extends"]({},F(a)))}C.displayName=C.name+" [from "+f.id+"]";function D(a){return j.jsx("blockquote",babelHelpers["extends"]({},F(a)))}D.displayName=D.name+" [from "+f.id+"]";z=j.forwardRef(E);function E(a,b){var c=a.element;a=babelHelpers.objectWithoutPropertiesLoose(a,["element"]);return j.jsx(c,babelHelpers["extends"]({},F(a),{ref:b}))}E.displayName=E.name+" [from "+f.id+"]";E=z;function F(a){var b=a.plainText,e=a.prePlainText,f=a.appTextTemplate,g=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["plainText","prePlainText","appTextTemplate","xstyle"]);var h=babelHelpers["extends"]({},a);h.className=d("WAWebClassnames").classnamesConvertMeToStylexPlease(a.className,k);b!=null&&(h[m]=b);e!=null&&(h[o]=e);f!=null&&(h[q]=f);g!=null&&(h.className=d("WAWebClassnames").classnamesConvertMeToStylexPlease(h.className,(i||(i=c("stylex")))(g)));return h}g.COPYABLE_CSS_CLASS=k;g.PLAIN_TEXT_DATA_ATTR=n;g.APP_TEXT_TEMPLATE_DATA_ATTR=r;g.isCopyable=a;g.getPrePlainTextData=b;g.getPlainTextData=e;g.getAppTextTemplateData=s;g.findCopyableChildren=t;g.CopyableCode=u;g.CopyableDel=v;g.CopyableDiv=w;g.CopyableEm=x;g.CopyableImg=y;g.CopyableLink=A;g.CopyableSpan=B;g.CopyableStrong=C;g.CopyableBlockQuote=D;g.Copyable=E}),98);
__d("WAWebCopyPasteSelectable.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={noop:"_ao3e"};b=a;g["default"]=b}),98);
__d("WAWebCopyPasteSelectable.react",["WAWebClassnames","WAWebCopyPasteCopyable.react","WAWebCopyPasteSelectable.scss","WAWebDomElementMatches","WAWebURLUtils","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).forwardRef,l="selectable-text",m=d("WAWebCopyPasteCopyable.react").COPYABLE_CSS_CLASS+" "+l,n="."+l;m=m;var o="select-all",p="."+o;function q(a){if(!a)return!1;if(!(a instanceof HTMLElement)){var b=a.parentElement;return q(b)}return c("WAWebDomElementMatches")(a,n)||c("WAWebDomElementMatches")(a,n+" *")}function r(a){if(!a)return!1;return!(a instanceof HTMLElement)?r(a.parentElement):c("WAWebDomElementMatches")(a,p)}function a(a){if(!(a instanceof HTMLElement))return[];var b=q(a);if(b)return Array.from(a.childNodes);var c=Array.from(a.querySelectorAll(n));return c.filter(function(a){return!c.some(function(b){return b!==a&&b.contains(a)})})}function b(a){return!(a instanceof HTMLElement)?!1:!!a.querySelector(n)}function s(a){if(!a)return!1;return!(a instanceof HTMLElement)?s(a.parentElement):c("WAWebDomElementMatches")(a,p+" *")}function e(a){if(!s(a))return null;a=a;var b=0,c=5,d;while(a&&b<c){if(r(a)&&a instanceof HTMLElement){d=a;break}a=a.parentElement;b++}return d}function t(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableCode,babelHelpers["extends"]({},b)):j.jsx("code",babelHelpers["extends"]({},b))}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableDel,babelHelpers["extends"]({},b)):j.jsx("del",babelHelpers["extends"]({},b))}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableDiv,babelHelpers["extends"]({},b)):j.jsx("div",babelHelpers["extends"]({},b))}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableEm,babelHelpers["extends"]({},b)):j.jsx("em",babelHelpers["extends"]({},b))}w.displayName=w.name+" [from "+f.id+"]";k=k(function(a,b){a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["forwardedRef"]);var c=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableImg,babelHelpers["extends"]({forwardedRef:b},c)):j.jsx("img",babelHelpers["extends"]({ref:b},c,{tabIndex:c.onClick?0:-1,alt:(b=a.alt)!=null?b:""}))});function x(a){var b=D(a),e=a.href;return e!=null&&e!==""&&!c("WAWebURLUtils").hasValidUrlScheme(e)?j.jsx("span",{}):a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableLink,babelHelpers["extends"]({dir:"auto"},b)):j.jsx("a",babelHelpers["extends"]({dir:"auto"},b))}x.displayName=x.name+" [from "+f.id+"]";function y(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableSpan,babelHelpers["extends"]({},b)):j.jsx("span",babelHelpers["extends"]({},b))}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableStrong,babelHelpers["extends"]({},b)):j.jsx("strong",babelHelpers["extends"]({},b))}z.displayName=z.name+" [from "+f.id+"]";function A(a){var b=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").CopyableBlockQuote,babelHelpers["extends"]({},b)):j.jsx("blockquote",babelHelpers["extends"]({},b))}A.displayName=A.name+" [from "+f.id+"]";var B=j.forwardRef(C);function C(a,b){var c=a.element;a=babelHelpers.objectWithoutPropertiesLoose(a,["element"]);var e=D(a);return a.selectable?j.jsx(d("WAWebCopyPasteCopyable.react").Copyable,babelHelpers["extends"]({element:c},e,{ref:b})):j.jsx(c,babelHelpers["extends"]({},e,{ref:b}))}C.displayName=C.name+" [from "+f.id+"]";C=B;function D(a){var b=a.className,e=a.plainText,f=a.prePlainText,g=a.appTextTemplate,h=a.selectable,i=a.selectAll;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","plainText","prePlainText","appTextTemplate","selectable","selectAll"]);a=a;h&&(a.plainText=e,a.prePlainText=f,a.appTextTemplate=g);a.className=d("WAWebClassnames").classnamesConvertMeToStylexPlease(b,c("WAWebCopyPasteSelectable.scss").noop,(e={},e[l]=h,e[o]=h&&i,e));return a}g.SELECTABLE_CSS_CLASS=l;g.SELECTABLE_INPUT_CSS_CLASS=m;g.isSelectable=q;g.isSelectAll=r;g.findSelectableChildren=a;g.hasSelectableChildren=b;g.findSelectAllParent=e;g.SelectableCode=t;g.SelectableDel=u;g.SelectableDiv=v;g.SelectableEm=w;g.SelectableImg=k;g.SelectableLink=x;g.SelectableSpan=y;g.SelectableStrong=z;g.SelectableBlockQuote=A;g.Selectable=C}),98);
__d("WAWebDomElementIs",[],(function(a,b,c,d,e,f){function a(a,b){return a instanceof HTMLElement&&a.tagName.toLowerCase()===b.toLowerCase()}f["default"]=a}),66);
__d("WAWebDomIsTextNode",[],(function(a,b,c,d,e,f){function a(a){return Boolean(a&&a.nodeType===3)}f["default"]=a}),66);
__d("WAWebDomRangeGetContents",["invariant","WAWebDomIsTextNode"],(function(a,b,c,d,e,f,g,h){function a(a){if(a.collapsed)return[];if(a.startContainer===a.endContainer)return c("WAWebDomIsTextNode")(a.startContainer)?[a.startContainer]:Array.prototype.slice.call(a.startContainer.childNodes,a.startOffset,a.endOffset);var b=a.commonAncestorContainer.childNodes,d;a.commonAncestorContainer===a.startContainer?d=b[0]:d=i(a.commonAncestorContainer,a.startContainer);d||h(0,56328);a.commonAncestorContainer===a.endContainer?b=b[b.length-1]:b=i(a.commonAncestorContainer,a.endContainer);b||h(0,56327);a=b;b=function(a){return a==null?void 0:a.nextSibling};var e=[];d=d;while(d&&d!==a)e.push(d),d=b(d)||b(d.parentNode);e.push(a);return e}function i(a,b){b=b;while(b.parentNode!==a){if(!b.parentNode)return null;b=b.parentNode}return b}g["default"]=a}),98);
__d("WAWebCopyPasteClipboard",["WADepthFirstTraversal","WAWebCopyPasteCopyable.react","WAWebCopyPasteSelectable.react","WAWebDomElementIs","WAWebDomIsTextNode","WAWebDomRangeGetContents","lodash"],(function(a,b,c,d,e,f,g){a="application/whatsapp";var h=function(){function a(a){this.$1=a||""}var b=a.prototype;b.append=function(a,b){b===void 0&&(b="");this.$1=[this.toString(),a].filter(function(a){return a}).join(b);return this};b.prepend=function(a,b){b===void 0&&(b="");this.$1=[a,this.toString()].filter(function(a){return a}).join(b);return this};b.toString=function(){return this.$1};return a}(),i=function(){a.fromEl=function(b,c){c===void 0&&(c=d("WAWebCopyPasteCopyable.react").isCopyable(b));c=c?d("WAWebCopyPasteCopyable.react").getAppTextTemplateData(b):null;return new a("",c)};a.getTemplate=function(b){b=b;if(!b)return null;if(!(b instanceof HTMLElement)){if(!b.parentElement)return null;b=b.parentElement}var c=new a("${appText}");b=b;var e=5,f=0,g=!1;while(b&&f<e)b instanceof HTMLElement&&d("WAWebCopyPasteCopyable.react").isCopyable(b)?(c=a.fromEl(b,!0).append(c.toString()),g=g||!c.isPlainText(),e=5):f++,b=b.parentElement;return g?c.toString():null};function a(a,b){a===void 0&&(a=""),this.$1=new h(a),this.$2=b}var b=a.prototype;b.append=function(a,b){b===void 0&&(b="");this.$1.append(a,b);return this};b.prepend=function(a,b){b===void 0&&(b="");this.$1.prepend(a,b);return this};b.isPlainText=function(){return this.$2==null};b.toString=function(){return this.$2!=null?this.$2.replace(/\$\{appText\}/g,this.$1.toString()):this.$1.toString()};return a}();b=function(){function a(a,b){a=a||"";this.$1=new h(a);b!=null&&b!==""&&(this.$2=new i(a,b))}a.$3=function(b){var e=this;b=d("WAWebCopyPasteCopyable.react").findCopyableChildren(b);return c("lodash").reduceRight(b,function(a,b){return a.prepend(e.fromEl(b),"\n")},new a())};a.$4=function(a,b,e){var f=b.cloneContents().childNodes;b=c("WAWebDomRangeGetContents")(b);var g=[],h=[];for(var i=0;i<f.length;i++){var j=f[i],k=b[i].parentElement;k=(e||d("WAWebCopyPasteSelectable.react").isSelectable(b[i])||d("WAWebCopyPasteSelectable.react").hasSelectableChildren(j))&&(a.contains(b[i])||k!=null&&k.contains(a));k&&(g.push(j),h.push(b[i]))}f=g;b=h;k=e;if(f.length===1){j=f[0];k=k||d("WAWebCopyPasteSelectable.react").isSelectable(b[0]);k||(f=d("WAWebCopyPasteSelectable.react").findSelectableChildren(j),k=!1)}return{rangeNodes:f,parentIsSelectable:k}};a.fromCopyableEl=function(b,e){var f=this;e===void 0&&(e=!1);var g=d("WAWebCopyPasteCopyable.react").getPrePlainTextData(b)||"";g=new a(g);var h=d("WAWebCopyPasteCopyable.react").getPlainTextData(b),i=d("WAWebCopyPasteCopyable.react").getAppTextTemplateData(b);i=new a("",i);if(h!=null){i.appendPlainText(h);return g.append(i)}if(e||d("WAWebCopyPasteSelectable.react").isSelectable(b)){if(c("WAWebDomElementIs")(b,"br"))return g.appendPlainText("\n");c("lodash").reduceRight(b.childNodes,function(a,b){var d=c("WAWebDomElementIs")(b,"div")?"\n":"";return a.prepend(f.fromSelectableNode(b),d)},i);return g.append(i)}i.append(this.$3(b));return g.append(i)};a.fromEl=function(a,b){b===void 0&&(b=!1);return d("WAWebCopyPasteCopyable.react").isCopyable(a)||b?this.fromCopyableEl(a,b):this.$3(a)};a.fromNode=function(b,c){if(b instanceof HTMLElement)return this.fromEl(b,c);return c?this.fromSelectableNode(b):new a()};a.fromRange=function(b,e){var f=this,g=e.commonAncestorContainer,h=i.getTemplate(g);h=new a("",h);var j=d("WAWebCopyPasteSelectable.react").isSelectAll(g)?g:d("WAWebCopyPasteSelectable.react").findSelectAllParent(g);if(j instanceof HTMLElement)return h.append(this.fromCopyableEl(j));j=this.$4(b,e,d("WAWebCopyPasteSelectable.react").isSelectable(g));var k=j.parentIsSelectable;b=j.rangeNodes;return c("lodash").reduceRight(b,function(a,b){b=f.fromNode(b,k);var c=!k&&!b.toAppString().endsWith("\n")?"\n":"";return a.prepend(b,c)},h)};a.fromSelectableNode=function(b){var e=this;if(c("WAWebDomIsTextNode")(b))return new a(b.textContent);if(!(b instanceof HTMLElement))return new a();var f=b,g=new a();c("WADepthFirstTraversal")(f,function(a){return c("WAWebDomIsTextNode")(a)||d("WAWebCopyPasteCopyable.react").isCopyable(a)?[]:Array.from(a.childNodes)},function(a){var f;d("WAWebCopyPasteCopyable.react").isCopyable(a)&&a instanceof HTMLElement?(f=e.fromCopyableEl(a,!0),g.append(f)):c("WAWebDomIsTextNode")(a)?g.appendPlainText(a.textContent):c("WAWebDomElementIs")(b,"br")&&g.appendPlainText("\n")});return g};a.fromSelection=function(b,d){var e=this,f=new a();return c("lodash").range(d.rangeCount).map(function(a){a=d.getRangeAt(a);return e.fromRange(b,a)}).reduce(function(a,b){return a.append(b,"\n")},f)};var b=a.prototype;b.append=function(a,b){b===void 0&&(b="");a.hasAppText()?(this.$2=this.$2||new i(this.toPlainString()),this.$2.append(a.toAppString(),b)):this.hasAppText()&&this.$2.append(a.toAppString(),b);this.$1.append(a.toPlainString(),b);return this};b.appendPlainText=function(b,c){c===void 0;this.append(new a(b));return this};b.prepend=function(a,b){b===void 0&&(b="");a.hasAppText()?(this.$2=this.$2||new i(this.toPlainString()),this.$2.prepend(a.toAppString(),b)):this.hasAppText()&&this.$2.prepend(a.toAppString(),b);this.$1.prepend(a.toPlainString(),b);return this};b.hasAppText=function(){return Boolean(this.$2)};b.toAppText=function(){return this.hasAppText()?this.$2:new i(this.toPlainString())};b.toPlainString=function(){return this.$1.toString()};b.toAppString=function(){return this.hasAppText()?this.$2.toString():this.toPlainString()};return a}();g.APP_TEXT_MIMETYPE=a;g.Clipboard=b}),98);
__d("WAWebCopyPasteCopyableArea.react",["WAWebClassnames","WAWebCopyPasteClipboard","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j="copyable-area";b=i.forwardRef(a);function a(a,b){var c=a.canCut,e=a.children,f=a.className,g=a.testid;g=babelHelpers.objectWithoutPropertiesLoose(a,["canCut","children","className","testid"]);a=babelHelpers["extends"]({},g,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(f,"xnpuxes",j),onCopy:l,onCut:c?m:void 0});return i.jsx("div",babelHelpers["extends"]({},a,{ref:b,"data-testid":void 0,children:e}))}a.displayName=a.name+" [from "+f.id+"]";e=b;function k(a,b){b=a.currentTarget;if(!(b instanceof HTMLElement))return!1;b=d("WAWebCopyPasteClipboard").Clipboard.fromSelection(b,window.getSelection());a.clipboardData.setData("text/plain",b.toPlainString());try{a.clipboardData.setData(d("WAWebCopyPasteClipboard").APP_TEXT_MIMETYPE,b.toAppString())}catch(a){}return!0}function l(a){k(a,window.getSelection())&&(a.stopPropagation(),a.preventDefault())}function m(a){var b=window.getSelection();k(a,b)&&(b.deleteFromDocument(),a.stopPropagation(),a.preventDefault(),a.target.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))}g["default"]=e}),98);
__d("useWAWebPrevious",["react"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=j();i(function(){b.current=a});return b.current}g["default"]=a}),98);
__d("WAWebDragAndDrop.react",["react","useWAWebPrevious"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useImperativeHandle,m=b.useState;function n(a){if(!a.dataTransfer)return;try{if(!a.dataTransfer.dropEffect)return}catch(a){return}a.dataTransfer.effectAllowed&&(a.nativeEvent.dataTransfer.dropEffect="copy")}e=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var d=a.disableFromWithin,e=a.onDrop,f=a.onDragChange;a=m(!1);var g=a[0],h=a[1];a=m(!1);var i=a[0],o=a[1];a=m(!1);var p=a[0],q=a[1],r=c("useWAWebPrevious")(i),s=function(a){if(!d)return;h(!0)},t=function(a){if(!d)return;h(!1)};a=function(a){a.preventDefault();a.stopPropagation();o(!1);q(!0);if(!e||g)return;e(a)};var u=function(a){a.preventDefault();a.stopPropagation();if(i||g)return;o(!0);q(!1);n(a)},v=function(a){a.preventDefault();a.stopPropagation();if(!i)return;o(!1);q(!1)};k(function(){if(r==null||r===i||!f)return;f(i,p)},[p,i,f,r]);l(b,function(){return{onDragStart:s,onDragEnd:t,onDragOver:u}});return j.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x1wvqwft xh8yej3 x5yr21d",style:i?{}:{display:"none"},onDragLeave:v,onDrop:a},"mask")}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),98);
__d("WAWebL10NFbtTypeUtils",["fbt","WATypeUtils"],(function(a,b,c,d,e,f,g,h){function a(a){return d("WATypeUtils").isString(a)||h.isFbtInstance(a)}g.isStringOrFbt=a}),98);
__d("WAWebModalManager",["Promise","WAWebEventEmitter"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.open=function(a,b){this.trigger("open_modal",a,b)};d.exists=function(a){this.trigger("exists_modal",a)};d.existsAsync=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.exists(b)})};d.close=function(a){this.trigger("close_modal",a)};d.openMedia=function(a,b){this.trigger("open_media",a,b)};d.existsMedia=function(a){this.trigger("exists_media",a)};d.closeMedia=function(){this.trigger("close_media")};d.openAlert=function(a,b){this.trigger("open_alert",a,b)};d.existsAlert=function(a){this.trigger("exists_alert",a)};d.closeAlert=function(a){this.trigger("close_alert",a)};d.getRef=function(a){this.trigger("get_ref",a)};return c}(c("WAWebEventEmitter"));d=new a();g.ModalManager=d}),98);
__d("WAWebWamEnumTsExternalEventSource",[],(function(a,b,c,d,e,f){a=Object.freeze({CALL:1,VIDEO:2,PTT_RECORD:3,PTT_PLAY:4});f.TS_EXTERNAL_EVENT_SOURCE=a}),66);
__d("WAWebTsExternalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumTsExternalEventSource"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({TsExternal:[4574,{relativeTimestampMs:[1,a.TYPES.INTEGER],tsDuration:[2,a.TYPES.INTEGER],tsExternalEventSource:[3,d("WAWebWamEnumTsExternalEventSource").TS_EXTERNAL_EVENT_SOURCE],tsSessionId:[4,a.TYPES.INTEGER],tsTimestampMs:[5,a.TYPES.INTEGER],unifiedSessionId:[6,a.TYPES.STRING]},[1,1,1],"regular"]},{TsExternal:[]});g.TsExternalWamEvent=b}),98);
__d("WAWebTimeSpentLoggingExternal",["WALogger","WAWebABProps","WAWebTimeSpentLoggingSession","WAWebTsExternalWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] next interval for ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] preparing to log ",": ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] "," duration (","ms) too short to log"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] begin ",""]);k=function(){return a};return a}var l=1e3,m=new Set();function a(){return m.size>0}function b(a){var b=d("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession();d("WALogger").DEV(k(),a);var c={source:a,tsSessionId:b.id,startTimeMs:b.relativeTimestampMs};o(c);m.add(c);var e=!1;return function(){if(e)return;q(c);e=!0}}function n(a,b){b=b-a.startTimeMs;if(b<l){d("WALogger").DEV(j(),a.source,b);return}d("WALogger").DEV(i(),a.source,b);return{tsSessionId:a.tsSessionId,tsDuration:Math.floor(b/1e3),tsExternalEventSource:a.source,relativeTimestampMs:a.startTimeMs}}function o(a){a.intervalTimeoutId=self.setTimeout(function(){return p(a)},d("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")/2)}function p(a){d("WAWebTimeSpentLoggingSession").markTimeSpentActivity();d("WALogger").DEV(h(),a.source);var b=d("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession();b=b.relativeTimestampMs;var c=n(a,b);if(c==null)return;new(d("WAWebTsExternalWamEvent").TsExternalWamEvent)(c).commit();a.startTimeMs=b;o(a)}function q(a){a.intervalTimeoutId!=null&&self.clearTimeout(a.intervalTimeoutId);m["delete"](a);var b=d("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession();b=b.relativeTimestampMs;a=n(a,b);if(a==null)return;new(d("WAWebTsExternalWamEvent").TsExternalWamEvent)(a).commit()}g.tsExternalEventsInProgress=a;g.beginTsExternalEvent=b}),98);
__d("WAWebTsBitArrayWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({TsBitArray:[4332,{bitarrayHigh:[1,a.TYPES.INTEGER],bitarrayLength:[2,a.TYPES.INTEGER],bitarrayLow:[3,a.TYPES.INTEGER],cumulativeBits:[4,a.TYPES.INTEGER],relativeTimestampMs:[5,a.TYPES.INTEGER],sessionSeq:[6,a.TYPES.INTEGER],tsSessionId:[7,a.TYPES.INTEGER],tsTimestampMs:[8,a.TYPES.INTEGER],unifiedSessionId:[9,a.TYPES.STRING]},[1,1,1],"regular"]},{TsBitArray:[]});g.TsBitArrayWamEvent=b}),98);
__d("WAWebTimeSpentLoggingBitArray",["Promise","WALogger","WAWebPermanentStorage","WAWebTsBitArrayWamEvent"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] logging bitarray ",":",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error parsing stashed bitarray data (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."]);n=function(){return a};return a}function o(a,b){var d=""+a.bitmap[0];for(var e=1;e<a.bitmap.length;++e)d+=":"+a.bitmap[e];e=a.sessionId+":"+a.sessionSeq+":"+a.sessionCum+(":"+a.startTime+":"+a.bitmapLen+(a.relativeStartTimeMs==null?"":":"+a.relativeStartTimeMs)+"$"+d);d=c("WAWebPermanentStorage").getItem(b);if(d==null){c("WAWebPermanentStorage").setItem(b,e);return[a]}var f=q(d);f.push(a);c("WAWebPermanentStorage").setItem(b,d+"_"+e);return f}function a(a,e){a=o(a,e);(h||(h=b("Promise"))).all(a.map(p)).then(function(){return c("WAWebPermanentStorage").removeItem(e)})["catch"](function(){d("WALogger").ERROR(n(),e)})}function e(a,e){var f=c("WAWebPermanentStorage").getItem(a);if(f!=null){f=q(f);if(f==null){d("WALogger").WARN(m(),a);return}(h||(h=b("Promise"))).all(f.map(e)).then(function(){return c("WAWebPermanentStorage").removeItem(a)})["catch"](function(){d("WALogger").ERROR(l(),a)})}}function p(a){var b,c=Number(a.sessionId);b=new(d("WAWebTsBitArrayWamEvent").TsBitArrayWamEvent)({tsSessionId:Number.isSafeInteger(c)?c:-1,bitarrayLength:a.bitmapLen,bitarrayLow:a.bitmap[0],bitarrayHigh:(b=a.bitmap[1])!=null?b:void 0,cumulativeBits:a.sessionCum,relativeTimestampMs:(b=a.relativeStartTimeMs)!=null?b:void 0,sessionSeq:a.sessionSeq});d("WALogger").DEV(k(),c,a.sessionSeq);return b.commitAndWaitForFlush()}function q(a){return a.length===0?[]:a.split("_").map(r).filter(Boolean)}function r(a){var b=a.split("$"),c=b[0],e=b[1];b=b.slice(2);if(b.length||!e){d("WALogger").WARN(j()).devConsole(a);return}b=c.split(":");if(!(b.length===5||b.length===6)){d("WALogger").WARN(i()).devConsole(a);return}c=new Int32Array(e.split(":").map(function(a){return Number(a)}));a={sessionId:b[0],sessionSeq:Number(b[1]),sessionCum:Number(b[2]),startTime:Number(b[3]),bitmapLen:Number(b[4]),bitmap:c};b[5]!=null&&(a.relativeStartTimeMs=Number(b[5]));return a}g.stashBitarrayData=o;g.stashAndFlushBitarray=a;g.flushBitarrays=e;g.postTsBitArrayEvent=p}),98);
__d("WAWebWamTimeSpentArray",["WALogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] _initArray at time ",""]);h=function(){return a};return a}var i=2,j=i*32;a=function(){function a(a){var b=this;this.sequenceId=0;this.ship=function(a){var c=b.bitmap;if(!c)return;var d=Date.now();d>b.lastActiveInMS&&(b.bitmapLength=Math.min(j,Math.ceil(d/1e3-b.startTimeInSec)));c={sessionId:b.sessionId,startTime:b.startTimeInSec,bitmap:c,bitmapLen:b.bitmapLength,sessionSeq:b.sequenceId,sessionCum:b.cumulativeBitsSet,relativeStartTimeMs:(d=b.relativeStartTimeMs)!=null?d:void 0};d=a||b.loggingCallback;d(c);b.timer.cancel();b.bitmap=null};this.loggingCallback=a.loggingCallback;this.timer=new(d("WAShiftTimer").ShiftTimer)(this.ship);var c=a.getSessionData;a=a.postUpdate;c!=null&&(this.fetchAndUpdateSession=function(){var a=c(),d=a.id;a=a.relativeTimeMs;b.sessionId=d;b.relativeStartTimeMs=a;b.cumulativeBitsSet=0});this.postUpdate=a;this.$1();this.$2(Math.floor(Date.now()/1e3))}var b=a.prototype;b.$1=function(){this.fetchAndUpdateSession!=null?this.fetchAndUpdateSession():(this.sessionId=k(),this.cumulativeBitsSet=0,this.sequenceId=-1)};b.$2=function(a){this.fetchAndUpdateSession!=null&&this.fetchAndUpdateSession();d("WALogger").LOG(h(),a);this.startTimeInSec=a;this.lastActiveInMS=this.startTimeInSec*1e3;this.bitmap=new Int32Array(i);this.bitmap[0]=1;this.bitmapLength=1;this.cumulativeBitsSet+=1;this.sequenceId+=1;this.postUpdate==null?void 0:this.postUpdate();a=j*1e3;this.timer.debounceAndCap(a,a)};b.$3=function(a){var b=a-this.startTimeInSec;this.bitmap&&(b<0||b>=j)&&this.ship();!this.bitmap?this.$2(a):(this.bitmap[b>>5]|=1<<(b&31),this.bitmapLength=b+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=a*1e3)};b.update=function(a){if(a>=this.lastActiveInMS&&a-this.lastActiveInMS<1e3)return;this.$3(Math.floor(a/1e3));this.postUpdate==null?void 0:this.postUpdate()};b.shipAndEndSession=function(a){this.ship(a),this.$1()};return a}();function k(){return Math.floor(2147483648*Math.random()).toString(36)}g["default"]=a}),98);
__d("WAWebTimeSpentLoggingSession",["WALogger","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebTimeSpentLoggingBitArray","WAWebTimeSpentLoggingExternal","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamTimeSpentArray"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] processing array data for an expired session, but no session found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] creating time spent array"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] initializing session"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] restored ts session: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] malformed ts session: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] no session to restore"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] persisted session"]);n=function(){return a};return a}var o=Math.pow(2,31)-1,p=null,q=null,r=new(d("WAShiftTimer").ShiftTimer)(function(){p!=null&&(c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION,p),d("WALogger").LOG(n()))});function s(a){a===void 0&&(a=!1);if(a){r.forceRunNow();return}a=10;r.onOrBefore(a*1e3)}function a(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION);if(a==null||typeof a!=="object"){d("WALogger").LOG(m());p=null;return}var b=a.id,e=a.startTimestampMs,f=a.lastActivityTimestampMs,g=a.cumulativeBitsSet,h=a.sequenceId,i=a.relativeTimestampMs;if(typeof b!=="number"||typeof e!=="number"||typeof f!=="number"||typeof g!=="number"||typeof h!=="number"||typeof i!=="number"){d("WALogger").LOG(l(),JSON.stringify(a));p=null;return}p={id:b,startTimestampMs:e,lastActivityTimestampMs:f,cumulativeBitsSet:g,sequenceId:h,relativeTimestampMs:i};d("WALogger").LOG(k(),JSON.stringify(p))}function t(){var a=d("WATimeUtils").unixTimeMs();if(p==null||a-p.lastActivityTimestampMs>=v()&&!d("WAWebTimeSpentLoggingExternal").tsExternalEventsInProgress()){q=p;d("WALogger").LOG(j());var b={id:Math.floor(Math.random()*o),startTimestampMs:a,lastActivityTimestampMs:a,cumulativeBitsSet:0,sequenceId:-1,relativeTimestampMs:0};p=b;s(!0);return b}p.relativeTimestampMs=a-p.startTimestampMs;return p}function u(){t().lastActivityTimestampMs=d("WATimeUtils").unixTimeMs(),s()}function v(){return d("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")}function b(){d("WALogger").LOG(i());return new(c("WAWebWamTimeSpentArray"))({getSessionData:function(){var a=t();return{relativeTimeMs:a.relativeTimestampMs,id:a.id.toString()}},postUpdate:u,loggingCallback:function(a){d("WAWebTimeSpentLoggingBitArray").stashAndFlushBitarray(w(a),d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_BITARRAY_EVENT)}})}function w(a){var b=t(),c=Number(a.sessionId);if(b.id!==c){var e;if(q!=null&&((e=q)==null?void 0:e.id)===c)b=q;else{d("WALogger").WARN(h());return a}}b.cumulativeBitsSet+=a.sessionCum;b.sequenceId++;a.sessionSeq=b.sequenceId;a.sessionCum=b.cumulativeBitsSet;s(!0);return a}g.restoreTimeSpentSession=a;g.getOrInitTimeSpentSession=t;g.markTimeSpentActivity=u;g.createTimeSpentArray=b;g.preprocessTsArrayData=w}),98);
__d("WAWebWamEnumReferrerAction",[],(function(a,b,c,d,e,f){a=Object.freeze({NULLSTATE_ASK_META_AI:1,TYPEAHEAD_ASK_META_AI:2,NULLSTATE_PAPER_PLANE:3,TYPEAHEAD_PAPER_PLANE:4,TYPEAHEAD_SEND:5,FAVICON:6,THREAD_OPEN:7});f.REFERRER_ACTION=a}),66);
__d("WAWebWamEnumThreadType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP:1,BROADCAST:2,INDIVIDUAL:3,STATUS:4,CHANNEL:5,SUB_GROUP:6,DEFAULT_SUB_GROUP:7,PARENT_GROUP:8,BOT:9});f.THREAD_TYPE=a}),66);
__d("WAWebWamEnumTsSurface",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1,COMMUNITY_HOME:2,COMMUNITY_TAB:3,CHAT_THREAD:4,CHAT_INFO_PAGE:5,CHAT_LIST:6,COMMUNITY_NAVIGATION:7,BACKGROUND:8,RESIGN:9,SUBGROUP_SWITCHER:10,COMMUNITY_COMPOSER:11,MEDIA_VIEWER:12,ALL_MEDIA:13,STREAMING_MEDIA_VIEWER:14,CALLS_HOME_TAB:15,IN_CALL_UI:16,STATUS_HOME_TAB:17,STATUS_COMPOSER:18,STATUS_VIEW:19,CAMERA:20,PHOTO_VIDEO_LIBRARY:21,SETTINGS_HOME_TAB:22,TOOLS_TAB:23,COMMUNITY_SETTINGS:24,CHANNEL_UPDATES_HOME:25,CHANNEL_THREAD:26,CHANNEL_DIRECTORY:27,CHANNEL_PROFILE:28,CHANNEL_FORWARD:29,CHANNEL_PRODUCER_MEDIA_EDITOR:30,CHANNEL_CREATE:31,CHANNEL_EDIT:32,CHANNEL_DELETE:33,STATUS_COMPOSER_TEXT:34,LIGHTWEIGHT_CALL_UI:35,AI_HOME:36,LIGHTWEIGHT_CALL_BANNER:37,LIGHTWEIGHT_CALL_NUX:38,CALL_INFO_PAGE:39,SMB_CATALOG:40,SMB_CATALOG_SHARE_LINK:41,SMB_CATALOG_SHARE_PRODUCT_LINK:42,SMB_CATALOG_SETTINGS:43,SMB_CATALOG_PRODUCT:44,SMB_CATALOG_NEW_COLLECTION:45,SMB_CATALOG_EDIT_COLLECTION:46,SMB_CATALOG_CREATE_PRODUCT:47,SMB_CATALOG_EDIT_PRODUCT:48,SMB_CATALOG_NEW_COLLECTION_ADD_ITEMS:49,SMB_CATALOG_COLLECTION_UPDATE_ITEMS:50,SMB_CATALOG_COLLECTIONS:51,SMB_CATALOG_COLLECTION_REORDER:52,SMB_CATALOG_COLLECTION_PRODUCTS:53,SMB_CATALOG_COLLECTION_PRODUCTS_REORDER:54,CREATE_EVENT:55,EVENT_PAGE:56,EVENTS_IN_GROUP:57,CATALOG_HOME:59,CATALOG_COLLECTION:60,CATALOG_ITEM:61,CATALOG_CART:62,FLOWS_EXPERIENCE:63,BUSINESS_PROFILE_EDIT:64,BUSINESS_PROFILE_EDIT_NAME:65,BUSINESS_PROFILE_EDIT_CATEGORIES:66,BUSINESS_PROFILE_EDIT_DESCRIPTION:67,BUSINESS_PROFILE_EDIT_WEBSITE:68,BUSINESS_PROFILE_EDIT_EMAIL:69,BUSINESS_PROFILE_EDIT_ADDRESS:70,BUSINESS_PROFILE_EDIT_HOURS:71,BUSINESS_PROFILE_EDIT_COVER_PHOTO:72,BUSINESS_PROFILE_LINK_FB_IG:73,BUSINESS_PROFILE_HELP_PAGE_LINK_FB_IG:74,PAYMENTS_HOME:75,PAYMENTS_HOME_TRANSACTIONS:76,PAYMENTS_HOME_RECENT_MERCHANTS:77,PAYMENTS_HOME_INVITE_OTHERS:78,PAYMENTS_HOME_HELP:79,MESSAGE_MENU:80,PIN_MESSAGE_REPLACEMENT_DIALOG:81,PIN_MESSAGE_EXPIRATION_DIALOG:82,MY_STATUS_LIST:83,ALL_STATUS_LIST:84,PIN_BANNER:85,CALL_BANNER:86,LANDING_SCREEN:87,NEW_CHAT:88,GROUP_MEMBER_ADD_GROUP_CREATION:89,GROUP_MEMBER_ADD_EXISTING_GROUP:90,GROUP_CHAT:91,GROUP_CREATION:92,CONTACT_NOTIFICATION_SETTING_PAGE:93,CUSTOMIZE_NOTIFICATION_SETTING_PAGE:94,ADVANCED_NOTIFICATION_SETTINGS_PAGE:95,ARCHIVED_MESSAGES_TAB:96,STARRED_MESSAGES_TAB:97,CONTACT_PERM_UPSELL:98,CHANNEL_DIRECTORY_CATEGORIES:99,SEARCH:100,STATUS_VIEWER_SHEET:101,CHANNEL_PRODUCER_INSIGHTS_REACH:102,CHANNEL_PRODUCER_INSIGHTS_GROWTH:103,CHANNEL_PRODUCER_INSIGHTS_FOLLOWERS:104,COMMUNITY_MEDIA:105,FORWARD_SELECTION_SCREEN:106,CONTACT_SELECTION_SCREEN:107,EXTERNAL_SHARE:108,MEDIA_COMPOSER:109,SHARED_TEXT_COMPOSER:110});f.TS_SURFACE=a}),66);
__d("WAWebTsNavigationWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumEntryPointConversationInitiated","WAWebWamEnumReferrerAction","WAWebWamEnumThreadType","WAWebWamEnumTsSurface","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({TsNavigation:[4334,{cid:[19,a.TYPES.STRING],entryPointConversationInitiated:[23,d("WAWebWamEnumEntryPointConversationInitiated").ENTRY_POINT_CONVERSATION_INITIATED],entryPointConversionApp:[24,a.TYPES.STRING],entryPointConversionSource:[25,a.TYPES.STRING],groupSize:[1,a.TYPES.INTEGER],isCatalogVisible:[29,a.TYPES.BOOLEAN],isCloudapi:[26,a.TYPES.BOOLEAN],isMetaAiThread:[30,a.TYPES.BOOLEAN],isOnpremises:[27,a.TYPES.BOOLEAN],isSmb:[28,a.TYPES.BOOLEAN],navigationDestination:[2,d("WAWebWamEnumTsSurface").TS_SURFACE],navigationSource:[3,d("WAWebWamEnumTsSurface").TS_SURFACE],referrerAction:[31,d("WAWebWamEnumReferrerAction").REFERRER_ACTION],relativeTimestampMs:[4,a.TYPES.INTEGER],smbCatalogBusinessVertical:[20,a.TYPES.STRING],smbCatalogIsCatalogVisible:[21,a.TYPES.BOOLEAN],smbCatalogIsToggleCart:[22,a.TYPES.BOOLEAN],threadType:[7,d("WAWebWamEnumThreadType").THREAD_TYPE],tsSessionId:[5,a.TYPES.INTEGER],tsTimestampMs:[32,a.TYPES.INTEGER],typeOfGroup:[6,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM],unifiedSessionId:[33,a.TYPES.STRING]},[1,1,1],"regular"]},{TsNavigation:[]});g.TsNavigationWamEvent=b}),98);
__d("WAWebTimeSpentLoggingNavigation",["WALogger","WAShiftTimer","WAWebABProps","WAWebTimeSpentLoggingSession","WAWebTsNavigationWamEvent","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamEnumTsSurface","gkx","react"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] debug logging set to "," [","]"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] found pending background navigation from ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] set pending background navigation from ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] setPendingBackgroundNavigation: already in background"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] skipping unknown -> unknown navigation."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] already logged navigation to ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] missing destination for navigation from ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] flushing empty queue!"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] exit "," [","]"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] cleaning up surface id "," but it's no longer visible"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][nav] enter "," [","]"]);s=function(){return a};return a}var t=(h||d("react")).useEffect,u={unknown:d("WAWebWamEnumTsSurface").TS_SURFACE.UNKNOWN,"chat-list":d("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_LIST,chat:d("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,"community-tab":d("WAWebWamEnumTsSurface").TS_SURFACE.COMMUNITY_TAB,"community-info":d("WAWebWamEnumTsSurface").TS_SURFACE.COMMUNITY_HOME,"community-navigation":d("WAWebWamEnumTsSurface").TS_SURFACE.COMMUNITY_NAVIGATION,"community-subgroup-switcher":d("WAWebWamEnumTsSurface").TS_SURFACE.SUBGROUP_SWITCHER,"group-info-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_INFO_PAGE,"contact-info-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_INFO_PAGE,"new-community-info-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.COMMUNITY_COMPOSER,"media-viewer":d("WAWebWamEnumTsSurface").TS_SURFACE.MEDIA_VIEWER,"media-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.ALL_MEDIA,camera:d("WAWebWamEnumTsSurface").TS_SURFACE.CAMERA,"youtube-player":d("WAWebWamEnumTsSurface").TS_SURFACE.STREAMING_MEDIA_VIEWER,"settings-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.SETTINGS_HOME_TAB,background:d("WAWebWamEnumTsSurface").TS_SURFACE.BACKGROUND,"tools-tab":d("WAWebWamEnumTsSurface").TS_SURFACE.TOOLS_TAB,"archived-chats-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.ARCHIVED_MESSAGES_TAB,"starred-messages-drawer":d("WAWebWamEnumTsSurface").TS_SURFACE.STARRED_MESSAGES_TAB,"forward-selection-modal":d("WAWebWamEnumTsSurface").TS_SURFACE.FORWARD_SELECTION_SCREEN,status:d("WAWebWamEnumTsSurface").TS_SURFACE.STATUS_HOME_TAB,"status-view":d("WAWebWamEnumTsSurface").TS_SURFACE.STATUS_VIEW,"status-composer-text":d("WAWebWamEnumTsSurface").TS_SURFACE.STATUS_COMPOSER_TEXT,"status-composer-media":d("WAWebWamEnumTsSurface").TS_SURFACE.STATUS_COMPOSER,"channel-updates-home":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_UPDATES_HOME,"channel-thread":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_THREAD,"channel-directory-home":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_DIRECTORY,"channel-directory-categories-home":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_DIRECTORY_CATEGORIES,"channel-profile":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_PROFILE,"channel-forward":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_FORWARD,"channel-producer-media-editor":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_PRODUCER_MEDIA_EDITOR,"channel-edit-page":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_EDIT,"channel-create-page":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_CREATE,"channel-delete-page":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_DELETE,"channel-insights-reach":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_PRODUCER_INSIGHTS_REACH,"channel-insights-growth":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_PRODUCER_INSIGHTS_GROWTH,"channel-insights-followers":d("WAWebWamEnumTsSurface").TS_SURFACE.CHANNEL_PRODUCER_INSIGHTS_FOLLOWERS,"create-event":d("WAWebWamEnumTsSurface").TS_SURFACE.CREATE_EVENT,"event-info":d("WAWebWamEnumTsSurface").TS_SURFACE.EVENT_PAGE,"events-in-group":d("WAWebWamEnumTsSurface").TS_SURFACE.EVENTS_IN_GROUP},v,w=[];function a(a){t(function(){var b,c=x((b=a)!=null?b:{surface:"unknown"});return function(){return z(c)}},[])}function x(a){var b,c=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),e=y(a)?{id:c,surface:"unknown"}:babelHelpers["extends"]({},a,{id:c});b=(b=w[w.length-1])!=null?b:{surface:"background",id:-1};w.push(e);I()&&d("WALogger").DEV(s(),a.surface,w.map(function(a){return a.surface}));C(b);return c}function y(a){return(1<<u[a.surface]&d("WAWebABProps").getABPropConfigValue("ts_surface_killswitch"))!==0}function z(a){var b=w.findIndex(function(b){return b.id===a});if(b===-1){d("WALogger").LOG(r(),a);return}var c=w[b];w.splice(b,1);I()&&d("WALogger").DEV(q(),c.surface,w.map(function(a){return a.surface}));C(c)}var A=[],B=new(d("WAShiftTimer").ShiftTimer)(function(){if(A.length===0){d("WALogger").LOG(p());return}var a;for(var b=0;b<A.length;b++){var c=A[b];if(a==null){a=c;continue}a.destId===c.sourceId?(c.event.navigationSource=a.event.navigationSource,c.event.relativeTimestampMs=a.event.relativeTimestampMs):a.event.commit();a=c}(c=a)==null?void 0:c.event.commit();A=[]});function C(a){var b,c=w[w.length-1];c==null&&(d("WALogger").LOG(o(),a.surface),c={surface:"unknown",id:-1});if(c.id===((b=v)==null?void 0:b.id)){d("WALogger").DEV(n(),c.surface);return}b=d("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession();F();if(a.surface==="unknown"&&c.surface==="unknown"){I()&&d("WALogger").DEV(m());return}A.push({sourceId:a.id,destId:c.id,event:new(d("WAWebTsNavigationWamEvent").TsNavigationWamEvent)({tsSessionId:b.id,relativeTimestampMs:b.relativeTimestampMs,navigationSource:u[a.surface],navigationDestination:u[c.surface],groupSize:(b=c.extras)==null?void 0:b.groupSize,typeOfGroup:(a=c.extras)==null?void 0:a.typeOfGroup,threadType:(b=c.extras)==null?void 0:b.threadType,cid:(a=c.extras)==null?void 0:(b=a.channelWid)==null?void 0:b.user})});B.onOrBefore(100);v=c}var D=null;function b(){D=x({surface:"background"})}function E(){var a="unknown";w.length>0&&(a=w[w.length-1].surface);return a}function e(){var a=d("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),b=E();b==="background"&&d("WALogger").DEV(l());c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_PENDING_BACKGROUND_NAVIGATION,{id:a.id,relativeTimestampMs:a.relativeTimestampMs,source:b});d("WALogger").DEV(k(),b)}function F(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_PENDING_BACKGROUND_NAVIGATION);if(a==null||typeof a!=="object")return;var b=a.id,e=a.relativeTimestampMs;a=a.source;if(typeof b!=="number"||typeof e!=="number"||typeof a!=="string")return;if(u[a]==null)return;d("WALogger").DEV(j(),a);new(d("WAWebTsNavigationWamEvent").TsNavigationWamEvent)({tsSessionId:b,relativeTimestampMs:e,navigationSource:u[a],navigationDestination:u.background}).commit();c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.TIME_SPENT_PENDING_BACKGROUND_NAVIGATION,null)}function f(){if(D==null)return;z(D)}var G=!1;function H(){c("gkx")("26258")||(G=!G,d("WALogger").DEV(i(),G,w.map(function(a){return a.surface})))}function I(){return!c("gkx")("26258")?G:!1}g.useTsNavigation=a;g.tsNavigationEnter=x;g.tsNavigationExit=z;g.logTsBackgroundNavigation=b;g.setPendingBackgroundNavigation=e;g.logTsForegroundNavigation=f;g.toggleTsNavigationDebug=H}),98);
__d("WAWebModal.react",["$InternalEnum","WAWebCopyPasteCopyableArea.react","WAWebDragAndDrop.react","WAWebL10NFbtTypeUtils","WAWebModalManager","WAWebTimeSpentLoggingNavigation","WAWebUIRefreshGatingUtils","lodash","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useRef,m=b("$InternalEnum").Mirrored(["Box","BoxLarge","Flex","Guide","Tower","Auto","Invite","InviteNew","ColumnButtons","Multiline","Upgrade","Promote","CommandPalette","CommandPaletteV2","QuickReplies","StatusViewerList","LinkPopup","StatusReport","ChatAssignment","TowerLarge","HistorySyncProgress","MessageEdit","ForwardMediaWithCaption","MessageActionsModal","DataSharing","DeleteNewsletter","Small","LabelList","LabelEdit","LabelChooseColor","Comments","BotNut","EventCreation","AdAccountRecovery"]),n={overlay:{position:"xixxii4",top:"x13vifvy",start:"x17qophe",left:null,right:null,boxSizing:"x9f619",width:"xh8yej3",height:"x5yr21d",$$css:!0},backdrop:{zIndex:"x1bpt9pm",overflowX:"xw2csxc",overflowY:"x1odjw0f",backgroundColor:"xa03szm",$$css:!0},popup:{boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",flexBasis:"xdl72j9",flexDirection:"xdt5ytf",width:"xvue9z",paddingTop:"x1xy6bms",paddingEnd:"xxbr6pl",paddingBottom:"xx6bls6",paddingStart:"xbbxn1n",overflowX:"x6ikm8r",overflowY:"x10wlt62",backgroundColor:"x1v8jjaa",borderTopStartRadius:"xkwfhqy",borderTopEndRadius:"x17e6fzg",borderBottomEndRadius:"x15dh256",borderBottomStartRadius:"x1t7u3xy",boxShadow:"x1shw4ur",$$css:!0},popupMaterial:{borderTopStartRadius:"xyi19xy",borderTopEndRadius:"x1ccrb07",borderBottomEndRadius:"xtf3nb5",borderBottomStartRadius:"x1pc53ja",boxShadow:"x1gnnqk1",$$css:!0},popupSmall:{width:"x1l2rt3b",$$css:!0},popupBody:{position:"x1n2onr6",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"x1l7klhg",overflowWrap:"x1mzt3pk",whiteSpace:"xeaf4i8",$$css:!0},popupTitle:{marginBottom:"xieb3on",fontSize:"x1603h9y",fontWeight:"xo1l8bm",lineHeight:"x132q4wb",textAlign:"x1yc453h",$$css:!0},backdropCover:{backgroundColor:"x14zpict",$$css:!0},showOverStatus:{zIndex:"x1omtkq1",$$css:!0},popupContents:{fontSize:"x12lqup9",lineHeight:"x1o1kx08",$$css:!0},popupBox:{position:"x1n2onr6",width:"xvue9z",height:"x1egiwwb",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupBoxLarge:{position:"x1n2onr6",width:"x1qfffx7",height:"xjr88my",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupFlex:{width:"x14atkfc",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",backgroundColor:"x1iek97a",$$css:!0},popupAuto:{width:"x14atkfc",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",transform:"x15j3iad",$$css:!0},popupAutoTitle:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},popupAutoBody:{position:"x1uhb9sk",$$css:!0},popupAutoContents:{backgroundColor:"x150wa6m",$$css:!0},popupAutoControls:{paddingTop:"x889kno",paddingEnd:"x1mpkggp",paddingBottom:"xs9asl8",paddingStart:"x1t2a60a",backgroundColor:"x150wa6m",$$css:!0},popupFlexInvite:{height:"x1ad3yod",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",backgroundColor:"x1iek97a",$$css:!0},popupFlexInviteNew:{width:"xr6pica",paddingTop:"x1p5oq8j",paddingEnd:"xljvro7",paddingBottom:"x84yb8i",paddingStart:"x1xfsgkm",$$css:!0},popupFlexInviteNewControls:{paddingTop:"xyamay9",justifyContent:"xl56j7k",$$css:!0},popupFlexUpgradeControls:{paddingTop:"x10lzpyj",paddingEnd:"x1mpkggp",paddingBottom:"x18d9i69",paddingStart:"x1t2a60a",$$css:!0},popupFlexControls:{paddingTop:"x123j3cw",paddingEnd:"x1gtfrk1",paddingBottom:"x156go17",paddingStart:"x1sqk8ge",$$css:!0},popupTower:{position:"x1n2onr6",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"x1l7klhg",width:"xs8rnei",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",marginTop:"x1coevs8",marginEnd:"x11i5rnm",marginBottom:"xui9b5u",marginStart:"x1mh8g0r","@media screen and (min-height: 1000px)_marginTop":"xg3pqpk","@media screen and (min-height: 1000px)_marginEnd":"x5frtva","@media screen and (min-height: 1000px)_marginBottom":"x1a6k631","@media screen and (min-height: 1000px)_marginStart":"x9b845u","@media screen and (max-height: 700px)_marginTop":"x1n7bigs","@media screen and (max-height: 700px)_marginEnd":"x180mg20","@media screen and (max-height: 700px)_marginBottom":"x12v3509","@media screen and (max-height: 700px)_marginStart":"x14m7gzy",$$css:!0},popupTowerLarge:{width:"x1qfffx7",$$css:!0},popupControls:{display:"x78zum5",flexWrap:"x8hhl5t",justifyContent:"x13a6bvl",paddingTop:"x13crsa5",paddingEnd:"x1mpkggp",paddingBottom:"x18d9i69",paddingStart:"x1t2a60a",textAlign:"xp4054r",whiteSpace:"xuxw1ft",$$css:!0},popupGuideBackdrop:{backgroundColor:"xglhzf2",$$css:!0},popupGuidePopup:{width:"x14atkfc",maxWidth:"x65f84u",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",backgroundColor:"xjbqb8w",boxShadow:"x1gnnqk1",$$css:!0},popupColumnButtonsControls:{flexDirection:"xdt5ytf",flexWrap:"x1a02dak",alignItems:"xuk3077",$$css:!0},popupMultilineContents:{whiteSpace:"x1fj9vlw",$$css:!0},popupStatusViewerList:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupPromote:{width:"x3p9ev8",$$css:!0},popupPromoteControls:{justifyContent:"xl56j7k",textAlign:"x2b8uid",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupForwardMediaWithCaption:{width:"x1l895tw",$$css:!0},popupForwardMediaWithCaptionControls:{textAlign:"x2b8uid",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupMessageActionsModal:{width:"x1l2rt3b",$$css:!0},popupMessageActionsModalControls:{textAlign:"x2b8uid",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupCommandPalette:{position:"xixxii4",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",width:"x3p9ev8",maxHeight:"x179dxpb",top:"x15nb5xm",borderTopStartRadius:"xwrnaw0",borderTopEndRadius:"x1r3e1ht",borderBottomEndRadius:"x56h04v",borderBottomStartRadius:"xmwzclc",overflowX:"x1plvlek",overflowY:"xryxfnj",backgroundColor:"x1k74hu9",$$css:!0},popupCommandPaletteV2:{width:"xvue9z",borderTopStartRadius:"xyi19xy",borderTopEndRadius:"x1ccrb07",borderBottomEndRadius:"xtf3nb5",borderBottomStartRadius:"x1pc53ja",$$css:!0},popupQuickReplies:{width:"xvue9z",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",transform:"x15j3iad",$$css:!0},popupQuickRepliesTitle:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},popupQuickRepliesBody:{position:"x1uhb9sk",$$css:!0},popupQuickRepliesContents:{paddingTop:"xexx8yu",paddingEnd:"xc73u3c",paddingBottom:"x18d9i69",paddingStart:"x5ib6vp",backgroundColor:"x150wa6m",$$css:!0},popupQuickRepliesControls:{paddingTop:"x889kno",paddingEnd:"x1mpkggp",paddingBottom:"xs9asl8",paddingStart:"x1t2a60a",backgroundColor:"x150wa6m",$$css:!0},popupChatAssignment:{width:"x1l2rt3b",$$css:!0},popupHistorySyncProgress:{width:"x1l2rt3b",$$css:!0},popupDataSharing:{paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",width:"x1l2rt3b",$$css:!0},popupMessageEdit:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",width:"x1c4ky7w",maxHeight:"x179dxpb",$$css:!0},popupMessageEditBody:{minHeight:"x2lwn1j",$$css:!0},popupMessageEditContents:{height:"x5yr21d",$$css:!0},popupDeleteNewsletter:{width:"x1l2rt3b",paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",$$css:!0},popupDeleteNewsletterBody:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},popupDeleteNewsletterContents:{flexGrow:"x1iyjqo2",$$css:!0},popupLabelList:{width:"x1l2rt3b",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",backgroundColor:"x150wa6m",$$css:!0},popupLabelListControls:{paddingTop:"x1p5oq8j",paddingBottom:"xwxc41k",paddingEnd:"x1pi30zi",$$css:!0},popupLabelListContents:{maxHeight:"xubnuyq",overflowY:"x1odjw0f",$$css:!0},popupLabelEdit:{width:"x1l2rt3b",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",transform:"x15j3iad",$$css:!0},popupLabelEditTitle:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},popupLabelEditControls:{paddingTop:"x1cnzs8",paddingEnd:"x1pi30zi",paddingBottom:"xx6bls6",paddingStart:"x1swvt13",$$css:!0},popupLabelChooseColor:{width:"x14atkfc",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",transform:"x15j3iad",$$css:!0},popupLabelChooseColorTitle:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},popupLabelChooseColorControls:{paddingTop:"x1cnzs8",paddingEnd:"x1pi30zi",paddingBottom:"xx6bls6",paddingStart:"x1swvt13",$$css:!0},popupComments:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",maxHeight:"x12f24lm",backgroundColor:"xntdpzj",$$css:!0},popupBotNut:{width:"xht4xr3",$$css:!0},popupEventCreation:{width:"x1peuizl",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},popupAdAccountRecovery:{width:"x14rvwrp",$$css:!0}},o={hidden:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},visible:{overflowX:"x1plvlek",overflowY:"xryxfnj",$$css:!0}};e=k.forwardRef(a);function a(a,b){var e,f,g=babelHelpers["extends"]({},a);a=g.overflow;a=a===void 0?"hidden":a;var h=l(null),j=l(null),p=l(),q=function(a){var b;(b=h.current)==null?void 0:b.onDragOver(a)},r=function(a){var b;(b=h.current)==null?void 0:b.onDragStart(a)},s=function(a){var b;(b=h.current)==null?void 0:b.onDragEnd(a)},t=g.type===m.StatusViewerList&&g.dimensions?{height:g.dimensions.height+"px",width:g.dimensions.width+"px"}:null;a=[n.popup,o[a],d("WAWebUIRefreshGatingUtils").materialRefreshEnabled()&&n.popupMaterial];var u=[n.overlay,n.backdrop];g.cover===!0&&u.push(n.backdropCover);d("WAWebTimeSpentLoggingNavigation").useTsNavigation((e=g.tsNavigationData)!=null?e:{surface:"unknown"});var v,w,x,y;if(g.type!=null)switch(g.type){case m.Invite:a.push(n.popupFlexInvite);break;case m.InviteNew:a.push(n.popupFlexInviteNew);y=n.popupFlexInviteNewControls;break;case m.Upgrade:y=n.popupFlexUpgradeControls;break;case m.Box:a.push(n.popupBox);break;case m.BoxLarge:a.push(n.popupBoxLarge);break;case m.Flex:a.push(n.popupFlex);y=n.popupFlexControls;break;case m.Tower:a.push(n.popupTower);break;case m.TowerLarge:a.push(n.popupTower,n.popupTowerLarge);break;case m.Auto:a.push(n.popupAuto);v=n.popupAutoTitle;w=n.popupAutoBody;x=n.popupAutoContents;y=n.popupAutoControls;break;case m.ColumnButtons:y=n.popupColumnButtonsControls;break;case m.Multiline:x=n.popupMultilineContents;break;case m.StatusViewerList:a.push(n.popupStatusViewerList);u.push(n.showOverStatus);break;case m.Promote:case m.BotNut:a.push(n.popupPromote);g.type===m.BotNut&&a.push(n.popupBotNut);y=n.popupPromoteControls;break;case m.CommandPalette:a.push(n.popupCommandPalette);break;case m.CommandPaletteV2:a.push(n.popupCommandPalette);a.push(n.popupCommandPaletteV2);break;case m.QuickReplies:a.push(n.popupQuickReplies);v=n.popupQuickRepliesTitle;w=n.popupQuickRepliesBody;x=n.popupQuickRepliesContents;y=n.popupQuickRepliesControls;break;case m.ChatAssignment:a.push(n.popupChatAssignment);break;case m.HistorySyncProgress:a.push(n.popupHistorySyncProgress);break;case m.DataSharing:a.push(n.popupDataSharing);break;case m.MessageEdit:a.push(n.popupMessageEdit);w=n.popupMessageEditBody;x=n.popupMessageEditContents;break;case m.Guide:a.push(n.popupGuidePopup);u.push(n.popupGuideBackdrop);break;case m.StatusReport:u.push(n.showOverStatus);break;case m.LinkPopup:u.push(n.showOverStatus);break;case m.LabelList:a.push(n.popupLabelList);x=n.popupLabelListContents;y=n.popupLabelListControls;break;case m.LabelEdit:a.push(n.popupLabelEdit);v=n.popupLabelEditTitle;y=n.popupLabelEditControls;break;case m.LabelChooseColor:a.push(n.popupLabelChooseColor);v=n.popupLabelChooseColorTitle;y=n.popupLabelChooseColorControls;break;case m.ForwardMediaWithCaption:a.push(n.popupForwardMediaWithCaption);y=n.popupForwardMediaWithCaptionControls;break;case m.MessageActionsModal:a.push(n.popupMessageActionsModal);y=n.popupMessageActionsModalControls;break;case m.DeleteNewsletter:a.push(n.popupDeleteNewsletter);w=n.popupDeleteNewsletterBody;x=n.popupDeleteNewsletterContents;break;case m.Comments:a.push(n.popupComments);break;case m.EventCreation:a.push(n.popupEventCreation);break;case m.Small:a.push(n.popupSmall);break;case m.AdAccountRecovery:a.push(n.popupAdAccountRecovery);break}e=c("lodash").isEmpty(g.actions)?null:k.jsx("div",{className:(i||(i=c("stylex")))(n.popupControls,y,g.controlsStyle),children:g.actions});var z=g.title!=null?k.jsx("div",{"data-testid":void 0,className:(i||(i=c("stylex")))(n.popupTitle,v),children:g.title}):null,A=function(a){p.current=a.target},B=function(a){if(a.target!==j.current||p.current!==j.current)return;g.onOverlayClick?g.onOverlayClick==null?void 0:g.onOverlayClick(a):d("WAWebModalManager").ModalManager.getRef(function(a){(a==null?void 0:a.contains(j.current))&&d("WAWebModalManager").ModalManager.close()})},C=d("WAWebL10NFbtTypeUtils").isStringOrFbt(g.title)?g.title:void 0;A=k.jsx("div",{ref:j,onClick:B,onMouseDown:A,className:"x9f619 x78zum5 xdt5ytf x6s0dn4 xl56j7k xh8yej3 xpb48g7 x1jn0hjm x1us19tq","data-testid":void 0,"aria-label":(B=g.ariaLabel)!=null?B:C,role:"dialog",children:k.jsx("div",{className:(i||(i=c("stylex")))(a),"data-animate-modal-popup":!0,style:t,children:k.jsxs("div",{className:i(n.popupBody,w),"data-animate-modal-body":!0,children:[z,k.jsx("div",{"data-testid":void 0,className:i(n.popupContents,x),children:g.children}),e]})})});return k.jsxs(c("WAWebCopyPasteCopyableArea.react"),{className:i(u),onDragOver:q,onDragStart:r,onDragEnd:s,ref:b,"data-animate-modal-backdrop":!0,children:[g.onDrop&&k.jsx(c("WAWebDragAndDrop.react"),{ref:h,disableFromWithin:!0,onDragChange:g.onDragChange,onDrop:g.onDrop}),A]})}a.displayName=a.name+" [from "+f.id+"]";g.ModalTheme=m;g.Modal=e}),98);
__d("WAWebConfirmPopup.react",["fbt","Promise","WAWebButton.react","WAWebFbtCommon","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebModalManager","WAWebWDSButton","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=k.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=e.buttonAlign;a=a===void 0?"end":a;var f=function(a){a.stopPropagation(),a.preventDefault(),e.onOK==null?void 0:e.onOK()},g=function(a){a.stopPropagation(),a.preventDefault(),e.onCancel==null?void 0:e.onCancel(a)};f=e.onOK?k.jsx(c("WAWebButton.react"),{testid:void 0,type:e.okButtonType?e.okButtonType:"primary",onClick:f,disabled:e.okDisabled,spinner:e.okSpinner===!0,children:e.okText!=null?e.okText:c("WAWebFbtCommon")("OK")}):null;var i=function(){if(e.cancelButtonType)return e.cancelButtonType;else if(e.onOK)return"secondary";return"primary"};i=e.onCancel?k.jsx(c("WAWebButton.react"),{testid:void 0,type:i(),disabled:e.cancelDisabled,onClick:g,children:e.cancelText!=null&&e.cancelText!==""?e.cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__")}):null;var j=e.extraButtonProps?k.jsx(m,babelHelpers["extends"]({},e.extraButtonProps)):null;g={escape:e.onCancel?g:function(){}};if(j){var l;j=[i,j,f];l=k.jsxs(d("WAWebWDSButton").ButtonGroup,{direction:(l=e.buttonsDirection)!=null?l:"vertical",align:a,children:[j[0],j[1],j[2]]})}else{l=k.jsxs(d("WAWebWDSButton").ButtonGroup,{direction:(j=e.buttonsDirection)!=null?j:"horizontal",align:a,children:[i,f]})}return k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{"data-testid":void 0,handlers:g,ref:b,children:k.jsx(d("WAWebModal.react").Modal,{actions:l,controlsStyle:e.buttonGroupStyle,children:e.children,cover:e.cover,onDragChange:e.onDragChange,onOverlayClick:e.onOverlayClick,onDrop:e.onDrop,type:e.type,title:e.title,testid:void 0,overflow:e.overflow,ariaLabel:e.ariaLabel})})}a.displayName=a.name+" [from "+f.id+"]";function m(a){var b=a.primary;b=b===void 0?!1:b;var d=a.disabled;d=d===void 0?!1:d;var e=a.text,f=a.type,g=a.onClick;a=function(a){a.stopPropagation(),a.preventDefault(),g()};return k.jsx(c("WAWebButton.react"),{testid:void 0,type:(f=f)!=null?f:b?"primary":"secondary",onClick:a,disabled:d,children:e})}m.displayName=m.name+" [from "+f.id+"]";function e(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.onOK,e=a.onCancel,f=a.onOverlayClick,g=babelHelpers.objectWithoutPropertiesLoose(a,["onOK","onCancel","onOverlayClick"]);return new(i||(i=b("Promise")))(function(a){var b=function(){c==null?void 0:c(),d("WAWebModalManager").ModalManager.close(),a(!0)},h=function(b){e==null?void 0:e(b),d("WAWebModalManager").ModalManager.close(),a(!1)},i=function(b){f==null?void 0:f(b),d("WAWebModalManager").ModalManager.close(),a(!1)};d("WAWebModalManager").ModalManager.open(k.jsx(l,babelHelpers["extends"]({onOverlayClick:i,onCancel:h,onOK:b},g)))})});return n.apply(this,arguments)}g.ConfirmPopup=l;g.waitForConfirmPopup=e}),226);
__d("WAWebCopyToClipboard",["WALogger","WAWebMiscErrors","WAWebUA","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Write image to clipboard failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Write image to clipboard failed"]);i=function(){return a};return a}function a(a){window.getSelection().removeAllRanges();var b=document.createRange();b.selectNode(a);window.getSelection().addRange(b);try{a=document.execCommand("copy");window.getSelection().removeAllRanges();return a}catch(a){return!1}}function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield navigator.permissions.query({name:"clipboard-write"}));return a.state==="granted"}catch(a){return!1}});return k.apply(this,arguments)}function l(){if(!("clipboard"in navigator)||!("ClipboardItem"in window))return!1;return d("WAWebUA").UA.browser===d("WAWebUA").BROWSER_TYPE.SAFARI?!1:!0}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j());if(b)try{yield navigator.clipboard.writeText(a);return!0}catch(a){if(a instanceof d("WAWebMiscErrors").NotAllowedError)return!1}b=!1;var c=document.body;if(c){var e=document.createElement("textarea");e.textContent=a;c.appendChild(e);e.focus();e.select();try{document.execCommand("copy"),b=!0}catch(a){b=!1}finally{c.removeChild(e)}}return b});return m.apply(this,arguments)}function f(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!l())throw c("err")("Clipboard API not supported");if(a.type==="image/png"){var b=new window.ClipboardItem({"image/png":a});navigator.clipboard.write([b])["catch"](function(a){return d("WALogger").LOG(h()).sendLogs(a)})}else{b=new Image();b.onload=function(a){a=a.target;var b=document.createElement("canvas"),c=b.getContext("2d");b.width=a.naturalWidth;b.height=a.naturalHeight;c.drawImage(a,0,0);o(b)};b.src=URL.createObjectURL(a)}});return n.apply(this,arguments)}function o(a){var b="image/png",c=1;a.toBlob(function(a){var b;a=new window.ClipboardItem((b={},b[a.type]=a,b));navigator.clipboard.write([a])["catch"](function(a){return d("WALogger").LOG(i()).sendLogs(a)})},b,c)}g.copyElementContentsToClipboard=a;g.supportsCopyImageToClipboard=l;g.copyTextToClipboard=e;g.copyImageToClipboard=f;g.copyCanvasToClipboard=o}),98);
__d("WAWebWamEnumCrashType",[],(function(a,b,c,d,e,f){a=Object.freeze({CRASH:0,OOM:1,MAIN_THREAD_STALL_3_SECONDS:15,MAIN_THREAD_STALL_30_SECONDS:2,MAIN_THREAD_STALL_60_SECONDS:16,MAIN_THREAD_STALL_POKED:17,MAIN_THREAD_STALL_DEBUG:3,AUDIO_TRANSCODING_ERROR:4,VIDEO_TRANSCODING_ERROR:5,ANR:6,CRITICAL_EVENT:7,UNHANDLED_EXCEPTION:8,APP_CRASH:9,NATIVE_CRASH:10,UFAD:11,UX_BREAKING_EXCEPTION:13,UX_GRACEFUL_RECOVERY_EXCEPTION:14,WEB_UI_COMPONENT_FAILURE:18,WEB_BROKEN_USER_EXPERIENCE:19,WEB_FORCED_LOGOUT:20});f.CRASH_TYPE=a}),66);
__d("WAWebCrashLogWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCrashType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CrashLog:[494,{crashContext:[3,a.TYPES.STRING],crashCount:[5,a.TYPES.INTEGER],crashReason:[2,a.TYPES.STRING],crashType:[6,d("WAWebWamEnumCrashType").CRASH_TYPE],runningTasks:[16,a.TYPES.STRING]},[1,1,1],"regular"]},{CrashLog:[]});g.CrashLogWamEvent=b}),98);
__d("WAWebCrashlogConstants",["WAWebBuildConstants"],(function(a,b,c,d,e,f,g){a="https://crashlogs.whatsapp.net/wa_fls_upload_check";b="1063127757113399|745146ffa34413f9dbb5469f5370b7af";c="https://crashlogs.whatsapp.net/wa_clb_data";e="web";f="167028690535322";var h="0";d=d("WAWebBuildConstants").DYN_ORIGIN+"web-contact-us";var i=0;g.CLB_CHECK_URL=a;g.CLB_TOKEN=b;g.CLB_URL=c;g.CLB_PLATFORM=e;g.FB_APP_ID=f;g.BUILD_ID=h;g.TICKET_URL=d;g.UNIQUE_UPLOADS_ALLOWED_BEFORE_THROTTLE=i}),98);
__d("WAWebCrashlogUserAgent",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a="web",b="unknown";c("gkx")("26259")?b="intern":c("gkx")("26256")?b="automation":c("gkx")("26258")&&(b="prod");return a+"_"+b}function b(a){var b=a.appVersion,c=a.browser;a=a.device;c="Web/"+c;return"WhatsApp/"+b+" "+c+" Device/"+a}g.getDistribution=a;g.getLogUserAgent=b}),98);
__d("WAWebLogLineSanitizer",[],(function(a,b,c,d,e,f){function a(a){return a.replace(/(\d){1,16}(\d{4}[@,:,-])/g,"...$2")}f.sanitizeLine=a}),66);
__d("WAWebLoggerFormatMessage",["WAArrayInterleave"],(function(a,b,c,d,e,f,g){var h=4e3;function a(a,b,d,e){e===void 0&&(e=String);a=c("WAArrayInterleave")(a,b.map(e)).join("");b=d?h:Number.POSITIVE_INFINITY;a.length>b&&(a=a.slice(0,b/2)+("\n\n["+(a.length-b)+" truncated]\n\n")+a.slice(-b/2));return a}g["default"]=a}),98);
__d("WAWebLoggerOptimizer",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g="==================================================EOU",h=4e3;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b===void 0&&(b=0);c===void 0&&(c=!1);var d=[];if(c){c=(yield a.logs.orderBy("timestamp").filter(function(a){return a.timestamp>=b}).reverse().until(function(a){return a.log.includes("[sendlogs]")},!0).toArray());for(var e=c.length-1;e>=0;e--){j(c[e],d);if(c[e].log.includes(g))break}}else yield a.logs.orderBy("timestamp").filter(function(a){return a.timestamp>=b}).each(function(a){j(a,d)});return d});return i.apply(this,arguments)}function j(a,b){a.log=a.log.slice(0,h),b.push(a)}f.END_OF_UPLOAD=g;f.TRIM_LENGTH=h;f.getTimeboxedAndTrimmedLogs=a}),66);
__d("WAWebLoggerUtils",["WAHashStringToNumber"],(function(a,b,c,d,e,f,g){var h=!1;function a(){return h}function b(a){h=a}function i(a){if(a<=0)return!1;return a>=1?!0:Math.random()<a}function c(a,b,c){if(a<=0)return!1;if(a>=1)return!0;var e=1;switch(a){case.1:e=10;break;case.01:e=100;break;case.001:e=1e3;break;default:return i(a)}return d("WAHashStringToNumber").hashStringToNumber(b+c)%e===0}g.isWaitingForUpload=a;g.setWaitingForUpload=b;g.passesSampling=i;g.passesSamplingPerUser=c}),98);
__d("WAWebNormalizeStack",["WAUpperFirst","escapeRegex"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b=!1);a=h(a);var d=a.name,e=a.message;a=a.stack;var f=a.indexOf("\n"),g=a.slice(0,f);g=g.match(new RegExp("("+c("escapeRegex")(d)+"|Error)(:|$)"));if(g!=null){if(!b)return a;g=g.index+g[0].length;var i=e==null?-1:a.indexOf(e,g);i=e==null||i===-1?-1:i+e.length;f=Math.max(0,f,g,i);return a.slice(f).replace(/^\n+/,"")}if(b)return a;g=a===""?"":"\n"+a;return e?d+": "+e+g:""+d+g}function h(a){var b=typeof a==="object"&&typeof (a==null?void 0:a.name)==="string"?a.name:"Thrown"+c("WAUpperFirst")(typeof a)+"Error",d;a!=null&&typeof a.message==="string"?d=a.message:a===void 0?d="":d=String(a);var e;if(a!=null&&typeof a.stack==="string")e=a.stack;else{var f=new Error();f.name=b;f.message=d;e=typeof f.stack==="string"?f.stack:""}f=typeof a==="object"?babelHelpers["extends"]({},a):null;return babelHelpers["extends"]({},f,{name:b,message:d,stack:e})}g.normalizeStack=a;g.normalizeError=h}),98);
__d("WAWebLoggerImpl",["Promise","WAMemoizeConditionally","WAShiftTimer","WAWeb-moment","WAWebLoggerFormatMessage","WAWebLoggerOptimizer","WAWebLoggerUtils","WAWebNormalizeStack","WAWebWAWCStorage","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h,i="trace",j=864e5*7;c("gkx")("26258")?e=5e3:e=15e4;f=e;var k="LTSXOo+_*-=.<^!#?".split("");function a(){return k[Math.round(Math.random()*(k.length-1))]}var l=a()+a()+a()+a(),m={};m[m.ALL=0]="all";m[m.INFO=1]="info";m[m.LOG=2]="log";m[m.WARN=3]="warn";m[m.ERROR=4]="error";m[m.OFF=5]="off";e=function(){function a(a,b,e){var f=this;e===void 0&&(e=void 0);this.localCursor=0;this.writeFrom=0;this.pending=void 0;this.timer=new(d("WAShiftTimer").ShiftTimer)(function(){return f.$1()});this.runningTimestamp=0;this.isTakeOver=!1;this.log=c("WAMemoizeConditionally")(function(a,b,d,e,g){b===void 0&&(b=!1);return function(h){for(var i=arguments.length,j=new Array(i>1?i-1:0),k=1;k<i;k++)j[k-1]=arguments[k];var l=c("WAWebLoggerFormatMessage")(h,j,!b);f.logImpl(a,l,d,e,g);return l}},function(a,b,c,d,e){return c||e?null:String(a)+String(Boolean(b))+String(Boolean(d))});this.logsDBProvider=a;this.logCapacityInDatabase=b;this.logs=new Array(b);this.microStep=1/this.logCapacityInDatabase;this.processTag=e}var e=a.prototype;e.logImpl=function(a,b,e,f,g){var h=Date.now(),j=c("WAWeb-moment")(h).locale("en").format("YYYY-MM-DD HH:mm:ss.SSS:");if(!c("gkx")("26258"))try{a===m.ERROR&&(this.$2&&this.$2(b))}catch(a){}var k="";e&&((g==null?void 0:g.includes(i))?k="\n"+e.stack.split("\n").slice(3).join("\n"):k="\n"+d("WAWebNormalizeStack").normalizeStack(e,!0));a=[n(a),f&&!d("WAWebLoggerUtils").isWaitingForUpload()?"sendlogs":null].concat((e=g)!=null?e:[],[this.processTag]).filter(Boolean).map(function(a){return"["+a+"]"}).join("");f=l+" "+j+(a?a+" ":"")+b+k;this.logs[this.localCursor]={m:f,t:h};this.localCursor=(this.localCursor+1)%this.logCapacityInDatabase;this.logs[this.localCursor]!=null&&(this.writeFrom=this.localCursor);if(this.isTakeOver)return;this.timer.debounceAndCap(250,1e3)};e.$1=function(){var a=this;if(this.pending||this.logs[this.writeFrom]==null||this.isTakeOver)return;this.pending=this.logsDBProvider().then(function(c){return c.transaction("rw",c.logs,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,d=(yield c.logs.orderBy("count").last());d||(d=(yield c.logs.orderBy("timestamp").last()));var e=d?d.line+1:0;b=((b=d)==null?void 0:b.count)?d.count+1:e;while(a.logs[a.writeFrom]!=null){d=a.logs[a.writeFrom];a.logs[a.writeFrom]=void 0;a.writeFrom=(a.writeFrom+1)%a.logCapacityInDatabase;a.runningTimestamp=d.t<=a.runningTimestamp?a.runningTimestamp+a.microStep:d.t;c.logs.put({line:e++%a.logCapacityInDatabase,log:d.m,timestamp:a.runningTimestamp,count:b++})}}))}).then(function(){a.logs[a.writeFrom]!=null&&a.timer.debounceAndCap(250,1e3)})["catch"](function(b){!c("gkx")("26258")&&a.$2&&a.$2(b.message)})["finally"](function(){a.pending=void 0})};e.getLogs=function(a,e){var f=this;a===void 0&&(a=!1);e===void 0&&(e=Date.now()-j);var g=[];this.pending&&g.push(this.pending);this.timer.isScheduled()&&(this.timer.forceRunNow(),this.pending&&g.push(this.pending));return(h||(h=b("Promise"))).all(g).then(function(){return f.logsDBProvider()}).then(function(b){return d("WAWebLoggerOptimizer").getTimeboxedAndTrimmedLogs(b,e,a)}).then(function(a){return a.map(function(a){return a.log})})["catch"](function(a){!c("gkx")("26258")&&f.$2&&f.$2(a.message);return f.logs.filter(Boolean).map(function(a){return a.m})})};e.clearLogs=function(){var a=this;return this.logsDBProvider().then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.logs.clear()});return function(b){return a.apply(this,arguments)}}())["catch"](function(){})["finally"](function(){a.localCursor=0,a.writeFrom=0,a.logs=new Array(a.logCapacityInDatabase)})};e.logUncaughtError=function(a,b){var d=a instanceof Error&&a.stack?a:void 0,e;d?e=String(a):e=b?"unhandled-rejection: "+String(a):"Error: "+String(a);this.logImpl(m.ERROR,e,d,!0,["uncaught"]);if(!c("gkx")("26258"))var f;if(b!=null){a=String(b);this.logImpl(m.WARN,a);!c("gkx")("26258")}return e};e.onTakeOver=function(){this.isTakeOver=!0};e.registerErrorNotificationListener=function(a){this.$2=a};return a}();function n(a){switch(a){case m.INFO:case m.LOG:case m.WARN:case m.ERROR:return m[a];default:throw c("err")("Unexpected numeric log level: "+a)}}a=new e(function(){return c("WAWebWAWCStorage").idb()},f);f=a.log;g.STACK_TRACE_TAG=i;g.LoggerImpl=e;g.Logger=a;g.log=f}),98);
__d("WAWebPriorLogs",["$InternalEnum","Promise","WALogger","WATimeUtils","WAWebSchemaSyncdLogs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["prior logs: error while writing to prior logs: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["prior logs: error while printing fatal logs: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["\r\n\r\nprior logs: category ",": \r\n\r\n"],["\\r\\n\\r\\nprior logs: category ",": \\r\\n\\r\\n"]);l=function(){return a};return a}var m=b("$InternalEnum")({Empty:"",Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"}),n=new Map(),o=90,p=80;function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=n.get(a))!=null?b:0;n.set(a,b+1);if(b%o===0){b=(yield d("WAWebSchemaSyncdLogs").getSyncdLogsTable().equals(["collection"],a));if(b.length<p)return;a=b.sort(function(a,b){return a.ts-b.ts}).slice(0,b.length-p).map(function(a){return a.id});yield d("WAWebSchemaSyncdLogs").getSyncdLogsTable().bulkRemove(a)}});return r.apply(this,arguments)}function a(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield q(a),yield d("WAWebSchemaSyncdLogs").getSyncdLogsTable().bulkCreate([{collection:a,log:b,ts:d("WATimeUtils").unixTimeMs()}])}catch(a){d("WALogger").ERROR(i(),a)}});return s.apply(this,arguments)}c=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[].concat(Array.from(m.members()),[""]).map(function(a){return m.cast(a)}).filter(Boolean);return t(a)});return function(){return a.apply(this,arguments)}}();var t=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaSyncdLogs").getSyncdLogsTable().equals(["collection"],a));b=b.filter(function(a){return d("WATimeUtils").happenedWithin(d("WATimeUtils").castMilliSecondsToUnixTime(a.ts),d("WATimeUtils").DAY_MILLISECONDS*60)});b=b.map(function(a){return d("WATimeUtils").toHttpHeaderDate(d("WATimeUtils").castMilliSecondsToUnixTime(a.ts))+": "+a.log+"\r\n"});d("WALogger").LOG(l(),a);a=20;for(var c=0;c<b.length;c+=a)d("WALogger").LOG(k(),b.slice(c,c+a))});return function(b){return a.apply(this,arguments)}}());yield (h||(h=b("Promise"))).all((a=a)!=null?a:[])}catch(a){d("WALogger").ERROR(j(),a)}});return function(b){return a.apply(this,arguments)}}();g.WAWebLogCategory=m;g.writePriorLog=a;g.printAllPriorLogs=c;g.printPriorLogs=t}),98);
__d("WAWebWamEnumLogType",[],(function(a,b,c,d,e,f){a=Object.freeze({MINOR_EVENT:0,COUNTING_STAT:1,UNCAUGHT_EXCEPTION:3,UNHANDLED_REJECTED_PROMISE:4,INVESTIGATION:5,UNCATEGORIZED:6});f.LOG_TYPE=a}),66);
__d("WAWebWebcMinorEventLogWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumLogType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMinorEventLog:[5440,{additionalDebugContext:[1,a.TYPES.STRING],logContext:[2,a.TYPES.STRING],logCount:[3,a.TYPES.INTEGER],logReason:[4,a.TYPES.STRING],logType:[5,d("WAWebWamEnumLogType").LOG_TYPE]},[1,1,100],"regular"]},{WebcMinorEventLog:[]});g.WebcMinorEventLogWamEvent=b}),98);
__d("WAWebCrashlog",["$InternalEnum","Promise","WALogger","WAWebBrokerGlobalAppState","WAWebBuildConstants","WAWebCrashLogWamEvent","WAWebCrashlogConstants","WAWebCrashlogUserAgent","WAWebGlobals","WAWebLogLineSanitizer","WAWebLoggerImpl","WAWebLoggerOptimizer","WAWebLoggerUtils","WAWebMiscBrowserUtils","WAWebPriorLogs","WAWebRuntimeEnvironmentUtils","WAWebURLUtils","WAWebUserPrefsMeUser","WAWebWamEnumCrashType","WAWebWamEnumLogType","WAWebWebcMinorEventLogWamEvent","asyncToGeneratorRuntime","cr:4722","err","gkx","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crash log sendLogs failed, ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crashlog:failed to parse response from upload check ",", will perform default upload"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crashlog:doUpload server configured sampling check w/rate: "," prevented upload"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crashlog:doUpload skipping sampling check"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crashlog:doUpload aborting crashlog upload due to 403 check response"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crashlog:doUpload code of "," from "," was unexpected, expected values are: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["reason for logs: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs hasTaggedMessage"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs buildId: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs distribution: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs url: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs appId: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs webPlatform: ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs platform: ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs userAgent: ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs ref: ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["=================================================="]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crashlog] upload client sampling check rate: "," prevented upload"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs error uploading: ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs using throttle"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs reason already uploaded, skipping"]);D=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs squelched logs"]);a=function(){return b};return b}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs error logging minorEvent wam event: ",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs error during minorEvent wam commit: ",""]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs error logging crashLog wam event: ",""]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["wa:uploadLogs error during crashLog wam commit: ",""]);H=function(){return a};return a}var I=function(a){return new(h||(h=b("Promise")))(function(b){return self.setTimeout(b,a)})},J,K,L=b("$InternalEnum")({CRASHLOG:"crashlog",SUPPORT:"support"}),M="server-requested",N="manual-upload",O="user-report",P=b("$InternalEnum")({ONLY_EXCEPTION:"only_exception"}),Q=100,R=new Map(),S={shouldHitCheckEndpoint:function(){return!1},expectedCodes:[],appendToFormDataForCheck:function(a){},appendToFormDataForUpload:function(a,b){},shouldUseLightWeightLogs:function(a){return!1}},aa={shouldHitCheckEndpoint:function(){return!0},expectedCodes:[200,403],appendToFormDataForCheck:function(a,b){a.append("reason",b)},appendToFormDataForUpload:function(a,b){},shouldUseLightWeightLogs:function(a){return!1}},ba={shouldHitCheckEndpoint:function(){return!0},expectedCodes:[200,403],appendToFormDataForCheck:function(a,b){a.append("support_exception_only_upload","true"),a.append("reason",b)},appendToFormDataForUpload:function(a,b){b&&b.upload===P.ONLY_EXCEPTION&&a.append("exception_only_upload","true")},shouldUseLightWeightLogs:function(a){return a?a.upload===P.ONLY_EXCEPTION:!1}};function ca(a){switch(a){case d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION:case d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION_SAD:return["uncaught_error"];case d("WALogger").SendLogsType.UNHANDLED_REJECTED_PROMISE:case d("WALogger").SendLogsType.UNHANDLED_REJECTED_PROMISE_SAD:return["unhandled_promise"];case d("WALogger").SendLogsType.USER_FORCEFULLY_LOGGED_OUT_SAD:return["logout"];default:return[]}}function da(a){switch(a){case d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION_SAD:return d("WAWebWamEnumCrashType").CRASH_TYPE.UNHANDLED_EXCEPTION;case d("WALogger").SendLogsType.UNHANDLED_REJECTED_PROMISE_SAD:return d("WAWebWamEnumCrashType").CRASH_TYPE.UNHANDLED_EXCEPTION;case d("WALogger").SendLogsType.USER_FORCEFULLY_LOGGED_OUT_SAD:return d("WAWebWamEnumCrashType").CRASH_TYPE.CRASH;case d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD:return d("WAWebWamEnumCrashType").CRASH_TYPE.CRASH;case d("WALogger").SendLogsType.UNCATEGORIZED_SAD:return d("WAWebWamEnumCrashType").CRASH_TYPE.CRASH;default:return d("WAWebWamEnumCrashType").CRASH_TYPE.CRASH}}function ea(a){switch(a){case d("WALogger").SendLogsType.COUNTING_STAT:return d("WAWebWamEnumLogType").LOG_TYPE.COUNTING_STAT;case d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION:return d("WAWebWamEnumLogType").LOG_TYPE.UNCAUGHT_EXCEPTION;case d("WALogger").SendLogsType.UNHANDLED_REJECTED_PROMISE:return d("WAWebWamEnumLogType").LOG_TYPE.UNHANDLED_REJECTED_PROMISE;case d("WALogger").SendLogsType.INVESTIGATION:return d("WAWebWamEnumLogType").LOG_TYPE.INVESTIGATION;case d("WALogger").SendLogsType.UNCATEGORIZED:return d("WAWebWamEnumLogType").LOG_TYPE.UNCATEGORIZED;default:return d("WAWebWamEnumLogType").LOG_TYPE.UNCATEGORIZED}}function fa(a,b,d){if(!c("gkx")("26258")&&a||d)return S;return b?ba:aa}var ga=72e5,T=c("lodash").throttle(W,ga,{trailing:!1});function e(a){J=a}function f(a){K=a}function U(a){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.reason;e=e===void 0?"reason-unspecified":e;var f=a.immediate;f=f===void 0?!1:f;var g=a.logType;g=g===void 0?L.CRASHLOG:g;var i=a.isHighPri;i=i===void 0?!1:i;var j=a.hasTaggedMessage;j=j===void 0?!1:j;var k=a.ticketId,l=a.clientSamplingRate;l=l===void 0?1:l;var m=a.tags;m=m===void 0?[]:m;var n=a.fromTimestamp;a=a.sendLogsType;a=a===void 0?d("WALogger").SendLogsType.UNCATEGORIZED:a;if(c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).resolve();g===L.SUPPORT&&(yield d("WAWebPriorLogs").printAllPriorLogs());m=m;K&&(yield K())&&(m=m.concat("web-joined-beta"));d("WAWebRuntimeEnvironmentUtils").isWorker()&&(m=m.concat("service-worker"));m=m.concat(ca(a));if(R.size<=Q){var o=R.get(e);!o?R.set(e,{count:1,uploaded:!1}):o.count++}o=d("WALogger").SadSendLogsTypes.has(a);if(o){m=m.concat("sad");try{var p,q=new(d("WAWebCrashLogWamEvent").CrashLogWamEvent)();q.crashReason=e;q.crashType=da(a);m.length&&(q.crashContext=m.join(","));q.crashCount=(p=(p=R.get(e))==null?void 0:p.count)!=null?p:0;q.commitAndWaitForFlush()["catch"](function(a){d("WALogger").LOG(H(),a)})}catch(a){d("WALogger").LOG(G(),a)}}else try{p=new(d("WAWebWebcMinorEventLogWamEvent").WebcMinorEventLogWamEvent)();p.logReason=e;p.logType=ea(a);m.length&&(p.logContext=m.join(","));p.logCount=(a=(q=R.get(e))==null?void 0:q.count)!=null?a:0;p.commitAndWaitForFlush()["catch"](function(a){d("WALogger").LOG(F(),a)})}catch(a){d("WALogger").LOG(E(),a)}if(d("WAWebLoggerUtils").isWaitingForUpload())return(h||(h=b("Promise"))).resolve();d("WAWebLoggerUtils").setWaitingForUpload(!0);q=!o;l>0&&l<1&&(m=m.concat(["sampled",l.toString()]));if(q&&c("gkx")("26258")?d("WAWebLoggerUtils").passesSamplingPerUser(l,e,Y()):d("WAWebLoggerUtils").passesSampling(l)){a=W;if(!i){c("gkx")("26259")&&(m=m.concat(["intern"]));p=R.get(e);if(p==null?void 0:p.uploaded){d("WALogger").LOG(D());d("WAWebLoggerUtils").setWaitingForUpload(!1);return}p&&(p.uploaded=!0);R.size>d("WAWebCrashlogConstants").UNIQUE_UPLOADS_ALLOWED_BEFORE_THROTTLE&&(d("WALogger").LOG(C()),a=T)}o=fa(i,j,e===M);try{q=(yield a({isHighPri:i,immediate:f,logType:g,ticketId:k,uploadStrategy:o,tags:m,reason:e,hasTaggedMessage:j,fromTimestamp:n}));d("WAWebLoggerUtils").setWaitingForUpload(!1);return q}catch(a){d("WAWebLoggerUtils").setWaitingForUpload(!1);d("WALogger").LOG(B(),a);return}}else d("WAWebLoggerUtils").setWaitingForUpload(!1),d("WALogger").LOG(A(),l)});return V.apply(this,arguments)}function W(a){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=a.isHighPri;f=f===void 0?!1:f;var g=a.immediate,h=a.logType,i=a.ticketId,A=a.uploadStrategy,B=a.tags;B=B===void 0?[]:B;var C=a.reason;C=C===void 0?"reason-unspecified":C;var D=a.hasTaggedMessage;D=D===void 0?!1:D;a=a.fromTimestamp;!c("gkx")("26256")&&!c("gkx")("26258")&&(b("cr:4722")==null?void 0:b("cr:4722").logDbReadWriteStats(!0));var E=J?J():{platform:void 0,ref:void 0};d("WALogger").LOG(z());d("WALogger").LOG(y(),(e=E.ref)!=null?e:"no conn");d("WALogger").LOG(x(),navigator.userAgent);d("WALogger").LOG(w(),(e=E.platform)!=null?e:"no platform");d("WALogger").LOG(v(),d("WAWebCrashlogConstants").CLB_PLATFORM);d("WALogger").LOG(u(),d("WAWebCrashlogConstants").FB_APP_ID);d("WALogger").LOG(t(),location.href);d("WALogger").LOG(s(),d("WAWebCrashlogUserAgent").getDistribution());d("WALogger").LOG(r(),d("WAWebCrashlogConstants").BUILD_ID);D&&d("WALogger").LOG(q());d("WALogger").LOG(p(),C);d("WALogger").LOG(o(),d("WAWebLoggerOptimizer").END_OF_UPLOAD);yield I(g?0:1e3);var F;if(A.shouldHitCheckEndpoint()){E=Z({isHighPri:f});A.appendToFormDataForCheck(E,C);F=(yield self.fetch(ha(h),{method:"POST",body:E}));if(!A.expectedCodes.includes(F.status)){d("WALogger").LOG(n(),F.status,d("WAWebCrashlogConstants").CLB_CHECK_URL,A.expectedCodes.toString());return}if(F.status===403){d("WALogger").LOG(m());return}}else d("WALogger").LOG(l());e=null;if(F)try{e=JSON.parse(yield F.text());if(((D=e)==null?void 0:(g=D.config)==null?void 0:g.sampling)!=null&&(e.config.sampling===0||Math.random()*e.config.sampling>1)){d("WALogger").LOG(k(),e.config.sampling);return}}catch(a){d("WALogger").LOG(j(),String(a))}E=Z({isHighPri:f});A.appendToFormDataForUpload(E,e);D=(yield d("WAWebLoggerImpl").Logger.getLogs(A.shouldUseLightWeightLogs(e),C===M?0:a));c("gkx")("26258")&&(D=D.map(d("WAWebLogLineSanitizer").sanitizeLine));g=D.join("\n");f=new Blob([g],{type:"text/plain"});E.append("file",f,"logs.txt");B.length&&E.append("tags",B.join(","));i&&E.append("ticket_id",i);A=ia(h);e=(yield self.fetch(A,{method:"POST",body:E}));if(e.status!==200)throw c("err")("Status code of "+e.status+" from "+A+" was unexpected, expected 200");return e.headers.get("X-Uploaded-File-Id")});return X.apply(this,arguments)}function Y(){var a=d("WAWebRuntimeEnvironmentUtils").isWorker()&&!d("WAWebGlobals").areGlobalsReady()?void 0:d("WAWebUserPrefsMeUser").getMe();return a?a.toString():d("WAWebUserPrefsMeUser").getUnknownId()}function Z(a){a=a.isHighPri;var b=new FormData();(!c("gkx")("26258")||a)&&b.append("forced","true");b.append("from_jid",Y());a=c("WAWebMiscBrowserUtils").info();a=d("WAWebCrashlogUserAgent").getLogUserAgent({device:a.os,browser:a.ua,appVersion:d("WAWebBuildConstants").VERSION_BASE});b.append("agent",a);b.append("app_id",d("WAWebCrashlogConstants").FB_APP_ID);b.append("build_id",d("WAWebCrashlogConstants").BUILD_ID);return b}function ha(a){return c("WAWebURLUtils").build(d("WAWebCrashlogConstants").CLB_CHECK_URL,{type:String(a),access_token:d("WAWebCrashlogConstants").CLB_TOKEN})}function ia(a){return c("WAWebURLUtils").build(d("WAWebCrashlogConstants").CLB_URL,{type:String(a),access_token:d("WAWebCrashlogConstants").CLB_TOKEN})}function ja(a,b){return $.apply(this,arguments)}function $(){$=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAWebLoggerImpl").Logger.isTakeOver)return;try{yield U({reason:a,hasTaggedMessage:!0,clientSamplingRate:(a=b==null?void 0:b.sampling)!=null?a:1,tags:b==null?void 0:b.tags,sendLogsType:b==null?void 0:b.sendLogsType})}catch(a){d("WALogger").ERROR(i(),a)}});return $.apply(this,arguments)}function ka(){T.cancel(),R.clear()}g.LogType=L;g.SERVER_REQUESTED=M;g.MANUAL_UPLOAD=N;g.USER_REPORT=O;g.registerCrashlogUploadInformationalLoggingFunction=e;g.registerCrashlogUploadIsUserInExternalBetaFunction=f;g.upload=U;g.sendLogs=ja;g.reset=ka}),98);
__d("WAWebEphemeralityResolver",["WALogger","WATimeUtils","WAWebEphemeralityTypes"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] resolving new incoming chat DM settings"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] DM setting for chat is null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: disappearing mode setting fetched for ",": duration="," settingTimestamp=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: empty contact"]);k=function(){return a};return a}function l(a){if(!a){d("WALogger").LOG(k());return null}var b=a.disappearingModeDuration,c=a.disappearingModeSettingTimestamp;d("WALogger").LOG(j(),a.id.toString(),b,c).tags("DM","DDM");return b==null||b===0?null:{duration:b,settingTimestamp:(a=c)!=null?a:0}}function m(a){a=l(a);return a!=null?a.duration:null}function n(a){return(a=a)!=null?a:0}function o(a){return(a=a)!=null?a:d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat}function p(a){return(a=a)!=null?a:d("WATimeUtils").unixTime()}function q(a){return(a=a)!=null?a:d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings}function r(a,b){b=b===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe;return(a=a)!=null?a:b}function s(a){return a==null||a.duration==null&&a.settingTimestamp==null&&a.initiator==null?null:{duration:n(a.duration),settingTimestamp:p(a.settingTimestamp),initiator:o(a.initiator),disappearingModeTrigger:q(a.disappearingModeTrigger),initiatedByMe:r(a.initiatedByMe,a.initiator)}}function a(a,b){return(a==null?void 0:a.duration)===(b==null?void 0:b.duration)&&(a==null?void 0:a.settingTimestamp)===(b==null?void 0:b.settingTimestamp)&&(a==null?void 0:a.initiator)===(b==null?void 0:b.initiator)}function b(a,b){a=m(a);b=m(b);if(a==null&&b==null){d("WALogger").LOG(i()).tags("DM","DDM");return null}var c;a!=null&&(c={duration:a,settingTimestamp:d("WATimeUtils").unixTime(),initiator:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0});var e;b!=null&&(e={duration:b,settingTimestamp:d("WATimeUtils").unixTime(),initiator:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther,disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!1});return c!=null&&e!=null?e.duration<c.duration?e:c:(a=c)!=null?a:e}function c(a,b){a=s(a);if(a==null&&b==null)return null;else if(a!=null&&b==null)return{duration:a.duration,settingTimestamp:a.settingTimestamp,initiator:a.initiator===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:a.initiator,disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings,initiatedByMe:a.initiator===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe};else if(a==null&&b!=null)return{duration:b.duration,settingTimestamp:p(b.settingTimestamp),initiator:o(b.initiator),disappearingModeTrigger:q(b.disappearingModeTrigger),initiatedByMe:b.initiatedByMe};else if(a!=null&&b!=null){var c;if(a.settingTimestamp>((c=b.settingTimestamp)!=null?c:0))return babelHelpers["extends"]({},a);else if(a.settingTimestamp<((c=b.settingTimestamp)!=null?c:0))return{duration:b.duration,settingTimestamp:p(b.settingTimestamp),initiator:o(b.initiator),disappearingModeTrigger:q(b.disappearingModeTrigger),initiatedByMe:b.initiatedByMe};return babelHelpers["extends"]({},a,{initiator:b.initiator===d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat?d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:a.initiator})}}function e(a,b){d("WALogger").LOG(h()).devConsole({incomingMsgSettings:a,localDDMDuration:b});a=s(a);b=n(b);if(a==null&&b===0)return null;else if(a!=null&&b===0)return{duration:a.duration,settingTimestamp:a.settingTimestamp,initiator:a.initiator===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:a.initiator,disappearingModeTrigger:a.disappearingModeTrigger,initiatedByMe:a.initiatedByMe};else if(a==null&&b>0)return{duration:b,settingTimestamp:d("WATimeUtils").unixTime(),initiator:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0};else if(a!=null&&b>0){if(a.initiator===d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat||a.duration>0&&a.duration<b){var c=a.initiator,e=a.initiatedByMe;c===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe&&(c=d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat,e=!0);return{initiator:c,settingTimestamp:a.settingTimestamp,duration:a.duration,disappearingModeTrigger:a.disappearingModeTrigger,initiatedByMe:e}}return b<a.duration?{duration:b,settingTimestamp:d("WATimeUtils").unixTime(),initiator:d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:d("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0}:babelHelpers["extends"]({},a)}}g.getDisappearingModeSettingForUser=l;g.getEphemeralDurationForUser=m;g.resolveEphermalityDuration=n;g.resolveDisappearingModeInitiator=o;g.resolveSettingTimestamp=p;g.resolveDisappearingModeTrigger=q;g.resolveDisappearingModeInitiatedByMe=r;g.compareEphemeralityFields=a;g.resolveNewChatDMSettings=b;g.resolveExistingChatDMSettings=c;g.resolveNewIncomingChatDMSettings=e}),98);
__d("WAWebWamEnumFmxEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({FMX_CARD:0,SAFETY_TOOLS:1});f.FMX_ENTRY_POINT=a}),66);
__d("WAWebWamEnumFmxEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({BLOCK:0,ADD_CONTACT:1,REPORT:2,SAFETY_TOOLS:3,COMMON_GROUPS:4,CONTACT_INFO:5,FMX_CARD_INSERTED:6,FMX_CARD_VIEWED:7,LEARN_MORE:8,HIGHLIGHT_GROUP_NAME:9,FMX_CARD_TRUST_SIGNALS_FB_IG_VIEWED:10});f.FMX_EVENT=a}),66);
__d("WAWebWamEnumHighlightGroupType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SINGLE:1,CREATOR:2,ADMIN:3,SAVED_CONTACTS:4,PARTICIPANTS:5,MORE:6});f.HIGHLIGHT_GROUP_TYPE=a}),66);
__d("WAWebFmxActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumFmxEntryPoint","WAWebWamEnumFmxEvent","WAWebWamEnumHighlightGroupType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({FmxAction:[4444,{commonGroupNum:[1,a.TYPES.INTEGER],countryShown:[2,a.TYPES.BOOLEAN],fmxEntryPoint:[3,d("WAWebWamEnumFmxEntryPoint").FMX_ENTRY_POINT],fmxEvent:[4,d("WAWebWamEnumFmxEvent").FMX_EVENT],highlightGroupType:[6,d("WAWebWamEnumHighlightGroupType").HIGHLIGHT_GROUP_TYPE],isSenderSmb:[7,a.TYPES.BOOLEAN],notAContactShown:[5,a.TYPES.BOOLEAN],threadIdHmac:[8,a.TYPES.STRING],trustSignals:[9,a.TYPES.STRING]},[1,1,1],"regular"]},{FmxAction:[]});g.FmxActionWamEvent=b}),98);
__d("WAWebGetCTWAEligibilityFromConversion",["WAArrayBufferUtils"],(function(a,b,c,d,e,f,g){var h="FB_Ads";function a(a){var b=a.conversionData;a=a.conversionSource;if(b==null||a!==h)return null;try{a=d("WAArrayBufferUtils").arrayBufferToString(b);return{data:a,source:h}}catch(a){return null}}g.SMB_DATA_SHARING_ALLOWED_SOURCE=h;g.getCTWAEligibilityFromConversion=a}),98);
__d("WAWebInitialSystemMsg",["WALogger","WANullthrows","WAWebAdvHostedAccountTypeSystemMsg","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebBotSystemMsg","WAWebBotTos","WAWebBotTypes","WAWebContactSystemMsg","WAWebMobilePlatforms","WAWebPrivacyModeSystemMsg","WAWebProtobufsAdv.pb","WAWebUserPrefsMultiDevice","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Hosted] inserting is me hosted notification msg"]);h=function(){return a};return a}function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(c("WAWebWid").isPSA(a))return[d("WAWebContactSystemMsg").genEncryptNotificationMsg(a,"chat_psa")];if(a.isBot())return[d("WAWebBotSystemMsg").genBotInitSystemMsg(a)];if(e===d("WAWebBotTypes").BizBotAutomatedType.FULL_3P)return[d("WAWebBotSystemMsg").genBizBot3pDisclosureMessage(a)];if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&a.isUser()){if(d("WAWebMobilePlatforms").isSMB()&&(yield d("WAWebUserPrefsMultiDevice").getIsHostedMeAccount())===!0){d("WALogger").DEV(h());return[c("WANullthrows")(d("WAWebAdvHostedAccountTypeSystemMsg").genAdvMeAccountIsHostedNotificationMsg(a,a))]}var f=d("WAWebUserPrefsMultiDevice").getHaveProcessedCoexAdv();if(f&&a.isUser()){f=(yield d("WAWebApiDeviceList").getDeviceRecord(a));if((f==null?void 0:f.advAccountType)===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED||(f==null?void 0:f.deletedChangedToHost)===!0)return d("WAWebBizCoexUtils").shouldDedupInitialHostedSystemMsg(a)?[]:[c("WANullthrows")(d("WAWebAdvHostedAccountTypeSystemMsg").genAdvAccountTypeInitialSysMsg(a,a))]}}f=[];b=d("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(b);switch(b){case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:f.push(d("WAWebContactSystemMsg").genEncryptNotificationMsg(a));break;case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:f.push(d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"biz_privacy_mode_init_bsp"));break;case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:f.push(d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"biz_privacy_mode_init_fb"));break;case d("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.HOSTED_GROUP:f.push(d("WAWebContactSystemMsg").genNonE2ENotificationMsg(a,"is_capi_hosted_group"));break}e===d("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P&&d("WAWebBotTos").hasAcceptedBizBotTos()&&f.push(d("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(a));return f});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebMsgEphemerality",["WAWebEphemeralityTypes","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){var b;if(a.ephemeralDuration==null&&a.ephemeralSettingTimestamp==null&&a.disappearingModeInitiator==null)return null;b=(b=a.ephemeralDuration)!=null?b:0;var c=a.ephemeralSettingTimestamp,e=a.disappearingModeInitiator,f=a.disappearingModeTrigger,g=a.disappearingModeInitiatedByMe;a.subtype==="ephemeral_setting"&&(c=a.t,e=d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat);return{duration:b,settingTimestamp:c,initiator:e,disappearingModeTrigger:f,initiatedByMe:g}}var h=[(c=d("WAWebMsgType")).MSG_TYPE.CHAT,c.MSG_TYPE.IMAGE,c.MSG_TYPE.VIDEO,c.MSG_TYPE.AUDIO,c.MSG_TYPE.PTT,c.MSG_TYPE.DOCUMENT,c.MSG_TYPE.PRODUCT,c.MSG_TYPE.STICKER,c.MSG_TYPE.POLL_CREATION,c.MSG_TYPE.NEWSLETTER_ADMIN_INVITE,c.MSG_TYPE.GROUPS_V4_INVITE];function b(a){return h.includes(a)?!0:!1}g.getMsgEphemeralitySettings=a;g.ephemeralMessageTypes=h;g.messageSupportsEphemerality=b}),98);
__d("WAWebSagaSystemMsg",["WAWebContactSystemMsg","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"saga_init",templateParams:[]})}g.genSagaInitSystemMsg=a}),98);
__d("WAWebUpdateLidMetadataJob",["WAWebOrchestratorNonPersistedJob","WAWebUpdateLidMetadataApi"],(function(a,b,c,d,e,f,g){function a(a){a={updates:a};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateLidMetadata",function(a){return d("WAWebUpdateLidMetadataApi").updateLidMetadata(a)}).waitUntilCompleted(a)}g.updateLidMetadataJob=a}),98);
__d("WAWebCreateChat",["Promise","WALogger","WANullthrows","WAWebABProps","WAWebABPropsSaga","WAWebApiBusinessProfile","WAWebApiChat","WAWebApiContact","WAWebApiOrphanTcToken","WAWebApiVerifiedBusinessName","WAWebBackendApi","WAWebBotTypes","WAWebChatOriginTypes","WAWebContactSystemMsg","WAWebEphemeralityResolver","WAWebEphemeralityTypes","WAWebFmxActionWamEvent","WAWebGetCTWAEligibilityFromConversion","WAWebGetMessageCache","WAWebHandleMsgTypes.flow","WAWebHandleSingleMsg","WAWebInitialSystemMsg","WAWebLid1X1MigrationGating","WAWebLidAwareContactsDB","WAWebMsgEphemerality","WAWebPrivacyModeSystemMsg","WAWebQueryBusinessProfile","WAWebSagaSystemMsg","WAWebUpdateLidMetadataJob","WAWebUserPrefsMeUser","WAWebWamEnumFmxEntryPoint","WAWebWamEnumFmxEvent","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] DM settings found for new chat"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["createChat: "," unexpected lid chat created"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["lid: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["createChat: "," trying to create new lid chat without abprop pnh_1on1_lid_expected"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["lid: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["createChat: "," trying to create new username chat when phone number is known."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot create chat since could not find Lid for new chat"]);o=function(){return a};return a}function a(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){f=(f=f)!=null?f:{};var g=f.forceUsync;g=g===void 0?!1:g;var h=f.firstIncomingMsg,o=f.nextPrivacyMode;f=f.createdOffline;f=f===void 0?!1:f;var p=a.chatId;if(a.chatId.isLid()){c("WANullthrows")(e==null?void 0:e.lidOriginType,"Origin type is missing when creating LID chat");var t=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a.chatId)),v=b==null||!d("WAWebChatOriginTypes").VALID_LID_ORIGINS.has(b),w=b!=null&&d("WAWebChatOriginTypes").VALID_USERNAME_ORIGINS.has(b)&&a.chatId.isLid()&&t!=null,x=b==null||w;x?(w?d("WALogger").LOG(n(),b).sendLogs("unexpected-username-lid-chat"):(d("WALogger").LOG(m(),a.chatId.toLogString()),d("WALogger").ERROR(l(),b).sendLogs("create-lid-chat-without-pnh-1on1-lid-expected")),t!=null&&(p=t)):v&&(d("WALogger").LOG(k(),a.chatId.toLogString()),d("WALogger").ERROR(j(),b).sendLogs("unexpected-lid-chat"));x=(yield d("WAWebApiContact").getContactRecord(d("WAWebUserPrefsMeUser").assertGetMeUser()));b==="username_contactless_search"&&(x==null?void 0:x.username)==null&&(yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(a.chatId),data:{shareOwnPn:!0}}]))}w=p.isUser()&&g?yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getOrQueryUsyncInfo",{wid:p}):null;t=w==null?p:w.wid;if(!p.equals(t)){v=(yield d("WAWebApiChat").getChatRecord(t));if(v!=null)return}b=!1;x=!1;g=null;if((w==null?void 0:w.bizInfo)!=null){b=(p=w.bizInfo)==null?void 0:p.verifiedName.isApi;x=(v=w.bizInfo)==null?void 0:v.verifiedName.isSmb;g=d("WAWebPrivacyModeSystemMsg").getPrivacyModeFromQueryExistResponse(w)}else if(w==null){p=(yield d("WAWebApiVerifiedBusinessName").getVerifiedBusinessNameRecord(t));p!=null&&(x=p.isSmb,b=p.isApi,g=p.privacyMode!=null?d("WAWebApiVerifiedBusinessName").convertPrivacyModeFromStorageType(p.privacyMode):null)}v=e!=null?babelHelpers["extends"]({},e,{id:t}):{id:t};d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyLidMessagingRules()&&t.isUser()&&(v.accountLid=c("WANullthrows")(a.accountLid,"account lid not provided for one on one chat creation"));w=t.isUser()?yield s(t,b,h):null;w!=null&&(d("WALogger").LOG(i()).devConsole(w),v.ephemeralDuration=w.duration,v.ephemeralSettingTimestamp=w.settingTimestamp,v.disappearingModeInitiator=w.initiator,d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")&&(v.disappearingModeTrigger=w.disappearingModeTrigger,v.disappearingModeInitiatedByMe=w.initiatedByMe));p=d("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(o,g);d("WAWebBackendApi").frontendFireAndForget("updateBusinessInfo",{contactId:t,businessInfo:{privacyMode:p}});var y;(h==null?void 0:h.subtype)!=="ephemeral_setting"&&(y=r(t,w==null?void 0:w.duration,w==null?void 0:w.initiator));var z;t.isCAPISupportAccount()&&d("WAWebABPropsSaga").getIsSagaEnabled()&&(z=d("WAWebSagaSystemMsg").genSagaInitSystemMsg(t));e=(h==null?void 0:h.ctwaContext)!=null&&d("WAWebGetCTWAEligibilityFromConversion").getCTWAEligibilityFromConversion({conversionData:h.ctwaContext.conversionData,conversionSource:h.ctwaContext.conversionSource});o=(yield d("WAWebContactSystemMsg").genContactInfoCardMsg(t,{isSmb:x,isEnterprise:b||(h==null?void 0:h.senderOrRecipientAccountTypeHosted)===!0,iAmStartingChat:h==null||h.id.fromMe,isWASupportStartingChat:h!=null&&t.isCAPISupportAccount(),isFromCTWA:e!=null}));o!=null&&new(d("WAWebFmxActionWamEvent").FmxActionWamEvent)({fmxEntryPoint:d("WAWebWamEnumFmxEntryPoint").FMX_ENTRY_POINT.FMX_CARD,fmxEvent:d("WAWebWamEnumFmxEvent").FMX_EVENT.FMX_CARD_INSERTED,isSenderSmb:x}).commit();var A;(x||b)&&(A=(yield u(t)));g=(yield c("WAWebInitialSystemMsg")(t,p,A));g.some(function(a){return a.subtype==="biz_bot_3p_disclosure"})?v.bizBotSystemMsgType=d("WAWebBotTypes").BizBotType.BIZ_3P:g.some(function(a){return a.subtype==="biz_bot_1p_disclosure"})&&(v.bizBotSystemMsgType=d("WAWebBotTypes").BizBotType.BIZ_1P);w=(yield d("WAWebApiOrphanTcToken").getOrphanTcToken(t.toString()));if(w){v.tcToken=(h=w.tcToken)!=null?h:null;v.tcTokenTimestamp=(e=w.tcTokenTimestamp)!=null?e:null;yield d("WAWebApiOrphanTcToken").removeOrphanTcToken(t.toString())}yield d("WAWebBackendApi").frontendFireAndForget("chatCollectionGadd",{chat:v});yield d("WAWebApiChat").createChatRecord(t,q(v));x=d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE;b=!1;if(!f){p=[o].concat(g,[y,z]).filter(Boolean);for(h of p)yield d("WAWebHandleSingleMsg").handleSingleMsg(t,h,"createChat",x,b)}else{w=[o].concat(g,[y,z]).filter(Boolean);d("WAWebGetMessageCache").getMessageCache().addMessages(w.map(function(a){return{msg:a}}),!1)}if(a.chatId.isUser()){e=d("WAWebWidFactory").createUserWid(a.chatId.toString());v=e.toJid();f=d("WAWebApiContact").getContactHash(v);yield c("WAWebLidAwareContactsDB").createOrMerge(v,{id:v,contactHash:f})}});return p.apply(this,arguments)}function e(a){if(!d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyLidMessagingRules())return null;if(!a.isUser())return null;a=a.isLid()?a:d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").toUserWid(a));if(a==null){d("WALogger").ERROR(o()).sendLogs("cannot create chat since could not find Lid for new chat");throw c("err")("cannot create chat since could not find Lid for new chat")}return a}function q(a){var b;b={id:a.id.toString(),accountLid:(b=a.accountLid)==null?void 0:b.toString(),t:a.t,isAutoMuted:!1,unreadCount:(b=a.unreadCount)!=null?b:0,notSpam:a.notSpam,ephemeralDuration:a.ephemeralDuration,ephemeralSettingTimestamp:a.ephemeralSettingTimestamp,disappearingModeInitiator:a.disappearingModeInitiator!=null?a.disappearingModeInitiator:a.disappearingModeInitiator,tcToken:(b=a.tcToken)!=null?b:void 0,tcTokenTimestamp:(b=a.tcTokenTimestamp)!=null?b:void 0,tcTokenSenderTimestamp:(b=a.tcTokenSenderTimestamp)!=null?b:void 0,bizBotSystemMsgType:a.bizBotSystemMsgType,lidOriginType:a.lidOriginType};if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){var c;b.disappearingModeTrigger=a.disappearingModeTrigger!=null?a.disappearingModeTrigger:a.disappearingModeTrigger;b.disappearingModeInitiatedByMe=(c=a.disappearingModeInitiatedByMe)!=null?c:void 0}a.name!=null&&(b.name=a.name);a.isReadOnly!=null&&(b.isReadOnly=a.isReadOnly);a.muteExpiration!=null&&(b.muteExpiration=a.muteExpiration);return b}function f(a){a=q(a);return c("lodash").pickBy(a,function(a){return a!=null})}function r(a,b,c){var e=null;b!=null&&(c===d("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat?e=d("WAWebContactSystemMsg").genDisappearingModeUpdateSystemMsg(a,b,null):e=d("WAWebContactSystemMsg").genDefaultDisappearingModeSystemMsg(a,b,c===d("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe));return e}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=(yield (h||(h=b("Promise"))).all([d("WAWebApiContact").getContactRecord(d("WAWebUserPrefsMeUser").assertGetMeUser()),d("WAWebApiContact").getContactRecord(a)])),g=f[0];f=f[1];if(!c&&a.isUser()&&!a.isPSA()){c=e==null||e.id.fromMe;if(c)return d("WAWebEphemeralityResolver").resolveNewChatDMSettings(g,f);a=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(g);return d("WAWebEphemeralityResolver").resolveNewIncomingChatDMSettings(e?d("WAWebMsgEphemerality").getMsgEphemeralitySettings(e):null,a)}});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebApiBusinessProfile").getBusinessProfileRow(a.toString()));if(b)return d("WAWebBotTypes").BizBotAutomatedType.cast(b.automatedType);b=(yield d("WAWebQueryBusinessProfile").queryBusinessProfile([{wid:a}]));return(a=b[0])==null?void 0:(b=a.profile)==null?void 0:b.automated_type});return v.apply(this,arguments)}g.createChat=a;g.getAccountLidForNewChat=e;g.createNewsletterObjectForStorage=f}),98);
__d("WAWebCryptoDecryptPartialMedia",["Promise","WALogger","WATypedArraysConcat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialMedia:getEncryptedPadding encrypt error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialMedia:getEncryptedPadding importKey error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialMedia:decrypt decrypt error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialMedia:decrypt importKey error: ",""]);l=function(){return a};return a}var m=16,n=10,o=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ciphertext,c=a.iv;a=a.mediaKeys;a=a.encKey;c={name:"AES-CBC",iv:c};try{a=(yield self.crypto.subtle.importKey("raw",new Uint8Array(a),"AES-CBC",!1,["decrypt"])["catch"](function(a){d("WALogger").LOG(l(),String(a));throw a}));return self.crypto.subtle.decrypt(c,a,b)}catch(a){d("WALogger").LOG(k(),String(a));throw a}});return function(b){return a.apply(this,arguments)}}(),p=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ciphertext;a=a.mediaKeys;a=a.encKey;b=b instanceof Uint8Array?b:new Uint8Array(b);b={name:"AES-CBC",iv:b.slice(0-m)};try{a=(yield self.crypto.subtle.importKey("raw",new Uint8Array(a),"AES-CBC",!1,["encrypt"])["catch"](function(a){d("WALogger").LOG(j(),String(a));return void 0}));var c=new Uint8Array([]);return self.crypto.subtle.encrypt(b,a,c)}catch(a){d("WALogger").LOG(i(),String(a));return void 0}});return function(b){return a.apply(this,arguments)}}(),q=function(a){var c=a.serverRangeStart,e=a.ciphertext;a=a.mediaKeys;var f=e instanceof Uint8Array?e:new Uint8Array(e);e=c===0;c=f.byteLength%m===0;var g=!c,i;e?i=new Uint8Array(a.iv):(i=f.slice(0,m),f=f.slice(m));g&&(f=f.slice(0,f.byteLength-n));return c?p({ciphertext:f,mediaKeys:a}).then(function(a){f=d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[f,new Uint8Array(a)]);return{ciphertext:f,iv:i}}):(h||(h=b("Promise"))).resolve({ciphertext:f,iv:i})};a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.mediaKeys;a=a.ciphertext;a=(yield q({serverRangeStart:0,ciphertext:a,mediaKeys:b}));var c=a.ciphertext;a=a.iv;return o({ciphertext:c,iv:a,mediaKeys:b})});return function(b){return a.apply(this,arguments)}}();g.BLOCK_SIZE=m;g.HMAC_SIZE=n;g.decrypt=o;g.cleanupCiphertextAndIv=q;g.decryptPartialMedia=a}),98);
__d("WAWebDBUpdateChatTable",["WALogger","WAWebMiscErrors","WAWebSchemaChat","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateChatTable: failed to update in storage"]);h=function(){return a};return a}function a(a,b){return d("WAWebSchemaChat").getChatTable().merge(a.toString(),b)["catch"](function(a){if(a instanceof d("WAWebMiscErrors").DbOnLogoutAbort)throw a;d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("updateChatTable failed");throw c("err")("updateChatTable failed")})}g.updateChatTable=a}),98);
__d("WAWebDBChatEphemeralExemptionData",["WALogger","WAWebChatEphemeralExemptionCache","WAWebDBUpdateChatTable","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to update chat.ephemeralDisplayedExemptions: ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.toString();if(c("WAWebChatEphemeralExemptionCache").has(b))return c("WAWebChatEphemeralExemptionCache").get(b);a=(yield d("WAWebSchemaChat").getChatTable().get(a.toString(),!1));a=a==null?null:{id:b,ephemeralDuration:a==null?void 0:a.ephemeralDuration,ephemeralDisplayedExemptions:a==null?void 0:a.ephemeralDisplayedExemptions};c("WAWebChatEphemeralExemptionCache").add(b,a);return a});return i.apply(this,arguments)}function e(a,b,e){var f=a.toString();c("WAWebChatEphemeralExemptionCache").add(f,{id:f,ephemeralDuration:b,ephemeralDisplayedExemptions:e});d("WAWebDBUpdateChatTable").updateChatTable(a,{ephemeralDisplayedExemptions:e})["catch"](function(){d("WALogger").DEV(h(),d("WAWebDBUpdateChatTable").updateChatTable)})}function f(a,b){a=a.toString();var d=c("WAWebChatEphemeralExemptionCache").get(a);d={id:a,ephemeralDuration:b,ephemeralDisplayedExemptions:(b=d==null?void 0:d.ephemeralDisplayedExemptions)!=null?b:null};c("WAWebChatEphemeralExemptionCache").add(a,d)}g.getChatEphemeralExemptionDataFromChat=a;g.persistsEphemeralDisplayedExemptions=e;g.updateEphemeralDurationCache=f}),98);
__d("WAWebDBEphemeralDisplayedExemptions",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({UNSET:0,ORDERS_AND_PAYMENTS:1});f.EphemeralExemptionType=a}),66);
__d("WAWebDexieBootstrap",["WAWeb-dexie"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("WAWeb-dexie").Promise.PSD.onunhandled=function(){},c("WAWeb-dexie").Promise.PSD.txRelaxedDurabilityEnabled=!0}g.patchDexie=a}),98);
__d("WAWebDropdown.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={"-emoji-picker-width":"388px;",container:"_ak4w",containerMaterial:"_ap4-",containerMaterialPadding:"_ap4_",suggestions:"_ak54",reactionDetails:"_ak51",reactionSendTray:"_ak52",datePicker:"_aos4",right:"_ak4x",picker:"_ak4z",tooltip:"_ak56",items:"_ak5b",nib:"_ak5a",tooltipHighlight:"_ak57",inverse:"_ak58",emoji:"_ak4-",sticker:"_ak4_",colorPicker:"_ak50",labelColorPicker:"_aozv",reactionPicker:"_ak53",inverseVertical:"_ak59",text:"_ak55",attachMenu:"_ak4y",attachMenuPopup:"_al02",expressionsPanel:"_alox",expressionsPanelInsideInput:"_ao_l",expressionsPanelOutsideInput:"_ao_m"};b=a;g["default"]=b}),98);
__d("WAWebFocusTracer",["WALogger","WAShiftTimer"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["Setting focus to:"]);a=function(){return b};return b}function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Focus loop encountered."]);h=function(){return a};return a}var i=5,j=75,k=[],l=!1;function b(){k=[],l=!1}function m(){if(k.length<i)return!1;var a=new Set();for(var b=0;b<k.length;b++){if(a.has(k[b]))return!0;a.add(k[b])}return!1}function n(a){k.length===i&&k.shift(),k.push(a)}var o=new(d("WAShiftTimer").ShiftTimer)(b);document.addEventListener("keydown",function(a){o.forceRunNow()},{capture:!0,passive:!0});function c(a,b){if(!a)return;if(k.length&&a===k[k.length-1])return;l=l||window.event!=null;n(a);if(m()&&!l){d("WALogger").ERROR(h()).sendLogs("focus-loop");return}o.onOrBefore(j);a.focus(b)}e={focus:c};f=e;g["default"]=f}),98);
__d("WAWebUimContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b=a(null);g["default"]=b}),98);
__d("useWAWebUIM",["WAWebUimContext","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useContext;function a(){var a=i(c("WAWebUimContext"));return a}g["default"]=a}),98);
__d("WAWebDropdown.react",["$InternalEnum","WANullthrows","WAWebAttachMenuGatingUtils","WAWebClassnames","WAWebCmd","WAWebCompatibility","WAWebDropdown.scss","WAWebFocusIndicator","WAWebFocusTracer","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebMiscGatingUtils","WAWebStylePropertiesDeprecated","WAWebUIRefreshGatingUtils","WAWebUISpacing","react","stylex","useMergeRefs","useWAWebUIM"],(function(a,b,c,d,e,f,g){var h,i,j;e=j||d("react");var k=h||(h=c("react")),l=e.useEffect,m=e.useMemo,n=e.useRef,o=e.useState;e=d("WAWebStylePropertiesDeprecated").getIntFromStylesProp(c("WAWebDropdown.scss"),"-emoji-picker-width");var p=32,q=32,r=10,s=k.forwardRef(a),t=b("$InternalEnum").Mirrored(["Dropdown","DropdownMenu","DropdownText","AttachMenu","Picker","EmojiPicker","StickerPicker","ColorPicker","LabelColorPicker","Tooltip","ReactionDetailsPane","ReactionSendTray","ReactionPicker","DatePicker","Suggestions","AttachMenuPopup","ExpressionsPanel","EventsRSVPPopup"]),u=b("$InternalEnum").Mirrored(["Default","Highlight"]),v=b("$InternalEnum").Mirrored(["LEFT","CENTER","RIGHT"]),w=b("$InternalEnum").Mirrored(["TOP","BOTTOM"]),x={eventsRSVPPopup:{boxSizing:"x9f619",borderTopStartRadius:"xp8fpb",borderTopEndRadius:"xjcfk4l",borderBottomEndRadius:"x10zrdz0",borderBottomStartRadius:"xp22k0r",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function y(a){switch(a){case v.RIGHT:return v.LEFT;case v.LEFT:return v.RIGHT;case v.CENTER:return v.CENTER}}function z(a,b,d){d=d&&c("WAWebL10N").isRTL()?y(a):a;return[d,b]}function A(a,b){a=y(a);b=b===w.TOP?w.BOTTOM:w.TOP;return b+" "+a}function B(a,b,c,d){var e={};switch(a){case v.RIGHT:e.left=Math.min(window.innerWidth-((a=d==null?void 0:d.offsetWidth)!=null?a:0)-q,c.x);break;case v.LEFT:e.right=window.innerWidth-c.x;break;case v.CENTER:e.left=c.x-((a=d==null?void 0:d.offsetWidth)!=null?a:0)/2;e.marginLeft=0;e.marginRight=0;break}switch(b){case w.BOTTOM:e.top=c.y;a=d==null?void 0:d.offsetHeight;if(a!=null){b=window.innerHeight-a-p;e.top=Math.min(b,c.y);e.top<0&&(e.top=0,e.height=window.innerHeight-p,e.overflowY="auto")}break;case w.TOP:e.bottom=window.innerHeight-c.y;break}return e}function C(a,b,c){return a!==v.CENTER||b==null||c==null?null:{left:b.offsetWidth/2-c.offsetWidth/2}}function a(a,b){var e;a=babelHelpers["extends"]({},a);var f=a.type,g=f===void 0?t.Dropdown:f;f=a.dirX;var h=f===void 0?v.RIGHT:f;f=a.dirY;var j=f===void 0?w.BOTTOM:f;f=a.children;var p=a.flipOnRTL,q=a.origin,s=a.style,y=a.horizontal,E=a.isTemporaryRender,F=a.autoFocus,G=a.findFirstItem,H=a.onDefault,I=a.testid;I=a.tooltipColorScheme;a=o(!1);var J=a[0],K=a[1];a=o(null);var aa=a[0],L=a[1],M=n(null);a=n();var N=n();b=c("useMergeRefs")(b,M);var O=c("useWAWebUIM")(),P=m(function(){return g!==t.EmojiPicker&&g!==t.Suggestions&&g!==t.ReactionDetailsPane&&g!==t.ReactionSendTray&&g!==t.StickerPicker&&g!==t.DatePicker&&g!==t.ColorPicker&&g!==t.LabelColorPicker&&g!==t.ReactionPicker&&g!==t.DropdownText},[g]);l(function(){if(!P)return;if(F){var a;a=(a=N.current)==null?void 0:a.querySelector("[tabindex]");var b;G&&a?b=a:N.current&&N.current.firstChild instanceof HTMLDivElement&&a?b=a:N.current&&N.current.children.length>0&&(b=N.current.children[0]);c("WAWebFocusTracer").focus(b);K(!0);L(b)}else c("WAWebFocusTracer").focus(M.current)},[]);l(function(){if(!N.current||!M.current||E)return;d("WAWebCmd").Cmd.floaterEscapeOverlap(M.current,r)},[E]);var Q=m(function(){var a,b={};a=(a=s)!=null?a:{};var c=z(h,j,p),e=c[0];c=c[1];b[d("WAWebCompatibility").compatPrefix("transformOrigin")]=A(e,c);if(!q)return babelHelpers["extends"]({},a,b);e=B(e,c,q,M.current);return babelHelpers["extends"]({},a,b,e)},[h,j,p,q,s]),ba=function(a){c("WAWebFocusTracer").focus(M.current),K(!1)},R=function(a,b){b=(b<0?a.length-1:b)%a.length;c("WAWebFocusTracer").focus(a[b]);K(!0);L(a[b])},S=function(){var a=Array.from(c("WANullthrows")(N.current).querySelectorAll("li:not(.dropdown-item-disabled)"));return{activeChildren:a,currentlyFocusedIndex:a.indexOf(aa)}},T=function(a){D(a);a=S();var b=a.activeChildren;a=a.currentlyFocusedIndex;if(b.length===0)return;R(b,a-1)},U=function(a){D(a);a=S();var b=a.activeChildren;a=a.currentlyFocusedIndex;if(b.length===0)return;R(b,a+1)},V=function(a){D(a);var b=S(),c=b.activeChildren;b=b.currentlyFocusedIndex;if(c.length===0)return;if(c.length>12||c.length===6){U(a);return}var d;a=(c.length-2)/2;var e=0,f=a-1,g=a,h=c.length-3;b===-1?d=e:b>=g&&b<=h?d=b-a:b>=e&&b<=f?d=b:d=g;R(c,d)},W=function(a){D(a);var b=S(),c=b.activeChildren;b=b.currentlyFocusedIndex;if(c.length===0)return;if(c.length>12||c.length===6){T(a);return}a=(c.length-2)/2;var d=0,e=a-1,f=a,g=c.length-3;b>=f&&b<=g?f=g+1:b>=d&&b<=e?f=b+a:f=b;R(c,f)},ca=function(a){a.preventDefault(),O==null?void 0:O.requestDismiss()},X=function(a){H&&(c("WAWebFocusIndicator").shouldIndicateFocus(),O==null?void 0:O.requestDismiss(),H(a))},da=function(a){a.stopPropagation(),c("WAWebFocusTracer").focus(M.current),L(void 0)},Y=d("WAWebUIRefreshGatingUtils").materialRefreshEnabled();I=d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[c("WAWebDropdown.scss").container]=g===t.Dropdown||g===t.DropdownMenu||g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.Suggestions||g===t.DropdownText||g===t.AttachMenuPopup||g===t.ExpressionsPanel||g===t.EventsRSVPPopup,e[c("WAWebDropdown.scss").right]=g===t.DropdownMenu,e[c("WAWebDropdown.scss").attachMenu]=g===t.AttachMenu,e[c("WAWebDropdown.scss").picker]=g===t.Picker,e[c("WAWebDropdown.scss").emoji]=g===t.EmojiPicker,e[c("WAWebDropdown.scss").sticker]=g===t.StickerPicker,e[c("WAWebDropdown.scss").colorPicker]=g===t.ColorPicker,e[c("WAWebDropdown.scss").labelColorPicker]=g===t.LabelColorPicker,e[c("WAWebDropdown.scss").reactionDetails]=g===t.ReactionDetailsPane,e[c("WAWebDropdown.scss").reactionSendTray]=g===t.ReactionSendTray,e[c("WAWebDropdown.scss").reactionPicker]=g===t.ReactionPicker,e[c("WAWebDropdown.scss").datePicker]=g===t.DatePicker,e[c("WAWebDropdown.scss").suggestions]=g===t.Suggestions,e[c("WAWebDropdown.scss").attachMenuPopup]=g===t.AttachMenuPopup,e[c("WAWebDropdown.scss").expressionsPanel]=g===t.ExpressionsPanel,e[c("WAWebDropdown.scss").expressionsPanelInsideInput]=g===t.ExpressionsPanel&&!d("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput(),e[c("WAWebDropdown.scss").expressionsPanelOutsideInput]=g===t.ExpressionsPanel&&d("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput(),e[c("WAWebDropdown.scss").text]=g===t.DropdownText,e[c("WAWebDropdown.scss").tooltip]=g===t.Tooltip,e[c("WAWebDropdown.scss").tooltipHighlight]=I===u.Highlight,e[c("WAWebDropdown.scss").inverse]=(g===t.Picker||g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.DropdownText||g===t.Tooltip)&&h===v.LEFT,e[c("WAWebDropdown.scss").inverseVertical]=(g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.DropdownText)&&j===w.TOP,e[c("WAWebDropdown.scss").containerMaterial]=Y,e[c("WAWebDropdown.scss").containerMaterialPadding]=Y&&(g===t.Dropdown||g===t.DropdownMenu),e));Y=[].concat(g===t.EventsRSVPPopup?[x.eventsRSVPPopup,d("WAWebUISpacing").uiPadding.vert0]:[]);e=g===t.Picker||g===t.EmojiPicker||g===t.StickerPicker||g===t.LabelColorPicker||g===t.DropdownText||g===t.Tooltip?k.jsx("div",{"data-testid":void 0,ref:a,className:c("WAWebDropdown.scss").nib,"data-animate-dropdown-nib":!0,style:C(h,M.current,a.current)}):null;if(P){a={enter:X,tab:D,"shift+tab":D,up:function(){},down:function(){}};var Z,$;d("WAWebMiscGatingUtils").multiSkinToneEmojiPickerEnabled()&&g===t.Picker?c("WAWebL10N").isRTL()?(Z=W,$=V):(Z=V,$=W):(Z=T,$=U);if(y){a[(V=c("WAWebL10N")).LR("left","right")]=T;a[V.LR("right","left")]=U;a[V.LR("up","down")]=Z;a[V.LR("down","up")]=$}else g===t.AttachMenu?(a.up=U,a.down=T):(a.up=T,a.down=U),g!==t.ExpressionsPanel&&(a[c("WAWebL10N").LR("left","right")]=ca,a[c("WAWebL10N").LR("right","left")]=X);return k.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:b,handlers:a,role:"application",className:I+" "+(i||(i=c("stylex")))(Y),style:Q,onMouseMove:J?ba:null,onMouseUp:da,children:[k.jsx("ul",{"data-testid":void 0,ref:N,className:c("WAWebDropdown.scss").items,children:f}),e]})}return k.jsxs("div",{ref:b,className:I,style:Q,"data-testid":void 0,children:[f,e]})}a.displayName=a.name+" [from "+f.id+"]";function D(a){a.stopPropagation(),a.preventDefault()}g.EMOJI_PICKER_WIDTH=e;g.MenuType=t;g.TooltipColorScheme=u;g.DirX=v;g.DirY=w;g.Dropdown=s}),98);
__d("WAWebEmojiAssetLoaderCompletionTracker",["WALogger","WAWebAssetLoaderSingleton","react"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["EmojiCompletionTracker:firstScreenEmojis complete in "," ms"]);i=function(){return a};return a}a=(h||d("react")).createContext;var j=1e3,k=5e3;b=function(){var a=this;this.$1=0;this.$2=!1;this.$3=!1;this.beginPreload=function(b){b===void 0&&(b=!1);if(a.$2)return;a.$2=!0;self.setTimeout(function(){d("WAWebAssetLoaderSingleton").AssetLoader.loadEmojis()},b?j:0)};this.beginPreloadFallback=function(){self.setTimeout(function(){a.beginPreload(!1)},k)};this.incrementLoadingEmojisCount=function(){if(a.$2)return;a.$3||(a.$3=!0,a.$4=self.performance.now());a.$1+=1};this.decrementLoadingEmojisCount=function(){if(a.$2)return;a.$1-=1;a.$1===0&&a.$3&&(a.beginPreload(!0),d("WALogger").LOG(i(),Math.ceil(self.performance.now()-a.$4)))}};c=new b();e=a(c);g.EmojiCompletionTracker=b;g.emojiCompletionTracker=c;g.InitialEmojisCompletionContext=e}),98);
__d("WAWebWebcImgErrorWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcImgError:[1700,{webcImgErrorCode:[1,d("WAWebWamCodegenUtils").TYPES.NUMBER]},[1,1,1],"regular"]},{WebcImgError:[]});g.WebcImgErrorWamEvent=a}),98);
__d("WAWebImgRetry",["Promise","WAAbortError","WALogger","WAPromiseTimeout","WAWebMiscErrors","WAWebWebcImgErrorWamEvent","WAWebXHR"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Img:Retry "," failed with error code ",". Not retrying."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Img:Retry "," failed with error code ",". Retrying."]);j=function(){return a};return a}var k=30*1e3;a=function(){function a(a,b,c,d){this.src=a,this.crossOrigin=b,this.noXHR=c,this.hasPrivacyChecks=d,this.generation=0,this.refCount=0,this.inProgress=!1}var e=a.prototype;e.key=function(){var a=this.crossOrigin?"Y":"N",b=this.noXHR?"Y":"N";return"co:"+a+",noXHR:"+b+",src:"+this.src};e.sendXHR=function(){var a=this;if(this.noXHR)return(h||(h=b("Promise"))).resolve(!0);var e=this.src;this.inProgress=!0;var f=new AbortController(),g=d("WAPromiseTimeout").promiseTimeout(c("WAWebXHR").get(e,void 0,void 0,f.signal),k,"ImgRetryTimeout");this.$1={promise:g,controller:f};return this.$1.promise.then(function(a){a=a.status;if(a>=200&&a<400)return!0;else if(a>=500){d("WALogger").LOG(j(),e,a);var b=new(d("WAWebWebcImgErrorWamEvent").WebcImgErrorWamEvent)({webcImgErrorCode:a});b.commit();return!1}d("WALogger").LOG(i(),e,a);b=new(d("WAWebWebcImgErrorWamEvent").WebcImgErrorWamEvent)({webcImgErrorCode:a});b.commit();throw new(d("WAWebMiscErrors").ServerStatusError)(null,e,a)})["catch"](function(a){if(a instanceof d("WAWebMiscErrors").ServerStatusError)throw a;if(a.name===d("WAAbortError").ABORT_ERROR)throw a;return!1})["finally"](function(){a.inProgress=!1})};e.release=function(){this.refCount--;if(this.refCount<=0){this.$1&&this.$1.controller.abort();return!0}return!1};e.shouldRetain=function(){return this.refCount>0};return a}();g["default"]=a}),98);
__d("WAWebPonyfillsIdleCallback",[],(function(a,b,c,d,e,f){function a(a){var b=self.setTimeout(function(){var b=Date.now();a({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-b))}})},1);return b}function b(a){self.clearTimeout(a)}c=window.requestIdleCallback;d=window.cancelIdleCallback;e="requestIdleCallback"in window?c.bind(window):a.bind(window);c="cancelIdleCallback"in window?d.bind(window):b.bind(window);f.requestIdleCallback=e;f.cancelIdleCallback=c}),66);
__d("WAWebIdleTaskRunner",["$InternalEnum","WAShiftTimer","WAWebPonyfillsIdleCallback"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["IDLE_CALLBACK","UI_BUSY"]),i=1e3;a=function(){function a(a){var b=this;this.busyMap=new Map();this.busyId=0;this.$1=function(){b.busyMap.clear()};this.$2=new Map();this.taskId=0;this.runIdleLoop=function(){b.idleType===h.IDLE_CALLBACK?b.idleCallbackId=d("WAWebPonyfillsIdleCallback").requestIdleCallback(b.$3):b.isIdle()&&b.$4()};this.$3=function(a){var c,d=b.$2.entries();while((c=d.next())&&!c.done){c=c.value;var e=c[0];c=c[1];c();b.$2["delete"](e);if(a.timeRemaining()<=0)break}b.$2.size>0&&b.runIdleLoop()};this.idleType=a}var b=a.prototype;b.setBusy=function(a){a=a;a!=null&&this.busyMap.has(a)?this.busyMap.set(a,this.busyMap.get(a)+1):(a=++this.busyId,this.busyMap.set(a,1));this.busyTimer||(this.busyTimer=new(d("WAShiftTimer").ShiftTimer)(this.$1));this.busyTimer.debounce(i);return a};b.decBusy=function(a){if(a==null)return;var b=this.busyMap.get(a);if(b==null||b===0)return;else b===1?this.clearBusy(a):this.busyMap.set(a,b-1)};b.clearBusy=function(a){var b=this.busyMap.get(a);b!=null&&this.busyMap["delete"](a);this.isIdle()&&(this.busyTimer.cancel(),this.$2.size>0&&self.setTimeout(this.runIdleLoop,0))};b.isIdle=function(){return this.busyMap.size===0};b.isBusy=function(){return this.busyMap.size>0};b.cancelIdleLoop=function(){this.idleType===h.IDLE_CALLBACK&&this.idleCallbackId!=null&&d("WAWebPonyfillsIdleCallback").cancelIdleCallback(this.idleCallbackId)};b.$4=function(){var a,b=this.$2.entries();while((a=b.next())&&!a.done){a=a.value;var c=a[0];a=a[1];a();this.$2["delete"](c);if(this.isBusy())break}};b.enqueue=function(a){this.$2.set(++this.taskId,a);this.$2.size===1&&this.runIdleLoop();return this.taskId};b.dequeue=function(a){a=this.$2["delete"](a);a&&this.$2.size===0&&this.cancelIdleLoop();return a};b.isInQueue=function(a){return this.$2.has(a)};return a}();c=new a(h.UI_BUSY);e=new a(h.IDLE_CALLBACK);g.UIBusyTasks=c;g.IdleCallbackTasks=e}),98);
__d("WAWebImgRetryQueue",["Promise","WAAbortError","WABackoffUtils","WANullthrows","WAPromiseRaceAbort","WAResolvable","WAWebIdleTaskRunner","WAWebMiscErrors","WAWebNetworkStatus"],(function(a,b,c,d,e,f,g){var h,i=20,j=10;a=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=0}a.maxInProgressRetry=function(){return i};var e=a.prototype;e.enqueue=function(a){var c=this.$1.get(a.key());if(c){if(a.hasPrivacyChecks!==c.hasPrivacyChecks){var e="Img:hasPrivacyChecks shouldn't change "+a.key();return(h||(h=b("Promise"))).reject(e)}c.refCount++;return c.deferred.promise}a.deferred=new(d("WAResolvable").Resolvable)();a.refCount++;this.$5(a);return a.deferred.promise};e.remove=function(a){a=a.key();this.$1["delete"](a);var b=this.$2.get(a);if(!b)return;b.controller.abort();this.$2["delete"](a)};e.$5=function(a){var b=this,e=a.generation;a.generation++;if(e>j){var f="Stop retrying "+a.src+" after "+j+" times";throw new(d("WAWebMiscErrors").GaveUpRetry)(f)}var g=a.key();if(e===0)this.$1.set(g,a),this.$6();else{f=new AbortController();var h=f.signal;e=c("WAPromiseRaceAbort")(d("WABackoffUtils").expDelaySec(e,60,0),h)["catch"](d("WAAbortError").catchAbort(function(){}));this.$2.set(a.key(),{promise:e,controller:f});e.then(function(){b.$2["delete"](g),h.aborted||b.$1.set(g,a),b.$6()})}};e.$6=function(){var a=this;if(this.$4)return;this.$4=c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal}).then(function(){a.$4=null,d("WAWebIdleTaskRunner").UIBusyTasks.enqueue(function(){a.$7()})})};e.$7=function(){var b=this.$1.values(),d;while((d=b.next())&&!d.done){if(this.$3>a.maxInProgressRetry())break;d=d.value;this.$8(c("WANullthrows")(d))}};e.$8=function(a){var b=this;if(a.inProgress)return;if(a.deferred.resolveWasCalled()){this.$1["delete"](a.key());return}this.$3++;a.sendXHR().then(function(c){b.$1["delete"](a.key()),c?a.deferred.resolve():a.shouldRetain()&&b.$5(a)})["catch"](function(c){b.$1["delete"](a.key()),a.deferred.reject(c)})["finally"](function(){b.$3--})};return a}();g["default"]=a}),98);
__d("useWAWebUnmountSignal",["react"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(){var a=j(function(){return new AbortController()}),b=a[0];i(function(){return function(){return b.abort()}},[b]);return b.signal}g["default"]=a}),98);
__d("WAWebImg.react",["WAAbortError","WAFilteredCatch","WAWebConstantsDeprecated","WAWebCopyPasteSelectable.react","WAWebImgRetry","WAWebImgRetryQueue","WAWebMiscErrors","WAWebURLUtils","react","useMergeRefs","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=b.useState,n=new(c("WAWebImgRetryQueue"))();e=j.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=e.alt;var f=e.className,g=e.crossOrigin,h=g===void 0?!0:g;g=e.draggable;var i=e.onClick,q=e.onMouseMove,r=e.plainText,s=e.selectable,t=e.style,u=e.renderLoading,v=e.renderError,w=e.disableContextMenu,x=w===void 0?!1:w;w=e.noXHR;var y=w===void 0?!1:w;w=e.hasPrivacyChecks;var z=w===void 0?!0:w,A=e.onError,B=e.onLoad,C=l(null);w=c("useMergeRefs")(b,C);var D=l(null);b=m(e.src);var E=b[0];b=b[1];var F=m(!0),G=F[0],H=F[1];F=m(null);var I=F[0],J=F[1];F=m(!0);var K=F[0],L=F[1],M=c("useWAWebUnmountSignal")();e.src!==E&&(b(e.src),H(!0));F=function(a){x&&a.preventDefault()};b=function(a){H(!1);if(!E||!p(E)){J(a.error);return}a=D.current;var b;if(a)if(o(a,e)){if(!a.noXHR)return;b=a}else{var f=a.release();f&&n.remove(a);b=new(c("WAWebImgRetry"))(E,h,y,z)}else b=new(c("WAWebImgRetry"))(E,h,y,z);D.current=b;f=n.enqueue(b);f.then(function(){if(b!==b)return;if(M.aborted)return;H(!0)})["catch"](d("WAFilteredCatch").filteredCatch([d("WAWebMiscErrors").ServerStatusError,d("WAWebMiscErrors").GaveUpRetry],function(a){if(b!==b)return;if(M.aborted)return;H(!1);J(a);A&&A(a)}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").Unmount,function(){}))["catch"](d("WAAbortError").catchAbort(function(){}))};var N=function(a){if(a.target instanceof HTMLImageElement){var b=C.current;(b==null?void 0:b.complete)&&(b.style.visibility="visible");B&&B(a);L(!1)}};k(function(){if(!E)return;var a=C.current;a&&!a.complete&&(a.style.visibility="hidden");return function(){var a=D.current;if(a){var b=a.release();b&&n.remove(a)}}},[E]);if(I&&v)return v(I);v=Boolean(G&&E);return j.jsxs(j.Fragment,{children:[j.jsx(d("WAWebCopyPasteSelectable.react").SelectableImg,{ref:w,plainText:r||"",selectable:Boolean(s),crossOrigin:h?"anonymous":void 0,onError:v?b:function(){},onLoad:v?N:function(){},src:v&&E!=null?E:c("WAWebConstantsDeprecated").ONE_BY_ONE_TRANS_GIF,alt:a,className:f,draggable:g,onClick:i,onMouseMove:q,style:t,onContextMenu:F}),K&&(u==null?void 0:u())]})}a.displayName=a.name+" [from "+f.id+"]";b=e;function o(a,b){return a.src===b.src&&a.crossOrigin===b.crossOrigin&&a.noXHR===b.noXHR&&a.hasPrivacyChecks===b.hasPrivacyChecks}function p(a){return a[0]==="/"||c("WAWebURLUtils").isHttp(a)}g["default"]=b}),98);
__d("WAWebEmoji.react",["WAWebAssetLoader","WAWebAssetLoaderSingleton","WAWebClassnames","WAWebEmoji","WAWebEmojiAssetLoaderCompletionTracker","WAWebImg.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useContext,m=b.useEffect;function a(a){var b=l(d("WAWebEmojiAssetLoaderCompletionTracker").InitialEmojisCompletionContext);m(function(){var c=d("WAWebEmoji").EmojiUtil.getGlyphId(a.emoji);if(c==null)return;b.incrementLoadingEmojisCount();d("WAWebAssetLoaderSingleton").AssetLoader.loadEmoji(c,d("WAWebAssetLoader").LOAD_PRIORITY.LAZY_LOAD_EMOJI)["finally"](function(){b.decrementLoadingEmojisCount()})},[b,a.emoji]);var e=a.className,f=a.element,g=a.emoji,h=a.selectable,j=a.selected,n=a.size,o=a.src,p=a.onLoad,q=a.tabIndex,r=a.xstyle,s=d("WAWebEmoji").EmojiUtil.getGlyphId(g);if(s==null)return null;var t,u;o||(t=d("WAWebEmoji").EmojiUtil.getStyle(s,n),u=d("WAWebEmoji").EmojiUtil.getCssClasses(s,n));s=d("WAWebClassnames").classnamesConvertMeToStylexPlease(e,u,{selected:j},(i||(i=c("stylex")))(r));return f==="span"?k.jsx("span",{id:a["data-emoji-index"],"data-testid":void 0,"data-emoji":g,className:s,"aria-label":g,style:t,onLoad:p,tabIndex:q,"data-unicode":a["data-unicode"],"data-variant":a["data-variant"],"data-emoji-index":a["data-emoji-index"]}):k.jsx(c("WAWebImg.react"),{alt:g,className:s,draggable:!1,onLoad:p,plainText:g,selectable:h,style:t,src:o})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebEventSampling",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[EventSampling] override event sampling weight for ",": ",""]);h=function(){return a};return a}var i=null;function j(a){return i==null?null:i(a)}function a(a){var b=j(a);if(b!=null){d("WALogger").DEV(h(),a,b);return Math.abs(b)}return null}function b(a){i=a}g.getClientEventSamplingWeight=a;g.setGetEventSamplingConfigValueImpl=b}),98);
__d("WAWebExternalLink.react",["$InternalEnum","WALogger","WAUnicodeUtils","WAWebClassnames","WAWebConstantsDeprecated","WAWebKeyboardIsKeyActivation","WAWebURLUtils","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bad url: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bad url: ",""]);l=function(){return a};return a}var m=j||d("react"),n=h||(h=c("react")),o=m.memo,p=m.useRef,q={hoverUnderline:{":hover_textDecoration":"xt0b8zv",$$css:!0}};function a(a){var b=p(),e=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)){(a=b.current)==null?void 0:a.click()}},f=a.children,g=a.className,h=a.href,j=a.isLongTemplateUrl,k=a.onClick,m=a.testid;m=a["aria-label"];a=a.xstyle;if(!c("WAWebURLUtils").hasValidUrlScheme(h)){h.toLowerCase().startsWith("javascript:")&&d("WALogger").ERROR(l(),h).sendLogs("URL error");return null}g=d("WAWebClassnames").classnamesConvertMeToStylexPlease(g,(i||(i=c("stylex")))(a,q.hoverUnderline));return j?n.jsxs("a",{ref:b,rel:"noopener noreferrer",className:g,href:h,target:"_blank",onClick:k,onKeyDown:e,"aria-label":m,children:[d("WAUnicodeUtils").substring(h,0,c("WAWebConstantsDeprecated").TEMPLATE_URL_START),n.jsx("span",{children:"\u2026"}),d("WAUnicodeUtils").substring(h,h.length-c("WAWebConstantsDeprecated").TEMPLATE_URL_END,h.length)]}):n.jsx("a",{ref:b,rel:"noopener noreferrer",className:g,href:h,target:"_blank",onClick:k,onKeyDown:e,"data-testid":void 0,"aria-label":m,children:f})}a.displayName=a.name+" [from "+f.id+"]";m=o(a);f={link_device_banner:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=1daca7",link_device_banner_2:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=a0269a",intro_panel:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=68a40a",chatlist_toastbar:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=dea681",search_results_toastbar:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=586f03",call_btn_modal:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=3926ea",call_btn_modal_2:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=1f9c76",chatlist_dropdown_menu:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=cc3981",missed_call_modal:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=c4d5cd",missed_call_modal_2:"ms-windows-store://pdp/?productid=9NKSQGP7F2NH&mode=mini&cid=5721b2"};o={link_device_banner:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_linking_screen&mt=8",link_device_banner_2:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_linking_screen&mt=8",intro_panel:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_empty_state&mt=8",chatlist_toastbar:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_chat_overflow&mt=8",search_results_toastbar:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_search&mt=8",call_btn_modal:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_call_button&mt=8",call_btn_modal_2:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_call_button&mt=8",chatlist_dropdown_menu:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_chat_inbox&mt=8",missed_call_modal:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_missed_call&mt=8",missed_call_modal_2:"itms-apps://apps.apple.com/app/id310633997?pt=217218&ct=web2mac_missed_call&mt=8"};a="munki://detail-WhatsAppCatalyst.html";var r="https://dev-web.whatsapp.com/desktop/mac_native/release/",s="https://whatsapp.com/download/?start_mac_download=1",t="https://web.whatsapp.com",u="whatsapp://send/",v=[].concat(Object.values(f),Object.values(o),[a,r,s,t,u]),w=!1;function e(){return w}var x=b("$InternalEnum").Mirrored(["NEW_TAB","DEEPLINK_IN_CURRENT_TAB"]);function y(a,b){if(!v.includes(a)&&!c("WAWebURLUtils").hasValidUrlScheme(a)){a.toLowerCase().startsWith("javascript:")&&d("WALogger").ERROR(k(),a).sendLogs("URL error");return}b=(b=b)!=null?b:{};b=b.target;b=b===void 0?x.NEW_TAB:b;var e=document.createElement("a");e.href=a;b===x.NEW_TAB?e.target="_blank":b===x.DEEPLINK_IN_CURRENT_TAB&&(w=!0);e.rel="noopener noreferrer";e.style.display="none";document.body&&document.body.appendChild(e);e.click();document.body&&document.body.removeChild(e);b===x.DEEPLINK_IN_CURRENT_TAB&&self.setTimeout(function(){w=!1},1e3)}g.ExternalLink=m;g.WINDOWS_STORE_URIS=f;g.MAC_STORE_URIS=o;g.MAC_INTERNAL_MSC_STORE_URI=a;g.isOpeningDeeplinkInCurrentTab=e;g.ExternalLinkTarget=x;g.openExternalLink=y}),98);
__d("WAWebSWBusActions",[],(function(a,b,c,d,e,f){a={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",ACTIVE_TAB:"ACTIVE_TAB",STOP_COMMS:"STOP_COMMS",HEARTBEAT:"HEARTBEAT",WAM_UPLOAD:"WAM_UPLOAD"};b=a;f["default"]=b}),66);
__d("WAWebSWBus",["Promise","WALogger","WAWebBuildConstants","WAWebSWBusActions","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["[sw][","] response: "," ","ms"]);a=function(){return b};return b}function e(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sw][","] request: ",""]);e=function(){return a};return a}f=[c("WAWebSWBusActions").HEARTBEAT];f=function(){function a(c){var d=this;this.$1=function(c){if(!c.data||!c.data.action)return;var e=c.data;if(!c.ports||c.ports.length===0)return;var f=c.ports;if(!a.isSW()&&window.navigator.serviceWorker&&c.source!==window.navigator.serviceWorker.controller)return;var g;typeof c.waitUntil==="function"?g=function(a){return c.waitUntil(a)}:g=function(a){};g((h||(h=b("Promise"))).resolve(d.requestHandler(e)).then(function(a){f[0].postMessage(a)})["catch"](function(a){f[0].postMessage({error:a&&a.toString()})}))};this.requestHandler=c}var e=a.prototype;e.init=function(){var b=a.isSW()?self:window.navigator.serviceWorker;try{if(!b)return;b.addEventListener("message",this.$1)}catch(a){}};a.isSW=function(){return typeof window==="undefined"};a.getRequestor=function(c){if(!a.isSW())return!window.navigator.serviceWorker?(h||(h=b("Promise"))).resolve(null):window.navigator.serviceWorker.ready.then(function(){return!window.navigator.serviceWorker?null:window.navigator.serviceWorker.controller});else if(typeof c==="string")return self.clients.get(c);return(h||(h=b("Promise"))).resolve(c)};a.broadcast=function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,e){if(!a.isSW())throw c("err")("Broadcast called from non-serviceworker.");var f=(yield self.clients.matchAll());return f.length===0?(h||(h=b("Promise"))).reject(c("err")("No clients available.")):(h||(h=b("Promise"))).all(f.map(function(b){return a.request(b,d,e)}))});function e(a,b){return d.apply(this,arguments)}return e}();a.request=function(e,f,g){var i,j=d("WAWebBuildConstants").VERSION_STR,k=new MessageChannel(),l=new(h||(h=b("Promise")))(function(b,d){k.port1.onmessage=function(a){var c;((c=a.data)==null?void 0:c.error)?d(a.data.error):b(a.data)};return a.getRequestor(e).then(function(a){if(!a)return d(c("err")("No ServiceWorker controlling this client."));a.postMessage({action:f,message:g,version:j},[k.port2])})});return l};return a}();g["default"]=f}),98);
__d("WAWebFeatureDetectionSwSupport",["WAPromiseTimeout","WAWebEventEmitter","WAWebModernizr","WAWebSWBus","WAWebSWBusActions","WAWebUA"],(function(a,b,c,d,e,f,g){var h="Modernizr"in window,i=d("WAWebModernizr").getModernizr();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.supported=h?i.serviceworker:"serviceWorker"in navigator;b._checkAlive=function(){var a;a=(a=navigator.serviceWorker)==null?void 0:a.controller;return Boolean(a)};b._checkStreamingSupport=function(){var a;if(!b.supported||!b.alive||d("WAWebUA").UA.isSafari){b._streamingSupported=!1;return}if(b._streamingSupportedPromise)return b._streamingSupported;a=(a=navigator.serviceWorker)==null?void 0:a.controller;if(!a)return;b._streamingSupportedPromise=d("WAPromiseTimeout").promiseTimeout(c("WAWebSWBus").request(a,c("WAWebSWBusActions").STREAMING_SUPPORTED),100)["catch"](function(){return!1}).then(function(a){delete b._streamingSupportedPromise;b.streamingSupported=a;return a})};b._setSupported=function(a){b.supported=a};h&&i.on("serviceworker",b._setSupported);var e=babelHelpers.assertThisInitialized(b);Object.defineProperty(babelHelpers.assertThisInitialized(b),"streamingSupported",{get:function(){e._checkStreamingSupport();return e._streamingSupported},set:function(a){a!==e._streamingSupported&&e.trigger("change:streamingSupported",a),e._streamingSupported=a}});Object.defineProperty(babelHelpers.assertThisInitialized(b),"alive",{get:function(){return e._checkAlive()}});return b}return b}(c("WAWebEventEmitter"));b=new a();g["default"]=b}),98);
__d("WAWebLidFoundationalGatingUtils",["$InternalEnum","WAWebABProps","err"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({FEATURE_DISABLED:0,FEATURE_ENABLED:1,ROLLOUT_COMPLETE:2});function i(){var a=d("WAWebABProps").getABPropConfigValue("single_e2ee_session_migration_state_incoming");if(a===0)return h.FEATURE_DISABLED;else if(a===1)return h.FEATURE_ENABLED;else if(a===2)return h.ROLLOUT_COMPLETE;return h.FEATURE_DISABLED}var j=b("$InternalEnum")({FEATURE_DISABLED:0,FEATURE_ENABLED:1,ROLLOUT_COMPLETE:2});function k(){var a=d("WAWebABProps").getABPropConfigValue("single_e2ee_session_migration_state_outgoing");if(a===0)return j.FEATURE_DISABLED;else if(a===1)return j.FEATURE_ENABLED;else if(a===2)return j.ROLLOUT_COMPLETE;return j.FEATURE_DISABLED}function a(a,b){if(!a.isLid())return!1;a=i();if(a===h.FEATURE_DISABLED)return!0;else if(a===h.FEATURE_ENABLED)return b==null?!0:b;else if(a===h.ROLLOUT_COMPLETE)return!1;throw c("err")("Invalid ABProp value for SingleE2eeSessionIncomingState")}function e(a){if(a.length===0)return!1;a=a[0];return l(a)}function f(a){if(!a.isLid())return!1;a=k();return a===j.FEATURE_DISABLED?!0:!1}function l(a){if(!a.isLid())return!1;a=k();if(a===j.FEATURE_DISABLED)return!0;else if(a===j.FEATURE_ENABLED)return!1;else if(a===j.ROLLOUT_COMPLETE)return!1;throw c("err")("Invalid ABProp value for SingleE2EESessionOutgoingState")}g.SingleE2EESessionIncomingState=h;g.getSingleE2eeSessionIncomingState=i;g.SingleE2EESessionOutgoingState=j;g.getSingleE2eeSessionOutgoingState=k;g.shouldUseDeprecatedSessionForIncomingMessage=a;g.shouldUseDeprecatedForEnsureE2ESessions=e;g.shouldUseDeprecatedSessionWhenCreatingNewSessions=f;g.shouldUseDeprecatedSessionForOutgoingMessage=l}),98);
__d("WAWebProcessKeyBundle",["Promise","WAJids","WALogger","WAWebLidFoundationalGatingUtils","WAWebSignal","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["createSignalSession: failed for device "," with error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: failed to warm up identity cache: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: warmed up identity cache: "," records"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: error: ",""]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=null,f=0,g=0,m=[],n=[];a.forEach(function(a){a instanceof Error?(d("WALogger").WARN(l(),a),e=a):(a.wid.device!=null&&a.wid.device!==d("WAJids").DEFAULT_DEVICE_ID?n.push(a):m.push(a),a.key||f++)});if(m.length===0&&n.length===0)throw c("err")("establishE2ESession: no keys in the response");try{a=[].concat(m,n).map(function(a){return d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(a.wid).toString()});yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(a);d("WALogger").LOG(k(),a.length)}catch(a){d("WALogger").WARN(j(),a).devConsole(a)}a=function(a){return d("WAWebSignal").Session.createSignalSession(a,d("WAWebLidFoundationalGatingUtils").shouldUseDeprecatedSessionWhenCreatingNewSessions(a.wid)).then(function(){g++})["catch"](function(b){d("WALogger").WARN(i(),a.wid,b).sendLogs("createSignalSession-fail")})};yield (h||(h=b("Promise"))).all(m.map(a));yield h.all(n.map(a));if(e!=null)throw e;return{depletedPrekeyCount:f,processedPrekeyCount:g}});return m.apply(this,arguments)}g.processKeyBundles=a}),98);
__d("WAWebFetchPrekeysJob",["WALogger","WAParsableXmlNode","WASmaxPreKeysFetchKeyBundlesRPC","WAWebBackendErrors","WAWebProcessKeyBundle","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchPrekeys: successfully established "," E2E sessions out of "," requested"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);var e=(yield d("WASmaxPreKeysFetchKeyBundlesRPC").sendFetchKeyBundlesRPC({userArgs:a.map(function(a){return{userJid:d("WAWebWidToJid").widToDeviceJid(a),hasUserReasonIdentity:b}})}));if(e.name==="FetchKeyBundlesResponseServerError"){var f=e.value.errorServerErrors.value;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(f.code),"fetchPrekeys: server error: "+f.code+" "+f.text)}else if(e.name==="FetchKeyBundlesResponseRequestError"){f=e.value.errorRequestErrorsFetch.value;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(f.code),"fetchPrekeys: request error: "+f.code+" "+f.text)}f=e.value.listUser.map(function(a){var b=a.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;switch(b.name){case"FetchKeyBundlesUserSuccess":var e=b.value,f=e.preKeyMixin,g=e.elementValue,h=e.deviceIdentityMixin,i=e.skeyIdKeyIDMixin,j=e.skeyValueKeyDataMixin,k=e.skeySignatureElementValue;e=e.registrationElementValue;return{deviceIdentity:(h=h==null?void 0:h.deviceIdentityElementValue)!=null?h:null,identity:g,skey:{id:d("WAParsableXmlNode").convertBytesToUint(i.elementValue,3),pubkey:j.elementValue,signature:k},key:f?{id:d("WAParsableXmlNode").convertBytesToUint(f.keyIdKeyIDMixin.elementValue,3),pubkey:(h=f.keyValueKeyDataMixin)==null?void 0:h.elementValue}:null,regId:d("WAParsableXmlNode").convertBytesToUint(e,4),wid:d("WAWebWidFactory").createWid(a.jid)};case"FetchKeyBundlesUserErrorFallback":case"FetchKeyBundlesUserError":g=b.value;i=g.errorCode;j=g.errorText;return c("err")("fetchPrekeys: list item error: "+i+" "+j)}});if(f.length===0)throw c("err")("fetchPrekeys: empty key info");e=(yield d("WAWebProcessKeyBundle").processKeyBundles(f));f=e.depletedPrekeyCount;e=e.processedPrekeyCount;d("WALogger").LOG(h(),e,a.length);return{depletedPrekeyCount:f}});return i.apply(this,arguments)}g.fetchPrekeys=a}),98);
__d("WAWebWamEnumChatGatedReason",[],(function(a,b,c,d,e,f){a=Object.freeze({TOS3:1,COUNTRY:2});f.CHAT_GATED_REASON=a}),66);
__d("WAWebGatedMessageReceivedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatGatedReason"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GatedMessageReceived:[3152,{chatGatedReason:[1,d("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON]},[1,1,1],"regular"]},{GatedMessageReceived:[]});g.GatedMessageReceivedWamEvent=a}),98);
__d("WAWebGetPrivacyModeWhenSent",["WAWebApiVerifiedBusinessName","WAWebHandleMsgTypes.flow","WAWebPrivacyModeSystemMsg","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.type!==d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT)return;if(!d("WAWebUserPrefsMeUser").isMeAccount(a.author))return b.privacyMode;b=b.privacyMode;a=d("WAWebRuntimeEnvironmentUtils").isWorker()?yield d("WAWebApiVerifiedBusinessName").getPrivacyMode(a.chat):yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getPrivacyMode",{id:a.chat});return d("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(a,b)});return h.apply(this,arguments)}g.getPrivacyModeWhenSent=a}),98);
__d("WAWebHandleBizBotMsgs",["Promise","WAWebBotSystemMsg","WAWebBotTypes","WAWebModelStorageUtils","WAWebRuntimeEnvironmentUtils","WAWebSchemaChat","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map();a.forEach(function(b){var a=b.from.toJid();a!=null&&!c.has(a)&&b.bizBotType&&c.set(a,b.bizBotType)});a=Array.from(c.keys());a=(yield j(a));var e=[],f=[];for(var g of c.entries()){var i,k=g[0],l=g[1];i=(i=a.get(k))==null?void 0:i.bizBotSystemMsgType;l===d("WAWebBotTypes").BizBotType.BIZ_1P&&i!==d("WAWebBotTypes").BizBotType.BIZ_1P?(e.push(d("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(d("WAWebWidFactory").createWid(k))),f.push({id:k,bizBotSystemMsgType:d("WAWebBotTypes").BizBotType.BIZ_1P})):l===d("WAWebBotTypes").BizBotType.BIZ_3P&&i!==d("WAWebBotTypes").BizBotType.BIZ_3P&&(e.push(d("WAWebBotSystemMsg").genBizBot3pDisclosureMessage(d("WAWebWidFactory").createWid(k))),f.push({id:k,bizBotSystemMsgType:d("WAWebBotTypes").BizBotType.BIZ_3P}))}if(!e.length)return[];yield d("WAWebModelStorageUtils").getStorage().lock(["chat"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];yield (h||(h=b("Promise"))).all([a.bulkCreateOrMerge(f)])});return function(b){return a.apply(this,arguments)}}());return e});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getBizBotData",{chatIds:a.map(d("WAWebWidFactory").createWid)});var b=new Map();a=(yield d("WAWebSchemaChat").getChatTable().bulkGet(a));a.map(function(a){if(!a)return;b.set(a.id,{bizBotSystemMsgType:a.bizBotSystemMsgType})});return b});return k.apply(this,arguments)}g.handleBizBotMsgs=a}),98);
__d("WAWebHandleMsgValidate",["WAJids","WALogger","WATimeUtils","WAWebAck","WAWebApiDeviceList","WAWebE2EProtoUtils","WAWebGetMessageCache","WAWebHandleMessageTypes.flow","WAWebHandleMsgError","WAWebHandleMsgMetaUtils","WAWebMessagingGatingUtils","WAWebMsgType","WAWebPhashUtils","WAWebReportingTokenUtils","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["expected: ",", got: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["no record found for sender: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sender: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["encDestination: ",", destination: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Type in stanza [","] is different from the one derived from protobuf [","]. Message type: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["no biz node found in HSM"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["button message is invalid"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["no biz node found in list message"]);o=function(){return a};return a}function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.chat;if(!a.equals(c)){d("WALogger").ERROR(k(),String(a),c.toString()).sendLogs("validateMsgDestination: drop due to the deviceSentMessage meta mismatch.");return!1}a=b.author;if(!d("WAWebUserPrefsMeUser").isMeAccount(a)){d("WALogger").ERROR(j(),a.toString()).sendLogs("validateMsgDestination: drop due to msg is not sent from your own device.");return!1}b=(yield d("WAWebApiDeviceList").hasDevice(a,(c=a.device)!=null?c:0));b||d("WALogger").ERROR(i(),a.toString()).sendLogs("validateMsgDestination:drop due to invalid device");return b});return p.apply(this,arguments)}function e(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;c=(c=b.bclParticipants)!=null?c:[];c=(yield d("WAWebPhashUtils").phashV2(c));if(c!==a){d("WALogger").ERROR(h(),a,c).sendLogs("validateBclHash: drop due to invalid hash.");return!1}b.bclHashValidated=!0;return!0});return q.apply(this,arguments)}function f(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.device==null?d("WAJids").DEFAULT_DEVICE_ID:a.device;if(b===d("WAJids").DEFAULT_DEVICE_ID)return!0;a=(yield d("WAWebApiDeviceList").getDeviceIds([a]));a=a[0];return a!=null&&a.devices.some(function(a){return a.id===b})});return r.apply(this,arguments)}function s(a,b){var c=a.listMessage,e=a.buttonsMessage;a=a.highlyStructuredMessage;if(c&&(b==null?void 0:b.verifiedListEnvelope)!==!0){d("WALogger").ERROR(o()).sendLogs("validateBizNode:drop due to missing biz node in invalid SMAX in list message");return!1}if(e){e=(b==null?void 0:b.verifiedButtonsEnvelope)===!0||(b==null?void 0:b.nativeFlowName)!=null||((c=e.contextInfo)==null?void 0:c.isForwarded)===!0&&(e==null?void 0:(c=e.buttons)==null?void 0:c.length)===0;e||d("WALogger").ERROR(n()).sendLogs("validateBizNode:drop due to invalid SMAX for buttons message");return e}if(a&&(b==null?void 0:b.verifiedHsmEnvelope)!==!0){d("WALogger").ERROR(m()).sendLogs("validateBizNode:drop due to missing biz node in invalid SMAX in HSM");return!1}return!0}function t(a){var b=a.renderableMsgs,e=a.msgMeta,f=a.info,g=a.proto;a=a.bizInfo;if(b.length>0&&!s(g,a))throw new(d("WAWebHandleMsgError").BizNodeValidationError)("[messaging] Biz node validation failed due to absence of biz node in SMAX");a=b[0];if(d("WAWebHandleMsgMetaUtils").isReactionMsgMeta(e)&&a!=null&&(a.type!==d("WAWebMsgType").MSG_TYPE.REACTION&&a.type!==d("WAWebMsgType").MSG_TYPE.REACTION_ENC))throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_REACTION_STANZA);if(d("WAWebHandleMsgMetaUtils").isPollVoteMsgMeta(e)&&a!=null){b=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE;var h=a.type===d("WAWebMsgType").MSG_TYPE.POLL_UPDATE&&a.subtype==="poll_vote";if(!b&&!h)throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_POLL_UPDATE_STANZA)}if(a!=null&&d("WAWebHandleMsgMetaUtils").isCommentMsgMeta(e)){b=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.COMMENT;h=new Set([d("WAWebMsgType").MsgKind.CommentEncrypted,d("WAWebMsgType").MsgKind.CommentDecrypted,d("WAWebMsgType").MsgKind.RevokedAddon,d("WAWebMsgType").MsgKind.ProtocolRevoke]);if(!b&&!h.has(a.kind))throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_COMMENT_STANZA)}if(f.edit===d("WAWebAck").EDIT_ATTR.PIN_IN_CHAT&&a!=null){b=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE;if(a.type!==d("WAWebMsgType").MSG_TYPE.PIN_MESSAGE&&!b)throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_PIN_IN_CHAT_STANZA)}if(d("WAWebHandleMsgMetaUtils").isEventResponseMsgMeta(e)&&a!=null){h=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE;f=a.type===d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE;if(!h&&!f)throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_EVENT_RESPONSE_STANZA)}if(d("WAWebHandleMsgMetaUtils").isEventEditMsgMeta(e)&&a!=null){b=a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN&&a.futureproofType===d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED;h=a.type===d("WAWebMsgType").MSG_TYPE.EVENT_EDIT_ENCRYPTED;if(!b&&!h)throw new(d("WAWebHandleMsgError").MessageProtobufMismatchError)(d("WAWebHandleMsgError").MessageProtobufMismatchErrorCode.INVALID_EVENT_EDIT_STANZA)}f=d("WAWebE2EProtoUtils").typeAttributeFromProtobuf(g);a!=null&&(e==null?void 0:e.type)!==f&&c("gkx")("26259")&&d("WALogger").ERROR(l(),e==null?void 0:e.type,f,a.type).tags("messaging").sendLogs("report-token-stanza-protobuf-type-mismatched",{sampling:.01}).devConsole({msgMeta:e,proto:g})}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c,e=a.renderableMsgs,f=a.info,g=a.reportingTokenInfo,h=a.protobufBytes;a=a.isMessageRetry;if(!d("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return;e=e[0];if(e==null||h==null||g==null)return;var i=g.reportingTag,j=g.reportingToken,k=g.version;k=k===void 0?d("WAWebReportingTokenUtils").REPORTING_TOKEN_VERSION.DEFAULT:k;if(i==null)return;b=(b=e.protocolMessageKey)==null?void 0:b.toString();c={msgKey:(c=b)!=null?c:e.id.toString(),stanzaId:f.externalId,reportingTag:i,receivedTs:d("WATimeUtils").unixTimeMs(),msgTs:f.ts};if(e.kind===d("WAWebMsgType").MsgKind.Unknown){d("WAWebGetMessageCache").getMessageCache().addAdditionalInfo({type:d("WAWebHandleMessageTypes.flow").MsgAdditionalInfoType.ReportingInfo,data:babelHelpers["extends"]({},c)},b!=null);return}i=(yield d("WAWebReportingTokenUtils").validateReportingTokenInfo(e,f,h,g,a));e=i.res;f=i.reportingTokenContent;h=j!=null&&d("WAWebMessagingGatingUtils").isReportingDataStoringEnabled()?{reportingToken:j.slice(0,e?d("WAWebReportingTokenUtils").REPORTING_TOKEN_STORAGE_SIZE:d("WAWebReportingTokenUtils").REPORTING_TOKEN_INVALID_STORAGE_SIZE),reportingTokenContentOpaqueData:f,version:k}:null;d("WAWebGetMessageCache").getMessageCache().addAdditionalInfo({type:d("WAWebHandleMessageTypes.flow").MsgAdditionalInfoType.ReportingInfo,data:babelHelpers["extends"]({},c,h)},b!=null)});return v.apply(this,arguments)}g.validateMsgDestination=a;g.validateBclHash=e;g.isFromKnownDevice=f;g.validateBizNode=s;g.renderableMessagesValidation=t;g.validateAndProcessReportingTokenInfo=u}),98);
__d("WAWebIcdcHandlerApi",["Promise","WAJids","WALogger","WALongInt","WATimeUtils","WAWebAdvExpectedTsApi","WAWebApiDeviceList","WAWebApiPendingDeviceSync","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebBizCoexOfflineICDCHandledCache","WAWebCmd","WAWebHandleAdvForUsyncApi","WAWebIdentityUpdateDeviceTableApi","WAWebLastADVCheckTimeApi","WAWebPromiseQueue","WAWebProtobufsAdv.pb","WAWebSyncDeviceAdvDeviceListJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleICDCData: old values: ",", new expected values record ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleICDCData: update expectd timestamp for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["get empty device list metadata"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleHostedIcdcMetadataInline: update ADV type for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIcdcMetadataInline: add to coex cache for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleHostedIcdcMetadataInline: skip processing since already processed for current offline resume session for ",""]);n=function(){return a};return a}var o=new(d("WAWebPromiseQueue").PromiseQueue)();function a(a,c,d){return d==null?(h||(h=b("Promise"))).resolve():o.enqueue(function(){return q(a,c,d)})}function c(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e={hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!1};if(!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return e;if(a.isSameAccount(d("WAWebUserPrefsMeUser").getMeUser()))return e;if(!a.isUser())return e;c=c==null?void 0:c.deviceListMetadata;if(c==null)return e;var f=b.isSameAccount(d("WAWebUserPrefsMeUser").getMeUser()),g=f?c.receiverAccountType:c.senderAccountType;f=f?a:b;if(g==null)return e;if(g===d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE){d("WAWebBizCoexOfflineICDCHandledCache").removeFromOfflineBizHostedSenderICDCProcessedCache(f);return e}if(g!==d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED)return e;if(d("WAWebBizCoexOfflineICDCHandledCache").hasOfflineBizHostedSenderICDCProcessedForSender(f)){d("WALogger").LOG(n(),f==null?void 0:f.toLogString());return{hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!0}}d("WAWebBizCoexOfflineICDCHandledCache").addToOfflineBizHostedSenderICDCProcessedCache(f);d("WALogger").LOG(m(),f==null?void 0:f.toLogString());d("WAWebBizCoexHostedAddVerification").addToCoexHostedVerificationCache(f);a=(yield d("WAWebApiDeviceList").getDeviceRecord(f));g=d("WALongInt").numberOrThrowIfTooLarge((b=c.senderTimestamp)!=null?b:0);b=(c=a==null?void 0:a.timestamp)!=null?c:0;if(g>=b){if((a==null?void 0:a.advAccountType)!==d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED){yield d("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(f,(c=a==null?void 0:a.devices)!=null?c:[],!d("WAWebCmd").Cmd.isOfflineDeliveryEnd,d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE,d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED);d("WAWebCmd").Cmd.isOfflineDeliveryEnd?void d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([f],null,null):yield d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync([f.toString()]);d("WALogger").LOG(l(),f==null?void 0:f.toLogString());return{hostedBizEncMismatch:(a==null?void 0:a.advAccountType)===d("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE||(a==null?void 0:a.deletedChangedToHost)!==!0,senderOrRecipientAccountTypeHosted:!0}}return{hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!0}}return e});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c.deviceListMetadata;if(c==null){d("WALogger").LOG(k()).tags("handleICDCData");return}if((a.device==null||a.device===d("WAJids").DEFAULT_DEVICE_ID)&&(c.senderTimestamp!=null&&c.senderKeyHash==null)){var e=d("WALongInt").numberOrThrowIfTooLarge(c.senderTimestamp)+1;d("WAWebHandleAdvForUsyncApi").handleADVSyncResult(a,{deviceList:[{id:d("WAJids").DEFAULT_DEVICE_ID,keyIndex:0}],keyIndex:{ts:d("WATimeUtils").castToUnixTime(e),signedKeyIndexBytes:null}},null,null);return}var f=[];e=a.user===d("WAWebUserPrefsMeUser").getMeUser().user;f.push({id:a,ts:c.senderTimestamp});e&&b!=null&&f.push({id:b,ts:c.recipientTimestamp});var g=(yield d("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime());a=(yield d("WAWebApiDeviceList").bulkGetDeviceRecord(f.map(function(a){return a.id})));var h=[];a.forEach(function(a,b){b=f[b].ts;if(a==null||a.deleted||b==null)return;b=d("WAWebAdvExpectedTsApi").computeExpectedTsForDeviceRecord(d("WALongInt").numberOrThrowIfTooLarge(b),a,g);(b.expectedTs!==a.expectedTs||b.expectedTsLastDeviceJobTs!==a.expectedTsLastDeviceJobTs||b.expectedTsUpdateTs!==a.expectedTsUpdateTs)&&(d("WALogger").LOG(j(),a.id),d("WALogger").DEV(i(),JSON.stringify(a),JSON.stringify(b)),h.push(babelHelpers["extends"]({},a,b)))});if(h.length>0)return d("WAWebApiDeviceList").bulkCreateOrReplaceDeviceRecord(h)});return r.apply(this,arguments)}g.handleICDCData=a;g.handleHostedIcdcMetadataInline=c}),98);
__d("WAWebHandleMsgProcessUtils",["WALogger","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebDBCreateOrUpdateReactions","WAWebDBPollsUpsertVotes","WAWebDBProcessEditProtocolMsgs","WAWebDBUpdateLastAddOnPreviewChat","WAWebGetMessageCache","WAWebHandleMsgCommon","WAWebHandleMsgError","WAWebHandleMsgValidate","WAWebIcdcHandlerApi","WAWebLastAddOnDBSerialization","WAWebOfflineDeviceCache","WAWebPnhGatingUtils","WAWebProcessMatMessages","WAWebReactionDataUtils","WAWebShouldUpdateLastAddOnPreview","WAWebSyncDeviceAdvDeviceListJob","WAWebWidFactory","asyncToGeneratorRuntime","cr:10197"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["storeReactionMsgBulk: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processDecryptedMessageProto: msgId::",", message decrypted: "]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["storing offline message for async processing"]);j=function(){return a};return a}function k(a,b){d("WALogger").DEV(j()).devConsole({msg:a,msgInfo:b});a={msg:a,receiptInfo:{externalId:a.id.id,from:a.from,author:b.author}};void d("WAWebGetMessageCache").getMessageCache().addMessages([a],!1)}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a.offline==null&&d("WALogger").LOG(i(),a.externalId).tags("messaging").devConsole(b);if(!a.isHsm&&b.highlyStructuredMessage)throw new(d("WAWebHandleMsgCommon").HsmMismatchError)();var c=null;if(!(yield d("WAWebHandleMsgValidate").isFromKnownDevice(a.author))){var e=d("WAWebWidFactory").toUserWid(a.author);a.offline==null?d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([e],null,null):d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(String(e),null);throw new(d("WAWebHandleMsgError").UnknownDeviceMessageError)("[messaging] msgId::"+a.externalId+", processDecryptedMessageProto: reject message from unknown device")}b.messageContextInfo&&(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(c=a.chat.isUser()?yield d("WAWebIcdcHandlerApi").handleHostedIcdcMetadataInline(a.chat,a.author,b.messageContextInfo):null),d("WAWebIcdcHandlerApi").handleICDCData(a.author,a.chat.isUser()?a.chat:null,b.messageContextInfo));return c});return l.apply(this,arguments)}function c(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.offline!=null&&!c)return k(a,b);yield d("WAWebBackendApi").frontendSendAndReceive("processEphemeralSyncResponse",{msg:a})});return m.apply(this,arguments)}function e(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.offline!=null&&!c)return k(a,b);yield d("WAWebBackendApi").frontendSendAndReceive("processKeepInChatMessage",{keepInChatMessage:a,allowNotification:!0})});return n.apply(this,arguments)}function f(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=d("WAWebPnhGatingUtils").isMatFullyEnabled()?yield d("WAWebProcessMatMessages").processEditMatMessages(a):a;if(b.offline!=null&&!c)return k(a,b);yield d("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs([a],c)});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebDBPollsUpsertVotes").upsertVotesDb(a));d("WAWebBackendApi").frontendFireAndForget("upsertVotesModelCollection",{votes:a,votesToRemove:null,restoredFromDb:!0});yield r(a.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromVoteData(a,!1)}))});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates(a));a.size>0&&(yield d("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(a),d("WAWebBackendApi").frontendFireAndForget("updateChatLastAddOnPreview",{chatMap:a}))});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.map(function(a){return d("WAWebReactionDataUtils").webMsgInfoReactionTypeToReactionsRow(a)});var b="reaction received: "+a.map(function(a){return a.msgKey.toString()+" to "+a.parentMsgKey}).toString()+";";d("WALogger").DEV(h(),b).tags("messaging");b=(yield d("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions(a));b&&(yield r(b.map(function(a){return d("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromReactionRowType(a)})));return b});return u.apply(this,arguments)}g.preProcessMsg=a;g.processEphemeralSyncResponseMsg=c;g.processKeepInChatMsg=e;g.processEditProtocolMsg=f;g.storePollVotesBulk=p;g.storeReactionMsgBulk=t}),98);
__d("WAWebLogMissingGroupParticipantMappings",["WALogger","WAWebABProps","WAWebApiContact","WAWebGroupsParticipantsApi","WAWebIsCagGroupCache","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["participant missing mapping, addressing mode mismatch = ",""]);h=function(){return a};return a}function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(!d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes"))return;if(!a.isGroup()||c("WAWebIsCagGroupCache").isCag(a)||b.isBot())return;b=d("WAWebWidFactory").toUserWid(b);if(d("WAWebApiContact").getAlternateUserWid(b)!=null)return;a=(yield d("WAWebGroupsParticipantsApi").getParticipants(a));if(a==null||a.participants.includes(b.toString()))return;d("WALogger").ERROR(h(),String(f!==e)).sendLogs("GroupLidInfra/incoming_group_message_unknown",{sampling:.01})});return i.apply(this,arguments)}g.logMissingGroupParticipantMappings=a}),98);
__d("WAWebWamEnumStickerMakerSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({CUTOUT_IMAGE:1,WEB_STICKER_MAKER:2,IOS_STICKER_MAKER:3,ANDROID_STICKER_MAKER:4,TRANSPARENT_IMAGE:5,GIF:6});f.STICKER_MAKER_SOURCE_TYPE=a}),66);
__d("WAWebMessageReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumChatOriginsType","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEditType","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWamEnumRevokeType","WAWebWamEnumSizeBucket","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MessageReceive:[450,{agentEngagementType:[28,d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[37,d("WAWebWamEnumBotType").BOT_TYPE],chatOrigins:[38,d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE],deviceCount:[16,a.TYPES.INTEGER],deviceSizeBucket:[10,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],disappearingChatInitiator:[14,d("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],editType:[25,d("WAWebWamEnumEditType").EDIT_TYPE],ephemeralityDuration:[13,a.TYPES.INTEGER],ephemeralityInitiator:[26,d("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[27,d("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],hasUsername:[39,a.TYPES.BOOLEAN],invisibleMessageCategory:[41,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isAComment:[36,a.TYPES.BOOLEAN],isAReply:[19,a.TYPES.BOOLEAN],isForwardedForward:[18,a.TYPES.BOOLEAN],isLid:[24,a.TYPES.BOOLEAN],isViewOnce:[9,a.TYPES.BOOLEAN],localAddressingMode:[33,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageAddressingMode:[34,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageIsInternational:[4,a.TYPES.BOOLEAN],messageIsInvisible:[23,a.TYPES.BOOLEAN],messageIsOffline:[5,a.TYPES.BOOLEAN],messageMediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageQueueTime:[15,a.TYPES.TIMER],messageReceiveT0:[6,a.TYPES.TIMER],messageReceiveT1:[7,a.TYPES.TIMER],messageType:[1,d("WAWebWamEnumMessageType").MESSAGE_TYPE],mutedGroupMessage:[8,a.TYPES.BOOLEAN],numOfWebUrlsInTextMessage:[3,a.TYPES.INTEGER],offlineCount:[30,a.TYPES.INTEGER],oppositeVisibleIdentification:[40,d("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],paddingBytesSize:[22,a.TYPES.INTEGER],participantCount:[17,a.TYPES.INTEGER],receiverDefaultDisappearingDuration:[12,a.TYPES.INTEGER],revokeType:[20,d("WAWebWamEnumRevokeType").REVOKE_TYPE],senderDefaultDisappearingDuration:[11,a.TYPES.INTEGER],serverAddressingMode:[35,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],stickerIsAi:[29,a.TYPES.BOOLEAN],stickerIsFromStickerMaker:[31,a.TYPES.BOOLEAN],stickerMakerSourceType:[32,d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE],typeOfGroup:[21,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,5],"regular"]},{MessageReceive:[]});g.MessageReceiveWamEvent=b}),98);
__d("WAWebLogReceivedMessages",["PaymentLink","Promise","WALogger","WATimeUtils","WAWebABProps","WAWebApiChat","WAWebBackendApi","WAWebChatThreadLogging","WAWebChatThreadLoggingUtils","WAWebEphemeralityResolver","WAWebGatedMessageReceivedWamEvent","WAWebLidAwareContactsDB","WAWebMessageReceiveWamEvent","WAWebMsgGetters","WAWebMsgType","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebUsernameTypes","WAWebWamAddressingModeUtils","WAWebWamEnumChatGatedReason","WAWebWamEnumChatOriginsType","WAWebWamEnumRevokeType","WAWebWamGroupMetadataMetricUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error logging payment link message receive: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error logging received messages: ",""]);j=function(){return a};return a}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.matchedText==null)return;var b=new(d("PaymentLink").PaymentLink)(a.matchedText);b.logger.shouldLogReceiverEvent(a)&&b.logger.logPaymentLinkMessageReceived(a)["catch"](function(a){d("WALogger").WARN(i(),a)})});return function(b){return a.apply(this,arguments)}}()))});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=a.msgs,g=a.offline,i=a.tsMillis,j=a.clientReceivedTsMillis,k=a.msgProcessStartTsMillis,l=a.serverAddressingMode,m=a.localAddressingMode,n=d("WATimeUtils").unixTimeMs(),o=d("WAWebUserPrefsMeUser").getMeUser()!=null?yield d("WAWebChatThreadLoggingUtils").getMeHasUsername():!1,p=(a=e.get(d("WAWebUserPrefsMeUser").assertGetMeUser().toJid()))==null?void 0:a.ephemeralDuration;yield (h||(h=b("Promise"))).all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var f=a.from;if(f==null)return;var h=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;f.isLid()&&(h=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA);b=c[b];if(b==null?void 0:b.lidOriginType)switch(b==null?void 0:b.lidOriginType){case d("WAWebUsernameTypes").LidOriginType.CTWA:h=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA;break;case d("WAWebUsernameTypes").LidOriginType.USERNAME:h=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_USERNAME;break;case d("WAWebUsernameTypes").LidOriginType.GENERAL:h=d("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;break}b=(yield d("WAWebChatThreadLoggingUtils").getOppositeVisibleIdentification(f));b=new(d("WAWebMessageReceiveWamEvent").MessageReceiveWamEvent)({messageType:d("WAWebWamMsgUtils").getWamMessageType(a),messageMediaType:d("WAWebWamMsgUtils").getWamMediaType(a),messageIsInternational:d("WAWebMsgGetters").getIsInternational(a),messageIsOffline:g!=null,isViewOnce:Boolean(a.isViewOnce),isForwardedForward:d("WAWebMsgGetters").getNumTimesForwarded(a)>1,isAReply:d("WAWebMsgGetters").getIsReply(a),editType:d("WAWebMsgGetters").getWamEditType(a),botType:d("WAWebWamMsgUtils").getWamBotType(f,a.bizBotType),isAComment:d("WAWebMsgGetters").getType(a)===d("WAWebMsgType").MSG_TYPE.COMMENT,hasUsername:o,chatOrigins:h,oppositeVisibleIdentification:(h=b)!=null?h:void 0});g!=null&&(b.offlineCount=g);if(!f.isGroup()){h=(h=e.get(f.toJid()))==null?void 0:h.ephemeralDuration;h!=null&&(b.senderDefaultDisappearingDuration=h);p!=null&&(b.receiverDefaultDisappearingDuration=p);b.isLid=f.isLid()}d("WAWebMsgGetters").getIsRevoke(a)&&(b.revokeType=a.subtype==="admin_revoke"?d("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:d("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER);j!=null&&(b.messageReceiveT0=j-i,b.messageReceiveT1=n-j,k!=null&&(b.messageQueueTime=k-j));a.ephemeralDuration!=null&&a.ephemeralDuration>0&&(b.ephemeralityDuration=a.ephemeralDuration);h=d("WAWebMsgGetters").getWamDisappearingModeInitiator(a);h!=null&&(b.disappearingChatInitiator=h);if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){h=d("WAWebMsgGetters").getWamDisappearingModeTrigger(a);h!=null&&(b.ephemeralityTriggerAction=h);h=d("WAWebMsgGetters").getWamDisappearingModeInitiatedByMe(a);h!=null&&(b.ephemeralityInitiator=h)}h=d("WAWebWamMsgUtils").getWamAgentEngagementType(a);h!=null&&(b.agentEngagementType=h);h=(yield d("WAWebWamGroupMetadataMetricUtils").getGroupTypeFromChatWid(f));h!=null&&(b.typeOfGroup=h);d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes")&&(l!=null&&(b.serverAddressingMode=d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(l)),m!=null&&(b.localAddressingMode=d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(m)));if(f==null?void 0:f.isGroup()){h=(yield d("WAWebWamGroupMetadataMetricUtils").isCagFromChatWid(f));a=d("WAWebMsgGetters").getIsReaction(a);h!=null&&a!=null&&(b.isLid=h&&a);h=(yield d("WAWebWamGroupMetricCache").getGroupMetrics(f));(h==null?void 0:h.participantCount)!=null&&(b.participantCount=h.participantCount);(h==null?void 0:h.deviceCount)!=null&&(b.deviceCount=h.deviceCount);(h==null?void 0:h.deviceSizeBucket)!=null&&(b.deviceSizeBucket=h.deviceSizeBucket)}b.commit()});return function(b,c){return a.apply(this,arguments)}}()))});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new Set(a.filter(function(a){return a.id.remote.isUser()}).map(function(a){return a.id.remote.toJid()}));a.add(d("WAWebUserPrefsMeUser").assertGetMeUser().toJid());var b=Array.from(a);if(d("WAWebRuntimeEnvironmentUtils").isWorker()){a=(yield c("WAWebLidAwareContactsDB").bulkGet(b));return new Map(a.map(function(a,c){return[b[c],{ephemeralDuration:d("WAWebEphemeralityResolver").getEphemeralDurationForUser(a),shouldBlockByCountry:function(){return!1},shouldBlockByTos:function(){return!1}}]}))}return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getContactData",{ids:b.map(d("WAWebWidFactory").createWid)})});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebApiChat").bulkGetChats(a.map(function(a){return a.from}))});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all([q(a),o(a)]));var c=a[0];a=a[1];return{chatData:c,contactData:a}});return t.apply(this,arguments)}function u(a,b){for(a of a){var c=b.get(a.id.remote.toJid());c&&!d("WAWebMsgGetters").getIsSentByMe(a)&&(c.shouldBlockByCountry()?new(d("WAWebGatedMessageReceivedWamEvent").GatedMessageReceivedWamEvent)({chatGatedReason:d("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON.COUNTRY}).commit():c.shouldBlockByTos()&&new(d("WAWebGatedMessageReceivedWamEvent").GatedMessageReceivedWamEvent)({chatGatedReason:d("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON.TOS3}).commit())}}function v(a){d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging(a.filter(d("WAWebChatThreadLoggingUtils").shouldIncrementMsgSendAndReceive).map(function(a){if(d("WAWebMsgGetters").getType(a)===d("WAWebMsgType").MSG_TYPE.COMMENT){var b;return{activityType:"commentsReceived",ts:(b=a.t)!=null?b:d("WATimeUtils").unixTimeMs(),chatId:a.id.remote}}return{activityType:a.id.fromMe?"msgSend":"msgReceive",ts:a.t,chatId:a.id.remote,isViewOnce:a.isViewOnce===!0,isReaction:d("WAWebMsgGetters").getIsReaction(a),isForwarded:a.isForwarded===!0,isCommerceMessage:d("WAWebChatThreadLoggingUtils").isCommerceMessage(a),isReply:d("WAWebMsgGetters").getIsReply(a),isEdit:d("WAWebMsgGetters").getIsEditProtocolMsg(a),isBot:d("WAWebMsgGetters").getIsBotQuery(a)||d("WAWebMsgGetters").getIsMetaBotResponse(a),isEventCreation:a.type===d("WAWebMsgType").MSG_TYPE.EVENT_CREATION,isEventResponse:a.type===d("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE}}))}function w(a){a.filter(d("WAWebMsgGetters").getIsAuthenticationMessage).forEach(function(a){d("WAWebBackendApi").frontendFireAndForget("logOTPMessageReceivedActions",{msgData:a})})}function a(a){var c=a.msgs;s(c).then(function(d){return(h||(h=b("Promise"))).all([m(a,d.chatData,d.contactData),u(c,d.contactData),v(c),w(c),k(c)])})["catch"](function(a){d("WALogger").WARN(j(),a)})}g.logReceivedMessagesInWAM=a}),98);
__d("WAWebMessageProcessPlaceholder",["Promise","WALogger","WANullthrows","WAWebAck","WAWebAdvHostedAccountTypeSystemMsg","WAWebApiDeviceList","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebCmd","WAWebDBProcessMessage","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebMessageProcessorCache","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebPnhGatingUtils","WAWebProcessMatMessages","WAWebProtobufsAdv.pb","WAWebUserPrefsMultiDevice","WAWebWamWorkerOfflineProcessReporter","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processPlaceholderMsg: msgId::",", failed with error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing placeholders in cache completed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[message][addon] processPlaceholderMessage: msgId::",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processPlaceHolderMessage: msgId:",", skip placeholder for peer message"]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.msgInfo;if(e.category===d("WAWebHandleMsgCommon").CATEGORY_PEER){d("WALogger").LOG(l(),e.externalId).tags("messaging");return}var f=e.offline!=null;try{var g,m=[];if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&((g=e.chat)==null?void 0:g.isUser())&&(a.placeholderType===d("WAWebHandleMsgTypes.flow").PlaceholderType.E2E||a.placeholderType===d("WAWebHandleMsgTypes.flow").PlaceholderType.FANOUT)){g=d("WAWebUserPrefsMultiDevice").getHaveProcessedCoexAdv()===!0?yield d("WAWebApiDeviceList").getDeviceRecord(e.author):null;e.placeholderCreatedWhenAccountIsHosted=(g==null?void 0:g.advAccountType)===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED;if((g==null?void 0:g.advAccountType)===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(e==null?void 0:(g=e.chat)==null?void 0:g.isUser())===!0){g=(yield d("WAWebBizCoexUtils").shouldCreateFallbackHostedAdvSystemMsgOnPlaceholder(d("WAWebWidFactory").toUserWid(e==null?void 0:e.author).toString()));g&&!d("WAWebBizCoexUtils").shouldDedupInitialHostedSystemMsg(d("WAWebWidFactory").toUserWid(e==null?void 0:e.author))&&(m=[c("WANullthrows")(d("WAWebAdvHostedAccountTypeSystemMsg").genAdvAccountTypeInitialSysMsg(d("WAWebWidFactory").toUserWid(e==null?void 0:e.author),d("WAWebWidFactory").toUserWid(e==null?void 0:e.author)))])}}g=[];if(a.type===d("WAWebMsgType").MSG_TYPE.CIPHERTEXT){var n=d("WAWebMsgProcessingApiUtils").generatePlaceholder(a);if(n==null)return;n.realType!=null&&d("WALogger").DEV(k(),e.externalId);e.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST?(yield d("WAWebDBProcessMessage").storeMessages([n],n.id.remote),e.bclParticipants!=null&&e.edit!==d("WAWebAck").EDIT_ATTR.SENDER_REVOKE&&(g=(yield d("WAWebMsgProcessingApiUtils").generateBclMsgs(n,e.bclParticipants)))):g=[n];if(g.length===0)return;d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&m.length>0&&e.placeholderCreatedWhenAccountIsHosted===!0&&(g=[].concat(m,g))}else g=[d("WAWebMsgProcessingApiUtils").genDebugPlaceholderMsg(e,a.nackReason)];n=d("WAWebPnhGatingUtils").isMatFullyEnabled()?yield d("WAWebProcessMatMessages").processRenderableMatMessages_DEPRECATED(g):g;m=d("WAWebMessageProcessorCache").messageProcessorCache.addMessages(n.map(function(a){return{msg:a}}),!f).then(function(){d("WALogger").DEV(j()),d("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedMessageCount()});d("WAWebCmd").Cmd.isMainStreamReadyMd&&(d("WAWebCmd").Cmd.isOfflineDeliveryEnd&&(yield m),yield (h||(h=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.kind!==d("WAWebMsgType").MsgKind.PlaceholderAddon){var b=a.id.remote;yield d("WAWebBackendApi").frontendSendAndReceive("updateMessageUI",{chatId:b,msg:a})}});return function(b){return a.apply(this,arguments)}}())))}catch(a){d("WALogger").ERROR(i(),e.externalId,a).tags("messaging").sendLogs("handle_msg: error storing/processing single message")}});return m.apply(this,arguments)}g.processPlaceholderMessage=a}),98);
__d("WAWebHandlePrivacyModeChange",["WALogger","WANullthrows","WAWebApiChat","WAWebApiVerifiedBusinessName","WAWebBackendApi","WAWebBusinessProfileTypes","WAWebCreateChat","WAWebHandlePrivacyModeUpdateMsgAction","WAWebLid1X1MigrationGating","WAWebMiscGatingUtils","WAWebPnhGatingUtils","WAWebPrivacyModeSystemMsg","WAWebRuntimeEnvironmentUtils","WAWebUsernameTypes","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrivacyModeChange for ",", failed with error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrivacyModeChange for ",", unable to restore chat from DB"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePrivacyModeChange for ",", failed with error: ",""]);j=function(){return a};return a}function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h){var i=e.chat;if(!i.isUser())return;d("WAWebPnhGatingUtils").isMatFullyEnabled()&&(i=(yield d("WAWebApiChat").getMatChat_DEPRECATED(i)));d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyLidMessagingRules()&&(i=c("WANullthrows")(h,"destination chat should always have a value when using Lid messaging").chatId);e=(yield q(i));var k=d("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(f.privacyMode,e.privacyMode);g=(g==null?void 0:g.origin)!=null?g==null?void 0:g.origin:d("WAWebUsernameTypes").LidOriginType.CTWA;var l=i.isLid()?g:void 0;g=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b;yield d("WAWebCreateChat").createChat({chatId:i,accountLid:h==null?void 0:h.accountLid},"createChatOnNewMsg",{createdLocally:!1,lidOriginType:d("WAWebUsernameTypes").LidOriginType.cast((b=l)!=null?b:"")},{firstIncomingMsg:a[0],nextPrivacyMode:k})});return function(){return c.apply(this,arguments)}}();g=(yield o(i,g));e=g!==!0||d("WAWebMiscGatingUtils").queryVerifiedNameWhenMsgDiffers()&&e.verifiedLevel!==d("WAWebBusinessProfileTypes").convertLevel(f.verifiedLevel);try{g&&k!=null&&(yield d("WAWebHandlePrivacyModeUpdateMsgAction").handlePrivacyModeTransition(i,k));return{shouldQueryContactInfo:e,latestPrivacyMode:k}}catch(a){d("WALogger").ERROR(j(),i.toLogString(),a).tags("messaging","non-sad").sendLogs("handlePrivacyModeChange failed",{sampling:.01})}});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return!d("WAWebRuntimeEnvironmentUtils").isWorker()?d("WAWebBackendApi").frontendSendAndReceive("hasChat",{chatId:a}):(yield d("WAWebApiChat").getChatRecord(a))!=null});return m.apply(this,arguments)}var n=new Map();function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=a.toString(),f=n.get(e);f!=null&&(yield f);f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield l(a));if(b!==!0)try{yield c()}catch(b){if(!d("WAWebRuntimeEnvironmentUtils").isWorker()&&b instanceof d("WAWebApiChat").CreateChatDuplicateError){var f=(yield d("WAWebApiChat").getChatRecord(a));if(f!=null){yield d("WAWebBackendApi").frontendFireAndForget("chatCollectionGadd",{chat:babelHelpers["extends"]({},f,{id:a})});f=(yield l(a));f||d("WALogger").ERROR(i(),a.toLogString()).tags("messaging").sendLogs("handlePrivacyModeChange failed to restore chat",{sampling:.01});return f}}d("WALogger").ERROR(h(),a.toLogString(),b).tags("messaging").sendLogs("handlePrivacyModeChange failed",{sampling:.01})}n["delete"](e);return b})();n.set(e,f);return f});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getChatPrivacyInfoOnNewMsg",{chatId:a});a=(yield d("WAWebApiVerifiedBusinessName").getVerifiedBusinessNameRecord(a));return{privacyMode:(a==null?void 0:a.privacyMode)!=null?d("WAWebApiVerifiedBusinessName").convertPrivacyModeFromStorageType(a.privacyMode):null,verifiedLevel:d("WAWebBusinessProfileTypes").convertLevel(a==null?void 0:a.level)}});return r.apply(this,arguments)}g.handlePrivacyModeChangeAndCreateChat=a}),98);
__d("WAWebMessageProcessUtils",["WALogger","WANullthrows","WAWebApiChat","WAWebApiContact","WAWebLid1X1MigrationGating","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: assigning lid to new chat since there is an existing PN chat with another lid"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: handling race condition while creating chat - accountLid was already created"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: assigning pn to new chat"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: assigning lid for new chat based on abprop"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: found by account_lid."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: error: multiple chats for account_lid."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: no PN found - it is a PNH chat."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: error: not 1x1 chat."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["select chat: select for ",""]);p=function(){return a};return a}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a.isUser())throw c("err")("getLidAndPnForMessage: not a 1x1 chat");var b,e;a.isLid()?(b=d("WAWebWidFactory").toUserWid(a),e=d("WAWebApiContact").getPhoneNumber(b)):(e=d("WAWebWidFactory").toUserWid(a),b=d("WAWebApiContact").getCurrentLid(e));if(b==null)throw c("err")("getLidAndPnForMessage: could not find lid");return{lid:b,pn:e}});return r.apply(this,arguments)}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(p(),a);if(!a.isUser()){d("WALogger").LOG(o());throw c("err")("selectChatForIncomingMessage: not a 1x1 chat")}a=(yield q(a));var b=a.lid;a=a.pn;if(a==null){d("WALogger").LOG(n());return{accountLid:b,chatId:b}}var e=(yield d("WAWebApiChat").getChatRecordByAccountLid(b));if(e.length>1){d("WALogger").LOG(m());throw c("err")("selectChatForIncomingMessage: found multiple chats for unique index account_lid")}else if(e.length===1){e=c("WANullthrows")(e[0].id,"chat id should never be null");d("WALogger").LOG(l());return{accountLid:b,chatId:d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(e))}}if(d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldAssignLidToChatId()){d("WALogger").LOG(k());return{accountLid:b,chatId:b}}e=(yield d("WAWebApiChat").getChatRecord(a));if(e==null){d("WALogger").LOG(j());return{accountLid:b,chatId:a}}if(e.accountLid===b){d("WALogger").LOG(i());return{accountLid:b,chatId:a}}d("WALogger").LOG(h());return{accountLid:b,chatId:b}});return s.apply(this,arguments)}g.extractLidAndPn=q;g.selectChatForOneOnOneMessage=a}),98);
__d("WAWebOrderEphemeralExemptionUtil",["WAWebBizGatingUtils","WAWebDBEphemeralDisplayedExemptions","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a,b,e){return d("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled()&&a===d("WAWebMsgType").MSG_TYPE.INTERACTIVE&&b===c("WAWebInteractiveMessageType").NATIVE_FLOW&&(e===c("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS||e===c("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS||e===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD||e===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS||e===c("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO)}function b(a){var b=a.id,c=a.ephemeralDuration;a=a.ephemeralDisplayedExemptions;return b!=null&&c!==0&&c!=null&&d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS!==a}function e(a){var b=a.id,c=a.ephemeralDuration;a=a.ephemeralDisplayedExemptions;return b!=null&&(c===0||c==null)&&d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS===a}g.isMessageTypeExemptedFromDisappearing=a;g.shouldShowOrderExemptionSystemMessage=b;g.shouldUnsetChatEphemeralDisplayedExemption=e}),98);
__d("WAWebOrderSystemMsg",["WAWebContactSystemMsg","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebContactSystemMsg").genNotificationMsg(a,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"order_ephemeral_exemption",templateParams:[]})}g.getOrderEphemeralExemptionSystemMsg=a}),98);
__d("WAWebPreProcessOrderEphemeralExemption",["WAWebBizGatingUtils","WAWebDBChatEphemeralExemptionData","WAWebDBEphemeralDisplayedExemptions","WAWebOrderEphemeralExemptionUtil","WAWebOrderSystemMsg","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(!d("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled())return a;var c=a.findIndex(function(a){var b=a.nativeFlowName,c=a.interactiveType;a=a.type;return d("WAWebOrderEphemeralExemptionUtil").isMessageTypeExemptedFromDisappearing(a,c,b)});if(c===-1||((b=a.at(c))==null?void 0:(b=b.id)==null?void 0:b.remote)==null)return a;b=(b=a.at(c))==null?void 0:(b=b.id)==null?void 0:b.remote;if(b==null)return a;var e=(yield d("WAWebDBChatEphemeralExemptionData").getChatEphemeralExemptionDataFromChat(b));if(e!=null&&d("WAWebOrderEphemeralExemptionUtil").shouldShowOrderExemptionSystemMessage(e)){var f;d("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(b,(f=e.ephemeralDuration)!=null?f:0,d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS);f=a.slice(0,c);var g=d("WAWebOrderSystemMsg").getOrderEphemeralExemptionSystemMsg(b);c=a.slice(c,a.length);return[].concat(f,[g],c)}else if(e!=null&&d("WAWebOrderEphemeralExemptionUtil").shouldUnsetChatEphemeralDisplayedExemption(e)){d("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(b,(f=e.ephemeralDuration)!=null?f:0,d("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.UNSET)}return a});return h.apply(this,arguments)}g.preProcessOrderEphemeralExemption=a}),98);
__d("WAWebProcessRenderableMessagesForLid",["WANullthrows","WAWebMsgKey","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return a.map(function(a){var d=c("WANullthrows")(a.id.remote,"message key must have a remote");if(!d.isUser())return a;var e=c("WANullthrows")(b==null?void 0:b.chatId);if(e.isSameAccount(d))return a;d=c("WAWebMsgKey").from({fromMe:a.id.fromMe,id:a.id.id,participant:a.id.participant,remote:e});return babelHelpers["extends"]({},a,{id:d,from:a.id.fromMe?a.from:e})})});return h.apply(this,arguments)}g.processRenderableMessagesForLid=a}),98);
__d("WAWebUserPrefsStatusType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({Contact:"contact",AllowList:"allow-list",DenyList:"deny-list"});f.StatusPrivacySettingType=a}),66);
__d("WAWebUserPrefsStatus",["WALogger","WAWebBackendApi","WAWebCmd","WAWebLidAwareContactsDB","WAWebModelStorageUtils","WAWebSendMsgCommonApi","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsStatusType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusContacts"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusDenyList"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusAllowList"]);j=function(){return a};return a}function a(a){var b=a.setting;a=a.list;if(b===d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact)return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,b);b=k({setting:b,allowList:b===d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList?a:void 0,denyList:b===d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList?a:void 0});return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.bulkSetItemsToIndexedDB(b)}function k(a){var b=[],c=a.setting,e=a.allowList;a=a.denyList;c!=null&&b.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,value:c});e!=null&&b.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST,value:Array.from(new Set(e.map(function(a){return String(d("WAWebWidFactory").toUserWid(a))})))});a!=null&&b.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_DENY_LIST,value:Array.from(new Set(a.map(function(a){return String(d("WAWebWidFactory").toUserWid(a))})))});return b}function l(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING)||d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact});return m.apply(this,arguments)}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(j());var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST);return a!=null?a.map(d("WAWebWidFactory").createWid):[]});return o.apply(this,arguments)}function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(i());var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_DENY_LIST);return a!=null?a.map(d("WAWebWidFactory").createWid):[]});return q.apply(this,arguments)}function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(h());if(d("WAWebCmd").Cmd.isMainStreamReadyMd){var a=(yield d("WAWebBackendApi").frontendSendAndReceive("getFilteredContacts",{showMe:!1,showWithoutName:!1,includeLidContacts:!1}));return a.map(function(a){return a.id})}a=(yield c("WAWebLidAwareContactsDB").equals(["isAddressBookContact"],1));return a.map(function(a){return d("WAWebWidFactory").createWid(a.id)}).filter(function(a){return!a.isLid()})});return s.apply(this,arguments)}function e(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebModelStorageUtils").getStorage().lock(["user-prefs","contact"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield l()),b;switch(a){case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList:return{setting:d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList,list:yield n()};case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList:b=new Set((yield p()).map(String));return{setting:d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList,list:(yield r()).filter(function(a){return!b.has(a.toString())})};case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact:return{setting:d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact,list:yield r()}}}))});return t.apply(this,arguments)}function f(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield l()),b=(yield n()),c=(yield p());return{setting:a,allowList:b,denyList:c}}))});return u.apply(this,arguments)}function v(){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY);return a||{rotateKey:!1,senderKey:new Set()}});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield v()),c=b.rotateKey?new Set():b.senderKey;a.forEach(function(a){c.add(String(a))});yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!1,senderKey:c})}))});return y.apply(this,arguments)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield v());if(b.rotateKey)return;var c=a.some(function(a){return b.senderKey.has(String(a))});c&&(yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set()}))}))});return A.apply(this,arguments)}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield v());a.forEach(function(a){b.senderKey["delete"](String(a))});yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:b.rotateKey,senderKey:b.senderKey})}))});return C.apply(this,arguments)}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield v());if(b.rotateKey||b.senderKey.size===0)return{rotateKey:b.rotateKey,skDistribList:a,participantList:[]};var c=[],e=[],f=0;a.forEach(function(a){b.senderKey.has(String(a))?(d("WAWebSendMsgCommonApi").isPrimaryDevice(a)&&c.push(a),f++):d("WAWebUserPrefsMeUser").isMeDevice(a)||e.push(a)});if(f<b.senderKey.size){yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set()});return{rotateKey:!0,skDistribList:a,participantList:[]}}return{rotateKey:b.rotateKey,skDistribList:e,participantList:c}});return E.apply(this,arguments)}a={setStatusPrivacyConfig:a,calculateStatusPrivacyUpdateEntries:k,getStatusPrivacySetting:l,getStatusAllowList:n,getStatusDenyList:p,getStatusSkDistribList:D,markStatusHasSenderKey:x,getStatusContacts:r,getStatusList:e,getStatusPrivacySettingConfig:f,markForgetStatusSenderKey:B,markStatusSenderKeyRotate:z};g["default"]=a}),98);
__d("WAWebStatusDBMessageInfo",["Promise","WABatcher","WALogger","WAPromiseMap","WAWebApiMessageInfoStore","WAWebUserPrefsStatus","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfo: adding ",", setting ",", offline ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: complete to update "," records"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: staring to update "," records"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: staring to process "," records"]);l=function(){return a};return a}e={delayMs:5e3};var m=d("WABatcher").createSimpleBatcher(e,function(a){return n(a)});function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(l(),a.length);var e,f,g,i,m=(yield d("WAPromiseMap").promiseMap(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a.msgKey;a=a.setting;switch(a){case"denylist":e||(e=c("WAWebUserPrefsStatus").getStatusDenyList().then(function(a){return new Set(a.map(String))}));f||(f=c("WAWebUserPrefsStatus").getStatusContacts());return{msgKey:d,receiverIds:yield (h||(h=b("Promise"))).all([f,e]).then(function(a){var b=a[0],c=a[1];return b.filter(function(a){return!c.has(a.toString())})})};case"allowlist":g||(g=c("WAWebUserPrefsStatus").getStatusAllowList());return{msgKey:d,receiverIds:yield g};case"contacts":f||(f=c("WAWebUserPrefsStatus").getStatusContacts());return{msgKey:d,receiverIds:yield f};default:i||(i=c("WAWebUserPrefsStatus").getStatusList());return{msgKey:d,receiverIds:(yield i).list}}});return function(b){return a.apply(this,arguments)}}())),n=[];m.forEach(function(a){a.receiverIds.forEach(function(b){n.push({msgKey:a.msgKey,receiverId:b})})});d("WALogger").LOG(k(),n.length);yield d("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(n);d("WALogger").LOG(j(),n.length);return a.map(function(){return void 0})});return o.apply(this,arguments)}function a(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(i(),a.id,c,b);a=m.accept({msgKey:a,setting:c});b||void m.runActiveBatch();return a});return p.apply(this,arguments)}f={updatePeerStatusReceiptInfo:a};g["default"]=f}),98);
__d("WAWebMessageProcessRenderable",["Promise","WALogger","WAWebABProps","WAWebApiOrphanRevoke","WAWebBotGating","WAWebBotSystemMsg","WAWebCmd","WAWebGetPrivacyModeWhenSent","WAWebHandleBizBotMsgs","WAWebHandleMsgTypes.flow","WAWebHandlePrivacyModeChange","WAWebLid1X1MigrationGating","WAWebMessagePostprocessRenderable","WAWebMessageProcessDBPipeline","WAWebMessageProcessUtils","WAWebMsgGetters","WAWebMsgSyncTunnelBatcher","WAWebMsmsgMsgSecretCache","WAWebOfflineHandler","WAWebOfflineResumeTypes.flow","WAWebPnhGatingUtils","WAWebPreProcessOrderEphemeralExemption","WAWebProcessMatMessages","WAWebProcessRenderableMessagesForLid","WAWebStatusDBMessageInfo","WAWebStatusGatingUtils","WAWebWamEnumPlaceholderPopulationType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessage: msgId:",", failed with error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing "," "," message(s)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessages: skip for empty msg list"]);k=function(){return a};return a}function l(a,b,c,d,e){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=a;d("WAWebPnhGatingUtils").isMatFullyEnabled()&&(g=(yield d("WAWebProcessMatMessages").processRenderableMatMessages_DEPRECATED(a)));d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyLidMessagingRules()&&(g=(yield d("WAWebProcessRenderableMessagesForLid").processRenderableMessagesForLid(a,f)));var h=(yield d("WAWebGetPrivacyModeWhenSent").getPrivacyModeWhenSent(b,c)),i=o(e);i!=null&&(g=g.map(function(a){return babelHelpers["extends"]({},a,{placeholderPopulationType:i})}));g=h==null?g:g.map(function(a){return babelHelpers["extends"]({},a,{privacyModeWhenSent:h})});var j=b.addressingMode;g=j==null?g:g.map(function(a){return babelHelpers["extends"]({},a,{groupAddressingMode:j})});g=(yield d("WAWebPreProcessOrderEphemeralExemption").preProcessOrderEphemeralExemption(g));d("WAWebBotGating").isBotReceiveEnabled()&&(g=g.map(function(a){var b;b=a.messageSecret!=null?(b=a.mentionedJidList)==null?void 0:b.find(function(a){return a.isBot()}):null;return b!=null?babelHelpers["extends"]({},a,{invokedBotWid:b}):a}));return d("WAWebApiOrphanRevoke").applyOrphanRevokes(g,[])});return m.apply(this,arguments)}function a(a,b,c,d,e,f,g){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,m,n,o){if(a.length===0){d("WALogger").DEV(k());return}try{f=null;e.chat.isUser()&&d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyLidMessagingRules()&&(f=(yield d("WAWebMessageProcessUtils").selectChatForOneOnOneMessage(e.chat)));var p=e.offline!=null&&!o,q="online";o?q="reparsing":p&&(q="offline");d("WALogger").DEV(j(),a.length,q);q=(yield l(a,e,g,n,f));a=q.newMsgs;d("WAWebStatusGatingUtils").isStatusPostingEnabled()&&a.forEach(function(a){var b;a.id.fromMe&&((b=a.id.remote)==null?void 0:b.isStatus())&&void c("WAWebStatusDBMessageInfo").updatePeerStatusReceiptInfo(a.id,p,e.statusSetting)});if(d("WAWebBotGating").isBotReceiveEnabled()){q=null;a.forEach(function(a){var b,c,e=a.messageSecret;b=Boolean(e&&((b=a.id.remote)==null?void 0:b.isBot()));c=(c=(c=a.invokedBotWid)==null?void 0:c.isBot())!=null?c:!1;e&&(b||c)&&a.isForwarded!==!0&&(c&&(q=a.id.remote),d("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.addMsmsgMsgSecretToCache(a.id.toString(),e))});if(q){var r=(yield d("WAWebBotSystemMsg").createSysMsgForIncomingBotInvoke(q));r&&a.unshift(r)}}if(d("WAWebBotGating").isBotEnabled()){r=a.filter(function(a){return Boolean(a.bizBotType)&&!d("WAWebMsgGetters").getIsCAPISupport(a)});if(r.length){r=(yield d("WAWebHandleBizBotMsgs").handleBizBotMsgs(r));a.unshift.apply(a,r)}}r=(yield d("WAWebHandlePrivacyModeChange").handlePrivacyModeChangeAndCreateChat(a,e,g,m,f));if(d("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.isActive()){d("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.accept({msgInfo:e,messageOverwriteOption:n,msgs:a,isOffline:p,latestPrivacyMode:r==null?void 0:r.latestPrivacyMode,shouldQueryContactInfo:(g=r==null?void 0:r.shouldQueryContactInfo)!=null?g:!1});return(h||(h=b("Promise"))).resolve()}m=d("WAWebMessageProcessDBPipeline").processMsgDataDBPipeline(a,!p);if(d("WAWebCmd").Cmd.isMainStreamReadyMd||o){d("WAWebCmd").Cmd.isOfflineDeliveryEnd&&(yield m);g=d("WAWebMessagePostprocessRenderable").postprocessRenderableMessages({msgInfo:e,messageOverwriteOption:n,msgs:a,isOffline:p,latestPrivacyMode:r==null?void 0:r.latestPrivacyMode,shouldQueryContactInfo:(f=r==null?void 0:r.shouldQueryContactInfo)!=null?f:!1});if(p&&d("WAWebOfflineHandler").OfflineMessageHandler.getResumeType()===d("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking&&d("WAWebABProps").getABPropConfigValue("web_non_blocking_fire_ui_update"))return;return g}}catch(a){d("WALogger").ERROR(i(),e.externalId,a).tags("messaging").sendLogs("handle_msg: error storing/processing single message")}return(h||(h=b("Promise"))).resolve()});return n.apply(this,arguments)}function o(a){switch(a){case d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE:case d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.FUTURE_PROOF:return null;case d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY:return d("WAWebWamEnumPlaceholderPopulationType").PLACEHOLDER_POPULATION_TYPE.RETRY;case d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.PEER_RETRY:return d("WAWebWamEnumPlaceholderPopulationType").PLACEHOLDER_POPULATION_TYPE.PEER_MESSAGE}}g.processRenderableMessages=a}),98);
__d("WAWebParsedProtocolMsgType",[],(function(a,b,c,d,e,f){a=Object.freeze({HISTORY:"history",APP_STATE_SYNC_KEY_SHARE:"appStateSyncKeyShare",APP_STATE_SYNC_KEY_REQUEST:"appStateSyncKeyRequest",PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:"peerDataOperationRequestResponseMessage",PEER_DATA_OPERATION_REQUEST_MESSAGE:"peerDataOperationRequestMessage"});f.PARSED_PROTOCOL_MESSAGE_TYPE=a}),66);
__d("WAWebHandleMsgProcess",["Promise","WACryptoPkcs7","WALogger","WAWebABProps","WAWebAddonGatingUtils","WAWebAddonProcessMsgsUtils","WAWebApiDeferredMessagesStorage","WAWebBackendApi","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebCmd","WAWebDBAddOnProviders","WAWebDBMsgUtils","WAWebGetGroupAddressingMode","WAWebGetMessageCache","WAWebHandleMsgError","WAWebHandleMsgProcessUtils","WAWebHandleMsgTypes.flow","WAWebHandleMsgValidate","WAWebHandlePushnameUpdate","WAWebLidFoundationalGatingUtils","WAWebLogMissingGroupParticipantMappings","WAWebLogReceivedMessages","WAWebMessageEditGatingUtils","WAWebMessageProcessPlaceholder","WAWebMessageProcessRenderable","WAWebMessageProcessorCache","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebParsedProtocolMsgType","WAWebPnhGatingUtils","WAWebProcessMatMessages","WAWebProtobufsE2E.pb","WAWebRuntimeEnvironmentUtils","WAWebSignal","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","WAWebVerifyProtobufMsgObjectKeys","WAWebWamEnumDsmError","WAWebWid","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","cr:10197","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle security notification payload wid error"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle security notification empty wid error"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Me wid is empty during security notification parsing"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Reparsed processDecryptedMessageProto: msgId::",", message decrypted:"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["parsed render able msgs not reparsed as expected"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Reparsing processDecryptedMessageProto: msgId::",", message decrypted:"]);n=function(){return a};return a}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.decrypted,f=a.info,g=a.paymentInfo,o=a.e2eInfo,q=a.bizInfo,r=a.hsmInfo,s=a.isPadded;s=s===void 0?!0:s;var t=a.msgMeta,u=a.reparsing;u=u===void 0?!1:u;var x=a.msgBotInfo,y=a.reportingTokenInfo;s=o.e2eType===d("WAWebBackendJobs.flow").CiphertextType.Msmsg?!1:s;s=s?d("WACryptoPkcs7").unpadPkcs7(new Uint8Array(e)):new Uint8Array(e);e=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,s);d("WAWebVerifyProtobufMsgObjectKeys").verifyProtobufMessageObjectKeys(e);var z=d("WAWebMsgProcessingApiUtils").getFrom(f),A=o.retryCount>0&&d("WAWebMsgProcessingApiUtils").isRevokeInfo(f)||u;A=A?d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY:d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE;if(u){d("WALogger").LOG(n(),f.externalId).tags("messaging").devConsole(e);var B=(yield d("WAWebMsgProcessingApiUtils").parseMessage({info:f,ciphertextType:o.e2eType,msgProtobuf:e,paymentInfo:g,bizInfo:q,hsmInfo:r,hidePlaceholder:o.hideFail,processDecryptedProtoParams:a,msgBotInfo:x,meta:t}));if(B.renderableMsgs==null)d("WALogger").ERROR(m());else{B=B.renderableMsgs;var C=B[0],D=d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(C.type)||Boolean(d("WAWebDBAddOnProviders").getAddOnProviderForMsg(C)),E=[d("WAWebMsgType").MSG_TYPE.DOCUMENT,d("WAWebMsgType").MSG_TYPE.POLL_CREATION,d("WAWebMsgType").MSG_TYPE.PTV,d("WAWebMsgType").MSG_TYPE.STICKER];if(!D&&!E.includes(C.type))return{hasInactiveMsg:!1};d("WAWebHandleMsgValidate").renderableMessagesValidation({renderableMsgs:B,msgMeta:t,info:f,proto:e,bizInfo:q});yield d("WAWebHandleMsgValidate").validateAndProcessReportingTokenInfo({renderableMsgs:B,info:f,reportingTokenInfo:y,protobufBytes:s,isMessageRetry:o.retryCount>0});D=p({renderableMsgs:B,reparsing:u,bizInfo:q,msgMeta:t,paymentInfo:g,info:f,messageOverwriteOption:A});E=D.tasks;C=D.hasInactiveMsg;yield (h||(h=b("Promise"))).all(E);d("WALogger").LOG(l(),f.externalId).tags("messaging").devConsole(e);return{hasInactiveMsg:C}}}B=(yield d("WAWebHandleMsgProcessUtils").preProcessMsg(f,e));d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&((B==null?void 0:B.senderOrRecipientAccountTypeHosted)===!0&&(f.senderOrRecipientAccountTypeHosted=!0),(B==null?void 0:B.hostedBizEncMismatch)===!0&&(f.hostedBizEncStateMismatch=!0));if(f.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST&&o.retryCount>0){D=(yield d("WAWebDBMsgUtils").getMsgByMsgKey(d("WAWebMsgProcessingApiUtils").messageInfoToKey(f)));(D==null?void 0:D.broadcastParticipants)!=null&&(f.bclParticipants=D.broadcastParticipants,D.broadcastEphSettings!=null&&(f.bclEphSettings=D.broadcastEphSettings))}E=(yield d("WAWebMsgProcessingApiUtils").parseMessage({info:f,ciphertextType:o.e2eType,msgProtobuf:e,paymentInfo:g,bizInfo:q,hsmInfo:r,hidePlaceholder:o.hideFail,processDecryptedProtoParams:a,msgBotInfo:x,meta:t}));C=null;E.history?C=d("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.HISTORY:E.appStateSyncKeyShare?C=d("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_SHARE:E.appStateSyncKeyRequest?C=d("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_REQUEST:E.peerDataOperationRequestResponseMessage?C=d("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:E.peerDataOperationRequestMessage&&(C=d("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_MESSAGE);if(d("WAWebRuntimeEnvironmentUtils").isWorker()&&C)yield c("WAWebApiDeferredMessagesStorage").updateDeferredMessages([{id:f.externalId,type:C,plaintext:s,info:f,paymentInfo:g,bizInfo:q}]);else if(E.history)d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleHistorySyncNotification",{historySyncMetaData:E.history,from:z,externalId:f.externalId});else if(E.appStateSyncKeyShare)yield d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleAppStateSyncKeyShare",{keyShare:E.appStateSyncKeyShare,from:z});else if(E.appStateSyncKeyRequest)d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleAppStateSyncKeyRequest",{keyRequest:E.appStateSyncKeyRequest,from:z});else if(E.peerDataOperationRequestResponseMessage)d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handlePeerDataOperationRequestResponse",{stanzaId:f.externalId,response:E.peerDataOperationRequestResponseMessage});else if(E.peerDataOperationRequestMessage)d("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handlePeerDataOperationRequest",{stanzaId:f.externalId,request:E.peerDataOperationRequestMessage});else if(E.securityNotificationEnabled)d("WAWebUserPrefsMeUser").getMe()==null?d("WALogger").ERROR(k()).sendLogs("Me wid is empty during security notification parsing"):z==null||!(z instanceof c("WAWebWid"))?d("WALogger").ERROR(j()).sendLogs("Handle security notification empty wid error"):!d("WAWebUserPrefsMeUser").isMePrimaryNonLid(z)?d("WALogger").ERROR(i()).sendLogs("Handle security notification payload wid error"):d("WAWebUserPrefsNotifications").setGlobalSecurityNotifications(E.securityNotificationEnabled.isEnabled);else{B=!1;E.deviceSent==null?B=!0:E.deviceSent.phash?B=(yield d("WAWebHandleMsgValidate").validateBclHash(E.deviceSent.phash,E.deviceSent.info)):E.deviceSent.destination&&(B=(yield d("WAWebHandleMsgValidate").validateMsgDestination(E.deviceSent.destination,f)));if(!B)throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(d("WAWebMsgProcessingApiUtils").getDeviceType(f.author),d("WAWebWamEnumDsmError").DSM_ERROR.INVALID_DSM);D=E.renderableMsgs;d("WAWebHandleMsgValidate").renderableMessagesValidation({renderableMsgs:D,msgMeta:t,info:f,proto:e,bizInfo:q});yield d("WAWebHandleMsgValidate").validateAndProcessReportingTokenInfo({renderableMsgs:D,info:f,reportingTokenInfo:y,protobufBytes:s,isMessageRetry:o.retryCount>0});r=p({renderableMsgs:D,reparsing:u,bizInfo:q,msgMeta:t,paymentInfo:g,info:f,messageOverwriteOption:A});a=r.tasks;x=r.hasInactiveMsg;E.storeMsg!=null&&d("WAWebMessageProcessorCache").messageProcessorCache.addMessages([{msg:E.storeMsg}],!1);C=E.senderKey;if(C!=null){z=d("WAWebLidFoundationalGatingUtils").shouldUseDeprecatedSessionForIncomingMessage(f.author,t==null?void 0:t.deprecatedLidSession);a.push(d("WAWebSignal").Session.createGroupSignalSession(f.author,C.groupId,C.key,z))}f.pushname&&d("WAWebHandlePushnameUpdate").updatePushname(f.author,f.pushname,f.offline!=null);B=v(f.chat);yield (h||(h=b("Promise"))).all(a);e=(yield B);void d("WAWebLogMissingGroupParticipantMappings").logMissingGroupParticipantMappings(f.chat,f.author,f.addressingMode,e);d("WAWebLogReceivedMessages").logReceivedMessagesInWAM({msgs:E.renderableMsgs,offline:w(f.offline),tsMillis:f.ts*1e3,clientReceivedTsMillis:f.clientReceivedTsMillis,msgProcessStartTsMillis:f.msgProcessStartTsMillis,serverAddressingMode:f.addressingMode,localAddressingMode:e});return{hasInactiveMsg:x}}return{hasInactiveMsg:!1}});return o.apply(this,arguments)}function p(a){var b=a.renderableMsgs,c=a.reparsing,e=a.bizInfo,f=a.msgMeta,g=a.paymentInfo,h=a.info;a=a.messageOverwriteOption;var i=[],j=!1,k=b[0],l=d("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(k==null?void 0:k.type)?d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(k):null;l!=null?(j=!0,i.push(t(l,h,c,a))):k!=null&&k.kind===d("WAWebMsgType").MsgKind.PollVoteEncrypted?i.push(r(k,h,c)):((l=b[0])==null?void 0:l.type)===d("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT?(j=!0,i.push(d("WAWebHandleMsgProcessUtils").processKeepInChatMsg(b[0],h,c))):d("WAWebMessageEditGatingUtils").receiveTextEditEnabled()&&((k=b[0])==null?void 0:k.type)===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&((l=b[0])==null?void 0:l.subtype)==="message_edit"?i.push(d("WAWebHandleMsgProcessUtils").processEditProtocolMsg(b[0],h,c)):((k=b[0])==null?void 0:k.type)===d("WAWebMsgType").MSG_TYPE.PROTOCOL&&((l=b[0])==null?void 0:l.subtype)==="ephemeral_sync_response"?i.push(d("WAWebHandleMsgProcessUtils").processEphemeralSyncResponseMsg(b[0],h,c)):b.length>0&&i.push(q(b,h,g,e,f,a,c));return{tasks:i,hasInactiveMsg:j}}function q(a,b,c,e,f,g,h){return d("WAWebMessageProcessRenderable").processRenderableMessages(a,b,c,e,f,g,h)}function e(a){return d("WAWebMessageProcessPlaceholder").processPlaceholderMessage(a)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=b.offline!=null&&!c;a=d("WAWebPnhGatingUtils").isMatFullyEnabled()?yield d("WAWebProcessMatMessages").processPollUpdateMatMessages(a):a;a=d("WAWebGetMessageCache").getMessageCache().addMessages([{msg:a}],!b);(c||d("WAWebCmd").Cmd.isMainStreamReadyMd&&d("WAWebCmd").Cmd.isOfflineDeliveryEnd)&&(yield a)});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=b.offline!=null&&!c;var f=d("WAWebAddonProcessMsgsUtils").castToAddonMsgData(a);d("WAWebPnhGatingUtils").isMatFullyEnabled()&&f!=null?f=(yield d("WAWebProcessMatMessages").processAddonMatMessages(f,d("WAWebAddonProcessMsgsUtils").getParentMsgKeyName(f))):f=a;f=d("WAWebGetMessageCache").getMessageCache().addMessages([{msg:f}],!b);(c||d("WAWebCmd").Cmd.isMainStreamReadyMd&&d("WAWebCmd").Cmd.isOfflineDeliveryEnd)&&(yield f);e===d("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY&&d("WAWebBackendApi").frontendFireAndForget("removePlaceholder",{msg:a})});return u.apply(this,arguments)}function v(a){if(!d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes"))return;return d("WAWebGetGroupAddressingMode").getGroupAddressingMode(a)}function w(a){a=parseInt(a,10);return!Number.isNaN(a)?a:null}g.processDecryptedMessageProto=a;g.processMsgs=p;g.processRenderableMsg=q;g.processPlaceholderMsg=e}),98);
__d("WAWebInboxFiltersGatingUtils",["WAWebABProps","WAWebMobilePlatforms","WAWebPrimaryFeatures"],(function(a,b,c,d,e,f,g){function h(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("inbox_filters_smb_enabled"):d("WAWebABProps").getABPropConfigValue("inbox_filters_enabled")}function i(){return h()&&d("WAWebPrimaryFeatures").primaryFeatureEnabled("primary_favorites_sync_support")&&d("WAWebABProps").getABPropConfigValue("inbox_filters_favorites_enabled_companions")}function a(){return i()&&d("WAWebABProps").getABPropConfigValue("inbox_filters_favorites_management_enabled_companions")}function b(){return i()&&d("WAWebABProps").getABPropConfigValue("inbox_filters_favorites_deeplink_enabled")}function c(){return d("WAWebMobilePlatforms").isSMB()&&d("WAWebABProps").getABPropConfigValue("inbox_filters_smb_enabled")&&d("WAWebABProps").getABPropConfigValue("inbox_filters_custom_smb_enabled")}g.inboxFiltersEnabled=h;g.inboxFavoritesEnabled=i;g.inboxFavoritesManagementEnabled=a;g.inboxFavoritesDeeplinkEnabled=b;g.inboxCustomFiltersEnabled=c}),98);
__d("WAWebIndexedDB",[],(function(a,b,c,d,e,f){var g;try{g=self.indexedDB}catch(a){}a=g;f["default"]=a}),66);
__d("WAWebInvocationDispatcher",["invariant","Promise","WANullthrows","WAWebBrokerProtocolInvocation","WAWebBrokerProtocolResponse","WAWebInvocationId","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i;a=function(){function a(){var a=this;this.$2=new Map();this.$3=function(b){b=d("WAWebBrokerProtocolResponse").unwrapResponsePayload(b.data);if(b!=null){var e=b.invocationId;b=b.result;if(a.$2.has(e)){var f=c("WANullthrows")(a.$2.get(e));f=f.resolve;f(b);a.$2["delete"](e)}}}}var e=a.prototype;e.setConnectionManager=function(a){var b=this;this.$1=a;a.waitForConnection().then(function(){var d=c("WANullthrows")(a.getPort(),"Port obtained from ConnectionManager after connection");d.addEventListener("message",b.$3);d.start()})};e.invoke=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;this.$1||h(0,56298);yield this.$1.waitForConnection();this.$1||h(0,56298);var g=c("WANullthrows")(this.$1.getPort(),"Port obtained from ConnectionManager after connection"),j=d("WAWebInvocationId").genInvocationId();g.postMessage(d("WAWebBrokerProtocolInvocation").buildInvocationPayload({invocationId:j,method:a,args:e}));return new(i||(i=b("Promise")))(function(a,b){f.$2.set(j,{resolve:a,reject:b})})});function e(b,c){return a.apply(this,arguments)}return e}();return a}();e=new a();g["default"]=e}),98);
__d("WAWebInvocationInterface",["WANullthrows"],(function(a,b,c,d,e,f,g){var h;function a(a){h=a}function i(){return c("WANullthrows")(h,"InvocationInterface was not inited")}function b(a,b){return i().sendLogs(a,b)}g.set=a;g.get=i;g.sendLogs=b}),98);
__d("WAWebInvocationHandler",["WAWebBrokerProtocolInvocation","WAWebBrokerProtocolResponse","WAWebInvocationInterface"],(function(a,b,c,d,e,f,g){a=function(){function a(){this.$1=function(a,b){b=b.data;b=d("WAWebBrokerProtocolInvocation").unwrapInvocationPayload(b);if(b!=null){var c=b.method,e=b.args,f=b.invocationId;b=d("WAWebInvocationInterface").get();b[c].apply(b,e).then(function(b){a.postMessage(d("WAWebBrokerProtocolResponse").buildResponsePayload(f,b))})}}}var b=a.prototype;b.respondTo=function(a){var b=this;a.addEventListener("message",function(c){return b.$1(a,c)});a.start()};return a}();b=new a();g["default"]=b}),98);
__d("WAWebIsOfficialClient",["WALogger","WAWebUA","WAWebWamGlobals","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot set ocVersion ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot analyze UC ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["A caller is not found ",""]);l=function(){return a};return a}var m=function(){var a=typeof self!=="undefined"?self.navigator:null;return Boolean(a.webdriver)};a=function(){if(m())return!1;return d("WAWebUA").UA.isChrome&&/HeadlessChrome/.test(window.navigator.userAgent)?!1:!0};var n=function(){try{var a=new Error();a=a.stack;var b=a.split("\n").filter(function(a){return Boolean(a.trim())}).pop();if(b==null){d("WALogger").WARN(l(),a).tags("uc");return!0}if(!b.includes(".whatsapp.com")){!c("gkx")("26258")?d("WALogger").WARN(k(),b).tags("uc").sendLogs("Unexpectedly detected UC"):d("WALogger").WARN(j(),b).tags("uc");return!1}}catch(a){d("WALogger").WARN(i(),a.stack).tags("uc")}return!0};b="webpackChunkwhatsapp_web_client";b in window||(window[b]=[]);var o=window[b];o!=null&&Object.defineProperty(window,b,{get:function(){if(!n())try{d("WAWebWamGlobals").Global.set({ocVersion:0})}catch(a){d("WALogger").WARN(h(),a.stack).tags("uc")}return o}});e=a();f=function(a){return a.startsWith("BA")?!0:!1};g.isOfficialClient=e;g.isUnofficialStanzaId=f}),98);
__d("WAWebKeyboardConstants",[],(function(a,b,c,d,e,f){a={UNIDENTIFIED:"Unidentified",ALT:"Alt",ALT_GRAPH:"AltGraph",CAPS_LOCK:"CapsLock",CONTROL:"Control",FN:"Fn",FN_LOCK:"FnLock",HYPER:"Hyper",META:"Meta",NUM_LOCK:"NumLock",SCROLL_LOCK:"ScrollLock",SHIFT:"Shift",SUPER:"Super",SYMBOL:"Symbol",SYMBOL_LOCK:"SymbolLock",OS:"OS",ENTER:"Enter",TAB:"Tab",SPACE:" ",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",LEFT:"Left",RIGHT:"Right",UP:"Up",DOWN:"Down",END:"End",HOME:"Home",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",BACKSPACE:"Backspace",CLEAR:"Clear",COPY:"Copy",CR_SEL:"CrSel",CRSEL:"Crsel",CUT:"Cut",DELETE:"Delete",ERASE_EOF:"EraseEof",EX_SEL:"ExSel",EXSEL:"Exsel",INSERT:"Insert",PASTE:"Paste",REDO:"Redo",UNDO:"Undo",ESCAPE:"Escape"};f.KEYBOARD_EVENT_KEY_VALUE=a}),66);
__d("WAWebKeyboardTabUtils",["$InternalEnum","WAWebMiscGatingUtils","lodash","tabbable"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["CUSTOM","CUSTOM_SELECTOR","TABBABLE"]),i=b("$InternalEnum").Mirrored(["FORWARD","BACKWARD"]);function a(a,b,e,f,g){b===void 0&&(b=i.FORWARD);e===void 0&&(e=h.CUSTOM);f===void 0&&(f=function(){return!0});var l,m;e===h.TABBABLE?(l=d("tabbable").tabbable(a),m=function(a){return!0}):e===h.CUSTOM_SELECTOR&&g!=null?(l=Array.from(a.querySelectorAll(g)),m=function(a){return!0}):(l=c("lodash").sortBy(Array.from(a.querySelectorAll("[data-tab]")),function(a){return parseInt(a.getAttribute("data-tab"),10)||0}),m=k);e=b===i.FORWARD?1:-1;g=0;a=document;var n=a.activeElement;if(n){b=l.findIndex(function(a){return a.contains(n)});if(d("WAWebMiscGatingUtils").messageListA11yRedesignEnabled()){a=l.findIndex(function(a){return a===n});a>0&&(b=a)}g=b===-1?0:j(b+e,l.length)}for(a=0;a<l.length;a++){b=j(g+a*e,l.length);b=l[b];if(m(b)&&f(b))return b}return null}function j(a,b){return(a+b)%b}function k(a){if(a.disabled)return!1;var b=parseInt(a.dataset.tab,10);return typeof b!=="number"||b<0?!1:!l(a)}function l(a){if(getComputedStyle(a).visibility==="hidden")return!0;a=a;while(a){if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}g.FocusType=h;g.TabDirection=i;g.getNextTabbableElement=a}),98);
__d("WAWebSvgComponentBase",["$InternalEnum","WAWebClassnames","WAWebL10N","err","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={secondaryColor:{color:"x7gh8cn",$$css:!0},secondaryLighterColor:{color:"x40yjcy",$$css:!0},tealColor:{color:"x1n68mz9",$$css:!0},tealLighterColor:{color:"xrxj3dl",$$css:!0},grayColor:{color:"x1t495xr",$$css:!0},grayLighterColor:{color:"xpteuj8",$$css:!0},criticalColor:{color:"x1sr8853",$$css:!0},successColor:{color:"x16yd4ao",$$css:!0},reverse:{display:"x1lliihq",transform:"xpk2tj9",$$css:!0},inline:{display:"x1rg5ohu",verticalAlign:"x16dsc37",$$css:!0}};e=b("$InternalEnum")({SECONDARY:"secondaryColor",SECONDARY_LIGHTER:"secondaryLighterColor",TEAL:"tealColor",TEAL_LIGHTER:"tealLighterColor",GRAY:"grayColor",GRAY_LIGHTER:"grayLighterColor",CRITICAL:"criticalColor",SUCCESS:"successColor"});function a(a){if(a.children==null||a.children.type!=="svg")throw c("err")("Cannot use BaseSvgSpan without SVG children");var b=a["aria-label"],e=a["aria-hidden"],f=a.className_DONOTUSE,g=a.directional,h=a.displayInline,l=a.containerRef,m=a.xstyle,n=a.color,o=a.name,p=a.children,q=a.overrideDirection;a=babelHelpers.objectWithoutPropertiesLoose(a,["aria-label","aria-hidden","className_DONOTUSE","directional","displayInline","containerRef","xstyle","color","name","children","overrideDirection"]);q!=null?q=q==="rtl":q=g===!0?c("WAWebL10N").isRTL():!1;var r;n!=null&&(r=k[n]);g=(i||(i=c("stylex")))(q&&k.reverse,h===!0&&k.inline,r,m);return j.jsx("span",babelHelpers["extends"]({"data-testid":void 0,"aria-hidden":e,"aria-label":b,ref:l,"data-icon":o,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(f,g)},a,{children:p}))}a.displayName=a.name+" [from "+f.id+"]";g.SvgColorProp=e;g.BaseSvgSpan=a}),98);
__d("WAWebRefreshIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="refresh";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",d:"M17.6,6.4C16.2,4.9,14.2,4,12,4c-4.4,0-8,3.6-8,8s3.6,8,8,8c3.7,0,6.8-2.6,7.7-6h-2.1 c-0.8,2.3-3,4-5.6,4c-3.3,0-6-2.7-6-6s2.7-6,6-6c1.7,0,3.1,0.7,4.2,1.8L13,11h7V4L17.6,6.4z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.RefreshIcon=a}),98);
__d("WAWebLazyLoadLoading.react",["fbt","WAWebRefreshIcon","WAWebSpinner.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={circleSvg:{width:"x1pju0fl",height:"x10wjd1d",$$css:!0},text:{lineHeight:"xggjnk3",color:"x1n68mz9",$$css:!0}};function m(a){a=a.text;return k.jsxs("div",{children:[k.jsx("div",{className:"x1pju0fl x10wjd1d x1d12jij xeksh7e x1idq3uh x1w1l3m7 xdj266r xkrivgy x98jqk3 x1gryazu xue55m6 x7o08j2 x2b8uid x14yjl9h xudhj91 x18nykt9 xww2gxu xilfgz5",children:k.jsx(d("WAWebRefreshIcon").RefreshIcon,{iconXstyle:l.circleSvg})}),k.jsx("div",{className:(j||(j=c("stylex")))(l.text,d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.horiz20),children:a})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.error,c=a.text;c=c===void 0?h._("__JHASH__oj1QVsTyDDd__JHASH__"):c;a=a.retry;a=a===void 0?function(){return window.location.reload()}:a;return k.jsx("div",{className:"x10l6tqk x42zw1d x78zum5 x6s0dn4 xl56j7k xh8yej3 x5yr21d x2b8uid x1ypdohk",onClick:b?a:null,children:b?k.jsx(m,{text:c}):k.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebLazyLoadedRetriable",["Promise","WALogger","WANullthrows","WAPromiseDelays","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Lazyload failure for component ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to load a component"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Loadable error: ",""]);k=function(){return a};return a}function l(a){return function(b,c){d("WALogger").WARN(k(),b.stack);b=c>1?"s":"";c="loadable:"+a+" failed to load after ["+c+"] attempt"+b;d("WALogger").ERROR(j()).sendLogs(c)}}var m=10;function a(a,e){var f=l(e),g="INIT",j,k=0;return function l(){switch(g){case"INIT":case"FAILURE":g="INFLIGHT";j=a().then(function(a){a||f(c("err")("Lazyload response is empty"),k);g="SUCCESS";return a})["catch"](function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").WARN(i(),e).devConsole(a);g="FAILURE";k++;if(k<=m){yield d("WAPromiseDelays").delayMs(k*1e3);return l()}f(a,k);throw a});return function(b){return a.apply(this,arguments)}}());return j;case"INFLIGHT":case"SUCCESS":return c("WANullthrows")(j);default:g;return(h||(h=b("Promise"))).reject(c("err")("retriable_promise_hoc:promiseStatus is invalid"))}}}g["default"]=a}),98);
__d("WAWebManageE2ESessionsJob",["Promise","WALogger","WAResolvable","WAShiftTimer","WAWebEventsWaitForOfflineDeliveryEnd","WAWebFetchPrekeysJob","WAWebLidFoundationalGatingUtils","WAWebSignal","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: "," existing sessions, "," requested, "," requests deduplicated"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: deduped requests failed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: request failed: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: fetch prekeys for "," wids"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: can only estabilish session with user wid"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: ",""]);n=function(){return a};return a}var o=new Map(),p=new Map();function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=!1);yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();d("WALogger").LOG(n(),a.length,a.map(function(a){return a.toString()}).join());var e=new(d("WAResolvable").Resolvable)(),f=[],g=[];a.forEach(function(a){if(!a.isUserNotPSA()){d("WALogger").LOG(m());return}var b=o.get(a.toString());b&&(b.cancel(),o["delete"](a.toString()));b=p.get(a.toString());b?f.push(b):(g.push(a),p.set(a.toString(),e.promise))});var q=0,r=0;try{if(g.length>0){var s=(yield d("WAWebSignal").Session.hasSignalSessions(g,d("WAWebLidFoundationalGatingUtils").shouldUseDeprecatedForEnsureE2ESessions(g))),t=g.filter(function(a,b){return!s[b]});if(t.length>0){d("WALogger").LOG(l(),a.length,t.length);c=(yield d("WAWebFetchPrekeysJob").fetchPrekeys(t,c));r=(c=c.depletedPrekeyCount)!=null?c:0;q=t.length}}e.resolve()}catch(b){d("WALogger").WARN(k(),a.length,b);e.resolve(b);throw b}finally{g.forEach(function(a){return p["delete"](a.toString())})}try{c=(yield (h||(h=b("Promise"))).all(f)).find(Boolean);if(c)throw c}catch(b){d("WALogger").WARN(j(),a.length,b);throw b}d("WALogger").LOG(i(),a.length,g.length-q,q,f.length);return{missedPrekeyCount:q,depletedPrekeyCount:r}});return r.apply(this,arguments)}function a(a,b,c){c===void 0&&(c=!1);var e=new(d("WAShiftTimer").ShiftTimer)(function(){q(a,c)});a.forEach(function(a){o.set(String(a),e)});e.onOrAfter(1e3*b)}g.ensureE2ESessions=q;g.ensureE2ESessionsWithDelay=a}),98);
__d("WAWebMessageLargeEmoji.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={highRes:"_ahit",wrapper:"_ahiu",medium:"_ahiv",lowRes:"_ahiw",large:"_ahix",xlarge:"_ahiy",animation:"_ahiz",xlarge60:"_ar4y",invisible:"_ahi-",heartbeat:"_ahi_"};b=a;g["default"]=b}),98);
__d("WAWebTypedEventEmitter",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(){function a(){this.eventEmitter=new(c("WAWebEventEmitter"))()}var b=a.prototype;b.trigger=function(a,b){this.eventEmitter.trigger(a,b);return this};b.on=function(a,b){this.eventEmitter.on(a,b);return this};b.once=function(a,b){this.eventEmitter.once(a,b);return this};b.off=function(a,b){this.eventEmitter.off(a,b);return this};return a}();g["default"]=a}),98);
__d("WAWebUIListener",["WAWebCompatibility","WAWebEventEmitter","WAWebTypedEventEmitter"],(function(a,b,c,d,e,f,g){function h(a){return a instanceof c("WAWebEventEmitter")||a instanceof c("WAWebTypedEventEmitter")||typeof a.on==="function"&&typeof a.off==="function"}a=function(){function a(a,b,c,e,f){this.$2=!1,this.$3=!1,this.source=a,this.cb=c,this.opts=e,this.$1=f,h(a)?this.event=b:this.event=d("WAWebCompatibility").compatPrefix(b,a)}var b=a.prototype;b.engage=function(){if(this.$2||this.$3)return;this.$2=!0;var a=this.source,b=this.event;h(a)?(a.on(b,this.cb),typeof a.incObservers==="function"&&a.incObservers()):this.opts?a.addEventListener(b,this.cb,this.opts):a.addEventListener(b,this.cb)};b.disengage=function(){if(this.$3)return;this.$3=!0;if(!this.$2)return;var a=this.source,b=this.event;h(a)?(a.off(this.event,this.cb),typeof a.decObservers==="function"&&a.decObservers()):this.opts?a.removeEventListener(b,this.cb,this.opts):a.removeEventListener(b,this.cb)};b.represents=function(a,b,c,d){if(this.source!==a)return!1;if(this.event!==b)return!1;if(this.$1!==c)return!1;b=(a=d)!=null?a:{};c=b.capture;d=c===void 0?!1:c;a=b.once;c=a===void 0?!1:a;a=b.passive;b=a===void 0?!1:a;a=(a=this.opts)!=null?a:{};var e=a.capture;e=e===void 0?!1:e;var f=a.once;f=f===void 0?!1:f;a=a.passive;a=a===void 0?!1:a;return d===e&&c===f&&b===a};return a}();g.isEventsType=h;g.Listener=a}),98);
__d("useWAWebListener",["WAHash","WAWebUIListener","react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;f=h||d("react");var i=f.useCallback,j=f.useEffect,k=f.useLayoutEffect,l=f.useRef;function a(a,b,d,e){var f=c("useWAWebStableCallback")(d),g=o(b);k(function(){if(d==null)return;return m(a,b,f,e)},[a,d==null,g])}function b(a){var b=a.map(function(a){a=a.callback;return a}),d=l(b);d.current=b;b=a.map(function(a){var b=a.source;a=a.eventOrEvents;return c("WAHash")(b)+","+o(a)}).join("-");k(function(){var b=a.map(function(a,b){var c=a.source,e=a.eventOrEvents;a=a.opts;var f=function(){var a;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return d.current[b]==null?void 0:(a=d.current)[b].apply(a,e)};return m(c,e,f,a)});return function(){return b.forEach(function(a){return a()})}},[b])}function e(){var a=l(),b=i(function(b,c,d,e){a.current=m(b,c,d,babelHelpers["extends"]({},e,{once:!0}))},[]),c=i(function(){a.current==null?void 0:a.current()},[]);j(function(){return c},[c]);return[b,c]}function m(a,b,c,e){if(a==null)return function(){};b=n(a,b);var f=b.map(function(b){return new(d("WAWebUIListener").Listener)(a,b,function(){(e==null?void 0:e.once)&&g(),c.apply(void 0,arguments)},e)});f.forEach(function(a){a.engage()});var g=function(){f.forEach(function(a){a.disengage()})};return g}function n(a,b){return Array.isArray(b)?d("WAWebUIListener").isEventsType(a)?[b.join(" ")]:b:[b]}function o(a){return Array.isArray(a)?a.join("\0"):a}g.useListener=a;g.useListeners=b;g.useAddListenerOnce=e}),98);
__d("useWAWebEventTargetValue",["WAHash","react","useWAWebListener","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b,e,f){f===void 0&&(f=[]);var g;a==null?g=[]:Array.isArray(a)?g=a.filter(Boolean):g=[a];var h=j(!0),l=c("useWAWebStableCallback")(function(){return e()});a=k(function(){return l()});var m=a[0],n=a[1];d("useWAWebListener").useListeners(g.map(function(a){return{source:a,eventOrEvents:b,callback:function(){n(l())}}}));a=g.map(c("WAHash")).join(" ");i(function(){if(h.current){h.current=!1;return}n(l())},[a,l].concat(f));return m}g["default"]=a}),98);
__d("useWAWebABPropConfigValue",["WAWebABProps","WAWebCmd","useWAWebEventTargetValue"],(function(a,b,c,d,e,f,g){function a(a){var b=c("useWAWebEventTargetValue")(d("WAWebCmd").Cmd,"on_ab_props_update",function(){return d("WAWebABProps").getABPropConfigValue(a)},[a]);return b}g.useABPropConfigValue=a}),98);
__d("useWAWebDevicePixelRatio",["err","once","react"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(){var a=j(function(){return k().getValue()}),b=a[0],c=a[1];i(function(){return k().subscribe(function(a){c(a)})},[]);return b}var k=c("once")(function(){return new l()}),l=function(){function a(){this.$1=new Set()}var b=a.prototype;b.subscribe=function(a){var b=this;if(this.$1.has(a))throw c("err")("Callback can only be added once.");this.$1.add(a);this.$3();return function(){b.$1["delete"](a),b.$3()}};b.getValue=function(){var a;return(a=window.devicePixelRatio)!=null?a:1};b.$3=function(){var a=this;if(this.$1.size===0){this.$2==null?void 0:this.$2();return}if(this.$2!=null)return;var b=matchMedia("(resolution: "+this.getValue()+"dppx)"),c=function(){a.$2==null?void 0:a.$2();var b=a.getValue();a.$1.forEach(function(a){a(b)});a.$3()};b.addListener(c);this.$2=function(){b.removeListener(c),a.$2=null}};return a}();g["default"]=a}),98);
__d("WAWebMessageLargeEmoji.react",["WAWebAssetLoaderDpiChangeDispatch","WAWebClassnames","WAWebConstantsDeprecated","WAWebCopyPasteSelectable.react","WAWebEmoji","WAWebEmoji.react","WAWebEmojiConst","WAWebImg.react","WAWebMessageLargeEmoji.scss","react","stylex","useWAWebABPropConfigValue","useWAWebDevicePixelRatio"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useCallback,m=b.useEffect,n=b.useState;function a(a){var b=a.emoji,e=a.size;e=e===void 0?d("WAWebEmojiConst").LargeEmojiSize.MEDIUM:e;var f=a.animation;f=f===void 0?!1:f;var g=a.element;g=g===void 0?"div":g;var h=a.selectable,j=a.xstyle,o=c("useWAWebDevicePixelRatio")(),p=l(function(){var b=d("WAWebEmoji").EmojiUtil.getGlyphId(a.emoji);return Boolean(b!=null&&d("WAWebEmoji").EmojiUtil.isGlyphCached(b))},[a.emoji]),q=n(p),r=q[0],s=q[1];d("useWAWebABPropConfigValue").useABPropConfigValue("custom_racing_emoji");m(function(){s(p())},[o,p]);q=function(){var a=d("WAWebEmoji").EmojiUtil.getGlyphId(b);a!=null&&d("WAWebEmoji").EmojiUtil.markGlyphCached(a);s(!0)};o=d("WAWebClassnames").classnamesConvertMeToStylexPlease((o={},o[c("WAWebMessageLargeEmoji.scss").medium]=e===d("WAWebEmojiConst").LargeEmojiSize.MEDIUM,o[c("WAWebMessageLargeEmoji.scss").large]=e===d("WAWebEmojiConst").LargeEmojiSize.LARGE,o[c("WAWebMessageLargeEmoji.scss").xlarge]=e===d("WAWebEmojiConst").LargeEmojiSize.XLARGE,o[c("WAWebMessageLargeEmoji.scss").xlarge60]=e===d("WAWebEmojiConst").LargeEmojiSize.XLARGE_60,o));var t;e===d("WAWebEmojiConst").LargeEmojiSize.XLARGE_60?t=160:e===d("WAWebEmojiConst").LargeEmojiSize.XLARGE||c("WAWebAssetLoaderDpiChangeDispatch").currentRes==="high"?t=64:t=40;e=d("WAWebEmoji").EmojiUtil.getGlyphPath(b,t);if(e==null)return null;if(r&&f){t=g;return k.jsxs(t,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMessageLargeEmoji.scss").animation,(i||(i=c("stylex")))(j)),children:[k.jsx(d("WAWebCopyPasteSelectable.react").SelectableImg,{alt:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMessageLargeEmoji.scss").highRes,o),draggable:!1,plainText:b,selectable:Boolean(h),src:c("WAWebConstantsDeprecated").ONE_BY_ONE_TRANS_GIF}),k.jsx(c("WAWebImg.react"),{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMessageLargeEmoji.scss").highRes,o,c("WAWebMessageLargeEmoji.scss").heartbeat),draggable:!1,selectable:!1,src:e})]})}f=r?void 0:k.jsx(c("WAWebEmoji.react"),{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMessageLargeEmoji.scss").lowRes,o),emoji:b,xstyle:j,selectable:h},"low-res");t=k.jsx(c("WAWebEmoji.react"),{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((g={},g[c("WAWebMessageLargeEmoji.scss").invisible]=!r,g[c("WAWebMessageLargeEmoji.scss").highRes]=!0,g[o]=!0,g)),emoji:b,xstyle:j,selectable:h,src:e,onLoad:q},"high-res");return k.jsxs("span",{className:c("WAWebMessageLargeEmoji.scss").wrapper,children:[f,t]})}a.displayName=a.name+" [from "+f.id+"]";g.SIZE=d("WAWebEmojiConst").LargeEmojiSize;g.LargeEmoji=a}),98);
__d("WAWebModelStorage",["WAWebModelStorageInitialize","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebModelStorageInitialize").initializeWithoutGKs(a),yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.init()});return h.apply(this,arguments)}Object.keys(d("WAWebModelStorageInitialize")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("WAWebModelStorageInitialize")[a]});g.initialize=a}),98);
__d("WAWebMutationObserver",[],(function(a,b,c,d,e,f){function a(a,b,c){var d=new MutationObserver(c);d.observe(a,b);return function(){d.disconnect()}}f.observeMutations=a}),66);
__d("WAWebNewsletterMsgEditUtils",["WAWebMsgKey","WAWebMsgType"],(function(a,b,c,d,e,f,g){function a(a){return babelHelpers["extends"]({},a,{type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"message_edit",protocolMessageKey:a.id,latestEditMsgKey:a.id,latestEditSenderTimestampMs:a.t})}function b(a,b){var e=a.id.clone(),f=new(c("WAWebMsgKey"))({remote:a.id.remote,fromMe:a.id.fromMe,id:c("WAWebMsgKey").newId_DEPRECATED()});return babelHelpers["extends"]({},a,{id:f,type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.Protocol,subtype:"message_edit",editMsgType:a.type,protocolMessageKey:e,latestEditMsgKey:f,latestEditSenderTimestampMs:b.latestEditSenderTimestampMs})}g.mapMsgToEditProtocolMsgLegacy=a;g.mapMsgToEditProtocolMsg=b}),98);
__d("WAWebNewsletterViewModeUtils",["WAWebNewsletterGatingUtils","WAWebViewModeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WAWebNewsletterGatingUtils").shouldSetViewModeForNewsletterTombstone()?d("WAWebViewModeUtils").ViewModeType.NEWSLETTER_TOMBSTONE:void 0}g.getRevokedNewsletterMsgViewMode=a}),98);
__d("WAWebNewsletterMsgStanzaAdapters",["WAAckLevel","WAWebMsgKey","WAWebMsgType","WAWebNewsletterMsgEditUtils","WAWebNewsletterViewModeUtils","WAWebUserPrefsMeUser","err"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(e.addOnParentKey==null)throw c("err")("Reaction message without parent");return{id:a,reactionParentKey:e.addOnParentKey,type:d("WAWebMsgType").MSG_TYPE.REACTION,kind:d("WAWebMsgType").MsgKind.ReactionDecrypted,t:b.t,from:b.from,to:b.to,serverId:b.serverId,isNewMsg:!1,ack:d("WAAckLevel").ACK.SENT,read:!1,reactionText:b.reactionCode,reactionTimestamp:b.t*1e3}}function b(a,b,e){if(e.addOnParentKey==null)throw c("err")("Reaction message without parent");return{id:a,t:b.t,from:b.from,to:b.to,serverId:b.serverId,isNewMsg:!1,ack:d("WAAckLevel").ACK.SENT,type:d("WAWebMsgType").MSG_TYPE.POLL_UPDATE,kind:d("WAWebMsgType").MsgKind.PollVoteDecrypted,subtype:"poll_vote",pollUpdateParentKey:e.addOnParentKey,selectedOptionLocalIds:(a=e.pollVotesAsLocalIds)!=null?a:[],senderTimestampMs:b.t*1e3,read:!1}}function e(a){var b=a.msgKey,e=a.msg,f=a.msgContext,g=a.baseMsgData;a=a.parsingContext;if(a==="history"){return{id:new(c("WAWebMsgKey"))({remote:e.from,fromMe:e.isSender,id:e.id}),from:e.from,to:e.isSender?e.from:d("WAWebUserPrefsMeUser").getMeUser(),t:(a=f.metaOriginalMsgT)!=null?a:e.t,serverId:e.serverId,lastUpdateFromServerTs:(a=f.lastUpdateFromServerTs)!=null?a:void 0,type:"revoked",kind:d("WAWebMsgType").MsgKind.RevokedMessage,revokeSender:e.from,subtype:"admin"}}return babelHelpers["extends"]({},g,{serverId:e.serverId,id:new(c("WAWebMsgKey"))({remote:e.from,fromMe:e.isSender,id:c("WAWebMsgKey").newId_DEPRECATED()}),type:d("WAWebMsgType").MSG_TYPE.PROTOCOL,kind:d("WAWebMsgType").MsgKind.ProtocolRevoke,subtype:"admin_revoke",protocolMessageKey:b,viewMode:d("WAWebNewsletterViewModeUtils").getRevokedNewsletterMsgViewMode()})}function f(a,b,c){return b!=="history"?d("WAWebNewsletterMsgEditUtils").mapMsgToEditProtocolMsg(a,{latestEditSenderTimestampMs:c.latestEditSenderTimestampMs}):a}g.mapReactionMsgStanza=a;g.mapPollVoteMsgStanza=b;g.mapRevokeMsgStanza=e;g.mapEditMsgStanza=f}),98);
__d("WAWebNewsletterBackendMsgUtils",["WAAckLevel","WATimeUtils","WAWebE2EProtoParser","WAWebMsgKey","WAWebMsgType","WAWebNewsletterFutureProofUtils","WAWebNewsletterMsgStanzaAdapters","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){function h(a,b){var e=a.msg;a=a.msgContext;var f=new(c("WAWebMsgKey"))({remote:e.from,fromMe:e.isSender,id:e.id});switch(e.type){case"NewsletterReaction":case"NewsletterReactionRevoke":return d("WAWebNewsletterMsgStanzaAdapters").mapReactionMsgStanza(f,e,a);case"NewsletterPollVote":return d("WAWebNewsletterMsgStanzaAdapters").mapPollVoteMsgStanza(f,e,a)}var g=j(f,e);if(e.type==="NewsletterRevoke")return d("WAWebNewsletterMsgStanzaAdapters").mapRevokeMsgStanza({msgKey:f,msg:e,msgContext:a,baseMsgData:g,parsingContext:b});var h=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsE2E.pb").MessageSpec,e.payload);h=d("WAWebE2EProtoParser").parseMsgProto(h,g,b);g=i(babelHelpers["extends"]({},h,{isNewMsg:a.isNewMsg,viewCount:(g=a.viewCount)!=null?g:void 0,hasReaction:!!a.hasReaction,latestEditSenderTimestampMs:a.latestEditSenderTimestampMs,lastUpdateFromServerTs:(g=a.lastUpdateFromServerTs)!=null?g:void 0,latestEditMsgKey:a.isEdited===!0?f:void 0,serverId:e.serverId}));d("WAWebNewsletterFutureProofUtils").isMsgSupported(h)||(g.type=d("WAWebMsgType").MSG_TYPE.UNKNOWN,g.kind=d("WAWebMsgType").MsgKind.Unknown,g.futureproofType=h.type,g.futureproofSubtype=h.subtype);switch(e.type){case"NewsletterEdit":return d("WAWebNewsletterMsgStanzaAdapters").mapEditMsgStanza(g,b,a);case"NewsletterPollCreation":case"NewsletterText":case"NewsletterMedia":return g;default:e.type;throw c("err")("unreachable code")}}function i(a){a.streamingSidecar=null;a.mediaKey=null;a.mediaKeyTimestamp=null;return a}function a(a,b,c,e){c===void 0&&(c=!1);var f=a.newsletterMessageHistoryContent,g=a.id,i=a.t,j=a.serverId;if(f==null||g==null||i==null)return null;var k=a.isSender==="true";g={id:g,from:b,isSender:k,to:k?b:d("WAWebUserPrefsMeUser").getMeUser(),t:i,serverId:j,offline:null};b=(k=a.newsletterMessageOriginalTimestampMixin)==null?void 0:k.metaOriginalMsgT;k={hasReaction:c,lastUpdateFromServerTs:e,viewCount:(j=a.newsletterViewsCountMixin)==null?void 0:j.viewsCountCount,isEdited:f.name==="NewsletterEdit",metaOriginalMsgT:b};c="history";switch(f.name){case"NewsletterEdit":j=(e=a.newsletterMessageLastEditTimestampMixin)==null?void 0:e.metaMsgEditT;a=j!=null?d("WATimeUtils").castToMillisTime(j):void 0;b=(e=b)!=null?e:i;return h({msg:babelHelpers["extends"]({},g,{type:f.name,t:b,payload:f.value.newsletterTextOrMediaMixinGroup.value.plaintextPayloadMixin.elementValue,msgEditT:j,msgOriginalT:i}),msgContext:babelHelpers["extends"]({},k,{latestEditSenderTimestampMs:a})},c);case"NewsletterText":return h({msg:babelHelpers["extends"]({},g,{payload:f.value.plaintextPayloadMixin.elementValue,type:f.name}),msgContext:k},c);case"NewsletterPollCreation":return h({msg:babelHelpers["extends"]({},g,{payload:f.value.plaintextPayloadMixin.elementValue,type:f.name}),msgContext:k},c);case"NewsletterMedia":return h({msg:babelHelpers["extends"]({},g,{payload:f.value.plaintextPayloadMixin.elementValue,type:f.name}),msgContext:k},c);case"NewsletterRevoke":return h({msg:babelHelpers["extends"]({},g,{type:f.name}),msgContext:k},c);default:f.name;return null}}function j(a,b){return{ack:d("WAAckLevel").ACK.SENT,from:b.from,t:b.t,to:b.to,id:a,type:d("WAWebMsgType").MSG_TYPE.UNKNOWN,count:null,invis:!1}}g.mapMsgStanzaToMsgData=h;g.mapNewsletterMsgToMsgData=a}),98);
__d("WAWebNewsletterPollsVotesUtils",["WABase64","WAHex","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield self.crypto.subtle.digest("SHA-256",new TextEncoder().encode(a)));return d("WAHex").toHex(new Uint8Array(a))});return h.apply(this,arguments)}function c(a){return d("WAHex").toHex(a)}function e(a){return d("WAHex").toHex(new Uint8Array(d("WABase64").decodeB64(a))).toUpperCase()}g.getPollOptionHash=a;g.bufferToHex=c;g.base64ToHex=e}),98);
__d("WAWebSchemaReadReceipt",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebOffdStorageUtils").getStorage().add("read-receipt").version(d("WAWebOffdStorageUtils").getStorage().versions.version(0),[i("id"),h("externalIds")])["delete"](d("WAWebOffdStorageUtils").getStorage().versions.version(3)).view(function(a){return a})}function b(){return d("WAWebOffdStorageUtils").getStorage().table("read-receipt")}g.addTable=a;g.getTable=b}),98);
__d("WAWebOffdStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebOffdStorageUtils","WAWebSchemaDanglingReceipt","WAWebSchemaPeerReadReceipt","WAWebSchemaPendingDeviceSync","WAWebSchemaReadReceipt","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}f=4;var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebOffdStorageUtils").createStorage(),d("WAWebSchemaReadReceipt").addTable(),d("WAWebSchemaDanglingReceipt").addTable(),d("WAWebSchemaPeerReadReceipt").addTable(),d("WAWebSchemaPendingDeviceSync").addTable(),i=d("WAWebOffdStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize offd storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebOffdStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebOffdStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}g.versionToRollout=f;g.initialize=a;g.destroy=e}),98);
__d("WAWebOnlineDanglingReceipts",["Promise","WAAbortError","WALogger","WATimeUtils","WAWebABProps","WAWebCommsSendPing","WAWebNetworkStatus","WAWebSchemaDanglingReceipt","WAWebSendReceiptJobCommon","WAWebWamOfflineResumeReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush "," receipts"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush due to offline."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: failed to send ping"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: starting clean receipts"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: starting sending ping"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: skip due to empty receipts."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: start to clean online dangling receipts due to timeout"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOnlineDanglingReceipts: starting clean receipts"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOnlineDanglingReceipts: starting sending ping"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOnlineDanglingReceipts: skip due to empty receipts."]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOnlineDanglingReceipts: skip due to offline."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: sending online dangling grouped receipts: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: sendAndClearOnlineDanglingReceipts: aborting receipts to signal.aborted"]);u=function(){return a};return a}var v=new Map(),w=null,x=120*1e3;function a(a,b,c){v.has(a)||v.set(a,new Map());a=v.get(a);(a==null?void 0:a.has(b))||(a==null?void 0:a.set(b,[]));a==null?void 0:(a=a.get(b))==null?void 0:a.push(c);w||(w=self.setTimeout(function(){void C(),w=null},x))}function y(){return v.size>0&&d("WAWebABProps").getABPropConfigValue("web_pre_acks_m3_receipts_enabled")}function e(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.aborted&&d("WAWebABProps").getABPropConfigValue("web_abort_preacks_on_disconnect_enabled")){d("WALogger").LOG(u());throw new(d("WAAbortError").AbortError)()}var c=String(d("WATimeUtils").unixTime()),e=0;a=Array.from(v.keys()).map(function(a){var b=v.get(a);if(!b)return;b.forEach(function(a){e+=a.length});d("WALogger").LOG(t(),b.size);return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:c,groupedReceipt:b})});yield (h||(h=b("Promise"))).all(a);d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreackCount(e,!0);void A()});return z.apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!c("WAWebNetworkStatus").online){d("WALogger").LOG(s());return(h||(h=b("Promise"))).resolve()}if(v.size===0){d("WALogger").LOG(r());return(h||(h=b("Promise"))).resolve()}d("WALogger").LOG(q());yield d("WAWebCommsSendPing").blockSendPing();d("WALogger").LOG(p());v.clear()});return B.apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(o());if(v.size===0){d("WALogger").LOG(n());return(h||(h=b("Promise"))).resolve()}if(!c("WAWebNetworkStatus").online)return E();d("WALogger").LOG(m());try{yield d("WAWebCommsSendPing").blockSendPing(),d("WALogger").LOG(l()),v.clear()}catch(a){d("WALogger").LOG(k()),void E()}});return D.apply(this,arguments)}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!y()||!d("WAWebABProps").getABPropConfigValue("web_pre_acks_m3_enabled"))return;d("WALogger").LOG(j());var a=[];v.forEach(function(b,c){b.forEach(function(b,d){b.forEach(function(b){a.push({from:String(c),author:String(d),externalId:b})})})});a.length>0&&(d("WALogger").LOG(i(),a.length),yield d("WAWebSchemaDanglingReceipt").getTable().create({receipts:a,acks:[]}),v.clear())});return F.apply(this,arguments)}g.addOnlineDanglingReceipts=a;g.hasOnlineDanglingReceipts=y;g.sendAndClearOnlineDanglingReceipts=e}),98);
__d("WAWebPill.react",["WAWebFlex.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={pill:{display:"x3nfvp2",boxSizing:"x9f619",height:"x17rw0jw",fontSize:"x190qgfh",fontWeight:"x1xlr1w8",borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6",$$css:!0},gray:{color:"xbtce8p",backgroundColor:"xuvarr2",$$css:!0},green:{color:"xbtce8p",backgroundColor:"x13ase7j",$$css:!0},yellow:{color:"xbtce8p",backgroundColor:"x18um00n",$$css:!0},blue:{color:"xbtce8p",backgroundColor:"x4e28k3",$$css:!0}};function l(a){var b=a.children,e=a.color;e=e===void 0?"gray":e;a=a.inline;return j.jsx(d("WAWebFlex.react").FlexRow,{align:"center",className:(i||(i=c("stylex")))([k.pill,e?k[e]:null,d("WAWebUISpacing").uiPadding.vert4,d("WAWebUISpacing").uiPadding.horiz8,d("WAWebUISpacing").uiMargin.vertAuto,a===!0?d("WAWebUISpacing").uiMargin.start8:null]),children:b})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.children,c=a.pillText;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","pillText"]);return j.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",children:[b,j.jsx(l,babelHelpers["extends"]({},a,{inline:b!=null||a.inline,children:c}))]})}a.displayName=a.name+" [from "+f.id+"]";g.Pill=l;g.LabelPill=a}),98);
__d("WAWebPopoverPosition",["$InternalEnum","WAWebL10N"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["Top","End","Bottom","Start"]),i=b("$InternalEnum").Mirrored(["Center","Start","End"]);function j(a,b,c){c===void 0&&(c=0);return a.top-b.height-c}function k(a,b){b===void 0&&(b=0);return a.right+b}function l(a,b){b===void 0&&(b=0);return a.bottom+b}function m(a,b,c){c===void 0&&(c=0);return a.left-b.width-c}function n(a,b){return a.left+a.width/2-b.width/2}function o(a,b){return a.top+a.height/2-b.height/2}function p(a,b,d,e,f,g){var p,q,r;f===void 0&&(f=0);p=(p=g==null?void 0:g.height)!=null?p:0;q=(q=g==null?void 0:g.width)!=null?q:0;r=(r=g==null?void 0:g.offset)!=null?r:0;var s,t,u=1;f=f+p;var v=d;c("WAWebL10N").isRTL()&&(d===h.Start?v=h.End:d===h.End&&(v=h.Start));d={coords:{top:0,left:0},alignment:e,position:v,arrowCoords:null};var w=0;g!=null&&(e===i.Start||e===i.End)&&((v===h.Top||v===h.Bottom)&&a.width<r*2+q?w=r+q/2-a.width/2:(v===h.Start||v===h.End)&&a.height<r*2+q&&(w=r+q/2-a.height/2),e===i.Start&&(w=-w));v===h.Top?(d.coords.top=j(a,b,f),t="100%"):v===h.End?(d.coords.left=k(a,f),s=-p+u):v===h.Bottom?(d.coords.top=l(a,f),t=-p+u):v===h.Start&&(d.coords.left=m(a,b,f),s="100%");e===i.Center?v===h.Top||v===h.Bottom?(s="calc(50% - "+q/2+"px)",d.coords.left=n(a,b)):(t="calc(50% - "+q/2+"px)",d.coords.top=o(a,b)):e===i.Start?v===h.Top||v===h.Bottom?(s=r,d.coords.left=a.left+w):(t=r,d.coords.top=a.top+w):e===i.End&&(v===h.Top||v===h.Bottom?(s="calc(100% - "+(r+q)+"px)",d.coords.left=a.right-b.width+w):(t="calc(100% - "+(r+q)+"px)",d.coords.top=a.bottom-b.height+w));d.coords.left<0?v===h.Top||v===h.Bottom?(d.alignment=i.Start,d.coords.left=a.left+w,s=r):(d.position=h.End,d.coords.left=k(a,f),s="0px"):d.coords.left+b.width>window.innerWidth&&(v===h.Top||v===h.Bottom?(d.alignment=i.End,d.coords.left=a.right-b.width+w,s="calc(100% - "+q+"px)"):(d.position=h.Start,d.coords.left=m(a,b,f),s="100%"));d.coords.top<0?v===h.Start||v===h.End?(d.alignment=i.Start,d.coords.top=a.top+w,t=r):(d.position=h.Bottom,d.coords.top=l(a,f),t="0px"):d.coords.top+b.height>window.innerHeight&&(v===h.Start||v===h.End?(d.alignment=i.End,d.coords.top=a.bottom-b.height+w,t="calc(100% - "+r+"px)"):(d.position=h.Top,d.coords.top=j(a,b,f),t="100%"));g!=null&&t!=null&&s!=null&&(d.arrowCoords={top:t,left:s});return d}function a(a,b,c,d,e,f){e===void 0&&(e=0);var g;a instanceof HTMLElement?g=a.getBoundingClientRect():g={top:a.y,right:a.x,bottom:a.y,left:a.x,width:0,height:0,x:a.x,y:a.y};return p(g,b.getBoundingClientRect(),c,d,e,f)}function d(a){var b=a.position;a=a.alignment;var c="left",d="top";(b===h.Top||b===h.Bottom)&&(b===h.Top?d="bottom":d="top",a===i.Start?c="left":a===i.End?c="right":a===i.Center&&(c="center"));(b===h.Start||b===h.End)&&(b===h.Start?c="right":c="left",a===i.Start?d="top":a===i.End?d="bottom":a===i.Center&&(d="center"));return c+" "+d}g.PopoverPosition=h;g.PopoverAlignment=i;g.getFixedElementPosition=a;g.getDefaultTransformOrigin=d}),98);
__d("WAWebTriangle.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||c("react"),k=Math.sqrt(2),l={arrow:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",backgroundColor:"xgcd1z6",borderTopColor:"xjgx3p0",borderEndColor:"xaorda9",borderBottomColor:"xcigvqi",borderStartColor:"x5diq61",borderTopWidth:"xiu3vjd",borderEndWidth:"x9r96fe",borderBottomWidth:"x1y07hx1",borderStartWidth:"x1rj37im",borderTopStyle:"x1u71dlw",borderEndStyle:"x1xl6nxh",borderBottomStyle:"xr2j6r5",borderStartStyle:"xffnfpy",borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",display:"x1lliihq",transformOrigin:"x1g0ag68",boxSizing:"x9f619",$$css:!0},arrowUp:{transform:"x1dvvsi6",$$css:!0},arrowDown:{transform:"x19gryod",$$css:!0},arrowLeft:{transform:"x1koo3bh",$$css:!0},arrowRight:{transform:"xz03xr6",$$css:!0}};function a(a){var b=a.borderRadius;b=b===void 0?"4px":b;var d=a.direction;d=d===void 0?"down":d;var e=a.width;a=a.xstyle;var f=d==="up"||d==="down"?{width:e+"px",height:e/2+"px"}:{height:e+"px",width:e/2+"px"},g;switch(d){case"up":g=l.arrowUp;break;case"down":g=l.arrowDown;break;case"left":g=l.arrowLeft;break;case"right":g=l.arrowRight;break}return j.jsx("div",{style:f,className:"x1n2onr6 x6ikm8r x10wlt62",children:j.jsx("div",{style:{width:e/k+"px",height:e/k+"px",borderBottomLeftRadius:b},className:(i||(i=c("stylex")))(l.arrow,g,a)})})}a.displayName=a.name+" [from "+f.id+"]";g.Triangle=a}),98);
__d("WAWebPopoverArrow.react",["WAWebPopoverPosition","WAWebTriangle.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.coords,c=a.popoverPosition,e=a.width;a=a.xstyle;var f;switch(c){case d("WAWebPopoverPosition").PopoverPosition.Top:f="down";break;case d("WAWebPopoverPosition").PopoverPosition.Bottom:f="up";break;case d("WAWebPopoverPosition").PopoverPosition.Start:f="right";break;case d("WAWebPopoverPosition").PopoverPosition.End:f="left";break}return i.jsx("div",{className:"x10l6tqk",style:b,children:i.jsx(d("WAWebTriangle.react").Triangle,{width:e,direction:f,xstyle:a})})}a.displayName=a.name+" [from "+f.id+"]";g.PopoverAlignment=d("WAWebPopoverPosition").PopoverAlignment;g.PopoverPosition=d("WAWebPopoverPosition").PopoverPosition;g.PopoverArrow=a}),98);
__d("WAWebPopoverContext.react",["react"],(function(a,b,c,d,e,f,g){var h,i;d=i||d("react");var j=h||(h=c("react"));c=d.createContext;var k=d.useContext,l=d.useMemo,m=d.useRef,n=c(null);function a(){return k(n)}function b(){return m()}function e(a){var b,c=a.popover,d=a.targetRef,e=babelHelpers.objectWithoutPropertiesLoose(a,["popover","targetRef"]);a=m();var f=(b=e==null?void 0:e.controllerRef)!=null?b:a;b=l(function(){return babelHelpers["extends"]({targetRef:d},e,{controllerRef:f})},[d,e,f]);return c!=null?j.jsx(n.Provider,{value:b,children:c}):null}e.displayName=e.name+" [from "+f.id+"]";g.useWDSPopoverControllerContext=a;g.useWDSPopoverControllerRef=b;g.WDSPopoverController=e}),98);
__d("WAWebUimUie.react",["WAWebUim","WAWebUimContext","react","useWAWebOnUnmount","useWAWebStableCallback","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.cloneElement,l=b.useCallback,m=b.useEffect,n=b.useImperativeHandle,o=b.useMemo,p=b.useRef,q=null;e=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.uimState,f=e===void 0?d("WAWebUim").UIMState.ACTIVE:e;e=a.requestRecentFocusOnUnmount;var g=e===void 0?!0:e;e=a.popable;var h=e===void 0?!1:e;e=a.escapable;var i=e===void 0?!1:e,q=a.displayName,s=a.children;e=a.dismissOnWindowResize;var t=e===void 0?!1:e,u=c("useWAWebUIM")(),v=r(a.requestFocus),w=c("useWAWebStableCallback")(a.requestDismiss),x=p(null),y=l(function(){var a=x.current;if(a==null)return;return a instanceof HTMLElement?a:a.getElement==null?void 0:a.getElement()},[]),z=o(function(){var a,b={displayName:q,popable:h,escapable:i,uimState:f,requestFocus:v,requestDismiss:w,getNode:y,dismissOnWindowResize:t};return(a=u==null?void 0:u.branch(b))!=null?a:new(d("WAWebUim").UIM)(b)},[]);m(function(){z.setState(f)},[f,z]);c("useWAWebOnUnmount")(function(){z.pop(d("WAWebUim").DismissReason.LIFECYCLE,g)});n(b,function(){return{activate:function(){z.activate()},getElement:y}});if(!s)return null;e=function(a){var b;b=(b=a==null?void 0:a.getComponent==null?void 0:a.getComponent())!=null?b:a;x.current=b;a=s.ref;if(!a)return;typeof a==="function"?a(b):a.current=b};a=k(s,{ref:e});return j.jsx(c("WAWebUimContext").Provider,{value:z,children:a})}a.displayName=a.name+" [from "+f.id+"]";function r(a){var b=c("useWAWebUnmountSignal")(),d=p(!1),e=p(null),f=function(){if(!a)return;q&&self.clearTimeout(q);e.current=q=self.setTimeout(function(){a(),e.current=q=null},0)},g=c("useWAWebStableCallback")(function(){a&&!b.aborted?f():d.current=!0});m(function(){d.current&&f();return function(){q&&e.current===q&&(self.clearTimeout(q),q=null)}},[]);return g}g.UIE=e}),98);
__d("WAWebTransitions",["velocity-animate"],(function(a,b,c,d,e,f,g){var h=[.1,.82,.25,1],i=[.69,0,.79,.14];b=[.84,.07,.93,.46];function a(){c("velocity-animate").RegisterEffect("attach.Up",{defaultDuration:300,calls:[[{opacity:[1,0],translateY:["0%","150%"],scaleX:[1,.3],scaleY:[1,.3]},1,{easing:[300,22]}]]}),c("velocity-animate").RegisterEffect("attach.Down",{defaultDuration:200,easing:i,calls:[[{opacity:[0,1],translateY:["100%","0%"],scaleX:[.3,1],scaleY:[.3,1]},1,{easing:[.33,0,.39,.91]}]]}),c("velocity-animate").RegisterEffect("dropdown.Down",{defaultDuration:200,easing:h,calls:[[{opacity:[1,0],translateY:["0%","-15px"]},1,{easing:h}]]})}d={pop:{duration:200,easing:b,enter:{props:{scaleX:[1,.5],scaleY:[1,.5],opacity:[1,0]}},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]}}},slide:{duration:200,easing:h,enter:{props:"slideDown"},leave:{props:"slideUp"}},scale:{duration:500,easing:h,enter:{props:{scaleX:[1,0],scaleY:[1,0]}},leave:{props:{scaleX:[0,1],scaleY:[0,1]}}},fade:{duration:200,easing:h,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},messageComposer:{duration:300,easing:"easeInOut",enter:{props:{opacity:[1,0],translateX:[0,-100]}},leave:{props:{opacity:[0,1],translateX:[-100,0]}}},pttComposer:{duration:300,easing:"easeInOut",enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"fade-fast":{easing:"ease",enter:{props:{opacity:[1,0]},duration:150},leave:{props:{opacity:[0,1]},duration:100}},"ptt-out-of-chat":{enter:{props:{translateY:["-100%","0%"],opacity:[1,0]},duration:250,delay:150,easing:"ease"},leave:{props:{translateY:["0%","-100%"],opacity:[0,1]},duration:250,delay:150,easing:"ease"}},fade_sifo:{enter:{props:{opacity:[1,0]},duration:250},leave:{props:{opacity:[0,1]},duration:100}},capture:{enter:{props:{opacity:[1,0]},duration:350},leave:[{selector:"[data-animate-capture-snapshot]",props:"transition.bounceDownOut",duration:700}]},butterbar:{enter:{props:"slideDown",easing:h,duration:700},leave:{props:"slideUp",easing:i,duration:350}},modal:{enter:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[1,0]},duration:300,easing:[.19,.73,.28,1]},{selector:"[data-animate-modal-popup]",props:{scaleX:[1,0],scaleY:[1,0],opacity:[1,0]},easing:[.19,.73,.28,1],delay:180,duration:200},{selector:"[data-animate-modal-popup]",props:{opacity:[0,0]},duration:180}],leave:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[0,1]},duration:300,easing:i,delay:100},{selector:"[data-animate-modal-popup]",props:{scaleX:[0,1],scaleY:[0,1]},easing:i,duration:200}]},"modal-flow":{enter:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[1,0]},duration:300,easing:[.19,.73,.28,1]},{selector:"[data-animate-modal-popup]",props:{scaleX:[1,0],scaleY:[1,0],opacity:[1,1]},easing:[.19,.73,.28,1],delay:180,duration:200},{selector:"[data-animate-modal-popup]",props:{opacity:[0,0]},duration:180}],leave:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[0,1]},duration:300,easing:i,delay:100},{selector:"[data-animate-modal-popup]",props:{scaleX:[0,1],scaleY:[0,1]},easing:i,duration:200}]},"flow-transition-modal-push":{duration:300,easing:h,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"flow-transition-modal-pop":{duration:300,easing:h,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"flow-transition-box-size-drawer-push":{duration:300,easing:h,enter:[{selector:"[data-animate-modal-body]",props:{translateX:["0%","100%"]}}],leave:[{props:{background:["transparent","transparent"]}},{selector:"[data-animate-modal-popup]",props:{background:["transparent","transparent"],boxShadow:["none","none"]}},{selector:"[data-animate-modal-body]",props:{translateX:["-100%","0%"]}}]},"flow-transition-box-size-drawer-pop":{duration:300,easing:h,enter:[{selector:"[data-animate-modal-body]",props:{translateX:["0%","-100%"]}}],leave:[{props:{background:["transparent","transparent"]}},{selector:"[data-animate-modal-popup]",props:{background:["transparent","transparent"],boxShadow:["none","none"]}},{selector:"[data-animate-modal-body]",props:{translateX:["100%","0%"]}}]},"flow-transition-drawer-push":{duration:300,easing:h,enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"flow-transition-drawer-pop":{duration:300,easing:h,enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["100%","0%"]}}},"drawer-left":{duration:300,easing:h,enter:[{props:{translateX:["0%","-100%"]}},{selector:"[data-animate-drawer-title]",props:{translateX:[0,-50],opacity:[1,0]},duration:500,easing:"easeOut"}],leave:{props:{translateX:["-100%","0%"]}}},"drawer-left-rtl":{duration:300,easing:h,enter:[{props:{translateX:["0%","100%"]}},{selector:"[data-animate-drawer-title]",props:{translateX:[0,50],opacity:[1,0]},duration:500,easing:"easeOut"}],leave:{props:{translateX:["100%","0%"]}}},dropdown:{duration:300,easing:h,enter:[{selector:"[data-animate-dropdown-item]",props:"dropdown.Down",delay:50,duration:375,stagger:25,drag:!0},{props:{scale:[1,0]}},{props:{opacity:[1,0]},duration:100}],leave:{props:{scaleX:[0,1],scaleY:[0,1],opacity:[0,1]}}},"dropdown-picker":{duration:300,easing:h,enter:[{selector:"[data-animate-dropdown-item]",props:{opacity:[1,0]},delay:50,duration:200},{selector:"[data-animate-dropdown-nib]",props:{opacity:[1,0],rotateZ:["45deg"],translateY:["0%","-100%"]}},{props:{scale:[1,0]}},{props:{opacity:[1,0]},duration:100}],leave:[{selector:"[data-animate-dropdown-item]",props:{opacity:[1,0]},duration:100},{selector:"[data-animate-dropdown-nib]",props:{opacity:[1,0]},duration:150},{props:{scaleX:[0,1],scaleY:[0,1],opacity:[0,1]}}]},"profile-viewer":{duration:500,easing:[.1,1.03,.28,.99],leave:{delay:400,props:{opacity:[0,1]}}},"media-viewer":{duration:300,easing:[.1,1.03,.28,.99],leave:{selector:"[data-animate-media-viewer]",props:{opacity:[0,1]}}},"status-quoted-msg":{enter:{props:{translateY:["0%","100%"],opacity:[1,0]},duration:200,easing:h},leave:{props:{translateY:["100%","0%"],opacity:[0,1]},duration:200,easing:i}},"status-quick-reply":{enter:{props:{opacity:[1,0]},duration:300,easing:h},leave:{props:{opacity:[0,1]},duration:200,easing:i}},"status-panel":{enter:{props:{translateY:["0%","100%"],opacity:[1,0]},duration:300,easing:h},leave:{props:{translateY:["100%","0%"],opacity:[0,1]},duration:200,easing:i}},"status-modal":{easing:[.55,.085,.68,.53],enter:{duration:100,selector:"[data-animate-status-modal-background]",props:{opacity:[1,0]}},leave:{duration:100,selector:"[data-animate-status-modal-background]",props:{opacity:[0,1]}}},"quoted-status-modal":{easing:[.55,.085,.68,.53],enter:{duration:100,selector:"[data-animate-status-viewer]",props:{opacity:[1,0]}},leave:{duration:100,selector:"[data-animate-status-viewer]",props:{opacity:[0,1]}}},"status-player":{easing:[.55,.085,.68,.53],enter:{duration:200,props:{opacity:[1,0]}},leave:{duration:200,props:{opacity:[0,1]}}},"status-media-loading":{duration:300,easing:i,leave:{props:{opacity:[0,1]}}},menu:{enter:{selector:"[data-animate-menu-icons-item]",props:"attach.Up",duration:700,stagger:30,drag:!1},leave:{selector:"[data-animate-menu-icons-item]",props:"attach.Down",duration:200,stagger:30}},"slide-left":{duration:300,easing:h,enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["100%","0%"]}}},"slide-left-rtl":{duration:300,easing:h,enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"slide-forward":{duration:200,easing:[.19,.93,.18,.99],enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"slide-back":{duration:200,easing:[.19,.93,.18,.99],enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["100%","0%"]}}},"slide-down-date":{duration:300,enter:{props:{translateY:["0%","-130%"],opacity:[1,0]},easing:h},leave:{props:{translateY:["-130%","0%"],opacity:[0,1]},easing:i}},"pop-fast-reverse":{duration:75,easing:[.14,.62,.33,.9],enter:[{selector:"[data-js-context-icon]",props:{translateX:["0%","-100%"]}},{props:{opacity:[1,.5]}}],leave:[{selector:"[data-js-context-icon]",props:{translateX:["-100%","0%"]}},{props:{opacity:[0,1]}}]},"pop-fast":{duration:75,easing:[.14,.62,.33,.9],enter:[{selector:"[data-js-context-icon]",props:{translateX:["0%","100%"]}},{props:{opacity:[1,.5]}}],leave:[{selector:"[data-js-context-icon]",props:{translateX:["100%","0%"]}},{props:{opacity:[0,1]}}]},"pop-fast-chat":{duration:75,easing:[.14,.62,.33,.9],enter:[{props:{width:["20px","5px"],opacity:[1,.5]}}],leave:[{props:{width:["5px","20px"],opacity:[0,1]}}]},"toast-transition":{duration:300,easing:h,cleanOnComplete:!0,enter:{props:{translateY:["0%","100%"],opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"slide-up-down":{duration:300,easing:h,enter:{props:{translateY:["0%","100%"]}},leave:{props:{translateY:["100%","0%"]}}},"slide-up-down-footer":{duration:200,easing:h,enter:[{props:{translateY:["0%","100%"]}},{selector:"[data-animate-btn]",props:{opacity:[1,0],scale:[1,0]},delay:200,duration:300}],leave:[{props:{translateY:["100%","0%"]},delay:200},{selector:"[data-animate-btn]",props:{opacity:[0,1],scale:[.6,1]},duration:200}]},"slide-up":{duration:300,easing:h,enter:[{props:{translateY:"100%",translateZ:0},duration:1},{props:{translateY:"0%",translateZ:0},delay:1}],leave:{props:{translateY:"100%"}}},"emoji-search-slide-away":{duration:300,enter:{easing:"easeOutCubic",props:{translateY:["0%","-100%"]}},leave:{easing:"easeInCubic",props:{translateY:["-100%","0%"]}}},"emoji-search-slide-away-fast":{duration:80,enter:{easing:"easeOutCubic",props:{translateY:["0%","-100%"]}},leave:{easing:"easeInCubic",props:{translateY:["-100%","0%"]}}},none:{},btn:{duration:300,easing:h,enter:{props:{scale:[1,0],opacity:[1,0]}},leave:{props:{scale:[0,1],opacity:[0,1]}}},pop_delay:{duration:300,enter:[{props:{scale:[1,0],opacity:[1,0]},delay:500,easing:h}],leave:{props:"transition.expandOut",easing:i}},"delay-leave":{duration:1,enter:{props:{opacity:[1,1]}},leave:{props:{opacity:[1,1]},delay:300}},"media-caption":{enter:[{props:{opacity:[0,0],translateY:["100%","100%"]},duration:200},{props:{opacity:[1,0],translateY:["0%","100%"]},easing:h,delay:200,duration:300}],leave:{props:{opacity:[0,1]},easing:"ease",duration:300}},"thumb-scale":{duration:400,easing:h,enter:{props:"transition.expandIn"},leave:{props:"transition.expandOut"}},"thumb-scale-flex":{duration:400,easing:h,enter:{props:{scale:[1,0],display:"flex"}},leave:{duration:200,props:{scale:[0,1],display:"flex"}}},"default":{duration:300,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},noop:{duration:0},pip:{enter:{props:{opacity:[1,0]},duration:400},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:200,easing:b}},voip:{enter:{props:{opacity:[1,0]},duration:400},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:200,easing:b}},"replace-fade":{enter:[{props:{opacity:[0,0]},duration:400},{props:{opacity:[1,0]},duration:400,delay:400}],leave:{props:{opacity:[0,1]},duration:400}},scaleAndFade:{duration:300,easing:h,enter:[{props:{scale:[1,0]}},{props:{opacity:[1,0]},duration:100}],leave:{props:{scaleX:[0,1],scaleY:[0,1],opacity:[0,1]}}},"similar-channels":{easing:"ease-out",duration:500,enter:{props:{opacity:[1,0]}}},"fade-ease-out":{easing:"ease-out",duration:300,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"pop-drawer-fast":{duration:50,easing:[.14,.62,.33,.9],enter:[{selector:"[data-js-navbar]",props:{translateX:["0%","100%"]}},{props:{opacity:[1,.5]}}],leave:[{selector:"[data-js-navbar]",props:{translateX:["100%","0%"]}},{props:{opacity:[0,1]}}]},"bot-plugin-carousel":{duration:350,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"pin-message":{duration:600,easing:h,enter:{props:{translateY:["0%","200%"],opacity:[1,0]}},leave:{props:{translateY:["-200%","0%"],opacity:[0,1]}}}};e=Object.freeze(d);g.registerEffects=a;g.Transitions=e}),98);
__d("WAWebVelocityAnimate",["asyncToGeneratorRuntime","lodash","velocity-animate"],(function(a,b,c,d,e,f,g){var h={FINISH:"finish",STOP:"stop"},i=new Map();function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(!a)return;for(var f=arguments.length,g=new Array(f>3?f-3:0),j=3;j<f;j++)g[j-3]=arguments[j];if(typeof b==="string"&&(b===h.FINISH||b===h.STOP))return c("velocity-animate").apply(void 0,[a,b,e].concat(g));k(a,function(a){var b=i.get(a)||0;i.set(a,b+1)});var m=b;if(typeof e==="object"&&typeof m==="object"){var n;typeof e.begin==="function"&&(n=e.begin);e.begin=function(a){for(var b in m){var c=m[b];Array.isArray(c)&&d("velocity-animate").hook(a,b,c[1])}n&&n(a)}}var o=(yield c("velocity-animate").apply(void 0,[a,b,e].concat(g)));k(o,function(a){var b=(i.get(a)||1)-1;b===0?(i["delete"](a),l(a)):i.set(a,b)});return o});return j.apply(this,arguments)}function k(a,b){Array.isArray(a)?a.forEach(function(a){b(a)}):b(a)}function l(a){var b,d=c("velocity-animate").Utilities.data(a),e=c("velocity-animate").State.delayedElements;c("lodash").forOwn(e,function(b,c){if(c==="count")return;(b===a||!b)&&delete e[c]});(d==null?void 0:(b=d.velocity)==null?void 0:b.tweensContainer)&&(d.velocity.tweensContainer.element=null);c("velocity-animate").Utilities.removeData(a,["fxqueue","velocity"])}g["default"]=a}),98);
__d("WAWebVelocityTransition",["invariant","Promise","WALogger","WAWebCmd","WAWebIdleTaskRunner","WAWebTransitions","WAWebVelocityAnimate","err","lodash","react","react-transition-group","useWAWebOnUnmount","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose([" "," wasn't found in VelocityTransitionGroupChild transitions."]);l=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["VTG Selector Empty "]);a=function(){return b};return b}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["VelocityTransitionGroupChild: Had to use findDOMNode fallback node in: ",""]);m=function(){return a};return a}var n=k||d("react"),o=j||(j=c("react")),p=n.Children,q=n.cloneElement,r=n.useRef,s={APPEAR:"appear",ENTER:"enter",LEAVE:"leave"};function e(a){var e=a.children,f=a.transitionName,g=a.delay,j=g===void 0?0:g,k=a.onAnimationComplete,l=a.displayName,n=a.nodeRef,v=a.onEnter,w=a.onExit;g=babelHelpers.objectWithoutPropertiesLoose(a,["children","transitionName","delay","onAnimationComplete","displayName","nodeRef","onEnter","onExit"]);var x=c("useWAWebUnmountSignal")(),y=r(),z=r(),A=r(),B=function(b){b===void 0&&(b=!0);if(n!=null&&n.current!=null)return n.current;var a=y.current;if(a!=null){if(a instanceof HTMLElement)return a;a=a.getElement==null?void 0:a.getElement();if(a)return a}if(!b)return null;a=z.current;a!=null&&d("WALogger").ERROR(m(),l).devConsole(a).sendLogs("velocity-transition-group-find-dom-node");return a};c("useWAWebOnUnmount")(function(){var a=B(!1);c("WAWebVelocityAnimate")(a,"finish")});var C=r(!1),D=r(),E=function(){D.current=d("WAWebIdleTaskRunner").UIBusyTasks.setBusy(D.current),C.current||(C.current=!0,d("WAWebCmd").Cmd.setUiBusy(!0))},F=function(){D.current!=null&&(d("WAWebIdleTaskRunner").UIBusyTasks.clearBusy(D.current),delete D.current),C.current&&(C.current=!1,d("WAWebCmd").Cmd.setUiBusy(!1))},G=function(a,b){b=b;if(!b)return[];Array.isArray(b)||(b=[b]);var d={};return b.map(function(b){var e=b.selector;b=babelHelpers.objectWithoutPropertiesLoose(b,["selector"]);var f;e?e in d?f=d[e]:f=d[e]=a?Array.from(a.querySelectorAll(e)):void 0:f=a;return c("lodash").isEmpty(f)?void 0:babelHelpers["extends"]({nodes:f},b)}).filter(Boolean)},H=function(a){var d=a;d===s.APPEAR&&(d=s.ENTER);d==="enter"||d==="leave"||h(0,66980);a=t(f);var e=a[d];if(!a||!e)return(i||(i=b("Promise"))).resolve();var g=c("lodash").omit(a,s.LEAVE,s.ENTER),l=B(),m=G(l,e);d===s.LEAVE&&(l==null?void 0:l.setAttribute("pointerEvents","none"),l==null?void 0:l.addEventListener("keypress",u,!0),l==null?void 0:l.addEventListener("keydown",u,!0));return(i||(i=b("Promise"))).all(m.map(function(a){var b=a.nodes,d=a.props,e=a.easing,f=a.duration,h=a.delay,i=a.stagger;a=a.drag;return c("WAWebVelocityAnimate")(b,d,{easing:e||g.easing||"easeInSine",duration:f||g.duration||0,delay:j||h||g.delay||0,queue:g.queue||!1,stagger:i||!1,drag:a||!1})}))["finally"](function(){g.cleanOnComplete===!0&&d===s.ENTER&&m.forEach(function(a){a=a.nodes;a=Array.isArray(a)?a:[a];a.forEach(function(a){return a==null?void 0:a.removeAttribute("style")})}),d===s.LEAVE&&(l==null?void 0:l.removeEventListener("keypress",u,!0),l==null?void 0:l.removeEventListener("keydown",u,!0)),k==null?void 0:k()})},I=function(b){var c=a.appear;c=c===void 0?!1:c;var d=a.enter;d=d===void 0?!0:d;var e=a.exit;e=e===void 0?!0:e;var f=!1;switch(b){case s.ENTER:f=d;break;case s.LEAVE:f=e;break;case s.APPEAR:f=c;break}f?(E(),H(b)["finally"](function(){F()}).then(function(){if(x.aborted)return;A.current==null?void 0:A.current()})):A.current==null?void 0:A.current()},J=function(a,b){v==null?void 0:v(),z.current=a,b?I(s.APPEAR):I(s.ENTER)},K=function(a){w==null?void 0:w(),z.current=a,I(s.LEAVE)},L=function(a){var b;b=(b=a==null?void 0:a.getComponent==null?void 0:a.getComponent())!=null?b:a;y.current=b;a=e==null?void 0:e.ref;if(!a)return;typeof a==="function"?a(b):a.current=b},M=e;if(n==null){var N=p.only(M);M=q(N,{ref:L})}return o.jsx(d("react-transition-group").Transition,babelHelpers["extends"]({nodeRef:n},g,{addEndListener:function(a,b){A.current=b},onEnter:J,onExit:K,children:M}))}e.displayName=e.name+" [from "+f.id+"]";function t(a){if(a&&!d("WAWebTransitions").Transitions[a]){d("WALogger").ERROR(l(),a).sendLogs("transition-name");throw c("err")("Invalid transitionName")}return d("WAWebTransitions").Transitions[a]}function u(a){a.preventDefault(),a.stopPropagation()}g.VelocityTransition=e}),98);
__d("useWAWebTimeout",["WATimeUtils","WAWebAlarm","react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;e=h||d("react");var i=e.useCallback,j=e.useEffect,k=e.useRef;function a(a,b,c){b===void 0&&(b=0);c=(c=c)!=null?c:{};c=c.immediate;var d=c===void 0?!1:c;c=l(a);var e=c[0];a=c[1];var f=i(function(){return e(b)},[e,b]);j(function(){d&&f()},[d,f]);return[f,a]}function l(a){var b=c("useWAWebStableCallback")(a),d=k(),e=i(function(){d.current&&self.clearTimeout(d.current)},[]);a=i(function(a){e(),d.current=self.setTimeout(b,a)},[e,b]);j(function(){return e},[e]);return[a,e]}function b(a,b,c){c=(c=c)!=null?c:{};var d=c.immediate,e=d===void 0?!1:d;d=c.isGlobal;var f=d===void 0?!1:d;c=m(a);var g=c[0];d=c[1];var h=i(function(){return g(b,f)},[g,b,f]);j(function(){e&&h()},[e,h]);return[h,d]}function m(a){var b=c("useWAWebStableCallback")(a),e=k(),f=i(function(){e.current!=null&&c("WAWebAlarm").clearTimeout(e.current)},[]);a=i(function(a,f){f?e.current=c("WAWebAlarm").setGlobalTimeout(b,d("WATimeUtils").castUnixTimeToMillisTime(a),e.current):e.current=c("WAWebAlarm").setLocalTimeout(b,d("WATimeUtils").castUnixTimeToMillisTime(a),e.current)},[b]);j(function(){return f},[f]);return[a,f]}g.useTimeout=a;g.useManualTimeout=l;g.useAlarm=b}),98);
__d("WAWebPopover.react",["ReactDOM","WALogger","WAWebKeyboardTabUtils","WAWebMutationObserver","WAWebPopoverArrow.react","WAWebPopoverContext.react","WAWebPopoverPosition","WAWebUimUie.react","WAWebVelocityTransition","err","react","useWAWebTimeout"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[popover] portal ref is missing!"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[popover] trying to anchor to mouse, but no coords are set"]);k=function(){return a};return a}e=i||d("react");var l=h||(h=c("react")),m=e.useCallback,n=e.useEffect,o=e.useImperativeHandle,p=e.useRef,q=e.useState,r=24,s=24,t="wa-popovers-bucket";function a(){return l.jsx("div",{id:t})}a.displayName=a.name+" [from "+f.id+"]";function u(a,b){a.addEventListener("click",b);return function(){a.removeEventListener("click",b)}}function v(a,b,c){var d=function(a){a.preventDefault(),c||b(a)};a.addEventListener("contextmenu",d);return function(){a.removeEventListener("contextmenu",d)}}function w(a,b,c){a.addEventListener("mouseenter",b);a.addEventListener("mouseleave",c);return function(){a.removeEventListener("mouseenter",b),a.removeEventListener("mouseleave",c)}}function x(a,b,c){a.addEventListener("focus",b);a.addEventListener("blur",c);return function(){a.removeEventListener("focus",b),a.removeEventListener("blur",c)}}function y(a,b,c,d){var e=function(c){return b!=null&&c instanceof Node&&(c===b||b.contains(c)||c===a||a.contains(c))},f=function(a){e(a.relatedTarget)||d()};a.addEventListener("mouseenter",c);a.addEventListener("mouseleave",f);b==null?void 0:b.addEventListener("mouseleave",f);return function(){a.removeEventListener("mouseenter",c),a.removeEventListener("mouseleave",f),b==null?void 0:b.removeEventListener("mouseleave",f)}}function b(a){var b=document.getElementById(t),e=a.target,f=a.position,g=a.alignment,h=a.buffer,i=h===void 0?8:h;h=a.openingDelay;var z=a.enableEnterTransition,A=z===void 0?!0:z;z=a.enableExitTransition;z=z===void 0?!0:z;var B=a.initHandling,C=a.controllerRef,D=a.anchorToMouseCoords,E=D===void 0?!1:D,F=a.includeArrow;D=a.arrowXStyle;var G=a.testid;G=d("WAWebPopoverContext.react").useWDSPopoverControllerContext();var H;if(e==="context"){if(G==null)throw c("err")('[Popover] A popover with a "context" target must be inside of a PopoverRefContext component');H=G.targetRef}else H=e;var I=p(null);e=q(null);var J=e[0],aa=e[1];e=q(!1);var K=e[0],L=e[1];e=q(!1);var M=e[0],N=e[1],O=p(null),P=m(function(){var a=H.current,b=I.current,c=O.current;if(b==null||a==null||!K)return;if(E===!0&&c==null){d("WALogger").WARN(k());return}c=d("WAWebPopoverPosition").getFixedElementPosition(E===!0&&c!=null?c:a,b,f,g,i,F===!0?{width:r,height:r/2,offset:s}:null);a=c.coords;b=c.alignment;var e=c.position;c=c.arrowCoords;var h=d("WAWebPopoverPosition").getDefaultTransformOrigin({position:e,alignment:b});aa(babelHelpers["extends"]({},a,{transformOrigin:h,position:e,alignment:b,arrowCoords:c}))},[I,H,f,g,i,K,E,F]);n(function(){if(H.current==null||M||!K)return;return d("WAWebMutationObserver").observeMutations(H.current,{subtree:!0,attributes:!0,childList:!0},function(){P()})},[H,P,M,K]);n(function(){if(I.current==null||M||!K)return;return d("WAWebMutationObserver").observeMutations(I.current,{subtree:!0,attributes:!0,childList:!0},function(){P()})},[I,P,M,K]);var Q=G==null?void 0:G.onOpen,R=a.onOpen;e=m(function(){L(!0),Q==null?void 0:Q(),R==null?void 0:R()},[Q,R]);var S=d("useWAWebTimeout").useTimeout(e,h),T=S[0],U=S[1],V=h!=null?T:e,W=m(function(a){a.stopPropagation(),E===!0?O.current={x:a.clientX,y:a.clientY}:O.current=null,V()},[E,V]),X=G==null?void 0:G.onClose,Y=a.onClose,Z=m(function(){O.current=null,X==null?void 0:X(),Y==null?void 0:Y(),U(),L(!1)},[U,X,Y]);n(function(){var a=H.current;if(a==null||B==null)return;var b=B;b instanceof Array||(b=[b]);var c=b.map(function(b){switch(b){case"click":return u(a,W);case"contextmenu":return v(a,W,M);case"hover":return w(a,W,Z);case"hover-popover":return y(a,I.current,W,Z);case"focus":return x(a,V,Z)}});return function(){return c.forEach(function(a){return a()})}},[B,H,V,Z,M,E,W]);S=function(){if(I.current!=null){var a=d("WAWebKeyboardTabUtils").getNextTabbableElement(I.current);a!=null&&a.focus()}};var $={showPopover:e,hidePopover:Z,popoverIsVisible:K,popoverIsAnimating:M};o(C,function(){return $});o(G==null?void 0:G.controllerRef,function(){return $});h=null;if(b!=null){var ba;T=l.jsxs("div",{className:"x1n2onr6",children:[F===!0&&(J==null?void 0:J.arrowCoords)!=null&&l.jsx(d("WAWebPopoverArrow.react").PopoverArrow,{coords:J.arrowCoords,popoverPosition:J.position,xstyle:D,width:r}),a.element]});if(a.dismissable===!0){G=l.jsx(d("WAWebUimUie.react").UIE,{escapable:!0,popable:!0,displayName:(C=a.name)!=null?C:"Popover",requestFocus:S,requestDismiss:Z,children:T})}else G=T;D=E!==!0&&l.jsx("div",{className:"x10l6tqk x8knxv4",style:{top:-i,right:-i,bottom:-i,left:-i}});h=d("ReactDOM").createPortal(l.jsx(d("WAWebVelocityTransition").VelocityTransition,{transitionName:"scaleAndFade","in":K,nodeRef:I,mountOnEnter:!0,unmountOnExit:!0,appear:!0,enter:A,exit:z,timeout:300,onEnter:function(){return P()},onEntering:function(){return N(!0)},onEntered:function(){A===!1&&P(),N(!1)},onExiting:function(){return N(!0)},onExited:function(){return N(!1)},children:l.jsxs("div",{ref:I,"data-testid":void 0,"data-animate-dropdown-item":!0,style:J,className:"xixxii4 x14g40p9 x1al4vs7",children:[D,G]})}),b)}else K&&b==null&&d("WALogger").ERROR(j()).devConsole({name:a.name});return{popover:h,showPopover:e,hidePopover:Z,popoverIsVisible:K,popoverIsAnimating:M}}g.PopoverAlignment=d("WAWebPopoverPosition").PopoverAlignment;g.PopoverPosition=d("WAWebPopoverPosition").PopoverPosition;g.ANCHOR_PORTAL_ID=t;g.PopoverPortalBucket=a;g.usePopoverElement=b}),98);
__d("WAWebWamEnumPsIdAction",[],(function(a,b,c,d,e,f){a=Object.freeze({CREATED:1,ROTATED:2,DELETED:3});f.PS_ID_ACTION=a}),66);
__d("WAWebPsIdUpdateWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPsIdAction"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PsIdUpdate:[2862,{isFromWamsys:[4,a.TYPES.BOOLEAN],psIdAction:[2,d("WAWebWamEnumPsIdAction").PS_ID_ACTION],psIdKey:[1,a.TYPES.INTEGER],psIdRotationFrequence:[3,a.TYPES.INTEGER]},[1,1,1],"regular"]},{PsIdUpdate:[]});g.PsIdUpdateWamEvent=b}),98);
__d("WAWebPwaDocumentMetadataUtils",["WAWebRuntimeEnvironmentUtils"],(function(a,b,c,d,e,f,g){var h="",i=-1,j;d("WAWebRuntimeEnvironmentUtils").isWorker()||(h=document.title);function a(a){a===void 0&&(a=null),a!=null&&(h=a),k(h)}function k(a){l()?document.title=" ":(self.clearTimeout(j),document.title+=" ",j=self.setTimeout(function(){document.title=a},0))}function b(a){a!=null&&(i=a),(l==null?void 0:l())&&"setAppBadge"in navigator&&(i===-1||i===0?navigator.clearAppBadge()["catch"](function(a){}):navigator.setAppBadge(i)["catch"](function(a){}))}function l(){return"matchMedia"in self?window.matchMedia("(display-mode: standalone)").matches:!1}g.setDocumentTitle=a;g.setAppBadge=b;g.isCurrentWebSessionInsidePwa=l}),98);
__d("WAWebSendDeliveryReceiptJob",["Promise","WADeprecatedSendIq","WAJids","WAWap","WAWebCommsWapMd","WAWebMessagingGatingUtils","WAWebOnlineDanglingReceipts","WAWebSchemaInactiveReceipt","WAWebSendReceiptJobCommon","WAWebUserPrefsMeUser","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebSchemaInactiveReceipt").getInactiveReceiptTable().all().then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=new Map(),e=Date.now().toString();a.forEach(function(a){var b=a.msgId,e=a.chatId;a=a.participantId;e=d("WAWebWidFactory").createWid(e);a=a?d("WAWebWidFactory").createWid(a):null;a=a||e;var f=c.get(e);f||(f=new Map(),c.set(e,f));e=f.get(a);e||(e=[],f.set(a,e));e.push(b)});yield (h||(h=b("Promise"))).all(Array.from(c.keys()).map(function(a){var b=c.get(a);if(!b)return;return d("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:a,type:d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:e,groupedReceipt:b})}));return d("WAWebSchemaInactiveReceipt").getInactiveReceiptTable().bulkRemove(a.map(function(a){return a.msgId}))});return function(b){return a.apply(this,arguments)}}())}function c(a,b,c,d,e,f){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,i){g===void 0&&(g=!1);var k=d("WAWebUserPrefsMeUser").assertGetMe(),l=c.isUser()&&d("WAWebWidFactory").toUserWid(k).equals(d("WAWebWidFactory").toUserWid(c))||f!=null&&d("WAWebWidFactory").toUserWid(k).equals(d("WAWebWidFactory").toUserWid(f));k=i.hasInactiveMsg===!0&&!l;var m=!k;i=(h||(h=b("Promise"))).resolve();if(!m&&!d("WAWebMessagingGatingUtils").isInactiveReceiptsV2Enabled()){k={msgId:a,chatId:c.toString(),participantId:f?f.toString():null};i=d("WAWebSchemaInactiveReceipt").getInactiveReceiptTable().createOrReplace(k)}return i.then(function(){void j(a,c,e,f,m,l,g);if(m)return d("WAWebSchemaInactiveReceipt").getInactiveReceiptTable().remove(a)})});return i.apply(this,arguments)}function j(a,b,c,d,e,f,g){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h){var i=d("WAWap").DROP_ATTR;h?i=d("WAWap").CUSTOM_STRING(d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.PEER_MSG):g?i=d("WAWap").CUSTOM_STRING(d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.SENDER):f||(i=d("WAWap").CUSTOM_STRING(d("WAWebSendReceiptJobCommon").RECEIPT_TYPE.INACTIVE));f=(yield d("WAWebSendReceiptJobCommon").shouldRequestTcToken(b,i,d("WAWap").DROP_ATTR));var j=d("WAJids").extractJidFromJidWithType(d("WAWebWidToJid").widToJidWithType(b));j=d("WAWap").wap("receipt",{id:d("WAWap").CUSTOM_STRING(a),to:d("WAWap").JID(j),participant:(b.isGroup()||b.isBroadcast())&&e?d("WAWebCommsWapMd").DEVICE_JID(e):d("WAWap").DROP_ATTR,recipient:!h&&g&&c?d("WAWebCommsWapMd").USER_JID(c):d("WAWap").DROP_ATTR,type:i,privacy_token:f?d("WAWap").CUSTOM_STRING("false"):d("WAWap").DROP_ATTR});d("WAWebOnlineDanglingReceipts").addOnlineDanglingReceipts(b,e||b,a);d("WADeprecatedSendIq").deprecatedCastStanza(j)});return k.apply(this,arguments)}g.sendDeliveryReceiptsAfterPresence=a;g.sendDeliveryReceiptsAfterDecryption=c}),98);
__d("WAWebSharedConstants",[],(function(a,b,c,d,e,f){a="__wa-mms";b="mms-type";f.IS_MMS_URL_SEARCH_PARAM=a;f.MMS_URL_MEDIA_TYPE_SEARCH_PARAM=b}),66);
__d("WAWebStickerDownloadGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_sticker_download_m1")}g.isStickerDownloadM1Enabled=a}),98);
__d("WAWebWebWamForceFlushWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebWamForceFlush:[3264,{},[1,1,1],"regular"]},{WebWamForceFlush:[]});g.WebWamForceFlushWamEvent=a}),98);
__d("WAWebWamUtils",["WABase64","WABinary","WALogger","WAQplUploader","WAWebABProps","WAWebPsIdUpdateWamEvent","WAWebUserPrefsGeneral","WAWebWamCodegenUtils","WAWebWamEnumAppBuildType","WAWebWamEnumWebcEnvCode","WAWebWamGlobals","WAWebWebWamForceFlushWamEvent","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["dropping invalid wam buffer"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAM: commitWorkerWamEvent failed, "," is not defined"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] force flushed all buffers"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["force flushed all wam buffers"]);k=function(){return a};return a}function a(){new(d("WAWebWebWamForceFlushWamEvent").WebWamForceFlushWamEvent)().commitAndWaitForFlush(!0)["finally"](function(){return d("WALogger").LOG(k()).tags("wam")}),d("WAQplUploader").forceQplUpload()["finally"](function(){return d("WALogger").LOG(j()).tags("qpl")})}function b(a,b,c){new(d("WAWebPsIdUpdateWamEvent").PsIdUpdateWamEvent)({psIdAction:a,psIdKey:b,psIdRotationFrequence:c}).commit()}function l(a,b){b=JSON.parse(b);var c=d("WAWebWamCodegenUtils").events[a];if(c==null){d("WALogger").ERROR(i(),a).sendLogs("wam-worker-event-undefined-error");return}new c(b).commit()}function m(a,b){var c;b=JSON.parse(b);b=b.value;d("WAWebWamGlobals").Global.set((c={},c[a]=b,c))}function e(a){var b=a.action,c=a.name;a=a.payload;return b==="commit"?l(c,a):m(c,a)}function f(a){var b=!0;try{a=new(d("WABinary").Binary)(d("WABase64").decodeB64(a));b=a.size()>d("WAWebABProps").getABPropConfigValue("web_wam_max_buffer_upload_size_bytes")}catch(a){d("WALogger").ERROR(h())}return b}function n(a){return a==="regular"?"regular":"private"}function o(){if(c("gkx")("26258"))return d("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.RELEASE;else if(c("gkx")("26259"))return d("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.BETA;return d("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.ALPHA}function p(){if(c("gkx")("26259"))return d("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.INTERN;else if(c("gkx")("26258"))return d("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.PROD;else if(c("gkx")("26256"))return d("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.E2E;throw c("err")("invalid env")}function q(){return d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb()}function r(a){if(c("gkx")("26256")){var b=window.__je2e_recordWAMEvent;(b||typeof b==="function")&&b(babelHelpers["extends"]({name:a.$className},a.all))}}function s(a,b){if(c("gkx")("26256")){var d=window.__je2e_recordWAMEvent;(d||typeof d==="function")&&d({name:a,value:b})}}function t(){return d("WAWebABProps").getABPropConfigValue("web_wam_data_loss_mitigation_buffering_duration")}function u(){return d("WAWebABProps").getABPropConfigValue("web_wam_data_loss_mitigation_rotate_interval")}g.forceFlushAllWamAndQplBuffers=a;g.logPsIdUpdate=b;g.processWorkerWamDataRow=e;g.isWamBufferTooBigToUpload=f;g.getChannelFromBufferKey=n;g.getAppBuild=o;g.getWamEnv=p;g.getAppIsBetaRelease=q;g.maybeForwardWamEventToJestE2e=r;g.maybeForwardWamAttributeToJestE2e=s;g.getInMemoryBufferingDurationInSecs=t;g.getBufferRotateIntervalInSecs=u}),98);
__d("WAWebWamEnumMessageDistributionEnumType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR_MESSAGE:0,DIRECT_MESSAGE:1,SENDER_KEY_DISTRIBUTION_MESSAGE:2});f.MESSAGE_DISTRIBUTION_ENUM_TYPE=a}),66);
__d("WAWebWorkerStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieBootstrap","WAWebDexieCastTypes","WAWebSchemaDeferredMessagesStorage","WAWebSchemaLocalStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);h=function(){return a};return a}var i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebDexieBootstrap").patchDexie();i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebWorkerStorageUtils").createStorage(),d("WAWebSchemaLocalStorage").addTable(),d("WAWebSchemaDeferredMessagesStorage").addTable(),i=d("WAWebWorkerStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("Failed to initialize worker storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebWorkerStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebWorkerStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}g.getLocalStorageTable=d("WAWebSchemaLocalStorage").getTable;g.getDeferredMessagesTable=d("WAWebSchemaDeferredMessagesStorage").getTable;g.initialize=a;g.destroy=e}),98);
__d("XHRHttpError",[],(function(a,b,c,d,e,f){"use strict";var g="HTTP_CLIENT_ERROR",h="HTTP_PROXY_ERROR",i="HTTP_SERVER_ERROR",j="HTTP_TRANSPORT_ERROR",k="HTTP_UNKNOWN_ERROR";function a(a,b){if(b===0){a=a.getProtocol();return a==="file"||a==="ftp"?null:j}else if(b>=100&&b<200)return h;else if(b>=200&&b<300)return null;else if(b>=400&&b<500)return g;else if(b>=500&&b<600)return i;else if(b>=12001&&b<12156)return j;else return k}f.HTTP_CLIENT_ERROR=g;f.HTTP_PROXY_ERROR=h;f.HTTP_SERVER_ERROR=i;f.HTTP_TRANSPORT_ERROR=j;f.HTTP_UNKNOWN_ERROR=k;f.getErrorCode=a}),66);
__d("xhrSimpleDataSerializer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}f["default"]=a}),66);
__d("XHRRequest",["invariant","DTSGUtils","Env","ErrorGuard","FBLogger","LSD","Log","NetworkStatus","ResourceTimingsStore","ResourceTypes","SprinkleConfig","TimeSlice","URI","XHRHttpError","ZeroRewrites","cr:8959","cr:8960","fb-error","getAsyncHeaders","xhrSimpleDataSerializer"],(function(a,b,c,d,e,f,g){var h,i,j,k=b("fb-error").ErrorXFBDebug,l=!1,m={loadedBytes:0,totalBytes:0};function n(a){return b("ZeroRewrites").rewriteURI(new(h||(h=b("URI")))(a))}a=function(){"use strict";function a(a){this.$3=function(){return null},this.$19=n(a),this.$7="POST",this.$6={},this.setResponseType(null),this.setTransportBuilder(b("ZeroRewrites").getTransportBuilderForURI(this.getURI())),this.setDataSerializer(b("xhrSimpleDataSerializer")),this.$11=b("ResourceTimingsStore").getUID(b("ResourceTypes").XHR,a!=null?a.toString():"")}var c=a.prototype;c.setURI=function(a){this.$19=n(a);return this};c.getURI=function(){return this.$19};c.setResponseType=function(a){this.$13=a;return this};c.setMethod=function(a){this.$7=a;return this};c.getMethod=function(){return this.$7};c.setData=function(a){this.$2=a;return this};c.getData=function(){return this.$2};c.setRawData=function(a){this.$10=a;return this};c.setRequestHeader=function(a,b){this.$6[a]=b;return this};c.setTimeout=function(a){this.$14=a;return this};c.getTimeout=function(){return this.$14};c.setResponseHandler=function(a){this.$12=a;return this};c.getResponseHandler=function(){return this.$12};c.setErrorHandler=function(a){this.$5=a;return this};c.getErrorHandler=function(){return this.$5};c.setNetworkFailureHandler=function(a){this.$8=a;return this};c.getNetworkFailureHandler=function(){return this.$8};c.getResponseHeader=function(a){var b=this.$9;return b?b.getResponseHeader(a):null};c.setAbortHandler=function(a){this.$1=a;return this};c.getAbortHandler=function(){return this.$1};c.setTimeoutHandler=function(a){this.$15=a;return this};c.getTimeoutHandler=function(){return this.$15};c.setUploadProgressHandler=function(a){this.$18=a;return this};c.setDownloadProgressHandler=function(a){this.$4=a;return this};c.setTransportBuilder=function(a){!this.$17||!b("ZeroRewrites").isRewritten(this.$19)?this.$17=a:b("FBLogger")("iorg-FOS").blameToPreviousFile().mustfix("can not set new TransportBuilder for the request %s",String(this.getURI()));return this};c.setDataSerializer=function(a){this.$3=a;return this};c.setWithCredentials=function(a){this.$20=a;return this};c.send=function(){var a=this.$14,c=this.$17;if(!c)return;var d=c();c=this.getURI();if(c.toString().includes("/../")||c.toString().includes("/..\\")||c.toString().includes("\\../")||c.toString().includes("\\..\\")){b("Log").error("XHRRequest.send(): path traversal is not allowed.");return!1}if(l===!0)return;var e=new(h||(h=b("URI")))(c).getQualifiedURI().toString(),f=this.$11;b("ResourceTimingsStore").updateURI(b("ResourceTypes").XHR,f,e);b("ResourceTimingsStore").measureRequestSent(b("ResourceTypes").XHR,f);this.$9=d;this.$7==="POST"||!this.$10||g(0,2346,this.$10,c);e=(i||(i=b("Env"))).force_param;e&&(this.$2=babelHelpers["extends"]({},this.getData()||{},e));if(this.$7==="GET"&&b("DTSGUtils").shouldAppendToken(c)){e=b("cr:8960").getCachedToken?b("cr:8960").getCachedToken():b("cr:8960").getToken();e&&(this.$2?this.$2.fb_dtsg_ag=e:this.$2={fb_dtsg_ag:e},b("SprinkleConfig").param_name&&(this.$2[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(e)))}if(this.$7==="POST"&&b("DTSGUtils").shouldAppendToken(c)){e=b("cr:8959").getCachedToken?b("cr:8959").getCachedToken():b("cr:8959").getToken();e&&(this.$2?this.$2.fb_dtsg=e:this.$2={fb_dtsg:e},b("SprinkleConfig").param_name&&(this.$2[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(e)));b("LSD").token&&(this.$2?this.$2.lsd=b("LSD").token:this.$2={lsd:b("LSD").token},b("SprinkleConfig").param_name&&!e&&(this.$2[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(b("LSD").token)))}this.$7==="GET"||this.$10?(c.addQueryData(this.$2),e=this.$10):e=this.$3(this.$2);function j(a){b("ResourceTimingsStore").measureResponseReceived(b("ResourceTypes").XHR,f);for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.apply(this,d)}j=b("TimeSlice").guard(j,"XHRRequest response received",{propagationType:b("TimeSlice").PropagationType.CONTINUATION});d.onreadystatechange=this.$21(j);d.onerror=this.$22(j);d.upload&&this.$18&&(d.upload.onprogress=this.$23.bind(this));this.$4&&(d.onprogress=this.$24.bind(this));a&&(this.$16=setTimeout(this.$25.bind(this),a));this.$20!=null&&(d.withCredentials=this.$20);d.open(this.$7,c.toString(),!0);j=!1;if(this.$6)for(a in this.$6)a.toLowerCase()==="content-type"&&(j=!0),d.setRequestHeader(a,this.$6[a]);this.$7=="POST"&&!this.$10&&!j&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var k=b("getAsyncHeaders")(c);Object.keys(k).forEach(function(a){d.setRequestHeader(a,k[a])});this.$13==="arraybuffer"&&("responseType"in d?d.responseType="arraybuffer":"overrideMimeType"in d?d.overrideMimeType("text/plain; charset=x-user-defined"):"setRequestHeader"in d&&d.setRequestHeader("Accept-Charset","x-user-defined"));this.$13==="blob"&&(d.responseType=this.$13);d.send(e)};c.abort=function(a){this.$26(),this.$1&&(j||(j=b("ErrorGuard"))).applyWithGuard(this.$1,null,[a],{name:"XHRRequest:_abortHandler"})};c.$26=function(){var a=this.$9;a&&(a.onreadystatechange=null,a.abort());this.$27()};c.$25=function(){this.$26(),this.$15&&(j||(j=b("ErrorGuard"))).applyWithGuard(this.$15,null,[],{name:"XHRRequest:_abortHandler"})};c.$28=function(a){if(this.$13)if("response"in a)return a.response;else if(this.$13==="arraybuffer"&&window.VBArray)return window.VBArray(a.responseBody).toArray();return a.responseText};c.$22=function(a){var c=this,d=this.$9;return function(){var e;e={errorCode:b("XHRHttpError").HTTP_TRANSPORT_ERROR,errorMsg:"Network Failure.",errorType:"Network",errorRawResponseHeaders:null,errorRawTransport:d==null?void 0:(e=d.constructor)==null?void 0:e.name,errorRawTransportStatus:0};c.$8?(j||(j=b("ErrorGuard"))).applyWithGuard(a.bind(void 0,c.$8),null,[e],{name:"XHRRequest:_networkFailureHandler"}):a(function(){});b("NetworkStatus").reportError()}};c.$21=function(a){var c=this,d=b("TimeSlice").guard(function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(this,c)},"XHRRequest onreadystatechange",{propagationType:b("TimeSlice").PropagationType.EXECUTION});return function(){var e=c.$9;if(e==null)return;var f=e.readyState;if(f>=2){var g=f===4;g&&k.addFromXHR(e);var h=c.getURI();h=b("XHRHttpError").getErrorCode(h,e.status);var i=c.$12;if(h!=null){if(g){var l={errorCode:h,errorMsg:c.$28(e),errorRawTransport:e.constructor.name,errorRawTransportStatus:e.status,errorRawResponseHeaders:i&&i.includeHeaders?e.getAllResponseHeaders():null,errorType:e.status?"HTTP "+e.status:"HTTP"};c.$5?(j||(j=b("ErrorGuard"))).applyWithGuard(a.bind(void 0,c.$5),null,[l],{name:"XHRRequest:_errorHandler"}):a(function(){})}}else if(i){if(g||i.parseStreaming&&f===3){l=g?a:d;f=(i==null?void 0:i.includeHeaders)?e.getAllResponseHeaders():null;(j||(j=b("ErrorGuard"))).applyWithGuard(l.bind(void 0,i),null,[c.$28(e),f,g],{name:"XHRRequest:handler"})}}else g&&a(function(){});g&&(h!="HTTP_TRANSPORT_ERROR"&&b("NetworkStatus").reportSuccess(),c.$27())}}};c.$23=function(a){m.loadedBytes=a.loaded,m.totalBytes=a.total,this.$18&&(j||(j=b("ErrorGuard"))).applyWithGuard(this.$18,null,[m],{name:"XHRRequest:_uploadProgressHandler"})};c.$24=function(a){a={loadedBytes:a.loaded,totalBytes:a.total};this.$4&&(j||(j=b("ErrorGuard"))).applyWithGuard(this.$4,null,[a],{name:"XHRRequest:_downloadProgressHandler"})};c.$27=function(){clearTimeout(this.$16),delete this.$9};a.disable=function(){l=!0};return a}();e.exports=a}),null);
__d("filterObject",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;function a(a,b,c){if(!a)return null;var d={};for(var e in a)g.call(a,e)&&b.call(c,a[e],e,a)&&(d[e]=a[e]);return d}f["default"]=a}),66);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("20935")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("20935")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.useInitScript&&b("gkx")("21112")||this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);if(this.$4.useInitScript&&b("gkx")("21112")){var a;a=b("nullthrows")((a=b("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(b("getWorkerInitScriptSPINParams")()))==null?void 0:a.toString());var d=new window.URL(this.$4.url,window.location.href).href;if(d==null)throw b("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(a,this.$4.name);this.__worker.postMessage({bundleUrl:d,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,d){var e=!(this.$4.useInitScript&&b("gkx")("21112"));c.$16(a,this.$4.name,babelHelpers["extends"]({},d,{cross_page_transition:!!this.$9,state:this.$3}),e)};c.$18=function(a){return Object.keys(b("filterObject")({object_url:a&&c.$19(),data_url:a&&c.$20(),worker:c.isSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("isSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url),c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(b("gkx")("21112")&&d.useInitScript===!0)e();else{b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url);if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length},!1)):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0},!1),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e)}return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&q()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e,f){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(g){g.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(f),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a,b){return m(a,b)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(c,d){return new a.Worker(b("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c),d!=null?{name:d}:{})}var n=b("memoize")(function(){var a,c;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var d=m(a);d.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);
__d("WAWebWamConstants",[],(function(a,b,c,d,e,f){a=5e4;b=5;c=100;d=64e3;f.WAM_MAX_BUFFER_SIZE=a;f.WAM_PROTOCOL_VERSION=b;f.WAM_WORKER_DATA_BATCH_SIZE=c;f.WAM_MAX_BUFFER_SIZE_FOR_UPLOAD=d}),66);
__d("WAWebWamStorage",["WALogger","WAWebWAWCStorage","WAWebWamConstants","WAWebWamUtils","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processWorkerWamData failed: ","\n",""],["processWorkerWamData failed: ","\\n",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[wam] getNextSequenceNumberForStream failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["getNextSequenceNumberForStream failed: ","\n",""],["getNextSequenceNumberForStream failed: ","\\n",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["deleteAll failed: ","\n",""],["deleteAll failed: ","\\n",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["update failed: ","\n",""],["update failed: ","\\n",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["add failed: ","\n",""],["add failed: ","\\n",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["savePsToken failed: ","\n",""],["savePsToken failed: ","\\n",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPsToken failed: ","\n",""],["getPsToken failed: ","\\n",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["updatePsMeta failed: ","\n",""],["updatePsMeta failed: ","\\n",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["addPsMeta failed: ","\n",""],["addPsMeta failed: ","\\n",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["getPsMeta failed: ","\n",""],["getPsMeta failed: ","\\n",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["removePsMeta failed: ","\n",""],["removePsMeta failed: ","\\n",""]);s=function(){return a};return a}function a(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield c("WAWebWAWCStorage").idb());return f.wam.add({key:a,buffer:e,channel:b},a)["catch"](function(a){d("WALogger").LOG(m(),a,a==null?void 0:a.stack)})});return t.apply(this,arguments)}function e(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=0;try{f=(yield c("WAWebWAWCStorage").idb().then(function(c){return c.wam.update(a,{key:a,buffer:e,channel:b})}))}catch(a){d("WALogger").LOG(l(),a,a==null?void 0:a.stack)}return f!==0});return u.apply(this,arguments)}function f(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={};try{yield c("WAWebWAWCStorage").idb().then(function(c){return c.wam.where("channel").equals(a).modify(function(a,c){b[a.key]=a.buffer,delete c.value})})}catch(a){d("WALogger").LOG(k(),a,a==null?void 0:a.stack)}return b});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=-1,f=1<<16;try{var g=(yield c("WAWebWAWCStorage").idb());yield g.transaction("rw",["wam_meta"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield g.wam_meta.where("streamId").equals(a).count());b===0?(yield g.wam_meta.add({streamId:a,seqNum:1}),e=1):yield g.wam_meta.where("streamId").equals(a).modify(function(a){e=a.seqNum+1;e>=f&&(e=1);a.seqNum=e;return a})}))}catch(a){d("WALogger").LOG(j(),a,a==null?void 0:a.stack)}if(e===-1){c("gkx")("26258")||d("WALogger").ERROR(i()).sendLogs("getNextSequenceNumberForStreamFailed");throw c("err")("could not get seq number for streamId "+a)}return e});return x.apply(this,arguments)}function y(a){return c("WAWebWAWCStorage").idb().then(function(b){return b.ps_meta.bulkDelete(a)})["catch"](function(a){d("WALogger").LOG(s(),a,a==null?void 0:a.stack)})}function z(){return c("WAWebWAWCStorage").idb().then(function(a){return a.ps_meta.toArray()})["catch"](function(a){d("WALogger").LOG(r(),a,a==null?void 0:a.stack);return[]})}function A(a){return c("WAWebWAWCStorage").idb().then(function(b){return b.ps_meta.bulkPut(a)})["catch"](function(a){d("WALogger").LOG(q(),a,a==null?void 0:a.stack)})}function B(a){return c("WAWebWAWCStorage").idb().then(function(b){return b.ps_meta.update(a.key,a)})["catch"](function(a){d("WALogger").LOG(p(),a,a==null?void 0:a.stack)})}function C(){return c("WAWebWAWCStorage").idb().then(function(a){return a.ps_tokens.get("token")})["catch"](function(a){d("WALogger").LOG(o(),a,a==null?void 0:a.stack)})}function D(a){return c("WAWebWAWCStorage").idb().then(function(b){return b.transaction("rw",["ps_tokens"],function(){return b.ps_tokens.put(a)})})["catch"](function(a){d("WALogger").LOG(n(),a,a==null?void 0:a.stack)})}function E(a,b){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=(yield c("WAWebWAWCStorage").idb());return d.transaction("rw",["core_wam","core_wam_meta"],function(){return d.core_wam.put(b).then(function(){return d.core_wam_meta.put(a)})})});return F.apply(this,arguments)}function G(a){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebWAWCStorage").idb());return b.core_wam.where("streamId").equals(a).modify({finished:!0})});return H.apply(this,arguments)}function I(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebWAWCStorage").idb());return b.core_wam_meta.get({streamId:a})});return J.apply(this,arguments)}function K(){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("WAWebWAWCStorage").idb());return a.core_wam.toArray()});return L.apply(this,arguments)}function M(){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("WAWebWAWCStorage").idb());return a.transaction("rw",["core_wam","core_wam_meta"],function(){return a.core_wam.clear().then(function(){return a.core_wam_meta.clear()})})});return N.apply(this,arguments)}function O(a){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebWAWCStorage").idb());return b.core_wam["delete"](a)});return P.apply(this,arguments)}function Q(a){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebWAWCStorage").idb());return b.transaction("rw",["worker_wam_events"],function(){return b.worker_wam_events.put(a)})});return R.apply(this,arguments)}function S(){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("WAWebWAWCStorage").idb());try{yield a.transaction("rw",["worker_wam_events"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield a.worker_wam_events.limit(d("WAWebWamConstants").WAM_WORKER_DATA_BATCH_SIZE).modify(function(a,b){d("WAWebWamUtils").processWorkerWamDataRow(a),delete b.value})}));var e=(yield a.worker_wam_events.count());return e>0}catch(a){d("WALogger").LOG(h(),a,a==null?void 0:a.stack);return!1}});return T.apply(this,arguments)}a={add:a,update:e,deleteAll:f,getNextSequenceNumberForStream:w,addCoreWamBuffer:E,finishAllCoreWamBuffers:G,getCoreWamStartingSequenceNumber:I,getAllCoreWamBuffers:K,nukeAllCoreWamBuffers:M,removeWamBufferByKey:O,storeWorkerWamData:Q,processWorkerWamData:S,removePsMeta:y,getPsMeta:z,addPsMeta:A,updatePsMeta:B,getPsToken:C,savePsToken:D};e=a;g["default"]=e}),98);
__d("WAWebWamPlatform",["WAWebPwaDocumentMetadataUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa()?"PWA":"WEB"}g.getWamPlatform=a}),98);
__d("WAWebStylesEnv",["WAWebUA"],(function(a,b,c,d,e,f,g){a=d("WAWebUA").UA.browser===d("WAWebUA").BROWSER_TYPE.CHROME||d("WAWebUA").UA.browser===d("WAWebUA").BROWSER_TYPE.OPERA;b=d("WAWebUA").UA.os===d("WAWebUA").OS_TYPE.MAC;c=d("WAWebUA").UA.os===d("WAWebUA").OS_TYPE.WINDOWS;g.hasSafariFix=d("WAWebUA").UA.isSafari;g.hasFirefoxFix=d("WAWebUA").UA.isGecko;g.hasEmoji=d("WAWebUA").UA.hasEmoji;g.hasFontFix=a;g.isOSMac=b;g.isOSWin=c}),98);
__d("WAWebUnstyledButton.react",["WAWebClassnames","WAWebKeyboardIsKeyActivation","WAWebUISpacing","react","stylex","useMergeRefs","useWAWebFocusState"],(function(a,b,c,d,e,f,g){var h,i,j=i||(i=d("react")),k=i.useRef,l={button:{fontFamily:"xjb2p0i",fontSize:"xk390pu",color:"x1heor9g",cursor:"x1ypdohk",backgroundColor:"xjbqb8w",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",$$css:!0},focused:{borderTopStartRadius:"xm3z3ea",borderTopEndRadius:"x1x8b98j",borderBottomEndRadius:"x131883w",borderBottomStartRadius:"x16mih1h",boxShadow:"x1d3d9uk",$$css:!0},disabled:{cursor:"xmper1u",$$css:!0}};b=j.forwardRef(a);function a(a,b){var e=a.testid;e=a.className_DONOTUSE;var f=a.children,g=a.dataTab,i=a.role,m=a.disabled,n=a.onClick,o=a.onContextMenu,p=a.onMouseEnter,q=a.onMouseOver,r=a.onMouseLeave,s=a.onMouseDown,t=a.onPaste,u=a.title,v=a.type;v=v===void 0?"button":v;var w=a.onFocus,x=a.onBlur,y=a.xstyle,z=a.tabIndex;z=z===void 0?0:z;var A=a.dir;a=babelHelpers.objectWithoutPropertiesLoose(a,["testid","className_DONOTUSE","children","dataTab","role","disabled","onClick","onContextMenu","onMouseEnter","onMouseOver","onMouseLeave","onMouseDown","onPaste","title","type","onFocus","onBlur","xstyle","tabIndex","dir"]);var B=k(null),C=c("useWAWebFocusState")(),D=C[0];C=C[1];b=c("useMergeRefs")(b,D,B);D={};a["aria-label"]!=null&&(D["aria-label"]=a["aria-label"]);a["aria-pressed"]!=null&&(D["aria-pressed"]=a["aria-pressed"]);a["aria-checked"]!=null&&(D["aria-checked"]=a["aria-checked"]);a=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)){a.stopPropagation();a.preventDefault();(a=B.current)==null?void 0:a.click()}};return j.jsx("button",babelHelpers["extends"]({className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((h||(h=c("stylex")))(l.button,d("WAWebUISpacing").uiPadding.all0,C&&l.focused,m===!0&&l.disabled,y),e),tabIndex:z,"data-tab":(C=g)!=null?C:void 0,"data-testid":void 0,disabled:m===!0,onClick:n,onContextMenu:o,onMouseEnter:p,onMouseOver:q,onMouseLeave:r,onMouseDown:s,onKeyPress:a,onPaste:t,onFocus:w,onBlur:x,ref:b,title:u,type:v,role:i,dir:A},D,{children:f}))}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebWDSText.react",["WAWebBox.react","WAWebStylesEnv","WAWebUnstyledButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={light:{fontWeight:"x1iikomf",$$css:!0},normal:{fontWeight:"x1fcty0u",$$css:!0},medium:{fontWeight:"xk50ysn",$$css:!0},semibold:{fontWeight:"x1s688f",$$css:!0},bold:{fontWeight:"x117nqv4",$$css:!0},inherit:{fontWeight:"x1pd3egz",$$css:!0}},k={teal:{color:"x1kjfwcu",$$css:!0},critical:{color:"xwc7gll",$$css:!0},primary:{color:"xw2npq5",$$css:!0},secondary:{color:"xhgddhk",$$css:!0},secondaryEmphasized:{color:"x1rw0npd",$$css:!0},success:{color:"x1vy04vk",$$css:!0},secondaryLighter:{color:"x40yjcy",$$css:!0},link:{color:"x1a06ls3",$$css:!0},white:{color:"xzqyxu6",$$css:!0}},l={start:{textAlign:"x1yc453h",$$css:!0},center:{textAlign:"x2b8uid",$$css:!0},end:{textAlign:"xp4054r",$$css:!0}},m={isOSMac:{fontSize:"x1jchvi3",lineHeight:"x1pujyh6",$$css:!0}},n=i.forwardRef(a);function a(a,b){var c;a=babelHelpers["extends"]({},a);var e=a.weight;e=e===void 0?"normal":e;var f=a.color,g=a.textAlign,h=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["weight","color","textAlign","xstyle"]);f=f!=null?k[f]:null;e=j[e];g=g!=null?l[g]:null;return i.jsx(d("WAWebBox.react").Box,babelHelpers["extends"]({},a,{as:(c=a.as)!=null?c:"div",labelFor:a.labelFor,ref:b,xstyle:[h,e,f,g]}))}a.displayName=a.name+" [from "+f.id+"]";var o={large:{fontSize:"xlm9qay",lineHeight:"x1w7sdjq",$$css:!0}};a=i.forwardRef(b);function b(a,b){a=babelHelpers["extends"]({},a);var c=a.xstyle,d=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(n,babelHelpers["extends"]({},d,{color:(d=a.color)!=null?d:"primary",ref:b,xstyle:[c,o.large]}))}b.displayName=b.name+" [from "+f.id+"]";var p={title:{fontSize:"x1lkfr7t",lineHeight:"xdbd6k5",$$css:!0}};b=i.forwardRef(e);function e(a,b){a=babelHelpers["extends"]({},a);var c=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(n,babelHelpers["extends"]({},e,{color:(e=a.color)!=null?e:"primary",ref:b,xstyle:[c,p.title,d("WAWebStylesEnv").isOSMac?m.isOSMac:null]}))}e.displayName=e.name+" [from "+f.id+"]";var q={muted:{fontSize:"x1f6kntn",lineHeight:"x16h55sf",$$css:!0}};e=i.forwardRef(r);function r(a,b){a=babelHelpers["extends"]({},a);var c=a.xstyle,d=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(n,babelHelpers["extends"]({},d,{color:(d=a.color)!=null?d:"secondaryEmphasized",ref:b,xstyle:[c,q.muted]}))}r.displayName=r.name+" [from "+f.id+"]";var s={sectionTitle:{fontSize:"x1f6kntn",lineHeight:"x1u7k74",$$css:!0}};r=i.forwardRef(t);function t(a,b){a=babelHelpers["extends"]({},a);var c=a.xstyle,d=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(n,babelHelpers["extends"]({},d,{color:(d=a.color)!=null?d:"teal",ref:b,xstyle:[c,s.sectionTitle]}))}t.displayName=t.name+" [from "+f.id+"]";var u={small:{fontSize:"x1nxh6w3",lineHeight:"xcgms0a",$$css:!0}};t=i.forwardRef(v);function v(a,b){a=babelHelpers["extends"]({},a);var c=a.xstyle,d=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(n,babelHelpers["extends"]({},d,{color:(d=a.color)!=null?d:"secondary",ref:b,xstyle:[c,u.small]}))}v.displayName=v.name+" [from "+f.id+"]";var w={teal:{color:"x1n68mz9",$$css:!0},blue:{color:"x1a06ls3",$$css:!0},green:{color:"x1o6zcso",$$css:!0},primary:{color:"xzwifym",$$css:!0},actionEmphasized:{color:"xo1mcw5",$$css:!0}},x={teal:{":hover_color":"xtr1s9g",$$css:!0},blue:{":hover_color":"xtbebva",$$css:!0},green:{":hover_color":"xwdbw1w",$$css:!0},primary:{":hover_color":"x4r3thm",$$css:!0},actionEmphasized:{":hover_color":"xyla9g4",$$css:!0}};v=i.forwardRef(y);function y(a,b){a=babelHelpers["extends"]({},a);var d=a.color;d=d===void 0?"blue":d;var e=a.weight;e=e===void 0?"medium":e;var f=a.highlightOnHover;a.xstyle;a.className_DONOTUSE;var g=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["color","weight","highlightOnHover","xstyle","className_DONOTUSE","xstyle"]);e=j[e];return i.jsx(c("WAWebUnstyledButton.react"),babelHelpers["extends"]({},a,{xstyle:[g,e,f===!0?x[d]:w[d]],ref:b}))}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.children;a=a.color;return i.jsx(d("WAWebBox.react").Box,{as:"span",xstyle:k[a],children:b})}z.displayName=z.name+" [from "+f.id+"]";g.WDSTextLarge=a;g.WDSTextTitle=b;g.WDSTextMuted=e;g.WDSTextSectionTitle=r;g.WDSTextSmall=t;g.WDSClickableText=v;g.WDSTextColor=z}),98);
__d("useForceUpdate",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useReducer;function a(){var a=i(function(a){return a+1},0);a[0];a=a[1];return a}g["default"]=a}),98);
__d("WAWebToastManager",["$InternalEnum","WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum").Mirrored(["LEFT","CENTER","RIGHT"]);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.open=function(a,b){this.trigger("open_toast",a,b)};c.close=function(a){this.trigger("close_toast",a)};return b}(c("WAWebEventEmitter"));e=new d();g.ToastPosition=a;g.ToastManager=e}),98);
__d("WAWebXAltIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="x-alt";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",d:"M17.25,7.8L16.2,6.75l-4.2,4.2l-4.2-4.2L6.75,7.8l4.2,4.2l-4.2,4.2l1.05,1.05l4.2-4.2l4.2,4.2l1.05-1.05 l-4.2-4.2L17.25,7.8z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.XAltIcon=a}),98);
__d("useLazyRef",["react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useRef;function a(a){var b=i(),c=i(!1);c.current||(b.current=a(),c.current=!0);return b}g["default"]=a}),98);
__d("WAWebToast.react",["WAWebToastManager","WAWebUISpacing","WAWebXAltIcon","lodash","react","stylex","useLazyRef","useWAWebTimeout"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useImperativeHandle,m=4e3,n={btnSuccess:{color:"x16yd4ao",fontWeight:"x117nqv4",$$css:!0},button:{color:"x17daq4n",cursor:"x1ypdohk",fontSize:"x1f6kntn",lineHeight:"x1evy7pa",flexShrink:"x2lah0s",$$css:!0},close:{color:"xil0kgl",$$css:!0},right:{end:"xds687c",left:null,right:null,$$css:!0},toast:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopStartRadius:"x12veol0",borderTopEndRadius:"xfrhtc",borderBottomEndRadius:"x14j70uu",borderBottomStartRadius:"xi7vu0r",color:"xm4wzdf",display:"x78zum5",fontSize:"x1f6kntn",lineHeight:"x1evy7pa",$$css:!0}};function o(a){a===void 0&&(a="");return c("lodash").uniqueId(a||"toast")}e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.msg,f=a.action,g=a.duration;g=g===void 0?m:g;var h=c("useLazyRef")(function(){return o()}).current,i=(a=a.id)!=null?a:h;a=d("useWAWebTimeout").useTimeout(function(){d("WAWebToastManager").ToastManager.close(i)},g,{immediate:!0});var j=a[0],n=function(){d("WAWebToastManager").ToastManager.close(i)};l(b,function(){return{restartDelay:j}});var r;if(f){h=Array.isArray(f)?f:[f];r=h.map(function(a,b){return k.jsx(p,{buttonText:a.actionText,onClick:a.dismiss===!0?n:a.onAction,theme:a.theme},a.actionText.toString()+b)})}return k.jsx(q,{actionText:e,actionButtons:r})}a.displayName=a.name+" [from "+f.id+"]";function p(a){var b=a.buttonText,e=a.onClick;a=a.theme;return k.jsx("button",{className:(i||(i=c("stylex")))(n.button,d("WAWebUISpacing").uiMargin.start15,a==="success"&&n.btnSuccess),onClick:e,children:b})}p.displayName=p.name+" [from "+f.id+"]";function b(a){a.buttonText;a=a.onClick;return k.jsx("button",{className:(i||(i=c("stylex")))(n.close,d("WAWebUISpacing").uiMargin.start15),onClick:a,children:k.jsx(d("WAWebXAltIcon").XAltIcon,{})})}b.displayName=b.name+" [from "+f.id+"]";function q(a){var b=a.actionButtons,e=a.actionText,f=a.dismissButton;a=a.toastPosition;return k.jsxs("div",{className:(i||(i=c("stylex")))(n.toast,d("WAWebUISpacing").uiPadding.vert12,d("WAWebUISpacing").uiPadding.horiz16,a==="RIGHT"&&n.right),"data-testid":void 0,"aria-live":"polite",children:[k.jsx("span",{children:e}),b,f]})}q.displayName=q.name+" [from "+f.id+"]";g.genId=o;g.Toast=e;g.ToastActionBtn=p;g.ToastDismissBtn=b;g.ToastBody=q}),98);
__d("sumOfArray",[],(function(a,b,c,d,e,f){function a(a){var b=0,c=a.length;for(var d=0;d<c;++d)b+=a[d];return b}f["default"]=a}),66);
__d("WAWebSystemTheme",["WAWebEventEmitter","WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");b.theme=b.getCurrentTheme();b.handleThemeChange=function(){var a=b.getCurrentTheme();if(!d("WAWebUserPrefsMultiDevice").isRegistered()||a===b.theme)return;b.theme=a;b.trigger("system_theme_change",a)};b.mediaQuery.addListener(b.handleThemeChange);return b}var c=b.prototype;c.getCurrentTheme=function(){return this.mediaQuery.matches?"dark":"light"};return b}(c("WAWebEventEmitter"));b=new a();e=b;g["default"]=e}),98);
__d("WAWebThemeContext",["WAWebSystemTheme","WAWebUserPrefsGeneral","bx","react"],(function(a,b,c,d,e,f,g){var h,i=h||d("react"),j=i.createContext,k=i.useContext,l=i.useEffect;i={light:[{id:"bg-chat-light",selectors:["[data-asset-chat-background-light]"],low:{"default":c("bx").getURL(c("bx")("9548"))},high:{"default":c("bx").getURL(c("bx")("9548"))}},{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{"default":c("bx").getURL(c("bx")("9547"))},high:{"default":c("bx").getURL(c("bx")("9547"))}}],dark:[{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{"default":c("bx").getURL(c("bx")("9547"))},high:{"default":c("bx").getURL(c("bx")("9547"))}}]};function m(){return d("WAWebUserPrefsGeneral").getSystemThemeMode()?c("WAWebSystemTheme").getCurrentTheme():d("WAWebUserPrefsGeneral").getTheme()}function a(a){d("WAWebUserPrefsGeneral").setTheme(a),n(a)}function b(){return m()==="light"}function e(){return m()==="dark"}function n(a){var b=document.body;a=a==="dark";b==null?void 0:b.classList.toggle("dark",a)}var o={theme:c("WAWebSystemTheme").getCurrentTheme(),systemThemeMode:!0,setTheme:a,setSystemThemeMode:d("WAWebUserPrefsGeneral").setSystemThemeMode},p=j(o);function q(){return k(p)}function f(){return q().theme==="dark"}function r(){var a=q();l(function(){var b=a.theme,c=a.systemThemeMode;a.setTheme("light");return function(){a.setTheme(b),a.setSystemThemeMode(c)}},[])}g.THEME_ASSETS=i;g.getTheme=m;g.setTheme=a;g.isLightTheme=b;g.isDarkTheme=e;g.applyThemeToUI=n;g.ThemeContext=p;g.useTheme=q;g.useIsDarkTheme=f;g.useForceLightTheme=r}),98);
__d("fbjs/lib/emptyFunction",["emptyFunction"],(function(a,b,c,d,e,f){"use strict";e.exports=b("emptyFunction")}),null);
__d("fbjs/lib/invariant",["invariant"],(function(a,b,c,d,e,f){"use strict";e.exports=b("invariant")}),null);
__d("fbjs/lib/warning",["warning"],(function(a,b,c,d,e,f){"use strict";e.exports=b("warning")}),null);
__d("prop-types/lib/ReactPropTypesSecret",[],(function(a,b,c,d,e,f){"use strict";a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a}),null);
__d("prop-types/checkPropTypes",["fbjs/lib/invariant","fbjs/lib/warning","prop-types/lib/ReactPropTypesSecret"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,b,c,d,e){}e.exports=a}),null);
__d("prop-types/prop-types",["fbjs/lib/emptyFunction","fbjs/lib/invariant","fbjs/lib/warning","prop-types/checkPropTypes","prop-types/lib/ReactPropTypesSecret"],(function(a,b,c,d,e,f){var g,h=function(){b("fbjs/lib/invariant")(0,1492)};a=function(){return h};h.isRequired=h;c={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:a,element:h,instanceOf:a,node:h,objectOf:a,oneOf:a,oneOfType:a,shape:a};c.checkPropTypes=b("fbjs/lib/emptyFunction");c.PropTypes=c;e.exports=c}),null);
__d("prop-types",["ReactFbPropTypes","prop-types/prop-types"],(function(a,b,c,d,e,f){e.exports=b("prop-types/prop-types")}),null);
/**
 * License: https://www.facebook.com/legal/license/l6Md91cKJ3N/
 */
__d("react-loadable-5.5.0",["Promise","prop-types","react"],(function(a,b,c,d,e,f){"use strict";var g,h,i=typeof Symbol==="function"&&typeof (typeof Symbol==="function"?Symbol.iterator:"@@iterator")==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==(typeof Symbol==="function"?Symbol.prototype:"@@prototype")?"symbol":typeof a};function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:a}function l(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var m=g||b("react"),n=[],o=[];function p(a){return(typeof __webpack_modules__==="undefined"?"undefined":i(__webpack_modules__))!=="object"?!1:a().every(function(a){return typeof a!=="undefined"&&typeof __webpack_modules__[a]!=="undefined"})}function q(a){a=a();var b={loading:!0,loaded:null,error:null};b.promise=a.then(function(a){b.loading=!1;b.loaded=a;return a})["catch"](function(a){b.loading=!1;b.error=a;throw a});return b}function r(a){var c={loading:!1,loaded:{},error:null},d=[];try{Object.keys(a).forEach(function(b){var e=q(a[b]);!e.loading?(c.loaded[b]=e.loaded,c.error=e.error):c.loading=!0;d.push(e.promise);e.promise.then(function(a){c.loaded[b]=a})["catch"](function(a){c.error=a})})}catch(a){c.error=a}c.promise=(h||(h=b("Promise"))).all(d).then(function(a){c.loading=!1;return a})["catch"](function(a){c.loading=!1;throw a});return c}function s(a){return a&&a.__esModule?a["default"]:a}function t(a,b){return m.createElement(s(a),b)}function u(a,c){var d;if(!c.loading)throw new Error("react-loadable requires a `loading` component");var e=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:t,webpack:null,modules:null},c),f=null;function g(){f||(f=a(e.loader));return f.promise}n.push(g);typeof e.webpack==="function"&&o.push(function(){if(p(e.webpack))return g()});return d=c=function(b){l(c,b);function c(d){j(this,c);var h=k(this,b.call(this,d));h.retry=function(){h.setState({error:null,loading:!0,timedOut:!1}),f=a(e.loader),h._loadModule()};g();h.state={error:f.error,pastDelay:!1,timedOut:!1,loading:f.loading,loaded:f.loaded};return h}c.preload=function(){return g()};c.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()};c.prototype._loadModule=function(){var a=this;this.context.loadable&&Array.isArray(e.modules)&&e.modules.forEach(function(b){a.context.loadable.report(b)});if(!f.loading)return;typeof e.delay==="number"&&(e.delay===0?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){a.setState({pastDelay:!0})},e.delay));typeof e.timeout==="number"&&(this._timeout=setTimeout(function(){a.setState({timedOut:!0})},e.timeout));var b=function(){if(!a._mounted)return;a.setState({error:f.error,loaded:f.loaded,loading:f.loading});a._clearTimeouts()};f.promise.then(function(){b()})["catch"](function(a){b()})};c.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()};c.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)};c.prototype.render=function(){if(this.state.loading||this.state.error)return m.createElement(e.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry});else if(this.state.loaded)return e.render(this.state.loaded,this.props);else return null};return c}(m.Component),c.contextTypes={loadable:b("prop-types").shape({report:b("prop-types").func.isRequired})},d}function a(a){return u(q,a)}function c(a){if(typeof a.render!=="function")throw new Error("LoadableMap requires a `render(loaded, props)` function");return u(r,a)}a.Map=c;d=function(a){l(b,a);function b(){j(this,b);return k(this,a.apply(this,arguments))}b.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}};b.prototype.render=function(){return m.Children.only(this.props.children)};return b}(m.Component);d.propTypes={report:b("prop-types").func.isRequired};d.childContextTypes={loadable:b("prop-types").shape({report:b("prop-types").func.isRequired}).isRequired};a.Capture=d;function v(a){var c=[];while(a.length){var d=a.pop();c.push(d())}return(h||(h=b("Promise"))).all(c).then(function(){if(a.length)return v(a)})}a.preloadAll=function(){return new(h||(h=b("Promise")))(function(a,b){v(n).then(a,b)})};a.preloadReady=function(){return new(h||(h=b("Promise")))(function(a,b){v(o).then(a,a)})};e.exports=a}),null);
__d("react-loadable",["react-loadable-5.5.0"],(function(a,b,c,d,e,f){e.exports=b("react-loadable-5.5.0")}),null);
__d("WAWebText_DONOTUSE.react",["WAWebClassnames","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={10:{fontSize:"x190qgfh",$$css:!0},12:{fontSize:"x1pg5gke",$$css:!0},13:{fontSize:"x1nxh6w3",$$css:!0},14:{fontSize:"x1f6kntn",$$css:!0},15:{fontSize:"x6prxxf",$$css:!0},16:{fontSize:"x1jchvi3",$$css:!0},18:{fontSize:"x1c3i2sq",$$css:!0},20:{fontSize:"x1603h9y",$$css:!0},24:{fontSize:"xngnso2",$$css:!0},28:{fontSize:"x1q74xe4",$$css:!0},32:{fontSize:"x579bpy",$$css:!0},inherit:{fontSize:"x1qlqyl8",$$css:!0}},l={light:{fontWeight:"x1iikomf",$$css:!0},normal:{fontWeight:"x1fcty0u",$$css:!0},medium:{fontWeight:"xk50ysn",$$css:!0},semibold:{fontWeight:"x1s688f",$$css:!0},bold:{fontWeight:"x117nqv4",$$css:!0},inherit:{fontWeight:"x1pd3egz",$$css:!0}},m={accent:{color:"x1n68mz9",$$css:!0},danger:{color:"x1sr8853",$$css:!0},dark:{color:"x1wm35g",$$css:!0},primary:{color:"xzwifym",$$css:!0},secondary:{color:"x40yjcy",$$css:!0},muted:{color:"x16cd2qt",$$css:!0},success:{color:"x16yd4ao",$$css:!0},disabled:{color:"x1pumdge",$$css:!0},link:{color:"x1a06ls3",$$css:!0}},n={sectionTitle:{fontSize:"x1f6kntn",lineHeight:"x1u7k74",color:"x1n68mz9",$$css:!0},sectionTitleLarger:{fontSize:"x1jchvi3",lineHeight:"x1u7k74",color:"x1n68mz9",$$css:!0},chatInfoSectionTitle:{fontSize:"x1f6kntn",lineHeight:"x1u7k74",color:"x1xhoq4m",$$css:!0},plain:{fontSize:"x1f6kntn",lineHeight:"x16h55sf",$$css:!0}},o=j.forwardRef(a);function a(a,b){var e;a=babelHelpers["extends"]({},a);var f=a.weight;f=f===void 0?"normal":f;var g=a.as;g=g===void 0?"span":g;var h=a.size;h=h===void 0?"14":h;var o=a.theme;g=g;var p=a.color?m[a.color]:null;f=l[f];e=((e=a.xstyle)!=null?e:{}).fontSize!=null?null:h;h=e!=null?k[e]:null;var q;o&&(q=n[o]);return j.jsx(g,babelHelpers["extends"]({},a.extras,{ref:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((i||(i=c("stylex")))([h,q,f,p,a.xstyle]),a.className),"aria-label":(e=a.ariaLabel)!=null?e:"","data-testid":void 0,children:a.children}))}a.displayName=a.name+" [from "+f.id+"]";var p={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"};a=j.forwardRef(b);function b(a,b){a=babelHelpers["extends"]({},a);var c=a.level;c=c===void 0?"1":c;a=babelHelpers.objectWithoutPropertiesLoose(a,["level"]);return j.jsx(o,babelHelpers["extends"]({ref:b,as:p[c]},a))}b.displayName=b.name+" [from "+f.id+"]";b=j.forwardRef(e);function e(a,b){a=babelHelpers["extends"]({},a);return j.jsx(o,babelHelpers["extends"]({ref:b,as:"p"},a))}e.displayName=e.name+" [from "+f.id+"]";e=j.forwardRef(q);function q(a,b){a=babelHelpers["extends"]({},a);return j.jsx(o,babelHelpers["extends"]({ref:b,as:"div"},a))}q.displayName=q.name+" [from "+f.id+"]";q=j.forwardRef(r);function r(a,b){a=babelHelpers["extends"]({},a);return j.jsx(o,babelHelpers["extends"]({ref:b,as:"span"},a))}r.displayName=r.name+" [from "+f.id+"]";r=j.forwardRef(s);function s(a,b){a=babelHelpers["extends"]({},a);var c=a.htmlFor;a=babelHelpers.objectWithoutPropertiesLoose(a,["htmlFor"]);return j.jsx(o,babelHelpers["extends"]({ref:b,as:"label"},a,{extras:{htmlFor:c}}))}s.displayName=s.name+" [from "+f.id+"]";g.Text=o;g.TextHeader=a;g.TextParagraph=b;g.TextDiv=e;g.TextSpan=q;g.TextLabel=r}),98);
__d("WAWebVelocityTransitionGroup",["WAWebClassnames","WAWebVelocityTransition","react","react-transition-group","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).Children;b=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=l.toArray(a.children),f=a.transitionName,g=f===void 0?"default":f,h=a.delay,j=a.onAnimationComplete;f=a.component;f=f===void 0?"span":f;var m=a.testid;m=a.appear;var n=a.enter,o=a.exit,p=a.displayName,q=a.xstyle;a=a.className_DONOTUSE;return k.jsx(f,{ref:b,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(a,(i||(i=c("stylex")))(q)),"data-testid":void 0,children:k.jsx(d("react-transition-group").TransitionGroup,{component:null,appear:m,enter:n,exit:o,children:e==null?void 0:e.map(function(a){return k.jsx(d("WAWebVelocityTransition").VelocityTransition,{transitionName:g,delay:h,onAnimationComplete:j,displayName:p,children:a},a.key)})})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebWDSTooltip.react",["WAWebPopover.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={tooltip:{display:"x1rg5ohu",maxWidth:"x1dc814f",fontSize:"x1nxh6w3",color:"xjafh1k",textAlign:"x2b8uid",textOverflow:"xlyipyv",textShadow:"x7opvkv",backgroundColor:"xj5tmjb",borderTopStartRadius:"xhw592a",borderTopEndRadius:"xwihvcr",borderBottomEndRadius:"x7wuybg",borderBottomStartRadius:"xb9tvrk",$$css:!0},arrow:{backgroundColor:"xj5tmjb",$$css:!0}},l=j.forwardRef(a);function a(a,b){var e=a.children;a=a.onClick;var f={};a!=null&&(f={onClick:a,role:"button",tabIndex:0});return j.jsx("div",babelHelpers["extends"]({ref:b,role:"tooltip","data-testid":void 0,className:(i||(i=c("stylex")))([k.tooltip,d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiPadding.vert8])},f,{children:e}))}a.displayName=a.name+" [from "+f.id+"]";function m(a){var b=a.element,c=a.onClick;a=babelHelpers.objectWithoutPropertiesLoose(a,["element","onClick"]);a=babelHelpers["extends"]({},a,{dismissable:Boolean(c),element:j.jsx(l,{onClick:c,children:b}),arrowXStyle:k.arrow});c=d("WAWebPopover.react").usePopoverElement(a);b=c.popover;a=c.showPopover;var e=c.hidePopover;c=c.popoverIsVisible;return{tooltip:b,showTooltip:a,hideTooltip:e,tooltipIsVisible:c}}function b(a){var b=a.targetRef,c=a.position,d=a.alignment,e=a.children,f=a.buffer;f=f===void 0?8:f;var g=a.showOnFocus;g=g===void 0?!0:g;var h=a.name,i=a.enableEnterTransition;i=i===void 0?!0:i;var j=a.enableExitTransition;j=j===void 0?!1:j;var k=a.openingDelay;a=a.testid;b=m({target:b,position:c,alignment:d,element:e,buffer:f,name:h,enableEnterTransition:i,enableExitTransition:j,initHandling:g?["hover","focus"]:"hover",openingDelay:k,testid:a});c=b.tooltip;return c}b.displayName=b.name+" [from "+f.id+"]";g.PopoverAlignment=d("WAWebPopover.react").PopoverAlignment;g.PopoverPosition=d("WAWebPopover.react").PopoverPosition;g.useWDSTooltip=m;g.WDSHoverTooltip=b}),98);
__d("keyMirror",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={};if(!(a instanceof Object&&!Array.isArray(a)))throw c("unrecoverableViolation")("keyMirror(...): Argument must be an object.","comet_infra");for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;b[d]=d}return b}g["default"]=a}),98);
__d("useWAWebStaticButtonA11y",["WAWebKeyboardIsKeyActivation","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useRef;function j(a){}function a(a,b){var d=i(),e=function(a){d.current=a},f=function(a){if(c("WAWebKeyboardIsKeyActivation")(a)){a.stopPropagation();a.preventDefault();(a=d.current)==null?void 0:a.click()}},g=(b==null?void 0:b.disabled)===!0;a=g?j:a;return[e,{"aria-disabled":(e=b==null?void 0:b.disabled)!=null?e:void 0,onClick:a,onKeyPress:f,role:"button",tabIndex:g?-1:(e=b==null?void 0:b.tabIndex)!=null?e:0}]}g["default"]=a}),98);
__d("uniqueBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=new Map(a.map(function(a){return[b?b(a):a,a]}));return Array.from(a.values())}f["default"]=a}),66);
__d("WAWebUpdaterVersion",["WACustomError","WAWebBuildConstants"],(function(a,b,c,d,e,f,g){var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WACustomError").customError("InvalidVersion"));b=function(){function a(a){a=a.split(".");if(a.length!==3)throw new h("Version format does not contain 3 numbers.");this.primary=Number.parseInt(a[0],10);this.secondary=Number.parseInt(a[1],10);this.tertiary=Number.parseInt(a[2],10);if(Number.isNaN(this.primary)||Number.isNaN(this.secondary)||Number.isNaN(this.tertiary))throw new h("Version contains a non-parseable string.")}var b=a.prototype;b.lt=function(b){b=b;typeof b==="string"&&(b=new a(b));return this.primary<b.primary||this.primary===b.primary&&this.secondary<b.secondary||this.primary===b.primary&&this.secondary===b.secondary&&this.tertiary<b.tertiary};b.equals=function(b){b=b;if(b==null||b==="")return!1;typeof b==="string"&&(b=new a(b));return this.primary===b.primary&&this.secondary===b.secondary&&this.tertiary===b.tertiary};b.toString=function(){return this.primary+"."+this.secondary+"."+this.tertiary};return a}();function a(a){return a.replace(/\.[di]$/,"")}c=a(d("WAWebBuildConstants").VERSION_STR);g.Version=b;g.sanitizeVersionStr=a;g.SANITIZED_VERSION_STR=c}),98);
__d("WAWebStickersFavoriteSyncAction",["WABase64","WABaseGlobals","WAJids","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebFavoriteStickerCollection","WAWebMiscGatingUtils","WAWebStickerModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: successfully "," sticker ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: try remove the sticker but it isn't in favorite sticker panel."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: skipping adding favorite sticker since it has been added"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: got an empty fileEncSha256 or mediaKey with filehash ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: malformed mutation"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: malformed mutation"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: operation not supported"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync operation not supported"]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.FavoriteSticker};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMiscGatingUtils").isFavoriteStickersEnabled()){d("WALogger").WARN(o());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}a=a.map(function(a){try{if(a.operation!=="set"){d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}var b=a.indexParts,c=a.value;a=a.timestamp;b=b[1];if(!b)return{actionState:d("WASyncdConst").SyncActionState.Malformed};c=c.stickerAction;if(c==null){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var e=c.fileEncSha256,f=c.mediaKey,g=c.mimetype,o=c.height,p=c.width,q=c.directPath,r=c.isFavorite;c=c.deviceIdHint;if(r==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}(e==null||f==null)&&d("WALogger").DEV(k(),b);if(r){if(d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(b)){d("WALogger").LOG(j());return{actionState:d("WASyncdConst").SyncActionState.Success}}q=new(d("WAWebStickerModel").StickerModel)({id:b,directPath:q,filehash:b,encFilehash:e?d("WABase64").encodeB64(e):"",mediaKey:f!=null?d("WABase64").encodeB64(f):"",mediaKeyTimestamp:a,width:p,height:o,mimetype:g});d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.addOrUpdateStickers([q],a,c)}else{e=d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(b);if(!e){d("WALogger").DEV(i());return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.removeAndSave(b)}d("WALogger").DEV(h(),r?"favorite":"unfavorite",b);return{actionState:d("WASyncdConst").SyncActionState.Success}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return a});function c(b){return a.apply(this,arguments)}return c}();e.generateFavoriteSyncMutation=function(a,b,c){var e;e={stickerAction:{fileEncSha256:d("WABase64").decodeB64((e=a.encFilehash)!=null?e:""),mediaKey:d("WABase64").decodeB64((e=a.mediaKey)!=null?e:""),mimetype:a.mimetype,height:a.height,width:a.width,directPath:a.directPath!=null?a.directPath:void 0,isFavorite:b,deviceIdHint:d("WAJids").interpretAsNumber(d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid()))}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a.filehash],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:e,timestamp:c,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebStickersRemoveRecentSyncAction",["WALogger","WALongInt","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebMiscGatingUtils","WAWebRecentStickerCollectionMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: skipping remove recent sticker since remove timestamp (",") is smaller than added timestamp (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: removed a recent sticker"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: orphan remove recent sticker"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no sticker hash provided"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: remove recent sticker sync: operation not supported"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: remove recent sticker operation not supported"]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.RemoveRecentSticker};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMiscGatingUtils").isRecentStickersMDEnabled()){d("WALogger").WARN(m());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}var b=a.indexParts;b=b[1];if(b==null){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=(a=a.value.removeRecentStickerAction)==null?void 0:a.lastStickerSentTs;b=d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.get(b);if(!b){d("WALogger").DEV(j());return{actionState:d("WASyncdConst").SyncActionState.Orphan}}var c=d("WALongInt").maybeNumberOrThrowIfTooLarge(a);c==null||d("WALongInt").numberOrThrowIfTooLarge(b.timestamp)<=c?(d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.removeAndSave(b),d("WALogger").DEV(i())):d("WALogger").DEV(h(),a,b.timestamp);return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();e.generateRemoveStickerMutation=function(a){var b=d("WATimeUtils").unixTimeMs(),c={removeRecentStickerAction:{lastStickerSentTs:a.timestamp}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a.sticker.filehash],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:c,timestamp:b,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebVisibilityOffIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="visibility-off";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M12 7C14.76 7 17 9.24 17 12C17 12.65 16.87 13.26 16.64 13.83L19.56 16.75C21.07 15.49 22.26 13.86 22.99 12C21.26 7.61 16.99 4.5 11.99 4.5C10.59 4.5 9.25 4.75 8.01 5.2L10.17 7.36C10.74 7.13 11.35 7 12 7ZM2 4.27L4.28 6.55L4.74 7.01C3.08 8.3 1.78 10.02 1 12C2.73 16.39 7 19.5 12 19.5C13.55 19.5 15.03 19.2 16.38 18.66L16.8 19.08L19.73 22L21 20.73L3.27 3L2 4.27ZM7.53 9.8L9.08 11.35C9.03 11.56 9 11.78 9 12C9 13.66 10.34 15 12 15C12.22 15 12.44 14.97 12.65 14.92L14.2 16.47C13.53 16.8 12.79 17 12 17C9.24 17 7 14.76 7 12C7 11.21 7.2 10.47 7.53 9.8ZM11.84 9.02L14.99 12.17L15.01 12.01C15.01 10.35 13.67 9.01 12.01 9.01L11.84 9.02Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.VisibilityOffIcon=a}),98);
__d("useWAWebAsync",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var d=c("useWAWebStableCallback")(a);a=j(!0);var e=a[0],f=a[1];a=j(null);var g=a[0],h=a[1];a=j(null);var k=a[0],l=a[1];i(function(){var a=new AbortController();f(!0);d().then(function(b){a.signal.aborted||(h(function(){return b}),f(!1),l(null))})["catch"](function(a){f(!1),l(a)});return function(){a.abort()}},[d].concat(b));if(e)return{loading:!0,error:null,value:null};return k?{loading:!1,error:k,value:null}:{loading:!1,error:null,value:g}}g["default"]=a}),98);
__d("useWAWebInterval",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef;function a(a,b,d){b===void 0&&(b=0);d=(d=d)!=null?d:{};d=d.immediate;var e=d===void 0?!1:d,f=c("useWAWebStableCallback")(a),g=k(),h=i(function(){g.current&&self.clearInterval(g.current)},[]),l=i(function(){h(),g.current=self.setInterval(f,b)},[h,b,f]);j(function(){e&&l();return h},[e,l,h]);return[l,h]}g["default"]=a}),98);
__d("useWAWebToggle",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useState;function a(a,b){var d=c("useWAWebStableCallback")(b);b=j(a);a=b[0];var e=b[1];b=i(function(){return e(function(a){a=!a;d(a);return a})},[d]);return[a,b]}g["default"]=a}),98);